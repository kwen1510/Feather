function j2(h,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in h)){const c=Object.getOwnPropertyDescriptor(r,o);c&&Object.defineProperty(h,o,c.get?c:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();function vh(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var ng={exports:{}},$f={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p1;function L2(){if(p1)return $f;p1=1;var h=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(r,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:h,type:r,key:f,ref:o!==void 0?o:null,props:c}}return $f.Fragment=n,$f.jsx=s,$f.jsxs=s,$f}var m1;function q2(){return m1||(m1=1,ng.exports=L2()),ng.exports}var et=q2(),ag={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function P2(){if(v1)return ge;v1=1;var h=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),E=Symbol.iterator;function D(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,q={};function H(F,lt,it){this.props=F,this.context=lt,this.refs=q,this.updater=it||S}H.prototype.isReactComponent={},H.prototype.setState=function(F,lt){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,lt,"setState")},H.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=H.prototype;function z(F,lt,it){this.props=F,this.context=lt,this.refs=q,this.updater=it||S}var w=z.prototype=new B;w.constructor=z,G(w,H.prototype),w.isPureReactComponent=!0;var M=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},y=Object.prototype.hasOwnProperty;function U(F,lt,it){var X=it.ref;return{$$typeof:h,type:F,key:lt,ref:X!==void 0?X:null,props:it}}function N(F,lt){return U(F.type,lt,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===h}function Q(F){var lt={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(it){return lt[it]})}var I=/\/+/g;function K(F,lt){return typeof F=="object"&&F!==null&&F.key!=null?Q(""+F.key):lt.toString(36)}function V(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(A,A):(F.status="pending",F.then(function(lt){F.status==="pending"&&(F.status="fulfilled",F.value=lt)},function(lt){F.status==="pending"&&(F.status="rejected",F.reason=lt)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function x(F,lt,it,X,J){var $=typeof F;($==="undefined"||$==="boolean")&&(F=null);var nt=!1;if(F===null)nt=!0;else switch($){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(F.$$typeof){case h:case n:nt=!0;break;case _:return nt=F._init,x(nt(F._payload),lt,it,X,J)}}if(nt)return J=J(F),nt=X===""?"."+K(F,0):X,M(J)?(it="",nt!=null&&(it=nt.replace(I,"$&/")+"/"),x(J,lt,it,"",function(Ht){return Ht})):J!=null&&(L(J)&&(J=N(J,it+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(I,"$&/")+"/")+nt)),lt.push(J)),1;nt=0;var gt=X===""?".":X+":";if(M(F))for(var Rt=0;Rt<F.length;Rt++)X=F[Rt],$=gt+K(X,Rt),nt+=x(X,lt,it,$,J);else if(Rt=D(F),typeof Rt=="function")for(F=Rt.call(F),Rt=0;!(X=F.next()).done;)X=X.value,$=gt+K(X,Rt++),nt+=x(X,lt,it,$,J);else if($==="object"){if(typeof F.then=="function")return x(V(F),lt,it,X,J);throw lt=String(F),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return nt}function P(F,lt,it){if(F==null)return F;var X=[],J=0;return x(F,X,"","",function($){return lt.call(it,$,J++)}),X}function Z(F){if(F._status===-1){var lt=F._result;lt=lt(),lt.then(function(it){(F._status===0||F._status===-1)&&(F._status=1,F._result=it)},function(it){(F._status===0||F._status===-1)&&(F._status=2,F._result=it)}),F._status===-1&&(F._status=0,F._result=lt)}if(F._status===1)return F._result.default;throw F._result}var k=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},at={map:P,forEach:function(F,lt,it){P(F,function(){lt.apply(this,arguments)},it)},count:function(F){var lt=0;return P(F,function(){lt++}),lt},toArray:function(F){return P(F,function(lt){return lt})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ge.Activity=R,ge.Children=at,ge.Component=H,ge.Fragment=s,ge.Profiler=o,ge.PureComponent=z,ge.StrictMode=r,ge.Suspense=g,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ge.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},ge.cache=function(F){return function(){return F.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(F,lt,it){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var X=G({},F.props),J=F.key;if(lt!=null)for($ in lt.key!==void 0&&(J=""+lt.key),lt)!y.call(lt,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&lt.ref===void 0||(X[$]=lt[$]);var $=arguments.length-2;if($===1)X.children=it;else if(1<$){for(var nt=Array($),gt=0;gt<$;gt++)nt[gt]=arguments[gt+2];X.children=nt}return U(F.type,J,X)},ge.createContext=function(F){return F={$$typeof:f,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:c,_context:F},F},ge.createElement=function(F,lt,it){var X,J={},$=null;if(lt!=null)for(X in lt.key!==void 0&&($=""+lt.key),lt)y.call(lt,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(J[X]=lt[X]);var nt=arguments.length-2;if(nt===1)J.children=it;else if(1<nt){for(var gt=Array(nt),Rt=0;Rt<nt;Rt++)gt[Rt]=arguments[Rt+2];J.children=gt}if(F&&F.defaultProps)for(X in nt=F.defaultProps,nt)J[X]===void 0&&(J[X]=nt[X]);return U(F,$,J)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(F){return{$$typeof:p,render:F}},ge.isValidElement=L,ge.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Z}},ge.memo=function(F,lt){return{$$typeof:b,type:F,compare:lt===void 0?null:lt}},ge.startTransition=function(F){var lt=T.T,it={};T.T=it;try{var X=F(),J=T.S;J!==null&&J(it,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(A,k)}catch($){k($)}finally{lt!==null&&it.types!==null&&(lt.types=it.types),T.T=lt}},ge.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ge.use=function(F){return T.H.use(F)},ge.useActionState=function(F,lt,it){return T.H.useActionState(F,lt,it)},ge.useCallback=function(F,lt){return T.H.useCallback(F,lt)},ge.useContext=function(F){return T.H.useContext(F)},ge.useDebugValue=function(){},ge.useDeferredValue=function(F,lt){return T.H.useDeferredValue(F,lt)},ge.useEffect=function(F,lt){return T.H.useEffect(F,lt)},ge.useEffectEvent=function(F){return T.H.useEffectEvent(F)},ge.useId=function(){return T.H.useId()},ge.useImperativeHandle=function(F,lt,it){return T.H.useImperativeHandle(F,lt,it)},ge.useInsertionEffect=function(F,lt){return T.H.useInsertionEffect(F,lt)},ge.useLayoutEffect=function(F,lt){return T.H.useLayoutEffect(F,lt)},ge.useMemo=function(F,lt){return T.H.useMemo(F,lt)},ge.useOptimistic=function(F,lt){return T.H.useOptimistic(F,lt)},ge.useReducer=function(F,lt,it){return T.H.useReducer(F,lt,it)},ge.useRef=function(F){return T.H.useRef(F)},ge.useState=function(F){return T.H.useState(F)},ge.useSyncExternalStore=function(F,lt,it){return T.H.useSyncExternalStore(F,lt,it)},ge.useTransition=function(){return T.H.useTransition()},ge.version="19.2.0",ge}var y1;function f0(){return y1||(y1=1,ag.exports=P2()),ag.exports}var yt=f0();const xn=vh(yt),Y2=j2({__proto__:null,default:xn},[yt]);var ig={exports:{}},th={},lg={exports:{}},rg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function V2(){return S1||(S1=1,(function(h){function n(x,P){var Z=x.length;x.push(P);t:for(;0<Z;){var k=Z-1>>>1,at=x[k];if(0<o(at,P))x[k]=P,x[Z]=at,Z=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var P=x[0],Z=x.pop();if(Z!==P){x[0]=Z;t:for(var k=0,at=x.length,F=at>>>1;k<F;){var lt=2*(k+1)-1,it=x[lt],X=lt+1,J=x[X];if(0>o(it,Z))X<at&&0>o(J,it)?(x[k]=J,x[X]=Z,k=X):(x[k]=it,x[lt]=Z,k=lt);else if(X<at&&0>o(J,Z))x[k]=J,x[X]=Z,k=X;else break t}}return P}function o(x,P){var Z=x.sortIndex-P.sortIndex;return Z!==0?Z:x.id-P.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;h.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();h.unstable_now=function(){return f.now()-p}}var g=[],b=[],_=1,R=null,E=3,D=!1,S=!1,G=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function w(x){for(var P=s(b);P!==null;){if(P.callback===null)r(b);else if(P.startTime<=x)r(b),P.sortIndex=P.expirationTime,n(g,P);else break;P=s(b)}}function M(x){if(G=!1,w(x),!S)if(s(g)!==null)S=!0,A||(A=!0,Q());else{var P=s(b);P!==null&&V(M,P.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return q?!0:!(h.unstable_now()-U<y)}function L(){if(q=!1,A){var x=h.unstable_now();U=x;var P=!0;try{t:{S=!1,G&&(G=!1,B(T),T=-1),D=!0;var Z=E;try{e:{for(w(x),R=s(g);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var at=k(R.expirationTime<=x);if(x=h.unstable_now(),typeof at=="function"){R.callback=at,w(x),P=!0;break e}R===s(g)&&r(g),w(x)}else r(g);R=s(g)}if(R!==null)P=!0;else{var F=s(b);F!==null&&V(M,F.startTime-x),P=!1}}break t}finally{R=null,E=Z,D=!1}P=void 0}}finally{P?Q():A=!1}}}var Q;if(typeof z=="function")Q=function(){z(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,K=I.port2;I.port1.onmessage=L,Q=function(){K.postMessage(null)}}else Q=function(){H(L,0)};function V(x,P){T=H(function(){x(h.unstable_now())},P)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(x){x.callback=null},h.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},h.unstable_getCurrentPriorityLevel=function(){return E},h.unstable_next=function(x){switch(E){case 1:case 2:case 3:var P=3;break;default:P=E}var Z=E;E=P;try{return x()}finally{E=Z}},h.unstable_requestPaint=function(){q=!0},h.unstable_runWithPriority=function(x,P){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Z=E;E=x;try{return P()}finally{E=Z}},h.unstable_scheduleCallback=function(x,P,Z){var k=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?k+Z:k):Z=k,x){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Z+at,x={id:_++,callback:P,priorityLevel:x,startTime:Z,expirationTime:at,sortIndex:-1},Z>k?(x.sortIndex=Z,n(b,x),s(g)===null&&x===s(b)&&(G?(B(T),T=-1):G=!0,V(M,Z-k))):(x.sortIndex=at,n(g,x),S||D||(S=!0,A||(A=!0,Q()))),x},h.unstable_shouldYield=N,h.unstable_wrapCallback=function(x){var P=E;return function(){var Z=E;E=P;try{return x.apply(this,arguments)}finally{E=Z}}}})(rg)),rg}var b1;function X2(){return b1||(b1=1,lg.exports=V2()),lg.exports}var sg={exports:{}},Ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function I2(){if(C1)return Ra;C1=1;var h=f0();function n(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)b+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,b,_){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:g,containerInfo:b,implementation:_}}var f=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ra.createPortal=function(g,b){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return c(g,b,null,_)},Ra.flushSync=function(g){var b=f.T,_=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=b,r.p=_,r.d.f()}},Ra.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,r.d.C(g,b))},Ra.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Ra.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var _=b.as,R=p(_,b.crossOrigin),E=typeof b.integrity=="string"?b.integrity:void 0,D=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;_==="style"?r.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:R,integrity:E,fetchPriority:D}):_==="script"&&r.d.X(g,{crossOrigin:R,integrity:E,fetchPriority:D,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Ra.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var _=p(b.as,b.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&r.d.M(g)},Ra.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var _=b.as,R=p(_,b.crossOrigin);r.d.L(g,_,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Ra.preloadModule=function(g,b){if(typeof g=="string")if(b){var _=p(b.as,b.crossOrigin);r.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else r.d.m(g)},Ra.requestFormReset=function(g){r.d.r(g)},Ra.unstable_batchedUpdates=function(g,b){return g(b)},Ra.useFormState=function(g,b,_){return f.H.useFormState(g,b,_)},Ra.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ra.version="19.2.0",Ra}var E1;function Jm(){if(E1)return sg.exports;E1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(n){console.error(n)}}return h(),sg.exports=I2(),sg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function Q2(){if(T1)return th;T1=1;var h=X2(),n=f0(),s=Jm();function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)e+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var e=t,l=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(l=e.return),t=e.return;while(t)}return e.tag===3?l:null}function f(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function b(t){var e=t.alternate;if(!e){if(e=c(t),e===null)throw Error(r(188));return e!==t?null:t}for(var l=t,u=e;;){var v=l.return;if(v===null)break;var C=v.alternate;if(C===null){if(u=v.return,u!==null){l=u;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===l)return g(v),t;if(C===u)return g(v),e;C=C.sibling}throw Error(r(188))}if(l.return!==u.return)l=v,u=C;else{for(var Y=!1,W=v.child;W;){if(W===l){Y=!0,l=v,u=C;break}if(W===u){Y=!0,u=v,l=C;break}W=W.sibling}if(!Y){for(W=C.child;W;){if(W===l){Y=!0,l=C,u=v;break}if(W===u){Y=!0,u=C,l=v;break}W=W.sibling}if(!Y)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:e}function _(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=_(t),e!==null)return e;t=t.sibling}return null}var R=Object.assign,E=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),z=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function K(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case H:return"Profiler";case q:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList";case U:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case S:return"Portal";case z:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case w:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return e=t.displayName||null,e!==null?e:K(t.type)||"Memo";case y:e=t._payload,t=t._init;try{return K(t(e))}catch{}}return null}var V=Array.isArray,x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},k=[],at=-1;function F(t){return{current:t}}function lt(t){0>at||(t.current=k[at],k[at]=null,at--)}function it(t,e){at++,k[at]=t.current,t.current=e}var X=F(null),J=F(null),$=F(null),nt=F(null);function gt(t,e){switch(it($,e),it(J,t),it(X,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?jp(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=jp(e),t=Lp(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(X),it(X,t)}function Rt(){lt(X),lt(J),lt($)}function Ht(t){t.memoizedState!==null&&it(nt,t);var e=X.current,l=Lp(e,t.type);e!==l&&(it(J,t),it(X,l))}function Kt(t){J.current===t&&(lt(X),lt(J)),nt.current===t&&(lt(nt),Jf._currentValue=Z)}var Ft,fe;function At(t){if(Ft===void 0)try{throw Error()}catch(l){var e=l.stack.trim().match(/\n( *(at )?)/);Ft=e&&e[1]||"",fe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+t+fe}var Bt=!1;function $t(t,e){if(!t||Bt)return"";Bt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(e){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(Tt){var Ct=Tt}Reflect.construct(t,[],Dt)}else{try{Dt.call()}catch(Tt){Ct=Tt}t.call(Dt.prototype)}}else{try{throw Error()}catch(Tt){Ct=Tt}(Dt=t())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(Tt){if(Tt&&Ct&&typeof Tt.stack=="string")return[Tt.stack,Ct.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=u.DetermineComponentFrameRoot(),Y=C[0],W=C[1];if(Y&&W){var st=Y.split(`
`),vt=W.split(`
`);for(v=u=0;u<st.length&&!st[u].includes("DetermineComponentFrameRoot");)u++;for(;v<vt.length&&!vt[v].includes("DetermineComponentFrameRoot");)v++;if(u===st.length||v===vt.length)for(u=st.length-1,v=vt.length-1;1<=u&&0<=v&&st[u]!==vt[v];)v--;for(;1<=u&&0<=v;u--,v--)if(st[u]!==vt[v]){if(u!==1||v!==1)do if(u--,v--,0>v||st[u]!==vt[v]){var Ot=`
`+st[u].replace(" at new "," at ");return t.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",t.displayName)),Ot}while(1<=u&&0<=v);break}}}finally{Bt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?At(l):""}function kt(t,e){switch(t.tag){case 26:case 27:case 5:return At(t.type);case 16:return At("Lazy");case 13:return t.child!==e&&e!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return $t(t.type,!1);case 11:return $t(t.type.render,!1);case 1:return $t(t.type,!0);case 31:return At("Activity");default:return""}}function _t(t){try{var e="",l=null;do e+=kt(t,l),l=t,t=t.return;while(t);return e}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,ve=h.unstable_scheduleCallback,ne=h.unstable_cancelCallback,ue=h.unstable_shouldYield,we=h.unstable_requestPaint,Ae=h.unstable_now,on=h.unstable_getCurrentPriorityLevel,Tn=h.unstable_ImmediatePriority,pn=h.unstable_UserBlockingPriority,ut=h.unstable_NormalPriority,xt=h.unstable_LowPriority,ft=h.unstable_IdlePriority,Mt=h.log,Xt=h.unstable_setDisableYieldValue,ae=null,Lt=null;function mn(t){if(typeof Mt=="function"&&Xt(t),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(ae,t)}catch{}}var ie=Math.clz32?Math.clz32:Hi,un=Math.log,_e=Math.LN2;function Hi(t){return t>>>=0,t===0?32:31-(un(t)/_e|0)|0}var Oa=256,Ys=262144,Xl=4194304;function fl(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Il(t,e,l){var u=t.pendingLanes;if(u===0)return 0;var v=0,C=t.suspendedLanes,Y=t.pingedLanes;t=t.warmLanes;var W=u&134217727;return W!==0?(u=W&~C,u!==0?v=fl(u):(Y&=W,Y!==0?v=fl(Y):l||(l=W&~t,l!==0&&(v=fl(l))))):(W=u&~C,W!==0?v=fl(W):Y!==0?v=fl(Y):l||(l=u&~t,l!==0&&(v=fl(l)))),v===0?0:e!==0&&e!==v&&(e&C)===0&&(C=v&-v,l=e&-e,C>=l||C===32&&(l&4194048)!==0)?e:v}function Ir(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Sh(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rc(){var t=Xl;return Xl<<=1,(Xl&62914560)===0&&(Xl=4194304),t}function Qr(t){for(var e=[],l=0;31>l;l++)e.push(t);return e}function hl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oc(t,e,l,u,v,C){var Y=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var W=t.entanglements,st=t.expirationTimes,vt=t.hiddenUpdates;for(l=Y&~l;0<l;){var Ot=31-ie(l),Dt=1<<Ot;W[Ot]=0,st[Ot]=-1;var Ct=vt[Ot];if(Ct!==null)for(vt[Ot]=null,Ot=0;Ot<Ct.length;Ot++){var Tt=Ct[Ot];Tt!==null&&(Tt.lane&=-536870913)}l&=~Dt}u!==0&&Ql(t,u,0),C!==0&&v===0&&t.tag!==0&&(t.suspendedLanes|=C&~(Y&~e))}function Ql(t,e,l){t.pendingLanes|=e,t.suspendedLanes&=~e;var u=31-ie(e);t.entangledLanes|=e,t.entanglements[u]=t.entanglements[u]|1073741824|l&261930}function Mc(t,e){var l=t.entangledLanes|=e;for(t=t.entanglements;l;){var u=31-ie(l),v=1<<u;v&e|t[u]&e&&(t[u]|=e),l&=~v}}function Vs(t,e){var l=e&-e;return l=(l&42)!==0?1:Xs(l),(l&(t.suspendedLanes|e))!==0?0:l}function Xs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Is(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ji(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:o1(t.type))}function Li(t,e){var l=P.p;try{return P.p=t,e()}finally{P.p=l}}var Pa=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Pa,Bn="__reactProps$"+Pa,ci="__reactContainer$"+Pa,Io="__reactEvents$"+Pa,bh="__reactListeners$"+Pa,Ch="__reactHandles$"+Pa,Qo="__reactResources$"+Pa,Kl="__reactMarker$"+Pa;function cn(t){delete t[Nn],delete t[Bn],delete t[Io],delete t[bh],delete t[Ch]}function dl(t){var e=t[Nn];if(e)return e;for(var l=t.parentNode;l;){if(e=l[ci]||l[Nn]){if(l=e.alternate,e.child!==null||l!==null&&l.child!==null)for(t=Qp(t);t!==null;){if(l=t[Nn])return l;t=Qp(t)}return e}t=l,l=t.parentNode}return null}function gl(t){if(t=t[Nn]||t[ci]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Kr(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(r(33))}function Zl(t){var e=t[Qo];return e||(e=t[Qo]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Gn(t){t[Kl]=!0}var Ko=new Set,Zo={};function qi(t,e){Dn(t,e),Dn(t+"Capture",e)}function Dn(t,e){for(Zo[t]=e,t=0;t<e.length;t++)Ko.add(e[t])}var An=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jo={},Zr={};function Fo(t){return jt.call(Zr,t)?!0:jt.call(Jo,t)?!1:An.test(t)?Zr[t]=!0:(Jo[t]=!0,!1)}function Jr(t,e,l){if(Fo(e))if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var u=e.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+l)}}function Ya(t,e,l){if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+l)}}function Va(t,e,l,u){if(u===null)t.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(e,l,""+u)}}function pa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ko(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Eh(t,e,l){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,C=u.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return v.call(this)},set:function(Y){l=""+Y,C.call(this,Y)}}),Object.defineProperty(t,e,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(Y){l=""+Y},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){if(!t._valueTracker){var e=ko(t)?"checked":"value";t._valueTracker=Eh(t,e,""+t[e])}}function xc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var l=e.getValue(),u="";return t&&(u=ko(t)?t.checked?"true":"false":t.value),t=u,t!==l?(e.setValue(t),!0):!1}function Qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Th=/[\n"\\]/g;function Ma(t){return t.replace(Th,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Ks(t,e,l,u,v,C,Y,W){t.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?t.type=Y:t.removeAttribute("type"),e!=null?Y==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+pa(e)):t.value!==""+pa(e)&&(t.value=""+pa(e)):Y!=="submit"&&Y!=="reset"||t.removeAttribute("value"),e!=null?Dc(t,Y,pa(e)):l!=null?Dc(t,Y,pa(l)):u!=null&&t.removeAttribute("value"),v==null&&C!=null&&(t.defaultChecked=!!C),v!=null&&(t.checked=v&&typeof v!="function"&&typeof v!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?t.name=""+pa(W):t.removeAttribute("name")}function Nc(t,e,l,u,v,C,Y,W){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.type=C),e!=null||l!=null){if(!(C!=="submit"&&C!=="reset"||e!=null)){Wo(t);return}l=l!=null?""+pa(l):"",e=e!=null?""+pa(e):l,W||e===t.value||(t.value=e),t.defaultValue=e}u=u??v,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=W?t.checked:!!u,t.defaultChecked=!!u,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(t.name=Y),Wo(t)}function Dc(t,e,l){e==="number"&&Qs(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Jl(t,e,l,u){if(t=t.options,e){e={};for(var v=0;v<l.length;v++)e["$"+l[v]]=!0;for(l=0;l<t.length;l++)v=e.hasOwnProperty("$"+t[l].value),t[l].selected!==v&&(t[l].selected=v),v&&u&&(t[l].defaultSelected=!0)}else{for(l=""+pa(l),e=null,v=0;v<t.length;v++){if(t[v].value===l){t[v].selected=!0,u&&(t[v].defaultSelected=!0);return}e!==null||t[v].disabled||(e=t[v])}e!==null&&(e.selected=!0)}}function Uc(t,e,l){if(e!=null&&(e=""+pa(e),e!==t.value&&(t.value=e),l==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=l!=null?""+pa(l):""}function zc(t,e,l,u){if(e==null){if(u!=null){if(l!=null)throw Error(r(92));if(V(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),e=l}l=pa(e),t.defaultValue=l,u=t.textContent,u===l&&u!==""&&u!==null&&(t.value=u),Wo(t)}function pl(t,e){if(e){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=e;return}}t.textContent=e}var Ah=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bc(t,e,l){var u=e.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":u?t.setProperty(e,l):typeof l!="number"||l===0||Ah.has(e)?e==="float"?t.cssFloat=l:t[e]=(""+l).trim():t[e]=l+"px"}function Gc(t,e,l){if(e!=null&&typeof e!="object")throw Error(r(62));if(t=t.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||e!=null&&e.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var v in e)u=e[v],e.hasOwnProperty(v)&&l[v]!==u&&Bc(t,v,u)}else for(var C in e)e.hasOwnProperty(C)&&Bc(t,C,e[C])}function $o(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),b0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(t){return b0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ma(){}var Fr=null;function tu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,fi=null;function wc(t){var e=gl(t);if(e&&(t=e.stateNode)){var l=t[Bn]||null;t:switch(t=e.stateNode,e.type){case"input":if(Ks(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),e=l.name,l.type==="radio"&&e!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ma(""+e)+'"][type="radio"]'),e=0;e<l.length;e++){var u=l[e];if(u!==t&&u.form===t.form){var v=u[Bn]||null;if(!v)throw Error(r(90));Ks(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(e=0;e<l.length;e++)u=l[e],u.form===t.form&&xc(u)}break t;case"textarea":Uc(t,l.value,l.defaultValue);break t;case"select":e=l.value,e!=null&&Jl(t,!!l.multiple,e,!1)}}}var eu=!1;function Hc(t,e,l){if(eu)return t(e,l);eu=!0;try{var u=t(e);return u}finally{if(eu=!1,(Pi!==null||fi!==null)&&(Ts(),Pi&&(e=Pi,t=fi,fi=Pi=null,wc(e),t)))for(e=0;e<t.length;e++)wc(t[e])}}function kr(t,e){var l=t.stateNode;if(l===null)return null;var u=l[Bn]||null;if(u===null)return null;l=u[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break t;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,e,typeof l));return l}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nu=!1;if(hi)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){nu=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{nu=!1}var Yi=null,au=null,Wr=null;function jc(){if(Wr)return Wr;var t,e=au,l=e.length,u,v="value"in Yi?Yi.value:Yi.textContent,C=v.length;for(t=0;t<l&&e[t]===v[t];t++);var Y=l-t;for(u=1;u<=Y&&e[l-u]===v[C-u];u++);return Wr=v.slice(t,1<u?1-u:void 0)}function Js(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fs(){return!0}function iu(){return!1}function ia(t){function e(l,u,v,C,Y){this._reactName=l,this._targetInst=v,this.type=u,this.nativeEvent=C,this.target=Y,this.currentTarget=null;for(var W in t)t.hasOwnProperty(W)&&(l=t[W],this[W]=l?l(C):C[W]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Fs:iu,this.isPropagationStopped=iu,this}return R(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),e}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=ia(ml),ks=R({},ml,{view:0,detail:0}),Rh=ia(ks),kl,Ws,vl,$s=R({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(kl=t.screenX-vl.screenX,Ws=t.screenY-vl.screenY):Ws=kl=0,vl=t),kl)},movementY:function(t){return"movementY"in t?t.movementY:Ws}}),Lc=ia($s),ru=R({},$s,{dataTransfer:0}),to=ia(ru),su=R({},ks,{relatedTarget:0}),ou=ia(su),Oh=R({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),yl=ia(Oh),Mh=R({},ml,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sl=ia(Mh),Vi=R({},ml,{data:0}),eo=ia(Vi),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Nh[t])?!!e[t]:!1}function $r(){return Wl}var Dh=R({},ks,{key:function(t){if(t.key){var e=qc[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(t){return t.type==="keypress"?Js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pc=ia(Dh),Uh=R({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yc=ia(Uh),C0=R({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),Pn=ia(C0),zh=R({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bh=ia(zh),Gh=R({},$s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wh=ia(Gh),Hh=R({},ml,{newState:0,oldState:0}),uu=ia(Hh),Vc=[9,13,27,32],cu=hi&&"CompositionEvent"in window,ts=null;hi&&"documentMode"in document&&(ts=document.documentMode);var jh=hi&&"TextEvent"in window&&!ts,fu=hi&&(!cu||ts&&8<ts&&11>=ts),hu=" ",Xc=!1;function du(t,e){switch(t){case"keyup":return Vc.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function Lh(t,e){switch(t){case"compositionend":return no(e);case"keypress":return e.which!==32?null:(Xc=!0,hu);case"textInput":return t=e.data,t===hu&&Xc?null:t;default:return null}}function Ic(t,e){if(bl)return t==="compositionend"||!cu&&du(t,e)?(t=jc(),Wr=au=Yi=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fu&&e.locale!=="ko"?null:e.data;default:return null}}var qh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function di(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qh[t.type]:e==="textarea"}function gu(t,e,l,u){Pi?fi?fi.push(u):fi=[u]:Pi=u,e=Dd(e,"onChange"),0<e.length&&(l=new lu("onChange","change",null,l,u),t.push({event:l,listeners:e}))}var ao=null,es=null;function xa(t){Up(t,0)}function io(t){var e=Kr(t);if(xc(e))return t}function pu(t,e){if(t==="change")return e}var Qc=!1;if(hi){var mu;if(hi){var lo="oninput"in document;if(!lo){var vu=document.createElement("div");vu.setAttribute("oninput","return;"),lo=typeof vu.oninput=="function"}mu=lo}else mu=!1;Qc=mu&&(!document.documentMode||9<document.documentMode)}function Kc(){ao&&(ao.detachEvent("onpropertychange",ro),es=ao=null)}function ro(t){if(t.propertyName==="value"&&io(es)){var e=[];gu(e,es,t,tu(t)),Hc(xa,e)}}function so(t,e,l){t==="focusin"?(Kc(),ao=e,es=l,ao.attachEvent("onpropertychange",ro)):t==="focusout"&&Kc()}function fn(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return io(es)}function E0(t,e){if(t==="click")return io(e)}function T0(t,e){if(t==="input"||t==="change")return io(e)}function Ph(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:Ph;function Xa(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var l=Object.keys(t),u=Object.keys(e);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var v=l[u];if(!jt.call(e,v)||!Yn(t[v],e[v]))return!1}return!0}function Zc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jc(t,e){var l=Zc(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=e&&u>=e)return{node:l,offset:e-t};t=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Zc(l)}}function ns(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ns(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ka(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Qs(t.document);e instanceof t.HTMLIFrameElement;){try{var l=typeof e.contentWindow.location.href=="string"}catch{l=!1}if(l)t=e.contentWindow;else break;e=Qs(t.document)}return e}function yu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Fc=hi&&"documentMode"in document&&11>=document.documentMode,$l=null,oo=null,tr=null,as=!1;function kc(t,e,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;as||$l==null||$l!==Qs(u)||(u=$l,"selectionStart"in u&&yu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),tr&&Xa(tr,u)||(tr=u,u=Dd(oo,"onSelect"),0<u.length&&(e=new lu("onSelect","select",null,e,l),t.push({event:e,listeners:u}),e.target=$l)))}function Cl(t,e){var l={};return l[t.toLowerCase()]=e.toLowerCase(),l["Webkit"+t]="webkit"+e,l["Moz"+t]="moz"+e,l}var is={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionrun:Cl("Transition","TransitionRun"),transitionstart:Cl("Transition","TransitionStart"),transitioncancel:Cl("Transition","TransitionCancel"),transitionend:Cl("Transition","TransitionEnd")},Su={},Wc={};hi&&(Wc=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Vn(t){if(Su[t])return Su[t];if(!is[t])return t;var e=is[t],l;for(l in e)if(e.hasOwnProperty(l)&&l in Wc)return Su[t]=e[l];return t}var bu=Vn("animationend"),$c=Vn("animationiteration"),Yh=Vn("animationstart"),tf=Vn("transitionrun"),la=Vn("transitionstart"),Vh=Vn("transitioncancel"),ra=Vn("transitionend"),ef=new Map,gi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gi.push("scrollEnd");function Xn(t,e){ef.set(t,e),qi(e,[t])}var Wa=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},va=[],El=0,Ia=0;function uo(){for(var t=El,e=Ia=El=0;e<t;){var l=va[e];va[e++]=null;var u=va[e];va[e++]=null;var v=va[e];va[e++]=null;var C=va[e];if(va[e++]=null,u!==null&&v!==null){var Y=u.pending;Y===null?v.next=v:(v.next=Y.next,Y.next=v),u.pending=v}C!==0&&nf(l,v,C)}}function Xi(t,e,l,u){va[El++]=t,va[El++]=e,va[El++]=l,va[El++]=u,Ia|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function er(t,e,l,u){return Xi(t,e,l,u),co(t)}function Na(t,e){return Xi(t,null,null,e),co(t)}function nf(t,e,l){t.lanes|=l;var u=t.alternate;u!==null&&(u.lanes|=l);for(var v=!1,C=t.return;C!==null;)C.childLanes|=l,u=C.alternate,u!==null&&(u.childLanes|=l),C.tag===22&&(t=C.stateNode,t===null||t._visibility&1||(v=!0)),t=C,C=C.return;return t.tag===3?(C=t.stateNode,v&&e!==null&&(v=31-ie(l),t=C.hiddenUpdates,u=t[v],u===null?t[v]=[e]:u.push(e),e.lane=l|536870912),C):null}function co(t){if(50<Br)throw Br=0,Gr=null,Error(r(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var pi={};function Xh(t,e,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,l,u){return new Xh(t,e,l,u)}function Cu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $a(t,e){var l=t.alternate;return l===null?(l=$n(t.tag,e,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=e,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,e=t.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Eu(t,e){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,e=l.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ls(t,e,l,u,v,C){var Y=0;if(u=t,typeof t=="function")Cu(t)&&(Y=1);else if(typeof t=="string")Y=R2(t,l,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case U:return t=$n(31,l,e,v),t.elementType=U,t.lanes=C,t;case G:return Tl(l.children,v,C,e);case q:Y=8,v|=24;break;case H:return t=$n(12,l,e,v|2),t.elementType=H,t.lanes=C,t;case M:return t=$n(13,l,e,v),t.elementType=M,t.lanes=C,t;case A:return t=$n(19,l,e,v),t.elementType=A,t.lanes=C,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:Y=10;break t;case B:Y=9;break t;case w:Y=11;break t;case T:Y=14;break t;case y:Y=16,u=null;break t}Y=29,l=Error(r(130,t===null?"null":typeof t,"")),u=null}return e=$n(Y,l,e,v),e.elementType=t,e.type=u,e.lanes=C,e}function Tl(t,e,l,u){return t=$n(7,t,u,e),t.lanes=l,t}function fo(t,e,l){return t=$n(6,t,null,e),t.lanes=l,t}function ya(t){var e=$n(18,null,null,0);return e.stateNode=t,e}function Tu(t,e,l){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=l,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Sa=new WeakMap;function Da(t,e){if(typeof t=="object"&&t!==null){var l=Sa.get(t);return l!==void 0?l:(e={value:t,source:e,stack:_t(e)},Sa.set(t,e),e)}return{value:t,source:e,stack:_t(e)}}var nr=[],rs=0,ti=null,ss=0,ba=[],In=0,Ii=null,ei=1,ni="";function mi(t,e){nr[rs++]=ss,nr[rs++]=ti,ti=t,ss=e}function Au(t,e,l){ba[In++]=ei,ba[In++]=ni,ba[In++]=Ii,Ii=t;var u=ei;t=ni;var v=32-ie(u)-1;u&=~(1<<v),l+=1;var C=32-ie(e)+v;if(30<C){var Y=v-v%5;C=(u&(1<<Y)-1).toString(32),u>>=Y,v-=Y,ei=1<<32-ie(e)+v|l<<v|u,ni=C+t}else ei=1<<C|l<<v|u,ni=t}function ho(t){t.return!==null&&(mi(t,1),Au(t,1,0))}function af(t){for(;t===ti;)ti=nr[--rs],nr[rs]=null,ss=nr[--rs],nr[rs]=null;for(;t===Ii;)Ii=ba[--In],ba[In]=null,ni=ba[--In],ba[In]=null,ei=ba[--In],ba[In]=null}function Ih(t,e){ba[In++]=ei,ba[In++]=ni,ba[In++]=Ii,ei=e.id,ni=e.overflow,Ii=t}var Qn=null,Qe=null,Ee=!1,Ua=null,sa=!1,_u=Error(r(519));function Qi(t){var e=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw os(Da(e,t)),_u}function lf(t){var e=t.stateNode,l=t.type,u=t.memoizedProps;switch(e[Nn]=t,e[Bn]=u,l){case"dialog":Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":case"embed":Oe("load",e);break;case"video":case"audio":for(l=0;l<Xf.length;l++)Oe(Xf[l],e);break;case"source":Oe("error",e);break;case"img":case"image":case"link":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"input":Oe("invalid",e),Nc(e,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Oe("invalid",e);break;case"textarea":Oe("invalid",e),zc(e,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||e.textContent===""+l||u.suppressHydrationWarning===!0||wp(e.textContent,l)?(u.popover!=null&&(Oe("beforetoggle",e),Oe("toggle",e)),u.onScroll!=null&&Oe("scroll",e),u.onScrollEnd!=null&&Oe("scrollend",e),u.onClick!=null&&(e.onclick=ma),e=!0):e=!1,e||Qi(t,!0)}function rf(t){for(Qn=t.return;Qn;)switch(Qn.tag){case 5:case 31:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:Qn=Qn.return}}function ar(t){if(t!==Qn)return!1;if(!Ee)return rf(t),Ee=!0,!1;var e=t.tag,l;if((l=e!==3&&e!==27)&&((l=e===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||P0(t.type,t.memoizedProps)),l=!l),l&&Qe&&Qi(t),rf(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Qe=Ip(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Qe=Ip(t)}else e===27?(e=Qe,Rs(t.type)?(t=Q0,Q0=null,Qe=t):Qe=e):Qe=Qn?Bi(t.stateNode.nextSibling):null;return!0}function Al(){Qe=Qn=null,Ee=!1}function ir(){var t=Ua;return t!==null&&(Je===null?Je=t:Je.push.apply(Je,t),Ua=null),t}function os(t){Ua===null?Ua=[t]:Ua.push(t)}var Ru=F(null),Re=null,ai=null;function _l(t,e,l){it(Ru,e._currentValue),e._currentValue=l}function vi(t){t._currentValue=Ru.current,lt(Ru)}function sf(t,e,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,u!==null&&(u.childLanes|=e)):u!==null&&(u.childLanes&e)!==e&&(u.childLanes|=e),t===l)break;t=t.return}}function of(t,e,l,u){var v=t.child;for(v!==null&&(v.return=t);v!==null;){var C=v.dependencies;if(C!==null){var Y=v.child;C=C.firstContext;t:for(;C!==null;){var W=C;C=v;for(var st=0;st<e.length;st++)if(W.context===e[st]){C.lanes|=l,W=C.alternate,W!==null&&(W.lanes|=l),sf(C.return,l,t),u||(Y=null);break t}C=W.next}}else if(v.tag===18){if(Y=v.return,Y===null)throw Error(r(341));Y.lanes|=l,C=Y.alternate,C!==null&&(C.lanes|=l),sf(Y,l,t),Y=null}else Y=v.child;if(Y!==null)Y.return=v;else for(Y=v;Y!==null;){if(Y===t){Y=null;break}if(v=Y.sibling,v!==null){v.return=Y.return,Y=v;break}Y=Y.return}v=Y}}function us(t,e,l,u){t=null;for(var v=e,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var Y=v.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var W=v.type;Yn(v.pendingProps.value,Y.value)||(t!==null?t.push(W):t=[W])}}else if(v===nt.current){if(Y=v.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(t!==null?t.push(Jf):t=[Jf])}v=v.return}t!==null&&of(e,t,l,u),e.flags|=262144}function Ou(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ki(t){Re=t,ai=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function We(t){return po(Re,t)}function go(t,e){return Re===null&&Ki(t),po(t,e)}function po(t,e){var l=e._currentValue;if(e={context:e,memoizedValue:l,next:null},ai===null){if(t===null)throw Error(r(308));ai=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ai=ai.next=e;return l}var lr=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(l,u){t.push(u)}};this.abort=function(){e.aborted=!0,t.forEach(function(l){return l()})}},uf=h.unstable_scheduleCallback,cf=h.unstable_NormalPriority,_n={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new lr,data:new Map,refCount:0}}function cs(t){t.refCount--,t.refCount===0&&uf(cf,function(){t.controller.abort()})}var fs=null,xu=0,rr=0,Rl=null;function Ce(t,e){if(fs===null){var l=fs=[];xu=0,rr=U0(),Rl={status:"pending",value:void 0,then:function(u){l.push(u)}}}return xu++,e.then(Qh,Qh),e}function Qh(){if(--xu===0&&fs!==null){Rl!==null&&(Rl.status="fulfilled");var t=fs;fs=null,rr=0,Rl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function za(t,e){var l=[],u={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return t.then(function(){u.status="fulfilled",u.value=e;for(var v=0;v<l.length;v++)(0,l[v])(e)},function(v){for(u.status="rejected",u.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),u}var Nu=x.S;x.S=function(t,e){ac=Ae(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Ce(t,e),Nu!==null&&Nu(t,e)};var sr=F(null);function hs(){var t=sr.current;return t!==null?t:ye.pooledCache}function Zi(t,e){e===null?it(sr,sr.current):it(sr,e.pool)}function or(){var t=hs();return t===null?null:{parent:_n._currentValue,pool:t}}var ur=Error(r(460)),mo=Error(r(474)),Du=Error(r(542)),vo={then:function(){}};function Ji(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Uu(t,e,l){switch(l=t[l],l===void 0?t.push(e):l!==e&&(e.then(ma,ma),e=l),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Wi(t),t;default:if(typeof e.status=="string")e.then(ma,ma);else{if(t=ye,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=e,t.status="pending",t.then(function(u){if(e.status==="pending"){var v=e;v.status="fulfilled",v.value=u}},function(u){if(e.status==="pending"){var v=e;v.status="rejected",v.reason=u}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Wi(t),t}throw ki=e,ur}}function Fi(t){try{var e=t._init;return e(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ki=l,ur):l}}var ki=null;function zu(){if(ki===null)throw Error(r(459));var t=ki;return ki=null,t}function Wi(t){if(t===ur||t===Du)throw Error(r(483))}var Ol=null,yo=0;function So(t){var e=yo;return yo+=1,Ol===null&&(Ol=[]),Uu(Ol,t,e)}function bo(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function cr(t,e){throw e.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(e),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function te(t){function e(dt,ct){if(t){var mt=dt.deletions;mt===null?(dt.deletions=[ct],dt.flags|=16):mt.push(ct)}}function l(dt,ct){if(!t)return null;for(;ct!==null;)e(dt,ct),ct=ct.sibling;return null}function u(dt){for(var ct=new Map;dt!==null;)dt.key!==null?ct.set(dt.key,dt):ct.set(dt.index,dt),dt=dt.sibling;return ct}function v(dt,ct){return dt=$a(dt,ct),dt.index=0,dt.sibling=null,dt}function C(dt,ct,mt){return dt.index=mt,t?(mt=dt.alternate,mt!==null?(mt=mt.index,mt<ct?(dt.flags|=67108866,ct):mt):(dt.flags|=67108866,ct)):(dt.flags|=1048576,ct)}function Y(dt){return t&&dt.alternate===null&&(dt.flags|=67108866),dt}function W(dt,ct,mt,Nt){return ct===null||ct.tag!==6?(ct=fo(mt,dt.mode,Nt),ct.return=dt,ct):(ct=v(ct,mt),ct.return=dt,ct)}function st(dt,ct,mt,Nt){var Wt=mt.type;return Wt===G?Ot(dt,ct,mt.props.children,Nt,mt.key):ct!==null&&(ct.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===y&&Fi(Wt)===ct.type)?(ct=v(ct,mt.props),bo(ct,mt),ct.return=dt,ct):(ct=ls(mt.type,mt.key,mt.props,null,dt.mode,Nt),bo(ct,mt),ct.return=dt,ct)}function vt(dt,ct,mt,Nt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==mt.containerInfo||ct.stateNode.implementation!==mt.implementation?(ct=Tu(mt,dt.mode,Nt),ct.return=dt,ct):(ct=v(ct,mt.children||[]),ct.return=dt,ct)}function Ot(dt,ct,mt,Nt,Wt){return ct===null||ct.tag!==7?(ct=Tl(mt,dt.mode,Nt,Wt),ct.return=dt,ct):(ct=v(ct,mt),ct.return=dt,ct)}function Dt(dt,ct,mt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=fo(""+ct,dt.mode,mt),ct.return=dt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case D:return mt=ls(ct.type,ct.key,ct.props,null,dt.mode,mt),bo(mt,ct),mt.return=dt,mt;case S:return ct=Tu(ct,dt.mode,mt),ct.return=dt,ct;case y:return ct=Fi(ct),Dt(dt,ct,mt)}if(V(ct)||Q(ct))return ct=Tl(ct,dt.mode,mt,null),ct.return=dt,ct;if(typeof ct.then=="function")return Dt(dt,So(ct),mt);if(ct.$$typeof===z)return Dt(dt,go(dt,ct),mt);cr(dt,ct)}return null}function Ct(dt,ct,mt,Nt){var Wt=ct!==null?ct.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Wt!==null?null:W(dt,ct,""+mt,Nt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:return mt.key===Wt?st(dt,ct,mt,Nt):null;case S:return mt.key===Wt?vt(dt,ct,mt,Nt):null;case y:return mt=Fi(mt),Ct(dt,ct,mt,Nt)}if(V(mt)||Q(mt))return Wt!==null?null:Ot(dt,ct,mt,Nt,null);if(typeof mt.then=="function")return Ct(dt,ct,So(mt),Nt);if(mt.$$typeof===z)return Ct(dt,ct,go(dt,mt),Nt);cr(dt,mt)}return null}function Tt(dt,ct,mt,Nt,Wt){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return dt=dt.get(mt)||null,W(ct,dt,""+Nt,Wt);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case D:return dt=dt.get(Nt.key===null?mt:Nt.key)||null,st(ct,dt,Nt,Wt);case S:return dt=dt.get(Nt.key===null?mt:Nt.key)||null,vt(ct,dt,Nt,Wt);case y:return Nt=Fi(Nt),Tt(dt,ct,mt,Nt,Wt)}if(V(Nt)||Q(Nt))return dt=dt.get(mt)||null,Ot(ct,dt,Nt,Wt,null);if(typeof Nt.then=="function")return Tt(dt,ct,mt,So(Nt),Wt);if(Nt.$$typeof===z)return Tt(dt,ct,mt,go(ct,Nt),Wt);cr(ct,Nt)}return null}function Zt(dt,ct,mt,Nt){for(var Wt=null,je=null,Jt=ct,be=ct=0,Me=null;Jt!==null&&be<mt.length;be++){Jt.index>be?(Me=Jt,Jt=null):Me=Jt.sibling;var Le=Ct(dt,Jt,mt[be],Nt);if(Le===null){Jt===null&&(Jt=Me);break}t&&Jt&&Le.alternate===null&&e(dt,Jt),ct=C(Le,ct,be),je===null?Wt=Le:je.sibling=Le,je=Le,Jt=Me}if(be===mt.length)return l(dt,Jt),Ee&&mi(dt,be),Wt;if(Jt===null){for(;be<mt.length;be++)Jt=Dt(dt,mt[be],Nt),Jt!==null&&(ct=C(Jt,ct,be),je===null?Wt=Jt:je.sibling=Jt,je=Jt);return Ee&&mi(dt,be),Wt}for(Jt=u(Jt);be<mt.length;be++)Me=Tt(Jt,dt,be,mt[be],Nt),Me!==null&&(t&&Me.alternate!==null&&Jt.delete(Me.key===null?be:Me.key),ct=C(Me,ct,be),je===null?Wt=Me:je.sibling=Me,je=Me);return t&&Jt.forEach(function(Ds){return e(dt,Ds)}),Ee&&mi(dt,be),Wt}function se(dt,ct,mt,Nt){if(mt==null)throw Error(r(151));for(var Wt=null,je=null,Jt=ct,be=ct=0,Me=null,Le=mt.next();Jt!==null&&!Le.done;be++,Le=mt.next()){Jt.index>be?(Me=Jt,Jt=null):Me=Jt.sibling;var Ds=Ct(dt,Jt,Le.value,Nt);if(Ds===null){Jt===null&&(Jt=Me);break}t&&Jt&&Ds.alternate===null&&e(dt,Jt),ct=C(Ds,ct,be),je===null?Wt=Ds:je.sibling=Ds,je=Ds,Jt=Me}if(Le.done)return l(dt,Jt),Ee&&mi(dt,be),Wt;if(Jt===null){for(;!Le.done;be++,Le=mt.next())Le=Dt(dt,Le.value,Nt),Le!==null&&(ct=C(Le,ct,be),je===null?Wt=Le:je.sibling=Le,je=Le);return Ee&&mi(dt,be),Wt}for(Jt=u(Jt);!Le.done;be++,Le=mt.next())Le=Tt(Jt,dt,be,Le.value,Nt),Le!==null&&(t&&Le.alternate!==null&&Jt.delete(Le.key===null?be:Le.key),ct=C(Le,ct,be),je===null?Wt=Le:je.sibling=Le,je=Le);return t&&Jt.forEach(function(H2){return e(dt,H2)}),Ee&&mi(dt,be),Wt}function ke(dt,ct,mt,Nt){if(typeof mt=="object"&&mt!==null&&mt.type===G&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:t:{for(var Wt=mt.key;ct!==null;){if(ct.key===Wt){if(Wt=mt.type,Wt===G){if(ct.tag===7){l(dt,ct.sibling),Nt=v(ct,mt.props.children),Nt.return=dt,dt=Nt;break t}}else if(ct.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===y&&Fi(Wt)===ct.type){l(dt,ct.sibling),Nt=v(ct,mt.props),bo(Nt,mt),Nt.return=dt,dt=Nt;break t}l(dt,ct);break}else e(dt,ct);ct=ct.sibling}mt.type===G?(Nt=Tl(mt.props.children,dt.mode,Nt,mt.key),Nt.return=dt,dt=Nt):(Nt=ls(mt.type,mt.key,mt.props,null,dt.mode,Nt),bo(Nt,mt),Nt.return=dt,dt=Nt)}return Y(dt);case S:t:{for(Wt=mt.key;ct!==null;){if(ct.key===Wt)if(ct.tag===4&&ct.stateNode.containerInfo===mt.containerInfo&&ct.stateNode.implementation===mt.implementation){l(dt,ct.sibling),Nt=v(ct,mt.children||[]),Nt.return=dt,dt=Nt;break t}else{l(dt,ct);break}else e(dt,ct);ct=ct.sibling}Nt=Tu(mt,dt.mode,Nt),Nt.return=dt,dt=Nt}return Y(dt);case y:return mt=Fi(mt),ke(dt,ct,mt,Nt)}if(V(mt))return Zt(dt,ct,mt,Nt);if(Q(mt)){if(Wt=Q(mt),typeof Wt!="function")throw Error(r(150));return mt=Wt.call(mt),se(dt,ct,mt,Nt)}if(typeof mt.then=="function")return ke(dt,ct,So(mt),Nt);if(mt.$$typeof===z)return ke(dt,ct,go(dt,mt),Nt);cr(dt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,ct!==null&&ct.tag===6?(l(dt,ct.sibling),Nt=v(ct,mt),Nt.return=dt,dt=Nt):(l(dt,ct),Nt=fo(mt,dt.mode,Nt),Nt.return=dt,dt=Nt),Y(dt)):l(dt,ct)}return function(dt,ct,mt,Nt){try{yo=0;var Wt=ke(dt,ct,mt,Nt);return Ol=null,Wt}catch(Jt){if(Jt===ur||Jt===Du)throw Jt;var je=$n(29,Jt,null,dt.mode);return je.lanes=Nt,je.return=dt,je}finally{}}}var fr=te(!0),Kh=te(!1),$i=!1;function hr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ff(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ml(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xl(t,e,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(le&2)!==0){var v=u.pending;return v===null?e.next=e:(e.next=v.next,v.next=e),u.pending=e,e=co(t),nf(t,null,l),e}return Xi(t,u,e,l),co(t)}function Co(t,e,l){if(e=e.updateQueue,e!==null&&(e=e.shared,(l&4194048)!==0)){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,Mc(t,l)}}function hf(t,e){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var v=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var Y={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};C===null?v=C=Y:C=C.next=Y,l=l.next}while(l!==null);C===null?v=C=e:C=C.next=e}else v=C=e;l={baseState:u.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:u.shared,callbacks:u.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=e:t.next=e,l.lastBaseUpdate=e}var Eo=!1;function ds(){if(Eo){var t=Rl;if(t!==null)throw t}}function Nl(t,e,l,u){Eo=!1;var v=t.updateQueue;$i=!1;var C=v.firstBaseUpdate,Y=v.lastBaseUpdate,W=v.shared.pending;if(W!==null){v.shared.pending=null;var st=W,vt=st.next;st.next=null,Y===null?C=vt:Y.next=vt,Y=st;var Ot=t.alternate;Ot!==null&&(Ot=Ot.updateQueue,W=Ot.lastBaseUpdate,W!==Y&&(W===null?Ot.firstBaseUpdate=vt:W.next=vt,Ot.lastBaseUpdate=st))}if(C!==null){var Dt=v.baseState;Y=0,Ot=vt=st=null,W=C;do{var Ct=W.lane&-536870913,Tt=Ct!==W.lane;if(Tt?(pe&Ct)===Ct:(u&Ct)===Ct){Ct!==0&&Ct===rr&&(Eo=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});t:{var Zt=t,se=W;Ct=e;var ke=l;switch(se.tag){case 1:if(Zt=se.payload,typeof Zt=="function"){Dt=Zt.call(ke,Dt,Ct);break t}Dt=Zt;break t;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=se.payload,Ct=typeof Zt=="function"?Zt.call(ke,Dt,Ct):Zt,Ct==null)break t;Dt=R({},Dt,Ct);break t;case 2:$i=!0}}Ct=W.callback,Ct!==null&&(t.flags|=64,Tt&&(t.flags|=8192),Tt=v.callbacks,Tt===null?v.callbacks=[Ct]:Tt.push(Ct))}else Tt={lane:Ct,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ot===null?(vt=Ot=Tt,st=Dt):Ot=Ot.next=Tt,Y|=Ct;if(W=W.next,W===null){if(W=v.shared.pending,W===null)break;Tt=W,W=Tt.next,Tt.next=null,v.lastBaseUpdate=Tt,v.shared.pending=null}}while(!0);Ot===null&&(st=Dt),v.baseState=st,v.firstBaseUpdate=vt,v.lastBaseUpdate=Ot,C===null&&(v.shared.lanes=0),jl|=Y,t.lanes=Y,t.memoizedState=Dt}}function df(t,e){if(typeof t!="function")throw Error(r(191,t));t.call(e)}function Zh(t,e){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)df(l[t],e)}var gs=F(null),yi=F(0);function Si(t,e){t=Ja,it(yi,t),it(gs,e),Ja=t|e.baseLanes}function wn(){it(yi,Ja),it(gs,gs.current)}function bi(){Ja=yi.current,lt(gs),lt(yi)}var an=F(null),Qa=null;function Dl(t){var e=t.alternate;it(vn,vn.current&1),it(an,t),Qa===null&&(e===null||gs.current!==null||e.memoizedState!==null)&&(Qa=t)}function Rn(t){it(vn,vn.current),it(an,t),Qa===null&&(Qa=t)}function Ci(t){t.tag===22?(it(vn,vn.current),it(an,t),Qa===null&&(Qa=t)):Ul()}function Ul(){it(vn,vn.current),it(an,an.current)}function Ba(t){lt(an),Qa===t&&(Qa=null),lt(vn)}var vn=F(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var l=e.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||X0(l)||I0(l)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ei=0,he=null,qe=null,On=null,tl=!1,Ka=!1,dr=!1,Gu=0,To=0,Ti=null,A0=0;function gn(){throw Error(r(321))}function gf(t,e){if(e===null)return!1;for(var l=0;l<e.length&&l<t.length;l++)if(!Yn(t[l],e[l]))return!1;return!0}function gr(t,e,l,u,v,C){return Ei=C,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,x.H=t===null||t.memoizedState===null?pr:Oo,dr=!1,C=l(u,v),dr=!1,Ka&&(C=Fh(e,l,u,v)),Jh(t),C}function Jh(t){x.H=ms;var e=qe!==null&&qe.next!==null;if(Ei=0,On=qe=he=null,tl=!1,To=0,Ti=null,e)throw Error(r(300));t===null||Mn||(t=t.dependencies,t!==null&&Ou(t)&&(Mn=!0))}function Fh(t,e,l,u){he=t;var v=0;do{if(Ka&&(Ti=null),To=0,Ka=!1,25<=v)throw Error(r(301));if(v+=1,On=qe=null,t.updateQueue!=null){var C=t.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}x.H=mr,C=e(l,u)}while(Ka);return C}function _0(){var t=x.H,e=t.useState()[0];return e=typeof e.then=="function"?Ao(e):e,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(he.flags|=1024),e}function pf(){var t=Gu!==0;return Gu=0,t}function mf(t,e,l){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l}function vf(t){if(tl){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}tl=!1}Ei=0,On=qe=he=null,Ka=!1,To=Gu=0,Ti=null}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?he.memoizedState=On=t:On=On.next=t,On}function yn(){if(qe===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=On===null?he.memoizedState:On.next;if(e!==null)On=e,qe=t;else{if(t===null)throw he.alternate===null?Error(r(467)):Error(r(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},On===null?he.memoizedState=On=t:On=On.next=t}return On}function wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(t){var e=To;return To+=1,Ti===null&&(Ti=[]),t=Uu(Ti,t,e),e=he,(On===null?e.memoizedState:On.next)===null&&(e=e.alternate,x.H=e===null||e.memoizedState===null?pr:Oo),t}function Hu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ao(t);if(t.$$typeof===z)return We(t)}throw Error(r(438,String(t)))}function yf(t){var e=null,l=he.updateQueue;if(l!==null&&(e=l.memoCache),e==null){var u=he.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(e={data:u.data.map(function(v){return v.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),l===null&&(l=wu(),he.updateQueue=l),l.memoCache=e,l=e.data[e.index],l===void 0)for(l=e.data[e.index]=Array(t),u=0;u<t;u++)l[u]=N;return e.index++,l}function Ai(t,e){return typeof e=="function"?e(t):e}function ju(t){var e=yn();return Sf(e,qe,t)}function Sf(t,e,l){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var v=t.baseQueue,C=u.pending;if(C!==null){if(v!==null){var Y=v.next;v.next=C.next,C.next=Y}e.baseQueue=v=C,u.pending=null}if(C=t.baseState,v===null)t.memoizedState=C;else{e=v.next;var W=Y=null,st=null,vt=e,Ot=!1;do{var Dt=vt.lane&-536870913;if(Dt!==vt.lane?(pe&Dt)===Dt:(Ei&Dt)===Dt){var Ct=vt.revertLane;if(Ct===0)st!==null&&(st=st.next={lane:0,revertLane:0,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),Dt===rr&&(Ot=!0);else if((Ei&Ct)===Ct){vt=vt.next,Ct===rr&&(Ot=!0);continue}else Dt={lane:0,revertLane:vt.revertLane,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},st===null?(W=st=Dt,Y=C):st=st.next=Dt,he.lanes|=Ct,jl|=Ct;Dt=vt.action,dr&&l(C,Dt),C=vt.hasEagerState?vt.eagerState:l(C,Dt)}else Ct={lane:Dt,revertLane:vt.revertLane,gesture:vt.gesture,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},st===null?(W=st=Ct,Y=C):st=st.next=Ct,he.lanes|=Dt,jl|=Dt;vt=vt.next}while(vt!==null&&vt!==e);if(st===null?Y=C:st.next=W,!Yn(C,t.memoizedState)&&(Mn=!0,Ot&&(l=Rl,l!==null)))throw l;t.memoizedState=C,t.baseState=Y,t.baseQueue=st,u.lastRenderedState=C}return v===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function bf(t){var e=yn(),l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var u=l.dispatch,v=l.pending,C=e.memoizedState;if(v!==null){l.pending=null;var Y=v=v.next;do C=t(C,Y.action),Y=Y.next;while(Y!==v);Yn(C,e.memoizedState)||(Mn=!0),e.memoizedState=C,e.baseQueue===null&&(e.baseState=C),l.lastRenderedState=C}return[C,u]}function kh(t,e,l){var u=he,v=yn(),C=Ee;if(C){if(l===void 0)throw Error(r(407));l=l()}else l=e();var Y=!Yn((qe||v).memoizedState,l);if(Y&&(v.memoizedState=l,Mn=!0),v=v.queue,Rf(Cf.bind(null,u,v,t),[t]),v.getSnapshot!==e||Y||On!==null&&On.memoizedState.tag&1){if(u.flags|=2048,ps(9,{destroy:void 0},$h.bind(null,u,v,l,e),null),ye===null)throw Error(r(349));C||(Ei&127)!==0||Wh(u,e,l)}return l}function Wh(t,e,l){t.flags|=16384,t={getSnapshot:e,value:l},e=he.updateQueue,e===null?(e=wu(),he.updateQueue=e,e.stores=[t]):(l=e.stores,l===null?e.stores=[t]:l.push(t))}function $h(t,e,l,u){e.value=l,e.getSnapshot=u,Ef(e)&&td(t)}function Cf(t,e,l){return l(function(){Ef(e)&&td(t)})}function Ef(t){var e=t.getSnapshot;t=t.value;try{var l=e();return!Yn(t,l)}catch{return!0}}function td(t){var e=Na(t,2);e!==null&&He(e,t,2)}function Lu(t){var e=oa();if(typeof t=="function"){var l=t;if(t=l(),dr){mn(!0);try{l()}finally{mn(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},e}function Tf(t,e,l,u){return t.baseState=l,Sf(t,qe,typeof u=="function"?u:Ai)}function ed(t,e,l,u,v){if(Ro(t))throw Error(r(485));if(t=e.action,t!==null){var C={payload:v,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){C.listeners.push(Y)}};x.T!==null?l(!0):C.isTransition=!1,u(C),l=e.pending,l===null?(C.next=e.pending=C,qu(e,C)):(C.next=l.next,e.pending=l.next=C)}}function qu(t,e){var l=e.action,u=e.payload,v=t.state;if(e.isTransition){var C=x.T,Y={};x.T=Y;try{var W=l(v,u),st=x.S;st!==null&&st(Y,W),Pu(t,e,W)}catch(vt){Af(t,e,vt)}finally{C!==null&&Y.types!==null&&(C.types=Y.types),x.T=C}}else try{C=l(v,u),Pu(t,e,C)}catch(vt){Af(t,e,vt)}}function Pu(t,e,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){nd(t,e,u)},function(u){return Af(t,e,u)}):nd(t,e,l)}function nd(t,e,l){e.status="fulfilled",e.value=l,ad(e),t.state=l,e=t.pending,e!==null&&(l=e.next,l===e?t.pending=null:(l=l.next,e.next=l,qu(t,l)))}function Af(t,e,l){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do e.status="rejected",e.reason=l,ad(e),e=e.next;while(e!==u)}t.action=null}function ad(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function id(t,e){return e}function _f(t,e){if(Ee){var l=ye.formState;if(l!==null){t:{var u=he;if(Ee){if(Qe){e:{for(var v=Qe,C=sa;v.nodeType!==8;){if(!C){v=null;break e}if(v=Bi(v.nextSibling),v===null){v=null;break e}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){Qe=Bi(v.nextSibling),u=v.data==="F!";break t}}Qi(u)}u=!1}u&&(e=l[0])}}return l=oa(),l.memoizedState=l.baseState=e,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:id,lastRenderedState:e},l.queue=u,l=Nf.bind(null,he,u),u.dispatch=l,u=Lu(!1),C=Sn.bind(null,he,!1,u.queue),u=oa(),v={state:e,dispatch:null,action:t,pending:null},u.queue=v,l=ed.bind(null,he,v,C,l),v.dispatch=l,u.memoizedState=t,[e,l,!1]}function ld(t){var e=yn();return rd(e,qe,t)}function rd(t,e,l){if(e=Sf(t,e,id)[0],t=ju(Ai)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var u=Ao(e)}catch(Y){throw Y===ur?Du:Y}else u=e;e=yn();var v=e.queue,C=v.dispatch;return l!==e.memoizedState&&(he.flags|=2048,ps(9,{destroy:void 0},R0.bind(null,v,l),null)),[u,C,t]}function R0(t,e){t.action=e}function sd(t){var e=yn(),l=qe;if(l!==null)return rd(e,l,t);yn(),e=e.memoizedState,l=yn();var u=l.queue.dispatch;return l.memoizedState=t,[e,u,!1]}function ps(t,e,l,u){return t={tag:t,create:l,deps:u,inst:e,next:null},e=he.updateQueue,e===null&&(e=wu(),he.updateQueue=e),l=e.lastEffect,l===null?e.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,e.lastEffect=t),t}function od(){return yn().memoizedState}function Yu(t,e,l,u){var v=oa();he.flags|=t,v.memoizedState=ps(1|e,{destroy:void 0},l,u===void 0?null:u)}function Vu(t,e,l,u){var v=yn();u=u===void 0?null:u;var C=v.memoizedState.inst;qe!==null&&u!==null&&gf(u,qe.memoizedState.deps)?v.memoizedState=ps(e,C,l,u):(he.flags|=t,v.memoizedState=ps(1|e,C,l,u))}function ud(t,e){Yu(8390656,8,t,e)}function Rf(t,e){Vu(2048,8,t,e)}function O0(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=wu(),he.updateQueue=e,e.events=[t];else{var l=e.events;l===null?e.events=[t]:l.push(t)}}function cd(t){var e=yn().memoizedState;return O0({ref:e,nextImpl:t}),function(){if((le&2)!==0)throw Error(r(440));return e.impl.apply(void 0,arguments)}}function fd(t,e){return Vu(4,2,t,e)}function hd(t,e){return Vu(4,4,t,e)}function dd(t,e){if(typeof e=="function"){t=t();var l=e(t);return function(){typeof l=="function"?l():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gd(t,e,l){l=l!=null?l.concat([t]):null,Vu(4,4,dd.bind(null,e,t),l)}function Xu(){}function pd(t,e){var l=yn();e=e===void 0?null:e;var u=l.memoizedState;return e!==null&&gf(e,u[1])?u[0]:(l.memoizedState=[t,e],t)}function md(t,e){var l=yn();e=e===void 0?null:e;var u=l.memoizedState;if(e!==null&&gf(e,u[1]))return u[0];if(u=t(),dr){mn(!0);try{t()}finally{mn(!1)}}return l.memoizedState=[u,e],u}function Ga(t,e,l){return l===void 0||(Ei&1073741824)!==0&&(pe&261930)===0?t.memoizedState=e:(t.memoizedState=l,t=sl(),he.lanes|=t,jl|=t,l)}function Of(t,e,l,u){return Yn(l,e)?l:gs.current!==null?(t=Ga(t,l,u),Yn(t,e)||(Mn=!0),t):(Ei&42)===0||(Ei&1073741824)!==0&&(pe&261930)===0?(Mn=!0,t.memoizedState=l):(t=sl(),he.lanes|=t,jl|=t,e)}function Iu(t,e,l,u,v){var C=P.p;P.p=C!==0&&8>C?C:8;var Y=x.T,W={};x.T=W,Sn(t,!1,e,l);try{var st=v(),vt=x.S;if(vt!==null&&vt(W,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var Ot=za(st,u);_o(t,e,Ot,aa(t))}else _o(t,e,u,aa(t))}catch(Dt){_o(t,e,{then:function(){},status:"rejected",reason:Dt},aa())}finally{P.p=C,Y!==null&&W.types!==null&&(Y.types=W.types),x.T=Y}}function vd(){}function Qu(t,e,l,u){if(t.tag!==5)throw Error(r(476));var v=Mf(t).queue;Iu(t,v,e,Z,l===null?vd:function(){return yd(t),l(u)})}function Mf(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:Z},next:null};var l={};return e.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:l},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function yd(t){var e=Mf(t);e.next===null&&(e=t.alternate.memoizedState),_o(t,e.next.queue,{},aa())}function Ku(){return We(Jf)}function xf(){return yn().memoizedState}function Sd(){return yn().memoizedState}function M0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var l=aa();t=Ml(l);var u=xl(e,t,l);u!==null&&(He(u,e,l),Co(u,e,l)),e={cache:Mu()},t.payload=e;return}e=e.return}}function x0(t,e,l){var u=aa();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ro(t)?bd(e,l):(l=er(t,e,l,u),l!==null&&(He(l,t,u),Df(l,e,u)))}function Nf(t,e,l){var u=aa();_o(t,e,l,u)}function _o(t,e,l,u){var v={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ro(t))bd(e,v);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=e.lastRenderedReducer,C!==null))try{var Y=e.lastRenderedState,W=C(Y,l);if(v.hasEagerState=!0,v.eagerState=W,Yn(W,Y))return Xi(t,e,v,0),ye===null&&uo(),!1}catch{}finally{}if(l=er(t,e,v,u),l!==null)return He(l,t,u),Df(l,e,u),!0}return!1}function Sn(t,e,l,u){if(u={lane:2,revertLane:U0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ro(t)){if(e)throw Error(r(479))}else e=er(t,l,u,2),e!==null&&He(e,t,2)}function Ro(t){var e=t.alternate;return t===he||e!==null&&e===he}function bd(t,e){Ka=tl=!0;var l=t.pending;l===null?e.next=e:(e.next=l.next,l.next=e),t.pending=e}function Df(t,e,l){if((l&4194048)!==0){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,Mc(t,l)}}var ms={readContext:We,use:Hu,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn};ms.useEffectEvent=gn;var pr={readContext:We,use:Hu,useCallback:function(t,e){return oa().memoizedState=[t,e===void 0?null:e],t},useContext:We,useEffect:ud,useImperativeHandle:function(t,e,l){l=l!=null?l.concat([t]):null,Yu(4194308,4,dd.bind(null,e,t),l)},useLayoutEffect:function(t,e){return Yu(4194308,4,t,e)},useInsertionEffect:function(t,e){Yu(4,2,t,e)},useMemo:function(t,e){var l=oa();e=e===void 0?null:e;var u=t();if(dr){mn(!0);try{t()}finally{mn(!1)}}return l.memoizedState=[u,e],u},useReducer:function(t,e,l){var u=oa();if(l!==void 0){var v=l(e);if(dr){mn(!0);try{l(e)}finally{mn(!1)}}}else v=e;return u.memoizedState=u.baseState=v,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:v},u.queue=t,t=t.dispatch=x0.bind(null,he,t),[u.memoizedState,t]},useRef:function(t){var e=oa();return t={current:t},e.memoizedState=t},useState:function(t){t=Lu(t);var e=t.queue,l=Nf.bind(null,he,e);return e.dispatch=l,[t.memoizedState,l]},useDebugValue:Xu,useDeferredValue:function(t,e){var l=oa();return Ga(l,t,e)},useTransition:function(){var t=Lu(!1);return t=Iu.bind(null,he,t.queue,!0,!1),oa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,l){var u=he,v=oa();if(Ee){if(l===void 0)throw Error(r(407));l=l()}else{if(l=e(),ye===null)throw Error(r(349));(pe&127)!==0||Wh(u,e,l)}v.memoizedState=l;var C={value:l,getSnapshot:e};return v.queue=C,ud(Cf.bind(null,u,C,t),[t]),u.flags|=2048,ps(9,{destroy:void 0},$h.bind(null,u,C,l,e),null),l},useId:function(){var t=oa(),e=ye.identifierPrefix;if(Ee){var l=ni,u=ei;l=(u&~(1<<32-ie(u)-1)).toString(32)+l,e="_"+e+"R_"+l,l=Gu++,0<l&&(e+="H"+l.toString(32)),e+="_"}else l=A0++,e="_"+e+"r_"+l.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ku,useFormState:_f,useActionState:_f,useOptimistic:function(t){var e=oa();e.memoizedState=e.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=l,e=Sn.bind(null,he,!0,l),l.dispatch=e,[t,e]},useMemoCache:yf,useCacheRefresh:function(){return oa().memoizedState=M0.bind(null,he)},useEffectEvent:function(t){var e=oa(),l={impl:t};return e.memoizedState=l,function(){if((le&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Oo={readContext:We,use:Hu,useCallback:pd,useContext:We,useEffect:Rf,useImperativeHandle:gd,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:md,useReducer:ju,useRef:od,useState:function(){return ju(Ai)},useDebugValue:Xu,useDeferredValue:function(t,e){var l=yn();return Of(l,qe.memoizedState,t,e)},useTransition:function(){var t=ju(Ai)[0],e=yn().memoizedState;return[typeof t=="boolean"?t:Ao(t),e]},useSyncExternalStore:kh,useId:xf,useHostTransitionStatus:Ku,useFormState:ld,useActionState:ld,useOptimistic:function(t,e){var l=yn();return Tf(l,qe,t,e)},useMemoCache:yf,useCacheRefresh:Sd};Oo.useEffectEvent=cd;var mr={readContext:We,use:Hu,useCallback:pd,useContext:We,useEffect:Rf,useImperativeHandle:gd,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:md,useReducer:bf,useRef:od,useState:function(){return bf(Ai)},useDebugValue:Xu,useDeferredValue:function(t,e){var l=yn();return qe===null?Ga(l,t,e):Of(l,qe.memoizedState,t,e)},useTransition:function(){var t=bf(Ai)[0],e=yn().memoizedState;return[typeof t=="boolean"?t:Ao(t),e]},useSyncExternalStore:kh,useId:xf,useHostTransitionStatus:Ku,useFormState:sd,useActionState:sd,useOptimistic:function(t,e){var l=yn();return qe!==null?Tf(l,qe,t,e):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:yf,useCacheRefresh:Sd};mr.useEffectEvent=cd;function zl(t,e,l,u){e=t.memoizedState,l=l(u,e),l=l==null?e:R({},e,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var ua={enqueueSetState:function(t,e,l){t=t._reactInternals;var u=aa(),v=Ml(u);v.payload=e,l!=null&&(v.callback=l),e=xl(t,v,u),e!==null&&(He(e,t,u),Co(e,t,u))},enqueueReplaceState:function(t,e,l){t=t._reactInternals;var u=aa(),v=Ml(u);v.tag=1,v.payload=e,l!=null&&(v.callback=l),e=xl(t,v,u),e!==null&&(He(e,t,u),Co(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var l=aa(),u=Ml(l);u.tag=2,e!=null&&(u.callback=e),e=xl(t,u,l),e!==null&&(He(e,t,l),Co(e,t,l))}};function Cd(t,e,l,u,v,C,Y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,C,Y):e.prototype&&e.prototype.isPureReactComponent?!Xa(l,u)||!Xa(v,C):!0}function Ed(t,e,l,u){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(l,u),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(l,u),e.state!==t&&ua.enqueueReplaceState(e,e.state,null)}function _i(t,e){var l=e;if("ref"in e){l={};for(var u in e)u!=="ref"&&(l[u]=e[u])}if(t=t.defaultProps){l===e&&(l=R({},l));for(var v in t)l[v]===void 0&&(l[v]=t[v])}return l}function Mo(t){Wa(t)}function xo(t){console.error(t)}function Zu(t){Wa(t)}function Ju(t,e){try{var l=t.onUncaughtError;l(e.value,{componentStack:e.stack})}catch(u){setTimeout(function(){throw u})}}function Td(t,e,l){try{var u=t.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function wa(t,e,l){return l=Ml(l),l.tag=3,l.payload={element:null},l.callback=function(){Ju(t,e)},l}function Uf(t){return t=Ml(t),t.tag=3,t}function Ad(t,e,l,u){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var C=u.value;t.payload=function(){return v(C)},t.callback=function(){Td(e,l,u)}}var Y=l.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(t.callback=function(){Td(e,l,u),typeof v!="function"&&(da===null?da=new Set([this]):da.add(this));var W=u.stack;this.componentDidCatch(u.value,{componentStack:W!==null?W:""})})}function zf(t,e,l,u,v){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(e=l.alternate,e!==null&&us(e,l,v,!0),l=an.current,l!==null){switch(l.tag){case 31:case 13:return Qa===null?m():l.alternate===null&&Ze===0&&(Ze=3),l.flags&=-257,l.flags|=65536,l.lanes=v,u===vo?l.flags|=16384:(e=l.updateQueue,e===null?l.updateQueue=new Set([u]):e.add(u),Ie(t,u,v)),!1;case 22:return l.flags|=65536,u===vo?l.flags|=16384:(e=l.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=e):(l=e.retryQueue,l===null?e.retryQueue=new Set([u]):l.add(u)),Ie(t,u,v)),!1}throw Error(r(435,l.tag))}return Ie(t,u,v),m(),!1}if(Ee)return e=an.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=v,u!==_u&&(t=Error(r(422),{cause:u}),os(Da(t,l)))):(u!==_u&&(e=Error(r(423),{cause:u}),os(Da(e,l))),t=t.current.alternate,t.flags|=65536,v&=-v,t.lanes|=v,u=Da(u,l),v=wa(t.stateNode,u,v),hf(t,v),Ze!==4&&(Ze=2)),!1;var C=Error(r(520),{cause:u});if(C=Da(C,l),xe===null?xe=[C]:xe.push(C),Ze!==4&&(Ze=2),e===null)return!0;u=Da(u,l),l=e;do{switch(l.tag){case 3:return l.flags|=65536,t=v&-v,l.lanes|=t,t=wa(l.stateNode,u,t),hf(l,t),!1;case 1:if(e=l.type,C=l.stateNode,(l.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(da===null||!da.has(C))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Uf(v),Ad(v,t,l,u),hf(l,v),!1}l=l.return}while(l!==null);return!1}var Bf=Error(r(461)),Mn=!1;function Kn(t,e,l,u){e.child=t===null?Kh(e,null,l,u):fr(e,t.child,l,u)}function vs(t,e,l,u,v){l=l.render;var C=e.ref;if("ref"in u){var Y={};for(var W in u)W!=="ref"&&(Y[W]=u[W])}else Y=u;return Ki(e),u=gr(t,e,l,Y,C,v),W=pf(),t!==null&&!Mn?(mf(t,e,v),ri(t,e,v)):(Ee&&W&&ho(e),e.flags|=1,Kn(t,e,u,v),e.child)}function Ca(t,e,l,u,v){if(t===null){var C=l.type;return typeof C=="function"&&!Cu(C)&&C.defaultProps===void 0&&l.compare===null?(e.tag=15,e.type=C,Fu(t,e,C,u,v)):(t=ls(l.type,null,u,e,e.mode,v),t.ref=e.ref,t.return=e,e.child=t)}if(C=t.child,!ca(t,v)){var Y=C.memoizedProps;if(l=l.compare,l=l!==null?l:Xa,l(Y,u)&&t.ref===e.ref)return ri(t,e,v)}return e.flags|=1,t=$a(C,u),t.ref=e.ref,t.return=e,e.child=t}function Fu(t,e,l,u,v){if(t!==null){var C=t.memoizedProps;if(Xa(C,u)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=u=C,ca(t,v))(t.flags&131072)!==0&&(Mn=!0);else return e.lanes=t.lanes,ri(t,e,v)}return Ea(t,e,l,u,v)}function Gf(t,e,l,u){var v=u.children,C=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((e.flags&128)!==0){if(C=C!==null?C.baseLanes|l:l,t!==null){for(u=e.child=t.child,v=0;u!==null;)v=v|u.lanes|u.childLanes,u=u.sibling;u=v&~C}else u=0,e.child=null;return wf(t,e,C,l,u)}if((l&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zi(e,C!==null?C.cachePool:null),C!==null?Si(e,C):wn(),Ci(e);else return u=e.lanes=536870912,wf(t,e,C!==null?C.baseLanes|l:l,l,u)}else C!==null?(Zi(e,C.cachePool),Si(e,C),Ul(),e.memoizedState=null):(t!==null&&Zi(e,null),wn(),Ul());return Kn(t,e,v,l),e.child}function vr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function wf(t,e,l,u,v){var C=hs();return C=C===null?null:{parent:_n._currentValue,pool:C},e.memoizedState={baseLanes:l,cachePool:C},t!==null&&Zi(e,null),wn(),Ci(e),t!==null&&us(t,e,u,!0),e.childLanes=v,null}function el(t,e){return e=Hn({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function yr(t,e,l){return fr(e,t.child,null,l),t=el(e,e.pendingProps),t.flags|=2,Ba(e),e.memoizedState=null,t}function ku(t,e,l){var u=e.pendingProps,v=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ee){if(u.mode==="hidden")return t=el(e,u),e.lanes=536870912,vr(null,t);if(Rn(e),(t=Qe)?(t=Xp(t,sa),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ii!==null?{id:ei,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},l=ya(t),l.return=e,e.child=l,Qn=e,Qe=null)):t=null,t===null)throw Qi(e);return e.lanes=536870912,null}return el(e,u)}var C=t.memoizedState;if(C!==null){var Y=C.dehydrated;if(Rn(e),v)if(e.flags&256)e.flags&=-257,e=yr(t,e,l);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(r(558));else if(Mn||us(t,e,l,!1),v=(l&t.childLanes)!==0,Mn||v){if(u=ye,u!==null&&(Y=Vs(u,l),Y!==0&&Y!==C.retryLane))throw C.retryLane=Y,Na(t,Y),He(u,t,Y),Bf;m(),e=yr(t,e,l)}else t=C.treeContext,Qe=Bi(Y.nextSibling),Qn=e,Ee=!0,Ua=null,sa=!1,t!==null&&Ih(e,t),e=el(e,u),e.flags|=4096;return e}return t=$a(t.child,{mode:u.mode,children:u.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Sr(t,e){var l=e.ref;if(l===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(t===null||t.ref!==l)&&(e.flags|=4194816)}}function Ea(t,e,l,u,v){return Ki(e),l=gr(t,e,l,u,void 0,v),u=pf(),t!==null&&!Mn?(mf(t,e,v),ri(t,e,v)):(Ee&&u&&ho(e),e.flags|=1,Kn(t,e,l,v),e.child)}function Ha(t,e,l,u,v,C){return Ki(e),e.updateQueue=null,l=Fh(e,u,l,v),Jh(t),u=pf(),t!==null&&!Mn?(mf(t,e,C),ri(t,e,C)):(Ee&&u&&ho(e),e.flags|=1,Kn(t,e,l,C),e.child)}function Bl(t,e,l,u,v){if(Ki(e),e.stateNode===null){var C=pi,Y=l.contextType;typeof Y=="object"&&Y!==null&&(C=We(Y)),C=new l(u,C),e.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=ua,e.stateNode=C,C._reactInternals=e,C=e.stateNode,C.props=u,C.state=e.memoizedState,C.refs={},hr(e),Y=l.contextType,C.context=typeof Y=="object"&&Y!==null?We(Y):pi,C.state=e.memoizedState,Y=l.getDerivedStateFromProps,typeof Y=="function"&&(zl(e,l,Y,u),C.state=e.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(Y=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),Y!==C.state&&ua.enqueueReplaceState(C,C.state,null),Nl(e,u,C,v),ds(),C.state=e.memoizedState),typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!0}else if(t===null){C=e.stateNode;var W=e.memoizedProps,st=_i(l,W);C.props=st;var vt=C.context,Ot=l.contextType;Y=pi,typeof Ot=="object"&&Ot!==null&&(Y=We(Ot));var Dt=l.getDerivedStateFromProps;Ot=typeof Dt=="function"||typeof C.getSnapshotBeforeUpdate=="function",W=e.pendingProps!==W,Ot||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(W||vt!==Y)&&Ed(e,C,u,Y),$i=!1;var Ct=e.memoizedState;C.state=Ct,Nl(e,u,C,v),ds(),vt=e.memoizedState,W||Ct!==vt||$i?(typeof Dt=="function"&&(zl(e,l,Dt,u),vt=e.memoizedState),(st=$i||Cd(e,l,st,u,Ct,vt,Y))?(Ot||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(e.flags|=4194308)):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=u,e.memoizedState=vt),C.props=u,C.state=vt,C.context=Y,u=st):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!1)}else{C=e.stateNode,ff(t,e),Y=e.memoizedProps,Ot=_i(l,Y),C.props=Ot,Dt=e.pendingProps,Ct=C.context,vt=l.contextType,st=pi,typeof vt=="object"&&vt!==null&&(st=We(vt)),W=l.getDerivedStateFromProps,(vt=typeof W=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Y!==Dt||Ct!==st)&&Ed(e,C,u,st),$i=!1,Ct=e.memoizedState,C.state=Ct,Nl(e,u,C,v),ds();var Tt=e.memoizedState;Y!==Dt||Ct!==Tt||$i||t!==null&&t.dependencies!==null&&Ou(t.dependencies)?(typeof W=="function"&&(zl(e,l,W,u),Tt=e.memoizedState),(Ot=$i||Cd(e,l,Ot,u,Ct,Tt,st)||t!==null&&t.dependencies!==null&&Ou(t.dependencies))?(vt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(u,Tt,st),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(u,Tt,st)),typeof C.componentDidUpdate=="function"&&(e.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof C.componentDidUpdate!="function"||Y===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Y===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),e.memoizedProps=u,e.memoizedState=Tt),C.props=u,C.state=Tt,C.context=st,u=Ot):(typeof C.componentDidUpdate!="function"||Y===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Y===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),u=!1)}return C=u,Sr(t,e),u=(e.flags&128)!==0,C||u?(C=e.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:C.render(),e.flags|=1,t!==null&&u?(e.child=fr(e,t.child,null,v),e.child=fr(e,null,l,v)):Kn(t,e,l,v),e.memoizedState=C.state,t=e.child):t=ri(t,e,v),t}function Ri(t,e,l,u){return Al(),e.flags|=256,Kn(t,e,l,u),e.child}var ii={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Un(t){return{baseLanes:t,cachePool:or()}}function br(t,e,l){return t=t!==null?t.childLanes&~l:0,e&&(t|=re),t}function nl(t,e,l){var u=e.pendingProps,v=!1,C=(e.flags&128)!==0,Y;if((Y=C)||(Y=t!==null&&t.memoizedState===null?!1:(vn.current&2)!==0),Y&&(v=!0,e.flags&=-129),Y=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(v?Dl(e):Ul(),(t=Qe)?(t=Xp(t,sa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ii!==null?{id:ei,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},l=ya(t),l.return=e,e.child=l,Qn=e,Qe=null)):t=null,t===null)throw Qi(e);return I0(t)?e.lanes=32:e.lanes=536870912,null}var W=u.children;return u=u.fallback,v?(Ul(),v=e.mode,W=Hn({mode:"hidden",children:W},v),u=Tl(u,v,l,null),W.return=e,u.return=e,W.sibling=u,e.child=W,u=e.child,u.memoizedState=Un(l),u.childLanes=br(t,Y,l),e.memoizedState=ii,vr(null,u)):(Dl(e),ys(e,W))}var st=t.memoizedState;if(st!==null&&(W=st.dehydrated,W!==null)){if(C)e.flags&256?(Dl(e),e.flags&=-257,e=bn(t,e,l)):e.memoizedState!==null?(Ul(),e.child=t.child,e.flags|=128,e=null):(Ul(),W=u.fallback,v=e.mode,u=Hn({mode:"visible",children:u.children},v),W=Tl(W,v,l,null),W.flags|=2,u.return=e,W.return=e,u.sibling=W,e.child=u,fr(e,t.child,null,l),u=e.child,u.memoizedState=Un(l),u.childLanes=br(t,Y,l),e.memoizedState=ii,e=vr(null,u));else if(Dl(e),I0(W)){if(Y=W.nextSibling&&W.nextSibling.dataset,Y)var vt=Y.dgst;Y=vt,u=Error(r(419)),u.stack="",u.digest=Y,os({value:u,source:null,stack:null}),e=bn(t,e,l)}else if(Mn||us(t,e,l,!1),Y=(l&t.childLanes)!==0,Mn||Y){if(Y=ye,Y!==null&&(u=Vs(Y,l),u!==0&&u!==st.retryLane))throw st.retryLane=u,Na(t,u),He(Y,t,u),Bf;X0(W)||m(),e=bn(t,e,l)}else X0(W)?(e.flags|=192,e.child=t.child,e=null):(t=st.treeContext,Qe=Bi(W.nextSibling),Qn=e,Ee=!0,Ua=null,sa=!1,t!==null&&Ih(e,t),e=ys(e,u.children),e.flags|=4096);return e}return v?(Ul(),W=u.fallback,v=e.mode,st=t.child,vt=st.sibling,u=$a(st,{mode:"hidden",children:u.children}),u.subtreeFlags=st.subtreeFlags&65011712,vt!==null?W=$a(vt,W):(W=Tl(W,v,l,null),W.flags|=2),W.return=e,u.return=e,u.sibling=W,e.child=u,vr(null,u),u=e.child,W=t.child.memoizedState,W===null?W=Un(l):(v=W.cachePool,v!==null?(st=_n._currentValue,v=v.parent!==st?{parent:st,pool:st}:v):v=or(),W={baseLanes:W.baseLanes|l,cachePool:v}),u.memoizedState=W,u.childLanes=br(t,Y,l),e.memoizedState=ii,vr(t.child,u)):(Dl(e),l=t.child,t=l.sibling,l=$a(l,{mode:"visible",children:u.children}),l.return=e,l.sibling=null,t!==null&&(Y=e.deletions,Y===null?(e.deletions=[t],e.flags|=16):Y.push(t)),e.child=l,e.memoizedState=null,l)}function ys(t,e){return e=Hn({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Hn(t,e){return t=$n(22,t,null,e),t.lanes=0,t}function bn(t,e,l){return fr(e,t.child,null,l),t=ys(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ue(t,e,l){t.lanes|=e;var u=t.alternate;u!==null&&(u.lanes|=e),sf(t.return,e,l)}function al(t,e,l,u,v,C){var Y=t.memoizedState;Y===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:v,treeForkCount:C}:(Y.isBackwards=e,Y.rendering=null,Y.renderingStartTime=0,Y.last=u,Y.tail=l,Y.tailMode=v,Y.treeForkCount=C)}function li(t,e,l){var u=e.pendingProps,v=u.revealOrder,C=u.tail;u=u.children;var Y=vn.current,W=(Y&2)!==0;if(W?(Y=Y&1|2,e.flags|=128):Y&=1,it(vn,Y),Kn(t,e,u,l),u=Ee?ss:0,!W&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ue(t,l,e);else if(t.tag===19)Ue(t,l,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(v){case"forwards":for(l=e.child,v=null;l!==null;)t=l.alternate,t!==null&&Bu(t)===null&&(v=l),l=l.sibling;l=v,l===null?(v=e.child,e.child=null):(v=l.sibling,l.sibling=null),al(e,!1,v,l,C,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=e.child,e.child=null;v!==null;){if(t=v.alternate,t!==null&&Bu(t)===null){e.child=v;break}t=v.sibling,v.sibling=l,l=v,v=t}al(e,!0,l,null,C,u);break;case"together":al(e,!1,null,null,void 0,u);break;default:e.memoizedState=null}return e.child}function ri(t,e,l){if(t!==null&&(e.dependencies=t.dependencies),jl|=e.lanes,(l&e.childLanes)===0)if(t!==null){if(us(t,e,l,!1),(l&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(r(153));if(e.child!==null){for(t=e.child,l=$a(t,t.pendingProps),e.child=l,l.return=e;t.sibling!==null;)t=t.sibling,l=l.sibling=$a(t,t.pendingProps),l.return=e;l.sibling=null}return e.child}function ca(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Ou(t)))}function Wu(t,e,l){switch(e.tag){case 3:gt(e,e.stateNode.containerInfo),_l(e,_n,t.memoizedState.cache),Al();break;case 27:case 5:Ht(e);break;case 4:gt(e,e.stateNode.containerInfo);break;case 10:_l(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Rn(e),null;break;case 13:var u=e.memoizedState;if(u!==null)return u.dehydrated!==null?(Dl(e),e.flags|=128,null):(l&e.child.childLanes)!==0?nl(t,e,l):(Dl(e),t=ri(t,e,l),t!==null?t.sibling:null);Dl(e);break;case 19:var v=(t.flags&128)!==0;if(u=(l&e.childLanes)!==0,u||(us(t,e,l,!1),u=(l&e.childLanes)!==0),v){if(u)return li(t,e,l);e.flags|=128}if(v=e.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),it(vn,vn.current),u)break;return null;case 22:return e.lanes=0,Gf(t,e,l,e.pendingProps);case 24:_l(e,_n,t.memoizedState.cache)}return ri(t,e,l)}function Gl(t,e,l){if(t!==null)if(t.memoizedProps!==e.pendingProps)Mn=!0;else{if(!ca(t,l)&&(e.flags&128)===0)return Mn=!1,Wu(t,e,l);Mn=(t.flags&131072)!==0}else Mn=!1,Ee&&(e.flags&1048576)!==0&&Au(e,ss,e.index);switch(e.lanes=0,e.tag){case 16:t:{var u=e.pendingProps;if(t=Fi(e.elementType),e.type=t,typeof t=="function")Cu(t)?(u=_i(t,u),e.tag=1,e=Bl(null,e,t,u,l)):(e.tag=0,e=Ea(null,e,t,u,l));else{if(t!=null){var v=t.$$typeof;if(v===w){e.tag=11,e=vs(null,e,t,u,l);break t}else if(v===T){e.tag=14,e=Ca(null,e,t,u,l);break t}}throw e=K(t)||t,Error(r(306,e,""))}}return e;case 0:return Ea(t,e,e.type,e.pendingProps,l);case 1:return u=e.type,v=_i(u,e.pendingProps),Bl(t,e,u,v,l);case 3:t:{if(gt(e,e.stateNode.containerInfo),t===null)throw Error(r(387));u=e.pendingProps;var C=e.memoizedState;v=C.element,ff(t,e),Nl(e,u,null,l);var Y=e.memoizedState;if(u=Y.cache,_l(e,_n,u),u!==C.cache&&of(e,[_n],l,!0),ds(),u=Y.element,C.isDehydrated)if(C={element:u,isDehydrated:!1,cache:Y.cache},e.updateQueue.baseState=C,e.memoizedState=C,e.flags&256){e=Ri(t,e,u,l);break t}else if(u!==v){v=Da(Error(r(424)),e),os(v),e=Ri(t,e,u,l);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qe=Bi(t.firstChild),Qn=e,Ee=!0,Ua=null,sa=!0,l=Kh(e,null,u,l),e.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Al(),u===v){e=ri(t,e,l);break t}Kn(t,e,u,l)}e=e.child}return e;case 26:return Sr(t,e),t===null?(l=Fp(e.type,null,e.pendingProps,null))?e.memoizedState=l:Ee||(l=e.type,t=e.pendingProps,u=Ud($.current).createElement(l),u[Nn]=e,u[Bn]=t,ga(u,l,t),Gn(u),e.stateNode=u):e.memoizedState=Fp(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ht(e),t===null&&Ee&&(u=e.stateNode=Kp(e.type,e.pendingProps,$.current),Qn=e,sa=!0,v=Qe,Rs(e.type)?(Q0=v,Qe=Bi(u.firstChild)):Qe=v),Kn(t,e,e.pendingProps.children,l),Sr(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((v=u=Qe)&&(u=d2(u,e.type,e.pendingProps,sa),u!==null?(e.stateNode=u,Qn=e,Qe=Bi(u.firstChild),sa=!1,v=!0):v=!1),v||Qi(e)),Ht(e),v=e.type,C=e.pendingProps,Y=t!==null?t.memoizedProps:null,u=C.children,P0(v,C)?u=null:Y!==null&&P0(v,Y)&&(e.flags|=32),e.memoizedState!==null&&(v=gr(t,e,_0,null,null,l),Jf._currentValue=v),Sr(t,e),Kn(t,e,u,l),e.child;case 6:return t===null&&Ee&&((t=l=Qe)&&(l=g2(l,e.pendingProps,sa),l!==null?(e.stateNode=l,Qn=e,Qe=null,t=!0):t=!1),t||Qi(e)),null;case 13:return nl(t,e,l);case 4:return gt(e,e.stateNode.containerInfo),u=e.pendingProps,t===null?e.child=fr(e,null,u,l):Kn(t,e,u,l),e.child;case 11:return vs(t,e,e.type,e.pendingProps,l);case 7:return Kn(t,e,e.pendingProps,l),e.child;case 8:return Kn(t,e,e.pendingProps.children,l),e.child;case 12:return Kn(t,e,e.pendingProps.children,l),e.child;case 10:return u=e.pendingProps,_l(e,e.type,u.value),Kn(t,e,u.children,l),e.child;case 9:return v=e.type._context,u=e.pendingProps.children,Ki(e),v=We(v),u=u(v),e.flags|=1,Kn(t,e,u,l),e.child;case 14:return Ca(t,e,e.type,e.pendingProps,l);case 15:return Fu(t,e,e.type,e.pendingProps,l);case 19:return li(t,e,l);case 31:return ku(t,e,l);case 22:return Gf(t,e,l,e.pendingProps);case 24:return Ki(e),u=We(_n),t===null?(v=hs(),v===null&&(v=ye,C=Mu(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=l),v=C),e.memoizedState={parent:u,cache:v},hr(e),_l(e,_n,v)):((t.lanes&l)!==0&&(ff(t,e),Nl(e,null,null,l),ds()),v=t.memoizedState,C=e.memoizedState,v.parent!==u?(v={parent:u,cache:u},e.memoizedState=v,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=v),_l(e,_n,u)):(u=C.cache,_l(e,_n,u),u!==v.cache&&of(e,[_n],l,!0))),Kn(t,e,e.pendingProps.children,l),e.child;case 29:throw e.pendingProps}throw Error(r(156,e.tag))}function Zn(t){t.flags|=4}function Hf(t,e,l,u,v){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(v&335544128)===v)if(t.stateNode.complete)t.flags|=8192;else if(a())t.flags|=8192;else throw ki=vo,mo}else t.flags&=-16777217}function _d(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!e1(e))if(a())t.flags|=8192;else throw ki=vo,mo}function $u(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Rc():536870912,t.lanes|=e,Se|=e)}function Ke(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var l=null;e!==null;)e.alternate!==null&&(l=e),e=e.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(e)for(var v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags&65011712,u|=v.flags&65011712,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags,u|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=u,t.childLanes=l,e}function Ss(t,e,l){var u=e.pendingProps;switch(af(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(e),null;case 1:return Ve(e),null;case 3:return l=e.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),e.memoizedState.cache!==u&&(e.flags|=2048),vi(_n),Rt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ar(e)?Zn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ir())),Ve(e),null;case 26:var v=e.type,C=e.memoizedState;return t===null?(Zn(e),C!==null?(Ve(e),_d(e,C)):(Ve(e),Hf(e,v,null,u,l))):C?C!==t.memoizedState?(Zn(e),Ve(e),_d(e,C)):(Ve(e),e.flags&=-16777217):(t=t.memoizedProps,t!==u&&Zn(e),Ve(e),Hf(e,v,t,u,l)),null;case 27:if(Kt(e),l=$.current,v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Zn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return Ve(e),null}t=X.current,ar(e)?lf(e):(t=Kp(v,u,l),e.stateNode=t,Zn(e))}return Ve(e),null;case 5:if(Kt(e),v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Zn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return Ve(e),null}if(C=X.current,ar(e))lf(e);else{var Y=Ud($.current);switch(C){case 1:C=Y.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:C=Y.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":C=Y.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":C=Y.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":C=Y.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof u.is=="string"?Y.createElement("select",{is:u.is}):Y.createElement("select"),u.multiple?C.multiple=!0:u.size&&(C.size=u.size);break;default:C=typeof u.is=="string"?Y.createElement(v,{is:u.is}):Y.createElement(v)}}C[Nn]=e,C[Bn]=u;t:for(Y=e.child;Y!==null;){if(Y.tag===5||Y.tag===6)C.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===e)break t;for(;Y.sibling===null;){if(Y.return===null||Y.return===e)break t;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}e.stateNode=C;t:switch(ga(C,v,u),v){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Zn(e)}}return Ve(e),Hf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,l),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==u&&Zn(e);else{if(typeof u!="string"&&e.stateNode===null)throw Error(r(166));if(t=$.current,ar(e)){if(t=e.stateNode,l=e.memoizedProps,u=null,v=Qn,v!==null)switch(v.tag){case 27:case 5:u=v.memoizedProps}t[Nn]=e,t=!!(t.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||wp(t.nodeValue,l)),t||Qi(e,!0)}else t=Ud(t).createTextNode(u),t[Nn]=e,e.stateNode=t}return Ve(e),null;case 31:if(l=e.memoizedState,t===null||t.memoizedState!==null){if(u=ar(e),l!==null){if(t===null){if(!u)throw Error(r(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Nn]=e}else Al(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ve(e),t=!1}else l=ir(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return e.flags&256?(Ba(e),e):(Ba(e),null);if((e.flags&128)!==0)throw Error(r(558))}return Ve(e),null;case 13:if(u=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(v=ar(e),u!==null&&u.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=e.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Nn]=e}else Al(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ve(e),v=!1}else v=ir(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=v),v=!0;if(!v)return e.flags&256?(Ba(e),e):(Ba(e),null)}return Ba(e),(e.flags&128)!==0?(e.lanes=l,e):(l=u!==null,t=t!==null&&t.memoizedState!==null,l&&(u=e.child,v=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(v=u.alternate.memoizedState.cachePool.pool),C=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),C!==v&&(u.flags|=2048)),l!==t&&l&&(e.child.flags|=8192),$u(e,e.updateQueue),Ve(e),null);case 4:return Rt(),t===null&&w0(e.stateNode.containerInfo),Ve(e),null;case 10:return vi(e.type),Ve(e),null;case 19:if(lt(vn),u=e.memoizedState,u===null)return Ve(e),null;if(v=(e.flags&128)!==0,C=u.rendering,C===null)if(v)Ke(u,!1);else{if(Ze!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(C=Bu(t),C!==null){for(e.flags|=128,Ke(u,!1),t=C.updateQueue,e.updateQueue=t,$u(e,t),e.subtreeFlags=0,t=l,l=e.child;l!==null;)Eu(l,t),l=l.sibling;return it(vn,vn.current&1|2),Ee&&mi(e,u.treeForkCount),e.child}t=t.sibling}u.tail!==null&&Ae()>Fa&&(e.flags|=128,v=!0,Ke(u,!1),e.lanes=4194304)}else{if(!v)if(t=Bu(C),t!==null){if(e.flags|=128,v=!0,t=t.updateQueue,e.updateQueue=t,$u(e,t),Ke(u,!0),u.tail===null&&u.tailMode==="hidden"&&!C.alternate&&!Ee)return Ve(e),null}else 2*Ae()-u.renderingStartTime>Fa&&l!==536870912&&(e.flags|=128,v=!0,Ke(u,!1),e.lanes=4194304);u.isBackwards?(C.sibling=e.child,e.child=C):(t=u.last,t!==null?t.sibling=C:e.child=C,u.last=C)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Ae(),t.sibling=null,l=vn.current,it(vn,v?l&1|2:l&1),Ee&&mi(e,u.treeForkCount),t):(Ve(e),null);case 22:case 23:return Ba(e),bi(),u=e.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(e.flags|=8192):u&&(e.flags|=8192),u?(l&536870912)!==0&&(e.flags&128)===0&&(Ve(e),e.subtreeFlags&6&&(e.flags|=8192)):Ve(e),l=e.updateQueue,l!==null&&$u(e,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),u=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),u!==l&&(e.flags|=2048),t!==null&&lt(sr),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),e.memoizedState.cache!==l&&(e.flags|=2048),vi(_n),Ve(e),null;case 25:return null;case 30:return null}throw Error(r(156,e.tag))}function jf(t,e){switch(af(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(_n),Rt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Kt(e),null;case 31:if(e.memoizedState!==null){if(Ba(e),e.alternate===null)throw Error(r(340));Al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ba(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(r(340));Al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(vn),null;case 4:return Rt(),null;case 10:return vi(e.type),null;case 22:case 23:return Ba(e),bi(),t!==null&&lt(sr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return vi(_n),null;case 25:return null;default:return null}}function No(t,e){switch(af(e),e.tag){case 3:vi(_n),Rt();break;case 26:case 27:case 5:Kt(e);break;case 4:Rt();break;case 31:e.memoizedState!==null&&Ba(e);break;case 13:Ba(e);break;case 19:lt(vn);break;case 10:vi(e.type);break;case 22:case 23:Ba(e),bi(),t!==null&&lt(sr);break;case 24:vi(_n)}}function Cr(t,e){try{var l=e.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var v=u.next;l=v;do{if((l.tag&t)===t){u=void 0;var C=l.create,Y=l.inst;u=C(),Y.destroy=u}l=l.next}while(l!==v)}}catch(W){Yt(e,e.return,W)}}function ja(t,e,l){try{var u=e.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var C=v.next;u=C;do{if((u.tag&t)===t){var Y=u.inst,W=Y.destroy;if(W!==void 0){Y.destroy=void 0,v=e;var st=l,vt=W;try{vt()}catch(Ot){Yt(v,st,Ot)}}}u=u.next}while(u!==C)}}catch(Ot){Yt(e,e.return,Ot)}}function bs(t){var e=t.updateQueue;if(e!==null){var l=t.stateNode;try{Zh(e,l)}catch(u){Yt(t,t.return,u)}}}function tc(t,e,l){l.props=_i(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(u){Yt(t,e,u)}}function Oi(t,e){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof l=="function"?t.refCleanup=l(u):l.current=u}}catch(v){Yt(t,e,v)}}function fa(t,e){var l=t.ref,u=t.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(v){Yt(t,e,v)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Yt(t,e,v)}else l.current=null}function Lf(t){var e=t.type,l=t.memoizedProps,u=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(v){Yt(t,t.return,v)}}function il(t,e,l){try{var u=t.stateNode;s2(u,t.type,l,e),u[Bn]=e}catch(v){Yt(t,t.return,v)}}function Rd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rs(t.type)||t.tag===4}function Er(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Rd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Do(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,e):(e=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,e.appendChild(t),l=l._reactRootContainer,l!=null||e.onclick!==null||(e.onclick=ma));else if(u!==4&&(u===27&&Rs(t.type)&&(l=t.stateNode,e=null),t=t.child,t!==null))for(Do(t,e,l),t=t.sibling;t!==null;)Do(t,e,l),t=t.sibling}function Tr(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?l.insertBefore(t,e):l.appendChild(t);else if(u!==4&&(u===27&&Rs(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Tr(t,e,l),t=t.sibling;t!==null;)Tr(t,e,l),t=t.sibling}function Uo(t){var e=t.stateNode,l=t.memoizedProps;try{for(var u=t.type,v=e.attributes;v.length;)e.removeAttributeNode(v[0]);ga(e,u,l),e[Nn]=t,e[Bn]=l}catch(C){Yt(t,t.return,C)}}var Ta=!1,Be=!1,wl=!1,ec=typeof WeakSet=="function"?WeakSet:Set,$e=null;function qf(t,e){if(t=t.containerInfo,L0=Ld,t=ka(t),yu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else t:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var v=u.anchorOffset,C=u.focusNode;u=u.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break t}var Y=0,W=-1,st=-1,vt=0,Ot=0,Dt=t,Ct=null;e:for(;;){for(var Tt;Dt!==l||v!==0&&Dt.nodeType!==3||(W=Y+v),Dt!==C||u!==0&&Dt.nodeType!==3||(st=Y+u),Dt.nodeType===3&&(Y+=Dt.nodeValue.length),(Tt=Dt.firstChild)!==null;)Ct=Dt,Dt=Tt;for(;;){if(Dt===t)break e;if(Ct===l&&++vt===v&&(W=Y),Ct===C&&++Ot===u&&(st=Y),(Tt=Dt.nextSibling)!==null)break;Dt=Ct,Ct=Dt.parentNode}Dt=Tt}l=W===-1||st===-1?null:{start:W,end:st}}else l=null}l=l||{start:0,end:0}}else l=null;for(q0={focusedElem:t,selectionRange:l},Ld=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){switch(e=$e,C=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)v=t[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&C!==null){t=void 0,l=e,v=C.memoizedProps,C=C.memoizedState,u=l.stateNode;try{var Zt=_i(l.type,v);t=u.getSnapshotBeforeUpdate(Zt,C),u.__reactInternalSnapshotBeforeUpdate=t}catch(se){Yt(l,l.return,se)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,l=t.nodeType,l===9)V0(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":V0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}}function Ar(t,e,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Mi(t,l),u&4&&Cr(5,l);break;case 1:if(Mi(t,l),u&4)if(t=l.stateNode,e===null)try{t.componentDidMount()}catch(Y){Yt(l,l.return,Y)}else{var v=_i(l.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(v,e,t.__reactInternalSnapshotBeforeUpdate)}catch(Y){Yt(l,l.return,Y)}}u&64&&bs(l),u&512&&Oi(l,l.return);break;case 3:if(Mi(t,l),u&64&&(t=l.updateQueue,t!==null)){if(e=null,l.child!==null)switch(l.child.tag){case 27:case 5:e=l.child.stateNode;break;case 1:e=l.child.stateNode}try{Zh(t,e)}catch(Y){Yt(l,l.return,Y)}}break;case 27:e===null&&u&4&&Uo(l);case 26:case 5:Mi(t,l),e===null&&u&4&&Lf(l),u&512&&Oi(l,l.return);break;case 12:Mi(t,l);break;case 31:Mi(t,l),u&4&&Bo(t,l);break;case 13:Mi(t,l),u&4&&_r(t,l),u&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=qn.bind(null,l),p2(t,l))));break;case 22:if(u=l.memoizedState!==null||Ta,!u){e=e!==null&&e.memoizedState!==null||Be,v=Ta;var C=Be;Ta=u,(Be=e)&&!C?Aa(t,l,(l.subtreeFlags&8772)!==0):Mi(t,l),Ta=v,Be=C}break;case 30:break;default:Mi(t,l)}}function zo(t){var e=t.alternate;e!==null&&(t.alternate=null,zo(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&cn(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ge=null,ee=!1;function Te(t,e,l){for(l=l.child;l!==null;)Cn(t,e,l),l=l.sibling}function Cn(t,e,l){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(ae,l)}catch{}switch(l.tag){case 26:Be||fa(l,e),Te(t,e,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Be||fa(l,e);var u=Ge,v=ee;Rs(l.type)&&(Ge=l.stateNode,ee=!1),Te(t,e,l),Qf(l.stateNode),Ge=u,ee=v;break;case 5:Be||fa(l,e);case 6:if(u=Ge,v=ee,Ge=null,Te(t,e,l),Ge=u,ee=v,Ge!==null)if(ee)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(l.stateNode)}catch(C){Yt(l,e,C)}else try{Ge.removeChild(l.stateNode)}catch(C){Yt(l,e,C)}break;case 18:Ge!==null&&(ee?(t=Ge,Yp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),hc(t)):Yp(Ge,l.stateNode));break;case 4:u=Ge,v=ee,Ge=l.stateNode.containerInfo,ee=!0,Te(t,e,l),Ge=u,ee=v;break;case 0:case 11:case 14:case 15:ja(2,l,e),Be||ja(4,l,e),Te(t,e,l);break;case 1:Be||(fa(l,e),u=l.stateNode,typeof u.componentWillUnmount=="function"&&tc(l,e,u)),Te(t,e,l);break;case 21:Te(t,e,l);break;case 22:Be=(u=Be)||l.memoizedState!==null,Te(t,e,l),Be=u;break;default:Te(t,e,l)}}function Bo(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hc(t)}catch(l){Yt(e,e.return,l)}}}function _r(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hc(t)}catch(l){Yt(e,e.return,l)}}function Rr(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new ec),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new ec),e;default:throw Error(r(435,t.tag))}}function Or(t,e){var l=Rr(t);e.forEach(function(u){if(!l.has(u)){l.add(u);var v=ze.bind(null,t,u);u.then(v,v)}})}function jn(t,e){var l=e.deletions;if(l!==null)for(var u=0;u<l.length;u++){var v=l[u],C=t,Y=e,W=Y;t:for(;W!==null;){switch(W.tag){case 27:if(Rs(W.type)){Ge=W.stateNode,ee=!1;break t}break;case 5:Ge=W.stateNode,ee=!1;break t;case 3:case 4:Ge=W.stateNode.containerInfo,ee=!0;break t}W=W.return}if(Ge===null)throw Error(r(160));Cn(C,Y,v),Ge=null,ee=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Od(e,t),e=e.sibling}var ta=null;function Od(t,e){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(e,t),Jn(t),u&4&&(ja(3,t,t.return),Cr(3,t),ja(5,t,t.return));break;case 1:jn(e,t),Jn(t),u&512&&(Be||l===null||fa(l,l.return)),u&64&&Ta&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var v=ta;if(jn(e,t),Jn(t),u&512&&(Be||l===null||fa(l,l.return)),u&4){var C=l!==null?l.memoizedState:null;if(u=t.memoizedState,l===null)if(u===null)if(t.stateNode===null){t:{u=t.type,l=t.memoizedProps,v=v.ownerDocument||v;e:switch(u){case"title":C=v.getElementsByTagName("title")[0],(!C||C[Kl]||C[Nn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(u),v.head.insertBefore(C,v.querySelector("head > title"))),ga(C,u,l),C[Nn]=t,Gn(C),u=C;break t;case"link":var Y=$p("link","href",v).get(u+(l.href||""));if(Y){for(var W=0;W<Y.length;W++)if(C=Y[W],C.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&C.getAttribute("rel")===(l.rel==null?null:l.rel)&&C.getAttribute("title")===(l.title==null?null:l.title)&&C.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){Y.splice(W,1);break e}}C=v.createElement(u),ga(C,u,l),v.head.appendChild(C);break;case"meta":if(Y=$p("meta","content",v).get(u+(l.content||""))){for(W=0;W<Y.length;W++)if(C=Y[W],C.getAttribute("content")===(l.content==null?null:""+l.content)&&C.getAttribute("name")===(l.name==null?null:l.name)&&C.getAttribute("property")===(l.property==null?null:l.property)&&C.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&C.getAttribute("charset")===(l.charSet==null?null:l.charSet)){Y.splice(W,1);break e}}C=v.createElement(u),ga(C,u,l),v.head.appendChild(C);break;default:throw Error(r(468,u))}C[Nn]=t,Gn(C),u=C}t.stateNode=u}else t1(v,t.type,t.stateNode);else t.stateNode=Wp(v,u,t.memoizedProps);else C!==u?(C===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):C.count--,u===null?t1(v,t.type,t.stateNode):Wp(v,u,t.memoizedProps)):u===null&&t.stateNode!==null&&il(t,t.memoizedProps,l.memoizedProps)}break;case 27:jn(e,t),Jn(t),u&512&&(Be||l===null||fa(l,l.return)),l!==null&&u&4&&il(t,t.memoizedProps,l.memoizedProps);break;case 5:if(jn(e,t),Jn(t),u&512&&(Be||l===null||fa(l,l.return)),t.flags&32){v=t.stateNode;try{pl(v,"")}catch(Zt){Yt(t,t.return,Zt)}}u&4&&t.stateNode!=null&&(v=t.memoizedProps,il(t,v,l!==null?l.memoizedProps:v)),u&1024&&(wl=!0);break;case 6:if(jn(e,t),Jn(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,l=t.stateNode;try{l.nodeValue=u}catch(Zt){Yt(t,t.return,Zt)}}break;case 3:if(Gd=null,v=ta,ta=zd(e.containerInfo),jn(e,t),ta=v,Jn(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{hc(e.containerInfo)}catch(Zt){Yt(t,t.return,Zt)}wl&&(wl=!1,Pf(t));break;case 4:u=ta,ta=zd(t.stateNode.containerInfo),jn(e,t),Jn(t),ta=u;break;case 12:jn(e,t),Jn(t);break;case 31:jn(e,t),Jn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Or(t,u)));break;case 13:jn(e,t),Jn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(rl=Ae()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Or(t,u)));break;case 22:v=t.memoizedState!==null;var st=l!==null&&l.memoizedState!==null,vt=Ta,Ot=Be;if(Ta=vt||v,Be=Ot||st,jn(e,t),Be=Ot,Ta=vt,Jn(t),u&8192)t:for(e=t.stateNode,e._visibility=v?e._visibility&-2:e._visibility|1,v&&(l===null||st||Ta||Be||Mr(t)),l=null,e=t;;){if(e.tag===5||e.tag===26){if(l===null){st=l=e;try{if(C=st.stateNode,v)Y=C.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{W=st.stateNode;var Dt=st.memoizedProps.style,Ct=Dt!=null&&Dt.hasOwnProperty("display")?Dt.display:null;W.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(Zt){Yt(st,st.return,Zt)}}}else if(e.tag===6){if(l===null){st=e;try{st.stateNode.nodeValue=v?"":st.memoizedProps}catch(Zt){Yt(st,st.return,Zt)}}}else if(e.tag===18){if(l===null){st=e;try{var Tt=st.stateNode;v?Vp(Tt,!0):Vp(st.stateNode,!1)}catch(Zt){Yt(st,st.return,Zt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;l===e&&(l=null),e=e.return}l===e&&(l=null),e.sibling.return=e.return,e=e.sibling}u&4&&(u=t.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Or(t,l))));break;case 19:jn(e,t),Jn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Or(t,u)));break;case 30:break;case 21:break;default:jn(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{for(var l,u=t.return;u!==null;){if(Rd(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,C=Er(t);Tr(t,C,v);break;case 5:var Y=l.stateNode;l.flags&32&&(pl(Y,""),l.flags&=-33);var W=Er(t);Tr(t,W,Y);break;case 3:case 4:var st=l.stateNode.containerInfo,vt=Er(t);Do(t,vt,st);break;default:throw Error(r(161))}}catch(Ot){Yt(t,t.return,Ot)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Pf(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Mi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Ar(t,e.alternate,e),e=e.sibling}function Mr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ja(4,e,e.return),Mr(e);break;case 1:fa(e,e.return);var l=e.stateNode;typeof l.componentWillUnmount=="function"&&tc(e,e.return,l),Mr(e);break;case 27:Qf(e.stateNode);case 26:case 5:fa(e,e.return),Mr(e);break;case 22:e.memoizedState===null&&Mr(e);break;case 30:Mr(e);break;default:Mr(e)}t=t.sibling}}function Aa(t,e,l){for(l=l&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var u=e.alternate,v=t,C=e,Y=C.flags;switch(C.tag){case 0:case 11:case 15:Aa(v,C,l),Cr(4,C);break;case 1:if(Aa(v,C,l),u=C,v=u.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(vt){Yt(u,u.return,vt)}if(u=C,v=u.updateQueue,v!==null){var W=u.stateNode;try{var st=v.shared.hiddenCallbacks;if(st!==null)for(v.shared.hiddenCallbacks=null,v=0;v<st.length;v++)df(st[v],W)}catch(vt){Yt(u,u.return,vt)}}l&&Y&64&&bs(C),Oi(C,C.return);break;case 27:Uo(C);case 26:case 5:Aa(v,C,l),l&&u===null&&Y&4&&Lf(C),Oi(C,C.return);break;case 12:Aa(v,C,l);break;case 31:Aa(v,C,l),l&&Y&4&&Bo(v,C);break;case 13:Aa(v,C,l),l&&Y&4&&_r(v,C);break;case 22:C.memoizedState===null&&Aa(v,C,l),Oi(C,C.return);break;case 30:break;default:Aa(v,C,l)}e=e.sibling}}function xr(t,e){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&cs(l))}function Hl(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cs(t))}function Za(t,e,l,u){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)La(t,e,l,u),e=e.sibling}function La(t,e,l,u){var v=e.flags;switch(e.tag){case 0:case 11:case 15:Za(t,e,l,u),v&2048&&Cr(9,e);break;case 1:Za(t,e,l,u);break;case 3:Za(t,e,l,u),v&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cs(t)));break;case 12:if(v&2048){Za(t,e,l,u),t=e.stateNode;try{var C=e.memoizedProps,Y=C.id,W=C.onPostCommit;typeof W=="function"&&W(Y,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(st){Yt(e,e.return,st)}}else Za(t,e,l,u);break;case 31:Za(t,e,l,u);break;case 13:Za(t,e,l,u);break;case 23:break;case 22:C=e.stateNode,Y=e.alternate,e.memoizedState!==null?C._visibility&2?Za(t,e,l,u):hn(t,e):C._visibility&2?Za(t,e,l,u):(C._visibility|=2,ha(t,e,l,u,(e.subtreeFlags&10256)!==0||!1)),v&2048&&xr(Y,e);break;case 24:Za(t,e,l,u),v&2048&&Hl(e.alternate,e);break;default:Za(t,e,l,u)}}function ha(t,e,l,u,v){for(v=v&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var C=t,Y=e,W=l,st=u,vt=Y.flags;switch(Y.tag){case 0:case 11:case 15:ha(C,Y,W,st,v),Cr(8,Y);break;case 23:break;case 22:var Ot=Y.stateNode;Y.memoizedState!==null?Ot._visibility&2?ha(C,Y,W,st,v):hn(C,Y):(Ot._visibility|=2,ha(C,Y,W,st,v)),v&&vt&2048&&xr(Y.alternate,Y);break;case 24:ha(C,Y,W,st,v),v&&vt&2048&&Hl(Y.alternate,Y);break;default:ha(C,Y,W,st,v)}e=e.sibling}}function hn(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var l=t,u=e,v=u.flags;switch(u.tag){case 22:hn(l,u),v&2048&&xr(u.alternate,u);break;case 24:hn(l,u),v&2048&&Hl(u.alternate,u);break;default:hn(l,u)}e=e.sibling}}var Nr=8192;function Dr(t,e,l){if(t.subtreeFlags&Nr)for(t=t.child;t!==null;)Yf(t,e,l),t=t.sibling}function Yf(t,e,l){switch(t.tag){case 26:Dr(t,e,l),t.flags&Nr&&t.memoizedState!==null&&O2(l,ta,t.memoizedState,t.memoizedProps);break;case 5:Dr(t,e,l);break;case 3:case 4:var u=ta;ta=zd(t.stateNode.containerInfo),Dr(t,e,l),ta=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Nr,Nr=16777216,Dr(t,e,l),Nr=u):Dr(t,e,l));break;default:Dr(t,e,l)}}function zn(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ur(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];$e=u,nc(u,t)}zn(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xi(t),t=t.sibling}function xi(t){switch(t.tag){case 0:case 11:case 15:Ur(t),t.flags&2048&&ja(9,t,t.return);break;case 3:Ur(t);break;case 12:Ur(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ln(t)):Ur(t);break;default:Ur(t)}}function ln(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];$e=u,nc(u,t)}zn(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ja(8,e,e.return),ln(e);break;case 22:l=e.stateNode,l._visibility&2&&(l._visibility&=-3,ln(e));break;default:ln(e)}t=t.sibling}}function nc(t,e){for(;$e!==null;){var l=$e;switch(l.tag){case 0:case 11:case 15:ja(8,l,e);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:cs(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,$e=u;else t:for(l=t;$e!==null;){u=$e;var v=u.sibling,C=u.return;if(zo(u),u===l){$e=null;break t}if(v!==null){v.return=C,$e=v;break t}$e=C}}}var Md={getCacheForType:function(t){var e=We(_n),l=e.data.get(t);return l===void 0&&(l=t(),e.data.set(t,l)),l},cacheSignal:function(){return We(_n).controller.signal}},Ln=typeof WeakMap=="function"?WeakMap:Map,le=0,ye=null,ce=null,pe=0,Pe=0,ea=null,si=!1,ll=!1,Cs=!1,Ja=0,Ze=0,jl=0,me=0,Xe=0,re=0,Se=0,xe=null,Je=null,Ni=!1,rl=0,ac=0,Fa=1/0,tn=null,da=null,en=0,Di=null,Fn=null,_a=0,zr=0,na=null,ic=null,Br=0,Gr=null;function aa(){return(le&2)!==0&&pe!==0?pe&-pe:x.T!==null?U0():ji()}function sl(){if(re===0)if((pe&536870912)===0||Ee){var t=Ys;Ys<<=1,(Ys&3932160)===0&&(Ys=262144),re=t}else re=536870912;return t=an.current,t!==null&&(t.flags|=32),re}function He(t,e,l){(t===ye&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)&&(zi(t,0),Ui(t,pe,re,!1)),hl(t,l),((le&2)===0||t!==ye)&&(t===ye&&((le&2)===0&&(me|=l),Ze===4&&Ui(t,pe,re,!1)),Pl(t))}function ol(t,e,l){if((le&6)!==0)throw Error(r(327));var u=!l&&(e&127)===0&&(e&t.expiredLanes)===0||Ir(t,e),v=u?tt(t,e):O(t,e,!0),C=u;do{if(v===0){ll&&!u&&Ui(t,e,0,!1);break}else{if(l=t.current.alternate,C&&!Es(l)){v=O(t,e,!1),C=!1;continue}if(v===2){if(C=e,t.errorRecoveryDisabledLanes&C)var Y=0;else Y=t.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){e=Y;t:{var W=t;v=xe;var st=W.current.memoizedState.isDehydrated;if(st&&(zi(W,Y).flags|=256),Y=O(W,Y,!1),Y!==2){if(Cs&&!st){W.errorRecoveryDisabledLanes|=C,me|=C,v=4;break t}C=Je,Je=v,C!==null&&(Je===null?Je=C:Je.push.apply(Je,C))}v=Y}if(C=!1,v!==2)continue}}if(v===1){zi(t,0),Ui(t,e,0,!0);break}t:{switch(u=t,C=v,C){case 0:case 1:throw Error(r(345));case 4:if((e&4194048)!==e)break;case 6:Ui(u,e,re,!si);break t;case 2:Je=null;break;case 3:case 5:break;default:throw Error(r(329))}if((e&62914560)===e&&(v=rl+300-Ae(),10<v)){if(Ui(u,e,re,!si),Il(u,0,!0)!==0)break t;_a=e,u.timeoutHandle=qp(wr.bind(null,u,l,Je,tn,Ni,e,re,me,Se,si,C,"Throttled",-0,0),v);break t}wr(u,l,Je,tn,Ni,e,re,me,Se,si,C,null,-0,0)}}break}while(!0);Pl(t)}function wr(t,e,l,u,v,C,Y,W,st,vt,Ot,Dt,Ct,Tt){if(t.timeoutHandle=-1,Dt=e.subtreeFlags,Dt&8192||(Dt&16785408)===16785408){Dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},Yf(e,C,Dt);var Zt=(C&62914560)===C?rl-Ae():(C&4194048)===C?ac-Ae():0;if(Zt=M2(Dt,Zt),Zt!==null){_a=C,t.cancelPendingCommit=Zt(de.bind(null,t,e,C,l,u,v,Y,W,st,Ot,Dt,null,Ct,Tt)),Ui(t,C,Y,!vt);return}}de(t,e,C,l,u,v,Y,W,st)}function Es(t){for(var e=t;;){var l=e.tag;if((l===0||l===11||l===15)&&e.flags&16384&&(l=e.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var v=l[u],C=v.getSnapshot;v=v.value;try{if(!Yn(C(),v))return!1}catch{return!1}}if(l=e.child,e.subtreeFlags&16384&&l!==null)l.return=e,e=l;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e,l,u){e&=~Xe,e&=~me,t.suspendedLanes|=e,t.pingedLanes&=~e,u&&(t.warmLanes|=e),u=t.expirationTimes;for(var v=e;0<v;){var C=31-ie(v),Y=1<<C;u[C]=-1,v&=~Y}l!==0&&Ql(t,l,e)}function Ts(){return(le&6)===0?(Vf(0),!1):!0}function lc(){if(ce!==null){if(Pe===0)var t=ce.return;else t=ce,ai=Re=null,vf(t),Ol=null,yo=0,t=ce;for(;t!==null;)No(t.alternate,t),t=t.return;ce=null}}function zi(t,e){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,c2(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),_a=0,lc(),ye=t,ce=l=$a(t.current,null),pe=e,Pe=0,ea=null,si=!1,ll=Ir(t,e),Cs=!1,Se=re=Xe=me=jl=Ze=0,Je=xe=null,Ni=!1,(e&8)!==0&&(e|=e&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=e;0<u;){var v=31-ie(u),C=1<<v;e|=t[v],u&=~C}return Ja=e,uo(),l}function rc(t,e){he=null,x.H=ms,e===ur||e===Du?(e=zu(),Pe=3):e===mo?(e=zu(),Pe=4):Pe=e===Bf?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ea=e,ce===null&&(Ze=1,Ju(t,Da(e,t.current)))}function a(){var t=an.current;return t===null?!0:(pe&4194048)===pe?Qa===null:(pe&62914560)===pe||(pe&536870912)!==0?t===Qa:!1}function i(){var t=x.H;return x.H=ms,t===null?ms:t}function d(){var t=x.A;return x.A=Md,t}function m(){Ze=4,si||(pe&4194048)!==pe&&an.current!==null||(ll=!0),(jl&134217727)===0&&(me&134217727)===0||ye===null||Ui(ye,pe,re,!1)}function O(t,e,l){var u=le;le|=2;var v=i(),C=d();(ye!==t||pe!==e)&&(tn=null,zi(t,e)),e=!1;var Y=Ze;t:do try{if(Pe!==0&&ce!==null){var W=ce,st=ea;switch(Pe){case 8:lc(),Y=6;break t;case 3:case 2:case 9:case 6:an.current===null&&(e=!0);var vt=Pe;if(Pe=0,ea=null,Gt(t,W,st,vt),l&&ll){Y=0;break t}break;default:vt=Pe,Pe=0,ea=null,Gt(t,W,st,vt)}}j(),Y=Ze;break}catch(Ot){rc(t,Ot)}while(!0);return e&&t.shellSuspendCounter++,ai=Re=null,le=u,x.H=v,x.A=C,ce===null&&(ye=null,pe=0,uo()),Y}function j(){for(;ce!==null;)bt(ce)}function tt(t,e){var l=le;le|=2;var u=i(),v=d();ye!==t||pe!==e?(tn=null,Fa=Ae()+500,zi(t,e)):ll=Ir(t,e);t:do try{if(Pe!==0&&ce!==null){e=ce;var C=ea;e:switch(Pe){case 1:Pe=0,ea=null,Gt(t,e,C,1);break;case 2:case 9:if(Ji(C)){Pe=0,ea=null,Ut(e);break}e=function(){Pe!==2&&Pe!==9||ye!==t||(Pe=7),Pl(t)},C.then(e,e);break t;case 3:Pe=7;break t;case 4:Pe=5;break t;case 7:Ji(C)?(Pe=0,ea=null,Ut(e)):(Pe=0,ea=null,Gt(t,e,C,7));break;case 5:var Y=null;switch(ce.tag){case 26:Y=ce.memoizedState;case 5:case 27:var W=ce;if(Y?e1(Y):W.stateNode.complete){Pe=0,ea=null;var st=W.sibling;if(st!==null)ce=st;else{var vt=W.return;vt!==null?(ce=vt,It(vt)):ce=null}break e}}Pe=0,ea=null,Gt(t,e,C,5);break;case 6:Pe=0,ea=null,Gt(t,e,C,6);break;case 8:lc(),Ze=6;break t;default:throw Error(r(462))}}ot();break}catch(Ot){rc(t,Ot)}while(!0);return ai=Re=null,x.H=u,x.A=v,le=l,ce!==null?0:(ye=null,pe=0,uo(),Ze)}function ot(){for(;ce!==null&&!ue();)bt(ce)}function bt(t){var e=Gl(t.alternate,t,Ja);t.memoizedProps=t.pendingProps,e===null?It(t):ce=e}function Ut(t){var e=t,l=e.alternate;switch(e.tag){case 15:case 0:e=Ha(l,e,e.pendingProps,e.type,void 0,pe);break;case 11:e=Ha(l,e,e.pendingProps,e.type.render,e.ref,pe);break;case 5:vf(e);default:No(l,e),e=ce=Eu(e,Ja),e=Gl(l,e,Ja)}t.memoizedProps=t.pendingProps,e===null?It(t):ce=e}function Gt(t,e,l,u){ai=Re=null,vf(e),Ol=null,yo=0;var v=e.return;try{if(zf(t,v,e,l,pe)){Ze=1,Ju(t,Da(l,t.current)),ce=null;return}}catch(C){if(v!==null)throw ce=v,C;Ze=1,Ju(t,Da(l,t.current)),ce=null;return}e.flags&32768?(Ee||u===1?t=!0:ll||(pe&536870912)!==0?t=!1:(si=t=!0,(u===2||u===9||u===3||u===6)&&(u=an.current,u!==null&&u.tag===13&&(u.flags|=16384))),Qt(e,t)):It(e)}function It(t){var e=t;do{if((e.flags&32768)!==0){Qt(e,si);return}t=e.return;var l=Ss(e.alternate,e,Ja);if(l!==null){ce=l;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);Ze===0&&(Ze=5)}function Qt(t,e){do{var l=jf(t.alternate,t);if(l!==null){l.flags&=32767,ce=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!e&&(t=t.sibling,t!==null)){ce=t;return}ce=t=l}while(t!==null);Ze=6,ce=null}function de(t,e,l,u,v,C,Y,W,st){t.cancelPendingCommit=null;do ht();while(en!==0);if((le&6)!==0)throw Error(r(327));if(e!==null){if(e===t.current)throw Error(r(177));if(C=e.lanes|e.childLanes,C|=Ia,Oc(t,l,C,Y,W,st),t===ye&&(ce=ye=null,pe=0),Fn=e,Di=t,_a=l,zr=C,na=v,ic=u,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ql(ut,function(){return Et(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||u){u=x.T,x.T=null,v=P.p,P.p=2,Y=le,le|=4;try{qf(t,e,l)}finally{le=Y,P.p=v,x.T=u}}en=1,qa(),As(),Ll()}}function qa(){if(en===1){en=0;var t=Di,e=Fn,l=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||l){l=x.T,x.T=null;var u=P.p;P.p=2;var v=le;le|=4;try{Od(e,t);var C=q0,Y=ka(t.containerInfo),W=C.focusedElem,st=C.selectionRange;if(Y!==W&&W&&W.ownerDocument&&ns(W.ownerDocument.documentElement,W)){if(st!==null&&yu(W)){var vt=st.start,Ot=st.end;if(Ot===void 0&&(Ot=vt),"selectionStart"in W)W.selectionStart=vt,W.selectionEnd=Math.min(Ot,W.value.length);else{var Dt=W.ownerDocument||document,Ct=Dt&&Dt.defaultView||window;if(Ct.getSelection){var Tt=Ct.getSelection(),Zt=W.textContent.length,se=Math.min(st.start,Zt),ke=st.end===void 0?se:Math.min(st.end,Zt);!Tt.extend&&se>ke&&(Y=ke,ke=se,se=Y);var dt=Jc(W,se),ct=Jc(W,ke);if(dt&&ct&&(Tt.rangeCount!==1||Tt.anchorNode!==dt.node||Tt.anchorOffset!==dt.offset||Tt.focusNode!==ct.node||Tt.focusOffset!==ct.offset)){var mt=Dt.createRange();mt.setStart(dt.node,dt.offset),Tt.removeAllRanges(),se>ke?(Tt.addRange(mt),Tt.extend(ct.node,ct.offset)):(mt.setEnd(ct.node,ct.offset),Tt.addRange(mt))}}}}for(Dt=[],Tt=W;Tt=Tt.parentNode;)Tt.nodeType===1&&Dt.push({element:Tt,left:Tt.scrollLeft,top:Tt.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Dt.length;W++){var Nt=Dt[W];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}Ld=!!L0,q0=L0=null}finally{le=v,P.p=u,x.T=l}}t.current=e,en=2}}function As(){if(en===2){en=0;var t=Di,e=Fn,l=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||l){l=x.T,x.T=null;var u=P.p;P.p=2;var v=le;le|=4;try{Ar(t,e.alternate,e)}finally{le=v,P.p=u,x.T=l}}en=3}}function Ll(){if(en===4||en===3){en=0,we();var t=Di,e=Fn,l=_a,u=ic;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?en=5:(en=0,Fn=Di=null,St(t,t.pendingLanes));var v=t.pendingLanes;if(v===0&&(da=null),Is(l),e=e.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(ae,e,void 0,(e.current.flags&128)===128)}catch{}if(u!==null){e=x.T,v=P.p,P.p=2,x.T=null;try{for(var C=t.onRecoverableError,Y=0;Y<u.length;Y++){var W=u[Y];C(W.value,{componentStack:W.stack})}}finally{x.T=e,P.p=v}}(_a&3)!==0&&ht(),Pl(t),v=t.pendingLanes,(l&261930)!==0&&(v&42)!==0?t===Gr?Br++:(Br=0,Gr=t):Br=0,Vf(0)}}function St(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,cs(e)))}function ht(){return qa(),As(),Ll(),Et()}function Et(){if(en!==5)return!1;var t=Di,e=zr;zr=0;var l=Is(_a),u=x.T,v=P.p;try{P.p=32>l?32:l,x.T=null,l=na,na=null;var C=Di,Y=_a;if(en=0,Fn=Di=null,_a=0,(le&6)!==0)throw Error(r(331));var W=le;if(le|=4,xi(C.current),La(C,C.current,Y,l),le=W,Vf(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(ae,C)}catch{}return!0}finally{P.p=v,x.T=u,St(t,e)}}function wt(t,e,l){e=Da(l,e),e=wa(t.stateNode,e,2),t=xl(t,e,2),t!==null&&(hl(t,2),Pl(t))}function Yt(t,e,l){if(t.tag===3)wt(t,t,l);else for(;e!==null;){if(e.tag===3){wt(e,t,l);break}else if(e.tag===1){var u=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(da===null||!da.has(u))){t=Da(l,t),l=Uf(2),u=xl(e,l,2),u!==null&&(Ad(l,u,e,t),hl(u,2),Pl(u));break}}e=e.return}}function Ie(t,e,l){var u=t.pingCache;if(u===null){u=t.pingCache=new Ln;var v=new Set;u.set(e,v)}else v=u.get(e),v===void 0&&(v=new Set,u.set(e,v));v.has(l)||(Cs=!0,v.add(l),t=oe.bind(null,t,e,l),e.then(t,t))}function oe(t,e,l){var u=t.pingCache;u!==null&&u.delete(e),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,ye===t&&(pe&l)===l&&(Ze===4||Ze===3&&(pe&62914560)===pe&&300>Ae()-rl?(le&2)===0&&zi(t,0):Xe|=l,Se===pe&&(Se=0)),Pl(t)}function Ne(t,e){e===0&&(e=Rc()),t=Na(t,e),t!==null&&(hl(t,e),Pl(t))}function qn(t){var e=t.memoizedState,l=0;e!==null&&(l=e.retryLane),Ne(t,l)}function ze(t,e){var l=0;switch(t.tag){case 31:case 13:var u=t.stateNode,v=t.memoizedState;v!==null&&(l=v.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(e),Ne(t,l)}function ql(t,e){return ve(t,e)}var sc=null,oc=null,N0=!1,xd=!1,D0=!1,_s=0;function Pl(t){t!==oc&&t.next===null&&(oc===null?sc=oc=t:oc=oc.next=t),xd=!0,N0||(N0=!0,$v())}function Vf(t,e){if(!D0&&xd){D0=!0;do for(var l=!1,u=sc;u!==null;){if(t!==0){var v=u.pendingLanes;if(v===0)var C=0;else{var Y=u.suspendedLanes,W=u.pingedLanes;C=(1<<31-ie(42|t)+1)-1,C&=v&~(Y&~W),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(l=!0,xp(u,C))}else C=pe,C=Il(u,u===ye?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(C&3)===0||Ir(u,C)||(l=!0,xp(u,C));u=u.next}while(l);D0=!1}}function Wv(){Rp()}function Rp(){xd=N0=!1;var t=0;_s!==0&&u2()&&(t=_s);for(var e=Ae(),l=null,u=sc;u!==null;){var v=u.next,C=Op(u,e);C===0?(u.next=null,l===null?sc=v:l.next=v,v===null&&(oc=l)):(l=u,(t!==0||(C&3)!==0)&&(xd=!0)),u=v}en!==0&&en!==5||Vf(t),_s!==0&&(_s=0)}function Op(t,e){for(var l=t.suspendedLanes,u=t.pingedLanes,v=t.expirationTimes,C=t.pendingLanes&-62914561;0<C;){var Y=31-ie(C),W=1<<Y,st=v[Y];st===-1?((W&l)===0||(W&u)!==0)&&(v[Y]=Sh(W,e)):st<=e&&(t.expiredLanes|=W),C&=~W}if(e=ye,l=pe,l=Il(t,t===e?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,l===0||t===e&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&ne(u),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Ir(t,l)){if(e=l&-l,e===t.callbackPriority)return e;switch(u!==null&&ne(u),Is(l)){case 2:case 8:l=pn;break;case 32:l=ut;break;case 268435456:l=ft;break;default:l=ut}return u=Mp.bind(null,t),l=ve(l,u),t.callbackPriority=e,t.callbackNode=l,e}return u!==null&&u!==null&&ne(u),t.callbackPriority=2,t.callbackNode=null,2}function Mp(t,e){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(ht()&&t.callbackNode!==l)return null;var u=pe;return u=Il(t,t===ye?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(ol(t,u,e),Op(t,Ae()),t.callbackNode!=null&&t.callbackNode===l?Mp.bind(null,t):null)}function xp(t,e){if(ht())return null;ol(t,e,!0)}function $v(){f2(function(){(le&6)!==0?ve(Tn,Wv):Rp()})}function U0(){if(_s===0){var t=rr;t===0&&(t=Oa,Oa<<=1,(Oa&261888)===0&&(Oa=256)),_s=t}return _s}function Np(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Zs(""+t)}function Dp(t,e){var l=e.ownerDocument.createElement("input");return l.name=e.name,l.value=e.value,t.id&&l.setAttribute("form",t.id),e.parentNode.insertBefore(l,e),t=new FormData(t),l.parentNode.removeChild(l),t}function t2(t,e,l,u,v){if(e==="submit"&&l&&l.stateNode===v){var C=Np((v[Bn]||null).action),Y=u.submitter;Y&&(e=(e=Y[Bn]||null)?Np(e.formAction):Y.getAttribute("formAction"),e!==null&&(C=e,Y=null));var W=new lu("action","action",null,u,v);t.push({event:W,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_s!==0){var st=Y?Dp(v,Y):new FormData(v);Qu(l,{pending:!0,data:st,method:v.method,action:C},null,st)}}else typeof C=="function"&&(W.preventDefault(),st=Y?Dp(v,Y):new FormData(v),Qu(l,{pending:!0,data:st,method:v.method,action:C},C,st))},currentTarget:v}]})}}for(var z0=0;z0<gi.length;z0++){var B0=gi[z0],e2=B0.toLowerCase(),n2=B0[0].toUpperCase()+B0.slice(1);Xn(e2,"on"+n2)}Xn(bu,"onAnimationEnd"),Xn($c,"onAnimationIteration"),Xn(Yh,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(tf,"onTransitionRun"),Xn(la,"onTransitionStart"),Xn(Vh,"onTransitionCancel"),Xn(ra,"onTransitionEnd"),Dn("onMouseEnter",["mouseout","mouseover"]),Dn("onMouseLeave",["mouseout","mouseover"]),Dn("onPointerEnter",["pointerout","pointerover"]),Dn("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xf));function Up(t,e){e=(e&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],v=u.event;u=u.listeners;t:{var C=void 0;if(e)for(var Y=u.length-1;0<=Y;Y--){var W=u[Y],st=W.instance,vt=W.currentTarget;if(W=W.listener,st!==C&&v.isPropagationStopped())break t;C=W,v.currentTarget=vt;try{C(v)}catch(Ot){Wa(Ot)}v.currentTarget=null,C=st}else for(Y=0;Y<u.length;Y++){if(W=u[Y],st=W.instance,vt=W.currentTarget,W=W.listener,st!==C&&v.isPropagationStopped())break t;C=W,v.currentTarget=vt;try{C(v)}catch(Ot){Wa(Ot)}v.currentTarget=null,C=st}}}}function Oe(t,e){var l=e[Io];l===void 0&&(l=e[Io]=new Set);var u=t+"__bubble";l.has(u)||(zp(e,t,2,!1),l.add(u))}function G0(t,e,l){var u=0;e&&(u|=4),zp(l,t,u,e)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function w0(t){if(!t[Nd]){t[Nd]=!0,Ko.forEach(function(l){l!=="selectionchange"&&(a2.has(l)||G0(l,!1,t),G0(l,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nd]||(e[Nd]=!0,G0("selectionchange",!1,e))}}function zp(t,e,l,u){switch(o1(e)){case 2:var v=D2;break;case 8:v=U2;break;default:v=k0}l=v.bind(null,e,l,t),v=void 0,!nu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(v=!0),u?v!==void 0?t.addEventListener(e,l,{capture:!0,passive:v}):t.addEventListener(e,l,!0):v!==void 0?t.addEventListener(e,l,{passive:v}):t.addEventListener(e,l,!1)}function H0(t,e,l,u,v){var C=u;if((e&1)===0&&(e&2)===0&&u!==null)t:for(;;){if(u===null)return;var Y=u.tag;if(Y===3||Y===4){var W=u.stateNode.containerInfo;if(W===v)break;if(Y===4)for(Y=u.return;Y!==null;){var st=Y.tag;if((st===3||st===4)&&Y.stateNode.containerInfo===v)return;Y=Y.return}for(;W!==null;){if(Y=dl(W),Y===null)return;if(st=Y.tag,st===5||st===6||st===26||st===27){u=C=Y;continue t}W=W.parentNode}}u=u.return}Hc(function(){var vt=C,Ot=tu(l),Dt=[];t:{var Ct=ef.get(t);if(Ct!==void 0){var Tt=lu,Zt=t;switch(t){case"keypress":if(Js(l)===0)break t;case"keydown":case"keyup":Tt=Pc;break;case"focusin":Zt="focus",Tt=ou;break;case"focusout":Zt="blur",Tt=ou;break;case"beforeblur":case"afterblur":Tt=ou;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Pn;break;case bu:case $c:case Yh:Tt=yl;break;case ra:Tt=Bh;break;case"scroll":case"scrollend":Tt=Rh;break;case"wheel":Tt=wh;break;case"copy":case"cut":case"paste":Tt=Sl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Yc;break;case"toggle":case"beforetoggle":Tt=uu}var se=(e&4)!==0,ke=!se&&(t==="scroll"||t==="scrollend"),dt=se?Ct!==null?Ct+"Capture":null:Ct;se=[];for(var ct=vt,mt;ct!==null;){var Nt=ct;if(mt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||mt===null||dt===null||(Nt=kr(ct,dt),Nt!=null&&se.push(If(ct,Nt,mt))),ke)break;ct=ct.return}0<se.length&&(Ct=new Tt(Ct,Zt,null,l,Ot),Dt.push({event:Ct,listeners:se}))}}if((e&7)===0){t:{if(Ct=t==="mouseover"||t==="pointerover",Tt=t==="mouseout"||t==="pointerout",Ct&&l!==Fr&&(Zt=l.relatedTarget||l.fromElement)&&(dl(Zt)||Zt[ci]))break t;if((Tt||Ct)&&(Ct=Ot.window===Ot?Ot:(Ct=Ot.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,Tt?(Zt=l.relatedTarget||l.toElement,Tt=vt,Zt=Zt?dl(Zt):null,Zt!==null&&(ke=c(Zt),se=Zt.tag,Zt!==ke||se!==5&&se!==27&&se!==6)&&(Zt=null)):(Tt=null,Zt=vt),Tt!==Zt)){if(se=Lc,Nt="onMouseLeave",dt="onMouseEnter",ct="mouse",(t==="pointerout"||t==="pointerover")&&(se=Yc,Nt="onPointerLeave",dt="onPointerEnter",ct="pointer"),ke=Tt==null?Ct:Kr(Tt),mt=Zt==null?Ct:Kr(Zt),Ct=new se(Nt,ct+"leave",Tt,l,Ot),Ct.target=ke,Ct.relatedTarget=mt,Nt=null,dl(Ot)===vt&&(se=new se(dt,ct+"enter",Zt,l,Ot),se.target=mt,se.relatedTarget=ke,Nt=se),ke=Nt,Tt&&Zt)e:{for(se=i2,dt=Tt,ct=Zt,mt=0,Nt=dt;Nt;Nt=se(Nt))mt++;Nt=0;for(var Wt=ct;Wt;Wt=se(Wt))Nt++;for(;0<mt-Nt;)dt=se(dt),mt--;for(;0<Nt-mt;)ct=se(ct),Nt--;for(;mt--;){if(dt===ct||ct!==null&&dt===ct.alternate){se=dt;break e}dt=se(dt),ct=se(ct)}se=null}else se=null;Tt!==null&&Bp(Dt,Ct,Tt,se,!1),Zt!==null&&ke!==null&&Bp(Dt,ke,Zt,se,!0)}}t:{if(Ct=vt?Kr(vt):window,Tt=Ct.nodeName&&Ct.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&Ct.type==="file")var je=pu;else if(di(Ct))if(Qc)je=T0;else{je=fn;var Jt=so}else Tt=Ct.nodeName,!Tt||Tt.toLowerCase()!=="input"||Ct.type!=="checkbox"&&Ct.type!=="radio"?vt&&$o(vt.elementType)&&(je=pu):je=E0;if(je&&(je=je(t,vt))){gu(Dt,je,l,Ot);break t}Jt&&Jt(t,Ct,vt),t==="focusout"&&vt&&Ct.type==="number"&&vt.memoizedProps.value!=null&&Dc(Ct,"number",Ct.value)}switch(Jt=vt?Kr(vt):window,t){case"focusin":(di(Jt)||Jt.contentEditable==="true")&&($l=Jt,oo=vt,tr=null);break;case"focusout":tr=oo=$l=null;break;case"mousedown":as=!0;break;case"contextmenu":case"mouseup":case"dragend":as=!1,kc(Dt,l,Ot);break;case"selectionchange":if(Fc)break;case"keydown":case"keyup":kc(Dt,l,Ot)}var be;if(cu)t:{switch(t){case"compositionstart":var Me="onCompositionStart";break t;case"compositionend":Me="onCompositionEnd";break t;case"compositionupdate":Me="onCompositionUpdate";break t}Me=void 0}else bl?du(t,l)&&(Me="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(fu&&l.locale!=="ko"&&(bl||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&bl&&(be=jc()):(Yi=Ot,au="value"in Yi?Yi.value:Yi.textContent,bl=!0)),Jt=Dd(vt,Me),0<Jt.length&&(Me=new eo(Me,t,null,l,Ot),Dt.push({event:Me,listeners:Jt}),be?Me.data=be:(be=no(l),be!==null&&(Me.data=be)))),(be=jh?Lh(t,l):Ic(t,l))&&(Me=Dd(vt,"onBeforeInput"),0<Me.length&&(Jt=new eo("onBeforeInput","beforeinput",null,l,Ot),Dt.push({event:Jt,listeners:Me}),Jt.data=be)),t2(Dt,t,vt,l,Ot)}Up(Dt,e)})}function If(t,e,l){return{instance:t,listener:e,currentTarget:l}}function Dd(t,e){for(var l=e+"Capture",u=[];t!==null;){var v=t,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=kr(t,l),v!=null&&u.unshift(If(t,v,C)),v=kr(t,e),v!=null&&u.push(If(t,v,C))),t.tag===3)return u;t=t.return}return[]}function i2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bp(t,e,l,u,v){for(var C=e._reactName,Y=[];l!==null&&l!==u;){var W=l,st=W.alternate,vt=W.stateNode;if(W=W.tag,st!==null&&st===u)break;W!==5&&W!==26&&W!==27||vt===null||(st=vt,v?(vt=kr(l,C),vt!=null&&Y.unshift(If(l,vt,st))):v||(vt=kr(l,C),vt!=null&&Y.push(If(l,vt,st)))),l=l.return}Y.length!==0&&t.push({event:e,listeners:Y})}var l2=/\r\n?/g,r2=/\u0000|\uFFFD/g;function Gp(t){return(typeof t=="string"?t:""+t).replace(l2,`
`).replace(r2,"")}function wp(t,e){return e=Gp(e),Gp(t)===e}function Fe(t,e,l,u,v,C){switch(l){case"children":typeof u=="string"?e==="body"||e==="textarea"&&u===""||pl(t,u):(typeof u=="number"||typeof u=="bigint")&&e!=="body"&&pl(t,""+u);break;case"className":Ya(t,"class",u);break;case"tabIndex":Ya(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ya(t,l,u);break;case"style":Gc(t,u,C);break;case"data":if(e!=="object"){Ya(t,"data",u);break}case"src":case"href":if(u===""&&(e!=="a"||l!=="href")){t.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Zs(""+u),t.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(l==="formAction"?(e!=="input"&&Fe(t,e,"name",v.name,v,null),Fe(t,e,"formEncType",v.formEncType,v,null),Fe(t,e,"formMethod",v.formMethod,v,null),Fe(t,e,"formTarget",v.formTarget,v,null)):(Fe(t,e,"encType",v.encType,v,null),Fe(t,e,"method",v.method,v,null),Fe(t,e,"target",v.target,v,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Zs(""+u),t.setAttribute(l,u);break;case"onClick":u!=null&&(t.onclick=ma);break;case"onScroll":u!=null&&Oe("scroll",t);break;case"onScrollEnd":u!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}l=Zs(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""+u):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":u===!0?t.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,u):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(l,u):t.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(l):t.setAttribute(l,u);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),Jr(t,"popover",u);break;case"xlinkActuate":Va(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Va(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Va(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Va(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Va(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Va(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Va(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Va(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Va(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Jr(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_h.get(l)||l,Jr(t,l,u))}}function j0(t,e,l,u,v,C){switch(l){case"style":Gc(t,u,C);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"children":typeof u=="string"?pl(t,u):(typeof u=="number"||typeof u=="bigint")&&pl(t,""+u);break;case"onScroll":u!=null&&Oe("scroll",t);break;case"onScrollEnd":u!=null&&Oe("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zo.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),e=l.slice(2,v?l.length-7:void 0),C=t[Bn]||null,C=C!=null?C[l]:null,typeof C=="function"&&t.removeEventListener(e,C,v),typeof u=="function")){typeof C!="function"&&C!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(e,u,v);break t}l in t?t[l]=u:u===!0?t.setAttribute(l,""):Jr(t,l,u)}}}function ga(t,e,l){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var u=!1,v=!1,C;for(C in l)if(l.hasOwnProperty(C)){var Y=l[C];if(Y!=null)switch(C){case"src":u=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Fe(t,e,C,Y,l,null)}}v&&Fe(t,e,"srcSet",l.srcSet,l,null),u&&Fe(t,e,"src",l.src,l,null);return;case"input":Oe("invalid",t);var W=C=Y=v=null,st=null,vt=null;for(u in l)if(l.hasOwnProperty(u)){var Ot=l[u];if(Ot!=null)switch(u){case"name":v=Ot;break;case"type":Y=Ot;break;case"checked":st=Ot;break;case"defaultChecked":vt=Ot;break;case"value":C=Ot;break;case"defaultValue":W=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(r(137,e));break;default:Fe(t,e,u,Ot,l,null)}}Nc(t,C,W,st,vt,Y,v,!1);return;case"select":Oe("invalid",t),u=Y=C=null;for(v in l)if(l.hasOwnProperty(v)&&(W=l[v],W!=null))switch(v){case"value":C=W;break;case"defaultValue":Y=W;break;case"multiple":u=W;default:Fe(t,e,v,W,l,null)}e=C,l=Y,t.multiple=!!u,e!=null?Jl(t,!!u,e,!1):l!=null&&Jl(t,!!u,l,!0);return;case"textarea":Oe("invalid",t),C=v=u=null;for(Y in l)if(l.hasOwnProperty(Y)&&(W=l[Y],W!=null))switch(Y){case"value":u=W;break;case"defaultValue":v=W;break;case"children":C=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:Fe(t,e,Y,W,l,null)}zc(t,u,v,C);return;case"option":for(st in l)if(l.hasOwnProperty(st)&&(u=l[st],u!=null))switch(st){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Fe(t,e,st,u,l,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(u=0;u<Xf.length;u++)Oe(Xf[u],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(vt in l)if(l.hasOwnProperty(vt)&&(u=l[vt],u!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Fe(t,e,vt,u,l,null)}return;default:if($o(e)){for(Ot in l)l.hasOwnProperty(Ot)&&(u=l[Ot],u!==void 0&&j0(t,e,Ot,u,l,void 0));return}}for(W in l)l.hasOwnProperty(W)&&(u=l[W],u!=null&&Fe(t,e,W,u,l,null))}function s2(t,e,l,u){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,Y=null,W=null,st=null,vt=null,Ot=null;for(Tt in l){var Dt=l[Tt];if(l.hasOwnProperty(Tt)&&Dt!=null)switch(Tt){case"checked":break;case"value":break;case"defaultValue":st=Dt;default:u.hasOwnProperty(Tt)||Fe(t,e,Tt,null,u,Dt)}}for(var Ct in u){var Tt=u[Ct];if(Dt=l[Ct],u.hasOwnProperty(Ct)&&(Tt!=null||Dt!=null))switch(Ct){case"type":C=Tt;break;case"name":v=Tt;break;case"checked":vt=Tt;break;case"defaultChecked":Ot=Tt;break;case"value":Y=Tt;break;case"defaultValue":W=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(r(137,e));break;default:Tt!==Dt&&Fe(t,e,Ct,Tt,u,Dt)}}Ks(t,Y,W,st,vt,Ot,C,v);return;case"select":Tt=Y=W=Ct=null;for(C in l)if(st=l[C],l.hasOwnProperty(C)&&st!=null)switch(C){case"value":break;case"multiple":Tt=st;default:u.hasOwnProperty(C)||Fe(t,e,C,null,u,st)}for(v in u)if(C=u[v],st=l[v],u.hasOwnProperty(v)&&(C!=null||st!=null))switch(v){case"value":Ct=C;break;case"defaultValue":W=C;break;case"multiple":Y=C;default:C!==st&&Fe(t,e,v,C,u,st)}e=W,l=Y,u=Tt,Ct!=null?Jl(t,!!l,Ct,!1):!!u!=!!l&&(e!=null?Jl(t,!!l,e,!0):Jl(t,!!l,l?[]:"",!1));return;case"textarea":Tt=Ct=null;for(W in l)if(v=l[W],l.hasOwnProperty(W)&&v!=null&&!u.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Fe(t,e,W,null,u,v)}for(Y in u)if(v=u[Y],C=l[Y],u.hasOwnProperty(Y)&&(v!=null||C!=null))switch(Y){case"value":Ct=v;break;case"defaultValue":Tt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==C&&Fe(t,e,Y,v,u,C)}Uc(t,Ct,Tt);return;case"option":for(var Zt in l)if(Ct=l[Zt],l.hasOwnProperty(Zt)&&Ct!=null&&!u.hasOwnProperty(Zt))switch(Zt){case"selected":t.selected=!1;break;default:Fe(t,e,Zt,null,u,Ct)}for(st in u)if(Ct=u[st],Tt=l[st],u.hasOwnProperty(st)&&Ct!==Tt&&(Ct!=null||Tt!=null))switch(st){case"selected":t.selected=Ct&&typeof Ct!="function"&&typeof Ct!="symbol";break;default:Fe(t,e,st,Ct,u,Tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in l)Ct=l[se],l.hasOwnProperty(se)&&Ct!=null&&!u.hasOwnProperty(se)&&Fe(t,e,se,null,u,Ct);for(vt in u)if(Ct=u[vt],Tt=l[vt],u.hasOwnProperty(vt)&&Ct!==Tt&&(Ct!=null||Tt!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,e));break;default:Fe(t,e,vt,Ct,u,Tt)}return;default:if($o(e)){for(var ke in l)Ct=l[ke],l.hasOwnProperty(ke)&&Ct!==void 0&&!u.hasOwnProperty(ke)&&j0(t,e,ke,void 0,u,Ct);for(Ot in u)Ct=u[Ot],Tt=l[Ot],!u.hasOwnProperty(Ot)||Ct===Tt||Ct===void 0&&Tt===void 0||j0(t,e,Ot,Ct,u,Tt);return}}for(var dt in l)Ct=l[dt],l.hasOwnProperty(dt)&&Ct!=null&&!u.hasOwnProperty(dt)&&Fe(t,e,dt,null,u,Ct);for(Dt in u)Ct=u[Dt],Tt=l[Dt],!u.hasOwnProperty(Dt)||Ct===Tt||Ct==null&&Tt==null||Fe(t,e,Dt,Ct,u,Tt)}function Hp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var v=l[u],C=v.transferSize,Y=v.initiatorType,W=v.duration;if(C&&W&&Hp(Y)){for(Y=0,W=v.responseEnd,u+=1;u<l.length;u++){var st=l[u],vt=st.startTime;if(vt>W)break;var Ot=st.transferSize,Dt=st.initiatorType;Ot&&Hp(Dt)&&(st=st.responseEnd,Y+=Ot*(st<W?1:(W-vt)/(st-vt)))}if(--u,e+=8*(C+Y)/(v.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var L0=null,q0=null;function Ud(t){return t.nodeType===9?t:t.ownerDocument}function jp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lp(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function P0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y0=null;function u2(){var t=window.event;return t&&t.type==="popstate"?t===Y0?!1:(Y0=t,!0):(Y0=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,c2=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,f2=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(t){return Pp.resolve(null).then(t).catch(h2)}:qp;function h2(t){setTimeout(function(){throw t})}function Rs(t){return t==="head"}function Yp(t,e){var l=e,u=0;do{var v=l.nextSibling;if(t.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(u===0){t.removeChild(v),hc(e);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Qf(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Qf(l);for(var C=l.firstChild;C;){var Y=C.nextSibling,W=C.nodeName;C[Kl]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=Y}}else l==="body"&&Qf(t.ownerDocument.body);l=v}while(l);hc(e)}function Vp(t,e){var l=t;t=0;do{var u=l.nextSibling;if(l.nodeType===1?e?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(e?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=u}while(l)}function V0(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var l=e;switch(e=e.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":V0(l),cn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function d2(t,e,l,u){for(;t.nodeType===1;){var v=l;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Kl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(C=t.getAttribute("rel"),C==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(C!==v.rel||t.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||t.getAttribute("title")!==(v.title==null?null:v.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(C=t.getAttribute("src"),(C!==(v.src==null?null:v.src)||t.getAttribute("type")!==(v.type==null?null:v.type)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&t.getAttribute("name")===C)return t}else return t;if(t=Bi(t.nextSibling),t===null)break}return null}function g2(t,e,l){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Bi(t.nextSibling),t===null))return null;return t}function Xp(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Bi(t.nextSibling),t===null))return null;return t}function X0(t){return t.data==="$?"||t.data==="$~"}function I0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function p2(t,e){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||l.readyState!=="loading")e();else{var u=function(){e(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Q0=null;function Ip(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(e===0)return Bi(t.nextSibling);e--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||e++}t=t.nextSibling}return null}function Qp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(e===0)return t;e--}else l!=="/$"&&l!=="/&"||e++}t=t.previousSibling}return null}function Kp(t,e,l){switch(e=Ud(l),t){case"html":if(t=e.documentElement,!t)throw Error(r(452));return t;case"head":if(t=e.head,!t)throw Error(r(453));return t;case"body":if(t=e.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Qf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);cn(t)}var Gi=new Map,Zp=new Set;function zd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hr=P.d;P.d={f:m2,r:v2,D:y2,C:S2,L:b2,m:C2,X:T2,S:E2,M:A2};function m2(){var t=Hr.f(),e=Ts();return t||e}function v2(t){var e=gl(t);e!==null&&e.tag===5&&e.type==="form"?yd(e):Hr.r(t)}var uc=typeof document>"u"?null:document;function Jp(t,e,l){var u=uc;if(u&&typeof e=="string"&&e){var v=Ma(e);v='link[rel="'+t+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Zp.has(v)||(Zp.add(v),t={rel:t,crossOrigin:l,href:e},u.querySelector(v)===null&&(e=u.createElement("link"),ga(e,"link",t),Gn(e),u.head.appendChild(e)))}}function y2(t){Hr.D(t),Jp("dns-prefetch",t,null)}function S2(t,e){Hr.C(t,e),Jp("preconnect",t,e)}function b2(t,e,l){Hr.L(t,e,l);var u=uc;if(u&&t&&e){var v='link[rel="preload"][as="'+Ma(e)+'"]';e==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Ma(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Ma(l.imageSizes)+'"]')):v+='[href="'+Ma(t)+'"]';var C=v;switch(e){case"style":C=cc(t);break;case"script":C=fc(t)}Gi.has(C)||(t=R({rel:"preload",href:e==="image"&&l&&l.imageSrcSet?void 0:t,as:e},l),Gi.set(C,t),u.querySelector(v)!==null||e==="style"&&u.querySelector(Kf(C))||e==="script"&&u.querySelector(Zf(C))||(e=u.createElement("link"),ga(e,"link",t),Gn(e),u.head.appendChild(e)))}}function C2(t,e){Hr.m(t,e);var l=uc;if(l&&t){var u=e&&typeof e.as=="string"?e.as:"script",v='link[rel="modulepreload"][as="'+Ma(u)+'"][href="'+Ma(t)+'"]',C=v;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=fc(t)}if(!Gi.has(C)&&(t=R({rel:"modulepreload",href:t},e),Gi.set(C,t),l.querySelector(v)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Zf(C)))return}u=l.createElement("link"),ga(u,"link",t),Gn(u),l.head.appendChild(u)}}}function E2(t,e,l){Hr.S(t,e,l);var u=uc;if(u&&t){var v=Zl(u).hoistableStyles,C=cc(t);e=e||"default";var Y=v.get(C);if(!Y){var W={loading:0,preload:null};if(Y=u.querySelector(Kf(C)))W.loading=5;else{t=R({rel:"stylesheet",href:t,"data-precedence":e},l),(l=Gi.get(C))&&K0(t,l);var st=Y=u.createElement("link");Gn(st),ga(st,"link",t),st._p=new Promise(function(vt,Ot){st.onload=vt,st.onerror=Ot}),st.addEventListener("load",function(){W.loading|=1}),st.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Bd(Y,e,u)}Y={type:"stylesheet",instance:Y,count:1,state:W},v.set(C,Y)}}}function T2(t,e){Hr.X(t,e);var l=uc;if(l&&t){var u=Zl(l).hoistableScripts,v=fc(t),C=u.get(v);C||(C=l.querySelector(Zf(v)),C||(t=R({src:t,async:!0},e),(e=Gi.get(v))&&Z0(t,e),C=l.createElement("script"),Gn(C),ga(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function A2(t,e){Hr.M(t,e);var l=uc;if(l&&t){var u=Zl(l).hoistableScripts,v=fc(t),C=u.get(v);C||(C=l.querySelector(Zf(v)),C||(t=R({src:t,async:!0,type:"module"},e),(e=Gi.get(v))&&Z0(t,e),C=l.createElement("script"),Gn(C),ga(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function Fp(t,e,l,u){var v=(v=$.current)?zd(v):null;if(!v)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(e=cc(l.href),l=Zl(v).hoistableStyles,u=l.get(e),u||(u={type:"style",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=cc(l.href);var C=Zl(v).hoistableStyles,Y=C.get(t);if(Y||(v=v.ownerDocument||v,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(t,Y),(C=v.querySelector(Kf(t)))&&!C._p&&(Y.instance=C,Y.state.loading=5),Gi.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gi.set(t,l),C||_2(v,t,l,Y.state))),e&&u===null)throw Error(r(528,""));return Y}if(e&&u!==null)throw Error(r(529,""));return null;case"script":return e=l.async,l=l.src,typeof l=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=fc(l),l=Zl(v).hoistableScripts,u=l.get(e),u||(u={type:"script",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function cc(t){return'href="'+Ma(t)+'"'}function Kf(t){return'link[rel="stylesheet"]['+t+"]"}function kp(t){return R({},t,{"data-precedence":t.precedence,precedence:null})}function _2(t,e,l,u){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?u.loading=1:(e=t.createElement("link"),u.preload=e,e.addEventListener("load",function(){return u.loading|=1}),e.addEventListener("error",function(){return u.loading|=2}),ga(e,"link",l),Gn(e),t.head.appendChild(e))}function fc(t){return'[src="'+Ma(t)+'"]'}function Zf(t){return"script[async]"+t}function Wp(t,e,l){if(e.count++,e.instance===null)switch(e.type){case"style":var u=t.querySelector('style[data-href~="'+Ma(l.href)+'"]');if(u)return e.instance=u,Gn(u),u;var v=R({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Gn(u),ga(u,"style",v),Bd(u,l.precedence,t),e.instance=u;case"stylesheet":v=cc(l.href);var C=t.querySelector(Kf(v));if(C)return e.state.loading|=4,e.instance=C,Gn(C),C;u=kp(l),(v=Gi.get(v))&&K0(u,v),C=(t.ownerDocument||t).createElement("link"),Gn(C);var Y=C;return Y._p=new Promise(function(W,st){Y.onload=W,Y.onerror=st}),ga(C,"link",u),e.state.loading|=4,Bd(C,l.precedence,t),e.instance=C;case"script":return C=fc(l.src),(v=t.querySelector(Zf(C)))?(e.instance=v,Gn(v),v):(u=l,(v=Gi.get(C))&&(u=R({},l),Z0(u,v)),t=t.ownerDocument||t,v=t.createElement("script"),Gn(v),ga(v,"link",u),t.head.appendChild(v),e.instance=v);case"void":return null;default:throw Error(r(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(u=e.instance,e.state.loading|=4,Bd(u,l.precedence,t));return e.instance}function Bd(t,e,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=u.length?u[u.length-1]:null,C=v,Y=0;Y<u.length;Y++){var W=u[Y];if(W.dataset.precedence===e)C=W;else if(C!==v)break}C?C.parentNode.insertBefore(t,C.nextSibling):(e=l.nodeType===9?l.head:l,e.insertBefore(t,e.firstChild))}function K0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Z0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Gd=null;function $p(t,e,l){if(Gd===null){var u=new Map,v=Gd=new Map;v.set(l,u)}else v=Gd,u=v.get(l),u||(u=new Map,v.set(l,u));if(u.has(t))return u;for(u.set(t,null),l=l.getElementsByTagName(t),v=0;v<l.length;v++){var C=l[v];if(!(C[Kl]||C[Nn]||t==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=C.getAttribute(e)||"";Y=t+Y;var W=u.get(Y);W?W.push(C):u.set(Y,[C])}}return u}function t1(t,e,l){t=t.ownerDocument||t,t.head.insertBefore(l,e==="title"?t.querySelector("head > title"):null)}function R2(t,e,l){if(l===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function e1(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function O2(t,e,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=cc(u.href),C=e.querySelector(Kf(v));if(C){e=C._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=wd.bind(t),e.then(t,t)),l.state.loading|=4,l.instance=C,Gn(C);return}C=e.ownerDocument||e,u=kp(u),(v=Gi.get(v))&&K0(u,v),C=C.createElement("link"),Gn(C);var Y=C;Y._p=new Promise(function(W,st){Y.onload=W,Y.onerror=st}),ga(C,"link",u),l.instance=C}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,e),(e=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=wd.bind(t),e.addEventListener("load",l),e.addEventListener("error",l))}}var J0=0;function M2(t,e){return t.stylesheets&&t.count===0&&jd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var u=setTimeout(function(){if(t.stylesheets&&jd(t,t.stylesheets),t.unsuspend){var C=t.unsuspend;t.unsuspend=null,C()}},6e4+e);0<t.imgBytes&&J0===0&&(J0=62500*o2());var v=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&jd(t,t.stylesheets),t.unsuspend)){var C=t.unsuspend;t.unsuspend=null,C()}},(t.imgBytes>J0?50:800)+e);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(v)}}:null}function wd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hd=null;function jd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hd=new Map,e.forEach(x2,t),Hd=null,wd.call(t))}function x2(t,e){if(!(e.state.loading&4)){var l=Hd.get(t);if(l)var u=l.get(null);else{l=new Map,Hd.set(t,l);for(var v=t.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var Y=v[C];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(l.set(Y.dataset.precedence,Y),u=Y)}u&&l.set(null,u)}v=e.instance,Y=v.getAttribute("data-precedence"),C=l.get(Y)||u,C===u&&l.set(null,v),l.set(Y,v),this.count++,u=wd.bind(this),v.addEventListener("load",u),v.addEventListener("error",u),C?C.parentNode.insertBefore(v,C.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(v,t.firstChild)),e.state.loading|=4}}var Jf={$$typeof:z,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function N2(t,e,l,u,v,C,Y,W,st){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=u,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function n1(t,e,l,u,v,C,Y,W,st,vt,Ot,Dt){return t=new N2(t,e,l,Y,st,vt,Ot,Dt,W),e=1,C===!0&&(e|=24),C=$n(3,null,null,e),t.current=C,C.stateNode=t,e=Mu(),e.refCount++,t.pooledCache=e,e.refCount++,C.memoizedState={element:u,isDehydrated:l,cache:e},hr(C),t}function a1(t){return t?(t=pi,t):pi}function i1(t,e,l,u,v,C){v=a1(v),u.context===null?u.context=v:u.pendingContext=v,u=Ml(e),u.payload={element:l},C=C===void 0?null:C,C!==null&&(u.callback=C),l=xl(t,u,e),l!==null&&(He(l,t,e),Co(l,t,e))}function l1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<e?l:e}}function F0(t,e){l1(t,e),(t=t.alternate)&&l1(t,e)}function r1(t){if(t.tag===13||t.tag===31){var e=Na(t,67108864);e!==null&&He(e,t,67108864),F0(t,67108864)}}function s1(t){if(t.tag===13||t.tag===31){var e=aa();e=Xs(e);var l=Na(t,e);l!==null&&He(l,t,e),F0(t,e)}}var Ld=!0;function D2(t,e,l,u){var v=x.T;x.T=null;var C=P.p;try{P.p=2,k0(t,e,l,u)}finally{P.p=C,x.T=v}}function U2(t,e,l,u){var v=x.T;x.T=null;var C=P.p;try{P.p=8,k0(t,e,l,u)}finally{P.p=C,x.T=v}}function k0(t,e,l,u){if(Ld){var v=W0(u);if(v===null)H0(t,e,u,qd,l),u1(t,u);else if(B2(v,t,e,l,u))u.stopPropagation();else if(u1(t,u),e&4&&-1<z2.indexOf(t)){for(;v!==null;){var C=gl(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var Y=fl(C.pendingLanes);if(Y!==0){var W=C;for(W.pendingLanes|=2,W.entangledLanes|=2;Y;){var st=1<<31-ie(Y);W.entanglements[1]|=st,Y&=~st}Pl(C),(le&6)===0&&(Fa=Ae()+500,Vf(0))}}break;case 31:case 13:W=Na(C,2),W!==null&&He(W,C,2),Ts(),F0(C,2)}if(C=W0(u),C===null&&H0(t,e,u,qd,l),C===v)break;v=C}v!==null&&u.stopPropagation()}else H0(t,e,u,null,l)}}function W0(t){return t=tu(t),$0(t)}var qd=null;function $0(t){if(qd=null,t=dl(t),t!==null){var e=c(t);if(e===null)t=null;else{var l=e.tag;if(l===13){if(t=f(e),t!==null)return t;t=null}else if(l===31){if(t=p(e),t!==null)return t;t=null}else if(l===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return qd=t,null}function o1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case Tn:return 2;case pn:return 8;case ut:case xt:return 32;case ft:return 268435456;default:return 32}default:return 32}}var tg=!1,Os=null,Ms=null,xs=null,Ff=new Map,kf=new Map,Ns=[],z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u1(t,e){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":Ff.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kf.delete(e.pointerId)}}function Wf(t,e,l,u,v,C){return t===null||t.nativeEvent!==C?(t={blockedOn:e,domEventName:l,eventSystemFlags:u,nativeEvent:C,targetContainers:[v]},e!==null&&(e=gl(e),e!==null&&r1(e)),t):(t.eventSystemFlags|=u,e=t.targetContainers,v!==null&&e.indexOf(v)===-1&&e.push(v),t)}function B2(t,e,l,u,v){switch(e){case"focusin":return Os=Wf(Os,t,e,l,u,v),!0;case"dragenter":return Ms=Wf(Ms,t,e,l,u,v),!0;case"mouseover":return xs=Wf(xs,t,e,l,u,v),!0;case"pointerover":var C=v.pointerId;return Ff.set(C,Wf(Ff.get(C)||null,t,e,l,u,v)),!0;case"gotpointercapture":return C=v.pointerId,kf.set(C,Wf(kf.get(C)||null,t,e,l,u,v)),!0}return!1}function c1(t){var e=dl(t.target);if(e!==null){var l=c(e);if(l!==null){if(e=l.tag,e===13){if(e=f(l),e!==null){t.blockedOn=e,Li(t.priority,function(){s1(l)});return}}else if(e===31){if(e=p(l),e!==null){t.blockedOn=e,Li(t.priority,function(){s1(l)});return}}else if(e===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var l=W0(t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Fr=u,l.target.dispatchEvent(u),Fr=null}else return e=gl(l),e!==null&&r1(e),t.blockedOn=l,!1;e.shift()}return!0}function f1(t,e,l){Pd(t)&&l.delete(e)}function G2(){tg=!1,Os!==null&&Pd(Os)&&(Os=null),Ms!==null&&Pd(Ms)&&(Ms=null),xs!==null&&Pd(xs)&&(xs=null),Ff.forEach(f1),kf.forEach(f1)}function Yd(t,e){t.blockedOn===e&&(t.blockedOn=null,tg||(tg=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,G2)))}var Vd=null;function h1(t){Vd!==t&&(Vd=t,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Vd===t&&(Vd=null);for(var e=0;e<t.length;e+=3){var l=t[e],u=t[e+1],v=t[e+2];if(typeof u!="function"){if($0(u||l)===null)continue;break}var C=gl(l);C!==null&&(t.splice(e,3),e-=3,Qu(C,{pending:!0,data:v,method:l.method,action:u},u,v))}}))}function hc(t){function e(st){return Yd(st,t)}Os!==null&&Yd(Os,t),Ms!==null&&Yd(Ms,t),xs!==null&&Yd(xs,t),Ff.forEach(e),kf.forEach(e);for(var l=0;l<Ns.length;l++){var u=Ns[l];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Ns.length&&(l=Ns[0],l.blockedOn===null);)c1(l),l.blockedOn===null&&Ns.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var v=l[u],C=l[u+1],Y=v[Bn]||null;if(typeof C=="function")Y||h1(l);else if(Y){var W=null;if(C&&C.hasAttribute("formAction")){if(v=C,Y=C[Bn]||null)W=Y.formAction;else if($0(v)!==null)continue}else W=Y.action;typeof W=="function"?l[u+1]=W:(l.splice(u,3),u-=3),h1(l)}}}function d1(){function t(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(Y){return v=Y})},focusReset:"manual",scroll:"manual"})}function e(){v!==null&&(v(),v=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,v=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),v!==null&&(v(),v=null)}}}function eg(t){this._internalRoot=t}Xd.prototype.render=eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(r(409));var l=e.current,u=aa();i1(l,u,t,e,null,null)},Xd.prototype.unmount=eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;i1(t.current,2,null,t,null,null),Ts(),e[ci]=null}};function Xd(t){this._internalRoot=t}Xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=ji();t={blockedOn:null,target:t,priority:e};for(var l=0;l<Ns.length&&e!==0&&e<Ns[l].priority;l++);Ns.splice(l,0,t),l===0&&c1(t)}};var g1=n.version;if(g1!=="19.2.0")throw Error(r(527,g1,"19.2.0"));P.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=b(e),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var w2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{ae=Id.inject(w2),Lt=Id}catch{}}return th.createRoot=function(t,e){if(!o(t))throw Error(r(299));var l=!1,u="",v=Mo,C=xo,Y=Zu;return e!=null&&(e.unstable_strictMode===!0&&(l=!0),e.identifierPrefix!==void 0&&(u=e.identifierPrefix),e.onUncaughtError!==void 0&&(v=e.onUncaughtError),e.onCaughtError!==void 0&&(C=e.onCaughtError),e.onRecoverableError!==void 0&&(Y=e.onRecoverableError)),e=n1(t,1,!1,null,null,l,u,null,v,C,Y,d1),t[ci]=e.current,w0(t),new eg(e)},th.hydrateRoot=function(t,e,l){if(!o(t))throw Error(r(299));var u=!1,v="",C=Mo,Y=xo,W=Zu,st=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(Y=l.onCaughtError),l.onRecoverableError!==void 0&&(W=l.onRecoverableError),l.formState!==void 0&&(st=l.formState)),e=n1(t,1,!0,e,l??null,u,v,st,C,Y,W,d1),e.context=a1(null),l=e.current,u=aa(),u=Xs(u),v=Ml(u),v.callback=null,xl(l,v,u),l=u,e.current.lanes=l,hl(e,l),Pl(e),t[ci]=e.current,w0(t),new Xd(e)},th.version="19.2.0",th}var A1;function K2(){if(A1)return ig.exports;A1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(n){console.error(n)}}return h(),ig.exports=Q2(),ig.exports}var Z2=K2();const J2=vh(Z2);Jm();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(){return gh=Object.assign?Object.assign.bind():function(h){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(h[r]=s[r])}return h},gh.apply(this,arguments)}var ws;(function(h){h.Pop="POP",h.Push="PUSH",h.Replace="REPLACE"})(ws||(ws={}));const _1="popstate";function F2(h){h===void 0&&(h={});function n(r,o){let{pathname:c,search:f,hash:p}=r.location;return $g("",{pathname:c,search:f,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(r,o){return typeof o=="string"?o:km(o)}return W2(n,s,null,h)}function kn(h,n){if(h===!1||h===null||typeof h>"u")throw new Error(n)}function Fm(h,n){if(!h){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function k2(){return Math.random().toString(36).substr(2,8)}function R1(h,n){return{usr:h.state,key:h.key,idx:n}}function $g(h,n,s,r){return s===void 0&&(s=null),gh({pathname:typeof h=="string"?h:h.pathname,search:"",hash:""},typeof n=="string"?Tc(n):n,{state:s,key:n&&n.key||r||k2()})}function km(h){let{pathname:n="/",search:s="",hash:r=""}=h;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Tc(h){let n={};if(h){let s=h.indexOf("#");s>=0&&(n.hash=h.substr(s),h=h.substr(0,s));let r=h.indexOf("?");r>=0&&(n.search=h.substr(r),h=h.substr(0,r)),h&&(n.pathname=h)}return n}function W2(h,n,s,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:c=!1}=r,f=o.history,p=ws.Pop,g=null,b=_();b==null&&(b=0,f.replaceState(gh({},f.state,{idx:b}),""));function _(){return(f.state||{idx:null}).idx}function R(){p=ws.Pop;let q=_(),H=q==null?null:q-b;b=q,g&&g({action:p,location:G.location,delta:H})}function E(q,H){p=ws.Push;let B=$g(G.location,q,H);b=_()+1;let z=R1(B,b),w=G.createHref(B);try{f.pushState(z,"",w)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(w)}c&&g&&g({action:p,location:G.location,delta:1})}function D(q,H){p=ws.Replace;let B=$g(G.location,q,H);b=_();let z=R1(B,b),w=G.createHref(B);f.replaceState(z,"",w),c&&g&&g({action:p,location:G.location,delta:0})}function S(q){let H=o.location.origin!=="null"?o.location.origin:o.location.href,B=typeof q=="string"?q:km(q);return B=B.replace(/ $/,"%20"),kn(H,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,H)}let G={get action(){return p},get location(){return h(o,f)},listen(q){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(_1,R),g=q,()=>{o.removeEventListener(_1,R),g=null}},createHref(q){return n(o,q)},createURL:S,encodeLocation(q){let H=S(q);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:E,replace:D,go(q){return f.go(q)}};return G}var O1;(function(h){h.data="data",h.deferred="deferred",h.redirect="redirect",h.error="error"})(O1||(O1={}));function $2(h,n,s){return s===void 0&&(s="/"),ty(h,n,s)}function ty(h,n,s,r){let o=typeof n=="string"?Tc(n):n,c=tv(o.pathname||"/",s);if(c==null)return null;let f=Wm(h);ey(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let b=dy(c);p=cy(f[g],b)}return p}function Wm(h,n,s,r){n===void 0&&(n=[]),s===void 0&&(s=[]),r===void 0&&(r="");let o=(c,f,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};g.relativePath.startsWith("/")&&(kn(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let b=Ho([r,g.relativePath]),_=s.concat(g);c.children&&c.children.length>0&&(kn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),Wm(c.children,n,_,b)),!(c.path==null&&!c.index)&&n.push({path:b,score:oy(b,c.index),routesMeta:_})};return h.forEach((c,f)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,f);else for(let g of $m(c.path))o(c,f,g)}),n}function $m(h){let n=h.split("/");if(n.length===0)return[];let[s,...r]=n,o=s.endsWith("?"),c=s.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let f=$m(r.join("/")),p=[];return p.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...f),p.map(g=>h.startsWith("/")&&g===""?"/":g)}function ey(h){h.sort((n,s)=>n.score!==s.score?s.score-n.score:uy(n.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const ny=/^:[\w-]+$/,ay=3,iy=2,ly=1,ry=10,sy=-2,M1=h=>h==="*";function oy(h,n){let s=h.split("/"),r=s.length;return s.some(M1)&&(r+=sy),n&&(r+=iy),s.filter(o=>!M1(o)).reduce((o,c)=>o+(ny.test(c)?ay:c===""?ly:ry),r)}function uy(h,n){return h.length===n.length&&h.slice(0,-1).every((r,o)=>r===n[o])?h[h.length-1]-n[n.length-1]:0}function cy(h,n,s){let{routesMeta:r}=h,o={},c="/",f=[];for(let p=0;p<r.length;++p){let g=r[p],b=p===r.length-1,_=c==="/"?n:n.slice(c.length)||"/",R=fy({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},_),E=g.route;if(!R)return null;Object.assign(o,R.params),f.push({params:o,pathname:Ho([c,R.pathname]),pathnameBase:Sy(Ho([c,R.pathnameBase])),route:E}),R.pathnameBase!=="/"&&(c=Ho([c,R.pathnameBase]))}return f}function fy(h,n){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[s,r]=hy(h.path,h.caseSensitive,h.end),o=n.match(s);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((b,_,R)=>{let{paramName:E,isOptional:D}=_;if(E==="*"){let G=p[R]||"";f=c.slice(0,c.length-G.length).replace(/(.)\/+$/,"$1")}const S=p[R];return D&&!S?b[E]=void 0:b[E]=(S||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:f,pattern:h}}function hy(h,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Fm(h==="*"||!h.endsWith("*")||h.endsWith("/*"),'Route path "'+h+'" will be treated as if it were '+('"'+h.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+h.replace(/\*$/,"/*")+'".'));let r=[],o="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(r.push({paramName:"*"}),o+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":h!==""&&h!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),r]}function dy(h){try{return h.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Fm(!1,'The URL path "'+h+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),h}}function tv(h,n){if(n==="/")return h;if(!h.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,r=h.charAt(s);return r&&r!=="/"?null:h.slice(s)||"/"}function gy(h,n){n===void 0&&(n="/");let{pathname:s,search:r="",hash:o=""}=typeof h=="string"?Tc(h):h;return{pathname:s?s.startsWith("/")?s:py(s,n):n,search:by(r),hash:Cy(o)}}function py(h,n){let s=n.replace(/\/+$/,"").split("/");return h.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function og(h,n,s,r){return"Cannot include a '"+h+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function my(h){return h.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function vy(h,n){let s=my(h);return n?s.map((r,o)=>o===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function yy(h,n,s,r){r===void 0&&(r=!1);let o;typeof h=="string"?o=Tc(h):(o=gh({},h),kn(!o.pathname||!o.pathname.includes("?"),og("?","pathname","search",o)),kn(!o.pathname||!o.pathname.includes("#"),og("#","pathname","hash",o)),kn(!o.search||!o.search.includes("#"),og("#","search","hash",o)));let c=h===""||o.pathname==="",f=c?"/":o.pathname,p;if(f==null)p=s;else{let R=n.length-1;if(!r&&f.startsWith("..")){let E=f.split("/");for(;E[0]==="..";)E.shift(),R-=1;o.pathname=E.join("/")}p=R>=0?n[R]:"/"}let g=gy(o,p),b=f&&f!=="/"&&f.endsWith("/"),_=(c||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(b||_)&&(g.pathname+="/"),g}const Ho=h=>h.join("/").replace(/\/\/+/g,"/"),Sy=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),by=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,Cy=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function Ey(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}const ev=["post","put","patch","delete"];new Set(ev);const Ty=["get",...ev];new Set(Ty);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(h){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(h[r]=s[r])}return h},ph.apply(this,arguments)}const dp=yt.createContext(null),Ay=yt.createContext(null),h0=yt.createContext(null),d0=yt.createContext(null),Ac=yt.createContext({outlet:null,matches:[],isDataRoute:!1}),nv=yt.createContext(null);function g0(){return yt.useContext(d0)!=null}function gp(){return g0()||kn(!1),yt.useContext(d0).location}function av(h){yt.useContext(h0).static||yt.useLayoutEffect(h)}function pp(){let{isDataRoute:h}=yt.useContext(Ac);return h?Hy():_y()}function _y(){g0()||kn(!1);let h=yt.useContext(dp),{basename:n,future:s,navigator:r}=yt.useContext(h0),{matches:o}=yt.useContext(Ac),{pathname:c}=gp(),f=JSON.stringify(vy(o,s.v7_relativeSplatPath)),p=yt.useRef(!1);return av(()=>{p.current=!0}),yt.useCallback(function(b,_){if(_===void 0&&(_={}),!p.current)return;if(typeof b=="number"){r.go(b);return}let R=yy(b,JSON.parse(f),c,_.relative==="path");h==null&&n!=="/"&&(R.pathname=R.pathname==="/"?n:Ho([n,R.pathname])),(_.replace?r.replace:r.push)(R,_.state,_)},[n,r,f,c,h])}function Ry(h,n){return Oy(h,n)}function Oy(h,n,s,r){g0()||kn(!1);let{navigator:o}=yt.useContext(h0),{matches:c}=yt.useContext(Ac),f=c[c.length-1],p=f?f.params:{};f&&f.pathname;let g=f?f.pathnameBase:"/";f&&f.route;let b=gp(),_;if(n){var R;let q=typeof n=="string"?Tc(n):n;g==="/"||(R=q.pathname)!=null&&R.startsWith(g)||kn(!1),_=q}else _=b;let E=_.pathname||"/",D=E;if(g!=="/"){let q=g.replace(/^\//,"").split("/");D="/"+E.replace(/^\//,"").split("/").slice(q.length).join("/")}let S=$2(h,{pathname:D}),G=Uy(S&&S.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:Ho([g,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:Ho([g,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),c,s,r);return n&&G?yt.createElement(d0.Provider,{value:{location:ph({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:ws.Pop}},G):G}function My(){let h=wy(),n=Ey(h)?h.status+" "+h.statusText:h instanceof Error?h.message:JSON.stringify(h),s=h instanceof Error?h.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return yt.createElement(yt.Fragment,null,yt.createElement("h2",null,"Unexpected Application Error!"),yt.createElement("h3",{style:{fontStyle:"italic"}},n),s?yt.createElement("pre",{style:o},s):null,null)}const xy=yt.createElement(My,null);class Ny extends yt.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?yt.createElement(Ac.Provider,{value:this.props.routeContext},yt.createElement(nv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dy(h){let{routeContext:n,match:s,children:r}=h,o=yt.useContext(dp);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),yt.createElement(Ac.Provider,{value:n},r)}function Uy(h,n,s,r){var o;if(n===void 0&&(n=[]),s===void 0&&(s=null),r===void 0&&(r=null),h==null){var c;if(!s)return null;if(s.errors)h=s.matches;else if((c=r)!=null&&c.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)h=s.matches;else return null}let f=h,p=(o=s)==null?void 0:o.errors;if(p!=null){let _=f.findIndex(R=>R.route.id&&(p==null?void 0:p[R.route.id])!==void 0);_>=0||kn(!1),f=f.slice(0,Math.min(f.length,_+1))}let g=!1,b=-1;if(s&&r&&r.v7_partialHydration)for(let _=0;_<f.length;_++){let R=f[_];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(b=_),R.route.id){let{loaderData:E,errors:D}=s,S=R.route.loader&&E[R.route.id]===void 0&&(!D||D[R.route.id]===void 0);if(R.route.lazy||S){g=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}return f.reduceRight((_,R,E)=>{let D,S=!1,G=null,q=null;s&&(D=p&&R.route.id?p[R.route.id]:void 0,G=R.route.errorElement||xy,g&&(b<0&&E===0?(jy("route-fallback"),S=!0,q=null):b===E&&(S=!0,q=R.route.hydrateFallbackElement||null)));let H=n.concat(f.slice(0,E+1)),B=()=>{let z;return D?z=G:S?z=q:R.route.Component?z=yt.createElement(R.route.Component,null):R.route.element?z=R.route.element:z=_,yt.createElement(Dy,{match:R,routeContext:{outlet:_,matches:H,isDataRoute:s!=null},children:z})};return s&&(R.route.ErrorBoundary||R.route.errorElement||E===0)?yt.createElement(Ny,{location:s.location,revalidation:s.revalidation,component:G,error:D,children:B(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):B()},null)}var iv=(function(h){return h.UseBlocker="useBlocker",h.UseRevalidator="useRevalidator",h.UseNavigateStable="useNavigate",h})(iv||{}),lv=(function(h){return h.UseBlocker="useBlocker",h.UseLoaderData="useLoaderData",h.UseActionData="useActionData",h.UseRouteError="useRouteError",h.UseNavigation="useNavigation",h.UseRouteLoaderData="useRouteLoaderData",h.UseMatches="useMatches",h.UseRevalidator="useRevalidator",h.UseNavigateStable="useNavigate",h.UseRouteId="useRouteId",h})(lv||{});function zy(h){let n=yt.useContext(dp);return n||kn(!1),n}function By(h){let n=yt.useContext(Ay);return n||kn(!1),n}function Gy(h){let n=yt.useContext(Ac);return n||kn(!1),n}function rv(h){let n=Gy(),s=n.matches[n.matches.length-1];return s.route.id||kn(!1),s.route.id}function wy(){var h;let n=yt.useContext(nv),s=By(),r=rv();return n!==void 0?n:(h=s.errors)==null?void 0:h[r]}function Hy(){let{router:h}=zy(iv.UseNavigateStable),n=rv(lv.UseNavigateStable),s=yt.useRef(!1);return av(()=>{s.current=!0}),yt.useCallback(function(o,c){c===void 0&&(c={}),s.current&&(typeof o=="number"?h.navigate(o):h.navigate(o,ph({fromRouteId:n},c)))},[h,n])}const x1={};function jy(h,n,s){x1[h]||(x1[h]=!0)}function Ly(h,n){h==null||h.v7_startTransition,h==null||h.v7_relativeSplatPath}function r0(h){kn(!1)}function qy(h){let{basename:n="/",children:s=null,location:r,navigationType:o=ws.Pop,navigator:c,static:f=!1,future:p}=h;g0()&&kn(!1);let g=n.replace(/^\/*/,"/"),b=yt.useMemo(()=>({basename:g,navigator:c,static:f,future:ph({v7_relativeSplatPath:!1},p)}),[g,p,c,f]);typeof r=="string"&&(r=Tc(r));let{pathname:_="/",search:R="",hash:E="",state:D=null,key:S="default"}=r,G=yt.useMemo(()=>{let q=tv(_,g);return q==null?null:{location:{pathname:q,search:R,hash:E,state:D,key:S},navigationType:o}},[g,_,R,E,D,S,o]);return G==null?null:yt.createElement(h0.Provider,{value:b},yt.createElement(d0.Provider,{children:s,value:G}))}function Py(h){let{children:n,location:s}=h;return Ry(tp(n),s)}new Promise(()=>{});function tp(h,n){n===void 0&&(n=[]);let s=[];return yt.Children.forEach(h,(r,o)=>{if(!yt.isValidElement(r))return;let c=[...n,o];if(r.type===yt.Fragment){s.push.apply(s,tp(r.props.children,c));return}r.type!==r0&&kn(!1),!r.props.index||!r.props.children||kn(!1);let f={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(f.children=tp(r.props.children,c)),s.push(f)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ep(h){return h===void 0&&(h=""),new URLSearchParams(typeof h=="string"||Array.isArray(h)||h instanceof URLSearchParams?h:Object.keys(h).reduce((n,s)=>{let r=h[s];return n.concat(Array.isArray(r)?r.map(o=>[s,o]):[[s,r]])},[]))}function Yy(h,n){let s=ep(h);return n&&n.forEach((r,o)=>{s.has(o)||n.getAll(o).forEach(c=>{s.append(o,c)})}),s}const Vy="6";try{window.__reactRouterVersion=Vy}catch{}const Xy="startTransition",N1=Y2[Xy];function Iy(h){let{basename:n,children:s,future:r,window:o}=h,c=yt.useRef();c.current==null&&(c.current=F2({window:o,v5Compat:!0}));let f=c.current,[p,g]=yt.useState({action:f.action,location:f.location}),{v7_startTransition:b}=r||{},_=yt.useCallback(R=>{b&&N1?N1(()=>g(R)):g(R)},[g,b]);return yt.useLayoutEffect(()=>f.listen(_),[f,_]),yt.useEffect(()=>Ly(r),[r]),yt.createElement(qy,{basename:n,children:s,location:p.location,navigationType:p.action,navigator:f,future:r})}var D1;(function(h){h.UseScrollRestoration="useScrollRestoration",h.UseSubmit="useSubmit",h.UseSubmitFetcher="useSubmitFetcher",h.UseFetcher="useFetcher",h.useViewTransitionState="useViewTransitionState"})(D1||(D1={}));var U1;(function(h){h.UseFetcher="useFetcher",h.UseFetchers="useFetchers",h.UseScrollRestoration="useScrollRestoration"})(U1||(U1={}));function sv(h){let n=yt.useRef(ep(h)),s=yt.useRef(!1),r=gp(),o=yt.useMemo(()=>Yy(r.search,s.current?null:n.current),[r.search]),c=pp(),f=yt.useCallback((p,g)=>{const b=ep(typeof p=="function"?p(o):p);s.current=!0,c("?"+b,g)},[c,o]);return[o,f]}function Qy(){const h=pp(),[n,s]=yt.useState(!1),[r,o]=yt.useState(""),[c,f]=yt.useState("demo"),p=g=>{g.preventDefault(),r.trim()&&c.trim()&&h(`/student?room=${c}&name=${encodeURIComponent(r.trim())}`)};return n?et.jsxs("div",{className:"landing-page",children:[et.jsxs("div",{className:"background-decorations",children:[et.jsx("div",{className:"bg-blob bg-blob-1"}),et.jsx("div",{className:"bg-blob bg-blob-2"}),et.jsx("div",{className:"bg-gradient-overlay"})]}),et.jsx("main",{className:"landing-main",children:et.jsx("div",{className:"glass-surface landing-container",style:{maxWidth:"500px"},children:et.jsxs("div",{className:"landing-content",children:[et.jsx("span",{className:"glass-pill landing-badge",children:et.jsx("span",{children:"FEATHER"})}),et.jsxs("div",{className:"landing-header",children:[et.jsx("h1",{className:"landing-title",style:{fontSize:"2rem"},children:"Join as Student"}),et.jsx("p",{className:"landing-description",children:"Enter your name and room code to start drawing"})]}),et.jsxs("form",{onSubmit:p,style:{width:"100%",marginTop:"2rem"},children:[et.jsxs("div",{style:{marginBottom:"1.5rem"},children:[et.jsx("label",{htmlFor:"studentName",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Your Name"}),et.jsx("input",{id:"studentName",type:"text",value:r,onChange:g=>o(g.target.value),placeholder:"Enter your name",autoFocus:!0,required:!0,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"8px",outline:"none",transition:"border-color 0.2s"},onFocus:g=>g.target.style.borderColor="#667eea",onBlur:g=>g.target.style.borderColor="#ddd"})]}),et.jsxs("div",{style:{marginBottom:"1.5rem"},children:[et.jsx("label",{htmlFor:"roomCode",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Room Code"}),et.jsx("input",{id:"roomCode",type:"text",value:c,onChange:g=>f(g.target.value.toUpperCase()),placeholder:"Enter room code",required:!0,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"8px",outline:"none",transition:"border-color 0.2s",fontFamily:"monospace",letterSpacing:"2px"},onFocus:g=>g.target.style.borderColor="#667eea",onBlur:g=>g.target.style.borderColor="#ddd"})]}),et.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[et.jsx("button",{type:"button",onClick:()=>s(!1),style:{flex:1,padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",border:"2px solid #ddd",borderRadius:"8px",background:"white",cursor:"pointer",transition:"all 0.2s"},children:"← Back"}),et.jsx("button",{type:"submit",style:{flex:2,padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",cursor:"pointer",transition:"transform 0.2s"},onMouseOver:g=>g.target.style.transform="translateY(-2px)",onMouseOut:g=>g.target.style.transform="translateY(0)",children:"Join Room →"})]})]})]})})})]}):et.jsxs("div",{className:"landing-page",children:[et.jsxs("div",{className:"background-decorations",children:[et.jsx("div",{className:"bg-blob bg-blob-1"}),et.jsx("div",{className:"bg-blob bg-blob-2"}),et.jsx("div",{className:"bg-gradient-overlay"})]}),et.jsx("main",{className:"landing-main",children:et.jsxs("div",{className:"glass-surface landing-container",children:[et.jsxs("div",{className:"landing-content",children:[et.jsx("span",{className:"glass-pill landing-badge",children:et.jsx("span",{children:"FEATHER"})}),et.jsxs("div",{className:"landing-header",children:[et.jsx("h1",{className:"landing-title",children:"Teach visually. Collaborate instantly."}),et.jsx("p",{className:"landing-description",children:"Feather streams pencil-perfect strokes between teachers and students in real time. Instant sync, buttery smooth annotation tools, and delightful classroom-ready controls built for iPad and stylus workflows."})]}),et.jsxs("dl",{className:"features",children:[et.jsxs("div",{className:"feature-card",children:[et.jsx("dt",{className:"feature-title",children:"Palm rejection"}),et.jsx("dd",{className:"feature-subtitle",children:"Silky palm drawing"})]}),et.jsxs("div",{className:"feature-card",children:[et.jsx("dt",{className:"feature-title",children:"Frameless logos"}),et.jsx("dd",{className:"feature-subtitle",children:"Delightful annotations"})]}),et.jsxs("div",{className:"feature-card",children:[et.jsx("dt",{className:"feature-title",children:"Realtime sync"}),et.jsx("dd",{className:"feature-subtitle",children:"Sub-second latency"})]})]})]}),et.jsxs("div",{className:"workspace-section",children:[et.jsx("p",{className:"workspace-label",children:"PICK YOUR WORKSPACE"}),et.jsxs("div",{className:"workspace-cards",children:[et.jsxs("a",{onClick:()=>h("/teacher?room=demo"),className:"glass-button teacher-card",children:[et.jsxs("div",{children:[et.jsx("p",{className:"workspace-title",children:"Teacher dashboard"}),et.jsx("p",{className:"workspace-description",children:"Monitor your students, sync views, and annotate the board. Assign templates/images, and manage the class."})]}),et.jsx("span",{className:"workspace-emoji",children:"👩‍🏫"})]}),et.jsxs("a",{onClick:()=>s(!0),className:"glass-button student-card",children:[et.jsxs("div",{children:[et.jsx("p",{className:"workspace-title",children:"Student workspace"}),et.jsx("p",{className:"workspace-description",children:"Sketch on a public or draw alongside the class, with undo/redo, templates, and stylus-first controls."})]}),et.jsx("span",{className:"workspace-emoji",children:"👩‍🎓"})]})]})]})]})})]})}const Ky=Math.PI/180;function Zy(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const wo=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:wo,version:"10.0.7",isBrowser:Zy(),isUnminified:/param/.test((function(h){}).toString()),dblClickWindow:400,getAngle(h){return Vt.angleDeg?h*Ky:h},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var h,n;return(n=(h=Vt.Transformer)===null||h===void 0?void 0:h.isTransforming())!==null&&n!==void 0?n:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:wo.document,_injectGlobal(h){typeof wo.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),wo.Konva=h}},En=h=>{Vt[h.prototype.getClassName()]=h};Vt._injectGlobal(Vt);const Jy=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,z1=()=>{if(typeof document>"u")throw new Error(Jy)};class oi{constructor(n=[1,0,0,1,0,0]){this.dirty=!1,this.m=n&&n.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new oi(this.m)}copyInto(n){n.m[0]=this.m[0],n.m[1]=this.m[1],n.m[2]=this.m[2],n.m[3]=this.m[3],n.m[4]=this.m[4],n.m[5]=this.m[5]}point(n){const s=this.m;return{x:s[0]*n.x+s[2]*n.y+s[4],y:s[1]*n.x+s[3]*n.y+s[5]}}translate(n,s){return this.m[4]+=this.m[0]*n+this.m[2]*s,this.m[5]+=this.m[1]*n+this.m[3]*s,this}scale(n,s){return this.m[0]*=n,this.m[1]*=n,this.m[2]*=s,this.m[3]*=s,this}rotate(n){const s=Math.cos(n),r=Math.sin(n),o=this.m[0]*s+this.m[2]*r,c=this.m[1]*s+this.m[3]*r,f=this.m[0]*-r+this.m[2]*s,p=this.m[1]*-r+this.m[3]*s;return this.m[0]=o,this.m[1]=c,this.m[2]=f,this.m[3]=p,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(n,s){const r=this.m[0]+this.m[2]*s,o=this.m[1]+this.m[3]*s,c=this.m[2]+this.m[0]*n,f=this.m[3]+this.m[1]*n;return this.m[0]=r,this.m[1]=o,this.m[2]=c,this.m[3]=f,this}multiply(n){const s=this.m[0]*n.m[0]+this.m[2]*n.m[1],r=this.m[1]*n.m[0]+this.m[3]*n.m[1],o=this.m[0]*n.m[2]+this.m[2]*n.m[3],c=this.m[1]*n.m[2]+this.m[3]*n.m[3],f=this.m[0]*n.m[4]+this.m[2]*n.m[5]+this.m[4],p=this.m[1]*n.m[4]+this.m[3]*n.m[5]+this.m[5];return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=c,this.m[4]=f,this.m[5]=p,this}invert(){const n=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),s=this.m[3]*n,r=-this.m[1]*n,o=-this.m[2]*n,c=this.m[0]*n,f=n*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),p=n*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=c,this.m[4]=f,this.m[5]=p,this}getMatrix(){return this.m}decompose(){const n=this.m[0],s=this.m[1],r=this.m[2],o=this.m[3],c=this.m[4],f=this.m[5],p=n*o-s*r,g={x:c,y:f,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(n!=0||s!=0){const b=Math.sqrt(n*n+s*s);g.rotation=s>0?Math.acos(n/b):-Math.acos(n/b),g.scaleX=b,g.scaleY=p/b,g.skewX=(n*r+s*o)/p,g.skewY=0}else if(r!=0||o!=0){const b=Math.sqrt(r*r+o*o);g.rotation=Math.PI/2-(o>0?Math.acos(-r/b):-Math.acos(r/b)),g.scaleX=p/b,g.scaleY=b,g.skewX=0,g.skewY=(n*r+s*o)/p}return g.rotation=pt._getRotation(g.rotation),g}}const Fy="[object Array]",ky="[object Number]",Wy="[object String]",$y="[object Boolean]",t4=Math.PI/180,e4=180/Math.PI,ug="#",n4="",a4="0",i4="Konva warning: ",B1="Konva error: ",l4="rgb(",cg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},r4=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Qd=[];const s4=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(h){setTimeout(h,60)},pt={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===Fy},_isNumber(h){return Object.prototype.toString.call(h)===ky&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===Wy},_isBoolean(h){return Object.prototype.toString.call(h)===$y},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;const n=h[0];return n==="#"||n==="."||n===n.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){Qd.push(h),Qd.length===1&&s4(function(){const n=Qd;Qd=[],n.forEach(function(s){s()})})},createCanvasElement(){z1();const h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return z1(),document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,n){const s=pt.createImageElement();s.onload=function(){n(s)},s.src=h},_rgbToHex(h,n,s){return((1<<24)+(h<<16)+(n<<8)+s).toString(16).slice(1)},_hexToRgb(h){h=h.replace(ug,n4);const n=parseInt(h,16);return{r:n>>16&255,g:n>>8&255,b:n&255}},getRandomColor(){let h=(Math.random()*16777215<<0).toString(16);for(;h.length<6;)h=a4+h;return ug+h},getRGB(h){let n;return h in cg?(n=cg[h],{r:n[0],g:n[1],b:n[2]}):h[0]===ug?this._hexToRgb(h.substring(1)):h.substr(0,4)===l4?(n=r4.exec(h.replace(/ /g,"")),{r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",pt._namedColorToRBA(h)||pt._hex3ColorToRGBA(h)||pt._hex4ColorToRGBA(h)||pt._hex6ColorToRGBA(h)||pt._hex8ColorToRGBA(h)||pt._rgbColorToRGBA(h)||pt._rgbaColorToRGBA(h)||pt._hslColorToRGBA(h)},_namedColorToRBA(h){const n=cg[h.toLowerCase()];return n?{r:n[0],g:n[1],b:n[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];const n=h.split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];const n=h.split(/ *, */).map((s,r)=>s.slice(-1)==="%"?r===3?parseInt(s)/100:parseInt(s)/100*255:Number(s));return{r:n[0],g:n[1],b:n[2],a:n[3]}}},_hex8ColorToRGBA(h){if(h[0]==="#"&&h.length===9)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:parseInt(h.slice(7,9),16)/255}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex4ColorToRGBA(h){if(h[0]==="#"&&h.length===5)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:parseInt(h[4]+h[4],16)/255}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[n,...s]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),r=Number(s[0])/360,o=Number(s[1])/100,c=Number(s[2])/100;let f,p,g;if(o===0)return g=c*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};c<.5?f=c*(1+o):f=c+o-c*o;const b=2*c-f,_=[0,0,0];for(let R=0;R<3;R++)p=r+1/3*-(R-1),p<0&&p++,p>1&&p--,6*p<1?g=b+(f-b)*6*p:2*p<1?g=f:3*p<2?g=b+(f-b)*(2/3-p)*6:g=b,_[R]=g*255;return{r:Math.round(_[0]),g:Math.round(_[1]),b:Math.round(_[2]),a:1}}},haveIntersection(h,n){return!(n.x>h.x+h.width||n.x+n.width<h.x||n.y>h.y+h.height||n.y+n.height<h.y)},cloneObject(h){const n={};for(const s in h)this._isPlainObject(h[s])?n[s]=this.cloneObject(h[s]):this._isArray(h[s])?n[s]=this.cloneArray(h[s]):n[s]=h[s];return n},cloneArray(h){return h.slice(0)},degToRad(h){return h*t4},radToDeg(h){return h*e4},_degToRad(h){return pt.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),pt.degToRad(h)},_radToDeg(h){return pt.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),pt.radToDeg(h)},_getRotation(h){return Vt.angleDeg?pt.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(B1+h)},error(h){console.error(B1+h)},warn(h){Vt.showWarnings&&console.warn(i4+h)},each(h,n){for(const s in h)n(s,h[s])},_inRange(h,n,s){return n<=h&&h<s},_getProjectionToSegment(h,n,s,r,o,c){let f,p,g;const b=(h-s)*(h-s)+(n-r)*(n-r);if(b==0)f=h,p=n,g=(o-s)*(o-s)+(c-r)*(c-r);else{const _=((o-h)*(s-h)+(c-n)*(r-n))/b;_<0?(f=h,p=n,g=(h-o)*(h-o)+(n-c)*(n-c)):_>1?(f=s,p=r,g=(s-o)*(s-o)+(r-c)*(r-c)):(f=h+_*(s-h),p=n+_*(r-n),g=(f-o)*(f-o)+(p-c)*(p-c))}return[f,p,g]},_getProjectionToLine(h,n,s){const r=pt.cloneObject(h);let o=Number.MAX_VALUE;return n.forEach(function(c,f){if(!s&&f===n.length-1)return;const p=n[(f+1)%n.length],g=pt._getProjectionToSegment(c.x,c.y,p.x,p.y,h.x,h.y),b=g[0],_=g[1],R=g[2];R<o&&(r.x=b,r.y=_,o=R)}),r},_prepareArrayForTween(h,n,s){const r=[],o=[];if(h.length>n.length){const f=n;n=h,h=f}for(let f=0;f<h.length;f+=2)r.push({x:h[f],y:h[f+1]});for(let f=0;f<n.length;f+=2)o.push({x:n[f],y:n[f+1]});const c=[];return o.forEach(function(f){const p=pt._getProjectionToLine(f,r,s);c.push(p.x),c.push(p.y)}),c},_prepareToStringify(h){let n;h.visitedByCircularReferenceRemoval=!0;for(const s in h)if(h.hasOwnProperty(s)&&h[s]&&typeof h[s]=="object"){if(n=Object.getOwnPropertyDescriptor(h,s),h[s].visitedByCircularReferenceRemoval||pt._isElement(h[s]))if(n.configurable)delete h[s];else return null;else if(pt._prepareToStringify(h[s])===null)if(n.configurable)delete h[s];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,n){for(const s in n)h[s]=n[s];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999},releaseCanvas(...h){Vt.releaseCanvasOnDestroy&&h.forEach(n=>{n.width=0,n.height=0})},drawRoundedRectPath(h,n,s,r){let o=n<0?n:0,c=s<0?s:0;n=Math.abs(n),s=Math.abs(s);let f=0,p=0,g=0,b=0;typeof r=="number"?f=p=g=b=Math.min(r,n/2,s/2):(f=Math.min(r[0]||0,n/2,s/2),p=Math.min(r[1]||0,n/2,s/2),b=Math.min(r[2]||0,n/2,s/2),g=Math.min(r[3]||0,n/2,s/2)),h.moveTo(o+f,c),h.lineTo(o+n-p,c),h.arc(o+n-p,c+p,p,Math.PI*3/2,0,!1),h.lineTo(o+n,c+s-b),h.arc(o+n-b,c+s-b,b,0,Math.PI/2,!1),h.lineTo(o+g,c+s),h.arc(o+g,c+s-g,g,Math.PI/2,Math.PI,!1),h.lineTo(o,c+f),h.arc(o+f,c+f,f,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(h,n,s,r,o){r=Math.abs(r);for(let c=0;c<s;c++){const f=n[(c-1+s)%s],p=n[c],g=n[(c+1)%s],b={x:p.x-f.x,y:p.y-f.y},_={x:g.x-p.x,y:g.y-p.y},R=Math.hypot(b.x,b.y),E=Math.hypot(_.x,_.y);let D;typeof o=="number"?D=o:D=c<o.length?o[c]:0,D=r*Math.cos(Math.PI/s)*Math.min(1,D/r*2);const G={x:b.x/R,y:b.y/R},q={x:_.x/E,y:_.y/E},H={x:p.x-G.x*D,y:p.y-G.y*D},B={x:p.x+q.x*D,y:p.y+q.y*D};c===0?h.moveTo(H.x,H.y):h.lineTo(H.x,H.y),h.arcTo(p.x,p.y,B.x,B.y,D)}}};function o4(h){const n=[],s=h.length,r=pt;for(let o=0;o<s;o++){let c=h[o];r._isNumber(c)?c=Math.round(c*1e3)/1e3:r._isString(c)||(c=c+""),n.push(c)}return n}const G1=",",u4="(",c4=")",f4="([",h4="])",d4=";",g4="()",p4="=",w1=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m4=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],v4=100;let Kd=null;function H1(){if(Kd!==null)return Kd;try{const n=pt.createCanvasElement().getContext("2d");return n?!!n&&"filter"in n:(Kd=!1,!1)}catch{return Kd=!1,!1}}class p0{constructor(n){this.canvas=n,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(n){n.fillEnabled()&&this._fill(n)}_fill(n){}strokeShape(n){n.hasStroke()&&this._stroke(n)}_stroke(n){}fillStrokeShape(n){n.attrs.fillAfterStrokeEnabled?(this.strokeShape(n),this.fillShape(n)):(this.fillShape(n),this.strokeShape(n))}getTrace(n,s){let r=this.traceArr,o=r.length,c="",f,p,g,b;for(f=0;f<o;f++)p=r[f],g=p.method,g?(b=p.args,c+=g,n?c+=g4:pt._isArray(b[0])?c+=f4+b.join(G1)+h4:(s&&(b=b.map(_=>typeof _=="number"?Math.floor(_):_)),c+=u4+b.join(G1)+c4)):(c+=p.property,n||(c+=p4+p.val)),c+=d4;return c}clearTrace(){this.traceArr=[]}_trace(n){let s=this.traceArr,r;s.push(n),r=s.length,r>=v4&&s.shift()}reset(){const n=this.getCanvas().getPixelRatio();this.setTransform(1*n,0,0,1*n,0,0)}getCanvas(){return this.canvas}clear(n){const s=this.getCanvas();n?this.clearRect(n.x||0,n.y||0,n.width||0,n.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(n){const s=n.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(n){const s=n.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(n){const s=n.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}_applyMiterLimit(n){const s=n.attrs.miterLimit;s!=null&&this.setAttr("miterLimit",s)}setAttr(n,s){this._context[n]=s}arc(n,s,r,o,c,f){this._context.arc(n,s,r,o,c,f)}arcTo(n,s,r,o,c){this._context.arcTo(n,s,r,o,c)}beginPath(){this._context.beginPath()}bezierCurveTo(n,s,r,o,c,f){this._context.bezierCurveTo(n,s,r,o,c,f)}clearRect(n,s,r,o){this._context.clearRect(n,s,r,o)}clip(...n){this._context.clip.apply(this._context,n)}closePath(){this._context.closePath()}createImageData(n,s){const r=arguments;if(r.length===2)return this._context.createImageData(n,s);if(r.length===1)return this._context.createImageData(n)}createLinearGradient(n,s,r,o){return this._context.createLinearGradient(n,s,r,o)}createPattern(n,s){return this._context.createPattern(n,s)}createRadialGradient(n,s,r,o,c,f){return this._context.createRadialGradient(n,s,r,o,c,f)}drawImage(n,s,r,o,c,f,p,g,b){const _=arguments,R=this._context;_.length===3?R.drawImage(n,s,r):_.length===5?R.drawImage(n,s,r,o,c):_.length===9&&R.drawImage(n,s,r,o,c,f,p,g,b)}ellipse(n,s,r,o,c,f,p,g){this._context.ellipse(n,s,r,o,c,f,p,g)}isPointInPath(n,s,r,o){return r?this._context.isPointInPath(r,n,s,o):this._context.isPointInPath(n,s,o)}fill(...n){this._context.fill.apply(this._context,n)}fillRect(n,s,r,o){this._context.fillRect(n,s,r,o)}strokeRect(n,s,r,o){this._context.strokeRect(n,s,r,o)}fillText(n,s,r,o){o?this._context.fillText(n,s,r,o):this._context.fillText(n,s,r)}measureText(n){return this._context.measureText(n)}getImageData(n,s,r,o){return this._context.getImageData(n,s,r,o)}lineTo(n,s){this._context.lineTo(n,s)}moveTo(n,s){this._context.moveTo(n,s)}rect(n,s,r,o){this._context.rect(n,s,r,o)}roundRect(n,s,r,o,c){this._context.roundRect(n,s,r,o,c)}putImageData(n,s,r){this._context.putImageData(n,s,r)}quadraticCurveTo(n,s,r,o){this._context.quadraticCurveTo(n,s,r,o)}restore(){this._context.restore()}rotate(n){this._context.rotate(n)}save(){this._context.save()}scale(n,s){this._context.scale(n,s)}setLineDash(n){this._context.setLineDash?this._context.setLineDash(n):"mozDash"in this._context?this._context.mozDash=n:"webkitLineDash"in this._context&&(this._context.webkitLineDash=n)}getLineDash(){return this._context.getLineDash()}setTransform(n,s,r,o,c,f){this._context.setTransform(n,s,r,o,c,f)}stroke(n){n?this._context.stroke(n):this._context.stroke()}strokeText(n,s,r,o){this._context.strokeText(n,s,r,o)}transform(n,s,r,o,c,f){this._context.transform(n,s,r,o,c,f)}translate(n,s){this._context.translate(n,s)}_enableTrace(){let n=this,s=w1.length,r=this.setAttr,o,c;const f=function(p){let g=n[p],b;n[p]=function(){return c=o4(Array.prototype.slice.call(arguments,0)),b=g.apply(n,arguments),n._trace({method:p,args:c}),b}};for(o=0;o<s;o++)f(w1[o]);n.setAttr=function(){r.apply(n,arguments);const p=arguments[0];let g=arguments[1];(p==="shadowOffsetX"||p==="shadowOffsetY"||p==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),n._trace({property:p,val:g})}}_applyGlobalCompositeOperation(n){const s=n.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}}m4.forEach(function(h){Object.defineProperty(p0.prototype,h,{get(){return this._context[h]},set(n){this._context[h]=n}})});class y4 extends p0{constructor(n,{willReadFrequently:s=!1}={}){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(n){const s=n.fill();this.setAttr("fillStyle",s),n._fillFunc(this)}_fillPattern(n){this.setAttr("fillStyle",n._getFillPattern()),n._fillFunc(this)}_fillLinearGradient(n){const s=n._getLinearGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fillRadialGradient(n){const s=n._getRadialGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fill(n){const s=n.fill(),r=n.getFillPriority();if(s&&r==="color"){this._fillColor(n);return}const o=n.getFillPatternImage();if(o&&r==="pattern"){this._fillPattern(n);return}const c=n.getFillLinearGradientColorStops();if(c&&r==="linear-gradient"){this._fillLinearGradient(n);return}const f=n.getFillRadialGradientColorStops();if(f&&r==="radial-gradient"){this._fillRadialGradient(n);return}s?this._fillColor(n):o?this._fillPattern(n):c?this._fillLinearGradient(n):f&&this._fillRadialGradient(n)}_strokeLinearGradient(n){const s=n.getStrokeLinearGradientStartPoint(),r=n.getStrokeLinearGradientEndPoint(),o=n.getStrokeLinearGradientColorStops(),c=this.createLinearGradient(s.x,s.y,r.x,r.y);if(o){for(let f=0;f<o.length;f+=2)c.addColorStop(o[f],o[f+1]);this.setAttr("strokeStyle",c)}}_stroke(n){const s=n.dash(),r=n.getStrokeScaleEnabled();if(n.hasStroke()){if(!r){this.save();const c=this.getCanvas().getPixelRatio();this.setTransform(c,0,0,c,0,0)}this._applyLineCap(n),s&&n.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",n.dashOffset())),this.setAttr("lineWidth",n.strokeWidth()),n.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),n.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(n):this.setAttr("strokeStyle",n.stroke()),n._strokeFunc(this),r||this.restore()}}_applyShadow(n){var s,r,o;const c=(s=n.getShadowRGBA())!==null&&s!==void 0?s:"black",f=(r=n.getShadowBlur())!==null&&r!==void 0?r:5,p=(o=n.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},g=n.getAbsoluteScale(),b=this.canvas.getPixelRatio(),_=g.x*b,R=g.y*b;this.setAttr("shadowColor",c),this.setAttr("shadowBlur",f*Math.min(Math.abs(_),Math.abs(R))),this.setAttr("shadowOffsetX",p.x*_),this.setAttr("shadowOffsetY",p.y*R)}}class S4 extends p0{constructor(n){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:!0})}_fill(n){this.save(),this.setAttr("fillStyle",n.colorKey),n._fillFuncHit(this),this.restore()}strokeShape(n){n.hasHitStroke()&&this._stroke(n)}_stroke(n){if(n.hasHitStroke()){const s=n.getStrokeScaleEnabled();if(!s){this.save();const c=this.getCanvas().getPixelRatio();this.setTransform(c,0,0,c,0,0)}this._applyLineCap(n);const r=n.hitStrokeWidth(),o=r==="auto"?n.strokeWidth():r;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",n.colorKey),n._strokeFuncHit(this),s||this.restore()}}}let Zd;function b4(){if(Zd)return Zd;const h=pt.createCanvasElement(),n=h.getContext("2d");return Zd=(function(){const s=Vt._global.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;return s/r})(),pt.releaseCanvas(h),Zd}class mp{constructor(n){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(n||{}).pixelRatio||Vt.pixelRatio||b4();this.pixelRatio=r,this._canvas=pt.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(n){const s=this.pixelRatio;this.pixelRatio=n,this.setSize(this.getWidth()/s,this.getHeight()/s)}setWidth(n){this.width=this._canvas.width=n*this.pixelRatio,this._canvas.style.width=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}setHeight(n){this.height=this._canvas.height=n*this.pixelRatio,this._canvas.style.height=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}getWidth(){return this.width}getHeight(){return this.height}setSize(n,s){this.setWidth(n||0),this.setHeight(s||0)}toDataURL(n,s){try{return this._canvas.toDataURL(n,s)}catch{try{return this._canvas.toDataURL()}catch(o){return pt.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Gs extends mp{constructor(n={width:0,height:0,willReadFrequently:!1}){super(n),this.context=new y4(this,{willReadFrequently:n.willReadFrequently}),this.setSize(n.width,n.height)}}function j1(){const h=pt.createCanvasElement();h.width=1,h.height=1;const n=h.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,1,1),n.fillStyle="rgba(255,0,255,1)",n.fillRect(0,0,1,1);const s=n.getImageData(0,0,1,1).data;return!(s[0]===255&&s[1]===0&&s[2]===255&&s[3]===255)}function L1(){var h,n;return typeof navigator>"u"?!1:(n=(h=navigator.brave)===null||h===void 0?void 0:h.isBrave())!==null&&n!==void 0?n:!1}let q1=!1;function C4(){return L1()&&j1()&&!q1&&(q1=!0,pt.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),L1()&&j1()}class vp extends mp{constructor(n={width:0,height:0}){super(n),this.hitCanvas=!0,this.context=new S4(this),this.setSize(n.width,n.height),C4()}}const Ye={get isDragging(){let h=!1;return Ye._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(h=!0)}),h},justDragged:!1,get node(){let h;return Ye._dragElements.forEach(n=>{h=n.node}),h},_dragElements:new Map,_drag(h){const n=[];Ye._dragElements.forEach((s,r)=>{const{node:o}=s,c=o.getStage();c.setPointersPositions(h),s.pointerId===void 0&&(s.pointerId=pt._getFirstPointerId(h));const f=c._changedPointerPositions.find(p=>p.id===s.pointerId);if(f){if(s.dragStatus!=="dragging"){const p=o.dragDistance();if(Math.max(Math.abs(f.x-s.startPointerPos.x),Math.abs(f.y-s.startPointerPos.y))<p||(o.startDrag({evt:h}),!o.isDragging()))return}o._setDragPosition(h,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:h},!0)})},_endDragBefore(h){const n=[];Ye._dragElements.forEach(s=>{const{node:r}=s,o=r.getStage();if(h&&o.setPointersPositions(h),!o._changedPointerPositions.find(p=>p.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(Ye.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,s.dragStatus="stopped");const f=s.node.getLayer()||s.node instanceof Vt.Stage&&s.node;f&&n.indexOf(f)===-1&&n.push(f)}),n.forEach(s=>{s.draw()})},_endDragAfter(h){Ye._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:h},!0),n.dragStatus!=="dragging"&&Ye._dragElements.delete(s)})}};Vt.isBrowser&&(window.addEventListener("mouseup",Ye._endDragBefore,!0),window.addEventListener("touchend",Ye._endDragBefore,!0),window.addEventListener("touchcancel",Ye._endDragBefore,!0),window.addEventListener("mousemove",Ye._drag),window.addEventListener("touchmove",Ye._drag),window.addEventListener("mouseup",Ye._endDragAfter,!1),window.addEventListener("touchend",Ye._endDragAfter,!1),window.addEventListener("touchcancel",Ye._endDragAfter,!1));function Hs(h){return pt._isString(h)?'"'+h+'"':Object.prototype.toString.call(h)==="[object Number]"||pt._isBoolean(h)?h:Object.prototype.toString.call(h)}function ov(h){return h>255?255:h<0?0:Math.round(h)}function Pt(){if(Vt.isUnminified)return function(h,n){return pt._isNumber(h)||pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a number.'),h}}function m0(h){if(Vt.isUnminified)return function(n,s){let r=pt._isNumber(n),o=pt._isArray(n)&&n.length==h;return!r&&!o&&pt.warn(Hs(n)+' is a not valid value for "'+s+'" attribute. The value should be a number or Array<number>('+h+")"),n}}function yp(){if(Vt.isUnminified)return function(h,n){return pt._isNumber(h)||h==="auto"||pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a number or "auto".'),h}}function jo(){if(Vt.isUnminified)return function(h,n){return pt._isString(h)||pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a string.'),h}}function uv(){if(Vt.isUnminified)return function(h,n){const s=pt._isString(h),r=Object.prototype.toString.call(h)==="[object CanvasGradient]"||h&&h.addColorStop;return s||r||pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a string or a native gradient.'),h}}function E4(){if(Vt.isUnminified)return function(h,n){const s=Int8Array?Object.getPrototypeOf(Int8Array):null;return s&&h instanceof s||(pt._isArray(h)?h.forEach(function(r){pt._isNumber(r)||pt.warn('"'+n+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a array of numbers.')),h}}function ul(){if(Vt.isUnminified)return function(h,n){return h===!0||h===!1||pt.warn(Hs(h)+' is a not valid value for "'+n+'" attribute. The value should be a boolean.'),h}}function T4(h){if(Vt.isUnminified)return function(n,s){return n==null||pt.isObject(n)||pt.warn(Hs(n)+' is a not valid value for "'+s+'" attribute. The value should be an object with properties '+h),n}}const eh="get",nh="set",rt={addGetterSetter(h,n,s,r,o){rt.addGetter(h,n,s),rt.addSetter(h,n,r,o),rt.addOverloadedGetterSetter(h,n)},addGetter(h,n,s){const r=eh+pt._capitalize(n);h.prototype[r]=h.prototype[r]||function(){const o=this.attrs[n];return o===void 0?s:o}},addSetter(h,n,s,r){const o=nh+pt._capitalize(n);h.prototype[o]||rt.overWriteSetter(h,n,s,r)},overWriteSetter(h,n,s,r){const o=nh+pt._capitalize(n);h.prototype[o]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,n)),this._setAttr(n,c),r&&r.call(this),this}},addComponentsGetterSetter(h,n,s,r,o){const c=s.length,f=pt._capitalize,p=eh+f(n),g=nh+f(n);h.prototype[p]=function(){const _={};for(let R=0;R<c;R++){const E=s[R];_[E]=this.getAttr(n+f(E))}return _};const b=T4(s);h.prototype[g]=function(_){const R=this.attrs[n];r&&(_=r.call(this,_,n)),b&&b.call(this,_,n);for(const E in _)_.hasOwnProperty(E)&&this._setAttr(n+f(E),_[E]);return _||s.forEach(E=>{this._setAttr(n+f(E),void 0)}),this._fireChangeEvent(n,R,_),o&&o.call(this),this},rt.addOverloadedGetterSetter(h,n)},addOverloadedGetterSetter(h,n){const s=pt._capitalize(n),r=nh+s,o=eh+s;h.prototype[n]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(h,n,s,r){pt.error("Adding deprecated "+n);const o=eh+pt._capitalize(n),c=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";h.prototype[o]=function(){pt.error(c);const f=this.attrs[n];return f===void 0?s:f},rt.addSetter(h,n,r,function(){pt.error(c)}),rt.addOverloadedGetterSetter(h,n)},backCompat(h,n){pt.each(n,function(s,r){const o=h.prototype[r],c=eh+pt._capitalize(s),f=nh+pt._capitalize(s);function p(){o.apply(this,arguments),pt.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}h.prototype[s]=p,h.prototype[c]=p,h.prototype[f]=p})},afterSetFilter(){this._filterUpToDate=!1}};function A4(h){const n=/(\w+)\(([^)]+)\)/g;let s;for(;(s=n.exec(h))!==null;){const[,r,o]=s;switch(r){case"blur":{const c=parseFloat(o.replace("px",""));return function(f){this.blurRadius(c*.5);const p=Vt.Filters;p&&p.Blur&&p.Blur.call(this,f)}}case"brightness":{const c=o.includes("%")?parseFloat(o)/100:parseFloat(o);return function(f){this.brightness(c);const p=Vt.Filters;p&&p.Brightness&&p.Brightness.call(this,f)}}case"contrast":{const c=parseFloat(o);return function(f){const p=100*(Math.sqrt(c)-1);this.contrast(p);const g=Vt.Filters;g&&g.Contrast&&g.Contrast.call(this,f)}}case"grayscale":return function(c){const f=Vt.Filters;f&&f.Grayscale&&f.Grayscale.call(this,c)};case"sepia":return function(c){const f=Vt.Filters;f&&f.Sepia&&f.Sepia.call(this,c)};case"invert":return function(c){const f=Vt.Filters;f&&f.Invert&&f.Invert.call(this,c)};default:pt.warn(`CSS filter "${r}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const s0="absoluteOpacity",Jd="allEventListeners",qr="absoluteTransform",P1="absoluteScale",Go="canvas",_4="Change",R4="children",O4="konva",np="listening",M4="mouseenter",x4="mouseleave",N4="pointerenter",D4="pointerleave",U4="touchenter",z4="touchleave",Y1="set",V1="Shape",o0=" ",X1="stage",zs="transform",B4="Stage",ap="visible",G4=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(o0);let w4=1;class qt{constructor(n){this._id=w4++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(n),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(n){(n===zs||n===qr)&&this._cache.get(n)?this._cache.get(n).dirty=!0:n?this._cache.delete(n):this._cache.clear()}_getCache(n,s){let r=this._cache.get(n);return(r===void 0||(n===zs||n===qr)&&r.dirty===!0)&&(r=s.call(this),this._cache.set(n,r)),r}_calculate(n,s,r){if(!this._attachedDepsListeners.get(n)){const o=s.map(c=>c+"Change.konva").join(o0);this.on(o,()=>{this._clearCache(n)}),this._attachedDepsListeners.set(n,!0)}return this._getCache(n,r)}_getCanvasCache(){return this._cache.get(Go)}_clearSelfAndDescendantCache(n){this._clearCache(n),n===qr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Go)){const{scene:n,filter:s,hit:r,buffer:o}=this._cache.get(Go);pt.releaseCanvas(n,s,r,o),this._cache.delete(Go)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(n){const s=n||{};let r={};(s.x===void 0||s.y===void 0||s.width===void 0||s.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(s.width||r.width),c=Math.ceil(s.height||r.height),f=s.pixelRatio,p=s.x===void 0?Math.floor(r.x):s.x,g=s.y===void 0?Math.floor(r.y):s.y,b=s.offset||0,_=s.drawBorder||!1,R=s.hitCanvasPixelRatio||1;if(!o||!c){pt.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const E=Math.abs(Math.round(r.x)-p)>.5?1:0,D=Math.abs(Math.round(r.y)-g)>.5?1:0;o+=b*2+E,c+=b*2+D,p-=b,g-=b;const S=new Gs({pixelRatio:f,width:o,height:c}),G=new Gs({pixelRatio:f,width:0,height:0,willReadFrequently:!0}),q=new vp({pixelRatio:R,width:o,height:c}),H=S.getContext(),B=q.getContext(),z=new Gs({width:S.width/S.pixelRatio+Math.abs(p),height:S.height/S.pixelRatio+Math.abs(g),pixelRatio:S.pixelRatio}),w=z.getContext();return q.isCache=!0,S.isCache=!0,this._cache.delete(Go),this._filterUpToDate=!1,s.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,G.getContext()._context.imageSmoothingEnabled=!1),H.save(),B.save(),w.save(),H.translate(-p,-g),B.translate(-p,-g),w.translate(-p,-g),z.x=p,z.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(s0),this._clearSelfAndDescendantCache(P1),this.drawScene(S,this,z),this.drawHit(q,this),this._isUnderCache=!1,H.restore(),B.restore(),_&&(H.save(),H.beginPath(),H.rect(0,0,o,c),H.closePath(),H.setAttr("strokeStyle","red"),H.setAttr("lineWidth",5),H.stroke(),H.restore()),this._cache.set(Go,{scene:S,filter:G,hit:q,buffer:z,x:p,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Go)}getClientRect(n){throw new Error('abstract "getClientRect" method call')}_transformedRect(n,s){const r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}];let o=1/0,c=1/0,f=-1/0,p=-1/0;const g=this.getAbsoluteTransform(s);return r.forEach(function(b){const _=g.point(b);o===void 0&&(o=f=_.x,c=p=_.y),o=Math.min(o,_.x),c=Math.min(c,_.y),f=Math.max(f,_.x),p=Math.max(p,_.y)}),{x:o,y:c,width:f-o,height:p-c}}_drawCachedSceneCanvas(n){n.save(),n._applyOpacity(this),n._applyGlobalCompositeOperation(this);const s=this._getCanvasCache();n.translate(s.x,s.y);const r=this._getCachedSceneCanvas(),o=r.pixelRatio;n.drawImage(r._canvas,0,0,r.width/o,r.height/o),n.restore()}_drawCachedHitCanvas(n){const s=this._getCanvasCache(),r=s.hit;n.save(),n.translate(s.x,s.y),n.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),n.restore()}_getCachedSceneCanvas(){let n=this.filters(),s=this._getCanvasCache(),r=s.scene,o=s.filter,c=o.getContext(),f,p,g,b;if(!n||n.length===0)return r;if(this._filterUpToDate)return o;let _=!0;for(let E=0;E<n.length;E++)if(typeof n[E]=="string"&&H1(),typeof n[E]!="string"||!H1()){_=!1;break}const R=r.pixelRatio;if(o.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio),_){const E=n.join(" ");return c.save(),c.setAttr("filter",E),c.drawImage(r._canvas,0,0,r.getWidth()/R,r.getHeight()/R),c.restore(),this._filterUpToDate=!0,o}try{for(f=n.length,c.clear(),c.drawImage(r._canvas,0,0,r.getWidth()/R,r.getHeight()/R),p=c.getImageData(0,0,o.getWidth(),o.getHeight()),g=0;g<f;g++)b=n[g],typeof b=="string"&&(b=A4(b)),b.call(this,p),c.putImageData(p,0,0)}catch(E){pt.error("Unable to apply filter. "+E.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,o}on(n,s){if(this._cache&&this._cache.delete(Jd),arguments.length===3)return this._delegate.apply(this,arguments);const r=n.split(o0);for(let o=0;o<r.length;o++){const f=r[o].split("."),p=f[0],g=f[1]||"";this.eventListeners[p]||(this.eventListeners[p]=[]),this.eventListeners[p].push({name:g,handler:s})}return this}off(n,s){let r=(n||"").split(o0),o=r.length,c,f,p,g,b,_;if(this._cache&&this._cache.delete(Jd),!n)for(f in this.eventListeners)this._off(f);for(c=0;c<o;c++)if(p=r[c],g=p.split("."),b=g[0],_=g[1],b)this.eventListeners[b]&&this._off(b,_,s);else for(f in this.eventListeners)this._off(f,_,s);return this}dispatchEvent(n){const s={target:this,type:n.type,evt:n};return this.fire(n.type,s),this}addEventListener(n,s){return this.on(n,function(r){s.call(this,r.evt)}),this}removeEventListener(n){return this.off(n),this}_delegate(n,s,r){const o=this;this.on(n,function(c){const f=c.target.findAncestors(s,!0,o);for(let p=0;p<f.length;p++)c=pt.cloneObject(c),c.currentTarget=f[p],r.call(f[p],c)})}remove(){return this.isDragging()&&this.stopDrag(),Ye._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(qr),this._clearSelfAndDescendantCache(s0),this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(X1),this._clearSelfAndDescendantCache(ap),this._clearSelfAndDescendantCache(np)}_remove(){this._clearCaches();const n=this.getParent();n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(n){const s="get"+pt._capitalize(n);return pt._isFunction(this[s])?this[s]():this.attrs[n]}getAncestors(){let n=this.getParent(),s=[];for(;n;)s.push(n),n=n.getParent();return s}getAttrs(){return this.attrs||{}}setAttrs(n){return this._batchTransformChanges(()=>{let s,r;if(!n)return this;for(s in n)s!==R4&&(r=Y1+pt._capitalize(s),pt._isFunction(this[r])?this[r](n[s]):this._setAttr(s,n[s]))}),this}isListening(){return this._getCache(np,this._isListening)}_isListening(n){if(!this.listening())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isListening(n):!0}isVisible(){return this._getCache(ap,this._isVisible)}_isVisible(n){if(!this.visible())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isVisible(n):!0}shouldDrawHit(n,s=!1){if(n)return this._isVisible(n)&&this._isListening(n);const r=this.getLayer();let o=!1;Ye._dragElements.forEach(f=>{f.dragStatus==="dragging"&&(f.node.nodeType==="Stage"||f.node.getLayer()===r)&&(o=!0)});const c=!s&&!Vt.hitOnDragEnabled&&(o||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!c}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let n=this.getDepth(),s=this,r=0,o,c,f,p;function g(_){for(o=[],c=_.length,f=0;f<c;f++)p=_[f],r++,p.nodeType!==V1&&(o=o.concat(p.getChildren().slice())),p._id===s._id&&(f=c);o.length>0&&o[0].getDepth()<=n&&g(o)}const b=this.getStage();return s.nodeType!==B4&&b&&g(b.getChildren()),r}getDepth(){let n=0,s=this.parent;for(;s;)n++,s=s.parent;return n}_batchTransformChanges(n){this._batchingTransformChange=!0,n(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(zs),this._clearSelfAndDescendantCache(qr)),this._needClearTransformCache=!1}setPosition(n){return this._batchTransformChanges(()=>{this.x(n.x),this.y(n.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const n=this.getStage();if(!n)return null;const s=n.getPointerPosition();if(!s)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(s)}getAbsolutePosition(n){let s=!1,r=this.parent;for(;r;){if(r.isCached()){s=!0;break}r=r.parent}s&&!n&&(n=!0);const o=this.getAbsoluteTransform(n).getMatrix(),c=new oi,f=this.offset();return c.m=o.slice(),c.translate(f.x,f.y),c.getTranslation()}setAbsolutePosition(n){const{x:s,y:r,...o}=this._clearTransform();this.attrs.x=s,this.attrs.y=r,this._clearCache(zs);const c=this._getAbsoluteTransform().copy();return c.invert(),c.translate(n.x,n.y),n={x:this.attrs.x+c.getTranslation().x,y:this.attrs.y+c.getTranslation().y},this._setTransform(o),this.setPosition({x:n.x,y:n.y}),this._clearCache(zs),this._clearSelfAndDescendantCache(qr),this}_setTransform(n){let s;for(s in n)this.attrs[s]=n[s]}_clearTransform(){const n={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,n}move(n){let s=n.x,r=n.y,o=this.x(),c=this.y();return s!==void 0&&(o+=s),r!==void 0&&(c+=r),this.setPosition({x:o,y:c}),this}_eachAncestorReverse(n,s){let r=[],o=this.getParent(),c,f;if(!(s&&s._id===this._id)){for(r.unshift(this);o&&(!s||o._id!==s._id);)r.unshift(o),o=o.parent;for(c=r.length,f=0;f<c;f++)n(r[f])}}rotate(n){return this.rotation(this.rotation()+n),this}moveToTop(){if(!this.parent)return pt.warn("Node has no parent. moveToTop function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return pt.warn("Node has no parent. moveUp function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.splice(n+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return pt.warn("Node has no parent. moveDown function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.splice(n-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return pt.warn("Node has no parent. moveToBottom function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(n){if(!this.parent)return pt.warn("Node has no parent. zIndex parameter is ignored."),this;(n<0||n>=this.parent.children.length)&&pt.warn("Unexpected value "+n+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const s=this.index;return this.parent.children.splice(s,1),this.parent.children.splice(n,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s0,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let n=this.opacity();const s=this.getParent();return s&&!s._isUnderCache&&(n*=s.getAbsoluteOpacity()),n}moveTo(n){return this.getParent()!==n&&(this._remove(),n.add(this)),this}toObject(){let n=this.getAttrs(),s,r,o,c,f;const p={attrs:{},className:this.getClassName()};for(s in n)r=n[s],f=pt.isObject(r)&&!pt._isPlainObject(r)&&!pt._isArray(r),!f&&(o=typeof this[s]=="function"&&this[s],delete n[s],c=o?o.call(this):null,n[s]=r,c!==r&&(p.attrs[s]=r));return pt._prepareToStringify(p)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(n,s,r){const o=[];s&&this._isMatch(n)&&o.push(this);let c=this.parent;for(;c;){if(c===r)return o;c._isMatch(n)&&o.push(c),c=c.parent}return o}isAncestorOf(n){return!1}findAncestor(n,s,r){return this.findAncestors(n,s,r)[0]}_isMatch(n){if(!n)return!1;if(typeof n=="function")return n(this);let s=n.replace(/ /g,"").split(","),r=s.length,o,c;for(o=0;o<r;o++)if(c=s[o],pt.isValidSelector(c)||(pt.warn('Selector "'+c+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),pt.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),pt.warn("Konva is awesome, right?")),c.charAt(0)==="#"){if(this.id()===c.slice(1))return!0}else if(c.charAt(0)==="."){if(this.hasName(c.slice(1)))return!0}else if(this.className===c||this.nodeType===c)return!0;return!1}getLayer(){const n=this.getParent();return n?n.getLayer():null}getStage(){return this._getCache(X1,this._getStage)}_getStage(){const n=this.getParent();return n?n.getStage():null}fire(n,s={},r){return s.target=s.target||this,r?this._fireAndBubble(n,s):this._fire(n,s),this}getAbsoluteTransform(n){return n?this._getAbsoluteTransform(n):this._getCache(qr,this._getAbsoluteTransform)}_getAbsoluteTransform(n){let s;if(n)return s=new oi,this._eachAncestorReverse(function(r){const o=r.transformsEnabled();o==="all"?s.multiply(r.getTransform()):o==="position"&&s.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},n),s;{s=this._cache.get(qr)||new oi,this.parent?this.parent.getAbsoluteTransform().copyInto(s):s.reset();const r=this.transformsEnabled();if(r==="all")s.multiply(this.getTransform());else if(r==="position"){const o=this.attrs.x||0,c=this.attrs.y||0,f=this.attrs.offsetX||0,p=this.attrs.offsetY||0;s.translate(o-f,c-p)}return s.dirty=!1,s}}getAbsoluteScale(n){let s=this;for(;s;)s._isUnderCache&&(n=s),s=s.getParent();const o=this.getAbsoluteTransform(n).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(zs,this._getTransform)}_getTransform(){var n,s;const r=this._cache.get(zs)||new oi;r.reset();const o=this.x(),c=this.y(),f=Vt.getAngle(this.rotation()),p=(n=this.attrs.scaleX)!==null&&n!==void 0?n:1,g=(s=this.attrs.scaleY)!==null&&s!==void 0?s:1,b=this.attrs.skewX||0,_=this.attrs.skewY||0,R=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(o!==0||c!==0)&&r.translate(o,c),f!==0&&r.rotate(f),(b!==0||_!==0)&&r.skew(b,_),(p!==1||g!==1)&&r.scale(p,g),(R!==0||E!==0)&&r.translate(-1*R,-1*E),r.dirty=!1,r}clone(n){let s=pt.cloneObject(this.attrs),r,o,c,f,p;for(r in n)s[r]=n[r];const g=new this.constructor(s);for(r in this.eventListeners)for(o=this.eventListeners[r],c=o.length,f=0;f<c;f++)p=o[f],p.name.indexOf(O4)<0&&(g.eventListeners[r]||(g.eventListeners[r]=[]),g.eventListeners[r].push(p));return g}_toKonvaCanvas(n){n=n||{};const s=this.getClientRect(),r=this.getStage(),o=n.x!==void 0?n.x:Math.floor(s.x),c=n.y!==void 0?n.y:Math.floor(s.y),f=n.pixelRatio||1,p=new Gs({width:n.width||Math.ceil(s.width)||(r?r.width():0),height:n.height||Math.ceil(s.height)||(r?r.height():0),pixelRatio:f}),g=p.getContext(),b=new Gs({width:p.width/p.pixelRatio+Math.abs(o),height:p.height/p.pixelRatio+Math.abs(c),pixelRatio:p.pixelRatio});return n.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(o||c)&&g.translate(-1*o,-1*c),this.drawScene(p,void 0,b),g.restore(),p}toCanvas(n){return this._toKonvaCanvas(n)._canvas}toDataURL(n){n=n||{};const s=n.mimeType||null,r=n.quality||null,o=this._toKonvaCanvas(n).toDataURL(s,r);return n.callback&&n.callback(o),o}toImage(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,pt._urlToImage(this.toDataURL(n),function(c){s(c),o==null||o(c)})}catch(o){r(o)}})}toBlob(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,this.toCanvas(n).toBlob(c=>{s(c),o==null||o(c)},n==null?void 0:n.mimeType,n==null?void 0:n.quality)}catch(o){r(o)}})}setSize(n){return this.width(n.width),this.height(n.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(n,s,r){let o=this.eventListeners[n],c,f,p;for(c=0;c<o.length;c++)if(f=o[c].name,p=o[c].handler,(f!=="konva"||s==="konva")&&(!s||f===s)&&(!r||r===p)){if(o.splice(c,1),o.length===0){delete this.eventListeners[n];break}c--}}_fireChangeEvent(n,s,r){this._fire(n+_4,{oldVal:s,newVal:r})}addName(n){if(!this.hasName(n)){const s=this.name(),r=s?s+" "+n:n;this.name(r)}return this}hasName(n){if(!n)return!1;const s=this.name();return s?(s||"").split(/\s/g).indexOf(n)!==-1:!1}removeName(n){const s=(this.name()||"").split(/\s/g),r=s.indexOf(n);return r!==-1&&(s.splice(r,1),this.name(s.join(" "))),this}setAttr(n,s){const r=this[Y1+pt._capitalize(n)];return pt._isFunction(r)?r.call(this,s):this._setAttr(n,s),this}_requestDraw(){if(Vt.autoDrawEnabled){const n=this.getLayer()||this.getStage();n==null||n.batchDraw()}}_setAttr(n,s){const r=this.attrs[n];r===s&&!pt.isObject(s)||(s==null?delete this.attrs[n]:this.attrs[n]=s,this._shouldFireChangeEvents&&this._fireChangeEvent(n,r,s),this._requestDraw())}_setComponentAttr(n,s,r){let o;r!==void 0&&(o=this.attrs[n],o||(this.attrs[n]=this.getAttr(n)),this.attrs[n][s]=r,this._fireChangeEvent(n,o,r))}_fireAndBubble(n,s,r){s&&this.nodeType===V1&&(s.target=this);const o=[M4,x4,N4,D4,U4,z4];if(!(o.indexOf(n)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(n,s);const f=o.indexOf(n)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(s&&!s.cancelBubble||!s)&&this.parent&&this.parent.isListening()&&!f&&(r&&r.parent?this._fireAndBubble.call(this.parent,n,s,r):this._fireAndBubble.call(this.parent,n,s))}}_getProtoListeners(n){var s,r,o;const c=(s=this._cache.get(Jd))!==null&&s!==void 0?s:{};let f=c==null?void 0:c[n];if(f===void 0){f=[];let p=Object.getPrototypeOf(this);for(;p;){const g=(o=(r=p.eventListeners)===null||r===void 0?void 0:r[n])!==null&&o!==void 0?o:[];f.push(...g),p=Object.getPrototypeOf(p)}c[n]=f,this._cache.set(Jd,c)}return f}_fire(n,s){s=s||{},s.currentTarget=this,s.type=n;const r=this._getProtoListeners(n);if(r)for(let c=0;c<r.length;c++)r[c].handler.call(this,s);const o=this.eventListeners[n];if(o)for(let c=0;c<o.length;c++)o[c].handler.call(this,s)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(n){const s=n?n.pointerId:void 0,r=this.getStage(),o=this.getAbsolutePosition();if(!r)return;const c=r._getPointerById(s)||r._changedPointerPositions[0]||o;Ye._dragElements.set(this._id,{node:this,startPointerPos:c,offset:{x:c.x-o.x,y:c.y-o.y},dragStatus:"ready",pointerId:s})}startDrag(n,s=!0){Ye._dragElements.has(this._id)||this._createDragElement(n);const r=Ye._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:n&&n.evt},s)}_setDragPosition(n,s){const r=this.getStage()._getPointerById(s.pointerId);if(!r)return;let o={x:r.x-s.offset.x,y:r.y-s.offset.y};const c=this.dragBoundFunc();if(c!==void 0){const f=c.call(this,o,n);f?o=f:pt.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(n){const s=Ye._dragElements.get(this._id);s&&(s.dragStatus="stopped"),Ye._endDragBefore(n),Ye._endDragAfter(n)}setDraggable(n){this._setAttr("draggable",n),this._dragChange()}isDragging(){const n=Ye._dragElements.get(this._id);return n?n.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(n){if(!(!(n.evt.button!==void 0)||Vt.dragButtons.indexOf(n.evt.button)>=0)||this.isDragging())return;let o=!1;Ye._dragElements.forEach(c=>{this.isAncestorOf(c.node)&&(o=!0)}),o||this._createDragElement(n)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const s=Ye._dragElements.get(this._id),r=s&&s.dragStatus==="dragging",o=s&&s.dragStatus==="ready";r?this.stopDrag():o&&Ye._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(n={x:0,y:0}){const s=this.getStage();if(!s)return!1;const r={x:-n.x,y:-n.y,width:s.width()+2*n.x,height:s.height()+2*n.y};return pt.haveIntersection(r,this.getClientRect())}static create(n,s){return pt._isString(n)&&(n=JSON.parse(n)),this._createNode(n,s)}static _createNode(n,s){let r=qt.prototype.getClassName.call(n),o=n.children,c,f,p;s&&(n.attrs.container=s),Vt[r]||(pt.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const g=Vt[r];if(c=new g(n.attrs),o)for(f=o.length,p=0;p<f;p++)c.add(qt._createNode(o[p]));return c}}qt.prototype.nodeType="Node";qt.prototype._attrsAffectingSize=[];qt.prototype.eventListeners={};qt.prototype.on.call(qt.prototype,G4,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(zs),this._clearSelfAndDescendantCache(qr)});qt.prototype.on.call(qt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ap)});qt.prototype.on.call(qt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(np)});qt.prototype.on.call(qt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s0)});const nn=rt.addGetterSetter;nn(qt,"zIndex");nn(qt,"absolutePosition");nn(qt,"position");nn(qt,"x",0,Pt());nn(qt,"y",0,Pt());nn(qt,"globalCompositeOperation","source-over",jo());nn(qt,"opacity",1,Pt());nn(qt,"name","",jo());nn(qt,"id","",jo());nn(qt,"rotation",0,Pt());rt.addComponentsGetterSetter(qt,"scale",["x","y"]);nn(qt,"scaleX",1,Pt());nn(qt,"scaleY",1,Pt());rt.addComponentsGetterSetter(qt,"skew",["x","y"]);nn(qt,"skewX",0,Pt());nn(qt,"skewY",0,Pt());rt.addComponentsGetterSetter(qt,"offset",["x","y"]);nn(qt,"offsetX",0,Pt());nn(qt,"offsetY",0,Pt());nn(qt,"dragDistance",void 0,Pt());nn(qt,"width",0,Pt());nn(qt,"height",0,Pt());nn(qt,"listening",!0,ul());nn(qt,"preventDefault",!0,ul());nn(qt,"filters",void 0,function(h){return this._filterUpToDate=!1,h});nn(qt,"visible",!0,ul());nn(qt,"transformsEnabled","all",jo());nn(qt,"size");nn(qt,"dragBoundFunc");nn(qt,"draggable",!1,ul());rt.backCompat(qt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ui extends qt{constructor(){super(...arguments),this.children=[]}getChildren(n){const s=this.children||[];return n?s.filter(n):s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let r=0;r<n.length;r++)this.add(n[r]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const r=[];return this._descendants(o=>{const c=o._isMatch(n);return c&&r.push(o),!!(c&&s)}),r}_descendants(n){let s=!1;const r=this.getChildren();for(const o of r){if(s=n(o),s)return!0;if(o.hasChildren()&&(s=o._descendants(n),s))return!0}return!1}toObject(){const n=qt.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=qt.prototype.clone.call(this,n);return this.getChildren().forEach(function(r){s.add(r.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(n)&&s.push(r)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(r){r._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,r){s.index=r}),this._requestDraw()}drawScene(n,s,r){const o=this.getLayer(),c=n||o&&o.getCanvas(),f=c&&c.getContext(),p=this._getCanvasCache(),g=p&&p.scene,b=c&&c.isCache;if(!this.isVisible()&&!b)return this;if(g){f.save();const _=this.getAbsoluteTransform(s).getMatrix();f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",c,s,r);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const r=this.getLayer(),o=n||r&&r.hitCanvas,c=o&&o.getContext(),f=this._getCanvasCache();if(f&&f.hit){c.save();const g=this.getAbsoluteTransform(s).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(c),c.restore()}else this._drawChildren("drawHit",o,s);return this}_drawChildren(n,s,r,o){var c;const f=s&&s.getContext(),p=this.clipWidth(),g=this.clipHeight(),b=this.clipFunc(),_=typeof p=="number"&&typeof g=="number"||b,R=r===this;if(_){f.save();const D=this.getAbsoluteTransform(r);let S=D.getMatrix();f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.beginPath();let G;if(b)G=b.call(this,f,this);else{const q=this.clipX(),H=this.clipY();f.rect(q||0,H||0,p,g)}f.clip.apply(f,G),S=D.copy().invert().getMatrix(),f.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const E=!R&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";E&&(f.save(),f._applyGlobalCompositeOperation(this)),(c=this.children)===null||c===void 0||c.forEach(function(D){D[n](s,r,o)}),E&&f.restore(),_&&f.restore()}getClientRect(n={}){var s;const r=n.skipTransform,o=n.relativeTo;let c,f,p,g,b={x:1/0,y:1/0,width:0,height:0};const _=this;(s=this.children)===null||s===void 0||s.forEach(function(D){if(!D.visible())return;const S=D.getClientRect({relativeTo:_,skipShadow:n.skipShadow,skipStroke:n.skipStroke});S.width===0&&S.height===0||(c===void 0?(c=S.x,f=S.y,p=S.x+S.width,g=S.y+S.height):(c=Math.min(c,S.x),f=Math.min(f,S.y),p=Math.max(p,S.x+S.width),g=Math.max(g,S.y+S.height)))});const R=this.find("Shape");let E=!1;for(let D=0;D<R.length;D++)if(R[D]._isVisible(this)){E=!0;break}return E&&c!==void 0?b={x:c,y:f,width:p-c,height:g-f}:b={x:0,y:0,width:0,height:0},r?b:this._transformedRect(b,o)}}rt.addComponentsGetterSetter(ui,"clip",["x","y","width","height"]);rt.addGetterSetter(ui,"clipX",void 0,Pt());rt.addGetterSetter(ui,"clipY",void 0,Pt());rt.addGetterSetter(ui,"clipWidth",void 0,Pt());rt.addGetterSetter(ui,"clipHeight",void 0,Pt());rt.addGetterSetter(ui,"clipFunc");const mh=new Map,cv=Vt._global.PointerEvent!==void 0;function fg(h){return mh.get(h)}function Sp(h){return{evt:h,pointerId:h.pointerId}}function fv(h,n){return mh.get(h)===n}function hv(h,n){ch(h),n.getStage()&&(mh.set(h,n),cv&&n._fire("gotpointercapture",Sp(new PointerEvent("gotpointercapture"))))}function ch(h,n){const s=mh.get(h);if(!s)return;const r=s.getStage();r&&r.content,mh.delete(h),cv&&s._fire("lostpointercapture",Sp(new PointerEvent("lostpointercapture")))}const H4="Stage",j4="string",I1="px",L4="mouseout",dv="mouseleave",gv="mouseover",pv="mouseenter",mv="mousemove",vv="mousedown",yv="mouseup",lh="pointermove",rh="pointerdown",Sc="pointerup",sh="pointercancel",q4="lostpointercapture",Fd="pointerout",oh="pointerleave",kd="pointerover",Wd="pointerenter",ip="contextmenu",Sv="touchstart",bv="touchend",Cv="touchmove",Ev="touchcancel",lp="wheel",P4=5,Y4=[[pv,"_pointerenter"],[vv,"_pointerdown"],[mv,"_pointermove"],[yv,"_pointerup"],[dv,"_pointerleave"],[Sv,"_pointerdown"],[Cv,"_pointermove"],[bv,"_pointerup"],[Ev,"_pointercancel"],[gv,"_pointerover"],[lp,"_wheel"],[ip,"_contextmenu"],[rh,"_pointerdown"],[lh,"_pointermove"],[Sc,"_pointerup"],[sh,"_pointercancel"],[oh,"_pointerleave"],[q4,"_lostpointercapture"]],hg={mouse:{[Fd]:L4,[oh]:dv,[kd]:gv,[Wd]:pv,[lh]:mv,[rh]:vv,[Sc]:yv,[sh]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Fd]:"touchout",[oh]:"touchleave",[kd]:"touchover",[Wd]:"touchenter",[lh]:Cv,[rh]:Sv,[Sc]:bv,[sh]:Ev,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Fd]:Fd,[oh]:oh,[kd]:kd,[Wd]:Wd,[lh]:lh,[rh]:rh,[Sc]:Sc,[sh]:sh,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},uh=h=>h.indexOf("pointer")>=0?"pointer":h.indexOf("touch")>=0?"touch":"mouse",dc=h=>{const n=uh(h);if(n==="pointer")return Vt.pointerEventsEnabled&&hg.pointer;if(n==="touch")return hg.touch;if(n==="mouse")return hg.mouse};function Q1(h={}){return(h.clipFunc||h.clipWidth||h.clipHeight)&&pt.warn("Stage does not support clipping. Please use clip for Layers or Groups."),h}const V4="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",fh=[];let v0=class extends ui{constructor(n){super(Q1(n)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),fh.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Q1(this.attrs)}),this._checkVisibility()}_validateAdd(n){const s=n.getType()==="Layer",r=n.getType()==="FastLayer";s||r||pt.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const n=this.visible()?"":"none";this.content.style.display=n}setContainer(n){if(typeof n===j4){let s;if(n.charAt(0)==="."){const r=n.slice(1);n=document.getElementsByClassName(r)[0]}else n.charAt(0)!=="#"?s=n:s=n.slice(1),n=document.getElementById(s);if(!n)throw"Can not find container in document with id "+s}return this._setAttr("container",n),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),n.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const n=this.children,s=n.length;for(let r=0;r<s;r++)n[r].clear();return this}clone(n){return n||(n={}),n.container=typeof document<"u"&&document.createElement("div"),ui.prototype.clone.call(this,n)}destroy(){super.destroy();const n=this.content;n&&pt._isInDocument(n)&&this.container().removeChild(n);const s=fh.indexOf(this);return s>-1&&fh.splice(s,1),pt.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const n=this._pointerPositions[0]||this._changedPointerPositions[0];return n?{x:n.x,y:n.y}:(pt.warn(V4),null)}_getPointerById(n){return this._pointerPositions.find(s=>s.id===n)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(n){n={...n},n.x=n.x||0,n.y=n.y||0,n.width=n.width||this.width(),n.height=n.height||this.height();const s=new Gs({width:n.width,height:n.height,pixelRatio:n.pixelRatio||1}),r=s.getContext()._context,o=this.children;return(n.x||n.y)&&r.translate(-1*n.x,-1*n.y),o.forEach(function(c){if(!c.isVisible())return;const f=c._toKonvaCanvas(n);r.drawImage(f._canvas,n.x,n.y,f.getWidth()/f.getPixelRatio(),f.getHeight()/f.getPixelRatio())}),s}getIntersection(n){if(!n)return null;const s=this.children,r=s.length,o=r-1;for(let c=o;c>=0;c--){const f=s[c].getIntersection(n);if(f)return f}return null}_resizeDOM(){const n=this.width(),s=this.height();this.content&&(this.content.style.width=n+I1,this.content.style.height=s+I1),this.bufferCanvas.setSize(n,s),this.bufferHitCanvas.setSize(n,s),this.children.forEach(r=>{r.setSize({width:n,height:s}),r.draw()})}add(n,...s){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(n);const r=this.children.length;return r>P4&&pt.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),n.setSize({width:this.width(),height:this.height()}),n.draw(),Vt.isBrowser&&this.content.appendChild(n.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(n){return fv(n,this)}setPointerCapture(n){hv(n,this)}releaseCapture(n){ch(n)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&Y4.forEach(([n,s])=>{this.content.addEventListener(n,r=>{this[s](r)},{passive:!1})})}_pointerenter(n){this.setPointersPositions(n);const s=dc(n.type);s&&this._fire(s.pointerenter,{evt:n,target:this,currentTarget:this})}_pointerover(n){this.setPointersPositions(n);const s=dc(n.type);s&&this._fire(s.pointerover,{evt:n,target:this,currentTarget:this})}_getTargetShape(n){let s=this[n+"targetShape"];return s&&!s.getStage()&&(s=null),s}_pointerleave(n){const s=dc(n.type),r=uh(n.type);if(!s)return;this.setPointersPositions(n);const o=this._getTargetShape(r),c=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;o&&c?(o._fireAndBubble(s.pointerout,{evt:n}),o._fireAndBubble(s.pointerleave,{evt:n}),this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this[r+"targetShape"]=null):c&&(this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this._fire(s.pointerout,{evt:n,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(n){const s=dc(n.type),r=uh(n.type);if(!s)return;this.setPointersPositions(n);let o=!1;this._changedPointerPositions.forEach(c=>{const f=this.getIntersection(c);if(Ye.justDragged=!1,Vt["_"+r+"ListenClick"]=!0,!f||!f.isListening()){this[r+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&f.setPointerCapture(c.id),this[r+"ClickStartShape"]=f,f._fireAndBubble(s.pointerdown,{evt:n,pointerId:c.id}),o=!0;const p=n.type.indexOf("touch")>=0;f.preventDefault()&&n.cancelable&&p&&n.preventDefault()}),o||this._fire(s.pointerdown,{evt:n,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(n){const s=dc(n.type),r=uh(n.type);if(!s)return;const o=n.type.indexOf("touch")>=0||n.pointerType==="touch";if(Vt.isDragging()&&Ye.node.preventDefault()&&n.cancelable&&o&&n.preventDefault(),this.setPointersPositions(n),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const f={};let p=!1;const g=this._getTargetShape(r);this._changedPointerPositions.forEach(b=>{const _=fg(b.id)||this.getIntersection(b),R=b.id,E={evt:n,pointerId:R},D=g!==_;if(D&&g&&(g._fireAndBubble(s.pointerout,{...E},_),g._fireAndBubble(s.pointerleave,{...E},_)),_){if(f[_._id])return;f[_._id]=!0}_&&_.isListening()?(p=!0,D&&(_._fireAndBubble(s.pointerover,{...E},g),_._fireAndBubble(s.pointerenter,{...E},g),this[r+"targetShape"]=_),_._fireAndBubble(s.pointermove,{...E})):g&&(this._fire(s.pointerover,{evt:n,target:this,currentTarget:this,pointerId:R}),this[r+"targetShape"]=null)}),p||this._fire(s.pointermove,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(n){const s=dc(n.type),r=uh(n.type);if(!s)return;this.setPointersPositions(n);const o=this[r+"ClickStartShape"],c=this[r+"ClickEndShape"],f={};let p=!1;this._changedPointerPositions.forEach(g=>{const b=fg(g.id)||this.getIntersection(g);if(b){if(b.releaseCapture(g.id),f[b._id])return;f[b._id]=!0}const _=g.id,R={evt:n,pointerId:_};let E=!1;Vt["_"+r+"InDblClickWindow"]?(E=!0,clearTimeout(this[r+"DblTimeout"])):Ye.justDragged||(Vt["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){Vt["_"+r+"InDblClickWindow"]=!1},Vt.dblClickWindow),b&&b.isListening()?(p=!0,this[r+"ClickEndShape"]=b,b._fireAndBubble(s.pointerup,{...R}),Vt["_"+r+"ListenClick"]&&o&&o===b&&(b._fireAndBubble(s.pointerclick,{...R}),E&&c&&c===b&&b._fireAndBubble(s.pointerdblclick,{...R}))):(this[r+"ClickEndShape"]=null,p||(this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),p=!0),Vt["_"+r+"ListenClick"]&&this._fire(s.pointerclick,{evt:n,target:this,currentTarget:this,pointerId:_}),E&&this._fire(s.pointerdblclick,{evt:n,target:this,currentTarget:this,pointerId:_}))}),p||this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+r+"ListenClick"]=!1,n.cancelable&&r!=="touch"&&r!=="pointer"&&n.preventDefault()}_contextmenu(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(ip,{evt:n}):this._fire(ip,{evt:n,target:this,currentTarget:this})}_wheel(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(lp,{evt:n}):this._fire(lp,{evt:n,target:this,currentTarget:this})}_pointercancel(n){this.setPointersPositions(n);const s=fg(n.pointerId)||this.getIntersection(this.getPointerPosition());s&&s._fireAndBubble(Sc,Sp(n)),ch(n.pointerId)}_lostpointercapture(n){ch(n.pointerId)}setPointersPositions(n){const s=this._getContentPosition();let r=null,o=null;n=n||window.event,n.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(n.touches,c=>{this._pointerPositions.push({id:c.identifier,x:(c.clientX-s.left)/s.scaleX,y:(c.clientY-s.top)/s.scaleY})}),Array.prototype.forEach.call(n.changedTouches||n.touches,c=>{this._changedPointerPositions.push({id:c.identifier,x:(c.clientX-s.left)/s.scaleX,y:(c.clientY-s.top)/s.scaleY})})):(r=(n.clientX-s.left)/s.scaleX,o=(n.clientY-s.top)/s.scaleY,this.pointerPos={x:r,y:o},this._pointerPositions=[{x:r,y:o,id:pt._getFirstPointerId(n)}],this._changedPointerPositions=[{x:r,y:o,id:pt._getFirstPointerId(n)}])}_setPointerPosition(n){pt.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(n)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const n=this.content.getBoundingClientRect();return{top:n.top,left:n.left,scaleX:n.width/this.content.clientWidth||1,scaleY:n.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Gs({width:this.width(),height:this.height()}),this.bufferHitCanvas=new vp({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const n=this.container();if(!n)throw"Stage has no container. A container is required.";n.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),n.appendChild(this.content),this._resizeDOM()}cache(){return pt.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(n){n.batchDraw()}),this}};v0.prototype.nodeType=H4;En(v0);rt.addGetterSetter(v0,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{fh.forEach(h=>{h.batchDraw()})});const Tv="hasShadow",Av="shadowRGBA",_v="patternImage",Rv="linearGradient",Ov="radialGradient";let $d;function dg(){return $d||($d=pt.createCanvasElement().getContext("2d"),$d)}const hh={};function X4(h){const n=this.attrs.fillRule;n?h.fill(n):h.fill()}function I4(h){h.stroke()}function Q4(h){const n=this.attrs.fillRule;n?h.fill(n):h.fill()}function K4(h){h.stroke()}function Z4(){this._clearCache(Tv)}function J4(){this._clearCache(Av)}function F4(){this._clearCache(_v)}function k4(){this._clearCache(Rv)}function W4(){this._clearCache(Ov)}class zt extends qt{constructor(n){super(n);let s;for(;s=pt.getRandomColor(),!(s&&!(s in hh)););this.colorKey=s,hh[s]=this}getContext(){return pt.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return pt.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Tv,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(_v,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const s=dg().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(s&&s.setTransform){const r=new oi;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(Vt.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=r.getMatrix(),c=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);s.setTransform(c)}return s}}_getLinearGradient(){return this._getCache(Rv,this.__getLinearGradient)}__getLinearGradient(){const n=this.fillLinearGradientColorStops();if(n){const s=dg(),r=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),c=s.createLinearGradient(r.x,r.y,o.x,o.y);for(let f=0;f<n.length;f+=2)c.addColorStop(n[f],n[f+1]);return c}}_getRadialGradient(){return this._getCache(Ov,this.__getRadialGradient)}__getRadialGradient(){const n=this.fillRadialGradientColorStops();if(n){const s=dg(),r=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),c=s.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let f=0;f<n.length;f+=2)c.addColorStop(n[f],n[f+1]);return c}}getShadowRGBA(){return this._getCache(Av,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const n=pt.colorToRGBA(this.shadowColor());if(n)return"rgba("+n.r+","+n.g+","+n.b+","+n.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const n=this.hitStrokeWidth();return n==="auto"?this.hasStroke():this.strokeEnabled()&&!!n}intersects(n){const s=this.getStage();if(!s)return!1;const r=s.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(n.x),Math.round(n.y),1,1).data[3]>0}destroy(){return qt.prototype.destroy.call(this),delete hh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(n){var s;if(!((s=this.attrs.perfectDrawEnabled)!==null&&s!==void 0?s:!0))return!1;const o=n||this.hasFill(),c=this.hasStroke(),f=this.getAbsoluteOpacity()!==1;if(o&&c&&f)return!0;const p=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(o&&c&&p&&g)}setStrokeHitEnabled(n){pt.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),n?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const n=this.size();return{x:this._centroid?-n.width/2:0,y:this._centroid?-n.height/2:0,width:n.width,height:n.height}}getClientRect(n={}){let s=!1,r=this.getParent();for(;r;){if(r.isCached()){s=!0;break}r=r.getParent()}const o=n.skipTransform,c=n.relativeTo||s&&this.getStage()||void 0,f=this.getSelfRect(),g=!n.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,b=f.width+g,_=f.height+g,R=!n.skipShadow&&this.hasShadow(),E=R?this.shadowOffsetX():0,D=R?this.shadowOffsetY():0,S=b+Math.abs(E),G=_+Math.abs(D),q=R&&this.shadowBlur()||0,H=S+q*2,B=G+q*2,z={width:H,height:B,x:-(g/2+q)+Math.min(E,0)+f.x,y:-(g/2+q)+Math.min(D,0)+f.y};return o?z:this._transformedRect(z,c)}drawScene(n,s,r){const o=this.getLayer(),c=n||o.getCanvas(),f=c.getContext(),p=this._getCanvasCache(),g=this.getSceneFunc(),b=this.hasShadow();let _;const R=s===this;if(!this.isVisible()&&!R)return this;if(p){f.save();const E=this.getAbsoluteTransform(s).getMatrix();return f.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(f),f.restore(),this}if(!g)return this;if(f.save(),this._useBufferCanvas()){_=this.getStage();const E=r||_.bufferCanvas,D=E.getContext();D.clear(),D.save(),D._applyLineJoin(this),D._applyMiterLimit(this);const S=this.getAbsoluteTransform(s).getMatrix();D.transform(S[0],S[1],S[2],S[3],S[4],S[5]),g.call(this,D,this),D.restore();const G=E.pixelRatio;b&&f._applyShadow(this),f._applyOpacity(this),f._applyGlobalCompositeOperation(this),f.drawImage(E._canvas,E.x||0,E.y||0,E.width/G,E.height/G)}else{if(f._applyLineJoin(this),f._applyMiterLimit(this),!R){const E=this.getAbsoluteTransform(s).getMatrix();f.transform(E[0],E[1],E[2],E[3],E[4],E[5]),f._applyOpacity(this),f._applyGlobalCompositeOperation(this)}b&&f._applyShadow(this),g.call(this,f,this)}return f.restore(),this}drawHit(n,s,r=!1){if(!this.shouldDrawHit(s,r))return this;const o=this.getLayer(),c=n||o.hitCanvas,f=c&&c.getContext(),p=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),b=g&&g.hit;if(this.colorKey||pt.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),b){f.save();const R=this.getAbsoluteTransform(s).getMatrix();return f.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedHitCanvas(f),f.restore(),this}if(!p)return this;if(f.save(),f._applyLineJoin(this),f._applyMiterLimit(this),!(this===s)){const R=this.getAbsoluteTransform(s).getMatrix();f.transform(R[0],R[1],R[2],R[3],R[4],R[5])}return p.call(this,f,this),f.restore(),this}drawHitFromCache(n=0){const s=this._getCanvasCache(),r=this._getCachedSceneCanvas(),o=s.hit,c=o.getContext(),f=o.getWidth(),p=o.getHeight();c.clear(),c.drawImage(r._canvas,0,0,f,p);try{const g=c.getImageData(0,0,f,p),b=g.data,_=b.length,R=pt._hexToRgb(this.colorKey);for(let E=0;E<_;E+=4)b[E+3]>n?(b[E]=R.r,b[E+1]=R.g,b[E+2]=R.b,b[E+3]=255):b[E+3]=0;c.putImageData(g,0,0)}catch(g){pt.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(n){return fv(n,this)}setPointerCapture(n){hv(n,this)}releaseCapture(n){ch(n)}}zt.prototype._fillFunc=X4;zt.prototype._strokeFunc=I4;zt.prototype._fillFuncHit=Q4;zt.prototype._strokeFuncHit=K4;zt.prototype._centroid=!1;zt.prototype.nodeType="Shape";En(zt);zt.prototype.eventListeners={};zt.prototype.on.call(zt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Z4);zt.prototype.on.call(zt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",J4);zt.prototype.on.call(zt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",F4);zt.prototype.on.call(zt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k4);zt.prototype.on.call(zt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",W4);rt.addGetterSetter(zt,"stroke",void 0,uv());rt.addGetterSetter(zt,"strokeWidth",2,Pt());rt.addGetterSetter(zt,"fillAfterStrokeEnabled",!1);rt.addGetterSetter(zt,"hitStrokeWidth","auto",yp());rt.addGetterSetter(zt,"strokeHitEnabled",!0,ul());rt.addGetterSetter(zt,"perfectDrawEnabled",!0,ul());rt.addGetterSetter(zt,"shadowForStrokeEnabled",!0,ul());rt.addGetterSetter(zt,"lineJoin");rt.addGetterSetter(zt,"lineCap");rt.addGetterSetter(zt,"miterLimit");rt.addGetterSetter(zt,"sceneFunc");rt.addGetterSetter(zt,"hitFunc");rt.addGetterSetter(zt,"dash");rt.addGetterSetter(zt,"dashOffset",0,Pt());rt.addGetterSetter(zt,"shadowColor",void 0,jo());rt.addGetterSetter(zt,"shadowBlur",0,Pt());rt.addGetterSetter(zt,"shadowOpacity",1,Pt());rt.addComponentsGetterSetter(zt,"shadowOffset",["x","y"]);rt.addGetterSetter(zt,"shadowOffsetX",0,Pt());rt.addGetterSetter(zt,"shadowOffsetY",0,Pt());rt.addGetterSetter(zt,"fillPatternImage");rt.addGetterSetter(zt,"fill",void 0,uv());rt.addGetterSetter(zt,"fillPatternX",0,Pt());rt.addGetterSetter(zt,"fillPatternY",0,Pt());rt.addGetterSetter(zt,"fillLinearGradientColorStops");rt.addGetterSetter(zt,"strokeLinearGradientColorStops");rt.addGetterSetter(zt,"fillRadialGradientStartRadius",0);rt.addGetterSetter(zt,"fillRadialGradientEndRadius",0);rt.addGetterSetter(zt,"fillRadialGradientColorStops");rt.addGetterSetter(zt,"fillPatternRepeat","repeat");rt.addGetterSetter(zt,"fillEnabled",!0);rt.addGetterSetter(zt,"strokeEnabled",!0);rt.addGetterSetter(zt,"shadowEnabled",!0);rt.addGetterSetter(zt,"dashEnabled",!0);rt.addGetterSetter(zt,"strokeScaleEnabled",!0);rt.addGetterSetter(zt,"fillPriority","color");rt.addComponentsGetterSetter(zt,"fillPatternOffset",["x","y"]);rt.addGetterSetter(zt,"fillPatternOffsetX",0,Pt());rt.addGetterSetter(zt,"fillPatternOffsetY",0,Pt());rt.addComponentsGetterSetter(zt,"fillPatternScale",["x","y"]);rt.addGetterSetter(zt,"fillPatternScaleX",1,Pt());rt.addGetterSetter(zt,"fillPatternScaleY",1,Pt());rt.addComponentsGetterSetter(zt,"fillLinearGradientStartPoint",["x","y"]);rt.addComponentsGetterSetter(zt,"strokeLinearGradientStartPoint",["x","y"]);rt.addGetterSetter(zt,"fillLinearGradientStartPointX",0);rt.addGetterSetter(zt,"strokeLinearGradientStartPointX",0);rt.addGetterSetter(zt,"fillLinearGradientStartPointY",0);rt.addGetterSetter(zt,"strokeLinearGradientStartPointY",0);rt.addComponentsGetterSetter(zt,"fillLinearGradientEndPoint",["x","y"]);rt.addComponentsGetterSetter(zt,"strokeLinearGradientEndPoint",["x","y"]);rt.addGetterSetter(zt,"fillLinearGradientEndPointX",0);rt.addGetterSetter(zt,"strokeLinearGradientEndPointX",0);rt.addGetterSetter(zt,"fillLinearGradientEndPointY",0);rt.addGetterSetter(zt,"strokeLinearGradientEndPointY",0);rt.addComponentsGetterSetter(zt,"fillRadialGradientStartPoint",["x","y"]);rt.addGetterSetter(zt,"fillRadialGradientStartPointX",0);rt.addGetterSetter(zt,"fillRadialGradientStartPointY",0);rt.addComponentsGetterSetter(zt,"fillRadialGradientEndPoint",["x","y"]);rt.addGetterSetter(zt,"fillRadialGradientEndPointX",0);rt.addGetterSetter(zt,"fillRadialGradientEndPointY",0);rt.addGetterSetter(zt,"fillPatternRotation",0);rt.addGetterSetter(zt,"fillRule",void 0,jo());rt.backCompat(zt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const $4="#",t3="beforeDraw",e3="draw",Mv=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],n3=Mv.length;let Lo=class extends ui{constructor(n){super(n),this.canvas=new Gs,this.hitCanvas=new vp({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(n){return this.getContext().clear(n),this.getHitCanvas().getContext().clear(n),this}setZIndex(n){super.setZIndex(n);const s=this.getStage();return s&&s.content&&(s.content.removeChild(this.getNativeCanvasElement()),n<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[n+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){qt.prototype.moveToTop.call(this);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!qt.prototype.moveUp.call(this))return!1;const s=this.getStage();return!s||!s.content?!1:(s.content.removeChild(this.getNativeCanvasElement()),this.index<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[this.index+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(qt.prototype.moveDown.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(qt.prototype.moveToBottom.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const n=this.getNativeCanvasElement();return qt.prototype.remove.call(this),n&&n.parentNode&&pt._isInDocument(n)&&n.parentNode.removeChild(n),this}getStage(){return this.parent}setSize({width:n,height:s}){return this.canvas.setSize(n,s),this.hitCanvas.setSize(n,s),this._setSmoothEnabled(),this}_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&pt.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(n){return n={...n},n.width=n.width||this.getWidth(),n.height=n.height||this.getHeight(),n.x=n.x!==void 0?n.x:this.x(),n.y=n.y!==void 0?n.y:this.y(),qt.prototype._toKonvaCanvas.call(this,n)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){pt.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){pt.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,pt.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(n){if(!this.isListening()||!this.isVisible())return null;let s=1,r=!1;for(;;){for(let o=0;o<n3;o++){const c=Mv[o],f=this._getIntersection({x:n.x+c.x*s,y:n.y+c.y*s}),p=f.shape;if(p)return p;if(r=!!f.antialiased,!f.antialiased)break}if(r)s+=1;else return null}}_getIntersection(n){const s=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(n.x*s),Math.round(n.y*s),1,1).data,o=r[3];if(o===255){const c=pt._rgbToHex(r[0],r[1],r[2]),f=hh[$4+c];return f?{shape:f}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(n,s,r){const o=this.getLayer(),c=n||o&&o.getCanvas();return this._fire(t3,{node:this}),this.clearBeforeDraw()&&c.getContext().clear(),ui.prototype.drawScene.call(this,c,s,r),this._fire(e3,{node:this}),this}drawHit(n,s){const r=this.getLayer(),o=n||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),ui.prototype.drawHit.call(this,o,s),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(n){pt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(n)}getHitGraphEnabled(n){return pt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const n=this.parent;!!this.hitCanvas._canvas.parentNode?n.content.removeChild(this.hitCanvas._canvas):n.content.appendChild(this.hitCanvas._canvas)}destroy(){return pt.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Lo.prototype.nodeType="Layer";En(Lo);rt.addGetterSetter(Lo,"imageSmoothingEnabled",!0);rt.addGetterSetter(Lo,"clearBeforeDraw",!0);rt.addGetterSetter(Lo,"hitGraphEnabled",!0,ul());class bp extends Lo{constructor(n){super(n),this.listening(!1),pt.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}bp.prototype.nodeType="FastLayer";En(bp);class bc extends ui{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&pt.throw("You may only add groups and shapes to groups.")}}bc.prototype.nodeType="Group";En(bc);const gg=(function(){return wo.performance&&wo.performance.now?function(){return wo.performance.now()}:function(){return new Date().getTime()}})();class wi{constructor(n,s){this.id=wi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gg(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,r=s.length;for(let o=0;o<r;o++)if(s[o]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=wi.animations,r=s.length;for(let o=0;o<r;o++)if(s[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gg(),wi._addAnimation(this),this}stop(){return wi._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,r=this.animations,o=r.length;for(let c=0;c<o;c++)if(r[c].id===s){this.animations.splice(c,1);break}}static _runFrames(){const n={},s=this.animations;for(let r=0;r<s.length;r++){const o=s[r],c=o.layers,f=o.func;o._updateFrameObject(gg());const p=c.length;let g;if(f?g=f.call(o,o.frame)!==!1:g=!0,!!g)for(let b=0;b<p;b++){const _=c[b];_._id!==void 0&&(n[_._id]=_)}}for(const r in n)n.hasOwnProperty(r)&&n[r].batchDraw()}static _animationLoop(){const n=wi;n.animations.length?(n._runFrames(),pt.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,pt.requestAnimFrame(this._animationLoop))}}wi.animations=[];wi.animIdCounter=0;wi.animRunning=!1;const a3={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i3=1,K1=2,Z1=3,J1=["fill","stroke","shadowColor"];let l3=0;class r3{constructor(n,s,r,o,c,f,p){this.prop=n,this.propFunc=s,this.begin=o,this._pos=o,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=p,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=c-this.begin,this.pause()}fire(n){const s=this[n];s&&s()}setTime(n){n>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():n<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=n,this.update())}getTime(){return this._time}setPosition(n){this.prevPos=this._pos,this.propFunc(n),this._pos=n}getPosition(n){return n===void 0&&(n=this._time),this.func(n,this.begin,this._change,this.duration)}play(){this.state=K1,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Z1,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(n){this.pause(),this._time=n,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const n=this.getTimer()-this._startTime;this.state===K1?this.setTime(n):this.state===Z1&&this.setTime(this.duration-n)}pause(){this.state=i3,this.fire("onPause")}getTimer(){return new Date().getTime()}}class rn{constructor(n){const s=this,r=n.node,o=r._id,c=n.easing||dh.Linear,f=!!n.yoyo;let p,g;typeof n.duration>"u"?p=.3:n.duration===0?p=.001:p=n.duration,this.node=r,this._id=l3++;const b=r.getLayer()||(r instanceof Vt.Stage?r.getLayers():null);b||pt.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new wi(function(){s.tween.onEnterFrame()},b),this.tween=new r3(g,function(_){s._tweenFunc(_)},c,0,1,p*1e3,f),this._addListeners(),rn.attrs[o]||(rn.attrs[o]={}),rn.attrs[o][this._id]||(rn.attrs[o][this._id]={}),rn.tweens[o]||(rn.tweens[o]={});for(g in n)a3[g]===void 0&&this._addAttr(g,n[g]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}_addAttr(n,s){const r=this.node,o=r._id;let c,f,p,g,b;const _=rn.tweens[o][n];_&&delete rn.attrs[o][_][n];let R=r.getAttr(n);if(pt._isArray(s))if(c=[],f=Math.max(s.length,R.length),n==="points"&&s.length!==R.length&&(s.length>R.length?(g=R,R=pt._prepareArrayForTween(R,s,r.closed())):(p=s,s=pt._prepareArrayForTween(s,R,r.closed()))),n.indexOf("fill")===0)for(let E=0;E<f;E++)if(E%2===0)c.push(s[E]-R[E]);else{const D=pt.colorToRGBA(R[E]);b=pt.colorToRGBA(s[E]),R[E]=D,c.push({r:b.r-D.r,g:b.g-D.g,b:b.b-D.b,a:b.a-D.a})}else for(let E=0;E<f;E++)c.push(s[E]-R[E]);else J1.indexOf(n)!==-1?(R=pt.colorToRGBA(R),b=pt.colorToRGBA(s),c={r:b.r-R.r,g:b.g-R.g,b:b.b-R.b,a:b.a-R.a}):c=s-R;rn.attrs[o][this._id][n]={start:R,diff:c,end:s,trueEnd:p,trueStart:g},rn.tweens[o][n]=this._id}_tweenFunc(n){const s=this.node,r=rn.attrs[s._id][this._id];let o,c,f,p,g,b,_,R;for(o in r){if(c=r[o],f=c.start,p=c.diff,R=c.end,pt._isArray(f))if(g=[],_=Math.max(f.length,R.length),o.indexOf("fill")===0)for(b=0;b<_;b++)b%2===0?g.push((f[b]||0)+p[b]*n):g.push("rgba("+Math.round(f[b].r+p[b].r*n)+","+Math.round(f[b].g+p[b].g*n)+","+Math.round(f[b].b+p[b].b*n)+","+(f[b].a+p[b].a*n)+")");else for(b=0;b<_;b++)g.push((f[b]||0)+p[b]*n);else J1.indexOf(o)!==-1?g="rgba("+Math.round(f.r+p.r*n)+","+Math.round(f.g+p.g*n)+","+Math.round(f.b+p.b*n)+","+(f.a+p.a*n)+")":g=f+p*n;s.setAttr(o,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const n=this.node,s=rn.attrs[n._id][this._id];s.points&&s.points.trueEnd&&n.setAttr("points",s.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const n=this.node,s=rn.attrs[n._id][this._id];s.points&&s.points.trueStart&&n.points(s.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(n){return this.tween.seek(n*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const n=this.node._id,s=this._id,r=rn.tweens[n];this.pause(),this.anim&&this.anim.stop();for(const o in r)delete rn.tweens[n][o];delete rn.attrs[n][s],rn.tweens[n]&&(Object.keys(rn.tweens[n]).length===0&&delete rn.tweens[n],Object.keys(rn.attrs[n]).length===0&&delete rn.attrs[n])}}rn.attrs={};rn.tweens={};qt.prototype.to=function(h){const n=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),n&&n()},new rn(h).play()};const dh={BackEaseIn(h,n,s,r){return s*(h/=r)*h*((1.70158+1)*h-1.70158)+n},BackEaseOut(h,n,s,r){return s*((h=h/r-1)*h*((1.70158+1)*h+1.70158)+1)+n},BackEaseInOut(h,n,s,r){let o=1.70158;return(h/=r/2)<1?s/2*(h*h*(((o*=1.525)+1)*h-o))+n:s/2*((h-=2)*h*(((o*=1.525)+1)*h+o)+2)+n},ElasticEaseIn(h,n,s,r,o,c){let f=0;return h===0?n:(h/=r)===1?n+s:(c||(c=r*.3),!o||o<Math.abs(s)?(o=s,f=c/4):f=c/(2*Math.PI)*Math.asin(s/o),-(o*Math.pow(2,10*(h-=1))*Math.sin((h*r-f)*(2*Math.PI)/c))+n)},ElasticEaseOut(h,n,s,r,o,c){let f=0;return h===0?n:(h/=r)===1?n+s:(c||(c=r*.3),!o||o<Math.abs(s)?(o=s,f=c/4):f=c/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*h)*Math.sin((h*r-f)*(2*Math.PI)/c)+s+n)},ElasticEaseInOut(h,n,s,r,o,c){let f=0;return h===0?n:(h/=r/2)===2?n+s:(c||(c=r*(.3*1.5)),!o||o<Math.abs(s)?(o=s,f=c/4):f=c/(2*Math.PI)*Math.asin(s/o),h<1?-.5*(o*Math.pow(2,10*(h-=1))*Math.sin((h*r-f)*(2*Math.PI)/c))+n:o*Math.pow(2,-10*(h-=1))*Math.sin((h*r-f)*(2*Math.PI)/c)*.5+s+n)},BounceEaseOut(h,n,s,r){return(h/=r)<1/2.75?s*(7.5625*h*h)+n:h<2/2.75?s*(7.5625*(h-=1.5/2.75)*h+.75)+n:h<2.5/2.75?s*(7.5625*(h-=2.25/2.75)*h+.9375)+n:s*(7.5625*(h-=2.625/2.75)*h+.984375)+n},BounceEaseIn(h,n,s,r){return s-dh.BounceEaseOut(r-h,0,s,r)+n},BounceEaseInOut(h,n,s,r){return h<r/2?dh.BounceEaseIn(h*2,0,s,r)*.5+n:dh.BounceEaseOut(h*2-r,0,s,r)*.5+s*.5+n},EaseIn(h,n,s,r){return s*(h/=r)*h+n},EaseOut(h,n,s,r){return-s*(h/=r)*(h-2)+n},EaseInOut(h,n,s,r){return(h/=r/2)<1?s/2*h*h+n:-s/2*(--h*(h-2)-1)+n},StrongEaseIn(h,n,s,r){return s*(h/=r)*h*h*h*h+n},StrongEaseOut(h,n,s,r){return s*((h=h/r-1)*h*h*h*h+1)+n},StrongEaseInOut(h,n,s,r){return(h/=r/2)<1?s/2*h*h*h*h*h+n:s/2*((h-=2)*h*h*h*h+2)+n},Linear(h,n,s,r){return s*h/r+n}},Cc=pt._assign(Vt,{Util:pt,Transform:oi,Node:qt,Container:ui,Stage:v0,stages:fh,Layer:Lo,FastLayer:bp,Group:bc,DD:Ye,Shape:zt,shapes:hh,Animation:wi,Tween:rn,Easings:dh,Context:p0,Canvas:mp});class Yr extends zt{_sceneFunc(n){const s=Vt.getAngle(this.angle()),r=this.clockwise();n.beginPath(),n.arc(0,0,this.outerRadius(),0,s,r),n.arc(0,0,this.innerRadius(),s,0,!r),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}getSelfRect(){const n=this.innerRadius(),s=this.outerRadius(),r=this.clockwise(),o=Vt.getAngle(r?360-this.angle():this.angle()),c=Math.cos(Math.min(o,Math.PI)),f=1,p=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),g=Math.sin(Math.min(o,Math.PI/2)),b=c*(c>0?n:s),_=f*s,R=p*(p>0?n:s),E=g*(g>0?s:n);return{x:b,y:r?-1*E:R,width:_-b,height:E-R}}}Yr.prototype._centroid=!0;Yr.prototype.className="Arc";Yr.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];En(Yr);rt.addGetterSetter(Yr,"innerRadius",0,Pt());rt.addGetterSetter(Yr,"outerRadius",0,Pt());rt.addGetterSetter(Yr,"angle",0,Pt());rt.addGetterSetter(Yr,"clockwise",!1,ul());function rp(h,n,s,r,o,c,f){const p=Math.sqrt(Math.pow(s-h,2)+Math.pow(r-n,2)),g=Math.sqrt(Math.pow(o-s,2)+Math.pow(c-r,2)),b=f*p/(p+g),_=f*g/(p+g),R=s-b*(o-h),E=r-b*(c-n),D=s+_*(o-h),S=r+_*(c-n);return[R,E,D,S]}function F1(h,n){const s=h.length,r=[];for(let o=2;o<s-2;o+=2){const c=rp(h[o-2],h[o-1],h[o],h[o+1],h[o+2],h[o+3],n);isNaN(c[0])||(r.push(c[0]),r.push(c[1]),r.push(h[o]),r.push(h[o+1]),r.push(c[2]),r.push(c[3]))}return r}let Vr=class extends zt{constructor(n){super(n),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(n){const s=this.points(),r=s.length,o=this.tension(),c=this.closed(),f=this.bezier();if(!r)return;let p=0;if(n.beginPath(),n.moveTo(s[0],s[1]),o!==0&&r>4){const g=this.getTensionPoints(),b=g.length;for(p=c?0:4,c||n.quadraticCurveTo(g[0],g[1],g[2],g[3]);p<b-2;)n.bezierCurveTo(g[p++],g[p++],g[p++],g[p++],g[p++],g[p++]);c||n.quadraticCurveTo(g[b-2],g[b-1],s[r-2],s[r-1])}else if(f)for(p=2;p<r;)n.bezierCurveTo(s[p++],s[p++],s[p++],s[p++],s[p++],s[p++]);else for(p=2;p<r;p+=2)n.lineTo(s[p],s[p+1]);c?(n.closePath(),n.fillStrokeShape(this)):n.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():F1(this.points(),this.tension())}_getTensionPointsClosed(){const n=this.points(),s=n.length,r=this.tension(),o=rp(n[s-2],n[s-1],n[0],n[1],n[2],n[3],r),c=rp(n[s-4],n[s-3],n[s-2],n[s-1],n[0],n[1],r),f=F1(n,r);return[o[2],o[3]].concat(f).concat([c[0],c[1],n[s-2],n[s-1],c[2],c[3],o[0],o[1],n[0],n[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let n=this.points();if(n.length<4)return{x:n[0]||0,y:n[1]||0,width:0,height:0};this.tension()!==0?n=[n[0],n[1],...this._getTensionPoints(),n[n.length-2],n[n.length-1]]:n=this.points();let s=n[0],r=n[0],o=n[1],c=n[1],f,p;for(let g=0;g<n.length/2;g++)f=n[g*2],p=n[g*2+1],s=Math.min(s,f),r=Math.max(r,f),o=Math.min(o,p),c=Math.max(c,p);return{x:s,y:o,width:r-s,height:c-o}}};Vr.prototype.className="Line";Vr.prototype._attrsAffectingSize=["points","bezier","tension"];En(Vr);rt.addGetterSetter(Vr,"closed",!1);rt.addGetterSetter(Vr,"bezier",!1);rt.addGetterSetter(Vr,"tension",0,Pt());rt.addGetterSetter(Vr,"points",[],E4());const s3=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o3=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],u3=[[1],[1,1],[1,2,1],[1,3,3,1]],k1=(h,n,s)=>{let r,o;const f=s/2;r=0;for(let p=0;p<20;p++)o=f*s3[20][p]+f,r+=o3[20][p]*c3(h,n,o);return f*r},W1=(h,n,s)=>{s===void 0&&(s=1);const r=h[0]-2*h[1]+h[2],o=n[0]-2*n[1]+n[2],c=2*h[1]-2*h[0],f=2*n[1]-2*n[0],p=4*(r*r+o*o),g=4*(r*c+o*f),b=c*c+f*f;if(p===0)return s*Math.sqrt(Math.pow(h[2]-h[0],2)+Math.pow(n[2]-n[0],2));const _=g/(2*p),R=b/p,E=s+_,D=R-_*_,S=E*E+D>0?Math.sqrt(E*E+D):0,G=_*_+D>0?Math.sqrt(_*_+D):0,q=_+Math.sqrt(_*_+D)!==0?D*Math.log(Math.abs((E+S)/(_+G))):0;return Math.sqrt(p)/2*(E*S-_*G+q)};function c3(h,n,s){const r=sp(1,s,h),o=sp(1,s,n),c=r*r+o*o;return Math.sqrt(c)}const sp=(h,n,s)=>{const r=s.length-1;let o,c;if(r===0)return 0;if(h===0){c=0;for(let f=0;f<=r;f++)c+=u3[r][f]*Math.pow(1-n,r-f)*Math.pow(n,f)*s[f];return c}else{o=new Array(r);for(let f=0;f<r;f++)o[f]=r*(s[f+1]-s[f]);return sp(h-1,n,o)}},$1=(h,n,s)=>{let r=1,o=h/n,c=(h-s(o))/n,f=0;for(;r>.001;){const p=s(o+c),g=Math.abs(h-p)/n;if(g<r)r=g,o+=c;else{const b=s(o-c),_=Math.abs(h-b)/n;_<r?(r=_,o-=c):c/=2}if(f++,f>500)break}return o};class sn extends zt{constructor(n){super(n),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=sn.parsePathData(this.data()),this.pathLength=sn.getPathLength(this.dataArray)}_sceneFunc(n){const s=this.dataArray;n.beginPath();let r=!1;for(let o=0;o<s.length;o++){const c=s[o].command,f=s[o].points;switch(c){case"L":n.lineTo(f[0],f[1]);break;case"M":n.moveTo(f[0],f[1]);break;case"C":n.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":n.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const p=f[0],g=f[1],b=f[2],_=f[3],R=f[4],E=f[5],D=f[6],S=f[7],G=b>_?b:_,q=b>_?1:b/_,H=b>_?_/b:1;n.translate(p,g),n.rotate(D),n.scale(q,H),n.arc(0,0,G,R,R+E,1-S),n.scale(1/q,1/H),n.rotate(-D),n.translate(-p,-g);break;case"z":r=!0,n.closePath();break}}!r&&!this.hasFill()?n.strokeShape(this):n.fillStrokeShape(this)}getSelfRect(){let n=[];this.dataArray.forEach(function(g){if(g.command==="A"){const b=g.points[4],_=g.points[5],R=g.points[4]+_;let E=Math.PI/180;if(Math.abs(b-R)<E&&(E=Math.abs(b-R)),_<0)for(let D=b-E;D>R;D-=E){const S=sn.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],D,0);n.push(S.x,S.y)}else for(let D=b+E;D<R;D+=E){const S=sn.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],D,0);n.push(S.x,S.y)}}else if(g.command==="C")for(let b=0;b<=1;b+=.01){const _=sn.getPointOnCubicBezier(b,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);n.push(_.x,_.y)}else n=n.concat(g.points)});let s=n[0],r=n[0],o=n[1],c=n[1],f,p;for(let g=0;g<n.length/2;g++)f=n[g*2],p=n[g*2+1],isNaN(f)||(s=Math.min(s,f),r=Math.max(r,f)),isNaN(p)||(o=Math.min(o,p),c=Math.max(c,p));return{x:s,y:o,width:r-s,height:c-o}}getLength(){return this.pathLength}getPointAtLength(n){return sn.getPointAtLengthOfDataArray(n,this.dataArray)}static getLineLength(n,s,r,o){return Math.sqrt((r-n)*(r-n)+(o-s)*(o-s))}static getPathLength(n){let s=0;for(let r=0;r<n.length;++r)s+=n[r].pathLength;return s}static getPointAtLengthOfDataArray(n,s){let r,o=0,c=s.length;if(!c)return null;for(;o<c&&n>s[o].pathLength;)n-=s[o].pathLength,++o;if(o===c)return r=s[o-1].points.slice(-2),{x:r[0],y:r[1]};if(n<.01)return s[o].command==="M"?(r=s[o].points.slice(0,2),{x:r[0],y:r[1]}):{x:s[o].start.x,y:s[o].start.y};const f=s[o],p=f.points;switch(f.command){case"L":return sn.getPointOnLine(n,f.start.x,f.start.y,p[0],p[1]);case"C":return sn.getPointOnCubicBezier($1(n,sn.getPathLength(s),G=>k1([f.start.x,p[0],p[2],p[4]],[f.start.y,p[1],p[3],p[5]],G)),f.start.x,f.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return sn.getPointOnQuadraticBezier($1(n,sn.getPathLength(s),G=>W1([f.start.x,p[0],p[2]],[f.start.y,p[1],p[3]],G)),f.start.x,f.start.y,p[0],p[1],p[2],p[3]);case"A":const g=p[0],b=p[1],_=p[2],R=p[3],E=p[5],D=p[6];let S=p[4];return S+=E*n/f.pathLength,sn.getPointOnEllipticalArc(g,b,_,R,S,D)}return null}static getPointOnLine(n,s,r,o,c,f,p){f=f??s,p=p??r;const g=this.getLineLength(s,r,o,c);if(g<1e-10)return{x:s,y:r};if(o===s)return{x:f,y:p+(c>r?n:-n)};const b=(c-r)/(o-s),_=Math.sqrt(n*n/(1+b*b))*(o<s?-1:1),R=b*_;if(Math.abs(p-r-b*(f-s))<1e-10)return{x:f+_,y:p+R};const E=((f-s)*(o-s)+(p-r)*(c-r))/(g*g),D=s+E*(o-s),S=r+E*(c-r),G=this.getLineLength(f,p,D,S),q=Math.sqrt(n*n-G*G),H=Math.sqrt(q*q/(1+b*b))*(o<s?-1:1),B=b*H;return{x:D+H,y:S+B}}static getPointOnCubicBezier(n,s,r,o,c,f,p,g,b){function _(q){return q*q*q}function R(q){return 3*q*q*(1-q)}function E(q){return 3*q*(1-q)*(1-q)}function D(q){return(1-q)*(1-q)*(1-q)}const S=g*_(n)+f*R(n)+o*E(n)+s*D(n),G=b*_(n)+p*R(n)+c*E(n)+r*D(n);return{x:S,y:G}}static getPointOnQuadraticBezier(n,s,r,o,c,f,p){function g(D){return D*D}function b(D){return 2*D*(1-D)}function _(D){return(1-D)*(1-D)}const R=f*g(n)+o*b(n)+s*_(n),E=p*g(n)+c*b(n)+r*_(n);return{x:R,y:E}}static getPointOnEllipticalArc(n,s,r,o,c,f){const p=Math.cos(f),g=Math.sin(f),b={x:r*Math.cos(c),y:o*Math.sin(c)};return{x:n+(b.x*p-b.y*g),y:s+(b.x*g+b.y*p)}}static parsePathData(n){if(!n)return[];let s=n;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(let R=0;R<r.length;R++)s=s.replace(new RegExp(r[R],"g"),"|"+r[R]);const o=s.split("|"),c=[],f=[];let p=0,g=0;const b=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let _;for(let R=1;R<o.length;R++){let E=o[R],D=E.charAt(0);for(E=E.slice(1),f.length=0;_=b.exec(E);)f.push(_[0]);let S=[],G=D==="A"||D==="a"?0:-1;for(let q=0,H=f.length;q<H;q++){const B=f[q];if(B==="00"){S.push(0,0),G>=0&&(G+=2,G>=7&&(G-=7));continue}if(G>=0){if(G===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(B)){S.push(parseInt(B[0],10)),S.push(parseInt(B[1],10)),S.push(parseFloat(B.slice(2))),G+=3,G>=7&&(G-=7);continue}if(B==="11"||B==="10"||B==="01"){S.push(parseInt(B[0],10)),S.push(parseInt(B[1],10)),G+=2,G>=7&&(G-=7);continue}if(B==="0"||B==="1"){S.push(parseInt(B,10)),G+=1,G>=7&&(G-=7);continue}}else if(G===4){if(/^[01]\d+(?:\.\d+)?$/.test(B)){S.push(parseInt(B[0],10)),S.push(parseFloat(B.slice(1))),G+=2,G>=7&&(G-=7);continue}if(B==="0"||B==="1"){S.push(parseInt(B,10)),G+=1,G>=7&&(G-=7);continue}}const z=parseFloat(B);isNaN(z)?S.push(0):S.push(z),G+=1,G>=7&&(G-=7)}else{const z=parseFloat(B);isNaN(z)?S.push(0):S.push(z)}}for(;S.length>0&&!isNaN(S[0]);){let q="",H=[];const B=p,z=g;let w,M,A,T,y,U,N,L,Q,I;switch(D){case"l":p+=S.shift(),g+=S.shift(),q="L",H.push(p,g);break;case"L":p=S.shift(),g=S.shift(),H.push(p,g);break;case"m":const K=S.shift(),V=S.shift();if(p+=K,g+=V,q="M",c.length>2&&c[c.length-1].command==="z"){for(let x=c.length-2;x>=0;x--)if(c[x].command==="M"){p=c[x].points[0]+K,g=c[x].points[1]+V;break}}H.push(p,g),D="l";break;case"M":p=S.shift(),g=S.shift(),q="M",H.push(p,g),D="L";break;case"h":p+=S.shift(),q="L",H.push(p,g);break;case"H":p=S.shift(),q="L",H.push(p,g);break;case"v":g+=S.shift(),q="L",H.push(p,g);break;case"V":g=S.shift(),q="L",H.push(p,g);break;case"C":H.push(S.shift(),S.shift(),S.shift(),S.shift()),p=S.shift(),g=S.shift(),H.push(p,g);break;case"c":H.push(p+S.shift(),g+S.shift(),p+S.shift(),g+S.shift()),p+=S.shift(),g+=S.shift(),q="C",H.push(p,g);break;case"S":M=p,A=g,w=c[c.length-1],w.command==="C"&&(M=p+(p-w.points[2]),A=g+(g-w.points[3])),H.push(M,A,S.shift(),S.shift()),p=S.shift(),g=S.shift(),q="C",H.push(p,g);break;case"s":M=p,A=g,w=c[c.length-1],w.command==="C"&&(M=p+(p-w.points[2]),A=g+(g-w.points[3])),H.push(M,A,p+S.shift(),g+S.shift()),p+=S.shift(),g+=S.shift(),q="C",H.push(p,g);break;case"Q":H.push(S.shift(),S.shift()),p=S.shift(),g=S.shift(),H.push(p,g);break;case"q":H.push(p+S.shift(),g+S.shift()),p+=S.shift(),g+=S.shift(),q="Q",H.push(p,g);break;case"T":M=p,A=g,w=c[c.length-1],w.command==="Q"&&(M=p+(p-w.points[0]),A=g+(g-w.points[1])),p=S.shift(),g=S.shift(),q="Q",H.push(M,A,p,g);break;case"t":M=p,A=g,w=c[c.length-1],w.command==="Q"&&(M=p+(p-w.points[0]),A=g+(g-w.points[1])),p+=S.shift(),g+=S.shift(),q="Q",H.push(M,A,p,g);break;case"A":T=S.shift(),y=S.shift(),U=S.shift(),N=S.shift(),L=S.shift(),Q=p,I=g,p=S.shift(),g=S.shift(),q="A",H=this.convertEndpointToCenterParameterization(Q,I,p,g,N,L,T,y,U);break;case"a":T=S.shift(),y=S.shift(),U=S.shift(),N=S.shift(),L=S.shift(),Q=p,I=g,p+=S.shift(),g+=S.shift(),q="A",H=this.convertEndpointToCenterParameterization(Q,I,p,g,N,L,T,y,U);break}c.push({command:q||D,points:H,start:{x:B,y:z},pathLength:this.calcLength(B,z,q||D,H)})}(D==="z"||D==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(n,s,r,o){let c,f,p,g;const b=sn;switch(r){case"L":return b.getLineLength(n,s,o[0],o[1]);case"C":return k1([n,o[0],o[2],o[4]],[s,o[1],o[3],o[5]],1);case"Q":return W1([n,o[0],o[2]],[s,o[1],o[3]],1);case"A":c=0;const _=o[4],R=o[5],E=o[4]+R;let D=Math.PI/180;if(Math.abs(_-E)<D&&(D=Math.abs(_-E)),f=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],_,0),R<0)for(g=_-D;g>E;g-=D)p=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),c+=b.getLineLength(f.x,f.y,p.x,p.y),f=p;else for(g=_+D;g<E;g+=D)p=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),c+=b.getLineLength(f.x,f.y,p.x,p.y),f=p;return p=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],E,0),c+=b.getLineLength(f.x,f.y,p.x,p.y),c}return 0}static convertEndpointToCenterParameterization(n,s,r,o,c,f,p,g,b){const _=b*(Math.PI/180),R=Math.cos(_)*(n-r)/2+Math.sin(_)*(s-o)/2,E=-1*Math.sin(_)*(n-r)/2+Math.cos(_)*(s-o)/2,D=R*R/(p*p)+E*E/(g*g);D>1&&(p*=Math.sqrt(D),g*=Math.sqrt(D));let S=Math.sqrt((p*p*(g*g)-p*p*(E*E)-g*g*(R*R))/(p*p*(E*E)+g*g*(R*R)));c===f&&(S*=-1),isNaN(S)&&(S=0);const G=S*p*E/g,q=S*-g*R/p,H=(n+r)/2+Math.cos(_)*G-Math.sin(_)*q,B=(s+o)/2+Math.sin(_)*G+Math.cos(_)*q,z=function(N){return Math.sqrt(N[0]*N[0]+N[1]*N[1])},w=function(N,L){return(N[0]*L[0]+N[1]*L[1])/(z(N)*z(L))},M=function(N,L){return(N[0]*L[1]<N[1]*L[0]?-1:1)*Math.acos(w(N,L))},A=M([1,0],[(R-G)/p,(E-q)/g]),T=[(R-G)/p,(E-q)/g],y=[(-1*R-G)/p,(-1*E-q)/g];let U=M(T,y);return w(T,y)<=-1&&(U=Math.PI),w(T,y)>=1&&(U=0),f===0&&U>0&&(U=U-2*Math.PI),f===1&&U<0&&(U=U+2*Math.PI),[H,B,p,g,A,U,_,f]}}sn.prototype.className="Path";sn.prototype._attrsAffectingSize=["data"];En(sn);rt.addGetterSetter(sn,"data");class qo extends Vr{_sceneFunc(n){super._sceneFunc(n);const s=Math.PI*2,r=this.points();let o=r;const c=this.tension()!==0&&r.length>4;c&&(o=this.getTensionPoints());const f=this.pointerLength(),p=r.length;let g,b;if(c){const E=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],r[p-2],r[p-1]],D=sn.calcLength(o[o.length-4],o[o.length-3],"C",E),S=sn.getPointOnQuadraticBezier(Math.min(1,1-f/D),E[0],E[1],E[2],E[3],E[4],E[5]);g=r[p-2]-S.x,b=r[p-1]-S.y}else g=r[p-2]-r[p-4],b=r[p-1]-r[p-3];const _=(Math.atan2(b,g)+s)%s,R=this.pointerWidth();this.pointerAtEnding()&&(n.save(),n.beginPath(),n.translate(r[p-2],r[p-1]),n.rotate(_),n.moveTo(0,0),n.lineTo(-f,R/2),n.lineTo(-f,-R/2),n.closePath(),n.restore(),this.__fillStroke(n)),this.pointerAtBeginning()&&(n.save(),n.beginPath(),n.translate(r[0],r[1]),c?(g=(o[0]+o[2])/2-r[0],b=(o[1]+o[3])/2-r[1]):(g=r[2]-r[0],b=r[3]-r[1]),n.rotate((Math.atan2(-b,-g)+s)%s),n.moveTo(0,0),n.lineTo(-f,R/2),n.lineTo(-f,-R/2),n.closePath(),n.restore(),this.__fillStroke(n))}__fillStroke(n){const s=this.dashEnabled();s&&(this.attrs.dashEnabled=!1,n.setLineDash([])),n.fillStrokeShape(this),s&&(this.attrs.dashEnabled=!0)}getSelfRect(){const n=super.getSelfRect(),s=this.pointerWidth()/2;return{x:n.x,y:n.y-s,width:n.width,height:n.height+s*2}}}qo.prototype.className="Arrow";En(qo);rt.addGetterSetter(qo,"pointerLength",10,Pt());rt.addGetterSetter(qo,"pointerWidth",10,Pt());rt.addGetterSetter(qo,"pointerAtBeginning",!1);rt.addGetterSetter(qo,"pointerAtEnding",!0);class _c extends zt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius()!==n/2&&this.radius(n/2)}setHeight(n){this.radius()!==n/2&&this.radius(n/2)}}_c.prototype._centroid=!0;_c.prototype.className="Circle";_c.prototype._attrsAffectingSize=["radius"];En(_c);rt.addGetterSetter(_c,"radius",0,Pt());class js extends zt{_sceneFunc(n){const s=this.radiusX(),r=this.radiusY();n.beginPath(),n.save(),s!==r&&n.scale(1,r/s),n.arc(0,0,s,0,Math.PI*2,!1),n.restore(),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(n){this.radiusX(n/2)}setHeight(n){this.radiusY(n/2)}}js.prototype.className="Ellipse";js.prototype._centroid=!0;js.prototype._attrsAffectingSize=["radiusX","radiusY"];En(js);rt.addComponentsGetterSetter(js,"radius",["x","y"]);rt.addGetterSetter(js,"radiusX",0,Pt());rt.addGetterSetter(js,"radiusY",0,Pt());let cl=class xv extends zt{constructor(n){super(n),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",s=>{this._removeImageLoad(s.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const n=this.image();n&&n.complete||n&&n.readyState===4||n&&n.addEventListener&&n.addEventListener("load",this._loadListener)}_removeImageLoad(n){n&&n.removeEventListener&&n.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const n=!!this.cornerRadius(),s=this.hasShadow();return n&&s?!0:super._useBufferCanvas(!0)}_sceneFunc(n){const s=this.getWidth(),r=this.getHeight(),o=this.cornerRadius(),c=this.attrs.image;let f;if(c){const p=this.attrs.cropWidth,g=this.attrs.cropHeight;p&&g?f=[c,this.cropX(),this.cropY(),p,g,0,0,s,r]:f=[c,0,0,s,r]}(this.hasFill()||this.hasStroke()||o)&&(n.beginPath(),o?pt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)),c&&(o&&n.clip(),n.drawImage.apply(n,f))}_hitFunc(n){const s=this.width(),r=this.height(),o=this.cornerRadius();n.beginPath(),o?pt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}getWidth(){var n,s,r;return(r=(n=this.attrs.width)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.width)!==null&&r!==void 0?r:0}getHeight(){var n,s,r;return(r=(n=this.attrs.height)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.height)!==null&&r!==void 0?r:0}static fromURL(n,s,r=null){const o=pt.createImageElement();o.onload=function(){const c=new xv({image:o});s(c)},o.onerror=r,o.crossOrigin="Anonymous",o.src=n}};cl.prototype.className="Image";cl.prototype._attrsAffectingSize=["image"];En(cl);rt.addGetterSetter(cl,"cornerRadius",0,m0(4));rt.addGetterSetter(cl,"image");rt.addComponentsGetterSetter(cl,"crop",["x","y","width","height"]);rt.addGetterSetter(cl,"cropX",0,Pt());rt.addGetterSetter(cl,"cropY",0,Pt());rt.addGetterSetter(cl,"cropWidth",0,Pt());rt.addGetterSetter(cl,"cropHeight",0,Pt());const Nv=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],f3="Change.konva",h3="none",op="up",up="right",cp="down",fp="left",d3=Nv.length;class Cp extends bc{constructor(n){super(n),this.on("add.konva",function(s){this._addListeners(s.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(n){let s=this,r;const o=function(){s._sync()};for(r=0;r<d3;r++)n.on(Nv[r]+f3,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let n=this.getText(),s=this.getTag(),r,o,c,f,p,g,b;if(n&&s){switch(r=n.width(),o=n.height(),c=s.pointerDirection(),f=s.pointerWidth(),b=s.pointerHeight(),p=0,g=0,c){case op:p=r/2,g=-1*b;break;case up:p=r+f,g=o/2;break;case cp:p=r/2,g=o+b;break;case fp:p=-1*f,g=o/2;break}s.setAttrs({x:-1*p,y:-1*g,width:r,height:o}),n.setAttrs({x:-1*p,y:-1*g})}}}Cp.prototype.className="Label";En(Cp);class Po extends zt{_sceneFunc(n){const s=this.width(),r=this.height(),o=this.pointerDirection(),c=this.pointerWidth(),f=this.pointerHeight(),p=this.cornerRadius();let g=0,b=0,_=0,R=0;typeof p=="number"?g=b=_=R=Math.min(p,s/2,r/2):(g=Math.min(p[0]||0,s/2,r/2),b=Math.min(p[1]||0,s/2,r/2),R=Math.min(p[2]||0,s/2,r/2),_=Math.min(p[3]||0,s/2,r/2)),n.beginPath(),n.moveTo(g,0),o===op&&(n.lineTo((s-c)/2,0),n.lineTo(s/2,-1*f),n.lineTo((s+c)/2,0)),n.lineTo(s-b,0),n.arc(s-b,b,b,Math.PI*3/2,0,!1),o===up&&(n.lineTo(s,(r-f)/2),n.lineTo(s+c,r/2),n.lineTo(s,(r+f)/2)),n.lineTo(s,r-R),n.arc(s-R,r-R,R,0,Math.PI/2,!1),o===cp&&(n.lineTo((s+c)/2,r),n.lineTo(s/2,r+f),n.lineTo((s-c)/2,r)),n.lineTo(_,r),n.arc(_,r-_,_,Math.PI/2,Math.PI,!1),o===fp&&(n.lineTo(0,(r+f)/2),n.lineTo(-1*c,r/2),n.lineTo(0,(r-f)/2)),n.lineTo(0,g),n.arc(g,g,g,Math.PI,Math.PI*3/2,!1),n.closePath(),n.fillStrokeShape(this)}getSelfRect(){let n=0,s=0,r=this.pointerWidth(),o=this.pointerHeight(),c=this.pointerDirection(),f=this.width(),p=this.height();return c===op?(s-=o,p+=o):c===cp?p+=o:c===fp?(n-=r*1.5,f+=r):c===up&&(f+=r*1.5),{x:n,y:s,width:f,height:p}}}Po.prototype.className="Tag";En(Po);rt.addGetterSetter(Po,"pointerDirection",h3);rt.addGetterSetter(Po,"pointerWidth",0,Pt());rt.addGetterSetter(Po,"pointerHeight",0,Pt());rt.addGetterSetter(Po,"cornerRadius",0,m0(4));class yh extends zt{_sceneFunc(n){const s=this.cornerRadius(),r=this.width(),o=this.height();n.beginPath(),s?pt.drawRoundedRectPath(n,r,o,s):n.rect(0,0,r,o),n.closePath(),n.fillStrokeShape(this)}}yh.prototype.className="Rect";En(yh);rt.addGetterSetter(yh,"cornerRadius",0,m0(4));class Ls extends zt{_sceneFunc(n){const s=this._getPoints(),r=this.radius(),o=this.sides(),c=this.cornerRadius();if(n.beginPath(),c)pt.drawRoundedPolygonPath(n,s,o,r,c);else{n.moveTo(s[0].x,s[0].y);for(let f=1;f<s.length;f++)n.lineTo(s[f].x,s[f].y)}n.closePath(),n.fillStrokeShape(this)}_getPoints(){const n=this.attrs.sides,s=this.attrs.radius||0,r=[];for(let o=0;o<n;o++)r.push({x:s*Math.sin(o*2*Math.PI/n),y:-1*s*Math.cos(o*2*Math.PI/n)});return r}getSelfRect(){const n=this._getPoints();let s=n[0].x,r=n[0].y,o=n[0].x,c=n[0].y;return n.forEach(f=>{s=Math.min(s,f.x),r=Math.max(r,f.x),o=Math.min(o,f.y),c=Math.max(c,f.y)}),{x:s,y:o,width:r-s,height:c-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Ls.prototype.className="RegularPolygon";Ls.prototype._centroid=!0;Ls.prototype._attrsAffectingSize=["radius"];En(Ls);rt.addGetterSetter(Ls,"radius",0,Pt());rt.addGetterSetter(Ls,"sides",0,Pt());rt.addGetterSetter(Ls,"cornerRadius",0,m0(4));const tm=Math.PI*2;class Yo extends zt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.innerRadius(),0,tm,!1),n.moveTo(this.outerRadius(),0),n.arc(0,0,this.outerRadius(),tm,0,!0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}Yo.prototype.className="Ring";Yo.prototype._centroid=!0;Yo.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(Yo);rt.addGetterSetter(Yo,"innerRadius",0,Pt());rt.addGetterSetter(Yo,"outerRadius",0,Pt());class Vl extends zt{constructor(n){super(n),this._updated=!0,this.anim=new wi(()=>{const s=this._updated;return this._updated=!1,s}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,c=this.animations()[s],f=this.frameOffsets(),p=c[o+0],g=c[o+1],b=c[o+2],_=c[o+3],R=this.image();if((this.hasFill()||this.hasStroke())&&(n.beginPath(),n.rect(0,0,b,_),n.closePath(),n.fillStrokeShape(this)),R)if(f){const E=f[s],D=r*2;n.drawImage(R,p,g,b,_,E[D+0],E[D+1],b,_)}else n.drawImage(R,p,g,b,_,0,0,b,_)}_hitFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,c=this.animations()[s],f=this.frameOffsets(),p=c[o+2],g=c[o+3];if(n.beginPath(),f){const b=f[s],_=r*2;n.rect(b[_+0],b[_+1],p,g)}else n.rect(0,0,p,g);n.closePath(),n.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const n=this;this.interval=setInterval(function(){n._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const n=this.getLayer();this.anim.setLayers(n),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const n=this.frameIndex(),s=this.animation(),r=this.animations(),o=r[s],c=o.length/4;n<c-1?this.frameIndex(n+1):this.frameIndex(0)}}Vl.prototype.className="Sprite";En(Vl);rt.addGetterSetter(Vl,"animation");rt.addGetterSetter(Vl,"animations");rt.addGetterSetter(Vl,"frameOffsets");rt.addGetterSetter(Vl,"image");rt.addGetterSetter(Vl,"frameIndex",0,Pt());rt.addGetterSetter(Vl,"frameRate",17,Pt());rt.backCompat(Vl,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class qs extends zt{_sceneFunc(n){const s=this.innerRadius(),r=this.outerRadius(),o=this.numPoints();n.beginPath(),n.moveTo(0,0-r);for(let c=1;c<o*2;c++){const f=c%2===0?r:s,p=f*Math.sin(c*Math.PI/o),g=-1*f*Math.cos(c*Math.PI/o);n.lineTo(p,g)}n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}qs.prototype.className="Star";qs.prototype._centroid=!0;qs.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(qs);rt.addGetterSetter(qs,"numPoints",5,Pt());rt.addGetterSetter(qs,"innerRadius",0,Pt());rt.addGetterSetter(qs,"outerRadius",0,Pt());function Bs(h){return[...h].reduce((n,s,r,o)=>{if(new RegExp("\\p{Emoji}","u").test(s)){const c=o[r+1];c&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(c)?(n.push(s+c),o[r+1]=""):n.push(s)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(s+(o[r+1]||""))?n.push(s+o[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(s)?n[n.length-1]+=s:s&&n.push(s);return n},[])}const gc="auto",g3="center",Dv="inherit",pc="justify",p3="Change.konva",m3="2d",em="-",Uv="left",v3="text",y3="Text",S3="top",b3="bottom",nm="middle",zv="normal",C3="px ",t0=" ",E3="right",am="rtl",T3="word",A3="char",im="none",pg="…",Bv=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],_3=Bv.length;function R3(h){return h.split(",").map(n=>{n=n.trim();const s=n.indexOf(" ")>=0,r=n.indexOf('"')>=0||n.indexOf("'")>=0;return s&&!r&&(n=`"${n}"`),n}).join(", ")}let e0;function mg(){return e0||(e0=pt.createCanvasElement().getContext(m3),e0)}function O3(h){h.fillText(this._partialText,this._partialTextX,this._partialTextY)}function M3(h){h.setAttr("miterLimit",2),h.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function x3(h){return h=h||{},!h.fillLinearGradientColorStops&&!h.fillRadialGradientColorStops&&!h.fillPatternImage&&(h.fill=h.fill||"black"),h}class dn extends zt{constructor(n){super(x3(n)),this._partialTextX=0,this._partialTextY=0;for(let s=0;s<_3;s++)this.on(Bv[s]+p3,this._setTextData);this._setTextData()}_sceneFunc(n){var s,r;const o=this.textArr,c=o.length;if(!this.text())return;let f=this.padding(),p=this.fontSize(),g=this.lineHeight()*p,b=this.verticalAlign(),_=this.direction(),R=0,E=this.align(),D=this.getWidth(),S=this.letterSpacing(),G=this.charRenderFunc(),q=this.fill(),H=this.textDecoration(),B=H.indexOf("underline")!==-1,z=H.indexOf("line-through")!==-1,w;_=_===Dv?n.direction:_;let M=g/2,A=nm;if(!Vt.legacyTextRendering){const T=this.measureSize("M");A="alphabetic";const y=(s=T.fontBoundingBoxAscent)!==null&&s!==void 0?s:T.actualBoundingBoxAscent,U=(r=T.fontBoundingBoxDescent)!==null&&r!==void 0?r:T.actualBoundingBoxDescent;M=(y-U)/2+g/2}for(_===am&&n.setAttr("direction",_),n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",A),n.setAttr("textAlign",Uv),b===nm?R=(this.getHeight()-c*g-f*2)/2:b===b3&&(R=this.getHeight()-c*g-f*2),n.translate(f,R+f),w=0;w<c;w++){let T=0,y=0;const U=o[w],N=U.text,L=U.width,Q=U.lastInParagraph;if(n.save(),E===E3?T+=D-L-f*2:E===g3&&(T+=(D-L-f*2)/2),B){n.save(),n.beginPath();const I=Vt.legacyTextRendering?Math.round(p/2):Math.round(p/4),K=T,V=M+y+I;n.moveTo(K,V);const x=E===pc&&!Q?D-f*2:L;n.lineTo(K+Math.round(x),V),n.lineWidth=p/15;const P=this._getLinearGradient();n.strokeStyle=P||q,n.stroke(),n.restore()}if(_!==am&&(S!==0||E===pc||G)){const I=N.split(" ").length-1,K=Bs(N);for(let V=0;V<K.length;V++){const x=K[V];if(x===" "&&!Q&&E===pc&&(T+=(D-f*2-L)/I),this._partialTextX=T,this._partialTextY=M+y,this._partialText=x,G){n.save();const Z=o.slice(0,w).reduce((at,F)=>at+Bs(F.text).length,0),k=V+Z;G({char:x,index:k,x:T,y:M+y,lineIndex:w,column:V,isLastInLine:Q,width:this.measureSize(x).width,context:n})}n.fillStrokeShape(this),G&&n.restore(),T+=this.measureSize(x).width+S}}else S!==0&&n.setAttr("letterSpacing",`${S}px`),this._partialTextX=T,this._partialTextY=M+y,this._partialText=N,n.fillStrokeShape(this);if(z){n.save(),n.beginPath();const I=Vt.legacyTextRendering?0:-Math.round(p/4),K=E===pc?0:T;n.moveTo(K,M+y+I);const V=E===pc&&!Q?D-f*2:L;n.lineTo(K+Math.round(V),M+y+I),n.lineWidth=p/15;const x=this._getLinearGradient();n.strokeStyle=x||q,n.stroke(),n.restore()}n.restore(),c>1&&(M+=g)}}_hitFunc(n){const s=this.getWidth(),r=this.getHeight();n.beginPath(),n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}setText(n){const s=pt._isString(n)?n:n==null?"":n+"";return this._setAttr(v3,s),this}getWidth(){return this.attrs.width===gc||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===gc||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return pt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(n){var s,r,o,c,f,p,g,b,_,R,E;let D=mg(),S=this.fontSize(),G;D.save(),D.font=this._getContextFont(),G=D.measureText(n),D.restore();const q=S/100;return{actualBoundingBoxAscent:(s=G.actualBoundingBoxAscent)!==null&&s!==void 0?s:71.58203125*q,actualBoundingBoxDescent:(r=G.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(o=G.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*q,actualBoundingBoxRight:(c=G.actualBoundingBoxRight)!==null&&c!==void 0?c:75.732421875*q,alphabeticBaseline:(f=G.alphabeticBaseline)!==null&&f!==void 0?f:0,emHeightAscent:(p=G.emHeightAscent)!==null&&p!==void 0?p:100*q,emHeightDescent:(g=G.emHeightDescent)!==null&&g!==void 0?g:-20*q,fontBoundingBoxAscent:(b=G.fontBoundingBoxAscent)!==null&&b!==void 0?b:91*q,fontBoundingBoxDescent:(_=G.fontBoundingBoxDescent)!==null&&_!==void 0?_:21*q,hangingBaseline:(R=G.hangingBaseline)!==null&&R!==void 0?R:72.80000305175781*q,ideographicBaseline:(E=G.ideographicBaseline)!==null&&E!==void 0?E:-21*q,width:G.width,height:S}}_getContextFont(){return this.fontStyle()+t0+this.fontVariant()+t0+(this.fontSize()+C3)+R3(this.fontFamily())}_addTextLine(n){this.align()===pc&&(n=n.trim());const r=this._getTextWidth(n);return this.textArr.push({text:n,width:r,lastInParagraph:!1})}_getTextWidth(n){const s=this.letterSpacing(),r=n.length;return mg().measureText(n).width+s*r}_setTextData(){let n=this.text().split(`
`),s=+this.fontSize(),r=0,o=this.lineHeight()*s,c=this.attrs.width,f=this.attrs.height,p=c!==gc&&c!==void 0,g=f!==gc&&f!==void 0,b=this.padding(),_=c-b*2,R=f-b*2,E=0,D=this.wrap(),S=D!==im,G=D!==A3&&S,q=this.ellipsis();this.textArr=[],mg().font=this._getContextFont();const H=q?this._getTextWidth(pg):0;for(let B=0,z=n.length;B<z;++B){let w=n[B],M=this._getTextWidth(w);if(p&&M>_)for(;w.length>0;){let A=0,T=Bs(w).length,y="",U=0;for(;A<T;){const N=A+T>>>1,L=Bs(w),Q=L.slice(0,N+1).join(""),I=this._getTextWidth(Q);(q&&g&&E+o>R?I+H:I)<=_?(A=N+1,y=Q,U=I):T=N}if(y){if(G){const Q=Bs(w),I=Bs(y),K=Q[I.length],V=K===t0||K===em;let x;if(V&&U<=_)x=I.length;else{const P=I.lastIndexOf(t0),Z=I.lastIndexOf(em);x=Math.max(P,Z)+1}x>0&&(A=x,y=Q.slice(0,A).join(""),U=this._getTextWidth(y))}if(y=y.trimRight(),this._addTextLine(y),r=Math.max(r,U),E+=o,this._shouldHandleEllipsis(E)){this._tryToAddEllipsisToLastLine();break}if(w=Bs(w).slice(A).join("").trimLeft(),w.length>0&&(M=this._getTextWidth(w),M<=_)){this._addTextLine(w),E+=o,r=Math.max(r,M);break}}else break}else this._addTextLine(w),E+=o,r=Math.max(r,M),this._shouldHandleEllipsis(E)&&B<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&E+o>R)break}this.textHeight=s,this.textWidth=r}_shouldHandleEllipsis(n){const s=+this.fontSize(),r=this.lineHeight()*s,o=this.attrs.height,c=o!==gc&&o!==void 0,f=this.padding(),p=o-f*2;return!(this.wrap()!==im)||c&&n+r>p}_tryToAddEllipsisToLastLine(){const n=this.attrs.width,s=n!==gc&&n!==void 0,r=this.padding(),o=n-r*2,c=this.ellipsis(),f=this.textArr[this.textArr.length-1];!f||!c||(s&&(this._getTextWidth(f.text+pg)<o||(f.text=f.text.slice(0,f.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(f.text+pg))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const n=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,s=this.hasShadow();return n&&s?!0:super._useBufferCanvas()}}dn.prototype._fillFunc=O3;dn.prototype._strokeFunc=M3;dn.prototype.className=y3;dn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];En(dn);rt.overWriteSetter(dn,"width",yp());rt.overWriteSetter(dn,"height",yp());rt.addGetterSetter(dn,"direction",Dv);rt.addGetterSetter(dn,"fontFamily","Arial");rt.addGetterSetter(dn,"fontSize",12,Pt());rt.addGetterSetter(dn,"fontStyle",zv);rt.addGetterSetter(dn,"fontVariant",zv);rt.addGetterSetter(dn,"padding",0,Pt());rt.addGetterSetter(dn,"align",Uv);rt.addGetterSetter(dn,"verticalAlign",S3);rt.addGetterSetter(dn,"lineHeight",1,Pt());rt.addGetterSetter(dn,"wrap",T3);rt.addGetterSetter(dn,"ellipsis",!1,ul());rt.addGetterSetter(dn,"letterSpacing",0,Pt());rt.addGetterSetter(dn,"text","",jo());rt.addGetterSetter(dn,"textDecoration","");rt.addGetterSetter(dn,"charRenderFunc",void 0);const N3="",Gv="normal";function wv(h){h.fillText(this.partialText,0,0)}function Hv(h){h.strokeText(this.partialText,0,0)}class Wn extends zt{constructor(n){super(n),this.dummyCanvas=pt.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return sn.getPathLength(this.dataArray)}_getPointAtLength(n){if(!this.attrs.data)return null;const s=this.pathLength;return n>s?null:sn.getPointAtLengthOfDataArray(n,this.dataArray)}_readDataAttribute(){this.dataArray=sn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(n){n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",this.textBaseline()),n.setAttr("textAlign","left"),n.save();const s=this.textDecoration(),r=this.fill(),o=this.fontSize(),c=this.glyphInfo,f=s.indexOf("underline")!==-1,p=s.indexOf("line-through")!==-1;f&&n.beginPath();for(let g=0;g<c.length;g++){n.save();const b=c[g].p0;n.translate(b.x,b.y),n.rotate(c[g].rotation),this.partialText=c[g].text,n.fillStrokeShape(this),f&&(g===0&&n.moveTo(0,o/2+1),n.lineTo(c[g].width,o/2+1)),n.restore()}if(f&&(n.strokeStyle=r,n.lineWidth=o/20,n.stroke()),p){n.beginPath();for(let g=0;g<c.length;g++){n.save();const b=c[g].p0;n.translate(b.x,b.y),n.rotate(c[g].rotation),g===0&&n.moveTo(0,0),n.lineTo(c[g].width,0),n.restore()}n.strokeStyle=r,n.lineWidth=o/20,n.stroke()}n.restore()}_hitFunc(n){n.beginPath();const s=this.glyphInfo;if(s.length>=1){const r=s[0].p0;n.moveTo(r.x,r.y)}for(let r=0;r<s.length;r++){const o=s[r].p1;n.lineTo(o.x,o.y)}n.setAttr("lineWidth",this.fontSize()),n.setAttr("strokeStyle",this.colorKey),n.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return pt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(n){return dn.prototype.setText.call(this,n)}_getContextFont(){return dn.prototype._getContextFont.call(this)}_getTextSize(n){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const o=r.measureText(n);return r.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const n=Bs(this.text()),s=[];let r=0;for(let R=0;R<n.length;R++)s.push({char:n[R],width:this._getTextSize(n[R]).width}),r+=s[R].width;const{height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=r,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const c=this.letterSpacing(),f=this.align(),p=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*c,0);let b=0;f==="center"&&(b=Math.max(0,this.pathLength/2-g/2)),f==="right"&&(b=Math.max(0,this.pathLength-g));let _=b;for(let R=0;R<s.length;R++){const E=this._getPointAtLength(_);if(!E)return;const D=s[R].char;let S=s[R].width+c;if(D===" "&&f==="justify"){const w=this.text().split(" ").length-1;S+=(this.pathLength-g)/w}const G=this._getPointAtLength(_+S);if(!G)return;const q=sn.getLineLength(E.x,E.y,G.x,G.y);let H=0;if(p)try{H=p(s[R-1].char,D)*this.fontSize()}catch{H=0}E.x+=H,G.x+=H,this.textWidth+=H;const B=sn.getPointOnLine(H+q/2,E.x,E.y,G.x,G.y),z=Math.atan2(G.y-E.y,G.x-E.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:n[R],rotation:z,p0:E,p1:G,width:q}),_+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const n=[];this.glyphInfo.forEach(function(b){n.push(b.p0.x),n.push(b.p0.y),n.push(b.p1.x),n.push(b.p1.y)});let s=n[0]||0,r=n[0]||0,o=n[1]||0,c=n[1]||0,f,p;for(let b=0;b<n.length/2;b++)f=n[b*2],p=n[b*2+1],s=Math.min(s,f),r=Math.max(r,f),o=Math.min(o,p),c=Math.max(c,p);const g=this.fontSize();return{x:s-g/2,y:o-g/2,width:r-s+g,height:c-o+g}}destroy(){return pt.releaseCanvas(this.dummyCanvas),super.destroy()}}Wn.prototype._fillFunc=wv;Wn.prototype._strokeFunc=Hv;Wn.prototype._fillFuncHit=wv;Wn.prototype._strokeFuncHit=Hv;Wn.prototype.className="TextPath";Wn.prototype._attrsAffectingSize=["text","fontSize","data"];En(Wn);rt.addGetterSetter(Wn,"data");rt.addGetterSetter(Wn,"fontFamily","Arial");rt.addGetterSetter(Wn,"fontSize",12,Pt());rt.addGetterSetter(Wn,"fontStyle",Gv);rt.addGetterSetter(Wn,"align","left");rt.addGetterSetter(Wn,"letterSpacing",0,Pt());rt.addGetterSetter(Wn,"textBaseline","middle");rt.addGetterSetter(Wn,"fontVariant",Gv);rt.addGetterSetter(Wn,"text",N3);rt.addGetterSetter(Wn,"textDecoration","");rt.addGetterSetter(Wn,"kerningFunc",void 0);const jv="tr-konva",D3=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(h=>h+`.${jv}`).join(" "),lm="nodesRect",U3=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],z3={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},B3="ontouchstart"in Vt._global;function G3(h,n,s){if(h==="rotater")return s;n+=pt.degToRad(z3[h]||0);const r=(pt.radToDeg(n)%360+360)%360;return pt._inRange(r,315+22.5,360)||pt._inRange(r,0,22.5)?"ns-resize":pt._inRange(r,45-22.5,45+22.5)?"nesw-resize":pt._inRange(r,90-22.5,90+22.5)?"ew-resize":pt._inRange(r,135-22.5,135+22.5)?"nwse-resize":pt._inRange(r,180-22.5,180+22.5)?"ns-resize":pt._inRange(r,225-22.5,225+22.5)?"nesw-resize":pt._inRange(r,270-22.5,270+22.5)?"ew-resize":pt._inRange(r,315-22.5,315+22.5)?"nwse-resize":(pt.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const u0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function w3(h){return{x:h.x+h.width/2*Math.cos(h.rotation)+h.height/2*Math.sin(-h.rotation),y:h.y+h.height/2*Math.cos(h.rotation)+h.width/2*Math.sin(h.rotation)}}function Lv(h,n,s){const r=s.x+(h.x-s.x)*Math.cos(n)-(h.y-s.y)*Math.sin(n),o=s.y+(h.x-s.x)*Math.sin(n)+(h.y-s.y)*Math.cos(n);return{...h,rotation:h.rotation+n,x:r,y:o}}function H3(h,n){const s=w3(h);return Lv(h,n,s)}function j3(h,n,s){let r=n;for(let o=0;o<h.length;o++){const c=Vt.getAngle(h[o]),f=Math.abs(c-n)%(Math.PI*2);Math.min(f,Math.PI*2-f)<s&&(r=c)}return r}let hp=0;class De extends bc{constructor(n){super(n),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(D3,this.update),this.getNode()&&this.update()}attachTo(n){return this.setNode(n),this}setNode(n){return pt.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([n])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return jv+this._id}setNodes(n=[]){this._nodes&&this._nodes.length&&this.detach();const s=n.filter(o=>o.isAncestorOf(this)?(pt.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=n=s,n.length===1&&this.useSingleNodeRotation()?this.rotation(n[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const c=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(o._attrsAffectingSize.length){const f=o._attrsAffectingSize.map(p=>p+"Change."+this._getEventNamespace()).join(" ");o.on(f,c)}o.on(U3.map(f=>f+`.${this._getEventNamespace()}`).join(" "),c),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,c),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(n){let s;n.on(`dragstart.${this._getEventNamespace()}`,r=>{s=n.getAbsolutePosition(),!this.isDragging()&&n!==this.findOne(".back")&&this.startDrag(r,!1)}),n.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!s)return;const o=n.getAbsolutePosition(),c=o.x-s.x,f=o.y-s.y;this.nodes().forEach(p=>{if(p===n||p.isDragging())return;const g=p.getAbsolutePosition();p.setAbsolutePosition({x:g.x+c,y:g.y+f}),p.startDrag(r)}),s=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(n=>{n.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(lm),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(lm,this.__getNodeRect)}__getNodeShape(n,s=this.rotation(),r){const o=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),c=n.getAbsoluteScale(r),f=n.getAbsolutePosition(r),p=o.x*c.x-n.offsetX()*c.x,g=o.y*c.y-n.offsetY()*c.y,b=(Vt.getAngle(n.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),_={x:f.x+p*Math.cos(b)+g*Math.sin(-b),y:f.y+g*Math.cos(b)+p*Math.sin(b),width:o.width*c.x,height:o.height*c.y,rotation:b};return Lv(_,-Vt.getAngle(s),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const s=[];this.nodes().map(b=>{const _=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),R=[{x:_.x,y:_.y},{x:_.x+_.width,y:_.y},{x:_.x+_.width,y:_.y+_.height},{x:_.x,y:_.y+_.height}],E=b.getAbsoluteTransform();R.forEach(function(D){const S=E.point(D);s.push(S)})});const r=new oi;r.rotate(-Vt.getAngle(this.rotation()));let o=1/0,c=1/0,f=-1/0,p=-1/0;s.forEach(function(b){const _=r.point(b);o===void 0&&(o=f=_.x,c=p=_.y),o=Math.min(o,_.x),c=Math.min(c,_.y),f=Math.max(f,_.x),p=Math.max(p,_.y)}),r.invert();const g=r.point({x:o,y:c});return{x:g.x,y:g.y,width:f-o,height:p-c,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),u0.forEach(n=>{this._createAnchor(n)}),this._createAnchor("rotater")}_createAnchor(n){const s=new yh({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:n+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:B3?10:"auto"}),r=this;s.on("mousedown touchstart",function(o){r._handleMouseDown(o)}),s.on("dragstart",o=>{s.stopDrag(),o.cancelBubble=!0}),s.on("dragend",o=>{o.cancelBubble=!0}),s.on("mouseenter",()=>{const o=Vt.getAngle(this.rotation()),c=this.rotateAnchorCursor(),f=G3(n,o,c);s.getStage().content&&(s.getStage().content.style.cursor=f),this._cursorChange=!0}),s.on("mouseout",()=>{s.getStage().content&&(s.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(s)}_createBack(){const n=new zt({name:"back",width:0,height:0,sceneFunc(s,r){const o=r.getParent(),c=o.padding();s.beginPath(),s.rect(-c,-c,r.width()+c*2,r.height()+c*2),s.moveTo(r.width()/2,-c),o.rotateEnabled()&&o.rotateLineVisible()&&s.lineTo(r.width()/2,-o.rotateAnchorOffset()*pt._sign(r.height())-c),s.fillStrokeShape(r)},hitFunc:(s,r)=>{if(!this.shouldOverdrawWholeArea())return;const o=this.padding();s.beginPath(),s.rect(-o,-o,r.width()+o*2,r.height()+o*2),s.fillStrokeShape(r)}});this.add(n),this._proxyDrag(n),n.on("dragstart",s=>{s.cancelBubble=!0}),n.on("dragmove",s=>{s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),this.on("dragmove",s=>{this.update()})}_handleMouseDown(n){if(this._transforming)return;this._movingAnchorName=n.target.name().split(" ")[0];const s=this._getNodeRect(),r=s.width,o=s.height,c=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));this.sin=Math.abs(o/c),this.cos=Math.abs(r/c),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const f=n.target.getAbsolutePosition(),p=n.target.getStage().getPointerPosition();this._anchorDragOffset={x:p.x-f.x,y:p.y-f.y},hp++,this._fire("transformstart",{evt:n.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:n.evt,target:g})})}_handleMouseMove(n){let s,r,o;const c=this.findOne("."+this._movingAnchorName),f=c.getStage();f.setPointersPositions(n);const p=f.getPointerPosition();let g={x:p.x-this._anchorDragOffset.x,y:p.y-this._anchorDragOffset.y};const b=c.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(b,g,n)),c.setAbsolutePosition(g);const _=c.getAbsolutePosition();if(b.x===_.x&&b.y===_.y)return;if(this._movingAnchorName==="rotater"){const B=this._getNodeRect();s=c.x()-B.width/2,r=-c.y()+B.height/2;let z=Math.atan2(-r,s)+Math.PI/2;B.height<0&&(z-=Math.PI);const M=Vt.getAngle(this.rotation())+z,A=Vt.getAngle(this.rotationSnapTolerance()),y=j3(this.rotationSnaps(),M,A)-B.rotation,U=H3(B,y);this._fitNodesInto(U,n);return}const R=this.shiftBehavior();let E;R==="inverted"?E=this.keepRatio()&&!n.shiftKey:R==="none"?E=this.keepRatio():E=this.keepRatio()||n.shiftKey;let D=this.centeredScaling()||n.altKey;if(this._movingAnchorName==="top-left"){if(E){const B=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(B.x-c.x(),2)+Math.pow(B.y-c.y(),2));const z=this.findOne(".top-left").x()>B.x?-1:1,w=this.findOne(".top-left").y()>B.y?-1:1;s=o*this.cos*z,r=o*this.sin*w,this.findOne(".top-left").x(B.x-s),this.findOne(".top-left").y(B.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(c.y());else if(this._movingAnchorName==="top-right"){if(E){const B=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(c.x()-B.x,2)+Math.pow(B.y-c.y(),2));const z=this.findOne(".top-right").x()<B.x?-1:1,w=this.findOne(".top-right").y()>B.y?-1:1;s=o*this.cos*z,r=o*this.sin*w,this.findOne(".top-right").x(B.x+s),this.findOne(".top-right").y(B.y-r)}var S=c.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(c.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(c.x());else if(this._movingAnchorName==="bottom-left"){if(E){const B=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(B.x-c.x(),2)+Math.pow(c.y()-B.y,2));const z=B.x<c.x()?-1:1,w=c.y()<B.y?-1:1;s=o*this.cos*z,r=o*this.sin*w,c.x(B.x-s),c.y(B.y+r)}S=c.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(c.y());else if(this._movingAnchorName==="bottom-right"){if(E){const B=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(c.x()-B.x,2)+Math.pow(c.y()-B.y,2));const z=this.findOne(".bottom-right").x()<B.x?-1:1,w=this.findOne(".bottom-right").y()<B.y?-1:1;s=o*this.cos*z,r=o*this.sin*w,this.findOne(".bottom-right").x(B.x+s),this.findOne(".bottom-right").y(B.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(D=this.centeredScaling()||n.altKey,D){const B=this.findOne(".top-left"),z=this.findOne(".bottom-right"),w=B.x(),M=B.y(),A=this.getWidth()-z.x(),T=this.getHeight()-z.y();z.move({x:-w,y:-M}),B.move({x:A,y:T})}const G=this.findOne(".top-left").getAbsolutePosition();s=G.x,r=G.y;const q=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),H=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:s,y:r,width:q,height:H,rotation:Vt.getAngle(this.rotation())},n)}_handleMouseUp(n){this._removeEvents(n)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(n){var s;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();hp--,this._fire("transformend",{evt:n,target:r}),(s=this.getLayer())===null||s===void 0||s.batchDraw(),r&&this._nodes.forEach(o=>{var c;o._fire("transformend",{evt:n,target:o}),(c=o.getLayer())===null||c===void 0||c.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(n,s){const r=this._getNodeRect(),o=1;if(pt._inRange(n.width,-this.padding()*2-o,o)){this.update();return}if(pt._inRange(n.height,-this.padding()*2-o,o)){this.update();return}const c=new oi;if(c.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("left")>=0){const E=c.point({x:-this.padding()*2,y:0});n.x+=E.x,n.y+=E.y,n.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y}else if(this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("right")>=0){const E=c.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.width+=this.padding()*2}if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("top")>=0){const E=c.point({x:0,y:-this.padding()*2});n.x+=E.x,n.y+=E.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}else if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const E=c.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}if(this.boundBoxFunc()){const E=this.boundBoxFunc()(r,n);E?n=E:pt.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,p=new oi;p.translate(r.x,r.y),p.rotate(r.rotation),p.scale(r.width/f,r.height/f);const g=new oi,b=n.width/f,_=n.height/f;this.flipEnabled()===!1?(g.translate(n.x,n.y),g.rotate(n.rotation),g.translate(n.width<0?n.width:0,n.height<0?n.height:0),g.scale(Math.abs(b),Math.abs(_))):(g.translate(n.x,n.y),g.rotate(n.rotation),g.scale(b,_));const R=g.multiply(p.invert());this._nodes.forEach(E=>{var D;if(!E.getStage())return;const S=E.getParent().getAbsoluteTransform(),G=E.getTransform().copy();G.translate(E.offsetX(),E.offsetY());const q=new oi;q.multiply(S.copy().invert()).multiply(R).multiply(S).multiply(G);const H=q.decompose();E.setAttrs(H),(D=E.getLayer())===null||D===void 0||D.batchDraw()}),this.rotation(pt._getRotation(n.rotation)),this._nodes.forEach(E=>{this._fire("transform",{evt:s,target:E}),E._fire("transform",{evt:s,target:E})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(n,s){this.findOne(n).setAttrs(s)}update(){var n;const s=this._getNodeRect();this.rotation(pt._getRotation(s.rotation));const r=s.width,o=s.height,c=this.enabledAnchors(),f=this.resizeEnabled(),p=this.padding(),g=this.anchorSize(),b=this.find("._anchor");b.forEach(R=>{R.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+p,offsetY:g/2+p,visible:f&&c.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:g/2+p,visible:f&&c.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:g/2-p,offsetY:g/2+p,visible:f&&c.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:g/2+p,visible:f&&c.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:o/2,offsetX:g/2-p,visible:f&&c.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:g/2+p,offsetY:g/2-p,visible:f&&c.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:o,offsetY:g/2-p,visible:f&&c.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:o,offsetX:g/2-p,offsetY:g/2-p,visible:f&&c.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*pt._sign(o)-p,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(R=>R.draggable()),x:0,y:0});const _=this.anchorStyleFunc();_&&b.forEach(R=>{_(R)}),(n=this.getLayer())===null||n===void 0||n.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const n=this.findOne("."+this._movingAnchorName);n&&n.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),bc.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return qt.prototype.toObject.call(this)}clone(n){return qt.prototype.clone.call(this,n)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}De.isTransforming=()=>hp>0;function L3(h){return h instanceof Array||pt.warn("enabledAnchors value should be an array"),h instanceof Array&&h.forEach(function(n){u0.indexOf(n)===-1&&pt.warn("Unknown anchor name: "+n+". Available names are: "+u0.join(", "))}),h||[]}De.prototype.className="Transformer";En(De);rt.addGetterSetter(De,"enabledAnchors",u0,L3);rt.addGetterSetter(De,"flipEnabled",!0,ul());rt.addGetterSetter(De,"resizeEnabled",!0);rt.addGetterSetter(De,"anchorSize",10,Pt());rt.addGetterSetter(De,"rotateEnabled",!0);rt.addGetterSetter(De,"rotateLineVisible",!0);rt.addGetterSetter(De,"rotationSnaps",[]);rt.addGetterSetter(De,"rotateAnchorOffset",50,Pt());rt.addGetterSetter(De,"rotateAnchorCursor","crosshair");rt.addGetterSetter(De,"rotationSnapTolerance",5,Pt());rt.addGetterSetter(De,"borderEnabled",!0);rt.addGetterSetter(De,"anchorStroke","rgb(0, 161, 255)");rt.addGetterSetter(De,"anchorStrokeWidth",1,Pt());rt.addGetterSetter(De,"anchorFill","white");rt.addGetterSetter(De,"anchorCornerRadius",0,Pt());rt.addGetterSetter(De,"borderStroke","rgb(0, 161, 255)");rt.addGetterSetter(De,"borderStrokeWidth",1,Pt());rt.addGetterSetter(De,"borderDash");rt.addGetterSetter(De,"keepRatio",!0);rt.addGetterSetter(De,"shiftBehavior","default");rt.addGetterSetter(De,"centeredScaling",!1);rt.addGetterSetter(De,"ignoreStroke",!1);rt.addGetterSetter(De,"padding",0,Pt());rt.addGetterSetter(De,"nodes");rt.addGetterSetter(De,"node");rt.addGetterSetter(De,"boundBoxFunc");rt.addGetterSetter(De,"anchorDragBoundFunc");rt.addGetterSetter(De,"anchorStyleFunc");rt.addGetterSetter(De,"shouldOverdrawWholeArea",!1);rt.addGetterSetter(De,"useSingleNodeRotation",!0);rt.backCompat(De,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Xr extends zt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),n.lineTo(0,0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Xr.prototype.className="Wedge";Xr.prototype._centroid=!0;Xr.prototype._attrsAffectingSize=["radius"];En(Xr);rt.addGetterSetter(Xr,"radius",0,Pt());rt.addGetterSetter(Xr,"angle",0,Pt());rt.addGetterSetter(Xr,"clockwise",!1);rt.backCompat(Xr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function rm(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const q3=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],P3=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Y3(h,n){const s=h.data,r=h.width,o=h.height;let c,f,p,g,b,_,R,E,D,S,G,q,H,B,z,w,M,A,T,y;const U=n+n+1,N=r-1,L=o-1,Q=n+1,I=Q*(Q+1)/2,K=new rm,V=q3[n],x=P3[n];let P=null,Z=K,k=null,at=null;for(let F=1;F<U;F++)Z=Z.next=new rm,F===Q&&(P=Z);Z.next=K,p=f=0;for(let F=0;F<o;F++){q=H=B=z=g=b=_=R=0,E=Q*(w=s[f]),D=Q*(M=s[f+1]),S=Q*(A=s[f+2]),G=Q*(T=s[f+3]),g+=I*w,b+=I*M,_+=I*A,R+=I*T,Z=K;for(let lt=0;lt<Q;lt++)Z.r=w,Z.g=M,Z.b=A,Z.a=T,Z=Z.next;for(let lt=1;lt<Q;lt++)c=f+((N<lt?N:lt)<<2),g+=(Z.r=w=s[c])*(y=Q-lt),b+=(Z.g=M=s[c+1])*y,_+=(Z.b=A=s[c+2])*y,R+=(Z.a=T=s[c+3])*y,q+=w,H+=M,B+=A,z+=T,Z=Z.next;k=K,at=P;for(let lt=0;lt<r;lt++)s[f+3]=T=R*V>>x,T!==0?(T=255/T,s[f]=(g*V>>x)*T,s[f+1]=(b*V>>x)*T,s[f+2]=(_*V>>x)*T):s[f]=s[f+1]=s[f+2]=0,g-=E,b-=D,_-=S,R-=G,E-=k.r,D-=k.g,S-=k.b,G-=k.a,c=p+((c=lt+n+1)<N?c:N)<<2,q+=k.r=s[c],H+=k.g=s[c+1],B+=k.b=s[c+2],z+=k.a=s[c+3],g+=q,b+=H,_+=B,R+=z,k=k.next,E+=w=at.r,D+=M=at.g,S+=A=at.b,G+=T=at.a,q-=w,H-=M,B-=A,z-=T,at=at.next,f+=4;p+=r}for(let F=0;F<r;F++){H=B=z=q=b=_=R=g=0,f=F<<2,E=Q*(w=s[f]),D=Q*(M=s[f+1]),S=Q*(A=s[f+2]),G=Q*(T=s[f+3]),g+=I*w,b+=I*M,_+=I*A,R+=I*T,Z=K;for(let it=0;it<Q;it++)Z.r=w,Z.g=M,Z.b=A,Z.a=T,Z=Z.next;let lt=r;for(let it=1;it<=n;it++)f=lt+F<<2,g+=(Z.r=w=s[f])*(y=Q-it),b+=(Z.g=M=s[f+1])*y,_+=(Z.b=A=s[f+2])*y,R+=(Z.a=T=s[f+3])*y,q+=w,H+=M,B+=A,z+=T,Z=Z.next,it<L&&(lt+=r);f=F,k=K,at=P;for(let it=0;it<o;it++)c=f<<2,s[c+3]=T=R*V>>x,T>0?(T=255/T,s[c]=(g*V>>x)*T,s[c+1]=(b*V>>x)*T,s[c+2]=(_*V>>x)*T):s[c]=s[c+1]=s[c+2]=0,g-=E,b-=D,_-=S,R-=G,E-=k.r,D-=k.g,S-=k.b,G-=k.a,c=F+((c=it+Q)<L?c:L)*r<<2,g+=q+=k.r=s[c],b+=H+=k.g=s[c+1],_+=B+=k.b=s[c+2],R+=z+=k.a=s[c+3],k=k.next,E+=w=at.r,D+=M=at.g,S+=A=at.b,G+=T=at.a,q-=w,H-=M,B-=A,z-=T,at=at.next,f+=r}}const V3=function(n){const s=Math.round(this.blurRadius());s>0&&Y3(n,s)};rt.addGetterSetter(qt,"blurRadius",0,Pt(),rt.afterSetFilter);const X3=function(h){const n=this.brightness()*255,s=h.data,r=s.length;for(let o=0;o<r;o+=4)s[o]+=n,s[o+1]+=n,s[o+2]+=n};rt.addGetterSetter(qt,"brightness",0,Pt(),rt.afterSetFilter);const I3=function(h){const n=this.brightness(),s=h.data,r=s.length;for(let o=0;o<r;o+=4)s[o]=Math.min(255,s[o]*n),s[o+1]=Math.min(255,s[o+1]*n),s[o+2]=Math.min(255,s[o+2]*n)},Q3=function(h){const n=Math.pow((this.contrast()+100)/100,2),s=h.data,r=s.length;let o=150,c=150,f=150;for(let p=0;p<r;p+=4)o=s[p],c=s[p+1],f=s[p+2],o/=255,o-=.5,o*=n,o+=.5,o*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,f/=255,f-=.5,f*=n,f+=.5,f*=255,o=o<0?0:o>255?255:o,c=c<0?0:c>255?255:c,f=f<0?0:f>255?255:f,s[p]=o,s[p+1]=c,s[p+2]=f};rt.addGetterSetter(qt,"contrast",0,Pt(),rt.afterSetFilter);const K3=function(h){var n,s,r,o,c,f,p,g,b;const _=h.data,R=h.width,E=h.height,D=Math.min(1,Math.max(0,(s=(n=this.embossStrength)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:.5)),S=Math.min(1,Math.max(0,(o=(r=this.embossWhiteLevel)===null||r===void 0?void 0:r.call(this))!==null&&o!==void 0?o:.5)),q=(p={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(f=(c=this.embossDirection)===null||c===void 0?void 0:c.call(this))!==null&&f!==void 0?f:"top-left"])!==null&&p!==void 0?p:315,H=!!((b=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&b!==void 0&&b),B=D*10,z=S*255,w=q*Math.PI/180,M=Math.cos(w),A=Math.sin(w),T=128/1020*B,y=new Uint8ClampedArray(_),U=new Float32Array(R*E);for(let K=0,V=0;V<_.length;V+=4,K++)U[K]=.2126*y[V]+.7152*y[V+1]+.0722*y[V+2];const N=[-1,0,1,-2,0,2,-1,0,1],L=[-1,-2,-1,0,0,0,1,2,1],Q=[-R-1,-R,-R+1,-1,0,1,R-1,R,R+1],I=K=>K<0?0:K>255?255:K;for(let K=1;K<E-1;K++)for(let V=1;V<R-1;V++){const x=K*R+V;let P=0,Z=0;P+=U[x+Q[0]]*N[0],Z+=U[x+Q[0]]*L[0],P+=U[x+Q[1]]*N[1],Z+=U[x+Q[1]]*L[1],P+=U[x+Q[2]]*N[2],Z+=U[x+Q[2]]*L[2],P+=U[x+Q[3]]*N[3],Z+=U[x+Q[3]]*L[3],P+=U[x+Q[5]]*N[5],Z+=U[x+Q[5]]*L[5],P+=U[x+Q[6]]*N[6],Z+=U[x+Q[6]]*L[6],P+=U[x+Q[7]]*N[7],Z+=U[x+Q[7]]*L[7],P+=U[x+Q[8]]*N[8],Z+=U[x+Q[8]]*L[8];const k=M*P+A*Z,at=I(z+k*T),F=x*4;if(H){const lt=at-z;_[F]=I(y[F]+lt),_[F+1]=I(y[F+1]+lt),_[F+2]=I(y[F+2]+lt),_[F+3]=y[F+3]}else _[F]=_[F+1]=_[F+2]=at,_[F+3]=y[F+3]}for(let K=0;K<R;K++){let V=K*4,x=((E-1)*R+K)*4;_[V]=y[V],_[V+1]=y[V+1],_[V+2]=y[V+2],_[V+3]=y[V+3],_[x]=y[x],_[x+1]=y[x+1],_[x+2]=y[x+2],_[x+3]=y[x+3]}for(let K=1;K<E-1;K++){let V=K*R*4,x=(K*R+(R-1))*4;_[V]=y[V],_[V+1]=y[V+1],_[V+2]=y[V+2],_[V+3]=y[V+3],_[x]=y[x],_[x+1]=y[x+1],_[x+2]=y[x+2],_[x+3]=y[x+3]}return h};rt.addGetterSetter(qt,"embossStrength",.5,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"embossWhiteLevel",.5,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"embossDirection","top-left",void 0,rt.afterSetFilter);rt.addGetterSetter(qt,"embossBlend",!1,void 0,rt.afterSetFilter);function vg(h,n,s,r,o){const c=s-n,f=o-r;if(c===0)return r+f/2;if(f===0)return r;let p=(h-n)/c;return p=f*p+r,p}const Z3=function(h){const n=h.data,s=n.length;let r=n[0],o=r,c,f=n[1],p=f,g,b=n[2],_=b,R;const E=this.enhance();if(E===0)return;for(let z=0;z<s;z+=4)c=n[z+0],c<r?r=c:c>o&&(o=c),g=n[z+1],g<f?f=g:g>p&&(p=g),R=n[z+2],R<b?b=R:R>_&&(_=R);o===r&&(o=255,r=0),p===f&&(p=255,f=0),_===b&&(_=255,b=0);let D,S,G,q,H,B;if(E>0)D=o+E*(255-o),S=r-E*(r-0),G=p+E*(255-p),q=f-E*(f-0),H=_+E*(255-_),B=b-E*(b-0);else{const z=(o+r)*.5;D=o+E*(o-z),S=r+E*(r-z);const w=(p+f)*.5;G=p+E*(p-w),q=f+E*(f-w);const M=(_+b)*.5;H=_+E*(_-M),B=b+E*(b-M)}for(let z=0;z<s;z+=4)n[z+0]=vg(n[z+0],r,o,S,D),n[z+1]=vg(n[z+1],f,p,q,G),n[z+2]=vg(n[z+2],b,_,B,H)};rt.addGetterSetter(qt,"enhance",0,Pt(),rt.afterSetFilter);const J3=function(h){const n=h.data,s=n.length;for(let r=0;r<s;r+=4){const o=.34*n[r]+.5*n[r+1]+.16*n[r+2];n[r]=o,n[r+1]=o,n[r+2]=o}};rt.addGetterSetter(qt,"hue",0,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"saturation",0,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"luminance",0,Pt(),rt.afterSetFilter);const F3=function(h){const n=h.data,s=n.length,r=1,o=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,f=this.luminance()*127,p=r*o*Math.cos(c*Math.PI/180),g=r*o*Math.sin(c*Math.PI/180),b=.299*r+.701*p+.167*g,_=.587*r-.587*p+.33*g,R=.114*r-.114*p-.497*g,E=.299*r-.299*p-.328*g,D=.587*r+.413*p+.035*g,S=.114*r-.114*p+.293*g,G=.299*r-.3*p+1.25*g,q=.587*r-.586*p-1.05*g,H=.114*r+.886*p-.2*g;let B,z,w,M;for(let A=0;A<s;A+=4)B=n[A+0],z=n[A+1],w=n[A+2],M=n[A+3],n[A+0]=b*B+_*z+R*w+f,n[A+1]=E*B+D*z+S*w+f,n[A+2]=G*B+q*z+H*w+f,n[A+3]=M},k3=function(h){const n=h.data,s=n.length,r=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,f=r*o*Math.cos(c*Math.PI/180),p=r*o*Math.sin(c*Math.PI/180),g=.299*r+.701*f+.167*p,b=.587*r-.587*f+.33*p,_=.114*r-.114*f-.497*p,R=.299*r-.299*f-.328*p,E=.587*r+.413*f+.035*p,D=.114*r-.114*f+.293*p,S=.299*r-.3*f+1.25*p,G=.587*r-.586*f-1.05*p,q=.114*r+.886*f-.2*p;for(let H=0;H<s;H+=4){const B=n[H+0],z=n[H+1],w=n[H+2],M=n[H+3];n[H+0]=g*B+b*z+_*w,n[H+1]=R*B+E*z+D*w,n[H+2]=S*B+G*z+q*w,n[H+3]=M}};rt.addGetterSetter(qt,"hue",0,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"saturation",0,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"value",0,Pt(),rt.afterSetFilter);const W3=function(h){const n=h.data,s=n.length;for(let r=0;r<s;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]},$3=function(h,n,s){const r=h.data,o=n.data,c=h.width,f=h.height,p=s.polarCenterX||c/2,g=s.polarCenterY||f/2;let b=Math.sqrt(p*p+g*g),_=c-p,R=f-g;const E=Math.sqrt(_*_+R*R);b=E>b?E:b;const D=f,S=c,G=360/S*Math.PI/180;for(let q=0;q<S;q+=1){const H=Math.sin(q*G),B=Math.cos(q*G);for(let z=0;z<D;z+=1){_=Math.floor(p+b*z/D*B),R=Math.floor(g+b*z/D*H);let w=(R*c+_)*4;const M=r[w+0],A=r[w+1],T=r[w+2],y=r[w+3];w=(q+z*c)*4,o[w+0]=M,o[w+1]=A,o[w+2]=T,o[w+3]=y}}},t5=function(h,n,s){const r=h.data,o=n.data,c=h.width,f=h.height,p=s.polarCenterX||c/2,g=s.polarCenterY||f/2;let b=Math.sqrt(p*p+g*g),_=c-p,R=f-g;const E=Math.sqrt(_*_+R*R);b=E>b?E:b;const D=f,S=c,G=0;let q,H;for(_=0;_<c;_+=1)for(R=0;R<f;R+=1){const B=_-p,z=R-g,w=Math.sqrt(B*B+z*z)*D/b;let M=(Math.atan2(z,B)*180/Math.PI+360+G)%360;M=M*S/360,q=Math.floor(M),H=Math.floor(w);let A=(H*c+q)*4;const T=r[A+0],y=r[A+1],U=r[A+2],N=r[A+3];A=(R*c+_)*4,o[A+0]=T,o[A+1]=y,o[A+2]=U,o[A+3]=N}},e5=function(h){const n=h.width,s=h.height;let r,o,c,f,p,g,b,_,R,E,D=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),G=Math.floor(n*(S%360)/360);if(D<1)return;const q=pt.createCanvasElement();q.width=n,q.height=s;const H=q.getContext("2d").getImageData(0,0,n,s);pt.releaseCanvas(q),$3(h,H,{polarCenterX:n/2,polarCenterY:s/2});let B=n/Math.pow(2,D);for(;B<=8;)B=B*2,D-=1;B=Math.ceil(B);let z=B,w=0,M=z,A=1;for(G+B>n&&(w=z,M=0,A=-1),o=0;o<s;o+=1)for(r=w;r!==M;r+=A)c=Math.round(r+G)%n,R=(n*o+c)*4,p=H.data[R+0],g=H.data[R+1],b=H.data[R+2],_=H.data[R+3],E=(n*o+r)*4,H.data[E+0]=p,H.data[E+1]=g,H.data[E+2]=b,H.data[E+3]=_;for(o=0;o<s;o+=1)for(z=Math.floor(B),f=0;f<D;f+=1){for(r=0;r<z+1;r+=1)R=(n*o+r)*4,p=H.data[R+0],g=H.data[R+1],b=H.data[R+2],_=H.data[R+3],E=(n*o+z*2-r-1)*4,H.data[E+0]=p,H.data[E+1]=g,H.data[E+2]=b,H.data[E+3]=_;z*=2}t5(H,h,{})};rt.addGetterSetter(qt,"kaleidoscopePower",2,Pt(),rt.afterSetFilter);rt.addGetterSetter(qt,"kaleidoscopeAngle",0,Pt(),rt.afterSetFilter);function n0(h,n,s){let r=(s*h.width+n)*4;const o=[];return o.push(h.data[r++],h.data[r++],h.data[r++],h.data[r++]),o}function ah(h,n){return Math.sqrt(Math.pow(h[0]-n[0],2)+Math.pow(h[1]-n[1],2)+Math.pow(h[2]-n[2],2))}function n5(h){const n=[0,0,0];for(let s=0;s<h.length;s++)n[0]+=h[s][0],n[1]+=h[s][1],n[2]+=h[s][2];return n[0]/=h.length,n[1]/=h.length,n[2]/=h.length,n}function a5(h,n){const s=n0(h,0,0),r=n0(h,h.width-1,0),o=n0(h,0,h.height-1),c=n0(h,h.width-1,h.height-1),f=n||10;if(ah(s,r)<f&&ah(r,c)<f&&ah(c,o)<f&&ah(o,s)<f){const p=n5([r,s,c,o]),g=[];for(let b=0;b<h.width*h.height;b++){const _=ah(p,[h.data[b*4],h.data[b*4+1],h.data[b*4+2]]);g[b]=_<f?0:255}return g}}function i5(h,n){for(let s=0;s<h.width*h.height;s++)h.data[4*s+3]=n[s]}function l5(h,n,s){const r=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(r.length)),c=Math.floor(o/2),f=[];for(let p=0;p<s;p++)for(let g=0;g<n;g++){const b=p*n+g;let _=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const D=p+R-c,S=g+E-c;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,q=r[R*o+E];_+=h[G]*q}}f[b]=_===2040?255:0}return f}function r5(h,n,s){const r=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(r.length)),c=Math.floor(o/2),f=[];for(let p=0;p<s;p++)for(let g=0;g<n;g++){const b=p*n+g;let _=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const D=p+R-c,S=g+E-c;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,q=r[R*o+E];_+=h[G]*q}}f[b]=_>=1020?255:0}return f}function s5(h,n,s){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(r.length)),c=Math.floor(o/2),f=[];for(let p=0;p<s;p++)for(let g=0;g<n;g++){const b=p*n+g;let _=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const D=p+R-c,S=g+E-c;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,q=r[R*o+E];_+=h[G]*q}}f[b]=_}return f}const o5=function(h){const n=this.threshold();let s=a5(h,n);return s&&(s=l5(s,h.width,h.height),s=r5(s,h.width,h.height),s=s5(s,h.width,h.height),i5(h,s)),h};rt.addGetterSetter(qt,"threshold",0,Pt(),rt.afterSetFilter);const u5=function(h){const n=this.noise()*255,s=h.data,r=s.length,o=n/2;for(let c=0;c<r;c+=4)s[c+0]+=o-2*o*Math.random(),s[c+1]+=o-2*o*Math.random(),s[c+2]+=o-2*o*Math.random()};rt.addGetterSetter(qt,"noise",.2,Pt(),rt.afterSetFilter);const c5=function(h){let n=Math.ceil(this.pixelSize()),s=h.width,r=h.height,o=Math.ceil(s/n),c=Math.ceil(r/n),f=h.data;if(n<=0){pt.error("pixelSize value can not be <= 0");return}for(let p=0;p<o;p+=1)for(let g=0;g<c;g+=1){let b=0,_=0,R=0,E=0;const D=p*n,S=D+n,G=g*n,q=G+n;let H=0;for(let B=D;B<S;B+=1)if(!(B>=s))for(let z=G;z<q;z+=1){if(z>=r)continue;const w=(s*z+B)*4;b+=f[w+0],_+=f[w+1],R+=f[w+2],E+=f[w+3],H+=1}b=b/H,_=_/H,R=R/H,E=E/H;for(let B=D;B<S;B+=1)if(!(B>=s))for(let z=G;z<q;z+=1){if(z>=r)continue;const w=(s*z+B)*4;f[w+0]=b,f[w+1]=_,f[w+2]=R,f[w+3]=E}}};rt.addGetterSetter(qt,"pixelSize",8,Pt(),rt.afterSetFilter);const f5=function(h){const n=Math.round(this.levels()*254)+1,s=h.data,r=s.length,o=255/n;for(let c=0;c<r;c+=1)s[c]=Math.floor(s[c]/o)*o};rt.addGetterSetter(qt,"levels",.5,Pt(),rt.afterSetFilter);const h5=function(h){const n=h.data,s=n.length,r=this.red(),o=this.green(),c=this.blue();for(let f=0;f<s;f+=4){const p=(.34*n[f]+.5*n[f+1]+.16*n[f+2])/255;n[f]=p*r,n[f+1]=p*o,n[f+2]=p*c,n[f+3]=n[f+3]}};rt.addGetterSetter(qt,"red",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});rt.addGetterSetter(qt,"green",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});rt.addGetterSetter(qt,"blue",0,ov,rt.afterSetFilter);const d5=function(h){const n=h.data,s=n.length,r=this.red(),o=this.green(),c=this.blue(),f=this.alpha();for(let p=0;p<s;p+=4){const g=1-f;n[p]=r*f+n[p]*g,n[p+1]=o*f+n[p+1]*g,n[p+2]=c*f+n[p+2]*g}};rt.addGetterSetter(qt,"red",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});rt.addGetterSetter(qt,"green",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});rt.addGetterSetter(qt,"blue",0,ov,rt.afterSetFilter);rt.addGetterSetter(qt,"alpha",1,function(h){return this._filterUpToDate=!1,h>1?1:h<0?0:h});const g5=function(h){const n=h.data,s=n.length;for(let r=0;r<s;r+=4){const o=n[r+0],c=n[r+1],f=n[r+2];n[r+0]=Math.min(255,o*.393+c*.769+f*.189),n[r+1]=Math.min(255,o*.349+c*.686+f*.168),n[r+2]=Math.min(255,o*.272+c*.534+f*.131)}},p5=function(h){const s=h.data;for(let r=0;r<s.length;r+=4){const o=s[r],c=s[r+1],f=s[r+2];.2126*o+.7152*c+.0722*f>=128&&(s[r]=255-o,s[r+1]=255-c,s[r+2]=255-f)}return h},m5=function(h){const n=this.threshold()*255,s=h.data,r=s.length;for(let o=0;o<r;o+=1)s[o]=s[o]<n?0:255};rt.addGetterSetter(qt,"threshold",.5,Pt(),rt.afterSetFilter);Cc.Util._assign(Cc,{Arc:Yr,Arrow:qo,Circle:_c,Ellipse:js,Image:cl,Label:Cp,Tag:Po,Line:Vr,Path:sn,Rect:yh,RegularPolygon:Ls,Ring:Yo,Sprite:Vl,Star:qs,Text:dn,TextPath:Wn,Transformer:De,Wedge:Xr,Filters:{Blur:V3,Brightness:I3,Brighten:X3,Contrast:Q3,Emboss:K3,Enhance:Z3,Grayscale:J3,HSL:F3,HSV:k3,Invert:W3,Kaleidoscope:e5,Mask:o5,Noise:u5,Pixelate:c5,Posterize:f5,RGB:h5,RGBA:d5,Sepia:g5,Solarize:p5,Threshold:m5}});var yg={exports:{}},Sg={exports:{}},bg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function v5(){return sm||(sm=1,(function(h){function n(x,P){var Z=x.length;x.push(P);t:for(;0<Z;){var k=Z-1>>>1,at=x[k];if(0<o(at,P))x[k]=P,x[Z]=at,Z=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var P=x[0],Z=x.pop();if(Z!==P){x[0]=Z;t:for(var k=0,at=x.length,F=at>>>1;k<F;){var lt=2*(k+1)-1,it=x[lt],X=lt+1,J=x[X];if(0>o(it,Z))X<at&&0>o(J,it)?(x[k]=J,x[X]=Z,k=X):(x[k]=it,x[lt]=Z,k=lt);else if(X<at&&0>o(J,Z))x[k]=J,x[X]=Z,k=X;else break t}}return P}function o(x,P){var Z=x.sortIndex-P.sortIndex;return Z!==0?Z:x.id-P.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;h.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();h.unstable_now=function(){return f.now()-p}}var g=[],b=[],_=1,R=null,E=3,D=!1,S=!1,G=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function w(x){for(var P=s(b);P!==null;){if(P.callback===null)r(b);else if(P.startTime<=x)r(b),P.sortIndex=P.expirationTime,n(g,P);else break;P=s(b)}}function M(x){if(G=!1,w(x),!S)if(s(g)!==null)S=!0,A||(A=!0,Q());else{var P=s(b);P!==null&&V(M,P.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return q?!0:!(h.unstable_now()-U<y)}function L(){if(q=!1,A){var x=h.unstable_now();U=x;var P=!0;try{t:{S=!1,G&&(G=!1,B(T),T=-1),D=!0;var Z=E;try{e:{for(w(x),R=s(g);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var at=k(R.expirationTime<=x);if(x=h.unstable_now(),typeof at=="function"){R.callback=at,w(x),P=!0;break e}R===s(g)&&r(g),w(x)}else r(g);R=s(g)}if(R!==null)P=!0;else{var F=s(b);F!==null&&V(M,F.startTime-x),P=!1}}break t}finally{R=null,E=Z,D=!1}P=void 0}}finally{P?Q():A=!1}}}var Q;if(typeof z=="function")Q=function(){z(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,K=I.port2;I.port1.onmessage=L,Q=function(){K.postMessage(null)}}else Q=function(){H(L,0)};function V(x,P){T=H(function(){x(h.unstable_now())},P)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(x){x.callback=null},h.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},h.unstable_getCurrentPriorityLevel=function(){return E},h.unstable_next=function(x){switch(E){case 1:case 2:case 3:var P=3;break;default:P=E}var Z=E;E=P;try{return x()}finally{E=Z}},h.unstable_requestPaint=function(){q=!0},h.unstable_runWithPriority=function(x,P){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Z=E;E=x;try{return P()}finally{E=Z}},h.unstable_scheduleCallback=function(x,P,Z){var k=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?k+Z:k):Z=k,x){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Z+at,x={id:_++,callback:P,priorityLevel:x,startTime:Z,expirationTime:at,sortIndex:-1},Z>k?(x.sortIndex=Z,n(b,x),s(g)===null&&x===s(b)&&(G?(B(T),T=-1):G=!0,V(M,Z-k))):(x.sortIndex=at,n(g,x),S||D||(S=!0,A||(A=!0,Q()))),x},h.unstable_shouldYield=N,h.unstable_wrapCallback=function(x){var P=E;return function(){var Z=E;E=P;try{return x.apply(this,arguments)}finally{E=Z}}}})(Cg)),Cg}var om;function y5(){return om||(om=1,bg.exports=v5()),bg.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function S5(){return um||(um=1,(function(h){h.exports=function(n){function s(a,i,d,m){return new Ou(a,i,d,m)}function r(){}function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)i+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(a){var i=a,d=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(d=i.return),a=i.return;while(a)}return i.tag===3?d:null}function f(a){if(c(a)!==a)throw Error(o(188))}function p(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(o(188));return i!==a?null:a}for(var d=a,m=i;;){var O=d.return;if(O===null)break;var j=O.alternate;if(j===null){if(m=O.return,m!==null){d=m;continue}break}if(O.child===j.child){for(j=O.child;j;){if(j===d)return f(O),a;if(j===m)return f(O),i;j=j.sibling}throw Error(o(188))}if(d.return!==m.return)d=O,m=j;else{for(var tt=!1,ot=O.child;ot;){if(ot===d){tt=!0,d=O,m=j;break}if(ot===m){tt=!0,m=O,d=j;break}ot=ot.sibling}if(!tt){for(ot=j.child;ot;){if(ot===d){tt=!0,d=j,m=O;break}if(ot===m){tt=!0,m=j,d=O;break}ot=ot.sibling}if(!tt)throw Error(o(189))}}if(d.alternate!==m)throw Error(o(190))}if(d.tag!==3)throw Error(o(188));return d.stateNode.current===d?a:i}function g(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=g(a),i!==null)return i;a=a.sibling}return null}function b(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(a.tag!==4&&(i=b(a),i!==null))return i;a=a.sibling}return null}function _(a){return a===null||typeof a!="object"?null:(a=So&&a[So]||a["@@iterator"],typeof a=="function"?a:null)}function R(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===bo?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case or:return"Fragment";case mo:return"Profiler";case ur:return"StrictMode";case Fi:return"Suspense";case ki:return"SuspenseList";case Ol:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case Zi:return"Portal";case Ji:return(a.displayName||"Context")+".Provider";case vo:return(a._context.displayName||"Context")+".Consumer";case Uu:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case zu:return i=a.displayName||null,i!==null?i:R(a.type)||"Memo";case Wi:i=a._payload,a=a._init;try{return R(a(i))}catch{}}return null}function E(a){return{current:a}}function D(a){0>mr||(a.current=Oo[mr],Oo[mr]=null,mr--)}function S(a,i){mr++,Oo[mr]=a.current,a.current=i}function G(a){return a>>>=0,a===0?32:31-(Cd(a)/Ed|0)|0}function q(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function H(a,i,d){var m=a.pendingLanes;if(m===0)return 0;var O=0,j=a.suspendedLanes,tt=a.pingedLanes;a=a.warmLanes;var ot=m&134217727;return ot!==0?(m=ot&~j,m!==0?O=q(m):(tt&=ot,tt!==0?O=q(tt):d||(d=ot&~a,d!==0&&(O=q(d))))):(ot=m&~j,ot!==0?O=q(ot):tt!==0?O=q(tt):d||(d=m&~a,d!==0&&(O=q(d)))),O===0?0:i!==0&&i!==O&&(i&j)===0&&(j=O&-O,d=i&-i,j>=d||j===32&&(d&4194048)!==0)?i:O}function B(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function z(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w(){var a=_i;return _i<<=1,(_i&4194048)===0&&(_i=256),a}function M(){var a=Mo;return Mo<<=1,(Mo&62914560)===0&&(Mo=4194304),a}function A(a){for(var i=[],d=0;31>d;d++)i.push(a);return i}function T(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function y(a,i,d,m,O,j){var tt=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var ot=a.entanglements,bt=a.expirationTimes,Ut=a.hiddenUpdates;for(d=tt&~d;0<d;){var Gt=31-ua(d),It=1<<Gt;ot[Gt]=0,bt[Gt]=-1;var Qt=Ut[Gt];if(Qt!==null)for(Ut[Gt]=null,Gt=0;Gt<Qt.length;Gt++){var de=Qt[Gt];de!==null&&(de.lane&=-536870913)}d&=~It}m!==0&&U(a,m,0),j!==0&&O===0&&a.tag!==0&&(a.suspendedLanes|=j&~(tt&~i))}function U(a,i,d){a.pendingLanes|=i,a.suspendedLanes&=~i;var m=31-ua(i);a.entangledLanes|=i,a.entanglements[m]=a.entanglements[m]|1073741824|d&4194090}function N(a,i){var d=a.entangledLanes|=i;for(a=a.entanglements;d;){var m=31-ua(d),O=1<<m;O&i|a[m]&i&&(a[m]|=i),d&=~O}}function L(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Q(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function I(a){if(typeof Mn=="function"&&Kn(a),Ca&&typeof Ca.setStrictMode=="function")try{Ca.setStrictMode(vs,a)}catch{}}function K(a){if(Fu===void 0)try{throw Error()}catch(d){var i=d.stack.trim().match(/\n( *(at )?)/);Fu=i&&i[1]||"",Gf=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fu+a+Gf}function V(a,i){if(!a||vr)return"";vr=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(de){var Qt=de}Reflect.construct(a,[],It)}else{try{It.call()}catch(de){Qt=de}a.call(It.prototype)}}else{try{throw Error()}catch(de){Qt=de}(It=a())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(de){if(de&&Qt&&typeof de.stack=="string")return[de.stack,Qt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=m.DetermineComponentFrameRoot(),tt=j[0],ot=j[1];if(tt&&ot){var bt=tt.split(`
`),Ut=ot.split(`
`);for(O=m=0;m<bt.length&&!bt[m].includes("DetermineComponentFrameRoot");)m++;for(;O<Ut.length&&!Ut[O].includes("DetermineComponentFrameRoot");)O++;if(m===bt.length||O===Ut.length)for(m=bt.length-1,O=Ut.length-1;1<=m&&0<=O&&bt[m]!==Ut[O];)O--;for(;1<=m&&0<=O;m--,O--)if(bt[m]!==Ut[O]){if(m!==1||O!==1)do if(m--,O--,0>O||bt[m]!==Ut[O]){var Gt=`
`+bt[m].replace(" at new "," at ");return a.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",a.displayName)),Gt}while(1<=m&&0<=O);break}}}finally{vr=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?K(d):""}function x(a){switch(a.tag){case 26:case 27:case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return V(a.type,!1);case 11:return V(a.type.render,!1);case 1:return V(a.type,!0);case 31:return K("Activity");default:return""}}function P(a){try{var i="";do i+=x(a),a=a.return;while(a);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Z(a,i){if(typeof a=="object"&&a!==null){var d=wf.get(a);return d!==void 0?d:(i={value:a,source:i,stack:P(i)},wf.set(a,i),i)}return{value:a,source:i,stack:P(i)}}function k(a,i){el[yr++]=Sr,el[yr++]=ku,ku=a,Sr=i}function at(a,i,d){Ea[Ha++]=Ri,Ea[Ha++]=ii,Ea[Ha++]=Bl,Bl=a;var m=Ri;a=ii;var O=32-ua(m)-1;m&=~(1<<O),d+=1;var j=32-ua(i)+O;if(30<j){var tt=O-O%5;j=(m&(1<<tt)-1).toString(32),m>>=tt,O-=tt,Ri=1<<32-ua(i)+O|d<<O|m,ii=j+a}else Ri=1<<j|d<<O|m,ii=a}function F(a){a.return!==null&&(k(a,1),at(a,1,0))}function lt(a){for(;a===ku;)ku=el[--yr],el[yr]=null,Sr=el[--yr],el[yr]=null;for(;a===Bl;)Bl=Ea[--Ha],Ea[Ha]=null,ii=Ea[--Ha],Ea[Ha]=null,Ri=Ea[--Ha],Ea[Ha]=null}function it(a,i){S(nl,i),S(br,a),S(Un,null),a=ff(i),D(Un),S(Un,a)}function X(){D(Un),D(br),D(nl)}function J(a){a.memoizedState!==null&&S(ys,a);var i=Un.current,d=Ml(i,a.type);i!==d&&(S(br,a),S(Un,d))}function $(a){br.current===a&&(D(Un),D(br)),ys.current===a&&(D(ys),Si?Ka._currentValue=tl:Ka._currentValue2=tl)}function nt(a){var i=Error(o(418,""));throw fe(Z(i,a)),ri}function gt(a,i){if(!an)throw Error(o(175));ud(a.stateNode,a.type,a.memoizedProps,i,a)||nt(a)}function Rt(a){for(Hn=a.return;Hn;)switch(Hn.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:Hn=Hn.return}}function Ht(a){if(!an||a!==Hn)return!1;if(!Ue)return Rt(a),Ue=!0,!1;var i=a.tag;if(Sn?i!==3&&i!==27&&(i!==5||Xu(a.type)&&!Nl(a.type,a.memoizedProps))&&bn&&nt(a):i!==3&&(i!==5||Xu(a.type)&&!Nl(a.type,a.memoizedProps))&&bn&&nt(a),Rt(a),i===13){if(!an)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));bn=cd(a)}else bn=Sn&&i===27?ld(a.type,bn):Hn?_f(a.stateNode):null;return!0}function Kt(){an&&(bn=Hn=null,Ue=!1)}function Ft(){var a=al;return a!==null&&(na===null?na=a:na.push.apply(na,a),al=null),a}function fe(a){al===null?al=[a]:al.push(a)}function At(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}function Bt(a,i,d){Si?(S(Wu,i._currentValue),i._currentValue=d):(S(Wu,i._currentValue2),i._currentValue2=d)}function $t(a){var i=Wu.current;Si?a._currentValue=i:a._currentValue2=i,D(Wu)}function kt(a,i,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),a===d)break;a=a.return}}function _t(a,i,d,m){var O=a.child;for(O!==null&&(O.return=a);O!==null;){var j=O.dependencies;if(j!==null){var tt=O.child;j=j.firstContext;t:for(;j!==null;){var ot=j;j=O;for(var bt=0;bt<i.length;bt++)if(ot.context===i[bt]){j.lanes|=d,ot=j.alternate,ot!==null&&(ot.lanes|=d),kt(j.return,d,a),m||(tt=null);break t}j=ot.next}}else if(O.tag===18){if(tt=O.return,tt===null)throw Error(o(341));tt.lanes|=d,j=tt.alternate,j!==null&&(j.lanes|=d),kt(tt,d,a),tt=null}else tt=O.child;if(tt!==null)tt.return=O;else for(tt=O;tt!==null;){if(tt===a){tt=null;break}if(O=tt.sibling,O!==null){O.return=tt.return,tt=O;break}tt=tt.return}O=tt}}function jt(a,i,d,m){a=null;for(var O=i,j=!1;O!==null;){if(!j){if((O.flags&524288)!==0)j=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var tt=O.alternate;if(tt===null)throw Error(o(387));if(tt=tt.memoizedProps,tt!==null){var ot=O.type;ca(O.pendingProps.value,tt.value)||(a!==null?a.push(ot):a=[ot])}}else if(O===ys.current){if(tt=O.alternate,tt===null)throw Error(o(387));tt.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(a!==null?a.push(Ka):a=[Ka])}O=O.return}a!==null&&_t(i,a,d,m),i.flags|=262144}function ve(a){for(a=a.firstContext;a!==null;){var i=a.context;if(!ca(Si?i._currentValue:i._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function ne(a){Gl=a,Zn=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ue(a){return Ae(Gl,a)}function we(a,i){return Gl===null&&ne(a),Ae(a,i)}function Ae(a,i){var d=Si?i._currentValue:i._currentValue2;if(i={context:i,memoizedValue:d,next:null},Zn===null){if(a===null)throw Error(o(308));Zn=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Zn=Zn.next=i;return d}function on(){return{controller:new Hf,data:new Map,refCount:0}}function Tn(a){a.refCount--,a.refCount===0&&_d($u,function(){a.controller.abort()})}function pn(a){a!==Ss&&a.next===null&&(Ss===null?Ve=Ss=a:Ss=Ss.next=a),No=!0,jf||(jf=!0,Lt())}function ut(a,i){if(!Cr&&No){Cr=!0;do for(var d=!1,m=Ve;m!==null;){if(a!==0){var O=m.pendingLanes;if(O===0)var j=0;else{var tt=m.suspendedLanes,ot=m.pingedLanes;j=(1<<31-ua(42|a)+1)-1,j&=O&~(tt&~ot),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(d=!0,ae(m,j))}else j=Se,j=H(m,m===Xe?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==yi),(j&3)===0||B(m,j)||(d=!0,ae(m,j));m=m.next}while(d);Cr=!1}}function xt(){ft()}function ft(){No=jf=!1;var a=0;ja!==0&&(Ba()&&(a=ja),ja=0);for(var i=wa(),d=null,m=Ve;m!==null;){var O=m.next,j=Mt(m,i);j===0?(m.next=null,d===null?Ve=O:d.next=O,O===null&&(Ss=d)):(d=m,(a!==0||(j&3)!==0)&&(No=!0)),m=O}ut(a)}function Mt(a,i){for(var d=a.suspendedLanes,m=a.pingedLanes,O=a.expirationTimes,j=a.pendingLanes&-62914561;0<j;){var tt=31-ua(j),ot=1<<tt,bt=O[tt];bt===-1?((ot&d)===0||(ot&m)!==0)&&(O[tt]=z(ot,i)):bt<=i&&(a.expiredLanes|=ot),j&=~ot}if(i=Xe,d=Se,d=H(a,a===i?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==yi),m=a.callbackNode,d===0||a===i&&(xe===2||xe===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Zu(m),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||B(a,d)){if(i=d&-d,i===a.callbackPriority)return i;switch(m!==null&&Zu(m),Q(d)){case 2:case 8:d=Ad;break;case 32:d=zf;break;case 268435456:d=Bf;break;default:d=zf}return m=Xt.bind(null,a),d=xo(d,m),a.callbackPriority=i,a.callbackNode=d,i}return m!==null&&m!==null&&Zu(m),a.callbackPriority=2,a.callbackNode=null,2}function Xt(a,i){if(He!==0&&He!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(ir()&&a.callbackNode!==d)return null;var m=Se;return m=H(a,a===Xe?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==yi),m===0?null:(Da(a,m,i),Mt(a,wa()),a.callbackNode!=null&&a.callbackNode===d?Xt.bind(null,a):null)}function ae(a,i){if(ir())return null;Da(a,i,!0)}function Lt(){Gu?To(function(){(me&6)!==0?xo(Uf,xt):ft()}):xo(Uf,xt)}function mn(){return ja===0&&(ja=w()),ja}function ie(a,i){if(bs===null){var d=bs=[];tc=0,Oi=mn(),fa={status:"pending",value:void 0,then:function(m){d.push(m)}}}return tc++,i.then(un,un),i}function un(){if(--tc===0&&bs!==null){fa!==null&&(fa.status="fulfilled");var a=bs;bs=null,Oi=0,fa=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function _e(a,i){var d=[],m={status:"pending",value:null,reason:null,then:function(O){d.push(O)}};return a.then(function(){m.status="fulfilled",m.value=i;for(var O=0;O<d.length;O++)(0,d[O])(i)},function(O){for(m.status="rejected",m.reason=O,O=0;O<d.length;O++)(0,d[O])(void 0)}),m}function Hi(){var a=il.current;return a!==null?a:Xe.pooledCache}function Oa(a,i){i===null?S(il,il.current):S(il,i.pool)}function Ys(){var a=Hi();return a===null?null:{parent:Si?Ke._currentValue:Ke._currentValue2,pool:a}}function Xl(a,i){if(ca(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var d=Object.keys(a),m=Object.keys(i);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var O=d[m];if(!Rd.call(i,O)||!ca(a[O],i[O]))return!1}return!0}function fl(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Il(){}function Ir(a,i,d){switch(d=a[d],d===void 0?a.push(i):d!==i&&(i.then(Il,Il),i=d),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Rc(a),a;default:if(typeof i.status=="string")i.then(Il,Il);else{if(a=Xe,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(m){if(i.status==="pending"){var O=i;O.status="fulfilled",O.value=m}},function(m){if(i.status==="pending"){var O=i;O.status="rejected",O.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Rc(a),a}throw Ta=i,Er}}function Sh(){if(Ta===null)throw Error(o(459));var a=Ta;return Ta=null,a}function Rc(a){if(a===Er||a===Tr)throw Error(o(483))}function Qr(){for(var a=wl,i=ec=wl=0;i<a;){var d=Be[i];Be[i++]=null;var m=Be[i];Be[i++]=null;var O=Be[i];Be[i++]=null;var j=Be[i];if(Be[i++]=null,m!==null&&O!==null){var tt=m.pending;tt===null?O.next=O:(O.next=tt.next,tt.next=O),m.pending=O}j!==0&&Mc(d,O,j)}}function hl(a,i,d,m){Be[wl++]=a,Be[wl++]=i,Be[wl++]=d,Be[wl++]=m,ec|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Oc(a,i,d,m){return hl(a,i,d,m),Vs(a)}function Ql(a,i){return hl(a,null,null,i),Vs(a)}function Mc(a,i,d){a.lanes|=d;var m=a.alternate;m!==null&&(m.lanes|=d);for(var O=!1,j=a.return;j!==null;)j.childLanes|=d,m=j.alternate,m!==null&&(m.childLanes|=d),j.tag===22&&(a=j.stateNode,a===null||a._visibility&1||(O=!0)),a=j,j=j.return;return a.tag===3?(j=a.stateNode,O&&i!==null&&(O=31-ua(d),a=j.hiddenUpdates,m=a[O],m===null?a[O]=[i]:m.push(i),i.lane=d|536870912),j):null}function Vs(a){if(50<zi)throw zi=0,rc=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}function Xs(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Is(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ji(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Li(a,i,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(me&2)!==0){var O=m.pending;return O===null?i.next=i:(i.next=O.next,O.next=i),m.pending=i,i=Vs(a),Mc(a,null,d),i}return hl(a,m,i,d),Vs(a)}function Pa(a,i,d){if(i=i.updateQueue,i!==null&&(i=i.shared,(d&4194048)!==0)){var m=i.lanes;m&=a.pendingLanes,d|=m,i.lanes=d,N(a,d)}}function Nn(a,i){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var O=null,j=null;if(d=d.firstBaseUpdate,d!==null){do{var tt={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};j===null?O=j=tt:j=j.next=tt,d=d.next}while(d!==null);j===null?O=j=i:j=j.next=i}else O=j=i;d={baseState:m.baseState,firstBaseUpdate:O,lastBaseUpdate:j,shared:m.shared,callbacks:m.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=i:a.next=i,d.lastBaseUpdate=i}function Bn(){if(qf){var a=fa;if(a!==null)throw a}}function ci(a,i,d,m){qf=!1;var O=a.updateQueue;$e=!1;var j=O.firstBaseUpdate,tt=O.lastBaseUpdate,ot=O.shared.pending;if(ot!==null){O.shared.pending=null;var bt=ot,Ut=bt.next;bt.next=null,tt===null?j=Ut:tt.next=Ut,tt=bt;var Gt=a.alternate;Gt!==null&&(Gt=Gt.updateQueue,ot=Gt.lastBaseUpdate,ot!==tt&&(ot===null?Gt.firstBaseUpdate=Ut:ot.next=Ut,Gt.lastBaseUpdate=bt))}if(j!==null){var It=O.baseState;tt=0,Gt=Ut=bt=null,ot=j;do{var Qt=ot.lane&-536870913,de=Qt!==ot.lane;if(de?(Se&Qt)===Qt:(m&Qt)===Qt){Qt!==0&&Qt===Oi&&(qf=!0),Gt!==null&&(Gt=Gt.next={lane:0,tag:ot.tag,payload:ot.payload,callback:null,next:null});t:{var qa=a,As=ot;Qt=i;var Ll=d;switch(As.tag){case 1:if(qa=As.payload,typeof qa=="function"){It=qa.call(Ll,It,Qt);break t}It=qa;break t;case 3:qa.flags=qa.flags&-65537|128;case 0:if(qa=As.payload,Qt=typeof qa=="function"?qa.call(Ll,It,Qt):qa,Qt==null)break t;It=Nu({},It,Qt);break t;case 2:$e=!0}}Qt=ot.callback,Qt!==null&&(a.flags|=64,de&&(a.flags|=8192),de=O.callbacks,de===null?O.callbacks=[Qt]:de.push(Qt))}else de={lane:Qt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},Gt===null?(Ut=Gt=de,bt=It):Gt=Gt.next=de,tt|=Qt;if(ot=ot.next,ot===null){if(ot=O.shared.pending,ot===null)break;de=ot,ot=de.next,de.next=null,O.lastBaseUpdate=de,O.shared.pending=null}}while(!0);Gt===null&&(bt=It),O.baseState=bt,O.firstBaseUpdate=Ut,O.lastBaseUpdate=Gt,j===null&&(O.shared.lanes=0),da|=tt,a.lanes=tt,a.memoizedState=It}}function Io(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function bh(a,i){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Io(d[a],i)}function Ch(a,i){a=Fa,S(zo,a),S(Ar,i),Fa=a|i.baseLanes}function Qo(){S(zo,Fa),S(Ar,Ar.current)}function Kl(){Fa=zo.current,D(Ar),D(zo)}function cn(){throw Error(o(321))}function dl(a,i){if(i===null)return!1;for(var d=0;d<i.length&&d<a.length;d++)if(!ca(a[d],i[d]))return!1;return!0}function gl(a,i,d,m,O,j){return Ge=j,ee=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=a===null||a.memoizedState===null?Pf:Mi,Rr=!1,j=d(m,O),Rr=!1,_r&&(j=Zl(i,d,m,O)),Kr(a),j}function Kr(a){te.H=Jn;var i=Te!==null&&Te.next!==null;if(Ge=0,Cn=Te=ee=null,Bo=!1,jn=0,ta=null,i)throw Error(o(300));a===null||zn||(a=a.dependencies,a!==null&&ve(a)&&(zn=!0))}function Zl(a,i,d,m){ee=a;var O=0;do{if(_r&&(ta=null),jn=0,_r=!1,25<=O)throw Error(o(301));if(O+=1,Cn=Te=null,a.updateQueue!=null){var j=a.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}te.H=Mr,j=i(d,m)}while(_r);return j}function Gn(){var a=te.H,i=a.useState()[0];return i=typeof i.then=="function"?Zr(i):i,a=a.useState()[0],(Te!==null?Te.memoizedState:null)!==a&&(ee.flags|=1024),i}function Ko(){var a=Or!==0;return Or=0,a}function Zo(a,i,d){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~d}function qi(a){if(Bo){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Bo=!1}Ge=0,Cn=Te=ee=null,_r=!1,jn=Or=0,ta=null}function Dn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ee.memoizedState=Cn=a:Cn=Cn.next=a,Cn}function An(){if(Te===null){var a=ee.alternate;a=a!==null?a.memoizedState:null}else a=Te.next;var i=Cn===null?ee.memoizedState:Cn.next;if(i!==null)Cn=i,Te=a;else{if(a===null)throw ee.alternate===null?Error(o(467)):Error(o(310));Te=a,a={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Cn===null?ee.memoizedState=Cn=a:Cn=Cn.next=a}return Cn}function Jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zr(a){var i=jn;return jn+=1,ta===null&&(ta=[]),a=Ir(ta,a,i),i=ee,(Cn===null?i.memoizedState:Cn.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?Pf:Mi),a}function Fo(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zr(a);if(a.$$typeof===Ji)return ue(a)}throw Error(o(438,String(a)))}function Jr(a){var i=null,d=ee.updateQueue;if(d!==null&&(i=d.memoCache),i==null){var m=ee.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(O){return O.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),d===null&&(d=Jo(),ee.updateQueue=d),d.memoCache=i,d=i.data[i.index],d===void 0)for(d=i.data[i.index]=Array(a),m=0;m<a;m++)d[m]=yo;return i.index++,d}function Ya(a,i){return typeof i=="function"?i(a):i}function Va(a){var i=An();return pa(i,Te,a)}function pa(a,i,d){var m=a.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=d;var O=a.baseQueue,j=m.pending;if(j!==null){if(O!==null){var tt=O.next;O.next=j.next,j.next=tt}i.baseQueue=O=j,m.pending=null}if(j=a.baseState,O===null)a.memoizedState=j;else{i=O.next;var ot=tt=null,bt=null,Ut=i,Gt=!1;do{var It=Ut.lane&-536870913;if(It!==Ut.lane?(Se&It)===It:(Ge&It)===It){var Qt=Ut.revertLane;if(Qt===0)bt!==null&&(bt=bt.next={lane:0,revertLane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),It===Oi&&(Gt=!0);else if((Ge&Qt)===Qt){Ut=Ut.next,Qt===Oi&&(Gt=!0);continue}else It={lane:0,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},bt===null?(ot=bt=It,tt=j):bt=bt.next=It,ee.lanes|=Qt,da|=Qt;It=Ut.action,Rr&&d(j,It),j=Ut.hasEagerState?Ut.eagerState:d(j,It)}else Qt={lane:It,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},bt===null?(ot=bt=Qt,tt=j):bt=bt.next=Qt,ee.lanes|=It,da|=It;Ut=Ut.next}while(Ut!==null&&Ut!==i);if(bt===null?tt=j:bt.next=ot,!ca(j,a.memoizedState)&&(zn=!0,Gt&&(d=fa,d!==null)))throw d;a.memoizedState=j,a.baseState=tt,a.baseQueue=bt,m.lastRenderedState=j}return O===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function ko(a){var i=An(),d=i.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=a;var m=d.dispatch,O=d.pending,j=i.memoizedState;if(O!==null){d.pending=null;var tt=O=O.next;do j=a(j,tt.action),tt=tt.next;while(tt!==O);ca(j,i.memoizedState)||(zn=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),d.lastRenderedState=j}return[j,m]}function Eh(a,i,d){var m=ee,O=An(),j=Ue;if(j){if(d===void 0)throw Error(o(407));d=d()}else d=i();var tt=!ca((Te||O).memoizedState,d);tt&&(O.memoizedState=d,zn=!0),O=O.queue;var ot=Qs.bind(null,m,O,a);if(fi(2048,8,ot,[a]),O.getSnapshot!==i||tt||Cn!==null&&Cn.memoizedState.tag&1){if(m.flags|=2048,ma(9,Fr(),xc.bind(null,m,O,d,i),null),Xe===null)throw Error(o(349));j||(Ge&124)!==0||Wo(m,i,d)}return d}function Wo(a,i,d){a.flags|=16384,a={getSnapshot:i,value:d},i=ee.updateQueue,i===null?(i=Jo(),ee.updateQueue=i,i.stores=[a]):(d=i.stores,d===null?i.stores=[a]:d.push(a))}function xc(a,i,d,m){i.value=d,i.getSnapshot=m,Th(i)&&Ma(a)}function Qs(a,i,d){return d(function(){Th(i)&&Ma(a)})}function Th(a){var i=a.getSnapshot;a=a.value;try{var d=i();return!ca(a,d)}catch{return!0}}function Ma(a){var i=Ql(a,2);i!==null&&Sa(i,a,2)}function Ks(a){var i=Dn();if(typeof a=="function"){var d=a;if(a=d(),Rr){I(!0);try{d()}finally{I(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:a},i}function Nc(a,i,d,m){return a.baseState=d,pa(a,Te,typeof m=="function"?m:Ya)}function Dc(a,i,d,m,O){if(vl(a))throw Error(o(485));if(a=i.action,a!==null){var j={payload:O,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(tt){j.listeners.push(tt)}};te.T!==null?d(!0):j.isTransition=!1,m(j),d=i.pending,d===null?(j.next=i.pending=j,Jl(i,j)):(j.next=d.next,i.pending=d.next=j)}}function Jl(a,i){var d=i.action,m=i.payload,O=a.state;if(i.isTransition){var j=te.T,tt={};te.T=tt;try{var ot=d(O,m),bt=te.S;bt!==null&&bt(tt,ot),Uc(a,i,ot)}catch(Ut){pl(a,i,Ut)}finally{te.T=j}}else try{j=d(O,m),Uc(a,i,j)}catch(Ut){pl(a,i,Ut)}}function Uc(a,i,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){zc(a,i,m)},function(m){return pl(a,i,m)}):zc(a,i,d)}function zc(a,i,d){i.status="fulfilled",i.value=d,Ah(i),a.state=d,i=a.pending,i!==null&&(d=i.next,d===i?a.pending=null:(d=d.next,i.next=d,Jl(a,d)))}function pl(a,i,d){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=d,Ah(i),i=i.next;while(i!==m)}a.action=null}function Ah(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function Bc(a,i){return i}function Gc(a,i){if(Ue){var d=Xe.formState;if(d!==null){t:{var m=ee;if(Ue){if(bn){var O=ad(bn,li);if(O){bn=_f(O),m=id(O);break t}}nt(m)}m=!1}m&&(i=d[0])}}d=Dn(),d.memoizedState=d.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:i},d.queue=m,d=Rh.bind(null,ee,m),m.dispatch=d,m=Ks(!1);var j=Ws.bind(null,ee,!1,m.queue);return m=Dn(),O={state:i,dispatch:null,action:a,pending:null},m.queue=O,d=Dc.bind(null,ee,O,j,d),O.dispatch=d,m.memoizedState=a,[i,d,!1]}function $o(a){var i=An();return _h(i,Te,a)}function _h(a,i,d){if(i=pa(a,i,Bc)[0],a=Va(Ya)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=Zr(i)}catch(tt){throw tt===Er?Tr:tt}else m=i;i=An();var O=i.queue,j=O.dispatch;return d!==i.memoizedState&&(ee.flags|=2048,ma(9,Fr(),b0.bind(null,O,d),null)),[m,j,a]}function b0(a,i){a.action=i}function Zs(a){var i=An(),d=Te;if(d!==null)return _h(i,d,a);An(),i=i.memoizedState,d=An();var m=d.queue.dispatch;return d.memoizedState=a,[i,m,!1]}function ma(a,i,d,m){return a={tag:a,create:d,deps:m,inst:i,next:null},i=ee.updateQueue,i===null&&(i=Jo(),ee.updateQueue=i),d=i.lastEffect,d===null?i.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,i.lastEffect=a),a}function Fr(){return{destroy:void 0,resource:void 0}}function tu(){return An().memoizedState}function Pi(a,i,d,m){var O=Dn();m=m===void 0?null:m,ee.flags|=a,O.memoizedState=ma(1|i,Fr(),d,m)}function fi(a,i,d,m){var O=An();m=m===void 0?null:m;var j=O.memoizedState.inst;Te!==null&&m!==null&&dl(m,Te.memoizedState.deps)?O.memoizedState=ma(i,j,d,m):(ee.flags|=a,O.memoizedState=ma(1|i,j,d,m))}function wc(a,i){Pi(8390656,8,a,i)}function eu(a,i){fi(2048,8,a,i)}function Hc(a,i){return fi(4,2,a,i)}function kr(a,i){return fi(4,4,a,i)}function hi(a,i){if(typeof i=="function"){a=a();var d=i(a);return function(){typeof d=="function"?d():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function nu(a,i,d){d=d!=null?d.concat([a]):null,fi(4,4,hi.bind(null,i,a),d)}function Fl(){}function Yi(a,i){var d=An();i=i===void 0?null:i;var m=d.memoizedState;return i!==null&&dl(i,m[1])?m[0]:(d.memoizedState=[a,i],a)}function au(a,i){var d=An();i=i===void 0?null:i;var m=d.memoizedState;if(i!==null&&dl(i,m[1]))return m[0];if(m=a(),Rr){I(!0);try{a()}finally{I(!1)}}return d.memoizedState=[m,i],m}function Wr(a,i,d){return d===void 0||(Ge&1073741824)!==0?a.memoizedState=i:(a.memoizedState=d,a=Tu(),ee.lanes|=a,da|=a,d)}function jc(a,i,d,m){return ca(d,i)?d:Ar.current!==null?(a=Wr(a,d,m),ca(a,i)||(zn=!0),a):(Ge&42)===0?(zn=!0,a.memoizedState=d):(a=Tu(),ee.lanes|=a,da|=a,i)}function Js(a,i,d,m,O){var j=Ci();Rn(j!==0&&8>j?j:8);var tt=te.T,ot={};te.T=ot,Ws(a,!1,i,d);try{var bt=O(),Ut=te.S;if(Ut!==null&&Ut(ot,bt),bt!==null&&typeof bt=="object"&&typeof bt.then=="function"){var Gt=_e(bt,m);kl(a,i,Gt,ya(a))}else kl(a,i,m,ya(a))}catch(It){kl(a,i,{then:function(){},status:"rejected",reason:It},ya())}finally{Rn(j),te.T=tt}}function Fs(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:tl,baseState:tl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:tl},next:null};var d={};return i.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:d},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function iu(){return ue(Ka)}function ia(){return An().memoizedState}function ml(){return An().memoizedState}function lu(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var d=ya();a=ji(d);var m=Li(i,a,d);m!==null&&(Sa(m,i,d),Pa(m,i,d)),i={cache:on()},a.payload=i;return}i=i.return}}function ks(a,i,d){var m=ya();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},vl(a)?$s(i,d):(d=Oc(a,i,d,m),d!==null&&(Sa(d,a,m),Lc(d,i,m)))}function Rh(a,i,d){var m=ya();kl(a,i,d,m)}function kl(a,i,d,m){var O={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(vl(a))$s(i,O);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var tt=i.lastRenderedState,ot=j(tt,d);if(O.hasEagerState=!0,O.eagerState=ot,ca(ot,tt))return hl(a,i,O,0),Xe===null&&Qr(),!1}catch{}finally{}if(d=Oc(a,i,O,m),d!==null)return Sa(d,a,m),Lc(d,i,m),!0}return!1}function Ws(a,i,d,m){if(m={lane:2,revertLane:mn(),action:m,hasEagerState:!1,eagerState:null,next:null},vl(a)){if(i)throw Error(o(479))}else i=Oc(a,d,m,2),i!==null&&Sa(i,a,2)}function vl(a){var i=a.alternate;return a===ee||i!==null&&i===ee}function $s(a,i){_r=Bo=!0;var d=a.pending;d===null?i.next=i:(i.next=d.next,d.next=i),a.pending=i}function Lc(a,i,d){if((d&4194048)!==0){var m=i.lanes;m&=a.pendingLanes,d|=m,i.lanes=d,N(a,d)}}function ru(a){var i=xr;return xr+=1,Aa===null&&(Aa=[]),Ir(Aa,a,i)}function to(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function su(a,i){throw i.$$typeof===sr?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function ou(a){var i=a._init;return i(a._payload)}function Oh(a){function i(St,ht){if(a){var Et=St.deletions;Et===null?(St.deletions=[ht],St.flags|=16):Et.push(ht)}}function d(St,ht){if(!a)return null;for(;ht!==null;)i(St,ht),ht=ht.sibling;return null}function m(St){for(var ht=new Map;St!==null;)St.key!==null?ht.set(St.key,St):ht.set(St.index,St),St=St.sibling;return ht}function O(St,ht){return St=We(St,ht),St.index=0,St.sibling=null,St}function j(St,ht,Et){return St.index=Et,a?(Et=St.alternate,Et!==null?(Et=Et.index,Et<ht?(St.flags|=67108866,ht):Et):(St.flags|=67108866,ht)):(St.flags|=1048576,ht)}function tt(St){return a&&St.alternate===null&&(St.flags|=67108866),St}function ot(St,ht,Et,wt){return ht===null||ht.tag!==6?(ht=uf(Et,St.mode,wt),ht.return=St,ht):(ht=O(ht,Et),ht.return=St,ht)}function bt(St,ht,Et,wt){var Yt=Et.type;return Yt===or?Gt(St,ht,Et.props.children,wt,Et.key):ht!==null&&(ht.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Wi&&ou(Yt)===ht.type)?(ht=O(ht,Et.props),to(ht,Et),ht.return=St,ht):(ht=po(Et.type,Et.key,Et.props,null,St.mode,wt),to(ht,Et),ht.return=St,ht)}function Ut(St,ht,Et,wt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Et.containerInfo||ht.stateNode.implementation!==Et.implementation?(ht=cf(Et,St.mode,wt),ht.return=St,ht):(ht=O(ht,Et.children||[]),ht.return=St,ht)}function Gt(St,ht,Et,wt,Yt){return ht===null||ht.tag!==7?(ht=lr(Et,St.mode,wt,Yt),ht.return=St,ht):(ht=O(ht,Et),ht.return=St,ht)}function It(St,ht,Et){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=uf(""+ht,St.mode,Et),ht.return=St,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case hs:return Et=po(ht.type,ht.key,ht.props,null,St.mode,Et),to(Et,ht),Et.return=St,Et;case Zi:return ht=cf(ht,St.mode,Et),ht.return=St,ht;case Wi:var wt=ht._init;return ht=wt(ht._payload),It(St,ht,Et)}if(cr(ht)||_(ht))return ht=lr(ht,St.mode,Et,null),ht.return=St,ht;if(typeof ht.then=="function")return It(St,ru(ht),Et);if(ht.$$typeof===Ji)return It(St,we(St,ht),Et);su(St,ht)}return null}function Qt(St,ht,Et,wt){var Yt=ht!==null?ht.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Yt!==null?null:ot(St,ht,""+Et,wt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case hs:return Et.key===Yt?bt(St,ht,Et,wt):null;case Zi:return Et.key===Yt?Ut(St,ht,Et,wt):null;case Wi:return Yt=Et._init,Et=Yt(Et._payload),Qt(St,ht,Et,wt)}if(cr(Et)||_(Et))return Yt!==null?null:Gt(St,ht,Et,wt,null);if(typeof Et.then=="function")return Qt(St,ht,ru(Et),wt);if(Et.$$typeof===Ji)return Qt(St,ht,we(St,Et),wt);su(St,Et)}return null}function de(St,ht,Et,wt,Yt){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return St=St.get(Et)||null,ot(ht,St,""+wt,Yt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case hs:return St=St.get(wt.key===null?Et:wt.key)||null,bt(ht,St,wt,Yt);case Zi:return St=St.get(wt.key===null?Et:wt.key)||null,Ut(ht,St,wt,Yt);case Wi:var Ie=wt._init;return wt=Ie(wt._payload),de(St,ht,Et,wt,Yt)}if(cr(wt)||_(wt))return St=St.get(Et)||null,Gt(ht,St,wt,Yt,null);if(typeof wt.then=="function")return de(St,ht,Et,ru(wt),Yt);if(wt.$$typeof===Ji)return de(St,ht,Et,we(ht,wt),Yt);su(ht,wt)}return null}function qa(St,ht,Et,wt){for(var Yt=null,Ie=null,oe=ht,Ne=ht=0,qn=null;oe!==null&&Ne<Et.length;Ne++){oe.index>Ne?(qn=oe,oe=null):qn=oe.sibling;var ze=Qt(St,oe,Et[Ne],wt);if(ze===null){oe===null&&(oe=qn);break}a&&oe&&ze.alternate===null&&i(St,oe),ht=j(ze,ht,Ne),Ie===null?Yt=ze:Ie.sibling=ze,Ie=ze,oe=qn}if(Ne===Et.length)return d(St,oe),Ue&&k(St,Ne),Yt;if(oe===null){for(;Ne<Et.length;Ne++)oe=It(St,Et[Ne],wt),oe!==null&&(ht=j(oe,ht,Ne),Ie===null?Yt=oe:Ie.sibling=oe,Ie=oe);return Ue&&k(St,Ne),Yt}for(oe=m(oe);Ne<Et.length;Ne++)qn=de(oe,St,Ne,Et[Ne],wt),qn!==null&&(a&&qn.alternate!==null&&oe.delete(qn.key===null?Ne:qn.key),ht=j(qn,ht,Ne),Ie===null?Yt=qn:Ie.sibling=qn,Ie=qn);return a&&oe.forEach(function(ql){return i(St,ql)}),Ue&&k(St,Ne),Yt}function As(St,ht,Et,wt){if(Et==null)throw Error(o(151));for(var Yt=null,Ie=null,oe=ht,Ne=ht=0,qn=null,ze=Et.next();oe!==null&&!ze.done;Ne++,ze=Et.next()){oe.index>Ne?(qn=oe,oe=null):qn=oe.sibling;var ql=Qt(St,oe,ze.value,wt);if(ql===null){oe===null&&(oe=qn);break}a&&oe&&ql.alternate===null&&i(St,oe),ht=j(ql,ht,Ne),Ie===null?Yt=ql:Ie.sibling=ql,Ie=ql,oe=qn}if(ze.done)return d(St,oe),Ue&&k(St,Ne),Yt;if(oe===null){for(;!ze.done;Ne++,ze=Et.next())ze=It(St,ze.value,wt),ze!==null&&(ht=j(ze,ht,Ne),Ie===null?Yt=ze:Ie.sibling=ze,Ie=ze);return Ue&&k(St,Ne),Yt}for(oe=m(oe);!ze.done;Ne++,ze=Et.next())ze=de(oe,St,Ne,ze.value,wt),ze!==null&&(a&&ze.alternate!==null&&oe.delete(ze.key===null?Ne:ze.key),ht=j(ze,ht,Ne),Ie===null?Yt=ze:Ie.sibling=ze,Ie=ze);return a&&oe.forEach(function(sc){return i(St,sc)}),Ue&&k(St,Ne),Yt}function Ll(St,ht,Et,wt){if(typeof Et=="object"&&Et!==null&&Et.type===or&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case hs:t:{for(var Yt=Et.key;ht!==null;){if(ht.key===Yt){if(Yt=Et.type,Yt===or){if(ht.tag===7){d(St,ht.sibling),wt=O(ht,Et.props.children),wt.return=St,St=wt;break t}}else if(ht.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Wi&&ou(Yt)===ht.type){d(St,ht.sibling),wt=O(ht,Et.props),to(wt,Et),wt.return=St,St=wt;break t}d(St,ht);break}else i(St,ht);ht=ht.sibling}Et.type===or?(wt=lr(Et.props.children,St.mode,wt,Et.key),wt.return=St,St=wt):(wt=po(Et.type,Et.key,Et.props,null,St.mode,wt),to(wt,Et),wt.return=St,St=wt)}return tt(St);case Zi:t:{for(Yt=Et.key;ht!==null;){if(ht.key===Yt)if(ht.tag===4&&ht.stateNode.containerInfo===Et.containerInfo&&ht.stateNode.implementation===Et.implementation){d(St,ht.sibling),wt=O(ht,Et.children||[]),wt.return=St,St=wt;break t}else{d(St,ht);break}else i(St,ht);ht=ht.sibling}wt=cf(Et,St.mode,wt),wt.return=St,St=wt}return tt(St);case Wi:return Yt=Et._init,Et=Yt(Et._payload),Ll(St,ht,Et,wt)}if(cr(Et))return qa(St,ht,Et,wt);if(_(Et)){if(Yt=_(Et),typeof Yt!="function")throw Error(o(150));return Et=Yt.call(Et),As(St,ht,Et,wt)}if(typeof Et.then=="function")return Ll(St,ht,ru(Et),wt);if(Et.$$typeof===Ji)return Ll(St,ht,we(St,Et),wt);su(St,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,ht!==null&&ht.tag===6?(d(St,ht.sibling),wt=O(ht,Et),wt.return=St,St=wt):(d(St,ht),wt=uf(Et,St.mode,wt),wt.return=St,St=wt),tt(St)):d(St,ht)}return function(St,ht,Et,wt){try{xr=0;var Yt=Ll(St,ht,Et,wt);return Aa=null,Yt}catch(oe){if(oe===Er||oe===Tr)throw oe;var Ie=s(29,oe,null,St.mode);return Ie.lanes=wt,Ie.return=St,Ie}finally{}}}function yl(a){var i=a.alternate;S(hn,hn.current&1),S(La,a),ha===null&&(i===null||Ar.current!==null||i.memoizedState!==null)&&(ha=a)}function Mh(a){if(a.tag===22){if(S(hn,hn.current),S(La,a),ha===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(ha=a)}}else Sl()}function Sl(){S(hn,hn.current),S(La,La.current)}function Vi(a){D(La),ha===a&&(ha=null),D(hn)}function eo(a){for(var i=a;i!==null;){if(i.tag===13){var d=i.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||qu(d)||Pu(d)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qc(a,i,d,m){i=a.memoizedState,d=d(m,i),d=d==null?i:Nu({},i,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}function xh(a,i,d,m,O,j,tt){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,j,tt):i.prototype&&i.prototype.isPureReactComponent?!Xl(d,m)||!Xl(O,j):!0}function Nh(a,i,d,m){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(d,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(d,m),i.state!==a&&Nr.enqueueReplaceState(i,i.state,null)}function Wl(a,i){var d=i;if("ref"in i){d={};for(var m in i)m!=="ref"&&(d[m]=i[m])}if(a=a.defaultProps){d===i&&(d=Nu({},d));for(var O in a)d[O]===void 0&&(d[O]=a[O])}return d}function $r(a,i){try{var d=a.onUncaughtError;d(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function Dh(a,i,d){try{var m=a.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function Pc(a,i,d){return d=ji(d),d.tag=3,d.payload={element:null},d.callback=function(){$r(a,i)},d}function Uh(a){return a=ji(a),a.tag=3,a}function Yc(a,i,d,m){var O=d.type.getDerivedStateFromError;if(typeof O=="function"){var j=m.value;a.payload=function(){return O(j)},a.callback=function(){Dh(i,d,m)}}var tt=d.stateNode;tt!==null&&typeof tt.componentDidCatch=="function"&&(a.callback=function(){Dh(i,d,m),typeof O!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var ot=m.stack;this.componentDidCatch(m.value,{componentStack:ot!==null?ot:""})})}function C0(a,i,d,m,O){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=d.alternate,i!==null&&jt(i,d,O,!0),d=La.current,d!==null){switch(d.tag){case 13:return ha===null?Au():d.alternate===null&&tn===0&&(tn=3),d.flags&=-257,d.flags|=65536,d.lanes=O,m===Uo?d.flags|=16384:(i=d.updateQueue,i===null?d.updateQueue=new Set([m]):i.add(m),ai(a,m,O)),!1;case 22:return d.flags|=65536,m===Uo?d.flags|=16384:(i=d.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=i):(d=i.retryQueue,d===null?i.retryQueue=new Set([m]):d.add(m)),ai(a,m,O)),!1}throw Error(o(435,d.tag))}return ai(a,m,O),Au(),!1}if(Ue)return i=La.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=O,m!==ri&&(a=Error(o(422),{cause:m}),fe(Z(a,d)))):(m!==ri&&(i=Error(o(423),{cause:m}),fe(Z(i,d))),a=a.current.alternate,a.flags|=65536,O&=-O,a.lanes|=O,m=Z(m,d),O=Pc(a.stateNode,m,O),Nn(a,O),tn!==4&&(tn=2)),!1;var j=Error(o(520),{cause:m});if(j=Z(j,d),zr===null?zr=[j]:zr.push(j),tn!==4&&(tn=2),i===null)return!0;m=Z(m,d),d=i;do{switch(d.tag){case 3:return d.flags|=65536,a=O&-O,d.lanes|=a,a=Pc(d.stateNode,m,a),Nn(d,a),!1;case 1:if(i=d.type,j=d.stateNode,(d.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(sl===null||!sl.has(j))))return d.flags|=65536,O&=-O,d.lanes|=O,O=Uh(O),Yc(O,a,d,m),Nn(d,O),!1}d=d.return}while(d!==null);return!1}function Pn(a,i,d,m){i.child=a===null?Za(i,null,d,m):Hl(i,a.child,d,m)}function zh(a,i,d,m,O){d=d.render;var j=i.ref;if("ref"in m){var tt={};for(var ot in m)ot!=="ref"&&(tt[ot]=m[ot])}else tt=m;return ne(i),m=gl(a,i,d,tt,j,O),ot=Ko(),a!==null&&!zn?(Zo(a,i,O),di(a,i,O)):(Ue&&ot&&F(i),i.flags|=1,Pn(a,i,m,O),i.child)}function Bh(a,i,d,m,O){if(a===null){var j=d.type;return typeof j=="function"&&!Ki(j)&&j.defaultProps===void 0&&d.compare===null?(i.tag=15,i.type=j,Gh(a,i,j,m,O)):(a=po(d.type,null,m,i,i.mode,O),a.ref=i.ref,a.return=i,i.child=a)}if(j=a.child,!gu(a,O)){var tt=j.memoizedProps;if(d=d.compare,d=d!==null?d:Xl,d(tt,m)&&a.ref===i.ref)return di(a,i,O)}return i.flags|=1,a=We(j,m),a.ref=i.ref,a.return=i,i.child=a}function Gh(a,i,d,m,O){if(a!==null){var j=a.memoizedProps;if(Xl(j,m)&&a.ref===i.ref)if(zn=!1,i.pendingProps=m=j,gu(a,O))(a.flags&131072)!==0&&(zn=!0);else return i.lanes=a.lanes,di(a,i,O)}return Vc(a,i,d,m,O)}function wh(a,i,d){var m=i.pendingProps,O=m.children,j=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=j!==null?j.baseLanes|d:d,a!==null){for(O=i.child=a.child,j=0;O!==null;)j=j|O.lanes|O.childLanes,O=O.sibling;i.childLanes=j&~m}else i.childLanes=0,i.child=null;return Hh(a,i,m,d)}if((d&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Oa(i,j!==null?j.cachePool:null),j!==null?Ch(i,j):Qo(),Mh(i);else return i.lanes=i.childLanes=536870912,Hh(a,i,j!==null?j.baseLanes|d:d,d)}else j!==null?(Oa(i,j.cachePool),Ch(i,j),Sl(),i.memoizedState=null):(a!==null&&Oa(i,null),Qo(),Sl());return Pn(a,i,O,d),i.child}function Hh(a,i,d,m){var O=Hi();return O=O===null?null:{parent:Si?Ke._currentValue:Ke._currentValue2,pool:O},i.memoizedState={baseLanes:d,cachePool:O},a!==null&&Oa(i,null),Qo(),Mh(i),a!==null&&jt(a,i,m,!0),null}function uu(a,i){var d=i.ref;if(d===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(o(284));(a===null||a.ref!==d)&&(i.flags|=4194816)}}function Vc(a,i,d,m,O){return ne(i),d=gl(a,i,d,m,void 0,O),m=Ko(),a!==null&&!zn?(Zo(a,i,O),di(a,i,O)):(Ue&&m&&F(i),i.flags|=1,Pn(a,i,d,O),i.child)}function cu(a,i,d,m,O,j){return ne(i),i.updateQueue=null,d=Zl(i,m,d,O),Kr(a),m=Ko(),a!==null&&!zn?(Zo(a,i,j),di(a,i,j)):(Ue&&m&&F(i),i.flags|=1,Pn(a,i,d,j),i.child)}function ts(a,i,d,m,O){if(ne(i),i.stateNode===null){var j=zl,tt=d.contextType;typeof tt=="object"&&tt!==null&&(j=ue(tt)),j=new d(m,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Nr,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=m,j.state=i.memoizedState,j.refs={},Xs(i),tt=d.contextType,j.context=typeof tt=="object"&&tt!==null?ue(tt):zl,j.state=i.memoizedState,tt=d.getDerivedStateFromProps,typeof tt=="function"&&(qc(i,d,tt,m),j.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(tt=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),tt!==j.state&&Nr.enqueueReplaceState(j,j.state,null),ci(i,m,j,O),Bn(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(a===null){j=i.stateNode;var ot=i.memoizedProps,bt=Wl(d,ot);j.props=bt;var Ut=j.context,Gt=d.contextType;tt=zl,typeof Gt=="object"&&Gt!==null&&(tt=ue(Gt));var It=d.getDerivedStateFromProps;Gt=typeof It=="function"||typeof j.getSnapshotBeforeUpdate=="function",ot=i.pendingProps!==ot,Gt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ot||Ut!==tt)&&Nh(i,j,m,tt),$e=!1;var Qt=i.memoizedState;j.state=Qt,ci(i,m,j,O),Bn(),Ut=i.memoizedState,ot||Qt!==Ut||$e?(typeof It=="function"&&(qc(i,d,It,m),Ut=i.memoizedState),(bt=$e||xh(i,d,bt,m,Qt,Ut,tt))?(Gt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Ut),j.props=m,j.state=Ut,j.context=tt,m=bt):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{j=i.stateNode,Is(a,i),tt=i.memoizedProps,Gt=Wl(d,tt),j.props=Gt,It=i.pendingProps,Qt=j.context,Ut=d.contextType,bt=zl,typeof Ut=="object"&&Ut!==null&&(bt=ue(Ut)),ot=d.getDerivedStateFromProps,(Ut=typeof ot=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(tt!==It||Qt!==bt)&&Nh(i,j,m,bt),$e=!1,Qt=i.memoizedState,j.state=Qt,ci(i,m,j,O),Bn();var de=i.memoizedState;tt!==It||Qt!==de||$e||a!==null&&a.dependencies!==null&&ve(a.dependencies)?(typeof ot=="function"&&(qc(i,d,ot,m),de=i.memoizedState),(Gt=$e||xh(i,d,Gt,m,Qt,de,bt)||a!==null&&a.dependencies!==null&&ve(a.dependencies))?(Ut||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(m,de,bt),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(m,de,bt)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=de),j.props=m,j.state=de,j.context=bt,m=Gt):(typeof j.componentDidUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=1024),m=!1)}return j=m,uu(a,i),m=(i.flags&128)!==0,j||m?(j=i.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,a!==null&&m?(i.child=Hl(i,a.child,null,O),i.child=Hl(i,null,d,O)):Pn(a,i,d,O),i.memoizedState=j.state,a=i.child):a=di(a,i,O),a}function jh(a,i,d,m){return Kt(),i.flags|=256,Pn(a,i,d,m),i.child}function fu(a){return{baseLanes:a,cachePool:Ys()}}function hu(a,i,d){return a=a!==null?a.childLanes&~d:0,i&&(a|=Fn),a}function Xc(a,i,d){var m=i.pendingProps,O=!1,j=(i.flags&128)!==0,tt;if((tt=j)||(tt=a!==null&&a.memoizedState===null?!1:(hn.current&2)!==0),tt&&(O=!0,i.flags&=-129),tt=(i.flags&32)!==0,i.flags&=-33,a===null){if(Ue){if(O?yl(i):Sl(),Ue){var ot=bn,bt;(bt=ot)&&(ot=Vu(ot,li),ot!==null?(i.memoizedState={dehydrated:ot,treeContext:Bl!==null?{id:Ri,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},bt=s(18,null,null,0),bt.stateNode=ot,bt.return=i,i.child=bt,Hn=i,bn=null,bt=!0):bt=!1),bt||nt(i)}if(ot=i.memoizedState,ot!==null&&(ot=ot.dehydrated,ot!==null))return Pu(ot)?i.lanes=32:i.lanes=536870912,null;Vi(i)}return ot=m.children,m=m.fallback,O?(Sl(),O=i.mode,ot=no({mode:"hidden",children:ot},O),m=lr(m,O,d,null),ot.return=i,m.return=i,ot.sibling=m,i.child=ot,O=i.child,O.memoizedState=fu(d),O.childLanes=hu(a,tt,d),i.memoizedState=Ur,m):(yl(i),du(i,ot))}if(bt=a.memoizedState,bt!==null&&(ot=bt.dehydrated,ot!==null)){if(j)i.flags&256?(yl(i),i.flags&=-257,i=bl(a,i,d)):i.memoizedState!==null?(Sl(),i.child=a.child,i.flags|=128,i=null):(Sl(),O=m.fallback,ot=i.mode,m=no({mode:"visible",children:m.children},ot),O=lr(O,ot,d,null),O.flags|=2,m.return=i,O.return=i,m.sibling=O,i.child=m,Hl(i,a.child,null,d),m=i.child,m.memoizedState=fu(d),m.childLanes=hu(a,tt,d),i.memoizedState=Ur,i=O);else if(yl(i),Pu(ot))tt=nd(ot).digest,m=Error(o(419)),m.stack="",m.digest=tt,fe({value:m,source:null,stack:null}),i=bl(a,i,d);else if(zn||jt(a,i,d,!1),tt=(d&a.childLanes)!==0,zn||tt){if(tt=Xe,tt!==null&&(m=d&-d,m=(m&42)!==0?1:L(m),m=(m&(tt.suspendedLanes|d))!==0?0:m,m!==0&&m!==bt.retryLane))throw bt.retryLane=m,Ql(a,m),Sa(tt,a,m),Yf;qu(ot)||Au(),i=bl(a,i,d)}else qu(ot)?(i.flags|=192,i.child=a.child,i=null):(a=bt.treeContext,an&&(bn=sd(ot),Hn=i,Ue=!0,al=null,li=!1,a!==null&&(Ea[Ha++]=Ri,Ea[Ha++]=ii,Ea[Ha++]=Bl,Ri=a.id,ii=a.overflow,Bl=i)),i=du(i,m.children),i.flags|=4096);return i}return O?(Sl(),O=m.fallback,ot=i.mode,bt=a.child,j=bt.sibling,m=We(bt,{mode:"hidden",children:m.children}),m.subtreeFlags=bt.subtreeFlags&65011712,j!==null?O=We(j,O):(O=lr(O,ot,d,null),O.flags|=2),O.return=i,m.return=i,m.sibling=O,i.child=m,m=O,O=i.child,ot=a.child.memoizedState,ot===null?ot=fu(d):(bt=ot.cachePool,bt!==null?(j=Si?Ke._currentValue:Ke._currentValue2,bt=bt.parent!==j?{parent:j,pool:j}:bt):bt=Ys(),ot={baseLanes:ot.baseLanes|d,cachePool:bt}),O.memoizedState=ot,O.childLanes=hu(a,tt,d),i.memoizedState=Ur,m):(yl(i),d=a.child,a=d.sibling,d=We(d,{mode:"visible",children:m.children}),d.return=i,d.sibling=null,a!==null&&(tt=i.deletions,tt===null?(i.deletions=[a],i.flags|=16):tt.push(a)),i.child=d,i.memoizedState=null,d)}function du(a,i){return i=no({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function no(a,i){return a=s(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function bl(a,i,d){return Hl(i,a.child,null,d),a=du(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function Lh(a,i,d){a.lanes|=i;var m=a.alternate;m!==null&&(m.lanes|=i),kt(a.return,i,d)}function Ic(a,i,d,m,O){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:O}:(j.isBackwards=i,j.rendering=null,j.renderingStartTime=0,j.last=m,j.tail=d,j.tailMode=O)}function qh(a,i,d){var m=i.pendingProps,O=m.revealOrder,j=m.tail;if(Pn(a,i,m.children,d),m=hn.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Lh(a,d,i);else if(a.tag===19)Lh(a,d,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(S(hn,m),O){case"forwards":for(d=i.child,O=null;d!==null;)a=d.alternate,a!==null&&eo(a)===null&&(O=d),d=d.sibling;d=O,d===null?(O=i.child,i.child=null):(O=d.sibling,d.sibling=null),Ic(i,!1,O,d,j);break;case"backwards":for(d=null,O=i.child,i.child=null;O!==null;){if(a=O.alternate,a!==null&&eo(a)===null){i.child=O;break}a=O.sibling,O.sibling=d,d=O,O=a}Ic(i,!0,d,null,j);break;case"together":Ic(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function di(a,i,d){if(a!==null&&(i.dependencies=a.dependencies),da|=i.lanes,(d&i.childLanes)===0)if(a!==null){if(jt(a,i,d,!1),(d&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,d=We(a,a.pendingProps),i.child=d,d.return=i;a.sibling!==null;)a=a.sibling,d=d.sibling=We(a,a.pendingProps),d.return=i;d.sibling=null}return i.child}function gu(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&ve(a)))}function ao(a,i,d){switch(i.tag){case 3:it(i,i.stateNode.containerInfo),Bt(i,Ke,a.memoizedState.cache),Kt();break;case 27:case 5:J(i);break;case 4:it(i,i.stateNode.containerInfo);break;case 10:Bt(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(yl(i),i.flags|=128,null):(d&i.child.childLanes)!==0?Xc(a,i,d):(yl(i),a=di(a,i,d),a!==null?a.sibling:null);yl(i);break;case 19:var O=(a.flags&128)!==0;if(m=(d&i.childLanes)!==0,m||(jt(a,i,d,!1),m=(d&i.childLanes)!==0),O){if(m)return qh(a,i,d);i.flags|=128}if(O=i.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),S(hn,hn.current),m)break;return null;case 22:case 23:return i.lanes=0,wh(a,i,d);case 24:Bt(i,Ke,a.memoizedState.cache)}return di(a,i,d)}function es(a,i,d){if(a!==null)if(a.memoizedProps!==i.pendingProps)zn=!0;else{if(!gu(a,d)&&(i.flags&128)===0)return zn=!1,ao(a,i,d);zn=(a.flags&131072)!==0}else zn=!1,Ue&&(i.flags&1048576)!==0&&at(i,Sr,i.index);switch(i.lanes=0,i.tag){case 16:t:{a=i.pendingProps;var m=i.elementType,O=m._init;if(m=O(m._payload),i.type=m,typeof m=="function")Ki(m)?(a=Wl(m,a),i.tag=1,i=ts(null,i,m,a,d)):(i.tag=0,i=Vc(null,i,m,a,d));else{if(m!=null){if(O=m.$$typeof,O===Uu){i.tag=11,i=zh(null,i,m,a,d);break t}else if(O===zu){i.tag=14,i=Bh(null,i,m,a,d);break t}}throw i=R(m)||m,Error(o(306,i,""))}}return i;case 0:return Vc(a,i,i.type,i.pendingProps,d);case 1:return m=i.type,O=Wl(m,i.pendingProps),ts(a,i,m,O,d);case 3:t:{if(it(i,i.stateNode.containerInfo),a===null)throw Error(o(387));var j=i.pendingProps;O=i.memoizedState,m=O.element,Is(a,i),ci(i,j,null,d);var tt=i.memoizedState;if(j=tt.cache,Bt(i,Ke,j),j!==O.cache&&_t(i,[Ke],d,!0),Bn(),j=tt.element,an&&O.isDehydrated)if(O={element:j,isDehydrated:!1,cache:tt.cache},i.updateQueue.baseState=O,i.memoizedState=O,i.flags&256){i=jh(a,i,j,d);break t}else if(j!==m){m=Z(Error(o(424)),i),fe(m),i=jh(a,i,j,d);break t}else for(an&&(bn=R0(i.stateNode.containerInfo),Hn=i,Ue=!0,al=null,li=!0),d=Za(i,null,j,d),i.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Kt(),j===m){i=di(a,i,d);break t}Pn(a,i,j,d)}i=i.child}return i;case 26:if(Ga)return uu(a,i),a===null?(d=vd(i.type,null,i.pendingProps,null))?i.memoizedState=d:Ue||(i.stateNode=Sd(i.type,i.pendingProps,nl.current,i)):i.memoizedState=vd(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:if(Sn)return J(i),a===null&&Sn&&Ue&&(m=i.stateNode=Ro(i.type,i.pendingProps,nl.current,Un.current,!1),Hn=i,li=!0,bn=ps(i.type,m,bn)),Pn(a,i,i.pendingProps.children,d),uu(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Ue&&(pd(i.type,i.pendingProps,Un.current),(O=m=bn)&&(m=od(m,i.type,i.pendingProps,li),m!==null?(i.stateNode=m,Hn=i,bn=rd(m),li=!1,O=!0):O=!1),O||nt(i)),J(i),O=i.type,j=i.pendingProps,tt=a!==null?a.memoizedProps:null,m=j.children,Nl(O,j)?m=null:tt!==null&&Nl(O,tt)&&(i.flags|=32),i.memoizedState!==null&&(O=gl(a,i,Gn,null,null,d),Si?Ka._currentValue=O:Ka._currentValue2=O),uu(a,i),Pn(a,i,m,d),i.child;case 6:return a===null&&Ue&&(md(i.pendingProps,Un.current),(a=d=bn)&&(d=Yu(d,i.pendingProps,li),d!==null?(i.stateNode=d,Hn=i,bn=null,a=!0):a=!1),a||nt(i)),null;case 13:return Xc(a,i,d);case 4:return it(i,i.stateNode.containerInfo),m=i.pendingProps,a===null?i.child=Hl(i,null,m,d):Pn(a,i,m,d),i.child;case 11:return zh(a,i,i.type,i.pendingProps,d);case 7:return Pn(a,i,i.pendingProps,d),i.child;case 8:return Pn(a,i,i.pendingProps.children,d),i.child;case 12:return Pn(a,i,i.pendingProps.children,d),i.child;case 10:return m=i.pendingProps,Bt(i,i.type,m.value),Pn(a,i,m.children,d),i.child;case 9:return O=i.type._context,m=i.pendingProps.children,ne(i),O=ue(O),m=m(O),i.flags|=1,Pn(a,i,m,d),i.child;case 14:return Bh(a,i,i.type,i.pendingProps,d);case 15:return Gh(a,i,i.type,i.pendingProps,d);case 19:return qh(a,i,d);case 31:return m=i.pendingProps,d=i.mode,m={mode:m.mode,children:m.children},a===null?(d=no(m,d),d.ref=i.ref,i.child=d,d.return=i,i=d):(d=We(a.child,m),d.ref=i.ref,i.child=d,d.return=i,i=d),i;case 22:return wh(a,i,d);case 24:return ne(i),m=ue(Ke),a===null?(O=Hi(),O===null&&(O=Xe,j=on(),O.pooledCache=j,j.refCount++,j!==null&&(O.pooledCacheLanes|=d),O=j),i.memoizedState={parent:m,cache:O},Xs(i),Bt(i,Ke,O)):((a.lanes&d)!==0&&(Is(a,i),ci(i,null,null,d),Bn()),O=a.memoizedState,j=i.memoizedState,O.parent!==m?(O={parent:m,cache:m},i.memoizedState=O,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=O),Bt(i,Ke,m)):(m=j.cache,Bt(i,Ke,m),m!==O.cache&&_t(i,[Ke],d,!0))),Pn(a,i,i.pendingProps.children,d),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function xa(a){a.flags|=4}function io(a,i){if(a!==null&&a.child===i.child)return!1;if((i.flags&16)!==0)return!0;for(a=i.child;a!==null;){if((a.flags&13878)!==0||(a.subtreeFlags&13878)!==0)return!0;a=a.sibling}return!1}function pu(a,i,d,m){if(wn)for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)Eo(a,d.stateNode);else if(!(d.tag===4||Sn&&d.tag===27)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return;d=d.return}d.sibling.return=d.return,d=d.sibling}else if(bi)for(var O=i.child;O!==null;){if(O.tag===5){var j=O.stateNode;d&&m&&(j=Tf(j,O.type,O.memoizedProps)),Eo(a,j)}else if(O.tag===6)j=O.stateNode,d&&m&&(j=ed(j,O.memoizedProps)),Eo(a,j);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)j=O.child,j!==null&&(j.return=O),pu(a,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===i)break;for(;O.sibling===null;){if(O.return===null||O.return===i)return;O=O.return}O.sibling.return=O.return,O=O.sibling}}function Qc(a,i,d,m){var O=!1;if(bi)for(var j=i.child;j!==null;){if(j.tag===5){var tt=j.stateNode;d&&m&&(tt=Tf(tt,j.type,j.memoizedProps)),Ef(a,tt)}else if(j.tag===6)tt=j.stateNode,d&&m&&(tt=ed(tt,j.memoizedProps)),Ef(a,tt);else if(j.tag!==4){if(j.tag===22&&j.memoizedState!==null)O=j.child,O!==null&&(O.return=j),Qc(a,j,!0,!0),O=!0;else if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===i)break;for(;j.sibling===null;){if(j.return===null||j.return===i)return O;j=j.return}j.sibling.return=j.return,j=j.sibling}return O}function mu(a,i){if(bi&&io(a,i)){a=i.stateNode;var d=a.containerInfo,m=Cf();Qc(m,i,!1,!1),a.pendingChildren=m,xa(i),td(d,m)}}function lo(a,i,d,m){if(wn)a.memoizedProps!==m&&xa(i);else if(bi){var O=a.stateNode,j=a.memoizedProps;if((a=io(a,i))||j!==m){var tt=Un.current;j=$h(O,d,j,m,!a,null),j===O?i.stateNode=O:(ds(j,d,m,tt)&&xa(i),i.stateNode=j,a?pu(j,i,!1,!1):xa(i))}else i.stateNode=O}}function vu(a,i,d){if(Bu(i,d)){if(a.flags|=16777216,!Ei(i,d))if(ei())a.flags|=8192;else throw Ta=Uo,Do}else a.flags&=-16777217}function Kc(a,i){if(x0(i)){if(a.flags|=16777216,!Nf(i))if(ei())a.flags|=8192;else throw Ta=Uo,Do}else a.flags&=-16777217}function ro(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?M():536870912,a.lanes|=i,_a|=i)}function so(a,i){if(!Ue)switch(a.tailMode){case"hidden":i=a.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function fn(a){var i=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(i)for(var O=a.child;O!==null;)d|=O.lanes|O.childLanes,m|=O.subtreeFlags&65011712,m|=O.flags&65011712,O.return=a,O=O.sibling;else for(O=a.child;O!==null;)d|=O.lanes|O.childLanes,m|=O.subtreeFlags,m|=O.flags,O.return=a,O=O.sibling;return a.subtreeFlags|=m,a.childLanes=d,i}function E0(a,i,d){var m=i.pendingProps;switch(lt(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(i),null;case 1:return fn(i),null;case 3:return d=i.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),$t(Ke),X(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Ht(i)?xa(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ft())),mu(a,i),fn(i),null;case 26:if(Ga){d=i.type;var O=i.memoizedState;return a===null?(xa(i),O!==null?(fn(i),Kc(i,O)):(fn(i),vu(i,d,m))):O?O!==a.memoizedState?(xa(i),fn(i),Kc(i,O)):(fn(i),i.flags&=-16777217):(wn?a.memoizedProps!==m&&xa(i):lo(a,i,d,m),fn(i),vu(i,d,m)),null}case 27:if(Sn){if($(i),d=nl.current,O=i.type,a!==null&&i.stateNode!=null)wn?a.memoizedProps!==m&&xa(i):lo(a,i,O,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return fn(i),null}a=Un.current,Ht(i)?gt(i,a):(a=Ro(O,m,d,a,!0),i.stateNode=a,xa(i))}return fn(i),null}case 5:if($(i),d=i.type,a!==null&&i.stateNode!=null)lo(a,i,d,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return fn(i),null}a=Un.current,Ht(i)?gt(i,a):(O=hf(d,m,nl.current,a,i),pu(O,i,!1,!1),i.stateNode=O,ds(O,d,m,a)&&xa(i))}return fn(i),vu(i,i.type,i.pendingProps),null;case 6:if(a&&i.stateNode!=null)d=a.memoizedProps,wn?d!==m&&xa(i):bi&&(d!==m?(i.stateNode=df(m,nl.current,Un.current,i),xa(i)):i.stateNode=a.stateNode);else{if(typeof m!="string"&&i.stateNode===null)throw Error(o(166));if(a=nl.current,d=Un.current,Ht(i)){if(!an)throw Error(o(176));if(a=i.stateNode,d=i.memoizedProps,m=null,O=Hn,O!==null)switch(O.tag){case 27:case 5:m=O.memoizedProps}Rf(a,d,i,m)||nt(i)}else i.stateNode=df(m,a,d,i)}return fn(i),null;case 13:if(m=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(O=Ht(i),m!==null&&m.dehydrated!==null){if(a===null){if(!O)throw Error(o(318));if(!an)throw Error(o(344));if(O=i.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(o(317));O0(O,i)}else Kt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fn(i),O=!1}else O=Ft(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=O),O=!0;if(!O)return i.flags&256?(Vi(i),i):(Vi(i),null)}if(Vi(i),(i.flags&128)!==0)return i.lanes=d,i;if(d=m!==null,a=a!==null&&a.memoizedState!==null,d){m=i.child,O=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(O=m.alternate.memoizedState.cachePool.pool);var j=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(j=m.memoizedState.cachePool.pool),j!==O&&(m.flags|=2048)}return d!==a&&d&&(i.child.flags|=8192),ro(i,i.updateQueue),fn(i),null;case 4:return X(),mu(a,i),a===null&&Dl(i.stateNode.containerInfo),fn(i),null;case 10:return $t(i.type),fn(i),null;case 19:if(D(hn),O=i.memoizedState,O===null)return fn(i),null;if(m=(i.flags&128)!==0,j=O.rendering,j===null)if(m)so(O,!1);else{if(tn!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(j=eo(a),j!==null){for(i.flags|=128,so(O,!1),a=j.updateQueue,i.updateQueue=a,ro(i,a),i.subtreeFlags=0,a=d,d=i.child;d!==null;)go(d,a),d=d.sibling;return S(hn,hn.current&1|2),i.child}a=a.sibling}O.tail!==null&&wa()>Gr&&(i.flags|=128,m=!0,so(O,!1),i.lanes=4194304)}else{if(!m)if(a=eo(j),a!==null){if(i.flags|=128,m=!0,a=a.updateQueue,i.updateQueue=a,ro(i,a),so(O,!0),O.tail===null&&O.tailMode==="hidden"&&!j.alternate&&!Ue)return fn(i),null}else 2*wa()-O.renderingStartTime>Gr&&d!==536870912&&(i.flags|=128,m=!0,so(O,!1),i.lanes=4194304);O.isBackwards?(j.sibling=i.child,i.child=j):(a=O.last,a!==null?a.sibling=j:i.child=j,O.last=j)}return O.tail!==null?(i=O.tail,O.rendering=i,O.tail=i.sibling,O.renderingStartTime=wa(),i.sibling=null,a=hn.current,S(hn,m?a&1|2:a&1),i):(fn(i),null);case 22:case 23:return Vi(i),Kl(),m=i.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(d&536870912)!==0&&(i.flags&128)===0&&(fn(i),i.subtreeFlags&6&&(i.flags|=8192)):fn(i),d=i.updateQueue,d!==null&&ro(i,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==d&&(i.flags|=2048),a!==null&&D(il),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),$t(Ke),fn(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function T0(a,i){switch(lt(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return $t(Ke),X(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return $(i),null;case 13:if(Vi(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Kt()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return D(hn),null;case 4:return X(),null;case 10:return $t(i.type),null;case 22:case 23:return Vi(i),Kl(),a!==null&&D(il),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return $t(Ke),null;case 25:return null;default:return null}}function Ph(a,i){switch(lt(i),i.tag){case 3:$t(Ke),X();break;case 26:case 27:case 5:$(i);break;case 4:X();break;case 13:Vi(i);break;case 19:D(hn);break;case 10:$t(i.type);break;case 22:case 23:Vi(i),Kl(),a!==null&&D(il);break;case 24:$t(Ke)}}function Yn(a,i){try{var d=i.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var O=m.next;d=O;do{if((d.tag&a)===a){m=void 0;var j=d.create,tt=d.inst;m=j(),tt.destroy=m}d=d.next}while(d!==O)}}catch(ot){Re(i,i.return,ot)}}function Xa(a,i,d){try{var m=i.updateQueue,O=m!==null?m.lastEffect:null;if(O!==null){var j=O.next;m=j;do{if((m.tag&a)===a){var tt=m.inst,ot=tt.destroy;if(ot!==void 0){tt.destroy=void 0,O=i;var bt=d,Ut=ot;try{Ut()}catch(Gt){Re(O,bt,Gt)}}}m=m.next}while(m!==j)}}catch(Gt){Re(i,i.return,Gt)}}function Zc(a){var i=a.updateQueue;if(i!==null){var d=a.stateNode;try{bh(i,d)}catch(m){Re(a,a.return,m)}}}function Jc(a,i,d){d.props=Wl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(m){Re(a,i,m)}}function ns(a,i){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var m=hr(a.stateNode);break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof d=="function"?a.refCleanup=d(m):d.current=m}}catch(O){Re(a,i,O)}}function ka(a,i){var d=a.ref,m=a.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(O){Re(a,i,O)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(O){Re(a,i,O)}else d.current=null}function yu(a){var i=a.type,d=a.memoizedProps,m=a.stateNode;try{oa(m,i,d,a)}catch(O){Re(a,a.return,O)}}function Fc(a,i,d){try{yn(a.stateNode,a.type,d,i,a)}catch(m){Re(a,a.return,m)}}function $l(a){return a.tag===5||a.tag===3||(Ga?a.tag===26:!1)||(Sn?a.tag===27&&pr(a.type):!1)||a.tag===4}function oo(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||$l(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(Sn&&a.tag===27&&pr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tr(a,i,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?Ao(d,a,i):mf(d,a);else if(m!==4&&(Sn&&m===27&&pr(a.type)&&(d=a.stateNode,i=null),a=a.child,a!==null))for(tr(a,i,d),a=a.sibling;a!==null;)tr(a,i,d),a=a.sibling}function as(a,i,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?wu(d,a,i):pf(d,a);else if(m!==4&&(Sn&&m===27&&pr(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(as(a,i,d),a=a.sibling;a!==null;)as(a,i,d),a=a.sibling}function kc(a,i,d){a=a.containerInfo;try{Lu(a,d)}catch(m){Re(i,i.return,m)}}function Cl(a){var i=a.stateNode,d=a.memoizedProps;try{bd(a.type,d,i,a)}catch(m){Re(a,a.return,m)}}function is(a,i){for(xl(a.containerInfo),Ln=i;Ln!==null;)if(a=Ln,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Ln=i;else for(;Ln!==null;){a=Ln;var d=a.alternate;switch(i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&d!==null){i=void 0;var m=a,O=d.memoizedProps;d=d.memoizedState;var j=m.stateNode;try{var tt=Wl(m.type,O,m.elementType===m.type);i=j.getSnapshotBeforeUpdate(tt,d),j.__reactInternalSnapshotBeforeUpdate=i}catch(ot){Re(m,m.return,ot)}}break;case 3:(i&1024)!==0&&wn&&Wh(a.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=a.sibling,i!==null){i.return=a.return,Ln=i;break}Ln=a.return}}function Su(a,i,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:gi(a,d),m&4&&Yn(5,d);break;case 1:if(gi(a,d),m&4)if(a=d.stateNode,i===null)try{a.componentDidMount()}catch(tt){Re(d,d.return,tt)}else{var O=Wl(d.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(O,i,a.__reactInternalSnapshotBeforeUpdate)}catch(tt){Re(d,d.return,tt)}}m&64&&Zc(d),m&512&&ns(d,d.return);break;case 3:if(gi(a,d),m&64&&(a=d.updateQueue,a!==null)){if(i=null,d.child!==null)switch(d.child.tag){case 27:case 5:i=hr(d.child.stateNode);break;case 1:i=d.child.stateNode}try{bh(a,i)}catch(tt){Re(d,d.return,tt)}}break;case 27:Sn&&i===null&&m&4&&Cl(d);case 26:case 5:gi(a,d),i===null&&m&4&&yu(d),m&512&&ns(d,d.return);break;case 12:gi(a,d);break;case 13:gi(a,d),m&4&&$c(a,d),m&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=sf.bind(null,d),Af(a,d))));break;case 22:if(m=d.memoizedState!==null||xi,!m){i=i!==null&&i.memoizedState!==null||ln,O=xi;var j=ln;xi=m,(ln=i)&&!j?Wa(a,d,(d.subtreeFlags&8772)!==0):gi(a,d),xi=O,ln=j}break;case 30:break;default:gi(a,d)}}function Wc(a){var i=a.alternate;i!==null&&(a.alternate=null,Wc(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&vn(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Vn(a,i,d){for(d=d.child;d!==null;)bu(a,i,d),d=d.sibling}function bu(a,i,d){if(Ca&&typeof Ca.onCommitFiberUnmount=="function")try{Ca.onCommitFiberUnmount(vs,d)}catch{}switch(d.tag){case 26:if(Ga){ln||ka(d,i),Vn(a,i,d),d.memoizedState?Mf(d.memoizedState):d.stateNode&&xf(d.stateNode);break}case 27:if(Sn){ln||ka(d,i);var m=le,O=ye;pr(d.type)&&(le=d.stateNode,ye=!1),Vn(a,i,d),Df(d.stateNode),le=m,ye=O;break}case 5:ln||ka(d,i);case 6:if(wn){if(m=le,O=ye,le=null,Vn(a,i,d),le=m,ye=O,le!==null)if(ye)try{yf(le,d.stateNode)}catch(j){Re(d,i,j)}else try{Hu(le,d.stateNode)}catch(j){Re(d,i,j)}}else Vn(a,i,d);break;case 18:wn&&le!==null&&(ye?gd(le,d.stateNode):dd(le,d.stateNode));break;case 4:wn?(m=le,O=ye,le=d.stateNode.containerInfo,ye=!0,Vn(a,i,d),le=m,ye=O):(bi&&kc(d.stateNode,d,Cf()),Vn(a,i,d));break;case 0:case 11:case 14:case 15:ln||Xa(2,d,i),ln||Xa(4,d,i),Vn(a,i,d);break;case 1:ln||(ka(d,i),m=d.stateNode,typeof m.componentWillUnmount=="function"&&Jc(d,i,m)),Vn(a,i,d);break;case 21:Vn(a,i,d);break;case 22:ln=(m=ln)||d.memoizedState!==null,Vn(a,i,d),ln=m;break;default:Vn(a,i,d)}}function $c(a,i){if(an&&i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{hd(a)}catch(d){Re(i,i.return,d)}}function Yh(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new Md),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new Md),i;default:throw Error(o(435,a.tag))}}function tf(a,i){var d=Yh(a);i.forEach(function(m){var O=of.bind(null,a,m);d.has(m)||(d.add(m),m.then(O,O))})}function la(a,i){var d=i.deletions;if(d!==null)for(var m=0;m<d.length;m++){var O=d[m],j=a,tt=i;if(wn){var ot=tt;t:for(;ot!==null;){switch(ot.tag){case 27:if(Sn){if(pr(ot.type)){le=ot.stateNode,ye=!1;break t}break}case 5:le=ot.stateNode,ye=!1;break t;case 3:case 4:le=ot.stateNode.containerInfo,ye=!0;break t}ot=ot.return}if(le===null)throw Error(o(160));bu(j,tt,O),le=null,ye=!1}else bu(j,tt,O);j=O.alternate,j!==null&&(j.return=null),O.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Vh(i,a),i=i.sibling}function Vh(a,i){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:la(i,a),ra(a),m&4&&(Xa(3,a,a.return),Yn(3,a),Xa(5,a,a.return));break;case 1:la(i,a),ra(a),m&512&&(ln||d===null||ka(d,d.return)),m&64&&xi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:if(Ga){var O=ce;if(la(i,a),ra(a),m&512&&(ln||d===null||ka(d,d.return)),m&4){m=d!==null?d.memoizedState:null;var j=a.memoizedState;d===null?j===null?a.stateNode===null?a.stateNode=yd(O,a.type,a.memoizedProps,a):Ku(O,a.type,a.stateNode):a.stateNode=Qu(O,j,a.memoizedProps):m!==j?(m===null?d.stateNode!==null&&xf(d.stateNode):Mf(m),j===null?Ku(O,a.type,a.stateNode):Qu(O,j,a.memoizedProps)):j===null&&a.stateNode!==null&&Fc(a,a.memoizedProps,d.memoizedProps)}break}case 27:if(Sn){la(i,a),ra(a),m&512&&(ln||d===null||ka(d,d.return)),d!==null&&m&4&&Fc(a,a.memoizedProps,d.memoizedProps);break}case 5:if(la(i,a),ra(a),m&512&&(ln||d===null||ka(d,d.return)),wn){if(a.flags&32){O=a.stateNode;try{Ai(O)}catch(Gt){Re(a,a.return,Gt)}}m&4&&a.stateNode!=null&&(O=a.memoizedProps,Fc(a,O,d!==null?d.memoizedProps:O)),m&1024&&(nc=!0)}break;case 6:if(la(i,a),ra(a),m&4&&wn){if(a.stateNode===null)throw Error(o(162));m=a.memoizedProps,d=d!==null?d.memoizedProps:m,O=a.stateNode;try{vf(O,d,m)}catch(Gt){Re(a,a.return,Gt)}}break;case 3:if(Ga?(M0(),O=ce,ce=Iu(i.containerInfo),la(i,a),ce=O):la(i,a),ra(a),m&4){if(wn&&an&&d!==null&&d.memoizedState.isDehydrated)try{fd(i.containerInfo)}catch(Gt){Re(a,a.return,Gt)}if(bi){m=i.containerInfo,d=i.pendingChildren;try{Lu(m,d)}catch(Gt){Re(a,a.return,Gt)}}}nc&&(nc=!1,ef(a));break;case 4:Ga?(d=ce,ce=Iu(a.stateNode.containerInfo),la(i,a),ra(a),ce=d):(la(i,a),ra(a)),m&4&&bi&&kc(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:la(i,a),ra(a);break;case 13:la(i,a),ra(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Br=wa()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,tf(a,m)));break;case 22:O=a.memoizedState!==null;var tt=d!==null&&d.memoizedState!==null,ot=xi,bt=ln;if(xi=ot||O,ln=bt||tt,la(i,a),ln=bt,xi=ot,ra(a),m&8192&&(i=a.stateNode,i._visibility=O?i._visibility&-2:i._visibility|1,O&&(d===null||tt||xi||ln||Xn(a)),wn)){t:if(d=null,wn)for(i=a;;){if(i.tag===5||Ga&&i.tag===26){if(d===null){tt=d=i;try{j=tt.stateNode,O?ju(j):bf(tt.stateNode,tt.memoizedProps)}catch(Gt){Re(tt,tt.return,Gt)}}}else if(i.tag===6){if(d===null){tt=i;try{var Ut=tt.stateNode;O?Sf(Ut):kh(Ut,tt.memoizedProps)}catch(Gt){Re(tt,tt.return,Gt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;d===i&&(d=null),i=i.return}d===i&&(d=null),i.sibling.return=i.return,i=i.sibling}}m&4&&(m=a.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,tf(a,d))));break;case 19:la(i,a),ra(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,tf(a,m)));break;case 30:break;case 21:break;default:la(i,a),ra(a)}}function ra(a){var i=a.flags;if(i&2){try{if(wn){for(var d,m=a.return;m!==null;){if($l(m)){d=m;break}m=m.return}if(d==null)throw Error(o(160));switch(d.tag){case 27:if(Sn){var O=d.stateNode,j=oo(a);as(a,j,O);break}case 5:var tt=d.stateNode;d.flags&32&&(Ai(tt),d.flags&=-33);var ot=oo(a);as(a,ot,tt);break;case 3:case 4:var bt=d.stateNode.containerInfo,Ut=oo(a);tr(a,Ut,bt);break;default:throw Error(o(161))}}}catch(Gt){Re(a,a.return,Gt)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function ef(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;ef(i),i.tag===5&&i.flags&1024&&dr(i.stateNode),a=a.sibling}}function gi(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Su(a,i.alternate,i),i=i.sibling}function Xn(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Xa(4,i,i.return),Xn(i);break;case 1:ka(i,i.return);var d=i.stateNode;typeof d.componentWillUnmount=="function"&&Jc(i,i.return,d),Xn(i);break;case 27:Sn&&Df(i.stateNode);case 26:case 5:ka(i,i.return),Xn(i);break;case 22:i.memoizedState===null&&Xn(i);break;case 30:Xn(i);break;default:Xn(i)}a=a.sibling}}function Wa(a,i,d){for(d=d&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,O=a,j=i,tt=j.flags;switch(j.tag){case 0:case 11:case 15:Wa(O,j,d),Yn(4,j);break;case 1:if(Wa(O,j,d),m=j,O=m.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Ut){Re(m,m.return,Ut)}if(m=j,O=m.updateQueue,O!==null){var ot=m.stateNode;try{var bt=O.shared.hiddenCallbacks;if(bt!==null)for(O.shared.hiddenCallbacks=null,O=0;O<bt.length;O++)Io(bt[O],ot)}catch(Ut){Re(m,m.return,Ut)}}d&&tt&64&&Zc(j),ns(j,j.return);break;case 27:Sn&&Cl(j);case 26:case 5:Wa(O,j,d),d&&m===null&&tt&4&&yu(j),ns(j,j.return);break;case 12:Wa(O,j,d);break;case 13:Wa(O,j,d),d&&tt&4&&$c(O,j);break;case 22:j.memoizedState===null&&Wa(O,j,d),ns(j,j.return);break;case 30:break;default:Wa(O,j,d)}i=i.sibling}}function va(a,i){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Tn(d))}function El(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Tn(a))}function Ia(a,i,d,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)uo(a,i,d,m),i=i.sibling}function uo(a,i,d,m){var O=i.flags;switch(i.tag){case 0:case 11:case 15:Ia(a,i,d,m),O&2048&&Yn(9,i);break;case 1:Ia(a,i,d,m);break;case 3:Ia(a,i,d,m),O&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Tn(a)));break;case 12:if(O&2048){Ia(a,i,d,m),a=i.stateNode;try{var j=i.memoizedProps,tt=j.id,ot=j.onPostCommit;typeof ot=="function"&&ot(tt,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(bt){Re(i,i.return,bt)}}else Ia(a,i,d,m);break;case 13:Ia(a,i,d,m);break;case 23:break;case 22:j=i.stateNode,tt=i.alternate,i.memoizedState!==null?j._visibility&2?Ia(a,i,d,m):er(a,i):j._visibility&2?Ia(a,i,d,m):(j._visibility|=2,Xi(a,i,d,m,(i.subtreeFlags&10256)!==0)),O&2048&&va(tt,i);break;case 24:Ia(a,i,d,m),O&2048&&El(i.alternate,i);break;default:Ia(a,i,d,m)}}function Xi(a,i,d,m,O){for(O=O&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var j=a,tt=i,ot=d,bt=m,Ut=tt.flags;switch(tt.tag){case 0:case 11:case 15:Xi(j,tt,ot,bt,O),Yn(8,tt);break;case 23:break;case 22:var Gt=tt.stateNode;tt.memoizedState!==null?Gt._visibility&2?Xi(j,tt,ot,bt,O):er(j,tt):(Gt._visibility|=2,Xi(j,tt,ot,bt,O)),O&&Ut&2048&&va(tt.alternate,tt);break;case 24:Xi(j,tt,ot,bt,O),O&&Ut&2048&&El(tt.alternate,tt);break;default:Xi(j,tt,ot,bt,O)}i=i.sibling}}function er(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var d=a,m=i,O=m.flags;switch(m.tag){case 22:er(d,m),O&2048&&va(m.alternate,m);break;case 24:er(d,m),O&2048&&El(m.alternate,m);break;default:er(d,m)}i=i.sibling}}function Na(a){if(a.subtreeFlags&pe)for(a=a.child;a!==null;)nf(a),a=a.sibling}function nf(a){switch(a.tag){case 26:Na(a),a.flags&pe&&(a.memoizedState!==null?_o(ce,a.memoizedState,a.memoizedProps):qe(a.type,a.memoizedProps));break;case 5:Na(a),a.flags&pe&&qe(a.type,a.memoizedProps);break;case 3:case 4:if(Ga){var i=ce;ce=Iu(a.stateNode.containerInfo),Na(a),ce=i}else Na(a);break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=pe,pe=16777216,Na(a),pe=i):Na(a));break;default:Na(a)}}function co(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function pi(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var m=i[d];Ln=m,Cu(m,a)}co(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Xh(a),a=a.sibling}function Xh(a){switch(a.tag){case 0:case 11:case 15:pi(a),a.flags&2048&&Xa(9,a,a.return);break;case 3:pi(a);break;case 12:pi(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,$n(a)):pi(a);break;default:pi(a)}}function $n(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var m=i[d];Ln=m,Cu(m,a)}co(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Xa(8,i,i.return),$n(i);break;case 22:d=i.stateNode,d._visibility&2&&(d._visibility&=-3,$n(i));break;default:$n(i)}a=a.sibling}}function Cu(a,i){for(;Ln!==null;){var d=Ln;switch(d.tag){case 0:case 11:case 15:Xa(8,d,i);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Tn(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Ln=m;else t:for(d=a;Ln!==null;){m=Ln;var O=m.sibling,j=m.return;if(Wc(m),m===d){Ln=null;break t}if(O!==null){O.return=j,Ln=O;break t}Ln=j}}}function $a(a){var i=Qa(a);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(o(364));return i}if(a=A0(a),a===null)throw Error(o(362));return a.stateNode.current}function Eu(a,i){var d=a.tag;switch(i.$$typeof){case ea:if(a.type===i.value)return!0;break;case si:t:{for(i=i.value,a=[a,0],d=0;d<a.length;){var m=a[d++],O=m.tag,j=a[d++],tt=i[j];if(O!==5&&O!==26&&O!==27||!gr(m)){for(;tt!=null&&Eu(m,tt);)j++,tt=i[j];if(j===i.length){i=!0;break t}else for(m=m.child;m!==null;)a.push(m,j),m=m.sibling}}i=!1}return i;case ll:if((d===5||d===26||d===27)&&Jh(a.stateNode,i.value))return!0;break;case Ja:if((d===5||d===6||d===26||d===27)&&(a=gf(a),a!==null&&0<=a.indexOf(i.value)))return!0;break;case Cs:if((d===5||d===26||d===27)&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ls(a){switch(a.$$typeof){case ea:return"<"+(R(a.value)||"Unknown")+">";case si:return":has("+(ls(a)||"")+")";case ll:return'[role="'+a.value+'"]';case Ja:return'"'+a.value+'"';case Cs:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function Tl(a,i){var d=[];a=[a,0];for(var m=0;m<a.length;){var O=a[m++],j=O.tag,tt=a[m++],ot=i[tt];if(j!==5&&j!==26&&j!==27||!gr(O)){for(;ot!=null&&Eu(O,ot);)tt++,ot=i[tt];if(tt===i.length)d.push(O);else for(O=O.child;O!==null;)a.push(O,tt),O=O.sibling}}return d}function fo(a,i){if(!Ti)throw Error(o(363));a=$a(a),a=Tl(a,i),i=[],a=Array.from(a);for(var d=0;d<a.length;){var m=a[d++],O=m.tag;if(O===5||O===26||O===27)gr(m)||i.push(m.stateNode);else for(m=m.child;m!==null;)a.push(m),m=m.sibling}return i}function ya(){if((me&2)!==0&&Se!==0)return Se&-Se;if(te.T!==null){var a=Oi;return a!==0?a:mn()}return Ul()}function Tu(){Fn===0&&(Fn=(Se&536870912)===0||Ue?w():536870912);var a=La.current;return a!==null&&(a.flags|=32),Fn}function Sa(a,i,d){(a===Xe&&(xe===2||xe===9)||a.cancelPendingCommit!==null)&&(In(a,0),ti(a,Se,Fn,!1)),T(a,d),((me&2)===0||a!==Xe)&&(a===Xe&&((me&2)===0&&(en|=d),tn===4&&ti(a,Se,Fn,!1)),pn(a))}function Da(a,i,d){if((me&6)!==0)throw Error(o(327));var m=!d&&(i&124)===0&&(i&a.expiredLanes)===0||B(a,i),O=m?Ih(a,i):ho(a,i,!0),j=m;do{if(O===0){rl&&!m&&ti(a,i,0,!1);break}else{if(d=a.current.alternate,j&&!rs(d)){O=ho(a,i,!1),j=!1;continue}if(O===2){if(j=i,a.errorRecoveryDisabledLanes&j)var tt=0;else tt=a.pendingLanes&-536870913,tt=tt!==0?tt:tt&536870912?536870912:0;if(tt!==0){i=tt;t:{var ot=a;O=zr;var bt=an&&ot.current.memoizedState.isDehydrated;if(bt&&(In(ot,tt).flags|=256),tt=ho(ot,tt,!1),tt!==2){if(ac&&!bt){ot.errorRecoveryDisabledLanes|=j,en|=j,O=4;break t}j=na,na=O,j!==null&&(na===null?na=j:na.push.apply(na,j))}O=tt}if(j=!1,O!==2)continue}}if(O===1){In(a,0),ti(a,i,0,!0);break}t:{switch(m=a,j=O,j){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:ti(m,i,Fn,!Ni);break t;case 2:na=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(O=Br+300-wa(),10<O)){if(ti(m,i,Fn,!Ni),H(m,0,!0)!==0)break t;m.timeoutHandle=Zh(nr.bind(null,m,d,na,aa,ic,i,Fn,en,_a,Ni,j,2,-0,0),O);break t}nr(m,d,na,aa,ic,i,Fn,en,_a,Ni,j,0,-0,0)}}break}while(!0);pn(a)}function nr(a,i,d,m,O,j,tt,ot,bt,Ut,Gt,It,Qt,de){if(a.timeoutHandle=yi,It=i.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(he(),nf(i),It=On(),It!==null)){a.cancelPendingCommit=It(Qi.bind(null,a,i,j,d,m,O,tt,ot,bt,Gt,1,Qt,de)),ti(a,j,tt,!Ut);return}Qi(a,i,j,d,m,O,tt,ot,bt)}function rs(a){for(var i=a;;){var d=i.tag;if((d===0||d===11||d===15)&&i.flags&16384&&(d=i.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var O=d[m],j=O.getSnapshot;O=O.value;try{if(!ca(j(),O))return!1}catch{return!1}}if(d=i.child,i.subtreeFlags&16384&&d!==null)d.return=i,i=d;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(a,i,d,m){i&=~Di,i&=~en,a.suspendedLanes|=i,a.pingedLanes&=~i,m&&(a.warmLanes|=i),m=a.expirationTimes;for(var O=i;0<O;){var j=31-ua(O),tt=1<<j;m[j]=-1,O&=~tt}d!==0&&U(a,d,i)}function ss(){return(me&6)===0?(ut(0),!1):!0}function ba(){if(re!==null){if(xe===0)var a=re.return;else a=re,Zn=Gl=null,qi(a),Aa=null,xr=0,a=re;for(;a!==null;)Ph(a.alternate,a),a=a.return;re=null}}function In(a,i){var d=a.timeoutHandle;d!==yi&&(a.timeoutHandle=yi,gs(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),ba(),Xe=a,re=d=We(a.current,null),Se=i,xe=0,Je=null,Ni=!1,rl=B(a,i),ac=!1,_a=Fn=Di=en=da=tn=0,na=zr=null,ic=!1,(i&8)!==0&&(i|=i&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=i;0<m;){var O=31-ua(m),j=1<<O;i|=a[O],m&=~j}return Fa=i,Qr(),d}function Ii(a,i){ee=null,te.H=Jn,i===Er||i===Tr?(i=Sh(),xe=3):i===Do?(i=Sh(),xe=4):xe=i===Yf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Je=i,re===null&&(tn=1,$r(a,Z(i,a.current)))}function ei(){var a=La.current;return a===null?!0:(Se&4194048)===Se?ha===null:(Se&62914560)===Se||(Se&536870912)!==0?a===ha:!1}function ni(){var a=te.H;return te.H=Jn,a===null?Jn:a}function mi(){var a=te.A;return te.A=Pe,a}function Au(){tn=4,Ni||(Se&4194048)!==Se&&La.current!==null||(rl=!0),(da&134217727)===0&&(en&134217727)===0||Xe===null||ti(Xe,Se,Fn,!1)}function ho(a,i,d){var m=me;me|=2;var O=ni(),j=mi();(Xe!==a||Se!==i)&&(aa=null,In(a,i)),i=!1;var tt=tn;t:do try{if(xe!==0&&re!==null){var ot=re,bt=Je;switch(xe){case 8:ba(),tt=6;break t;case 3:case 2:case 9:case 6:La.current===null&&(i=!0);var Ut=xe;if(xe=0,Je=null,Ua(a,ot,bt,Ut),d&&rl){tt=0;break t}break;default:Ut=xe,xe=0,Je=null,Ua(a,ot,bt,Ut)}}af(),tt=tn;break}catch(Gt){Ii(a,Gt)}while(!0);return i&&a.shellSuspendCounter++,Zn=Gl=null,me=m,te.H=O,te.A=j,re===null&&(Xe=null,Se=0,Qr()),tt}function af(){for(;re!==null;)Qe(re)}function Ih(a,i){var d=me;me|=2;var m=ni(),O=mi();Xe!==a||Se!==i?(aa=null,Gr=wa()+500,In(a,i)):rl=B(a,i);t:do try{if(xe!==0&&re!==null){i=re;var j=Je;e:switch(xe){case 1:xe=0,Je=null,Ua(a,i,j,1);break;case 2:case 9:if(fl(j)){xe=0,Je=null,Ee(i);break}i=function(){xe!==2&&xe!==9||Xe!==a||(xe=7),pn(a)},j.then(i,i);break t;case 3:xe=7;break t;case 4:xe=5;break t;case 7:fl(j)?(xe=0,Je=null,Ee(i)):(xe=0,Je=null,Ua(a,i,j,7));break;case 5:var tt=null;switch(re.tag){case 26:tt=re.memoizedState;case 5:case 27:var ot=re,bt=ot.type,Ut=ot.pendingProps;if(tt?Nf(tt):Ei(bt,Ut)){xe=0,Je=null;var Gt=ot.sibling;if(Gt!==null)re=Gt;else{var It=ot.return;It!==null?(re=It,sa(It)):re=null}break e}}xe=0,Je=null,Ua(a,i,j,5);break;case 6:xe=0,Je=null,Ua(a,i,j,6);break;case 8:ba(),tn=6;break t;default:throw Error(o(462))}}Qn();break}catch(Qt){Ii(a,Qt)}while(!0);return Zn=Gl=null,te.H=m,te.A=O,me=d,re!==null?0:(Xe=null,Se=0,Qr(),tn)}function Qn(){for(;re!==null&&!Ju();)Qe(re)}function Qe(a){var i=es(a.alternate,a,Fa);a.memoizedProps=a.pendingProps,i===null?sa(a):re=i}function Ee(a){var i=a,d=i.alternate;switch(i.tag){case 15:case 0:i=cu(d,i,i.pendingProps,i.type,void 0,Se);break;case 11:i=cu(d,i,i.pendingProps,i.type.render,i.ref,Se);break;case 5:qi(i);default:Ph(d,i),i=re=go(i,Fa),i=es(d,i,Fa)}a.memoizedProps=a.pendingProps,i===null?sa(a):re=i}function Ua(a,i,d,m){Zn=Gl=null,qi(i),Aa=null,xr=0;var O=i.return;try{if(C0(a,O,i,d,Se)){tn=1,$r(a,Z(d,a.current)),re=null;return}}catch(j){if(O!==null)throw re=O,j;tn=1,$r(a,Z(d,a.current)),re=null;return}i.flags&32768?(Ue||m===1?a=!0:rl||(Se&536870912)!==0?a=!1:(Ni=a=!0,(m===2||m===9||m===3||m===6)&&(m=La.current,m!==null&&m.tag===13&&(m.flags|=16384))),_u(i,a)):sa(i)}function sa(a){var i=a;do{if((i.flags&32768)!==0){_u(i,Ni);return}a=i.return;var d=E0(i.alternate,i,Fa);if(d!==null){re=d;return}if(i=i.sibling,i!==null){re=i;return}re=i=a}while(i!==null);tn===0&&(tn=5)}function _u(a,i){do{var d=T0(a.alternate,a);if(d!==null){d.flags&=32767,re=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!i&&(a=a.sibling,a!==null)){re=a;return}re=a=d}while(a!==null);tn=6,re=null}function Qi(a,i,d,m,O,j,tt,ot,bt){a.cancelPendingCommit=null;do ir();while(He!==0);if((me&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(j=i.lanes|i.childLanes,j|=ec,y(a,d,j,tt,ot,bt),a===Xe&&(re=Xe=null,Se=0),wr=i,ol=a,Es=d,Ui=j,Ts=O,lc=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,us(zf,function(){return os(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=te.T,te.T=null,O=Ci(),Rn(2),tt=me,me|=4;try{is(a,i,d)}finally{me=tt,Rn(O),te.T=m}}He=1,lf(),rf(),ar()}}function lf(){if(He===1){He=0;var a=ol,i=wr,d=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||d){d=te.T,te.T=null;var m=Ci();Rn(2);var O=me;me|=4;try{Vh(i,a),Co(a.containerInfo)}finally{me=O,Rn(m),te.T=d}}a.current=i,He=2}}function rf(){if(He===2){He=0;var a=ol,i=wr,d=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||d){d=te.T,te.T=null;var m=Ci();Rn(2);var O=me;me|=4;try{Su(a,i.alternate,i)}finally{me=O,Rn(m),te.T=d}}He=3}}function ar(){if(He===4||He===3){He=0,Td();var a=ol,i=wr,d=Es,m=lc;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?He=5:(He=0,wr=ol=null,Al(a,a.pendingLanes));var O=a.pendingLanes;if(O===0&&(sl=null),Q(d),i=i.stateNode,Ca&&typeof Ca.onCommitFiberRoot=="function")try{Ca.onCommitFiberRoot(vs,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=te.T,O=Ci(),Rn(2),te.T=null;try{for(var j=a.onRecoverableError,tt=0;tt<m.length;tt++){var ot=m[tt];j(ot.value,{componentStack:ot.stack})}}finally{te.T=i,Rn(O)}}(Es&3)!==0&&ir(),pn(a),O=a.pendingLanes,(d&4194090)!==0&&(O&42)!==0?a===rc?zi++:(zi=0,rc=a):zi=0,ut(0)}}function Al(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,Tn(i)))}function ir(a){return lf(),rf(),ar(),os()}function os(){if(He!==5)return!1;var a=ol,i=Ui;Ui=0;var d=Q(Es),m=32>d?32:d;d=te.T;var O=Ci();try{Rn(m),te.T=null,m=Ts,Ts=null;var j=ol,tt=Es;if(He=0,wr=ol=null,Es=0,(me&6)!==0)throw Error(o(331));var ot=me;if(me|=4,Xh(j.current),uo(j,j.current,tt,m),me=ot,ut(0,!1),Ca&&typeof Ca.onPostCommitFiberRoot=="function")try{Ca.onPostCommitFiberRoot(vs,j)}catch{}return!0}finally{Rn(O),te.T=d,Al(a,i)}}function Ru(a,i,d){i=Z(d,i),i=Pc(a.stateNode,i,2),a=Li(a,i,2),a!==null&&(T(a,2),pn(a))}function Re(a,i,d){if(a.tag===3)Ru(a,a,d);else for(;i!==null;){if(i.tag===3){Ru(i,a,d);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(sl===null||!sl.has(m))){a=Z(d,a),d=Uh(2),m=Li(i,d,2),m!==null&&(Yc(d,m,i,a),T(m,2),pn(m));break}}i=i.return}}function ai(a,i,d){var m=a.pingCache;if(m===null){m=a.pingCache=new jl;var O=new Set;m.set(i,O)}else O=m.get(i),O===void 0&&(O=new Set,m.set(i,O));O.has(d)||(ac=!0,O.add(d),a=_l.bind(null,a,i,d),i.then(a,a))}function _l(a,i,d){var m=a.pingCache;m!==null&&m.delete(i),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Xe===a&&(Se&d)===d&&(tn===4||tn===3&&(Se&62914560)===Se&&300>wa()-Br?(me&2)===0&&In(a,0):Di|=d,_a===Se&&(_a=0)),pn(a)}function vi(a,i){i===0&&(i=M()),a=Ql(a,i),a!==null&&(T(a,i),pn(a))}function sf(a){var i=a.memoizedState,d=0;i!==null&&(d=i.retryLane),vi(a,d)}function of(a,i){var d=0;switch(a.tag){case 13:var m=a.stateNode,O=a.memoizedState;O!==null&&(d=O.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(o(314))}m!==null&&m.delete(i),vi(a,d)}function us(a,i){return xo(a,i)}function Ou(a,i,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(a){return a=a.prototype,!(!a||!a.isReactComponent)}function We(a,i){var d=a.alternate;return d===null?(d=s(a.tag,i,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=i,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,i=a.dependencies,d.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function go(a,i){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,i=d.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function po(a,i,d,m,O,j){var tt=0;if(m=a,typeof a=="function")Ki(a)&&(tt=1);else if(typeof a=="string")tt=Ga&&Sn?Of(a,d,Un.current)?26:ms(a)?27:5:Ga?Of(a,d,Un.current)?26:5:Sn&&ms(a)?27:5;else t:switch(a){case Ol:return a=s(31,d,i,O),a.elementType=Ol,a.lanes=j,a;case or:return lr(d.children,O,j,i);case ur:tt=8,O|=24;break;case mo:return a=s(12,d,i,O|2),a.elementType=mo,a.lanes=j,a;case Fi:return a=s(13,d,i,O),a.elementType=Fi,a.lanes=j,a;case ki:return a=s(19,d,i,O),a.elementType=ki,a.lanes=j,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Du:case Ji:tt=10;break t;case vo:tt=9;break t;case Uu:tt=11;break t;case zu:tt=14;break t;case Wi:tt=16,m=null;break t}tt=29,d=Error(o(130,a===null?"null":typeof a,"")),m=null}return i=s(tt,d,i,O),i.elementType=a,i.type=m,i.lanes=j,i}function lr(a,i,d,m){return a=s(7,a,m,i),a.lanes=d,a}function uf(a,i,d){return a=s(6,a,null,i),a.lanes=d,a}function cf(a,i,d){return i=s(4,a.children!==null?a.children:[],a.key,i),i.lanes=d,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}function _n(a,i,d,m,O,j,tt,ot){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yi,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=A(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A(0),this.hiddenUpdates=A(null),this.identifierPrefix=m,this.onUncaughtError=O,this.onCaughtError=j,this.onRecoverableError=tt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function Mu(a,i,d,m,O,j,tt,ot,bt,Ut,Gt,It){return a=new _n(a,i,d,tt,ot,bt,Ut,It),i=1,j===!0&&(i|=24),j=s(3,null,null,i),a.current=j,j.stateNode=a,i=on(),i.refCount++,a.pooledCache=i,i.refCount++,j.memoizedState={element:m,isDehydrated:d,cache:i},Xs(j),a}function cs(a){return a?(a=zl,a):zl}function fs(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=p(i),a=a!==null?g(a):null,a===null?null:hr(a.stateNode)}function xu(a,i,d,m,O,j){O=cs(O),m.context===null?m.context=O:m.pendingContext=O,m=ji(i),m.payload={element:d},j=j===void 0?null:j,j!==null&&(m.callback=j),d=Li(a,m,i),d!==null&&(Sa(d,a,i),Pa(d,a,i))}function rr(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<i?d:i}}function Rl(a,i){rr(a,i),(a=a.alternate)&&rr(a,i)}var Ce={},Qh=f0(),za=y5(),Nu=Object.assign,sr=Symbol.for("react.element"),hs=Symbol.for("react.transitional.element"),Zi=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),ur=Symbol.for("react.strict_mode"),mo=Symbol.for("react.profiler"),Du=Symbol.for("react.provider"),vo=Symbol.for("react.consumer"),Ji=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),Fi=Symbol.for("react.suspense"),ki=Symbol.for("react.suspense_list"),zu=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),Ol=Symbol.for("react.activity"),yo=Symbol.for("react.memo_cache_sentinel"),So=Symbol.iterator,bo=Symbol.for("react.client.reference"),cr=Array.isArray,te=Qh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fr=n.rendererVersion,Kh=n.rendererPackageName,$i=n.extraDevToolsConfig,hr=n.getPublicInstance,ff=n.getRootHostContext,Ml=n.getChildHostContext,xl=n.prepareForCommit,Co=n.resetAfterCommit,hf=n.createInstance;n.cloneMutableInstance;var Eo=n.appendInitialChild,ds=n.finalizeInitialChildren,Nl=n.shouldSetTextContent,df=n.createTextInstance;n.cloneMutableTextInstance;var Zh=n.scheduleTimeout,gs=n.cancelTimeout,yi=n.noTimeout,Si=n.isPrimaryRenderer;n.warnsIfNotActing;var wn=n.supportsMutation,bi=n.supportsPersistence,an=n.supportsHydration,Qa=n.getInstanceFromNode;n.beforeActiveInstanceBlur;var Dl=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var Rn=n.setCurrentUpdatePriority,Ci=n.getCurrentUpdatePriority,Ul=n.resolveUpdatePriority;n.trackSchedulerEvent,n.resolveEventType,n.resolveEventTimeStamp;var Ba=n.shouldAttemptEagerTransition,vn=n.detachDeletedInstance;n.requestPostPaintCallback;var Bu=n.maySuspendCommit,Ei=n.preloadInstance,he=n.startSuspendingCommit,qe=n.suspendInstance;n.suspendOnActiveViewTransition;var On=n.waitForCommitToBeReady,tl=n.NotPendingTransition,Ka=n.HostTransitionContext,dr=n.resetFormInstance;n.bindToConsole;var Gu=n.supportsMicrotasks,To=n.scheduleMicrotask,Ti=n.supportsTestSelectors,A0=n.findFiberRoot,gn=n.getBoundingRect,gf=n.getTextContent,gr=n.isHiddenSubtree,Jh=n.matchAccessibilityRole,Fh=n.setFocusIfFocusable,_0=n.setupIntersectionObserver,pf=n.appendChild,mf=n.appendChildToContainer,vf=n.commitTextUpdate,oa=n.commitMount,yn=n.commitUpdate,wu=n.insertBefore,Ao=n.insertInContainerBefore,Hu=n.removeChild,yf=n.removeChildFromContainer,Ai=n.resetTextContent,ju=n.hideInstance,Sf=n.hideTextInstance,bf=n.unhideInstance,kh=n.unhideTextInstance;n.cancelViewTransitionName,n.cancelRootViewTransitionName,n.restoreRootViewTransitionName,n.cloneRootViewTransitionContainer,n.removeRootViewTransitionClone,n.measureClonedInstance,n.hasInstanceChanged,n.hasInstanceAffectedParent,n.startViewTransition,n.startGestureTransition,n.stopGestureTransition,n.getCurrentGestureOffset,n.subscribeToGestureDirection,n.createViewTransitionInstance;var Wh=n.clearContainer;n.createFragmentInstance,n.updateFragmentInstanceFiber,n.commitNewChildToFragmentInstance,n.deleteChildFromFragmentInstance;var $h=n.cloneInstance,Cf=n.createContainerChildSet,Ef=n.appendChildToContainerChildSet,td=n.finalizeContainerChildren,Lu=n.replaceContainerChildren,Tf=n.cloneHiddenInstance,ed=n.cloneHiddenTextInstance,qu=n.isSuspenseInstancePending,Pu=n.isSuspenseInstanceFallback,nd=n.getSuspenseInstanceFallbackErrorDetails,Af=n.registerSuspenseInstanceRetry,ad=n.canHydrateFormStateMarker,id=n.isFormStateMarkerMatching,_f=n.getNextHydratableSibling,ld=n.getNextHydratableSiblingAfterSingleton,rd=n.getFirstHydratableChild,R0=n.getFirstHydratableChildWithinContainer,sd=n.getFirstHydratableChildWithinSuspenseInstance,ps=n.getFirstHydratableChildWithinSingleton,od=n.canHydrateInstance,Yu=n.canHydrateTextInstance,Vu=n.canHydrateSuspenseInstance,ud=n.hydrateInstance,Rf=n.hydrateTextInstance,O0=n.hydrateSuspenseInstance,cd=n.getNextHydratableInstanceAfterSuspenseInstance,fd=n.commitHydratedContainer,hd=n.commitHydratedSuspenseInstance,dd=n.clearSuspenseBoundary,gd=n.clearSuspenseBoundaryFromContainer,Xu=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var pd=n.validateHydratableInstance,md=n.validateHydratableTextInstance,Ga=n.supportsResources,Of=n.isHostHoistableType,Iu=n.getHoistableRoot,vd=n.getResource,Qu=n.acquireResource,Mf=n.releaseResource,yd=n.hydrateHoistable,Ku=n.mountHoistable,xf=n.unmountHoistable,Sd=n.createHoistableInstance,M0=n.prepareToCommitHoistables,x0=n.mayResourceSuspendCommit,Nf=n.preloadResource,_o=n.suspendResource,Sn=n.supportsSingletons,Ro=n.resolveSingletonInstance,bd=n.acquireSingletonInstance,Df=n.releaseSingletonInstance,ms=n.isHostSingletonType,pr=n.isSingletonScope,Oo=[],mr=-1,zl={},ua=Math.clz32?Math.clz32:G,Cd=Math.log,Ed=Math.LN2,_i=256,Mo=4194304,xo=za.unstable_scheduleCallback,Zu=za.unstable_cancelCallback,Ju=za.unstable_shouldYield,Td=za.unstable_requestPaint,wa=za.unstable_now,Uf=za.unstable_ImmediatePriority,Ad=za.unstable_UserBlockingPriority,zf=za.unstable_NormalPriority,Bf=za.unstable_IdlePriority,Mn=za.log,Kn=za.unstable_setDisableYieldValue,vs=null,Ca=null,Fu,Gf,vr=!1,wf=new WeakMap,el=[],yr=0,ku=null,Sr=0,Ea=[],Ha=0,Bl=null,Ri=1,ii="",Un=E(null),br=E(null),nl=E(null),ys=E(null),Hn=null,bn=null,Ue=!1,al=null,li=!1,ri=Error(o(519)),ca=typeof Object.is=="function"?Object.is:At,Wu=E(null),Gl=null,Zn=null,Hf=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(d,m){a.push(m)}};this.abort=function(){i.aborted=!0,a.forEach(function(d){return d()})}},_d=za.unstable_scheduleCallback,$u=za.unstable_NormalPriority,Ke={$$typeof:Ji,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ve=null,Ss=null,jf=!1,No=!1,Cr=!1,ja=0,bs=null,tc=0,Oi=0,fa=null,Lf=te.S;te.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&ie(a,i),Lf!==null&&Lf(a,i)};var il=E(null),Rd=Object.prototype.hasOwnProperty,Er=Error(o(460)),Do=Error(o(474)),Tr=Error(o(542)),Uo={then:function(){}},Ta=null,Be=[],wl=0,ec=0,$e=!1,qf=!1,Ar=E(null),zo=E(0),Ge=0,ee=null,Te=null,Cn=null,Bo=!1,_r=!1,Rr=!1,Or=0,jn=0,ta=null,Od=0,Jn={readContext:ue,use:Fo,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn},Pf={readContext:ue,use:Fo,useCallback:function(a,i){return Dn().memoizedState=[a,i===void 0?null:i],a},useContext:ue,useEffect:wc,useImperativeHandle:function(a,i,d){d=d!=null?d.concat([a]):null,Pi(4194308,4,hi.bind(null,i,a),d)},useLayoutEffect:function(a,i){return Pi(4194308,4,a,i)},useInsertionEffect:function(a,i){Pi(4,2,a,i)},useMemo:function(a,i){var d=Dn();i=i===void 0?null:i;var m=a();if(Rr){I(!0);try{a()}finally{I(!1)}}return d.memoizedState=[m,i],m},useReducer:function(a,i,d){var m=Dn();if(d!==void 0){var O=d(i);if(Rr){I(!0);try{d(i)}finally{I(!1)}}}else O=i;return m.memoizedState=m.baseState=O,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:O},m.queue=a,a=a.dispatch=ks.bind(null,ee,a),[m.memoizedState,a]},useRef:function(a){var i=Dn();return a={current:a},i.memoizedState=a},useState:function(a){a=Ks(a);var i=a.queue,d=Rh.bind(null,ee,i);return i.dispatch=d,[a.memoizedState,d]},useDebugValue:Fl,useDeferredValue:function(a,i){var d=Dn();return Wr(d,a,i)},useTransition:function(){var a=Ks(!1);return a=Js.bind(null,ee,a.queue,!0,!1),Dn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,d){var m=ee,O=Dn();if(Ue){if(d===void 0)throw Error(o(407));d=d()}else{if(d=i(),Xe===null)throw Error(o(349));(Se&124)!==0||Wo(m,i,d)}O.memoizedState=d;var j={value:d,getSnapshot:i};return O.queue=j,wc(Qs.bind(null,m,j,a),[a]),m.flags|=2048,ma(9,Fr(),xc.bind(null,m,j,d,i),null),d},useId:function(){var a=Dn(),i=Xe.identifierPrefix;if(Ue){var d=ii,m=Ri;d=(m&~(1<<32-ua(m)-1)).toString(32)+d,i="«"+i+"R"+d,d=Or++,0<d&&(i+="H"+d.toString(32)),i+="»"}else d=Od++,i="«"+i+"r"+d.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:iu,useFormState:Gc,useActionState:Gc,useOptimistic:function(a){var i=Dn();i.memoizedState=i.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=d,i=Ws.bind(null,ee,!0,d),d.dispatch=i,[a,i]},useMemoCache:Jr,useCacheRefresh:function(){return Dn().memoizedState=lu.bind(null,ee)}},Mi={readContext:ue,use:Fo,useCallback:Yi,useContext:ue,useEffect:eu,useImperativeHandle:nu,useInsertionEffect:Hc,useLayoutEffect:kr,useMemo:au,useReducer:Va,useRef:tu,useState:function(){return Va(Ya)},useDebugValue:Fl,useDeferredValue:function(a,i){var d=An();return jc(d,Te.memoizedState,a,i)},useTransition:function(){var a=Va(Ya)[0],i=An().memoizedState;return[typeof a=="boolean"?a:Zr(a),i]},useSyncExternalStore:Eh,useId:ia,useHostTransitionStatus:iu,useFormState:$o,useActionState:$o,useOptimistic:function(a,i){var d=An();return Nc(d,Te,a,i)},useMemoCache:Jr,useCacheRefresh:ml},Mr={readContext:ue,use:Fo,useCallback:Yi,useContext:ue,useEffect:eu,useImperativeHandle:nu,useInsertionEffect:Hc,useLayoutEffect:kr,useMemo:au,useReducer:ko,useRef:tu,useState:function(){return ko(Ya)},useDebugValue:Fl,useDeferredValue:function(a,i){var d=An();return Te===null?Wr(d,a,i):jc(d,Te.memoizedState,a,i)},useTransition:function(){var a=ko(Ya)[0],i=An().memoizedState;return[typeof a=="boolean"?a:Zr(a),i]},useSyncExternalStore:Eh,useId:ia,useHostTransitionStatus:iu,useFormState:Zs,useActionState:Zs,useOptimistic:function(a,i){var d=An();return Te!==null?Nc(d,Te,a,i):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Jr,useCacheRefresh:ml},Aa=null,xr=0,Hl=Oh(!0),Za=Oh(!1),La=E(null),ha=null,hn=E(0),Nr={enqueueSetState:function(a,i,d){a=a._reactInternals;var m=ya(),O=ji(m);O.payload=i,d!=null&&(O.callback=d),i=Li(a,O,m),i!==null&&(Sa(i,a,m),Pa(i,a,m))},enqueueReplaceState:function(a,i,d){a=a._reactInternals;var m=ya(),O=ji(m);O.tag=1,O.payload=i,d!=null&&(O.callback=d),i=Li(a,O,m),i!==null&&(Sa(i,a,m),Pa(i,a,m))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var d=ya(),m=ji(d);m.tag=2,i!=null&&(m.callback=i),i=Li(a,m,d),i!==null&&(Sa(i,a,d),Pa(i,a,d))}},Dr=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Yf=Error(o(461)),zn=!1,Ur={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},xi=!1,ln=!1,nc=!1,Md=typeof WeakSet=="function"?WeakSet:Set,Ln=null,le=null,ye=!1,ce=null,pe=8192,Pe={getCacheForType:function(a){var i=ue(Ke),d=i.data.get(a);return d===void 0&&(d=a(),i.data.set(a,d)),d}},ea=0,si=1,ll=2,Cs=3,Ja=4;if(typeof Symbol=="function"&&Symbol.for){var Ze=Symbol.for;ea=Ze("selector.component"),si=Ze("selector.has_pseudo_class"),ll=Ze("selector.role"),Cs=Ze("selector.test_id"),Ja=Ze("selector.text")}var jl=typeof WeakMap=="function"?WeakMap:Map,me=0,Xe=null,re=null,Se=0,xe=0,Je=null,Ni=!1,rl=!1,ac=!1,Fa=0,tn=0,da=0,en=0,Di=0,Fn=0,_a=0,zr=null,na=null,ic=!1,Br=0,Gr=1/0,aa=null,sl=null,He=0,ol=null,wr=null,Es=0,Ui=0,Ts=null,lc=null,zi=0,rc=null;return Ce.attemptContinuousHydration=function(a){if(a.tag===13){var i=Ql(a,67108864);i!==null&&Sa(i,a,67108864),Rl(a,67108864)}},Ce.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var i=ya();i=L(i);var d=Ql(a,i);d!==null&&Sa(d,a,i),Rl(a,i)}},Ce.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var i=q(a.pendingLanes);if(i!==0){for(a.pendingLanes|=2,a.entangledLanes|=2;i;){var d=1<<31-ua(i);a.entanglements[1]|=d,i&=~d}pn(a),(me&6)===0&&(Gr=wa()+500,ut(0))}}break;case 13:i=Ql(a,2),i!==null&&Sa(i,a,2),ss(),Rl(a,2)}},Ce.batchedUpdates=function(a,i){return a(i)},Ce.createComponentSelector=function(a){return{$$typeof:ea,value:a}},Ce.createContainer=function(a,i,d,m,O,j,tt,ot,bt,Ut){return Mu(a,i,!1,null,d,m,j,tt,ot,bt,Ut,null)},Ce.createHasPseudoClassSelector=function(a){return{$$typeof:si,value:a}},Ce.createHydrationContainer=function(a,i,d,m,O,j,tt,ot,bt,Ut,Gt,It,Qt){return a=Mu(d,m,!0,a,O,j,ot,bt,Ut,Gt,It,Qt),a.context=cs(null),d=a.current,m=ya(),m=L(m),O=ji(m),O.callback=i??null,Li(d,O,m),i=m,a.current.lanes=i,T(a,i),pn(a),a},Ce.createPortal=function(a,i,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zi,key:m==null?null:""+m,children:a,containerInfo:i,implementation:d}},Ce.createRoleSelector=function(a){return{$$typeof:ll,value:a}},Ce.createTestNameSelector=function(a){return{$$typeof:Cs,value:a}},Ce.createTextSelector=function(a){return{$$typeof:Ja,value:a}},Ce.defaultOnCaughtError=function(a){console.error(a)},Ce.defaultOnRecoverableError=function(a){Dr(a)},Ce.defaultOnUncaughtError=function(a){Dr(a)},Ce.deferredUpdates=function(a){var i=te.T,d=Ci();try{return Rn(32),te.T=null,a()}finally{Rn(d),te.T=i}},Ce.discreteUpdates=function(a,i,d,m,O){var j=te.T,tt=Ci();try{return Rn(2),te.T=null,a(i,d,m,O)}finally{Rn(tt),te.T=j,me===0&&(Gr=wa()+500)}},Ce.findAllNodes=fo,Ce.findBoundingRects=function(a,i){if(!Ti)throw Error(o(363));i=fo(a,i),a=[];for(var d=0;d<i.length;d++)a.push(gn(i[d]));for(i=a.length-1;0<i;i--){d=a[i];for(var m=d.x,O=m+d.width,j=d.y,tt=j+d.height,ot=i-1;0<=ot;ot--)if(i!==ot){var bt=a[ot],Ut=bt.x,Gt=Ut+bt.width,It=bt.y,Qt=It+bt.height;if(m>=Ut&&j>=It&&O<=Gt&&tt<=Qt){a.splice(i,1);break}else if(m!==Ut||d.width!==bt.width||Qt<j||It>tt){if(!(j!==It||d.height!==bt.height||Gt<m||Ut>O)){Ut>m&&(bt.width+=Ut-m,bt.x=m),Gt<O&&(bt.width=O-Ut),a.splice(i,1);break}}else{It>j&&(bt.height+=It-j,bt.y=j),Qt<tt&&(bt.height=tt-It),a.splice(i,1);break}}}return a},Ce.findHostInstance=fs,Ce.findHostInstanceWithNoPortals=function(a){return a=p(a),a=a!==null?b(a):null,a===null?null:hr(a.stateNode)},Ce.findHostInstanceWithWarning=function(a){return fs(a)},Ce.flushPassiveEffects=ir,Ce.flushSyncFromReconciler=function(a){var i=me;me|=1;var d=te.T,m=Ci();try{if(Rn(2),te.T=null,a)return a()}finally{Rn(m),te.T=d,me=i,(me&6)===0&&ut(0)}},Ce.flushSyncWork=ss,Ce.focusWithin=function(a,i){if(!Ti)throw Error(o(363));for(a=$a(a),i=Tl(a,i),i=Array.from(i),a=0;a<i.length;){var d=i[a++],m=d.tag;if(!gr(d)){if((m===5||m===26||m===27)&&Fh(d.stateNode))return!0;for(d=d.child;d!==null;)i.push(d),d=d.sibling}}return!1},Ce.getFindAllNodesFailureDescription=function(a,i){if(!Ti)throw Error(o(363));var d=0,m=[];a=[$a(a),0];for(var O=0;O<a.length;){var j=a[O++],tt=j.tag,ot=a[O++],bt=i[ot];if((tt!==5&&tt!==26&&tt!==27||!gr(j))&&(Eu(j,bt)&&(m.push(ls(bt)),ot++,ot>d&&(d=ot)),ot<i.length))for(j=j.child;j!==null;)a.push(j,ot),j=j.sibling}if(d<i.length){for(a=[];d<i.length;d++)a.push(ls(i[d]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},Ce.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 27:case 5:return hr(a.child.stateNode);default:return a.child.stateNode}},Ce.injectIntoDevTools=function(){var a={bundleType:0,version:fr,rendererPackageName:Kh,currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if($i!==null&&(a.rendererConfig=$i),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)a=!0;else{try{vs=i.inject(a),Ca=i}catch{}a=!!i.checkDCE}}return a},Ce.isAlreadyRendering=function(){return(me&6)!==0},Ce.observeVisibleRects=function(a,i,d,m){if(!Ti)throw Error(o(363));a=fo(a,i);var O=_0(a,d,m).disconnect;return{disconnect:function(){O()}}},Ce.shouldError=function(){return null},Ce.shouldSuspend=function(){return!1},Ce.startHostTransition=function(a,i,d,m){if(a.tag!==5)throw Error(o(476));var O=Fs(a).queue;Js(a,O,i,tl,d===null?r:function(){var j=Fs(a).next.queue;return kl(a,j,{},ya()),d(m)})},Ce.updateContainer=function(a,i,d,m){var O=i.current,j=ya();return xu(O,j,a,i,d,m),j},Ce.updateContainerSync=function(a,i,d,m){return xu(i.current,2,a,i,d,m),2},Ce},h.exports.default=h.exports,Object.defineProperty(h.exports,"__esModule",{value:!0})})(Sg)),Sg.exports}var cm;function b5(){return cm||(cm=1,yg.exports=S5()),yg.exports}var C5=b5();const E5=vh(C5);var Eg={exports:{}},jr={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function T5(){return fm||(fm=1,jr.ConcurrentRoot=1,jr.ContinuousEventPriority=8,jr.DefaultEventPriority=32,jr.DiscreteEventPriority=2,jr.IdleEventPriority=268435456,jr.LegacyRoot=0,jr.NoEventPriority=0),jr}var hm;function A5(){return hm||(hm=1,Eg.exports=T5()),Eg.exports}var y0=A5();const dm={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let gm=!1,pm=!1;const c0=".react-konva-event",_5=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,R5=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,O5={};function S0(h,n,s=O5){if(!gm&&"zIndex"in n&&(console.warn(R5),gm=!0),!pm&&n.draggable){var r=n.x!==void 0||n.y!==void 0,o=n.onDragEnd||n.onDragMove;r&&!o&&(console.warn(_5),pm=!0)}for(var c in s)if(!dm[c]){var f=c.slice(0,2)==="on",p=s[c]!==n[c];if(f&&p){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),h.off(g,s[c])}var b=!n.hasOwnProperty(c);b&&h.setAttr(c,void 0)}var _=n._useStrictMode,R={},E=!1;const D={};for(var c in n)if(!dm[c]){var f=c.slice(0,2)==="on",S=s[c]!==n[c];if(f&&S){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),n[c]&&(D[g]=n[c])}!f&&(n[c]!==s[c]||_&&n[c]!==h.getAttr(c))&&(E=!0,R[c]=n[c])}E&&(h.setAttrs(R),Ps(h));for(var g in D)h.off(g+c0),h.on(g+c0,D[g])}function Ps(h){if(!Vt.autoDrawEnabled){var n=h.getLayer()||h.getStage();n&&n.batchDraw()}}var Tg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function M5(){return mm||(mm=1,(function(h){function n(x,P){var Z=x.length;x.push(P);t:for(;0<Z;){var k=Z-1>>>1,at=x[k];if(0<o(at,P))x[k]=P,x[Z]=at,Z=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var P=x[0],Z=x.pop();if(Z!==P){x[0]=Z;t:for(var k=0,at=x.length,F=at>>>1;k<F;){var lt=2*(k+1)-1,it=x[lt],X=lt+1,J=x[X];if(0>o(it,Z))X<at&&0>o(J,it)?(x[k]=J,x[X]=Z,k=X):(x[k]=it,x[lt]=Z,k=lt);else if(X<at&&0>o(J,Z))x[k]=J,x[X]=Z,k=X;else break t}}return P}function o(x,P){var Z=x.sortIndex-P.sortIndex;return Z!==0?Z:x.id-P.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;h.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();h.unstable_now=function(){return f.now()-p}}var g=[],b=[],_=1,R=null,E=3,D=!1,S=!1,G=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function w(x){for(var P=s(b);P!==null;){if(P.callback===null)r(b);else if(P.startTime<=x)r(b),P.sortIndex=P.expirationTime,n(g,P);else break;P=s(b)}}function M(x){if(G=!1,w(x),!S)if(s(g)!==null)S=!0,A||(A=!0,Q());else{var P=s(b);P!==null&&V(M,P.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return q?!0:!(h.unstable_now()-U<y)}function L(){if(q=!1,A){var x=h.unstable_now();U=x;var P=!0;try{t:{S=!1,G&&(G=!1,B(T),T=-1),D=!0;var Z=E;try{e:{for(w(x),R=s(g);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var at=k(R.expirationTime<=x);if(x=h.unstable_now(),typeof at=="function"){R.callback=at,w(x),P=!0;break e}R===s(g)&&r(g),w(x)}else r(g);R=s(g)}if(R!==null)P=!0;else{var F=s(b);F!==null&&V(M,F.startTime-x),P=!1}}break t}finally{R=null,E=Z,D=!1}P=void 0}}finally{P?Q():A=!1}}}var Q;if(typeof z=="function")Q=function(){z(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,K=I.port2;I.port1.onmessage=L,Q=function(){K.postMessage(null)}}else Q=function(){H(L,0)};function V(x,P){T=H(function(){x(h.unstable_now())},P)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(x){x.callback=null},h.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},h.unstable_getCurrentPriorityLevel=function(){return E},h.unstable_next=function(x){switch(E){case 1:case 2:case 3:var P=3;break;default:P=E}var Z=E;E=P;try{return x()}finally{E=Z}},h.unstable_requestPaint=function(){q=!0},h.unstable_runWithPriority=function(x,P){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Z=E;E=x;try{return P()}finally{E=Z}},h.unstable_scheduleCallback=function(x,P,Z){var k=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?k+Z:k):Z=k,x){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Z+at,x={id:_++,callback:P,priorityLevel:x,startTime:Z,expirationTime:at,sortIndex:-1},Z>k?(x.sortIndex=Z,n(b,x),s(g)===null&&x===s(b)&&(G?(B(T),T=-1):G=!0,V(M,Z-k))):(x.sortIndex=at,n(g,x),S||D||(S=!0,A||(A=!0,Q()))),x},h.unstable_shouldYield=N,h.unstable_wrapCallback=function(x){var P=E;return function(){var Z=E;E=P;try{return x.apply(this,arguments)}finally{E=Z}}}})(Ag)),Ag}var vm;function x5(){return vm||(vm=1,Tg.exports=M5()),Tg.exports}var _g=x5();const qv={},N5={};Cc.Node.prototype._applyProps=S0;let Pv=y0.DefaultEventPriority;function D5(h,n){if(typeof n=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${n}`);return}h.add(n),Ps(h)}function U5(h,n,s){let r=Cc[h];r||(console.error(`Konva has no node with the type ${h}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${h}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Cc.Group);const o={},c={};for(var f in n)if(f!=="ref"){var p=f.slice(0,2)==="on";p?c[f]=n[f]:o[f]=n[f]}const g=new r(o);return S0(g,c),g}function z5(h,n,s){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${h}"`)}function B5(h,n,s){return!1}function G5(h){return h}function w5(){return null}function H5(){return null}function j5(h,n,s,r){return N5}function L5(){}function q5(h){}function P5(h,n){return!1}function Y5(){return qv}function V5(){return qv}const X5=setTimeout,I5=clearTimeout,Q5=!0,K5=h=>{h()},Z5=-1;function J5(h,n){return!1}const F5=!1,k5=!1,W5=!0,$5=!1,t6=!1;function e6(h,n){n.parent===h?n.moveToTop():h.add(n),Ps(h)}function n6(h,n){n.parent===h?n.moveToTop():h.add(n),Ps(h)}function Yv(h,n,s){n._remove(),h.add(n),n.setZIndex(s.getZIndex()),Ps(h)}function a6(h,n,s){Yv(h,n,s)}function i6(h,n){n.destroy(),n.off(c0),Ps(h)}function l6(h,n){n.destroy(),n.off(c0),Ps(h)}function r6(h,n,s){console.error(`Text components are not yet supported in ReactKonva. You text is: "${s}"`)}function s6(h,n,s){}function o6(h,n,s,r){S0(h,r,s)}function u6(h){h.hide(),Ps(h)}function c6(h){}function f6(h,n){(n.visible==null||n.visible)&&h.show()}function h6(h,n){}function d6(h){}function g6(){}function p6(){return y0.DefaultEventPriority}function m6(){}function v6(){return null}function y6(h){Pv=h}function S6(){return Pv}function b6(){return y0.DiscreteEventPriority}function C6(){return!1}function E6(){}function T6(){return!1}function A6(){return!0}function _6(){}function R6(){}function O6(){return null}const M6=null;function x6(){}const N6=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:M6,appendChild:e6,appendChildToContainer:n6,appendInitialChild:D5,cancelTimeout:I5,clearContainer:d6,commitMount:s6,commitTextUpdate:r6,commitUpdate:o6,createInstance:U5,createTextInstance:z5,detachDeletedInstance:g6,finalizeInitialChildren:B5,getChildHostContext:V5,getCurrentEventPriority:p6,getCurrentUpdatePriority:S6,getInstanceFromScope:v6,getPublicInstance:G5,getRootHostContext:Y5,hideInstance:u6,hideTextInstance:c6,idlePriority:_g.unstable_IdlePriority,insertBefore:Yv,insertInContainerBefore:a6,isPrimaryRenderer:F5,maySuspendCommit:T6,noTimeout:Z5,now:_g.unstable_now,preloadInstance:A6,prepareForCommit:w5,preparePortalMount:H5,prepareScopeUpdate:m6,prepareUpdate:j5,removeChild:i6,removeChildFromContainer:l6,requestPostPaintCallback:E6,resetAfterCommit:L5,resetFormInstance:x6,resetTextContent:q5,resolveUpdatePriority:b6,run:_g.unstable_runWithPriority,scheduleMicrotask:K5,scheduleTimeout:X5,setCurrentUpdatePriority:y6,shouldAttemptEagerTransition:C6,shouldDeprioritizeSubtree:P5,shouldSetTextContent:J5,startSuspendingCommit:_6,supportsHydration:t6,supportsMicrotasks:Q5,supportsMutation:W5,supportsPersistence:$5,suspendInstance:R6,unhideInstance:f6,unhideTextInstance:h6,waitForCommitToBeReady:O6,warnsIfNotActing:k5},Symbol.toStringTag,{value:"Module"}));function Vv(h,n,s){if(!h)return;if(s(h)===!0)return h;let r=h.child;for(;r;){const o=Vv(r,n,s);if(o)return o;r=r.sibling}}function Xv(h){try{return Object.defineProperties(h,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return h}}const Ep=Xv(yt.createContext(null));class Iv extends yt.Component{render(){return yt.createElement(Ep.Provider,{value:this._reactInternals},this.props.children)}}function D6(){const h=yt.useContext(Ep);if(h===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=yt.useId();return yt.useMemo(()=>{for(const s of[h,h==null?void 0:h.alternate]){if(!s)continue;const r=Vv(s,!1,o=>{let c=o.memoizedState;for(;c;){if(c.memoizedState===n)return!0;c=c.next}});if(r)return r}},[h,n])}const U6=Symbol.for("react.context"),z6=h=>h!==null&&typeof h=="object"&&"$$typeof"in h&&h.$$typeof===U6;function B6(){const h=D6(),[n]=yt.useState(()=>new Map);n.clear();let s=h;for(;s;){const r=s.type;z6(r)&&r!==Ep&&!n.has(r)&&n.set(r,yt.use(Xv(r))),s=s.return}return n}function G6(){const h=B6();return yt.useMemo(()=>Array.from(h.keys()).reduce((n,s)=>r=>yt.createElement(n,null,yt.createElement(s.Provider,{...r,value:h.get(s)})),n=>yt.createElement(Iv,{...n})),[h])}if(xn.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function w6(h){const n=xn.useRef({});return xn.useLayoutEffect(()=>{n.current=h}),xn.useLayoutEffect(()=>()=>{n.current={}},[]),n.current}const H6=()=>{const h=xn.useRef(0);return xn.useMemo(()=>{h.current++},[]),h.current>1},j6=h=>{const n=xn.useRef(null),s=xn.useRef(null),r=xn.useRef(null),o=w6(h),c=G6(),f=xn.useRef(!1),p=b=>{const{forwardedRef:_}=h;_&&(typeof _=="function"?_(b):_.current=b)},g=H6();return xn.useLayoutEffect(()=>f.current&&g?()=>{f.current=!1,p(null),yc.updateContainer(null,r.current,null),s.current.destroy()}:(f.current=!0,s.current=new Cc.Stage({width:h.width,height:h.height,container:n.current}),p(s.current),r.current=yc.createContainer(s.current,y0.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),yc.updateContainer(xn.createElement(c,{},h.children),r.current,null,()=>{}),()=>{g||(p(null),yc.updateContainer(null,r.current,null),s.current.destroy())}),[]),xn.useLayoutEffect(()=>{p(s.current),S0(s.current,h,o),yc.updateContainer(xn.createElement(c,{},h.children),r.current,null)}),xn.createElement("div",{ref:n,id:h.id,accessKey:h.accessKey,className:h.className,role:h.role,style:h.style,tabIndex:h.tabIndex,title:h.title})},Pr="Layer",Ec="Line",Tp="Image",yc=E5(N6);yc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:xn.version,rendererPackageName:"react-konva"});const Ap=xn.forwardRef((h,n)=>xn.createElement(Iv,{},xn.createElement(j6,{...h,forwardedRef:n})));var Rg={exports:{}};/*!
 * @license Copyright 2015-2022 Ably Real-time Ltd (ably.com)
 * 
 * Ably JavaScript Library v1.2.50
 * https://github.com/ably/ably-js
 * 
 * Released under the Apache Licence v2.0
 */var ym;function Qv(){return ym||(ym=1,(function(h,n){(function(r,o){h.exports=o()})(window,function(){return(function(s){var r={};function o(c){if(r[c])return r[c].exports;var f=r[c]={i:c,l:!1,exports:{}};return s[c].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=s,o.c=r,o.d=function(c,f,p){o.o(c,f)||Object.defineProperty(c,f,{enumerable:!0,get:p})},o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o.t=function(c,f){if(f&1&&(c=o(c)),f&8||f&4&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(o.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),f&2&&typeof c!="string")for(var g in c)o.d(p,g,(function(b){return c[b]}).bind(null,g));return p},o.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(f,"a",f),f},o.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},o.p="",o(o.s=42)})([(function(s,r,o){o.r(r),o.d(r,"__extends",function(){return f}),o.d(r,"__assign",function(){return p}),o.d(r,"__rest",function(){return g}),o.d(r,"__decorate",function(){return b}),o.d(r,"__param",function(){return _}),o.d(r,"__metadata",function(){return R}),o.d(r,"__awaiter",function(){return E}),o.d(r,"__generator",function(){return D}),o.d(r,"__createBinding",function(){return S}),o.d(r,"__exportStar",function(){return G}),o.d(r,"__values",function(){return q}),o.d(r,"__read",function(){return H}),o.d(r,"__spread",function(){return B}),o.d(r,"__spreadArrays",function(){return z}),o.d(r,"__spreadArray",function(){return w}),o.d(r,"__await",function(){return M}),o.d(r,"__asyncGenerator",function(){return A}),o.d(r,"__asyncDelegator",function(){return T}),o.d(r,"__asyncValues",function(){return y}),o.d(r,"__makeTemplateObject",function(){return U}),o.d(r,"__importStar",function(){return L}),o.d(r,"__importDefault",function(){return Q}),o.d(r,"__classPrivateFieldGet",function(){return I}),o.d(r,"__classPrivateFieldSet",function(){return K});/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var c=function(V,x){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,Z){P.__proto__=Z}||function(P,Z){for(var k in Z)Object.prototype.hasOwnProperty.call(Z,k)&&(P[k]=Z[k])},c(V,x)};function f(V,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");c(V,x);function P(){this.constructor=V}V.prototype=x===null?Object.create(x):(P.prototype=x.prototype,new P)}var p=function(){return p=Object.assign||function(x){for(var P,Z=1,k=arguments.length;Z<k;Z++){P=arguments[Z];for(var at in P)Object.prototype.hasOwnProperty.call(P,at)&&(x[at]=P[at])}return x},p.apply(this,arguments)};function g(V,x){var P={};for(var Z in V)Object.prototype.hasOwnProperty.call(V,Z)&&x.indexOf(Z)<0&&(P[Z]=V[Z]);if(V!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,Z=Object.getOwnPropertySymbols(V);k<Z.length;k++)x.indexOf(Z[k])<0&&Object.prototype.propertyIsEnumerable.call(V,Z[k])&&(P[Z[k]]=V[Z[k]]);return P}function b(V,x,P,Z){var k=arguments.length,at=k<3?x:Z===null?Z=Object.getOwnPropertyDescriptor(x,P):Z,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(V,x,P,Z);else for(var lt=V.length-1;lt>=0;lt--)(F=V[lt])&&(at=(k<3?F(at):k>3?F(x,P,at):F(x,P))||at);return k>3&&at&&Object.defineProperty(x,P,at),at}function _(V,x){return function(P,Z){x(P,Z,V)}}function R(V,x){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(V,x)}function E(V,x,P,Z){function k(at){return at instanceof P?at:new P(function(F){F(at)})}return new(P||(P=Promise))(function(at,F){function lt(J){try{X(Z.next(J))}catch($){F($)}}function it(J){try{X(Z.throw(J))}catch($){F($)}}function X(J){J.done?at(J.value):k(J.value).then(lt,it)}X((Z=Z.apply(V,x||[])).next())})}function D(V,x){var P={label:0,sent:function(){if(at[0]&1)throw at[1];return at[1]},trys:[],ops:[]},Z,k,at,F;return F={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function lt(X){return function(J){return it([X,J])}}function it(X){if(Z)throw new TypeError("Generator is already executing.");for(;P;)try{if(Z=1,k&&(at=X[0]&2?k.return:X[0]?k.throw||((at=k.return)&&at.call(k),0):k.next)&&!(at=at.call(k,X[1])).done)return at;switch(k=0,at&&(X=[X[0]&2,at.value]),X[0]){case 0:case 1:at=X;break;case 4:return P.label++,{value:X[1],done:!1};case 5:P.label++,k=X[1],X=[0];continue;case 7:X=P.ops.pop(),P.trys.pop();continue;default:if(at=P.trys,!(at=at.length>0&&at[at.length-1])&&(X[0]===6||X[0]===2)){P=0;continue}if(X[0]===3&&(!at||X[1]>at[0]&&X[1]<at[3])){P.label=X[1];break}if(X[0]===6&&P.label<at[1]){P.label=at[1],at=X;break}if(at&&P.label<at[2]){P.label=at[2],P.ops.push(X);break}at[2]&&P.ops.pop(),P.trys.pop();continue}X=x.call(V,P)}catch(J){X=[6,J],k=0}finally{Z=at=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}}var S=Object.create?(function(V,x,P,Z){Z===void 0&&(Z=P),Object.defineProperty(V,Z,{enumerable:!0,get:function(){return x[P]}})}):(function(V,x,P,Z){Z===void 0&&(Z=P),V[Z]=x[P]});function G(V,x){for(var P in V)P!=="default"&&!Object.prototype.hasOwnProperty.call(x,P)&&S(x,V,P)}function q(V){var x=typeof Symbol=="function"&&Symbol.iterator,P=x&&V[x],Z=0;if(P)return P.call(V);if(V&&typeof V.length=="number")return{next:function(){return V&&Z>=V.length&&(V=void 0),{value:V&&V[Z++],done:!V}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(V,x){var P=typeof Symbol=="function"&&V[Symbol.iterator];if(!P)return V;var Z=P.call(V),k,at=[],F;try{for(;(x===void 0||x-- >0)&&!(k=Z.next()).done;)at.push(k.value)}catch(lt){F={error:lt}}finally{try{k&&!k.done&&(P=Z.return)&&P.call(Z)}finally{if(F)throw F.error}}return at}function B(){for(var V=[],x=0;x<arguments.length;x++)V=V.concat(H(arguments[x]));return V}function z(){for(var V=0,x=0,P=arguments.length;x<P;x++)V+=arguments[x].length;for(var Z=Array(V),k=0,x=0;x<P;x++)for(var at=arguments[x],F=0,lt=at.length;F<lt;F++,k++)Z[k]=at[F];return Z}function w(V,x,P){if(P||arguments.length===2)for(var Z=0,k=x.length,at;Z<k;Z++)(at||!(Z in x))&&(at||(at=Array.prototype.slice.call(x,0,Z)),at[Z]=x[Z]);return V.concat(at||Array.prototype.slice.call(x))}function M(V){return this instanceof M?(this.v=V,this):new M(V)}function A(V,x,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=P.apply(V,x||[]),k,at=[];return k={},F("next"),F("throw"),F("return"),k[Symbol.asyncIterator]=function(){return this},k;function F(nt){Z[nt]&&(k[nt]=function(gt){return new Promise(function(Rt,Ht){at.push([nt,gt,Rt,Ht])>1||lt(nt,gt)})})}function lt(nt,gt){try{it(Z[nt](gt))}catch(Rt){$(at[0][3],Rt)}}function it(nt){nt.value instanceof M?Promise.resolve(nt.value.v).then(X,J):$(at[0][2],nt)}function X(nt){lt("next",nt)}function J(nt){lt("throw",nt)}function $(nt,gt){nt(gt),at.shift(),at.length&&lt(at[0][0],at[0][1])}}function T(V){var x,P;return x={},Z("next"),Z("throw",function(k){throw k}),Z("return"),x[Symbol.iterator]=function(){return this},x;function Z(k,at){x[k]=V[k]?function(F){return(P=!P)?{value:M(V[k](F)),done:k==="return"}:at?at(F):F}:at}}function y(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=V[Symbol.asyncIterator],P;return x?x.call(V):(V=typeof q=="function"?q(V):V[Symbol.iterator](),P={},Z("next"),Z("throw"),Z("return"),P[Symbol.asyncIterator]=function(){return this},P);function Z(at){P[at]=V[at]&&function(F){return new Promise(function(lt,it){F=V[at](F),k(lt,it,F.done,F.value)})}}function k(at,F,lt,it){Promise.resolve(it).then(function(X){at({value:X,done:lt})},F)}}function U(V,x){return Object.defineProperty?Object.defineProperty(V,"raw",{value:x}):V.raw=x,V}var N=Object.create?(function(V,x){Object.defineProperty(V,"default",{enumerable:!0,value:x})}):function(V,x){V.default=x};function L(V){if(V&&V.__esModule)return V;var x={};if(V!=null)for(var P in V)P!=="default"&&Object.prototype.hasOwnProperty.call(V,P)&&S(x,V,P);return N(x,V),x}function Q(V){return V&&V.__esModule?V:{default:V}}function I(V,x,P,Z){if(P==="a"&&!Z)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?V!==x||!Z:!x.has(V))throw new TypeError("Cannot read private member from an object whose class did not declare it");return P==="m"?Z:P==="a"?Z.call(V):Z?Z.value:x.get(V)}function K(V,x,P,Z,k){if(Z==="m")throw new TypeError("Private method is not writable");if(Z==="a"&&!k)throw new TypeError("Private accessor was defined without a setter");if(typeof x=="function"?V!==x||!k:!x.has(V))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Z==="a"?k.call(V,P):k?k.value=P:x.set(V,P),P}}),(function(s,r,o){(function(c){Object.defineProperty(r,"__esModule",{value:!0}),r.allToUpperCase=r.allToLowerCase=r.encodeBody=r.decodeBody=r.Format=r.promisify=r.trim=r.arrChooseN=r.randomHexString=r.randomString=r.cheapRandStr=r.dataSizeBytes=r.inspectBody=r.inspectError=r.isErrorInfoOrPartialErrorInfo=r.now=r.parseQueryString=r.toQueryString=r.arrPopRandomElement=r.defaultPostHeaders=r.defaultGetHeaders=r.allSame=r.arrEvery=r.arrFilter=r.arrMap=r.safeArrForEach=r.arrForEach=r.forInOwnNonNullProperties=r.valuesArray=r.keysArray=r.arrWithoutValue=r.arrDeleteValue=r.arrIn=r.arrIndexOf=r.arrSubtract=r.arrIntersectOb=r.arrIntersect=r.intersect=r.containsValue=r.inherits=r.prototypicalClone=r.shallowClone=r.isEmptyArg=r.isOnlyPropIn=r.isEmpty=r.isObject=r.ensureArray=r.isArray=r.copy=r.mixin=void 0,r.arrEquals=r.toBase64=r.matchDerivedChannel=r.shallowEquals=r.getGlobalObject=r.getRetryTime=r.getJitterCoefficient=r.getBackoffCoefficient=void 0;var f=o(0),p=f.__importDefault(o(3)),g=f.__importStar(o(8)),b=f.__importDefault(o(4)),_=o(11),R=o(31);function E(ut){return Math.floor(Math.random()*ut.length)}function D(ut){for(var xt=[],ft=1;ft<arguments.length;ft++)xt[ft-1]=arguments[ft];for(var Mt=0;Mt<xt.length;Mt++){var Xt=xt[Mt];if(!Xt)break;var ae=Object.prototype.hasOwnProperty;for(var Lt in Xt)(!ae||ae.call(Xt,Lt))&&(ut[Lt]=Xt[Lt])}return ut}r.mixin=D;function S(ut){return D({},ut)}r.copy=S,r.isArray=Array.isArray||function(ut){return Object.prototype.toString.call(ut)=="[object Array]"};function G(ut){return z(ut)?[]:(0,r.isArray)(ut)?ut:[ut]}r.ensureArray=G;function q(ut){return Object.prototype.toString.call(ut)=="[object Object]"}r.isObject=q;function H(ut){for(var xt in ut)return!1;return!0}r.isEmpty=H;function B(ut,xt){for(var ft in ut)if(ft!==xt)return!1;return!0}r.isOnlyPropIn=B;function z(ut){return ut==null}r.isEmptyArg=z;function w(ut){var xt=new Object;for(var ft in ut)xt[ft]=ut[ft];return xt}r.shallowClone=w;function M(ut,xt){var ft=(function(){function Xt(){}return Xt})();ft.prototype=ut;var Mt=new ft;return xt&&D(Mt,xt),Mt}r.prototypicalClone=M;var A=function(ut,xt){if(p.default.Config.inherits){p.default.Config.inherits(ut,xt);return}ut.super_=xt,ut.prototype=M(xt.prototype,{constructor:ut})};r.inherits=A;function T(ut,xt){for(var ft in ut)if(ut[ft]==xt)return!0;return!1}r.containsValue=T;function y(ut,xt){return(0,r.isArray)(xt)?U(ut,xt):N(ut,xt)}r.intersect=y;function U(ut,xt){for(var ft=[],Mt=0;Mt<ut.length;Mt++){var Xt=ut[Mt];(0,r.arrIndexOf)(xt,Xt)!=-1&&ft.push(Xt)}return ft}r.arrIntersect=U;function N(ut,xt){for(var ft=[],Mt=0;Mt<ut.length;Mt++){var Xt=ut[Mt];Xt in xt&&ft.push(Xt)}return ft}r.arrIntersectOb=N;function L(ut,xt){for(var ft=[],Mt=0;Mt<ut.length;Mt++){var Xt=ut[Mt];(0,r.arrIndexOf)(xt,Xt)==-1&&ft.push(Xt)}return ft}r.arrSubtract=L,r.arrIndexOf=Array.prototype.indexOf?function(ut,xt,ft){return ut.indexOf(xt,ft)}:function(ut,xt,ft){ft=ft||0;for(var Mt=ut.length;ft<Mt;ft++)if(ut[ft]===xt)return ft;return-1};function Q(ut,xt){return(0,r.arrIndexOf)(ut,xt)!==-1}r.arrIn=Q;function I(ut,xt){var ft=(0,r.arrIndexOf)(ut,xt),Mt=ft!=-1;return Mt&&ut.splice(ft,1),Mt}r.arrDeleteValue=I;function K(ut,xt){var ft=ut.slice();return I(ft,xt),ft}r.arrWithoutValue=K;function V(ut,xt){var ft=[];for(var Mt in ut)xt&&!Object.prototype.hasOwnProperty.call(ut,Mt)||ft.push(Mt);return ft}r.keysArray=V;function x(ut,xt){var ft=[];for(var Mt in ut)xt&&!Object.prototype.hasOwnProperty.call(ut,Mt)||ft.push(ut[Mt]);return ft}r.valuesArray=x;function P(ut,xt){for(var ft in ut)Object.prototype.hasOwnProperty.call(ut,ft)&&ut[ft]&&xt(ft)}r.forInOwnNonNullProperties=P,r.arrForEach=Array.prototype.forEach?function(ut,xt){ut.forEach(xt)}:function(ut,xt){for(var ft=ut.length,Mt=0;Mt<ft;Mt++)xt(ut[Mt],Mt,ut)};function Z(ut,xt){return(0,r.arrForEach)(ut.slice(),xt)}r.safeArrForEach=Z,r.arrMap=Array.prototype.map?function(ut,xt){return ut.map(xt)}:function(ut,xt){for(var ft=[],Mt=ut.length,Xt=0;Xt<Mt;Xt++)ft.push(xt(ut[Xt],Xt,ut));return ft},r.arrFilter=Array.prototype.filter?function(ut,xt){return ut.filter(xt)}:function(ut,xt){for(var ft=[],Mt=ut.length,Xt=0;Xt<Mt;Xt++)xt(ut[Xt])&&ft.push(ut[Xt]);return ft},r.arrEvery=Array.prototype.every?function(ut,xt){return ut.every(xt)}:function(ut,xt){for(var ft=ut.length,Mt=0;Mt<ft;Mt++)if(!xt(ut[Mt],Mt,ut))return!1;return!0};function k(ut,xt){if(ut.length===0)return!0;var ft=ut[0][xt];return(0,r.arrEvery)(ut,function(Mt){return Mt[xt]===ft})}r.allSame=k;var at={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function F(ut,xt){var ft=at[xt||Bt.json];return{accept:ft,"X-Ably-Version":g.default.protocolVersion.toString(),"Ably-Agent":(0,g.getAgentString)(ut)}}r.defaultGetHeaders=F;function lt(ut,xt){var ft,Mt=ft=at[xt||Bt.json];return{accept:Mt,"content-type":ft,"X-Ably-Version":g.default.protocolVersion.toString(),"Ably-Agent":(0,g.getAgentString)(ut)}}r.defaultPostHeaders=lt;function it(ut){return ut.splice(E(ut),1)[0]}r.arrPopRandomElement=it;function X(ut){var xt=[];if(ut)for(var ft in ut)xt.push(encodeURIComponent(ft)+"="+encodeURIComponent(ut[ft]));return xt.length?"?"+xt.join("&"):""}r.toQueryString=X;function J(ut){for(var xt,ft=/([^?&=]+)=?([^&]*)/g,Mt={};xt=ft.exec(ut);)Mt[decodeURIComponent(xt[1])]=decodeURIComponent(xt[2]);return Mt}r.parseQueryString=J,r.now=Date.now||function(){return new Date().getTime()};function $(ut){return typeof ut=="object"&&ut!==null&&(ut.constructor.name=="ErrorInfo"||ut.constructor.name=="PartialErrorInfo")}r.isErrorInfoOrPartialErrorInfo=$;function nt(ut){var xt,ft;return ut instanceof Error||((xt=ut==null?void 0:ut.constructor)===null||xt===void 0?void 0:xt.name)==="ErrorInfo"||((ft=ut==null?void 0:ut.constructor)===null||ft===void 0?void 0:ft.name)==="PartialErrorInfo"?ut.toString():p.default.Config.inspect(ut)}r.inspectError=nt;function gt(ut){return p.default.BufferUtils.isBuffer(ut)?ut.toString():typeof ut=="string"?ut:p.default.Config.inspect(ut)}r.inspectBody=gt;function Rt(ut){if(p.default.BufferUtils.isBuffer(ut))return p.default.BufferUtils.byteLength(ut);if(typeof ut=="string")return p.default.Config.stringByteSize(ut);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof ut)}r.dataSizeBytes=Rt;function Ht(){return String(Math.random()).substr(2)}r.cheapRandStr=Ht;var Kt=function(ut){if(p.default.Config.getRandomValues&&typeof Uint8Array<"u"){var xt=new Uint8Array(ut);return p.default.Config.getRandomValues(xt),p.default.BufferUtils.base64Encode(xt)}for(var ft=p.default.BufferUtils.base64CharSet,Mt=Math.round(ut*4/3),Xt="",ae=0;ae<Mt;ae++)Xt+=ft[E(ft)];return Xt};r.randomString=Kt;var Ft=function(ut){if(p.default.Config.getRandomValues&&typeof Uint8Array<"u"){var xt=new Uint8Array(ut);return p.default.Config.getRandomValues(xt),p.default.BufferUtils.hexEncode(xt)}for(var ft=p.default.BufferUtils.hexCharSet,Mt=ut*2,Xt="",ae=0;ae<Mt;ae++)Xt+=ft[E(ft)];return Xt};r.randomHexString=Ft;function fe(ut,xt){for(var ft=Math.min(xt,ut.length),Mt=ut.slice(),Xt=[],ae=0;ae<ft;ae++)Xt.push(it(Mt));return Xt}r.arrChooseN=fe,r.trim=String.prototype.trim?function(ut){return ut.trim()}:function(ut){return ut.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function At(ut,xt,ft){return new Promise(function(Mt,Xt){ut[xt].apply(ut,f.__spreadArray(f.__spreadArray([],ft,!1),[function(ae,Lt){ae?Xt(ae):Mt(Lt)}],!1))})}r.promisify=At;var Bt;(function(ut){ut.msgpack="msgpack",ut.json="json"})(Bt=r.Format||(r.Format={}));function $t(ut,xt){return xt=="msgpack"?p.default.Config.msgpack.decode(ut):JSON.parse(String(ut))}r.decodeBody=$t;function kt(ut,xt){return xt=="msgpack"?p.default.Config.msgpack.encode(ut,!0):JSON.stringify(ut)}r.encodeBody=kt;function _t(ut){return ut.map(function(xt){return xt&&xt.toLowerCase()})}r.allToLowerCase=_t;function jt(ut){return ut.map(function(xt){return xt&&xt.toUpperCase()})}r.allToUpperCase=jt;function ve(ut){return Math.min((ut+2)/3,2)}r.getBackoffCoefficient=ve;function ne(){return 1-Math.random()*.2}r.getJitterCoefficient=ne;function ue(ut,xt){return ut*ve(xt)*ne()}r.getRetryTime=ue;function we(){return c||(typeof window<"u"?window:self)}r.getGlobalObject=we;function Ae(ut,xt){return Object.keys(ut).every(function(ft){return ut[ft]===xt[ft]})&&Object.keys(xt).every(function(ft){return xt[ft]===ut[ft]})}r.shallowEquals=Ae;function on(ut){var xt=/^(\[([^?]*)(?:(.*))\])?(.+)$/,ft=ut.match(xt);if(!ft||!ft.length||ft.length<5)throw new b.default("regex match failed",400,40010);if(ft[2])throw new b.default("cannot use a derived option with a ".concat(ft[2]," channel"),400,40010);return{qualifierParam:ft[3]||"",channelName:ft[4]}}r.matchDerivedChannel=on;function Tn(ut){return p.default.Config.createHmac?Buffer.from(ut,"ascii").toString("base64"):(0,_.stringify)((0,R.parse)(ut))}r.toBase64=Tn;function pn(ut,xt){return ut.length===xt.length&&(0,r.arrEvery)(ut,function(ft,Mt){return ft===xt[Mt]})}r.arrEquals=pn}).call(this,o(13))}),(function(s,r,o){(function(c){Object.defineProperty(r,"__esModule",{value:!0});var f=o(0),p=f.__importDefault(o(3)),g=c||(typeof window<"u"?window:self),b;(function(S){S[S.None=0]="None",S[S.Error=1]="Error",S[S.Major=2]="Major",S[S.Minor=3]="Minor",S[S.Micro=4]="Micro"})(b||(b={}));function _(S,G){return"".concat(S).padStart(G?3:2,"0")}function R(S){return p.default.Config.logTimestamps?function(G){var q=new Date;S(_(q.getHours())+":"+_(q.getMinutes())+":"+_(q.getSeconds())+"."+_(q.getMilliseconds(),1)+" "+G)}:S}var E=function(){var S,G,q,H;return typeof Window>"u"&&typeof WorkerGlobalScope>"u"||typeof((G=(S=g==null?void 0:g.console)===null||S===void 0?void 0:S.log)===null||G===void 0?void 0:G.apply)=="function"?(q=function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];console.log.apply(console,B)},H=console.warn?function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];console.warn.apply(console,B)}:q):g!=null&&g.console.log?q=H=function(){Function.prototype.apply.call(console.log,console,arguments)}:q=H=function(){},[q,H].map(R)},D=(function(){function S(){S.logLevel=S.LOG_DEFAULT}return S.initLogHandlers=function(){var G=E(),q=G[0],H=G[1];this.logHandler=q,this.logErrorHandler=H},S.renamedClientOption=function(G,q){S.deprecationWarning("The `".concat(G,"` client option has been renamed to `").concat(q,"`. Please update your code to use `").concat(q,"` instead. `").concat(G,"` will be removed in a future version."))},S.renamedMethod=function(G,q,H){S.deprecationWarning("`".concat(G,"`’s `").concat(q,"` method has been renamed to `").concat(H,"`. Please update your code to use `").concat(H,"` instead. `").concat(q,"` will be removed in a future version."))},S.deprecationWarning=function(G){S.shouldLog(b.Error)&&S.logErrorHandler("Ably: Deprecation warning - ".concat(G))},S.logLevel=b.Error,S.LOG_NONE=b.None,S.LOG_ERROR=b.Error,S.LOG_MAJOR=b.Major,S.LOG_MINOR=b.Minor,S.LOG_MICRO=b.Micro,S.LOG_DEFAULT=b.Error,S.LOG_DEBUG=b.Micro,S.logAction=function(G,q,H){S.shouldLog(G)&&(G===b.Error?S.logErrorHandler:S.logHandler)("Ably: "+q+": "+H)},S.deprecated=function(G,q){S.deprecationWarning("".concat(G," is deprecated and will be removed in a future version. ").concat(q))},S.shouldLog=function(G){return G<=S.logLevel},S.setLog=function(G,q){G!==void 0&&(S.logLevel=G),q!==void 0&&(S.logHandler=S.logErrorHandler=q)},S})();r.default=D}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=(function(){function f(){}return f})();r.default=c}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PartialErrorInfo=void 0;var c=o(0),f=c.__importDefault(o(3)),p=c.__importStar(o(1));function g(R){var E="["+R.constructor.name;return R.message&&(E+=": "+R.message),R.statusCode&&(E+="; statusCode="+R.statusCode),R.code&&(E+="; code="+R.code),R.cause&&(E+="; cause="+p.inspectError(R.cause)),R.href&&!(R.message&&R.message.indexOf("help.ably.io")>-1)&&(E+="; see "+R.href+" "),E+="]",E}var b=(function(R){c.__extends(E,R);function E(D,S,G,q){var H=R.call(this,D)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(H,E.prototype),H.code=S,H.statusCode=G,H.cause=q,H}return E.prototype.toString=function(){return g(this)},E.fromValues=function(D){var S=D,G=S.message,q=S.code,H=S.statusCode;if(typeof G!="string"||typeof q!="number"||typeof H!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+f.default.Config.inspect(D));var B=Object.assign(new E(G,q,H),D);return B.code&&!B.href&&(B.href="https://help.ably.io/error/"+B.code),B},E})(Error);r.default=b;var _=(function(R){c.__extends(E,R);function E(D,S,G,q){var H=R.call(this,D)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(H,E.prototype),H.code=S,H.statusCode=G,H.cause=q,H}return E.prototype.toString=function(){return g(this)},E})(Error);r.PartialErrorInfo=_}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(){if(typeof ArrayBuffer=="function"){var f=c,p=f.lib,g=p.WordArray,b=g.init,_=g.init=function(R){if(R instanceof ArrayBuffer&&(R=new Uint8Array(R)),(R instanceof Int8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)&&(R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength)),R instanceof Uint8Array){for(var E=R.byteLength,D=[],S=0;S<E;S++)D[S>>>2]|=R[S]<<24-S%4*8;b.call(this,D,E)}else b.apply(this,arguments)};_.prototype=g}})(),c.lib.WordArray})}),(function(s,r,o){(function(c){(function(f,p){s.exports=p()})(this,function(){var f=f||(function(p,g){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&typeof c<"u"&&c.crypto&&(b=c.crypto),!b)try{b=o(44)}catch{}var _=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},R=Object.create||(function(){function A(){}return function(T){var y;return A.prototype=T,y=new A,A.prototype=null,y}})(),E={},D=E.lib={},S=D.Base=(function(){return{extend:function(A){var T=R(this);return A&&T.mixIn(A),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var T in A)A.hasOwnProperty(T)&&(this[T]=A[T]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),G=D.WordArray=S.extend({init:function(A,T){A=this.words=A||[],T!=g?this.sigBytes=T:this.sigBytes=A.length*4},toString:function(A){return(A||H).stringify(this)},concat:function(A){var T=this.words,y=A.words,U=this.sigBytes,N=A.sigBytes;if(this.clamp(),U%4)for(var L=0;L<N;L++){var Q=y[L>>>2]>>>24-L%4*8&255;T[U+L>>>2]|=Q<<24-(U+L)%4*8}else for(var L=0;L<N;L+=4)T[U+L>>>2]=y[L>>>2];return this.sigBytes+=N,this},clamp:function(){var A=this.words,T=this.sigBytes;A[T>>>2]&=4294967295<<32-T%4*8,A.length=p.ceil(T/4)},clone:function(){var A=S.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var T=[],y=0;y<A;y+=4)T.push(_());return new G.init(T,A)}}),q=E.enc={},H=q.Hex={stringify:function(A){for(var T=A.words,y=A.sigBytes,U=[],N=0;N<y;N++){var L=T[N>>>2]>>>24-N%4*8&255;U.push((L>>>4).toString(16)),U.push((L&15).toString(16))}return U.join("")},parse:function(A){for(var T=A.length,y=[],U=0;U<T;U+=2)y[U>>>3]|=parseInt(A.substr(U,2),16)<<24-U%8*4;return new G.init(y,T/2)}},B=q.Latin1={stringify:function(A){for(var T=A.words,y=A.sigBytes,U=[],N=0;N<y;N++){var L=T[N>>>2]>>>24-N%4*8&255;U.push(String.fromCharCode(L))}return U.join("")},parse:function(A){for(var T=A.length,y=[],U=0;U<T;U++)y[U>>>2]|=(A.charCodeAt(U)&255)<<24-U%4*8;return new G.init(y,T)}},z=q.Utf8={stringify:function(A){try{return decodeURIComponent(escape(B.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return B.parse(unescape(encodeURIComponent(A)))}},w=D.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new G.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=z.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var T,y=this._data,U=y.words,N=y.sigBytes,L=this.blockSize,Q=L*4,I=N/Q;A?I=p.ceil(I):I=p.max((I|0)-this._minBufferSize,0);var K=I*L,V=p.min(K*4,N);if(K){for(var x=0;x<K;x+=L)this._doProcessBlock(U,x);T=U.splice(0,K),y.sigBytes-=V}return new G.init(T,V)},clone:function(){var A=S.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});D.Hasher=w.extend({cfg:S.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(A){return function(T,y){return new A.init(y).finalize(T)}},_createHmacHelper:function(A){return function(T,y){return new M.HMAC.init(A,y).finalize(T)}}});var M=E.algo={};return E})(Math);return f})}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(2)),g=c.__importDefault(o(3));function b(E,D,S){try{D.apply(E,S)}catch(G){p.default.logAction(p.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+G+"; stack = "+(G&&G.stack))}}function _(E,D,S){for(var G,q,H,B=0;B<E.length;B++)if(G=E[B],S&&(G=G[S]),f.isArray(G)){for(;(q=f.arrIndexOf(G,D))!==-1;)G.splice(q,1);S&&G.length===0&&delete E[B][S]}else if(f.isObject(G))for(H in G)Object.prototype.hasOwnProperty.call(G,H)&&f.isArray(G[H])&&_([G],D,H)}var R=(function(){function E(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return E.prototype.on=function(){for(var D=this,S=[],G=0;G<arguments.length;G++)S[G]=arguments[G];if(S.length===1){var q=S[0];if(typeof q=="function")this.any.push(q);else throw new Error("EventListener.on(): Invalid arguments: "+g.default.Config.inspect(S))}if(S.length===2){var H=S[0],B=S[1];if(typeof B!="function")throw new Error("EventListener.on(): Invalid arguments: "+g.default.Config.inspect(S));if(f.isEmptyArg(H))this.any.push(B);else if(f.isArray(H))H.forEach(function(w){D.on(w,B)});else{if(typeof H!="string")throw new Error("EventListener.on(): Invalid arguments: "+g.default.Config.inspect(S));var z=this.events[H]||(this.events[H]=[]);z.push(B)}}},E.prototype.off=function(){for(var D,S=this,G=[],q=0;q<arguments.length;q++)G[q]=arguments[q];if(G.length==0||f.isEmptyArg(G[0])&&f.isEmptyArg(G[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}var H=G[0],B=G[1],z=null,w=null;if(G.length===1||!B)typeof H=="function"?z=H:w=H;else{if(typeof B!="function")throw new Error("EventEmitter.off(): invalid arguments:"+g.default.Config.inspect(G));D=[H,B],w=D[0],z=D[1]}if(z&&f.isEmptyArg(w)){_([this.any,this.events,this.anyOnce,this.eventsOnce],z);return}if(f.isArray(w)){w.forEach(function(M){S.off(M,z)});return}if(typeof w!="string")throw new Error("EventEmitter.off(): invalid arguments:"+g.default.Config.inspect(G));z?_([this.events,this.eventsOnce],z,w):(delete this.events[w],delete this.eventsOnce[w])},E.prototype.listeners=function(D){if(D){var S=this.events[D]||[];return this.eventsOnce[D]&&Array.prototype.push.apply(S,this.eventsOnce[D]),S.length?S:null}return this.any.length?this.any:null},E.prototype.emit=function(D){for(var S=[],G=1;G<arguments.length;G++)S[G-1]=arguments[G];var q={event:D},H=[];this.anyOnce.length&&(Array.prototype.push.apply(H,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(H,this.any);var B=this.eventsOnce[D];B&&(Array.prototype.push.apply(H,B),delete this.eventsOnce[D]);var z=this.events[D];z&&Array.prototype.push.apply(H,z),f.arrForEach(H,function(w){b(q,w,S)})},E.prototype.once=function(){for(var D=this,S=[],G=0;G<arguments.length;G++)S[G]=arguments[G];var q=S.length;if((q===0||q===1&&typeof S[0]!="function")&&g.default.Config.Promise){var H=S[0];return new g.default.Config.Promise(function(T){D.once(H,T)})}var B=S[0],z=S[1];if(S.length===1&&typeof B=="function")this.anyOnce.push(B);else if(f.isEmptyArg(B)){if(typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+g.default.Config.inspect(S));this.anyOnce.push(z)}else if(f.isArray(B)){var w=this,M=function(){var T=Array.prototype.slice.call(arguments);if(f.arrForEach(B,function(y){w.off(y,M)}),typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+g.default.Config.inspect(S));z.apply(this,T)};f.arrForEach(B,function(T){w.on(T,M)})}else{if(typeof B!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+g.default.Config.inspect(S));var A=this.eventsOnce[B]||(this.eventsOnce[B]=[]);if(z){if(typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+g.default.Config.inspect(S));A.push(z)}}},E.prototype.whenState=function(D,S,G){for(var q=this,H=[],B=3;B<arguments.length;B++)H[B-3]=arguments[B];var z={event:D};if(typeof D!="string"||typeof S!="string")throw"whenState requires a valid event String argument";if(typeof G!="function"&&g.default.Config.Promise)return new g.default.Config.Promise(function(w){E.prototype.whenState.apply(q,[D,S,w].concat(H))});D===S?b(z,G,H):this.once(D,G)},E})();r.default=R}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaults=r.normaliseOptions=r.objectifyOptions=r.getAgentString=r.getHosts=r.getFallbackHosts=r.environmentFallbackHosts=r.getHttpScheme=r.getPort=r.getHost=void 0;var c=o(0),f=c.__importDefault(o(3)),p=c.__importStar(o(1)),g=c.__importDefault(o(2)),b=c.__importDefault(o(4)),_=o(43),R="ably-js/"+_.version,E={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:_.version,protocolVersion:2,agent:R,getHost:D,getPort:S,getHttpScheme:G,environmentFallbackHosts:q,getFallbackHosts:H,getHosts:B,checkHost:z,objectifyOptions:T,normaliseOptions:y};function D(N,L,Q){return Q?L=L==N.restHost&&N.realtimeHost||L||N.realtimeHost:L=L||N.restHost,L}r.getHost=D;function S(N,L){return L||N.tls?N.tlsPort:N.port}r.getPort=S;function G(N){return N.tls?"https://":"http://"}r.getHttpScheme=G;function q(N){return[N+"-a-fallback.ably-realtime.com",N+"-b-fallback.ably-realtime.com",N+"-c-fallback.ably-realtime.com",N+"-d-fallback.ably-realtime.com",N+"-e-fallback.ably-realtime.com"]}r.environmentFallbackHosts=q;function H(N){var L=N.fallbackHosts,Q=typeof N.httpMaxRetryCount<"u"?N.httpMaxRetryCount:E.httpMaxRetryCount;return L?p.arrChooseN(L,Q):[]}r.getFallbackHosts=H;function B(N){return[N.restHost].concat(H(N))}r.getHosts=B;function z(N){if(typeof N!="string")throw new b.default("host must be a string; was a "+typeof N,4e4,400);if(!N.length)throw new b.default("host must not be zero-length",4e4,400)}function w(N,L,Q){return N.realtimeHost?N.realtimeHost:N.restHost?(g.default.logAction(g.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+N.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+N.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),N.restHost):L?E.REALTIME_HOST:Q+"-"+E.REALTIME_HOST}function M(N){var L={};for(var Q in E.TIMEOUTS)L[Q]=N[Q]||E.TIMEOUTS[Q];return L}function A(N){var L=E.agent;if(N.agents)for(var Q in N.agents)L+=" "+Q+"/"+N.agents[Q];return L}r.getAgentString=A;function T(N){return typeof N=="string"?N.indexOf(":")==-1?{token:N}:{key:N}:N}r.objectifyOptions=T;function y(N){if(N.host&&(g.default.renamedClientOption("host","restHost"),N.restHost=N.host),N.wsHost&&(g.default.renamedClientOption("wsHost","realtimeHost"),N.realtimeHost=N.wsHost),N.queueEvents&&(g.default.renamedClientOption("queueEvents","queueMessages"),N.queueMessages=N.queueEvents),N.headers&&g.default.deprecated("the `headers` client option",""),N.fallbackHostsUseDefault){if(N.fallbackHosts){var L="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw g.default.logAction(g.default.LOG_ERROR,"Defaults.normaliseOptions",L),new b.default(L,4e4,400)}if(N.port||N.tlsPort){var L="fallbackHostsUseDefault cannot be set when port or tlsPort are set";throw g.default.logAction(g.default.LOG_ERROR,"Defaults.normaliseOptions",L),new b.default(L,4e4,400)}N.environment?g.default.deprecated("The `fallbackHostsUseDefault` client option","If you’re using this client option to force the library to make use of fallback hosts even though you’ve set the `environment` client option, then this is no longer necessary: remove your usage of the `fallbackHostsUseDefault` client option and the library will then automatically choose the correct fallback hosts to use for the specified environment."):g.default.deprecated("The `fallbackHostsUseDefault` client option","If you’re using this client option to force the library to make use of fallback hosts even though you’re not using the primary Ably environment, then stop using `fallbackHostsUseDefault`, and update your code to either pass the `environment` client option (in which case the library will automatically choose the correct fallback hosts to use for the specified environment), or to pass the `fallbackHosts` client option to specify a custom list of fallback hosts to use (for example, if you’re using a custom CNAME, in which case Ably will have provided you with an explicit list of fallback hosts)."),N.fallbackHosts=E.FALLBACK_HOSTS}N.recover===!0&&(g.default.deprecated("The ability to use a boolean value for the `recover` client option","If you wish for the connection to always be recovered, replace `{ recover: true }` with a function that always passes `true` to its callback: `{ recover: function(lastConnectionDetails, cb) { cb(true); } }`"),N.recover=function(it,X){X(!0)}),typeof N.recover=="function"&&N.closeOnUnload===!0&&(g.default.logAction(g.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),N.recover=void 0),"closeOnUnload"in N||(N.closeOnUnload=!N.recover),N.transports&&p.arrIn(N.transports,"xhr")&&(g.default.deprecationWarning('The "xhr" transport has been renamed to "xhr_streaming". Please update your client options code to use `transports: ["xhr_streaming"]` instead. The ability to use `transports: ["xhr"]` will be removed in a future version.'),p.arrDeleteValue(N.transports,"xhr"),N.transports.push("xhr_streaming")),"queueMessages"in N||(N.queueMessages=!0);var Q=N.environment&&String(N.environment).toLowerCase()||E.ENVIRONMENT,I=!Q||Q==="production";!N.fallbackHosts&&!N.restHost&&!N.realtimeHost&&!N.port&&!N.tlsPort&&(N.fallbackHosts=I?E.FALLBACK_HOSTS:q(Q));var K=N.restHost||(I?E.REST_HOST:Q+"-"+E.REST_HOST),V=w(N,I,Q);p.arrForEach((N.fallbackHosts||[]).concat(K,V),z),N.port=N.port||E.PORT,N.tlsPort=N.tlsPort||E.TLS_PORT,"tls"in N||(N.tls=!0);var x=M(N);if("useBinaryProtocol"in N?N.useBinaryProtocol=f.default.Config.supportsBinary&&N.useBinaryProtocol:N.useBinaryProtocol=f.default.Config.preferBinary,N.clientId){var P=N.headers=N.headers||{};P["X-Ably-ClientId"]=f.default.BufferUtils.base64Encode(f.default.BufferUtils.utf8Encode(N.clientId))}"idempotentRestPublishing"in N||(N.idempotentRestPublishing=!0),N.promises&&!f.default.Config.Promise&&(g.default.logAction(g.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),N.promises=!1);var Z=null,k=N.connectivityCheckUrl;if(N.connectivityCheckUrl){var at=N.connectivityCheckUrl.split("?"),F=at[0],lt=at[1];Z=lt?p.parseQueryString(lt):{},F.indexOf("://")===-1&&(F="https://"+F),k=F}return c.__assign(c.__assign({},N),{useBinaryProtocol:"useBinaryProtocol"in N?f.default.Config.supportsBinary&&N.useBinaryProtocol:f.default.Config.preferBinary,realtimeHost:V,restHost:K,maxMessageSize:N.maxMessageSize||E.maxMessageSize,timeouts:x,connectivityCheckParams:Z,connectivityCheckUrl:k})}r.normaliseOptions=y,r.default=E;function U(N){return Object.assign(E,N)}r.getDefaults=U}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(3)),p=c.__importDefault(o(2)),g=c.__importDefault(o(4)),b=c.__importStar(o(1));function _(S){return!S||!S.channelOptions?{channelOptions:S,plugins:{},baseEncodedPreviousPayload:void 0}:S}function R(S){if(S&&S.cipher){if(!f.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var G=f.default.Crypto.getCipher(S.cipher);return{cipher:G.cipherParams,channelCipher:G.cipher}}return S??{}}function E(S){var G=0;return S.name&&(G+=S.name.length),S.clientId&&(G+=S.clientId.length),S.extras&&(G+=JSON.stringify(S.extras).length),S.data&&(G+=b.dataSizeBytes(S.data)),G}var D=(function(){function S(){}return S.prototype.toJSON=function(){var G=this.encoding,q=this.data;return q&&f.default.BufferUtils.isBuffer(q)&&(arguments.length>0?(G=G?G+"/base64":"base64",q=f.default.BufferUtils.base64Encode(q)):q=f.default.BufferUtils.toBuffer(q)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:G,data:q}},S.prototype.toString=function(){var G="[Message";return this.name&&(G+="; name="+this.name),this.id&&(G+="; id="+this.id),this.timestamp&&(G+="; timestamp="+this.timestamp),this.clientId&&(G+="; clientId="+this.clientId),this.connectionId&&(G+="; connectionId="+this.connectionId),this.encoding&&(G+="; encoding="+this.encoding),this.extras&&(G+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?G+="; data="+this.data:f.default.BufferUtils.isBuffer(this.data)?G+="; data (buffer)="+f.default.BufferUtils.base64Encode(this.data):G+="; data (json)="+JSON.stringify(this.data)),this.extras&&(G+="; extras="+JSON.stringify(this.extras)),G+="]",G},S.encrypt=function(G,q,H){var B=G.data,z=G.encoding,w=q.channelCipher;z=z?z+"/":"",f.default.BufferUtils.isBuffer(B)||(B=f.default.BufferUtils.utf8Encode(String(B)),z=z+"utf-8/"),w.encrypt(B,function(M,A){if(M){H(M);return}G.data=A,G.encoding=z+"cipher+"+w.algorithm,H(null,G)})},S.encode=function(G,q,H){var B=G.data,z=typeof B=="string"||f.default.BufferUtils.isBuffer(B)||B===null||B===void 0;if(!z)if(b.isObject(B)||b.isArray(B))G.data=JSON.stringify(B),G.encoding=G.encoding?G.encoding+"/json":"json";else throw new g.default("Data type is unsupported",40013,400);q!=null&&q.cipher?S.encrypt(G,q,H):H(null,G)},S.encodeArray=function(G,q,H){for(var B=0,z=0;z<G.length;z++)S.encode(G[z],q,function(w){if(w){H(w);return}B++,B==G.length&&H(null,G)})},S.decode=function(G,q){var H=_(q),B=G.data,z=G.encoding;if(z){var w=z.split("/"),M=void 0,A=w.length,T=G.data,y="";try{for(;(M=A)>0;){var U=w[--A].match(/([-\w]+)(\+([\w-]+))?/);if(!U)break;switch(y=U[1],y){case"base64":T=f.default.BufferUtils.base64Decode(String(T)),M==w.length&&(B=T);continue;case"utf-8":T=f.default.BufferUtils.utf8Decode(T);continue;case"json":T=JSON.parse(T);continue;case"cipher":if(H.channelOptions!=null&&H.channelOptions.cipher&&H.channelOptions.channelCipher){var N=U[3],L=H.channelOptions.channelCipher;if(N!=L.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");T=L.decrypt(T);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!H.plugins||!H.plugins.vcdiff)throw new g.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new g.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var Q=H.baseEncodedPreviousPayload;typeof Q=="string"&&(Q=f.default.BufferUtils.utf8Encode(Q)),Q=f.default.BufferUtils.toBuffer(Q),T=f.default.BufferUtils.toBuffer(T),T=f.default.BufferUtils.typedArrayToBuffer(H.plugins.vcdiff.decode(T,Q)),B=T}catch(K){throw new g.default("Vcdiff delta decode failed with "+K,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(K){var I=K;throw new g.default("Error processing the "+y+" encoding, decoder returned ‘"+I.message+"’",I.code||40013,400)}finally{G.encoding=M<=0?null:w.slice(0,M).join("/"),G.data=T}}H.baseEncodedPreviousPayload=B},S.fromResponseBody=function(G,q,H){H&&(G=b.decodeBody(G,H));for(var B=0;B<G.length;B++){var z=G[B]=S.fromValues(G[B]);try{S.decode(z,q)}catch(w){p.default.logAction(p.default.LOG_ERROR,"Message.fromResponseBody()",w.toString())}}return G},S.fromValues=function(G){return Object.assign(new S,G)},S.fromValuesArray=function(G){for(var q=G.length,H=new Array(q),B=0;B<q;B++)H[B]=S.fromValues(G[B]);return H},S.fromEncoded=function(G,q){var H=S.fromValues(G),B=R(q??null);try{S.decode(H,B)}catch(z){p.default.logAction(p.default.LOG_ERROR,"Message.fromEncoded()",z.toString())}return H},S.fromEncodedArray=function(G,q){return G.map(function(H){return S.fromEncoded(H,q)})},S.getMessagesSize=function(G){for(var q,H=0,B=0;B<G.length;B++)q=G[B],H+=q.size||(q.size=E(q));return H},S.serialize=b.encodeBody,S})();r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(4)),g=c.__importDefault(o(9)),b=c.__importDefault(o(16)),_={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},R=[];Object.keys(_).forEach(function(H){R[_[H]]=H});var E={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},D=Object.keys(E);E.MODE_ALL=E.PRESENCE|E.PUBLISH|E.SUBSCRIBE|E.PRESENCE_SUBSCRIBE;function S(H){var B=[];if(H)for(var z=0;z<H.length;z++)B.push(H[z].toString());return"[ "+B.join(", ")+" ]"}var G="id channel channelSerial connectionId count msgSerial timestamp".split(" "),q=(function(){function H(){var B=this;this.hasFlag=function(z){return(B.flags&E[z])>0}}return H.prototype.setFlag=function(B){return this.flags=this.flags|E[B]},H.prototype.getMode=function(){return this.flags&&this.flags&E.MODE_ALL},H.prototype.encodeModesToFlags=function(B){var z=this;B.forEach(function(w){return z.setFlag(w)})},H.prototype.decodeModesFromFlags=function(){var B=this,z=[];return H.channelModes.forEach(function(w){B.hasFlag(w)&&z.push(w)}),z.length>0?z:void 0},H.fromValues=function(B){return Object.assign(new H,B)},H.Action=_,H.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],H.ActionName=R,H.serialize=f.encodeBody,H.deserialize=function(B,z){var w=f.decodeBody(B,z);return H.fromDeserialized(w)},H.fromDeserialized=function(B){var z=B.error;z&&(B.error=p.default.fromValues(z));var w=B.messages;if(w)for(var M=0;M<w.length;M++)w[M]=g.default.fromValues(w[M]);var A=B.presence;if(A)for(var M=0;M<A.length;M++)A[M]=b.default.fromValues(A[M],!0);return Object.assign(new H,B)},H.stringify=function(B){var z="[ProtocolMessage";B.action!==void 0&&(z+="; action="+H.ActionName[B.action]||!1);for(var w,M=0;M<G.length;M++)w=G[M],B[w]!==void 0&&(z+="; "+w+"="+B[w]);if(B.messages&&(z+="; messages="+S(g.default.fromValuesArray(B.messages))),B.presence&&(z+="; presence="+S(b.default.fromValuesArray(B.presence))),B.error&&(z+="; error="+p.default.fromValues(B.error).toString()),B.auth&&B.auth.accessToken&&(z+="; token="+B.auth.accessToken),B.flags&&(z+="; flags="+D.filter(B.hasFlag).join(",")),B.params){var A="";f.forInOwnNonNullProperties(B.params,function(T){A.length>0&&(A+="; "),A+=T+"="+B.params[T]}),A.length>0&&(z+="; params=["+A+"]")}return z+="]",z},H})();r.default=q}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(){var f=c,p=f.lib,g=p.WordArray,b=f.enc;b.Base64={stringify:function(R){var E=R.words,D=R.sigBytes,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";R.clamp();for(var G=[],q=0;q<D;q+=3)for(var H=E[q>>>2]>>>24-q%4*8&255,B=E[q+1>>>2]>>>24-(q+1)%4*8&255,z=E[q+2>>>2]>>>24-(q+2)%4*8&255,w=H<<16|B<<8|z,M=0;M<4&&q+M*.75<D;M++)G.push(S.charAt(w>>>6*(3-M)&63));var A=S.charAt(64);if(A)for(;G.length%4;)G.push(A);return G.join("")},parse:function(R){var E=R.length,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var G=0;G<D.length;G++)S[D.charCodeAt(G)]=G}var q=D.charAt(64);if(q){var H=R.indexOf(q);H!==-1&&(E=H)}return _(R,E,S)}};function _(R,E,D){for(var S=[],G=0,q=0;q<E;q++)if(q%4){var H=D[R.charCodeAt(q-1)]<<q%4*2,B=D[R.charCodeAt(q)]>>>6-q%4*2,z=H|B;S[G>>>2]|=z<<24-G%4*8,G++}return g.create(S,G)}})(),c.enc.Base64})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(10)),g=c.__importDefault(o(26)),b=c.__importDefault(o(2)),_=c.__importDefault(o(8)),R=c.__importDefault(o(21)),E=c.__importDefault(o(18)),D=c.__importDefault(o(4)),S=c.__importDefault(o(22)),G=c.__importDefault(o(3));function q(z){var w=[80015,80017,80030];return z.code?E.default.isTokenErr(z)?!1:f.arrIn(w,z.code)?!0:z.code>=4e4&&z.code<5e4:!1}function H(z){return q(z)?[p.default.fromValues({action:p.default.Action.ERROR,error:z})]:[p.default.fromValues({action:p.default.Action.DISCONNECTED,error:z})]}var B=(function(z){c.__extends(w,z);function w(M,A,T){var y=z.call(this,M,A,T,!0)||this;return y.onAuthUpdated=function(U){y.authParams={access_token:U.token}},y.stream="stream"in T?T.stream:!0,y.sendRequest=null,y.recvRequest=null,y.pendingCallback=null,y.pendingItems=null,y}return w.prototype.connect=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","starting"),g.default.prototype.connect.call(this);var A=this.params,T=A.options,y=_.default.getHost(T,A.host),U=_.default.getPort(T),N=T.tls?"https://":"http://";this.baseUri=N+y+":"+U+"/comet/";var L=this.baseUri+"connect";b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","uri: "+L),this.auth.getAuthParams(function(Q,I){if(Q){M.disconnect(Q);return}if(!M.isDisposed){M.authParams=I;var K=M.params.getConnectParams(I);"stream"in K&&(M.stream=K.stream),b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+f.toQueryString(K));var V=!1,x=M.recvRequest=M.createRequest(L,null,K,null,M.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV);x.on("data",function(P){M.recvRequest&&(V||(V=!0,M.emit("preconnect")),M.onData(P))}),x.on("complete",function(P){if(M.recvRequest||(P=P||new D.default("Request cancelled",80003,400)),M.recvRequest=null,!V&&!P&&(V=!0,M.emit("preconnect")),M.onActivity(),P){P.code?M.onData(H(P)):M.disconnect(P);return}G.default.Config.nextTick(function(){M.recv()})}),x.exec()}})},w.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},w.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},w.prototype._requestCloseOrDisconnect=function(M){var A=this,T=M?this.closeUri:this.disconnectUri;if(T){var y=this.createRequest(T,null,this.authParams,null,S.default.REQ_SEND);y.on("complete",function(U){U&&(b.default.logAction(b.default.LOG_ERROR,"CometTransport.request"+(M?"Close()":"Disconnect()"),"request returned err = "+f.inspectError(U)),A.finish("disconnected",U))}),y.exec()}},w.prototype.dispose=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",R.default.disconnected()),G.default.Config.nextTick(function(){M.emit("disposed")}))},w.prototype.onConnect=function(M){var A;if(!this.isDisposed){var T=(A=M.connectionDetails)===null||A===void 0?void 0:A.connectionKey;g.default.prototype.onConnect.call(this,M);var y=this.baseUri+T;b.default.logAction(b.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+y),this.sendUri=y+"/send",this.recvUri=y+"/recv",this.closeUri=y+"/close",this.disconnectUri=y+"/disconnect"}},w.prototype.send=function(M){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(M);return}var A=this.pendingItems||[];A.push(M),this.pendingItems=null,this.sendItems(A)},w.prototype.sendAnyPending=function(){var M=this.pendingItems;M&&(this.pendingItems=null,this.sendItems(M))},w.prototype.sendItems=function(M){var A=this,T=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(M),S.default.REQ_SEND);T.on("complete",function(y,U){if(y&&b.default.logAction(b.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+f.inspectError(y)),A.sendRequest=null,y){y.code?A.onData(H(y)):A.disconnect(y);return}U&&A.onData(U),A.pendingItems&&G.default.Config.nextTick(function(){A.sendRequest||A.sendAnyPending()})}),T.exec()},w.prototype.recv=function(){var M=this;if(!this.recvRequest&&this.isConnected){var A=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV_POLL);A.on("data",function(T){M.onData(T)}),A.on("complete",function(T){if(M.recvRequest=null,M.onActivity(),T){T.code?M.onData(H(T)):M.disconnect(T);return}G.default.Config.nextTick(function(){M.recv()})}),A.exec()}},w.prototype.onData=function(M){try{var A=this.decodeResponse(M);if(A&&A.length)for(var T=0;T<A.length;T++)this.onProtocolMessage(p.default.fromDeserialized(A[T]))}catch(y){b.default.logAction(b.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+y.stack)}},w.prototype.encodeRequest=function(M){return JSON.stringify(M)},w.prototype.decodeResponse=function(M){return typeof M=="string"?JSON.parse(M):M},w})(g.default);r.default=B}),(function(s,r){var o;o=(function(){return this})();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isSuccessCode=void 0;var c;(function(p){p[p.Success=200]="Success",p[p.NoContent=204]="NoContent",p[p.BadRequest=400]="BadRequest",p[p.Unauthorized=401]="Unauthorized",p[p.Forbidden=403]="Forbidden",p[p.RequestTimeout=408]="RequestTimeout",p[p.InternalServerError=500]="InternalServerError"})(c||(c={}));function f(p){return p>=c.Success&&p<c.BadRequest}r.isSuccessCode=f,r.default=c}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(3)),p=c.__importStar(o(1)),g=c.__importDefault(o(2)),b=c.__importDefault(o(18)),_=c.__importDefault(o(19)),R=o(4),E=c.__importDefault(o(14));function D(z,w,M,A,T){z.http.supportsAuthHeaders?z.auth.getAuthHeaders(function(y,U){y?A(y):T(p.mixin(U,w),M)}):z.auth.getAuthParams(function(y,U){y?A(y):T(w,p.mixin(U,M))})}function S(z,w){return function(M,A,T,y,U){if(M&&!A){z(M);return}if(U===E.default.NoContent){z(M,[],T,!0,U);return}if(!y)try{A=p.decodeBody(A,w)}catch(V){p.isErrorInfoOrPartialErrorInfo(V)?z(V):z(new R.PartialErrorInfo(p.inspectError(V),null));return}if(!A){z(new R.PartialErrorInfo("unenvelope(): Response body is missing",null));return}var N=A,L=N.statusCode,Q=N.response,I=N.headers;if(L===void 0){z(M,A,T,!0,U);return}if(L<200||L>=300){var K=Q&&Q.error||M;K||(K=new Error("Error in unenveloping "+A),K.statusCode=L),z(K,Q,I,!0,L);return}z(M,Q,I,!0,L)}}function G(z){var w=[];if(z)for(var M in z)w.push(M+"="+z[M]);return w.join("&")}function q(z,w){return z+(w?"?":"")+G(w)}function H(z,w,M,A){return function(T,y,U,N,L){T?g.default.logAction(g.default.LOG_MICRO,"Resource."+w+"()","Received Error; "+q(M,A)+"; Error: "+p.inspectError(T)):g.default.logAction(g.default.LOG_MICRO,"Resource."+w+"()","Received; "+q(M,A)+"; Headers: "+G(U)+"; StatusCode: "+L+"; Body: "+(f.default.BufferUtils.isBuffer(y)?y.toString():y)),z&&z(T,y,U,N,L)}}var B=(function(){function z(){}return z.get=function(w,M,A,T,y,U){z.do(_.default.Get,w,M,null,A,T,y,U)},z.delete=function(w,M,A,T,y,U){z.do(_.default.Delete,w,M,null,A,T,y,U)},z.post=function(w,M,A,T,y,U,N){z.do(_.default.Post,w,M,A,T,y,U,N)},z.patch=function(w,M,A,T,y,U,N){z.do(_.default.Patch,w,M,A,T,y,U,N)},z.put=function(w,M,A,T,y,U,N){z.do(_.default.Put,w,M,A,T,y,U,N)},z.do=function(w,M,A,T,y,U,N,L){g.default.shouldLog(g.default.LOG_MICRO)&&(L=H(L,w,A,U)),N&&(L=L&&S(L,N),(U=U||{}).envelope=N);function Q(I,K){var V;if(g.default.shouldLog(g.default.LOG_MICRO)&&g.default.logAction(g.default.LOG_MICRO,"Resource."+w+"()","Sending; "+q(A,K)),g.default.shouldLog(g.default.LOG_MICRO)){var x=T;if(((V=I["content-type"])===null||V===void 0?void 0:V.indexOf("msgpack"))>0)try{x=f.default.Config.msgpack.decode(T)}catch(P){g.default.logAction(g.default.LOG_MICRO,"Resource."+w+"()","Sending MsgPack Decoding Error: "+p.inspectError(P))}g.default.logAction(g.default.LOG_MICRO,"Resource."+w+"()","Sending; "+q(A,K)+"; Body: "+x)}M.http.do(w,M,A,I,T,K,function(P,Z,k,at,F){if(P&&b.default.isTokenErr(P)){M.auth.authorize(null,null,function(lt){if(lt){L(lt);return}D(M,I,K,L,Q)});return}L(P,Z,k,at,F)})}D(M,y,U,L,Q)},z})();r.default=B}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(2)),p=c.__importDefault(o(3)),g=c.__importDefault(o(9)),b=c.__importStar(o(1));function _(E){return R.Actions.indexOf(E)}var R=(function(){function E(){}return E.prototype.isSynthesized=function(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId},E.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var D=this.id.split(":");return{connectionId:D[0],msgSerial:parseInt(D[1],10),index:parseInt(D[2],10)}},E.prototype.toJSON=function(){var D=this.data,S=this.encoding;return D&&p.default.BufferUtils.isBuffer(D)&&(arguments.length>0?(S=S?S+"/base64":"base64",D=p.default.BufferUtils.base64Encode(D)):D=p.default.BufferUtils.toBuffer(D)),{id:this.id,clientId:this.clientId,action:_(this.action),data:D,encoding:S,extras:this.extras}},E.prototype.toString=function(){var D="[PresenceMessage";return D+="; action="+this.action,this.id&&(D+="; id="+this.id),this.timestamp&&(D+="; timestamp="+this.timestamp),this.clientId&&(D+="; clientId="+this.clientId),this.connectionId&&(D+="; connectionId="+this.connectionId),this.encoding&&(D+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?D+="; data="+this.data:p.default.BufferUtils.isBuffer(this.data)?D+="; data (buffer)="+p.default.BufferUtils.base64Encode(this.data):D+="; data (json)="+JSON.stringify(this.data)),this.extras&&(D+="; extras="+JSON.stringify(this.extras)),D+="]",D},E.fromResponseBody=function(D,S,G){var q=[];G&&(D=b.decodeBody(D,G));for(var H=0;H<D.length;H++){var B=q[H]=E.fromValues(D[H],!0);try{E.decode(B,S)}catch(z){f.default.logAction(f.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",z.toString())}}return q},E.fromValues=function(D,S){return S&&(D.action=E.Actions[D.action]),Object.assign(new E,D)},E.fromValuesArray=function(D){for(var S=D.length,G=new Array(S),q=0;q<S;q++)G[q]=E.fromValues(D[q]);return G},E.fromEncoded=function(D,S){var G=E.fromValues(D,!0);try{E.decode(G,S??{})}catch(q){f.default.logAction(f.default.LOG_ERROR,"PresenceMessage.fromEncoded()",q.toString())}return G},E.fromEncodedArray=function(D,S){return D.map(function(G){return E.fromEncoded(G,S)})},E.fromData=function(D){return D instanceof E?D:E.fromValues({data:D})},E.Actions=["absent","present","enter","leave","update"],E.encode=g.default.encode,E.decode=g.default.decode,E.getMessagesSize=g.default.getMessagesSize,E})();r.default=R}),(function(s,r,o){(function(c){Object.defineProperty(r,"__esModule",{value:!0});var f=o(0),p=f.__importStar(o(1)),g=f.__importDefault(o(7)),b=f.__importStar(o(4)),_=f.__importDefault(o(2)),R=f.__importDefault(o(8)),E=f.__importDefault(o(22)),D=f.__importDefault(o(3));function S(N,L){return p.arrIn(p.allToLowerCase(p.keysArray(L)),"x-ably-errorcode")}function G(N,L){if(S(N,L))return N.error&&b.default.fromValues(N.error)}var q=function(){},H=0,B={},z=typeof c<"u"&&c.XDomainRequest;function w(){var N=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/);return N&&Number(N[1])}function M(){var N;return z&&(N=w())&&N===10}function A(N,L){return N.getResponseHeader&&N.getResponseHeader(L)}function T(N){return N.getResponseHeader&&(N.getResponseHeader("transfer-encoding")||!N.getResponseHeader("content-length"))}function y(N){for(var L=p.trim(N.getAllResponseHeaders()).split(`\r
`),Q={},I=0;I<L.length;I++){var K=L[I].split(":").map(p.trim);Q[K[0].toLowerCase()]=K[1]}return Q}var U=(function(N){f.__extends(L,N);function L(Q,I,K,V,x,P,Z){var k=N.call(this)||this;return K=K||{},K.rnd=p.cheapRandStr(),M()&&!K.envelope&&(K.envelope="json"),k.uri=Q+p.toQueryString(K),k.headers=I||{},k.body=V,k.method=Z?Z.toUpperCase():p.isEmptyArg(V)?"GET":"POST",k.requestMode=x,k.timeouts=P,k.timedOut=!1,k.requestComplete=!1,k.id=String(++H),B[k.id]=k,k}return L.createRequest=function(Q,I,K,V,x,P,Z){var k=P||R.default.TIMEOUTS;return new L(Q,I,p.copy(K),V,x,k,Z)},L.prototype.complete=function(Q,I,K,V,x){this.requestComplete||(this.requestComplete=!0,!Q&&I&&this.emit("data",I),this.emit("complete",Q,I,K,V,x),this.dispose())},L.prototype.abort=function(){this.dispose()},L.prototype.exec=function(){var Q=this,I=this.headers,K=this.requestMode==E.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,V=this.timer=setTimeout(function(){Q.timedOut=!0,P.abort()},K),x=this.method,P=this.xhr=new XMLHttpRequest,Z=I.accept,k=this.body,at="text";if(Z?Z.indexOf("application/x-msgpack")===0&&(at="arraybuffer"):I.accept="application/json",k){var F=I["content-type"]||(I["content-type"]="application/json");F.indexOf("application/json")>-1&&typeof k!="string"&&(k=JSON.stringify(k))}P.open(x,this.uri,!0),P.responseType=at,"authorization"in I&&(P.withCredentials=!0);for(var lt in I)P.setRequestHeader(lt,I[lt]);var it=function(At,Bt,$t,kt){var _t,jt=Bt+" (event type: "+At.type+")";!((_t=Q==null?void 0:Q.xhr)===null||_t===void 0)&&_t.statusText&&(jt+=", current statusText is "+Q.xhr.statusText),_.default.logAction(_.default.LOG_ERROR,"Request.on"+At.type+"()",jt),Q.complete(new b.PartialErrorInfo(jt,$t,kt))};P.onerror=function(At){it(At,"XHR error occurred",null,400)},P.onabort=function(At){Q.timedOut?it(At,"Request aborted due to request timeout expiring",null,408):it(At,"Request cancelled",null,400)},P.ontimeout=function(At){it(At,"Request timed out",null,408)};var X,J,$,nt=0,gt=!1,Rt=function(){if(clearTimeout(V),$=J<400,J==204){Q.complete(null,null,null,null,J);return}X=Q.requestMode==E.default.REQ_RECV_STREAM&&$&&T(P)},Ht=function(){var At;try{var Bt=A(P,"content-type"),$t=Bt?Bt.indexOf("application/json")>=0:P.responseType=="text";if($t){var kt=P.responseType==="arraybuffer"?D.default.BufferUtils.utf8Decode(P.response):String(P.responseText);kt.length?At=JSON.parse(kt):At=kt,gt=!0}else At=P.response;At.response!==void 0?(J=At.statusCode,$=J<400,I=At.headers,At=At.response):I=y(P)}catch(jt){Q.complete(new b.PartialErrorInfo("Malformed response body from server: "+jt.message,null,400));return}if($||p.isArray(At)){Q.complete(null,At,I,gt,J);return}var _t=G(At,I);_t||(_t=new b.PartialErrorInfo("Error response received from server: "+J+" body was: "+D.default.Config.inspect(At),null,J)),Q.complete(_t,At,I,gt,J)};function Kt(){for(var At=P.responseText,Bt=At.length-1,$t,kt;nt<Bt&&($t=At.indexOf(`
`,nt))>-1;)kt=At.slice(nt,$t),nt=$t+1,Ft(kt)}var Ft=function(At){try{At=JSON.parse(At)}catch(Bt){Q.complete(new b.PartialErrorInfo("Malformed response body from server: "+Bt.message,null,400));return}Q.emit("data",At)},fe=function(){Kt(),Q.streamComplete=!0,D.default.Config.nextTick(function(){Q.complete()})};P.onreadystatechange=function(){var At=P.readyState;At<3||P.status!==0&&(J===void 0&&(J=P.status,J===1223&&(J=204),Rt()),At==3&&X?Kt():At==4&&(X?fe():Ht()))},P.send(k)},L.prototype.dispose=function(){var Q=this.xhr;if(Q){Q.onreadystatechange=Q.onerror=Q.onabort=Q.ontimeout=q,this.xhr=null;var I=this.timer;I&&(clearTimeout(I),this.timer=null),this.requestComplete||Q.abort()}delete B[this.id]},L})(g.default);r.default=U}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(2)),p=c.__importStar(o(1)),g=c.__importDefault(o(24)),b=c.__importDefault(o(4)),_=c.__importDefault(o(45)),R=o(11),E=c.__importDefault(o(19)),D=c.__importDefault(o(14)),S=c.__importDefault(o(3)),G=c.__importDefault(o(15)),q=Math.pow(2,17);function H(){}function B(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function z(K){return!!K.connection}function w(K){return p.isErrorInfoOrPartialErrorInfo(K)?(K.code||(K.statusCode===403?K.code=40300:(K.code=40170,K.statusCode=401)),K):new b.default(p.inspectError(K),K.code||40170,K.statusCode||401)}var M=function(K,V){if(S.default.Config.createHmac){var x=S.default.Config.createHmac("SHA256",V);return x.update(K),x.digest("base64")}return(0,R.stringify)((0,_.default)(K,V))};function A(K){if(!K)return"";typeof K=="string"&&(K=JSON.parse(K));var V=Object.create(null),x=p.keysArray(K,!0);if(!x)return"";x.sort();for(var P=0;P<x.length;P++)V[x[P]]=K[x[P]].sort();return JSON.stringify(V)}function T(K){if(K.authCallback)f.default.logAction(f.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(K.authUrl)f.default.logAction(f.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(K.key)f.default.logAction(f.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(K.tokenDetails)f.default.logAction(f.default.LOG_MINOR,"Auth()","using token auth with supplied token only");else{var V="authOptions must include valid authentication parameters";throw f.default.logAction(f.default.LOG_ERROR,"Auth()",V),new Error(V)}}function y(K){return"useTokenAuth"in K&&!K.useTokenAuth}function U(K){return K.useTokenAuth||!y(K)&&(K.authCallback||K.authUrl||K.token||K.tokenDetails)}function N(K){return!K.key&&!K.authCallback&&!K.authUrl}var L=0;function Q(){return L++}var I=(function(){function K(V,x){if(this.authOptions={},this.client=V,this.tokenParams=x.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,U(x)){if(x.key&&!M){var P="client-side token request signing not supported";throw f.default.logAction(f.default.LOG_ERROR,"Auth()",P),new Error(P)}N(x)&&f.default.logAction(f.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(x.defaultTokenParams,x),T(this.authOptions)}else{if(!x.key){var P="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw f.default.logAction(f.default.LOG_ERROR,"Auth()",P),new b.default(P,40160,401)}f.default.logAction(f.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(x)}}return K.prototype.authorize=function(V,x,P){var Z=this,k;if(typeof V=="function"&&!P?(P=V,k=V=null):typeof x=="function"&&!P?(P=x,k=null):k=x,!P&&this.client.options.promises)return p.promisify(this,"authorize",arguments);if(k&&k.key&&this.authOptions.key!==k.key)throw new b.default("Unable to update auth options with incompatible key",40102,401);k&&"force"in k&&(f.default.deprecated("The `force` auth option","If you’re using this option to force `authorize()` to fetch a new token even if the current token has not expired, this is no longer necessary, as `authorize()` now always fetches a new token. Update your code to no longer pass the `force` auth option. Note that, in general, passing an auth options argument to `authorize()` will overwrite the library’s stored auth options, which may not be what you want. The library currently contains a special case behavior where passing an auth options object which only contains `{ force: true }` will _not_ overwrite the stored options. This special case behavior will be removed alongside support for the `force` option, so if you’re currently passing `authorize()` an auth options object which only contains `{ force: true }`, you should stop passing it an auth options object entirely."),p.isOnlyPropIn(k,"force")&&(k=null)),this._forceNewToken(V,k,function(at,F){if(at){Z.client.connection&&at.statusCode===D.default.Forbidden&&Z.client.connection.connectionManager.actOnErrorFromAuthorize(at),P==null||P(at);return}z(Z.client)?Z.client.connection.connectionManager.onAuthUpdated(F,P||H):P==null||P(null,F)})},K.prototype.authorise=function(V,x,P){f.default.renamedMethod("Auth","authorise","authorize"),this.authorize(V,x,P)},K.prototype._forceNewToken=function(V,x,P){var Z=this;this.tokenDetails=null,this._saveTokenOptions(V,x),T(this.authOptions),this._ensureValidAuthCredentials(!0,function(k,at){delete Z.tokenParams.timestamp,delete Z.authOptions.queryTime,P(k,at)})},K.prototype.requestToken=function(V,x,P){var Z=this;if(typeof V=="function"&&!P?(P=V,x=V=null):typeof x=="function"&&!P&&(P=x,x=null),!P&&this.client.options.promises)return p.promisify(this,"requestToken",arguments);x=x||this.authOptions,V=V||p.copy(this.tokenParams);var k=P||H,at,F=this.client;if(x.authCallback)f.default.logAction(f.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),at=x.authCallback;else if(x.authUrl)f.default.logAction(f.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),at=function(nt,gt){var Rt=p.mixin({accept:"application/json, text/plain"},x.authHeaders),Ht=x.authMethod&&x.authMethod.toLowerCase()==="post",Kt,Ft=x.authUrl.indexOf("?");Ft>-1&&(Kt=p.parseQueryString(x.authUrl.slice(Ft)),x.authUrl=x.authUrl.slice(0,Ft),Ht||(x.authParams=p.mixin(Kt,x.authParams)));var fe=p.mixin({},x.authParams||{},nt),At=function(kt,_t,jt,ve){var ne;if(kt?f.default.logAction(f.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+p.inspectError(kt)):(ne=jt["content-type"],f.default.logAction(f.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+ne+"; body: "+p.inspectBody(_t))),kt||ve)return gt(kt,_t);if(S.default.BufferUtils.isBuffer(_t)&&(_t=_t.toString()),!ne){gt(new b.default("authUrl response is missing a content-type header",40170,401));return}var ue=ne.indexOf("application/json")>-1,we=ne.indexOf("text/plain")>-1||ne.indexOf("application/jwt")>-1;if(!ue&&!we){gt(new b.default("authUrl responded with unacceptable content-type "+ne+", should be either text/plain, application/jwt or application/json",40170,401));return}if(ue){if(_t.length>q){gt(new b.default("authUrl response exceeded max permitted length",40170,401));return}try{_t=JSON.parse(_t)}catch(Ae){gt(new b.default("Unexpected error processing authURL response; err = "+Ae.message,40170,401));return}}gt(null,_t,ne)};if(f.default.logAction(f.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+x.authUrl+"; Params: "+JSON.stringify(fe)+"; method: "+(Ht?"POST":"GET")),Ht){var Bt=Rt||{};Bt["content-type"]="application/x-www-form-urlencoded";var $t=p.toQueryString(fe).slice(1);Z.client.http.doUri(E.default.Post,F,x.authUrl,Bt,$t,Kt,At)}else Z.client.http.doUri(E.default.Get,F,x.authUrl,Rt||{},null,fe,At)};else if(x.key)f.default.logAction(f.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),at=function(nt,gt){Z.createTokenRequest(nt,x,gt)};else{var lt="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";f.default.logAction(f.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),k(new b.default(lt,40171,403));return}"capability"in V&&(V.capability=A(V.capability));var it=function(nt,gt){var Rt=nt.keyName,Ht="/keys/"+Rt+"/requestToken",Kt=function(fe){return F.baseUri(fe)+Ht},Ft=p.defaultPostHeaders(Z.client.options);x.requestHeaders&&p.mixin(Ft,x.requestHeaders),f.default.logAction(f.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+Ht+"; Token params: "+JSON.stringify(nt)),Z.client.http.do(E.default.Post,F,Kt,Ft,JSON.stringify(nt),null,gt)},X=!1,J=this.client.options.timeouts.realtimeRequestTimeout,$=setTimeout(function(){X=!0;var nt="Token request callback timed out after "+J/1e3+" seconds";f.default.logAction(f.default.LOG_ERROR,"Auth.requestToken()",nt),k(new b.default(nt,40170,401))},J);at(V,function(nt,gt,Rt){if(!X){if(clearTimeout($),nt){f.default.logAction(f.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+p.inspectError(nt)),k(w(nt));return}if(typeof gt=="string"){gt.length===0?k(new b.default("Token string is empty",40170,401)):gt.length>q?k(new b.default("Token string exceeded max permitted length (was "+gt.length+" bytes)",40170,401)):gt==="undefined"||gt==="null"?k(new b.default("Token string was literal null/undefined",40170,401)):gt[0]==="{"&&!(Rt&&Rt.indexOf("application/jwt")>-1)?k(new b.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):k(null,{token:gt});return}if(typeof gt!="object"){var Ht="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof gt;f.default.logAction(f.default.LOG_ERROR,"Auth.requestToken()",Ht),k(new b.default(Ht,40170,401));return}var Kt=JSON.stringify(gt).length;if(Kt>q&&!x.suppressMaxLengthCheck){k(new b.default("Token request/details object exceeded max permitted stringified size (was "+Kt+" bytes)",40170,401));return}if("issued"in gt){k(null,gt);return}if(!("keyName"in gt)){var Ht="Expected token request callback to call back with a token string, token request object, or token details object";f.default.logAction(f.default.LOG_ERROR,"Auth.requestToken()",Ht),k(new b.default(Ht,40170,401));return}it(gt,function(Ft,fe,At,Bt){if(Ft){f.default.logAction(f.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+p.inspectError(Ft)),k(w(Ft));return}Bt||(fe=JSON.parse(fe)),f.default.logAction(f.default.LOG_MINOR,"Auth.getToken()","token received"),k(null,fe)})}})},K.prototype.createTokenRequest=function(V,x,P){var Z=this;if(typeof V=="function"&&!P?(P=V,x=V=null):typeof x=="function"&&!P&&(P=x,x=null),!P&&this.client.options.promises)return p.promisify(this,"createTokenRequest",arguments);x=x||this.authOptions,V=V||p.copy(this.tokenParams);var k=x.key;if(!k){P(new b.default("No key specified",40101,403));return}var at=k.split(":"),F=at[0],lt=at[1];if(!lt){P(new b.default("Invalid key specified",40101,403));return}if(V.clientId===""){P(new b.default("clientId can’t be an empty string",40012,400));return}"capability"in V&&(V.capability=A(V.capability));var it=p.mixin({keyName:F},V),X=V.clientId||"",J=V.ttl||"",$=V.capability||"";(function(nt){if(it.timestamp){nt();return}Z.getTimestamp(x&&x.queryTime,function(gt,Rt){if(gt){P(gt);return}it.timestamp=Rt,nt()})})(function(){var nt=it.nonce||(it.nonce=B()),gt=it.timestamp,Rt=it.keyName+`
`+J+`
`+$+`
`+X+`
`+gt+`
`+nt+`
`;it.mac=it.mac||M(Rt,lt),f.default.logAction(f.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),P(null,it)})},K.prototype.getAuthParams=function(V){this.method=="basic"?V(null,{key:this.key}):this._ensureValidAuthCredentials(!1,function(x,P){if(x){V(x);return}if(!P)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");V(null,{access_token:P.token})})},K.prototype.getAuthHeaders=function(V){this.method=="basic"?V(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,function(x,P){if(x){V(x);return}if(!P)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");V(null,{authorization:"Bearer "+p.toBase64(P.token)})})},K.prototype.getTimestamp=function(V,x){!this.isTimeOffsetSet()&&(V||this.authOptions.queryTime)?this.client.time(x):x(null,this.getTimestampUsingOffset())},K.prototype.getTimestampUsingOffset=function(){return p.now()+(this.client.serverTimeOffset||0)},K.prototype.isTimeOffsetSet=function(){return this.client.serverTimeOffset!==null},K.prototype._saveBasicOptions=function(V){this.method="basic",this.key=V.key,this.basicKey=p.toBase64(V.key),this.authOptions=V||{},"clientId"in V&&this._userSetClientId(V.clientId)},K.prototype._saveTokenOptions=function(V,x){this.method="token",V&&(this.tokenParams=V),x&&(x.token&&(x.tokenDetails=typeof x.token=="string"?{token:x.token}:x.token),x.tokenDetails&&(this.tokenDetails=x.tokenDetails),"clientId"in x&&this._userSetClientId(x.clientId),this.authOptions=x)},K.prototype._ensureValidAuthCredentials=function(V,x){var P=this,Z=this.tokenDetails;if(Z){if(this._tokenClientIdMismatch(Z.clientId)){x(new b.default("Mismatch between clientId in token ("+Z.clientId+") and current clientId ("+this.clientId+")",40102,403));return}if(!this.isTimeOffsetSet()||!Z.expires||Z.expires>=this.getTimestampUsingOffset()){f.default.logAction(f.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+Z.expires),x(null,Z);return}f.default.logAction(f.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=g.default.create())).push(x),!(this.currentTokenRequestId!==null&&!V)){var k=this.currentTokenRequestId=Q();this.requestToken(this.tokenParams,this.authOptions,function(at,F){if(P.currentTokenRequestId>k){f.default.logAction(f.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");return}P.currentTokenRequestId=null;var lt=P.waitingForTokenRequest||H;if(P.waitingForTokenRequest=null,at){lt(at);return}lt(null,P.tokenDetails=F)})}},K.prototype._userSetClientId=function(V){if(typeof V=="string"||V===null){if(V==="*")throw new b.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var x=this._uncheckedSetClientId(V);if(x)throw x}else throw new b.default("clientId must be either a string or null",40012,400)},K.prototype._uncheckedSetClientId=function(V){if(this._tokenClientIdMismatch(V)){var x="Unexpected clientId mismatch: client has "+this.clientId+", requested "+V,P=new b.default(x,40102,401);return f.default.logAction(f.default.LOG_ERROR,"Auth._uncheckedSetClientId()",x),P}else return this.clientId=this.tokenParams.clientId=V,null},K.prototype._tokenClientIdMismatch=function(V){return!!(this.clientId&&this.clientId!=="*"&&V&&V!=="*"&&this.clientId!==V)},K.isTokenErr=function(V){return V.code&&V.code>=40140&&V.code<40150},K.prototype.revokeTokens=function(V,x,P){if(U(this.client.options))throw new b.default("Cannot revoke tokens when using token auth",40162,401);var Z=this.client.options.keyName,k;if(typeof x=="function"?(P=x,k={}):k=x??{},P===void 0){if(this.client.options.promises)return p.promisify(this,"revokeTokens",[V,k]);P=H}var at=P,F=c.__assign({targets:V.map(function(J){return"".concat(J.type,":").concat(J.value)})},k),lt=this.client.options.useBinaryProtocol?p.Format.msgpack:p.Format.json,it=p.defaultPostHeaders(this.client.options,lt);this.client.options.headers&&p.mixin(it,this.client.options.headers);var X=p.encodeBody(F,lt);G.default.post(this.client,"/keys/".concat(Z,"/revokeTokens"),X,it,{newBatchResponse:"true"},null,function(J,$,nt,gt){if(J){at(J);return}var Rt=gt?$:p.decodeBody($,lt);at(null,Rt)})},K})();r.default=I}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c;(function(f){f.Get="get",f.Delete="delete",f.Post="post",f.Put="put",f.Patch="patch"})(c||(c={})),r.default=c}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.HttpPaginatedResponse=r.PaginatedResult=void 0;var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(2)),g=c.__importDefault(o(15)),b=c.__importDefault(o(14));function _(q){var H=q.match(/^\.\/(\w+)\?(.*)$/);return H&&H[2]&&f.parseQueryString(H[2])}function R(q){typeof q=="string"&&(q=q.split(","));for(var H={},B=0;B<q.length;B++){var z=q[B].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(z){var w=_(z[1]);w&&(H[z[2]]=w)}}return H}function E(q,H,B){return!(B&&(H||typeof q.code=="number"))}var D=(function(){function q(H,B,z,w,M,A){this.rest=H,this.path=B,this.headers=z,this.envelope=w??null,this.bodyHandler=M,this.useHttpPaginatedResponse=A||!1}return q.prototype.get=function(H,B){var z=this;g.default.get(this.rest,this.path,this.headers,H,this.envelope,function(w,M,A,T,y){z.handlePage(w,M,A,T,y,B)})},q.prototype.delete=function(H,B){var z=this;g.default.delete(this.rest,this.path,this.headers,H,this.envelope,function(w,M,A,T,y){z.handlePage(w,M,A,T,y,B)})},q.prototype.post=function(H,B,z){var w=this;g.default.post(this.rest,this.path,B,this.headers,H,this.envelope,function(M,A,T,y,U){z&&w.handlePage(M,A,T,y,U,z)})},q.prototype.put=function(H,B,z){var w=this;g.default.put(this.rest,this.path,B,this.headers,H,this.envelope,function(M,A,T,y,U){z&&w.handlePage(M,A,T,y,U,z)})},q.prototype.patch=function(H,B,z){var w=this;g.default.patch(this.rest,this.path,B,this.headers,H,this.envelope,function(M,A,T,y,U){z&&w.handlePage(M,A,T,y,U,z)})},q.prototype.handlePage=function(H,B,z,w,M,A){if(H&&E(H,B,this.useHttpPaginatedResponse)){p.default.logAction(p.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+f.inspectError(H)),A==null||A(H);return}var T,y,U;try{T=M==b.default.NoContent?[]:this.bodyHandler(B,z||{},w)}catch(N){A==null||A(H||N);return}z&&(y=z.Link||z.link)&&(U=R(y)),this.useHttpPaginatedResponse?A(null,new G(this,T,z||{},M,U,H)):A(null,new S(this,T,U))},q})(),S=(function(){function q(H,B,z){var w=this;this.resource=H,this.items=B;var M=this;z&&("first"in z&&(this.first=function(A){if(!A&&M.resource.rest.options.promises)return f.promisify(M,"first",[]);M.get(z.first,A)}),"current"in z&&(this.current=function(A){if(!A&&M.resource.rest.options.promises)return f.promisify(M,"current",[]);M.get(z.current,A)}),this.next=function(A){if(!A&&M.resource.rest.options.promises)return f.promisify(M,"next",[]);"next"in z?M.get(z.next,A):A(null,null)},this.hasNext=function(){return"next"in z},this.isLast=function(){var A;return!(!((A=w.hasNext)===null||A===void 0)&&A.call(w))})}return q.prototype.get=function(H,B){var z=this.resource;g.default.get(z.rest,z.path,z.headers,H,z.envelope,function(w,M,A,T,y){z.handlePage(w,M,A,T,y,B)})},q})();r.PaginatedResult=S;var G=(function(q){c.__extends(H,q);function H(B,z,w,M,A,T){var y=q.call(this,B,z,A)||this;return y.statusCode=M,y.success=M<300&&M>=200,y.headers=w,y.errorCode=T&&T.code,y.errorMessage=T&&T.message,y}return H.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},H})(S);r.HttpPaginatedResponse=G,r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isRetriable=void 0;var c=o(0),f=c.__importDefault(o(4)),p={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},g={disconnected:function(){return f.default.fromValues({statusCode:400,code:p.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return f.default.fromValues({statusCode:400,code:p.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return f.default.fromValues({statusCode:400,code:p.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return f.default.fromValues({statusCode:400,code:p.CLOSING,message:"Connection closing"})},closed:function(){return f.default.fromValues({statusCode:400,code:p.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return f.default.fromValues({statusCode:500,code:p.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return f.default.fromValues({statusCode:500,code:p.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};function b(_){return!_.statusCode||!_.code||_.statusCode>=500?!0:Object.values(p).includes(_.code)}r.isRetriable=b,r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c;(function(f){f[f.REQ_SEND=0]="REQ_SEND",f[f.REQ_RECV=1]="REQ_RECV",f[f.REQ_RECV_POLL=2]="REQ_RECV_POLL",f[f.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"})(c||(c={})),r.default=c}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(5),o(58),o(11),o(40),o(32),o(25),o(27),o(28),o(59),o(60))})(this,function(c){return c})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(2)),p=(function(){function g(b){this.members=b||[]}return g.prototype.call=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];for(var R=0,E=this.members;R<E.length;R++){var D=E[R];if(D)try{D.apply(void 0,b)}catch(S){f.default.logAction(f.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+S+"; stack = "+S.stack)}}},g.prototype.push=function(){for(var b,_=[],R=0;R<arguments.length;R++)_[R]=arguments[R];(b=this.members).push.apply(b,_)},g.create=function(b){var _=new g(b);return Object.assign(function(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return _.call.apply(_,R)},{push:function(R){return _.push(R)}})},g})();r.default=p}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){(function(){var f=c,p=f.lib,g=p.Base,b=f.enc,_=b.Utf8,R=f.algo;R.HMAC=g.extend({init:function(E,D){E=this._hasher=new E.init,typeof D=="string"&&(D=_.parse(D));var S=E.blockSize,G=S*4;D.sigBytes>G&&(D=E.finalize(D)),D.clamp();for(var q=this._oKey=D.clone(),H=this._iKey=D.clone(),B=q.words,z=H.words,w=0;w<S;w++)B[w]^=1549556828,z[w]^=909522486;q.sigBytes=H.sigBytes=G,this.reset()},reset:function(){var E=this._hasher;E.reset(),E.update(this._iKey)},update:function(E){return this._hasher.update(E),this},finalize:function(E){var D=this._hasher,S=D.finalize(E);D.reset();var G=D.finalize(this._oKey.clone().concat(S));return G}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(10)),p=c.__importStar(o(1)),g=c.__importDefault(o(7)),b=c.__importDefault(o(2)),_=c.__importDefault(o(21)),R=c.__importDefault(o(4)),E=c.__importDefault(o(3)),D=f.default.Action,S=f.default.fromValues({action:D.CLOSE}),G=f.default.fromValues({action:D.DISCONNECT}),q=(function(H){c.__extends(B,H);function B(z,w,M,A){var T=H.call(this)||this;return A&&(M.format=void 0,M.heartbeats=!0),T.connectionManager=z,z.registerProposedTransport(T),T.auth=w,T.params=M,T.timeouts=M.options.timeouts,T.format=M.format,T.isConnected=!1,T.isFinished=!1,T.isDisposed=!1,T.maxIdleInterval=null,T.idleTimer=null,T.lastActivity=null,T}return B.prototype.connect=function(){},B.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",_.default.closed())},B.prototype.disconnect=function(z){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",z||_.default.disconnected())},B.prototype.fail=function(z){this.isConnected&&this.requestDisconnect(),this.finish("failed",z||_.default.failed())},B.prototype.finish=function(z,w){var M;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((M=this.idleTimer)!==null&&M!==void 0?M:void 0),this.idleTimer=null,this.emit(z,w),this.dispose())},B.prototype.onProtocolMessage=function(z){switch(b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+f.default.stringify(z)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),z.action){case D.HEARTBEAT:b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",z.id);break;case D.CONNECTED:this.onConnect(z),this.emit("connected",z.error,z.connectionId,z.connectionDetails,z);break;case D.CLOSED:this.onClose(z);break;case D.DISCONNECTED:this.onDisconnect(z);break;case D.ACK:this.emit("ack",z.msgSerial,z.count);break;case D.NACK:this.emit("nack",z.msgSerial,z.count,z.error);break;case D.SYNC:this.connectionManager.onChannelMessage(z,this);break;case D.ACTIVATE:break;case D.AUTH:this.auth.authorize(function(w){w&&b.default.logAction(b.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+p.inspectError(w))});break;case D.ERROR:if(b.default.logAction(b.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+E.default.Config.inspect(z.error)+(z.channel?", channel: "+z.channel:"")),z.channel===void 0){this.onFatalError(z);break}this.connectionManager.onChannelMessage(z,this);break;default:this.connectionManager.onChannelMessage(z,this)}},B.prototype.onConnect=function(z){if(this.isConnected=!0,!z.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var w=z.connectionDetails.maxIdleInterval;w&&(this.maxIdleInterval=w+this.timeouts.realtimeRequestTimeout,this.onActivity())},B.prototype.onDisconnect=function(z){var w=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onDisconnect()","err = "+p.inspectError(w)),this.finish("disconnected",w)},B.prototype.onFatalError=function(z){var w=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onFatalError()","err = "+p.inspectError(w)),this.finish("failed",w)},B.prototype.onClose=function(z){var w=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onClose()","err = "+p.inspectError(w)),this.finish("closed",w)},B.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestClose()",""),this.send(S)},B.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(G)},B.prototype.ping=function(z){var w={action:f.default.Action.HEARTBEAT};z&&(w.id=z),this.send(f.default.fromValues(w))},B.prototype.dispose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},B.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=p.now(),this.setIdleTimer(this.maxIdleInterval+100))},B.prototype.setIdleTimer=function(z){var w=this;this.idleTimer||(this.idleTimer=setTimeout(function(){w.onIdleTimerExpire()},z))},B.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var z=p.now()-this.lastActivity,w=this.maxIdleInterval-z;if(w<=0){var M="No activity seen from realtime in "+z+"ms; assuming connection has dropped";b.default.logAction(b.default.LOG_ERROR,"Transport.onIdleTimerExpire()",M),this.disconnect(new R.default(M,80003,408))}else this.setIdleTimer(w+100)},B.tryConnect=function(z,w,M,A,T){var y=new z(w,M,A),U,N=function(Q){clearTimeout(U),T({event:this.event,error:Q})},L=w.options.timeouts.realtimeRequestTimeout;U=setTimeout(function(){y.off(["preconnect","disconnected","failed"]),y.dispose(),N.call({event:"disconnected"},new R.default("Timeout waiting for transport to indicate itself viable",5e4,500))},L),y.on(["failed","disconnected"],N),y.on("preconnect",function(){b.default.logAction(b.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+y),clearTimeout(U),y.off(["failed","disconnected"],N),T(null,y)}),y.connect()},B})(g.default);r.default=q}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(40),o(25))})(this,function(c){return(function(){var f=c,p=f.lib,g=p.Base,b=p.WordArray,_=f.algo,R=_.MD5,E=_.EvpKDF=g.extend({cfg:g.extend({keySize:128/32,hasher:R,iterations:1}),init:function(D){this.cfg=this.cfg.extend(D)},compute:function(D,S){for(var G,q=this.cfg,H=q.hasher.create(),B=b.create(),z=B.words,w=q.keySize,M=q.iterations;z.length<w;){G&&H.update(G),G=H.update(D).finalize(S),H.reset();for(var A=1;A<M;A++)G=H.finalize(G),H.reset();B.concat(G)}return B.sigBytes=w*4,B}});f.EvpKDF=function(D,S,G){return E.create(G).compute(D,S)}})(),c.EvpKDF})}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(27))})(this,function(c){c.lib.Cipher||(function(f){var p=c,g=p.lib,b=g.Base,_=g.WordArray,R=g.BufferedBlockAlgorithm,E=p.enc;E.Utf8;var D=E.Base64,S=p.algo,G=S.EvpKDF,q=g.Cipher=R.extend({cfg:b.extend(),createEncryptor:function(I,K){return this.create(this._ENC_XFORM_MODE,I,K)},createDecryptor:function(I,K){return this.create(this._DEC_XFORM_MODE,I,K)},init:function(I,K,V){this.cfg=this.cfg.extend(V),this._xformMode=I,this._key=K,this.reset()},reset:function(){R.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var K=this._doFinalize();return K},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function I(K){return typeof K=="string"?Q:U}return function(K){return{encrypt:function(V,x,P){return I(x).encrypt(K,V,x,P)},decrypt:function(V,x,P){return I(x).decrypt(K,V,x,P)}}}})()});g.StreamCipher=q.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var H=p.mode={},B=g.BlockCipherMode=b.extend({createEncryptor:function(I,K){return this.Encryptor.create(I,K)},createDecryptor:function(I,K){return this.Decryptor.create(I,K)},init:function(I,K){this._cipher=I,this._iv=K}}),z=H.CBC=(function(){var I=B.extend();I.Encryptor=I.extend({processBlock:function(V,x){var P=this._cipher,Z=P.blockSize;K.call(this,V,x,Z),P.encryptBlock(V,x),this._prevBlock=V.slice(x,x+Z)}}),I.Decryptor=I.extend({processBlock:function(V,x){var P=this._cipher,Z=P.blockSize,k=V.slice(x,x+Z);P.decryptBlock(V,x),K.call(this,V,x,Z),this._prevBlock=k}});function K(V,x,P){var Z,k=this._iv;k?(Z=k,this._iv=f):Z=this._prevBlock;for(var at=0;at<P;at++)V[x+at]^=Z[at]}return I})(),w=p.pad={},M=w.Pkcs7={pad:function(I,K){for(var V=K*4,x=V-I.sigBytes%V,P=x<<24|x<<16|x<<8|x,Z=[],k=0;k<x;k+=4)Z.push(P);var at=_.create(Z,x);I.concat(at)},unpad:function(I){var K=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=K}};g.BlockCipher=q.extend({cfg:q.cfg.extend({mode:z,padding:M}),reset:function(){var I;q.reset.call(this);var K=this.cfg,V=K.iv,x=K.mode;this._xformMode==this._ENC_XFORM_MODE?I=x.createEncryptor:(I=x.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,V&&V.words):(this._mode=I.call(x,this,V&&V.words),this._mode.__creator=I)},_doProcessBlock:function(I,K){this._mode.processBlock(I,K)},_doFinalize:function(){var I,K=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(K.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),K.unpad(I)),I},blockSize:128/32});var A=g.CipherParams=b.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),T=p.format={},y=T.OpenSSL={stringify:function(I){var K,V=I.ciphertext,x=I.salt;return x?K=_.create([1398893684,1701076831]).concat(x).concat(V):K=V,K.toString(D)},parse:function(I){var K,V=D.parse(I),x=V.words;return x[0]==1398893684&&x[1]==1701076831&&(K=_.create(x.slice(2,4)),x.splice(0,4),V.sigBytes-=16),A.create({ciphertext:V,salt:K})}},U=g.SerializableCipher=b.extend({cfg:b.extend({format:y}),encrypt:function(I,K,V,x){x=this.cfg.extend(x);var P=I.createEncryptor(V,x),Z=P.finalize(K),k=P.cfg;return A.create({ciphertext:Z,key:V,iv:k.iv,algorithm:I,mode:k.mode,padding:k.padding,blockSize:I.blockSize,formatter:x.format})},decrypt:function(I,K,V,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var P=I.createDecryptor(V,x).finalize(K.ciphertext);return P},_parse:function(I,K){return typeof I=="string"?K.parse(I,this):I}}),N=p.kdf={},L=N.OpenSSL={execute:function(I,K,V,x){x||(x=_.random(64/8));var P=G.create({keySize:K+V}).compute(I,x),Z=_.create(P.words.slice(K),V*4);return P.sigBytes=K*4,A.create({key:P,iv:Z,salt:x})}},Q=g.PasswordBasedCipher=U.extend({cfg:U.cfg.extend({kdf:L}),encrypt:function(I,K,V,x){x=this.cfg.extend(x);var P=x.kdf.execute(V,I.keySize,I.ivSize);x.iv=P.iv;var Z=U.encrypt.call(this,I,K,P.key,x);return Z.mixIn(P),Z},decrypt:function(I,K,V,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var P=x.kdf.execute(V,I.keySize,I.ivSize,K.salt);x.iv=P.iv;var Z=U.decrypt.call(this,I,K,P.key,x);return Z}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.Request=r.createRequest=void 0;var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(12)),g=c.__importDefault(o(3)),b=c.__importDefault(o(7)),_=o(4),R=c.__importDefault(o(8)),E=c.__importDefault(o(2)),D=c.__importDefault(o(22)),S=f.getGlobalObject(),G=function(){},q=S._ablyjs_jsonp={};q._=function(T){return q["_"+T]||G};var H=1,B="jsonp";function z(T,y,U,N,L,Q,I){return Q=Q||R.default.TIMEOUTS,new M(void 0,T,y,f.copy(U),N,L,Q,I)}r.createRequest=z;var w=(function(T){c.__extends(y,T);function y(U,N,L){var Q=T.call(this,U,N,L)||this;return Q.shortName=B,L.stream=!1,Q}return y.isAvailable=function(){return g.default.Config.jsonpSupported&&g.default.Config.allowComet},y.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},y.prototype.createRequest=function(U,N,L,Q,I,K,V){return K=(this===null||this===void 0?void 0:this.timeouts)||K||R.default.TIMEOUTS,z(U,N,L,Q,I,K,V)},y})(p.default),M=(function(T){c.__extends(y,T);function y(U,N,L,Q,I,K,V,x){var P=T.call(this)||this;return U===void 0&&(U=H++),P.id=U,P.uri=N,P.params=Q||{},P.params.rnd=f.cheapRandStr(),L&&(L["X-Ably-Version"]&&(P.params.v=L["X-Ably-Version"]),L["X-Ably-Lib"]&&(P.params.lib=L["X-Ably-Lib"])),P.body=I,P.method=x,P.requestMode=K,P.timeouts=V,P.requestComplete=!1,P}return y.prototype.exec=function(){var U=this,N=this.id,L=this.body,Q=this.method,I=this.uri,K=this.params;K.callback="_ablyjs_jsonp._("+N+")",K.envelope="jsonp",L&&(K.body=L),Q&&Q!=="get"&&(K.method=Q);var V=this.script=document.createElement("script"),x=I+f.toQueryString(K);V.src=x,V.src.split("/").slice(-1)[0]!==x.split("/").slice(-1)[0]&&E.default.logAction(E.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),V.async=!0,V.type="text/javascript",V.charset="UTF-8",V.onerror=function(k){U.complete(new _.PartialErrorInfo("JSONP script error (event: "+g.default.Config.inspect(k)+")",null,400))},q["_"+N]=function(k){if(k.statusCode){var at=k.response;if(k.statusCode==204)U.complete(null,null,null,k.statusCode);else if(!at)U.complete(new _.PartialErrorInfo("Invalid server response: no envelope detected",null,500));else if(k.statusCode<400||f.isArray(at))U.complete(null,at,k.headers,k.statusCode);else{var F=at.error||new _.PartialErrorInfo("Error response received from server",null,k.statusCode);U.complete(F)}}else U.complete(null,k)};var P=this.requestMode==D.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),P);var Z=document.getElementsByTagName("head")[0];Z.insertBefore(V,Z.firstChild)},y.prototype.complete=function(U,N,L,Q){if(L=L||{},!this.requestComplete){this.requestComplete=!0;var I=void 0;N&&(I=typeof N=="string"?"text/plain":"application/json",L["content-type"]=I,this.emit("data",N)),this.emit("complete",U,N,L,!0,Q),this.dispose()}},y.prototype.abort=function(){this.dispose()},y.prototype.dispose=function(){var U=this.timer;U&&(clearTimeout(U),this.timer=null);var N=this.script;N.parentNode&&N.parentNode.removeChild(N),delete q[this.id],this.emit("disposed")},y})(b.default);r.Request=M;function A(T){return S.JSONPTransport=w,w.isAvailable()&&(T.supportedTransports[B]=w),w}r.default=A}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(2)),g=c.__importDefault(o(8)),b=c.__importDefault(o(18)),_=c.__importDefault(o(46)),R=c.__importDefault(o(20)),E=c.__importDefault(o(33)),D=c.__importDefault(o(4)),S=c.__importDefault(o(49)),G=c.__importDefault(o(19)),q=c.__importDefault(o(3)),H=c.__importDefault(o(9)),B=c.__importDefault(o(16)),z=c.__importDefault(o(15)),w=function(){},M=(function(){function T(y){if(!y){var U="no options provided";throw p.default.logAction(p.default.LOG_ERROR,"Rest()",U),new Error(U)}var N=g.default.objectifyOptions(y);N.log?(p.default.setLog(N.log.level,N.log.handler),p.default.deprecated("The `log` client option","Equivalent functionality is provided by the `logLevel` and `logHandler` client options. Update your client options code of the form `{ log: { level: logLevel, handler: logHandler } }` to instead be `{ logLevel, logHandler }`.")):p.default.setLog(N.logLevel,N.logHandler),p.default.logAction(p.default.LOG_MICRO,"Rest()","initialized with clientOptions "+q.default.Config.inspect(y));var L=this.options=g.default.normaliseOptions(N);if(L.key){var Q=L.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!Q){var U="invalid key parameter";throw p.default.logAction(p.default.LOG_ERROR,"Rest()",U),new D.default(U,40400,404)}L.keyName=Q[1],L.keySecret=Q[2]}if("clientId"in L)if(typeof L.clientId=="string"||L.clientId===null){if(L.clientId==="*")throw new D.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new D.default("clientId must be either a string or null",40012,400);p.default.logAction(p.default.LOG_MINOR,"Rest()","started; version = "+g.default.version),this.baseUri=this.authority=function(I){return g.default.getHttpScheme(L)+I+":"+g.default.getPort(L,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new q.default.Http(L),this.auth=new b.default(this,L),this.channels=new A(this),this.push=new _.default(this)}return T.prototype.stats=function(y,U){if(U===void 0)if(typeof y=="function")U=y,y=null;else{if(this.options.promises)return f.promisify(this,"stats",[y]);U=w}var N=f.defaultGetHeaders(this.options),L=this.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,Q=this.http.supportsLinkHeaders?void 0:L;this.options.headers&&f.mixin(N,this.options.headers),new R.default(this,"/stats",N,Q,function(I,K,V){for(var x=V?I:JSON.parse(I),P=0;P<x.length;P++)x[P]=S.default.fromValues(x[P]);return x}).get(y,U)},T.prototype.time=function(y,U){var N=this;if(U===void 0){if(typeof y=="function")U=y,y=null;else if(this.options.promises)return f.promisify(this,"time",[y])}var L=U||w,Q=f.defaultGetHeaders(this.options);this.options.headers&&f.mixin(Q,this.options.headers);var I=function(K){return N.authority(K)+"/time"};this.http.do(G.default.Get,this,I,Q,null,y,function(K,V,x,P){if(K){L(K);return}P||(V=JSON.parse(V));var Z=V[0];if(!Z){L(new D.default("Internal error (unexpected result type from GET /time)",5e4,500));return}N.serverTimeOffset=Z-f.now(),L(null,Z)})},T.prototype.request=function(y,U,N,L,Q,I){var K=this.options.useBinaryProtocol,V=K?q.default.Config.msgpack.encode:JSON.stringify,x=K?q.default.Config.msgpack.decode:JSON.parse,P=K?f.Format.msgpack:f.Format.json,Z=this.http.supportsLinkHeaders?void 0:P;N=N||{};var k=y.toLowerCase(),at=k=="get"?f.defaultGetHeaders(this.options,P):f.defaultPostHeaders(this.options,P);if(I===void 0){if(this.options.promises)return f.promisify(this,"request",[y,U,N,L,Q]);I=w}typeof L!="string"&&(L=V(L)),this.options.headers&&f.mixin(at,this.options.headers),Q&&f.mixin(at,Q);var F=new R.default(this,U,at,Z,function(lt,it,X){return f.ensureArray(X?lt:x(lt))},!0);if(!f.arrIn(q.default.Http.methods,k))throw new D.default("Unsupported method "+k,40500,405);f.arrIn(q.default.Http.methodsWithBody,k)?F[k](N,L,I):F[k](N,I)},T.prototype.batchPublish=function(y,U){if(U===void 0){if(this.options.promises)return f.promisify(this,"batchPublish",[y]);U=w}var N=U,L,Q;f.isArray(y)?(L=y,Q=!1):(L=[y],Q=!0);var I=this.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,K=f.defaultPostHeaders(this.options,I);this.options.headers&&f.mixin(K,this.options.headers);var V=f.encodeBody(L,I);z.default.post(this,"/messages",V,K,{newBatchResponse:"true"},null,function(x,P,Z,k){if(x){N(x);return}var at=k?P:f.decodeBody(P,I);Q?N(null,at[0]):N(null,at)})},T.prototype.batchPresence=function(y,U){if(U===void 0){if(this.options.promises)return f.promisify(this,"batchPresence",[y]);U=w}var N=U,L=this.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,Q=f.defaultPostHeaders(this.options,L);this.options.headers&&f.mixin(Q,this.options.headers);var I=y.join(",");z.default.get(this,"/presence",Q,{newBatchResponse:"true",channels:I},null,function(K,V,x,P){if(K){N(K);return}var Z=P?V:f.decodeBody(V,L);N(null,Z)})},T.prototype.setLog=function(y){p.default.setLog(y.level,y.handler)},T.Promise=function(y){return y=g.default.objectifyOptions(y),y.promises=!0,new T(y)},T.Callbacks=T,T.Platform=q.default,T.Message=H.default,T.PresenceMessage=B.default,T})(),A=(function(){function T(y){this.rest=y,this.all=Object.create(null)}return T.prototype.get=function(y,U){y=String(y);var N=this.all[y];return N?U&&N.setOptions(U):this.all[y]=N=new E.default(this.rest,y,U),N},T.prototype.release=function(y){delete this.all[String(y)]},T})();r.default=M}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return c.enc.Utf8})}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(f){var p=c,g=p.lib,b=g.WordArray,_=g.Hasher,R=p.algo,E=[],D=[];(function(){function q(w){for(var M=f.sqrt(w),A=2;A<=M;A++)if(!(w%A))return!1;return!0}function H(w){return(w-(w|0))*4294967296|0}for(var B=2,z=0;z<64;)q(B)&&(z<8&&(E[z]=H(f.pow(B,1/2))),D[z]=H(f.pow(B,1/3)),z++),B++})();var S=[],G=R.SHA256=_.extend({_doReset:function(){this._hash=new b.init(E.slice(0))},_doProcessBlock:function(q,H){for(var B=this._hash.words,z=B[0],w=B[1],M=B[2],A=B[3],T=B[4],y=B[5],U=B[6],N=B[7],L=0;L<64;L++){if(L<16)S[L]=q[H+L]|0;else{var Q=S[L-15],I=(Q<<25|Q>>>7)^(Q<<14|Q>>>18)^Q>>>3,K=S[L-2],V=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;S[L]=I+S[L-7]+V+S[L-16]}var x=T&y^~T&U,P=z&w^z&M^w&M,Z=(z<<30|z>>>2)^(z<<19|z>>>13)^(z<<10|z>>>22),k=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),at=N+k+x+D[L]+S[L],F=Z+P;N=U,U=y,y=T,T=A+at|0,A=M,M=w,w=z,z=at+F|0}B[0]=B[0]+z|0,B[1]=B[1]+w|0,B[2]=B[2]+M|0,B[3]=B[3]+A|0,B[4]=B[4]+T|0,B[5]=B[5]+y|0,B[6]=B[6]+U|0,B[7]=B[7]+N|0},_doFinalize:function(){var q=this._data,H=q.words,B=this._nDataBytes*8,z=q.sigBytes*8;return H[z>>>5]|=128<<24-z%32,H[(z+64>>>9<<4)+14]=f.floor(B/4294967296),H[(z+64>>>9<<4)+15]=B,q.sigBytes=H.length*4,this._process(),this._hash},clone:function(){var q=_.clone.call(this);return q._hash=this._hash.clone(),q}});p.SHA256=_._createHelper(G),p.HmacSHA256=_._createHmacHelper(G)})(Math),c.SHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(7)),g=c.__importDefault(o(2)),b=c.__importDefault(o(34)),_=c.__importDefault(o(9)),R=c.__importDefault(o(4)),E=c.__importDefault(o(20)),D=c.__importDefault(o(15)),S=c.__importDefault(o(3));function G(){}var q=9;function H(w){return f.arrEvery(w,function(M){return!M.id})}function B(w){var M=w||{};if(M.cipher){if(!S.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var A=S.default.Crypto.getCipher(M.cipher);M.cipher=A.cipherParams,M.channelCipher=A.cipher}else"cipher"in M&&(M.cipher=void 0,M.channelCipher=null);return M}var z=(function(w){c.__extends(M,w);function M(A,T,y){var U=w.call(this)||this;return g.default.logAction(g.default.LOG_MINOR,"Channel()","started; name = "+T),U.rest=A,U.name=T,U.basePath="/channels/"+encodeURIComponent(T),U.presence=new b.default(U),U.channelOptions=B(y),U}return M.prototype.setOptions=function(A){this.channelOptions=B(A)},M.prototype.history=function(A,T){if(g.default.logAction(g.default.LOG_MICRO,"Channel.history()","channel = "+this.name),T===void 0)if(typeof A=="function")T=A,A=null;else{if(this.rest.options.promises)return f.promisify(this,"history",arguments);T=G}this._history(A,T)},M.prototype._history=function(A,T){var y=this.rest,U=y.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,N=this.rest.http.supportsLinkHeaders?void 0:U,L=f.defaultGetHeaders(y.options,U);y.options.headers&&f.mixin(L,y.options.headers);var Q=this.channelOptions;new E.default(y,this.basePath+"/messages",L,N,function(I,K,V){return _.default.fromResponseBody(I,Q,V?void 0:U)}).get(A,T)},M.prototype.publish=function(){var A=this,T=arguments.length,y=arguments[0],U=arguments[1],N=arguments[T-1],L,Q;if(typeof N!="function"){if(this.rest.options.promises)return f.promisify(this,"publish",arguments);N=G}if(typeof y=="string"||y===null)L=[_.default.fromValues({name:y,data:U})],Q=arguments[2];else if(f.isObject(y))L=[_.default.fromValues(y)],Q=arguments[1];else if(f.isArray(y))L=_.default.fromValuesArray(y),Q=arguments[1];else throw new R.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);(typeof Q!="object"||!Q)&&(Q={});var I=this.rest,K=I.options,V=K.useBinaryProtocol?f.Format.msgpack:f.Format.json,x=I.options.idempotentRestPublishing,P=f.defaultPostHeaders(I.options,V);if(K.headers&&f.mixin(P,K.headers),x&&H(L)){var Z=f.randomString(q);f.arrForEach(L,function(k,at){k.id=Z+":"+at.toString()})}_.default.encodeArray(L,this.channelOptions,function(k){if(k){N(k);return}var at=_.default.getMessagesSize(L),F=K.maxMessageSize;if(at>F){N(new R.default("Maximum size of messages that can be published at once exceeded ( was "+at+" bytes; limit is "+F+" bytes)",40009,400));return}A._publish(_.default.serialize(L,V),P,Q,N)})},M.prototype._publish=function(A,T,y,U){D.default.post(this.rest,this.basePath+"/messages",A,T,y,null,U)},M.prototype.status=function(A){if(typeof A!="function"&&this.rest.options.promises)return f.promisify(this,"status",[]);var T=this.rest.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,y=f.defaultPostHeaders(this.rest.options,T);D.default.get(this.rest,this.basePath,y,{},T,A||G)},M})(p.default);r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(7)),g=c.__importDefault(o(2)),b=c.__importDefault(o(20)),_=c.__importDefault(o(16));function R(){}var E=(function(D){c.__extends(S,D);function S(G){var q=D.call(this)||this;return q.channel=G,q.basePath=G.basePath+"/presence",q}return S.prototype.get=function(G,q){if(g.default.logAction(g.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),q===void 0)if(typeof G=="function")q=G,G=null;else{if(this.channel.rest.options.promises)return f.promisify(this,"get",arguments);q=R}var H=this.channel.rest,B=H.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,z=this.channel.rest.http.supportsLinkHeaders?void 0:B,w=f.defaultGetHeaders(H.options,B);H.options.headers&&f.mixin(w,H.options.headers);var M=this.channel.channelOptions;new b.default(H,this.basePath,w,z,function(A,T,y){return _.default.fromResponseBody(A,M,y?void 0:B)}).get(G,q)},S.prototype.history=function(G,q){return g.default.logAction(g.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(G,q)},S.prototype._history=function(G,q){if(q===void 0)if(typeof G=="function")q=G,G=null;else{if(this.channel.rest.options.promises)return f.promisify(this,"_history",[G]);q=R}var H=this.channel.rest,B=H.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,z=this.channel.rest.http.supportsLinkHeaders?void 0:B,w=f.defaultGetHeaders(H.options,B);H.options.headers&&f.mixin(w,H.options.headers);var M=this.channel.channelOptions;new b.default(H,this.basePath+"/history",w,z,function(A,T,y){return _.default.fromResponseBody(A,M,y?void 0:B)}).get(G,q)},S})(p.default);r.default=E}),(function(s,r,o){(function(c){Object.defineProperty(r,"__esModule",{value:!0}),r.TransportParams=void 0;var f=o(0),p=f.__importDefault(o(10)),g=f.__importStar(o(1)),b=f.__importStar(o(52)),_=f.__importStar(o(8)),R=f.__importDefault(o(3)),E=f.__importDefault(o(7)),D=f.__importDefault(o(36)),S=f.__importDefault(o(2)),G=f.__importDefault(o(37)),q=f.__importStar(o(21)),H=f.__importStar(o(4)),B=f.__importDefault(o(18)),z=f.__importDefault(o(9)),w=f.__importDefault(o(24)),M=f.__importDefault(o(53)),A=f.__importDefault(o(26)),T=f.__importDefault(o(14)),y=function(){var lt;return typeof R.default.WebStorage<"u"&&((lt=R.default.WebStorage)===null||lt===void 0?void 0:lt.localSupported)},U=function(){var lt;return typeof R.default.WebStorage<"u"&&((lt=R.default.WebStorage)===null||lt===void 0?void 0:lt.sessionSupported)},N=p.default.Action,L=function(){},Q="ably-transport-preference",I="ably-connection-recovery";function K(){var lt,it;return U()&&((it=(lt=R.default.WebStorage)===null||lt===void 0?void 0:lt.getSession)===null||it===void 0?void 0:it.call(lt,I))}function V(lt){var it,X;return U()&&((X=(it=R.default.WebStorage)===null||it===void 0?void 0:it.setSession)===null||X===void 0?void 0:X.call(it,I,lt))}function x(){var lt,it;return U()&&((it=(lt=R.default.WebStorage)===null||lt===void 0?void 0:lt.removeSession)===null||it===void 0?void 0:it.call(lt,I))}function P(lt,it){return g.arrIndexOf(R.default.Defaults.transportPreferenceOrder,lt.shortName)>g.arrIndexOf(R.default.Defaults.transportPreferenceOrder,it.shortName)}function Z(lt,it,X){var J;if(lt.channel!==it.channel||(J=lt.action)!==N.PRESENCE&&J!==N.MESSAGE||J!==it.action)return!1;var $=J===N.PRESENCE?"presence":"messages",nt=lt[$].concat(it[$]),gt=z.default.getMessagesSize(nt);return gt>X||!g.allSame(nt,"clientId")||!g.arrEvery(nt,function(Rt){return!Rt.id})?!1:(lt[$]=nt,!0)}function k(lt){try{return JSON.parse(lt)}catch{return null}}var at=(function(){function lt(it,X,J,$){this.options=it,this.host=X,this.mode=J,this.connectionKey=$,this.format=it.useBinaryProtocol?g.Format.msgpack:g.Format.json}return lt.prototype.getConnectParams=function(it){var X=it?g.copy(it):{},J=this.options;switch(this.mode){case"upgrade":X.upgrade=this.connectionKey;break;case"resume":X.resume=this.connectionKey;break;case"recover":{var $=k(J.recover);$&&(X.recover=$.connectionKey);break}}return J.clientId!==void 0&&(X.clientId=J.clientId),J.echoMessages===!1&&(X.echo="false"),this.format!==void 0&&(X.format=this.format),this.stream!==void 0&&(X.stream=this.stream),this.heartbeats!==void 0&&(X.heartbeats=this.heartbeats),X.v=_.default.protocolVersion,X.agent=(0,_.getAgentString)(this.options),J.transportParams!==void 0&&g.mixin(X,J.transportParams),X},lt.prototype.toString=function(){var it="[mode="+this.mode;return this.host&&(it+=",host="+this.host),this.connectionKey&&(it+=",connectionKey="+this.connectionKey),this.format&&(it+=",format="+this.format),it+="]",it},lt})();r.TransportParams=at;var F=(function(lt){f.__extends(it,lt);function it(X,J){var $=lt.call(this)||this;$.disconnectedRetryCount=0,it.initTransports(),$.realtime=X,$.options=J;var nt=J.timeouts,gt=nt.preferenceConnectTimeout+nt.realtimeRequestTimeout;if($.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:gt,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:nt.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:nt.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:nt.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},$.state=$.states.initialized,$.errorReason=null,$.queuedMessages=new D.default,$.msgSerial=0,$.connectionDetails=void 0,$.connectionId=void 0,$.connectionKey=void 0,$.connectionStateTtl=nt.connectionStateTtl,$.maxIdleInterval=null,$.transports=g.intersect(J.transports||_.default.defaultTransports,it.supportedTransports),$.baseTransport=g.intersect(_.default.baseTransportOrder,$.transports)[0],$.upgradeTransports=g.intersect($.transports,_.default.upgradeTransports),$.transportPreference=null,$.httpHosts=_.default.getHosts(J),$.activeProtocol=null,$.proposedTransports=[],$.pendingTransports=[],$.host=null,$.lastAutoReconnectAttempt=null,$.lastActivity=null,$.forceFallbackHost=!1,$.connectCounter=0,S.default.logAction(S.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(J.transports||_.default.defaultTransports)+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+$.transports+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+$.httpHosts+"]"),!$.transports.length){var Rt="no requested transports available";throw S.default.logAction(S.default.LOG_ERROR,"realtime.ConnectionManager()",Rt),new Error(Rt)}var Ht=R.default.Config.addEventListener;return Ht&&(U()&&typeof J.recover=="function"&&Ht("beforeunload",$.persistConnection.bind($)),J.closeOnUnload===!0&&Ht("beforeunload",function(){S.default.logAction(S.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),$.requestState({state:"closing"})}),Ht("online",function(){$.state==$.states.disconnected||$.state==$.states.suspended?(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),$.requestState({state:"connecting"})):$.state==$.states.connecting&&($.pendingTransports.forEach(function(Kt){Kt.off()}),$.disconnectAllTransports(),$.startConnect())}),Ht("offline",function(){$.state==$.states.connected&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),$.disconnectAllTransports())})),$}return it.initTransports=function(){(0,M.default)(it),g.arrForEach(R.default.Transports,function(X){X(it)})},it.prototype.createTransportParams=function(X,J){return new at(this.options,X,J,this.connectionKey)},it.prototype.getTransportParams=function(X){var J=this,$=function(nt){if(J.connectionKey){nt("resume");return}if(typeof J.options.recover=="string"){nt("recover");return}var gt=J.options.recover,Rt=K();if(Rt&&typeof gt=="function"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),gt(Rt,function(Ht){Ht?(J.options.recover=Rt.recoveryKey,nt("recover")):nt("clean")});return}nt("clean")};$(function(nt){var gt=J.createTransportParams(null,nt);if(nt==="recover"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+J.options.recover);var Rt=k(J.options.recover);Rt&&(J.msgSerial=Rt.msgSerial)}else S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+gt.toString());X(gt)})},it.prototype.tryATransport=function(X,J,$){var nt=this;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+J),A.default.tryConnect(it.supportedTransports[J],this,this.realtime.auth,X,function(gt,Rt){var Ht=nt.state;if(Ht==nt.states.closing||Ht==nt.states.closed||Ht==nt.states.failed){Rt&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+Ht.state+" while we were attempting the transport; closing "+Rt),Rt.close()),$(!0);return}if(gt){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+J+" "+gt.event+", err: "+gt.error.toString()),B.default.isTokenErr(gt.error)&&!(nt.errorReason&&B.default.isTokenErr(nt.errorReason))?(nt.errorReason=gt.error,nt.realtime.auth._forceNewToken(null,null,function(Kt){if(Kt){nt.actOnErrorFromAuthorize(Kt);return}nt.tryATransport(X,J,$)})):gt.event==="failed"?(nt.notifyState({state:"failed",error:gt.error}),$(!0)):gt.event==="disconnected"&&((0,q.isRetriable)(gt.error)?$(!1):(nt.notifyState({state:nt.states.connecting.failState,error:gt.error}),$(!0)));return}S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+J+"; setting pending"),nt.setTransportPending(Rt,X),$(null,Rt)})},it.prototype.setTransportPending=function(X,J){var $=this,nt=J.mode;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+X+"; mode = "+nt),g.arrDeleteValue(this.proposedTransports,X),this.pendingTransports.push(X);var gt=R.default.Defaults.transportPreferenceOrder[R.default.Defaults.transportPreferenceOrder.length-1];X.once("connected",function(Ht,Kt,Ft){nt=="upgrade"&&$.activeProtocol?X.shortName!==gt&&g.arrIn($.getUpgradePossibilities(),gt)&&$.activeProtocol?setTimeout(function(){$.scheduleTransportActivation(Ht,X,Kt,Ft)},$.options.timeouts.parallelUpgradeDelay):$.scheduleTransportActivation(Ht,X,Kt,Ft):($.activateTransport(Ht,X,Kt,Ft),R.default.Config.nextTick(function(){$.connectImpl(J)})),nt==="recover"&&$.options.recover&&($.options.recover=null,$.unpersistConnection())});var Rt=this;X.on(["disconnected","closed","failed"],function(Ht){Rt.deactivateTransport(X,this.event,Ht)}),this.emit("transport.pending",X)},it.prototype.scheduleTransportActivation=function(X,J,$,nt){var gt=this,Rt=this.activeProtocol&&this.activeProtocol.getTransport(),Ht=function(){J.disconnect(),g.arrDeleteValue(gt.pendingTransports,J)};if(this.state!==this.states.connected&&this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),Ht();return}if(Rt&&!P(J,Rt)){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+" is no better than current active transport "+Rt.shortName+" - abandoning upgrade"),Ht();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+J);var Kt=null;if(!J.isConnected){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+"is no longer connected; abandoning upgrade"),Ht();return}if(this.state===this.states.connected)S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,Kt=this.activeProtocol;else if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),Ht();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+J);var Ft=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+J),J.send(p.default.fromValues({action:N.ACTIVATE})),gt.activateTransport(X,J,$,nt),gt.state===gt.states.synchronizing?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+J),gt.state=gt.states.connected):S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+gt.state.state+", so leaving unchanged"),gt.state.sendEvents&&gt.sendQueuedMessages()};Kt?Kt.onceIdle(Ft):Ft()},it.prototype.activateTransport=function(X,J,$,nt){var gt=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+J),X&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+X),$&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+$),nt&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(nt)),this.persistTransportPreference(J);var Rt=this.state,Ht=this.states.connected.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+Rt.state),Rt.state==this.states.closing.state||Rt.state==this.states.closed.state||Rt.state==this.states.failed.state)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),J.disconnect(),!1;if(g.arrDeleteValue(this.pendingTransports,J),!J.isConnected)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+J+" since it appears to no longer be connected"),!1;var Kt=this.activeProtocol;this.activeProtocol=new b.default(J),this.host=J.params.host;var Ft=nt.connectionKey;if(Ft&&this.connectionKey!=Ft&&this.setConnection($,nt,!!X),this.onConnectionDetailsUpdate(nt,J),R.default.Config.nextTick(function(){J.on("connected",function(At,Bt,$t){gt.onConnectionDetailsUpdate($t,J),gt.emit("update",new G.default(Ht,Ht,null,At))})}),Rt.state===this.states.connected.state?X&&(this.errorReason=this.realtime.connection.errorReason=X,this.emit("update",new G.default(Ht,Ht,null,X))):(this.notifyState({state:"connected",error:X}),this.errorReason=this.realtime.connection.errorReason=X||null),this.emit("transport.active",J),Kt)if(Kt.messageQueue.count()>0&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+Kt.transport.shortName+", new one is "+J.shortName+") finishing with "+Kt.messageQueue.count()+" messages still pending"),Kt.transport===J){var fe="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",fe)}else Kt.finish();return g.safeArrForEach(this.pendingTransports,function(At){if(At===J){var Bt="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",Bt),g.arrDeleteValue(gt.pendingTransports,J)}else At.disconnect()}),g.safeArrForEach(this.proposedTransports,function(At){At===J?(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+J.shortName+"; stack = "+new Error().stack),g.arrDeleteValue(gt.proposedTransports,J)):At.dispose()}),!0},it.prototype.deactivateTransport=function(X,J,$){var nt=this.activeProtocol,gt=nt&&nt.getTransport()===X,Rt=g.arrDeleteValue(this.pendingTransports,X),Ht=g.arrDeleteValue(this.proposedTransports,X),Kt=this.noTransportsScheduledForActivation();if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+X),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+J+(gt?"; was active":Rt?"; was pending":Ht?"; was proposed":"")+(Kt?"":"; another transport is scheduled for activation")),$&&$.message&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+$.message),gt&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(nt.getPendingMessages()),R.default.Config.nextTick(function(){nt.clearPendingMessages()}),this.activeProtocol=this.host=null),this.emit("transport.inactive",X),gt&&Kt||gt&&J==="failed"||J==="closed"||nt===null&&Rt&&this.pendingTransports.length===0){if(J==="disconnected"&&$&&$.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:J,error:$,retryImmediately:!0});return}var Ft=J==="failed"&&B.default.isTokenErr($)?"disconnected":J;this.notifyState({state:Ft,error:$});return}gt&&J==="disconnected"&&this.state!==this.states.synchronizing&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:$}))},it.prototype.noTransportsScheduledForActivation=function(){return g.isEmpty(this.pendingTransports)||this.pendingTransports.every(function(X){return!X.isConnected})},it.prototype.setConnection=function(X,J,$){var nt=this.connectionId,gt=nt&&nt!==X,Rt=!nt&&$;(gt||Rt)&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==X&&S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=X,this.realtime.connection.key=this.connectionKey=J.connectionKey},it.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},it.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},it.prototype.checkConnectionStateFreshness=function(){if(!(!this.lastActivity||!this.connectionId)){var X=g.now()-this.lastActivity;X>this.connectionStateTtl+this.maxIdleInterval&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+X+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},it.prototype.persistConnection=function(){if(U()){var X=this.createRecoveryKey();X&&V({recoveryKey:X,disconnectedAt:g.now(),location:c.location,clientId:this.realtime.auth.clientId})}},it.prototype.unpersistConnection=function(){x()},it.prototype.getError=function(){return this.errorReason||this.getStateError()},it.prototype.getStateError=function(){var X,J;return(J=(X=q.default)[this.state.state])===null||J===void 0?void 0:J.call(X)},it.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},it.prototype.enactStateChange=function(X){var J=X.current==="failed"?S.default.LOG_ERROR:S.default.LOG_MAJOR;S.default.logAction(J,"Connection state",X.current+(X.reason?"; reason: "+X.reason:"")),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+X.current+"; reason = "+(X.reason&&X.reason.message));var $=this.state=this.states[X.current];X.reason&&(this.errorReason=X.reason,this.realtime.connection.errorReason=X.reason),($.terminal||$.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",X)},it.prototype.startTransitionTimer=function(X){var J=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+X.state),this.transitionTimer&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(function(){J.transitionTimer&&(J.transitionTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager "+X.state+" timer expired","requesting new state: "+X.failState),J.notifyState({state:X.failState}))},X.retryDelay)},it.prototype.cancelTransitionTimer=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},it.prototype.startSuspendTimer=function(){var X=this;this.suspendTimer||(this.suspendTimer=setTimeout(function(){X.suspendTimer&&(X.suspendTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),X.states.connecting.failState="suspended",X.notifyState({state:"suspended"}))},this.connectionStateTtl))},it.prototype.checkSuspendTimer=function(X){X!=="disconnected"&&X!=="suspended"&&X!=="connecting"&&this.cancelSuspendTimer()},it.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},it.prototype.startRetryTimer=function(X){var J=this;this.retryTimer=setTimeout(function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),J.retryTimer=null,J.requestState({state:"connecting"})},X)},it.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},it.prototype.notifyState=function(X){var J=this,$,nt,gt=X.state,Rt=gt==="disconnected"&&(this.state===this.states.connected||this.state===this.states.synchronizing||X.retryImmediately||this.state===this.states.connecting&&X.error&&B.default.isTokenErr(X.error)&&!(this.errorReason&&B.default.isTokenErr(this.errorReason)));if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+gt+(Rt?"; will retry connection immediately":"")),gt!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(X.state),(gt==="suspended"||gt==="connected")&&(this.disconnectedRetryCount=0),!this.state.terminal)){var Ht=this.states[X.state],Kt=Ht.retryDelay;Ht.state==="disconnected"&&(this.disconnectedRetryCount++,Kt=g.getRetryTime(Ht.retryDelay,this.disconnectedRetryCount));var Ft=new G.default(this.state.state,Ht.state,Kt,X.error||((nt=($=q.default)[Ht.state])===null||nt===void 0?void 0:nt.call($)));if(Rt){var fe=function(){J.state===J.states.disconnected&&(J.lastAutoReconnectAttempt=g.now(),J.requestState({state:"connecting"}))},At=this.lastAutoReconnectAttempt&&g.now()-this.lastAutoReconnectAttempt+1;At&&At<1e3?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+At+"ms ago, waiting another "+(1e3-At)+"ms before trying again"),setTimeout(fe,1e3-At)):R.default.Config.nextTick(fe)}else(gt==="disconnected"||gt==="suspended")&&this.startRetryTimer(Kt);(gt==="disconnected"&&!Rt||gt==="suspended"||Ht.terminal)&&R.default.Config.nextTick(function(){J.disconnectAllTransports()}),gt=="connected"&&!this.activeProtocol&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(Ft),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(gt,Ft.reason),this.failQueuedMessages(Ft.reason))}},it.prototype.requestState=function(X){var J=this,$,nt,gt=X.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+gt+"; current state: "+this.state.state),gt!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(gt),!(gt=="connecting"&&this.state.state=="connected")&&!(gt=="closing"&&this.state.state=="closed"))){var Rt=this.states[gt],Ht=new G.default(this.state.state,Rt.state,null,X.error||((nt=($=q.default)[Rt.state])===null||nt===void 0?void 0:nt.call($)));this.enactStateChange(Ht),gt=="connecting"&&R.default.Config.nextTick(function(){J.startConnect()}),gt=="closing"&&this.closeImpl()}},it.prototype.startConnect=function(){var X=this;if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}var J=this.realtime.auth,$=++this.connectCounter,nt=function(){X.checkConnectionStateFreshness(),X.getTransportParams(function(Rt){if(Rt.mode==="recover"&&Rt.options.recover){var Ht=k(Rt.options.recover);Ht&&X.realtime.channels.recoverChannels(Ht.channelSerials)}$===X.connectCounter&&X.connectImpl(Rt,$)})};if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),J.method==="basic")nt();else{var gt=function(Rt){$===X.connectCounter&&(Rt?X.actOnErrorFromAuthorize(Rt):nt())};this.errorReason&&B.default.isTokenErr(this.errorReason)?J._forceNewToken(null,null,gt):J._ensureValidAuthCredentials(!1,gt)}},it.prototype.connectImpl=function(X,J){var $=this.state.state;$!==this.states.connecting.state&&$!==this.states.connected.state?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+$):this.pendingTransports.length?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):$==this.states.connected.state?this.upgradeIfNeeded(X):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(X,J):this.connectBase(X,J)},it.prototype.connectPreference=function(X,J){var $=this,nt=this.getTransportPreference(),gt=!1;g.arrIn(this.transports,nt)||(this.unpersistTransportPreference(),this.connectImpl(X,J)),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+nt);var Rt=setTimeout(function(){gt=!0,$.state.state!==$.states.connected.state&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+nt+" failed; clearing preference and trying from scratch"),$.disconnectAllTransports(),$.unpersistTransportPreference()),$.connectImpl(X,J)},this.options.timeouts.preferenceConnectTimeout);X.host=this.httpHosts[0],this.tryATransport(X,nt,function(Ht,Kt){clearTimeout(Rt),gt&&Kt?(Kt.off(),Kt.disconnect(),g.arrDeleteValue($.pendingTransports,Kt)):!Kt&&!Ht&&($.unpersistTransportPreference(),$.connectImpl(X,J))})},it.prototype.connectBase=function(X,J){var $=this,nt=function(Ft){$.notifyState({state:$.states.connecting.failState,error:Ft})},gt=this.httpHosts.slice(),Rt=function(Ft,fe){J===$.connectCounter&&!fe&&!Ft&&Kt()};S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var Ht=gt.shift();if(!Ht){nt(new H.default("Unable to connect (no available host)",80003,404));return}X.host=Ht;var Kt=function(){if(!gt.length){nt(new H.default("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!$.realtime.http.checkConnectivity){nt(new H.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500));return}$.realtime.http.checkConnectivity(function(Ft,fe){if(J===$.connectCounter){if(Ft){nt(Ft);return}if(!fe){nt(new H.default("Unable to connect (network unreachable)",80003,404));return}X.host=g.arrPopRandomElement(gt),$.tryATransport(X,$.baseTransport,Rt)}})};if(this.forceFallbackHost&&gt.length){this.forceFallbackHost=!1,Kt();return}this.tryATransport(X,this.baseTransport,Rt)},it.prototype.getUpgradePossibilities=function(){var X=this.activeProtocol.getTransport().shortName,J=g.arrIndexOf(this.upgradeTransports,X);return this.upgradeTransports.slice(J+1)},it.prototype.upgradeIfNeeded=function(X){var J=this,$=this.getUpgradePossibilities();S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+R.default.Config.inspect($)),$.length&&g.arrForEach($,function(nt){var gt=J.createTransportParams(X.host,"upgrade");J.tryATransport(gt,nt,L)})},it.prototype.closeImpl=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),g.safeArrForEach(this.pendingTransports,function(X){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+X),X&&X.close()}),g.safeArrForEach(this.proposedTransports,function(X){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+X),X&&X.dispose()}),this.activeProtocol&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},it.prototype.onAuthUpdated=function(X,J){var $=this,nt;switch(this.state.state){case"connected":{if(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var gt=this.activeProtocol.getTransport().params;R.default.Config.nextTick(function(){$.state.state==="connected"&&$.upgradeIfNeeded(gt)})}var Rt=(nt=this.activeProtocol)===null||nt===void 0?void 0:nt.getTransport();Rt&&Rt.onAuthUpdated&&Rt.onAuthUpdated(X);var Ht=p.default.fromValues({action:N.AUTH,auth:{accessToken:X.token}});this.send(Ht);var Kt=function(){$.off(Ft),J(null,X)},Ft=function(At){At.current==="failed"&&($.off(Kt),$.off(Ft),J(At.reason||$.getStateError()))};this.once("connectiondetails",Kt),this.on("connectionstate",Ft);break}case"connecting":S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var fe=function(At){switch(At.current){case"connected":$.off(fe),J(null,X);break;case"failed":case"closed":case"suspended":$.off(fe),J(At.reason||$.getStateError());break}};this.on("connectionstate",fe),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}},it.prototype.disconnectAllTransports=function(X){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(X?" except the active transport":"")),this.connectCounter++,g.safeArrForEach(this.pendingTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+J),J&&J.disconnect()}),this.pendingTransports=[],g.safeArrForEach(this.proposedTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+J),J&&J.dispose()}),this.proposedTransports=[],this.activeProtocol&&!X&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},it.prototype.send=function(X,J,$){$=$||L;var nt=this.state;if(nt.sendEvents){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new b.PendingMessage(X,$));return}var gt=J&&nt.queueEvents||nt.forceQueueEvents;if(!gt){var Rt="rejecting event, queueEvent was "+J+", state was "+nt.state;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()",Rt),$(this.errorReason||new H.default(Rt,9e4,400));return}S.default.shouldLog(S.default.LOG_MICRO)&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+p.default.stringify(X)),this.queue(X,$)},it.prototype.sendImpl=function(X){var J=X.message;X.ackRequired&&!X.sendAttempted&&(J.msgSerial=this.msgSerial++);try{this.activeProtocol.send(X)}catch($){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+$.stack)}},it.prototype.queue=function(X,J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var $=this.queuedMessages.last(),nt=this.options.maxMessageSize;$&&!$.sendAttempted&&Z($.message,X,nt)?($.merged||($.callback=w.default.create([$.callback]),$.merged=!0),$.callback.push(J)):this.queuedMessages.push(new b.PendingMessage(X,J))},it.prototype.sendQueuedMessages=function(){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");for(var X;X=this.queuedMessages.shift();)this.sendImpl(X)},it.prototype.queuePendingMessages=function(X){X&&X.length&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+X.length+" pending messages"),this.queuedMessages.prepend(X))},it.prototype.failQueuedMessages=function(X){var J=this.queuedMessages.count();J>0&&(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+J+" queued messages, err = "+g.inspectError(X)),this.queuedMessages.completeAllMessages(X))},it.prototype.onChannelMessage=function(X,J){var $=this.activeProtocol&&J===this.activeProtocol.getTransport(),nt=g.arrIn(this.pendingTransports,J)&&this.state==this.states.synchronizing;$||nt?this.realtime.channels.onChannelMessage(X):g.arrIndexOf([N.ACK,N.NACK,N.ERROR],X.action)>-1?this.realtime.channels.onChannelMessage(X):S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(X)+"on defunct transport; discarding")},it.prototype.ping=function(X,J){var $=this;if(X){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+X);var nt=function(){X.off("heartbeat",Ht),J(new H.default("Timeout waiting for heartbeat response",5e4,500))},gt=g.now(),Rt=g.cheapRandStr(),Ht=function(Bt){if(Bt===Rt){X.off("heartbeat",Ht),clearTimeout(Kt);var $t=g.now()-gt;J(null,$t)}},Kt=setTimeout(nt,this.options.timeouts.realtimeRequestTimeout);X.on("heartbeat",Ht),X.ping(Rt);return}if(this.state.state!=="connected"){J(new H.default("Unable to ping service; not connected",4e4,400));return}var Ft=!1,fe=function(Bt,$t){$.off("transport.active",At),Ft||(Ft=!0,J(Bt,$t))},At=function(){Ft||(Ft=!0,R.default.Config.nextTick(function(){$.ping(null,J)}))};this.on("transport.active",At),this.ping(this.activeProtocol.getTransport(),fe)},it.prototype.abort=function(X){this.activeProtocol.getTransport().fail(X)},it.prototype.registerProposedTransport=function(X){this.proposedTransports.push(X)},it.prototype.getTransportPreference=function(){var X,J;return this.transportPreference||y()&&((J=(X=R.default.WebStorage)===null||X===void 0?void 0:X.get)===null||J===void 0?void 0:J.call(X,Q))},it.prototype.persistTransportPreference=function(X){var J,$;g.arrIn(_.default.upgradeTransports,X.shortName)&&(this.transportPreference=X.shortName,y()&&(($=(J=R.default.WebStorage)===null||J===void 0?void 0:J.set)===null||$===void 0||$.call(J,Q,X.shortName)))},it.prototype.unpersistTransportPreference=function(){var X,J;this.transportPreference=null,y()&&((J=(X=R.default.WebStorage)===null||X===void 0?void 0:X.remove)===null||J===void 0||J.call(X,Q))},it.prototype.actOnErrorFromAuthorize=function(X){if(X.code===40171)this.notifyState({state:"failed",error:X});else if(X.code===40102)this.notifyState({state:"failed",error:X});else if(X.statusCode===T.default.Forbidden){var J="Client configured authentication provider returned 403; failing the connection";S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",J),this.notifyState({state:"failed",error:new H.default(J,80019,403,X)})}else{var J="Client configured authentication provider request failed";S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",J),this.notifyState({state:this.state.failState,error:new H.default(J,80019,401,X)})}},it.prototype.onConnectionDetailsUpdate=function(X,J){if(X){this.connectionDetails=X,X.maxMessageSize&&(this.options.maxMessageSize=X.maxMessageSize);var $=X.clientId;if($){var nt=this.realtime.auth._uncheckedSetClientId($);if(nt){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",nt.message),J.fail(nt);return}}var gt=X.connectionStateTtl;gt&&(this.connectionStateTtl=gt),this.maxIdleInterval=X.maxIdleInterval,this.emit("connectiondetails",X)}},it.supportedTransports={},it})(E.default);r.default=F}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(7)),p=c.__importDefault(o(2)),g=(function(b){c.__extends(_,b);function _(){var R=b.call(this)||this;return R.messages=[],R}return _.prototype.count=function(){return this.messages.length},_.prototype.push=function(R){this.messages.push(R)},_.prototype.shift=function(){return this.messages.shift()},_.prototype.last=function(){return this.messages[this.messages.length-1]},_.prototype.copyAll=function(){return this.messages.slice()},_.prototype.append=function(R){this.messages.push.apply(this.messages,R)},_.prototype.prepend=function(R){this.messages.unshift.apply(this.messages,R)},_.prototype.completeMessages=function(R,E,D){p.default.logAction(p.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+R+"; count = "+E),D=D||null;var S=this.messages;if(S.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var G=S[0];if(G){var q=G.message.msgSerial,H=R+E;if(H>q)for(var B=S.splice(0,H-q),z=0,w=B;z<w.length;z++){var M=w[z];M.callback(D)}S.length==0&&this.emit("idle")}},_.prototype.completeAllMessages=function(R){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,R)},_.prototype.resetSendAttempted=function(){for(var R=0,E=this.messages;R<E.length;R++){var D=E[R];D.sendAttempted=!1}},_.prototype.clear=function(){p.default.logAction(p.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},_})(f.default);r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=(function(){function f(p,g,b,_){this.previous=p,this.current=g,b&&(this.retryIn=b),_&&(this.reason=_)}return f})();r.default=c}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(10)),p=c.__importDefault(o(7)),g=c.__importStar(o(1)),b=c.__importDefault(o(33)),_=c.__importDefault(o(2)),R=c.__importDefault(o(54)),E=c.__importDefault(o(9)),D=c.__importDefault(o(39)),S=c.__importStar(o(4)),G=c.__importDefault(o(16)),q=c.__importDefault(o(21)),H=f.default.Action,B=function(){};function z(A){if(A&&"params"in A&&!g.isObject(A.params))return new S.default("options.params must be an object",4e4,400);if(A&&"modes"in A){if(!g.isArray(A.modes))return new S.default("options.modes must be an array",4e4,400);for(var T=0;T<A.modes.length;T++){var y=A.modes[T];if(!y||typeof y!="string"||!g.arrIn(f.default.channelModes,String.prototype.toUpperCase.call(y)))return new S.default("Invalid channel mode: "+y,4e4,400)}}}var w=(function(A){c.__extends(T,A);function T(y,U,N){var L=A.call(this,y,U,N)||this;return L.retryCount=0,L.history=function(Q,I){if(_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),I===void 0)if(typeof Q=="function")I=Q,Q=null;else{if(this.rest.options.promises)return g.promisify(this,"history",arguments);I=B}if(Q&&Q.untilAttach){if(this.state!=="attached"){I(new S.default("option untilAttach requires the channel to be attached",4e4,400));return}if(!this.properties.attachSerial){I(new S.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));return}delete Q.untilAttach,Q.from_serial=this.properties.attachSerial}b.default.prototype._history.call(this,Q,I)},L.whenState=(function(Q,I){return p.default.prototype.whenState.call(L,Q,L.state,I)}),_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel()","started; name = "+U),L.realtime=y,L.presence=new R.default(L),L.connectionManager=y.connection.connectionManager,L.state="initialized",L.subscriptions=new p.default,L.syncChannelSerial=void 0,L.properties={attachSerial:void 0,channelSerial:void 0},L.setOptions(N),L.errorReason=null,L._requestedFlags=null,L._mode=null,L._attachResume=!1,L._decodingContext={channelOptions:L.channelOptions,plugins:y.options.plugins||{},baseEncodedPreviousPayload:void 0},L._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},L._allChannelChanges=new p.default,L}return T.prototype.invalidStateError=function(){return new S.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},T.processListenerArgs=function(y){return y=Array.prototype.slice.call(y),typeof y[0]=="function"&&y.unshift(null),y[y.length-1]==null&&y.pop(),y},T.prototype.setOptions=function(y,U){var N=this.channelOptions;if(!U&&this.rest.options.promises)return g.promisify(this,"setOptions",arguments);var L=U||function(I){I&&_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+I.toString())},Q=z(y);if(Q){L(Q);return}b.default.prototype.setOptions.call(this,y),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(y,N)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],function(I){switch(this.event){case"update":case"attached":L==null||L(null);return;default:L==null||L(I.reason);return}})):L()},T.prototype._shouldReattachToSetOptions=function(y,U){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(y!=null&&y.params){var N=M(y.params),L=M(U.params);if(Object.keys(N).length!==Object.keys(L).length||!g.shallowEquals(L,N))return!0}return!!(y!=null&&y.modes&&(!U.modes||!g.arrEquals(y.modes,U.modes)))},T.prototype.publish=function(){for(var y=this,U=[],N=0;N<arguments.length;N++)U[N]=arguments[N];var L=U[0],Q=U.length,I=U[Q-1];if(typeof I!="function"){if(this.realtime.options.promises)return g.promisify(this,"publish",arguments);I=B,++Q}if(!this.connectionManager.activeState()){I(this.connectionManager.getError());return}if(Q==2)if(g.isObject(L))L=[E.default.fromValues(L)];else if(g.isArray(L))L=E.default.fromValuesArray(L);else throw new S.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else L=[E.default.fromValues({name:U[0],data:U[1]})];var K=this.realtime.options.maxMessageSize;E.default.encodeArray(L,this.channelOptions,function(V){if(V){I(V);return}var x=E.default.getMessagesSize(L);if(x>K){I(new S.default("Maximum size of messages that can be published at once exceeded ( was "+x+" bytes; limit is "+K+" bytes)",40009,400));return}y.__publish(L,I)})},T.prototype.__publish=function(y,U){_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+y.length);var N=this.state;switch(N){case"failed":case"suspended":U(S.default.fromValues(this.invalidStateError()));break;default:{_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+N);var L=new f.default;L.action=H.MESSAGE,L.channel=this.name,L.messages=y,this.sendMessage(L,U);break}}},T.prototype.onEvent=function(y){_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var U=this.subscriptions,N=0;N<y.length;N++){var L=y[N];U.emit(L.name,L)}},T.prototype.attach=function(y,U){var N;if(typeof y=="function"?(U=y,N=null):N=y,!U){if(this.realtime.options.promises)return g.promisify(this,"attach",arguments);U=function(L){L&&_.default.logAction(_.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+L.toString())}}if(N)_.default.deprecated("The ability to pass an array of channel mode flags as the first argument of `RealtimeChannel.attach()`","To set channel mode flags, populate the `modes` property of the channel options object that you pass to `Channels.get()` or `RealtimeChannel.setOptions()`."),this._requestedFlags=N;else if(this.state==="attached"){U(null,null);return}this._attach(!1,null,U)},T.prototype._attach=function(y,U,N){N||(N=function(Q){Q&&_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+Q.toString())});var L=this.connectionManager;if(!L.activeState()){N(L.getError());return}(this.state!=="attaching"||y)&&this.requestState("attaching",U),this.once(function(Q){switch(this.event){case"attached":N==null||N(null,Q);break;case"detached":case"suspended":case"failed":N==null||N(Q.reason||L.getError()||new S.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":N==null||N(new S.default("Attach request superseded by a subsequent detach request",9e4,409));break}})},T.prototype.attachImpl=function(){_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var y=f.default.fromValues({action:H.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?y.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&y.encodeModesToFlags(g.allToUpperCase(this.channelOptions.modes)),this._attachResume&&y.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(y.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(y,B)},T.prototype.detach=function(y){if(!y){if(this.realtime.options.promises)return g.promisify(this,"detach",arguments);y=B}var U=this.connectionManager;if(!U.activeState()){y(U.getError());return}switch(this.state){case"suspended":this.notifyState("detached"),y();break;case"detached":y();break;case"failed":y(new S.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once(function(N){switch(this.event){case"detached":y();break;case"attached":case"suspended":case"failed":y(N.reason||U.getError()||new S.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":y(new S.default("Detach request superseded by a subsequent attach request",9e4,409));break}})}},T.prototype.detachImpl=function(y){_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var U=f.default.fromValues({action:H.DETACH,channel:this.name});this.sendMessage(U,y||B)},T.prototype.subscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=T.processListenerArgs(y),L=N[0],Q=N[1],I=N[2];if(!I&&this.realtime.options.promises)return g.promisify(this,"subscribe",[L,Q]);if(this.state==="failed"){I==null||I(S.default.fromValues(this.invalidStateError()));return}return L&&typeof L=="object"&&!Array.isArray(L)?this._subscribeFilter(L,Q):this.subscriptions.on(L,Q),this.attach(I||B)},T.prototype._subscribeFilter=function(y,U){var N=function(L){var Q,I,K,V,x,P,Z={name:L.name,refTimeserial:(I=(Q=L.extras)===null||Q===void 0?void 0:Q.ref)===null||I===void 0?void 0:I.timeserial,refType:(V=(K=L.extras)===null||K===void 0?void 0:K.ref)===null||V===void 0?void 0:V.type,isRef:!!(!((P=(x=L.extras)===null||x===void 0?void 0:x.ref)===null||P===void 0)&&P.timeserial),clientId:L.clientId};Object.entries(y).find(function(k){var at=k[0],F=k[1];return F!==void 0?Z[at]!==F:!1})||U(L)};this._addFilteredSubscription(y,U,N),this.subscriptions.on(N)},T.prototype._addFilteredSubscription=function(y,U,N){var L;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(U)){var Q=this.filteredSubscriptions.get(U);Q.set(y,((L=Q==null?void 0:Q.get(y))===null||L===void 0?void 0:L.concat(N))||[N])}else this.filteredSubscriptions.set(U,new Map([[y,[N]]]))},T.prototype._getAndDeleteFilteredSubscriptions=function(y,U){var N=this;if(!this.filteredSubscriptions)return[];if(!U&&y)return Array.from(this.filteredSubscriptions.entries()).map(function(K){var V,x=K[0],P=K[1],Z=P.get(y);return P.delete(y),P.size===0&&((V=N.filteredSubscriptions)===null||V===void 0||V.delete(x)),Z}).reduce(function(K,V){var x;return V?(x=K).concat.apply(x,V):K},[]);if(!U||!this.filteredSubscriptions.has(U))return[];var L=this.filteredSubscriptions.get(U);if(!y){var Q=Array.from(L.values()).reduce(function(K,V){return K.concat.apply(K,V)},[]);return this.filteredSubscriptions.delete(U),Q}var I=L.get(y);return L.delete(y),I||[]},T.prototype.unsubscribe=function(){for(var y=this,U,N=[],L=0;L<arguments.length;L++)N[L]=arguments[L];var Q=T.processListenerArgs(N),I=Q[0],K=Q[1];if(typeof I=="object"&&!K||!((U=this.filteredSubscriptions)===null||U===void 0)&&U.has(K)){this._getAndDeleteFilteredSubscriptions(I,K).forEach(function(V){return y.subscriptions.off(V)});return}this.subscriptions.off(I,K)},T.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new S.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var y=this.connectionManager;if(!y.activeState())throw y.getError();var U=f.default.fromValues({action:H.SYNC,channel:this.name});this.syncChannelSerial&&(U.channelSerial=this.syncChannelSerial),y.send(U)},T.prototype.sendMessage=function(y,U){this.connectionManager.send(y,this.realtime.options.queueMessages,U)},T.prototype.sendPresence=function(y,U){var N=f.default.fromValues({action:H.PRESENCE,channel:this.name,presence:g.isArray(y)?G.default.fromValuesArray(y):[G.default.fromValues(y)]});this.sendMessage(N,U)},T.prototype.onMessage=function(y){(y.action===H.ATTACHED||y.action===H.MESSAGE||y.action===H.PRESENCE)&&this.setChannelSerial(y.channelSerial);var U,N=!1;switch(y.action){case H.ATTACHED:{this.properties.attachSerial=y.channelSerial,this._mode=y.getMode(),this.params=y.params||{};var L=y.decodeModesFromFlags();this.modes=L&&g.allToLowerCase(L)||void 0;var Q=y.hasFlag("RESUMED"),I=y.hasFlag("HAS_PRESENCE"),K=y.hasFlag("HAS_BACKLOG");if(this.state==="attached"){Q||this.presence.onAttached(I);var V=new D.default(this.state,this.state,Q,K,y.error);this._allChannelChanges.emit("update",V),(!Q||this.channelOptions.updateOnAttached)&&this.emit("update",V)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",y.error,Q,I,K);break}case H.DETACHED:{var x=y.error?S.default.fromValues(y.error):new S.default("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",x):this.state==="attaching"?this.notifyState("suspended",x):this.requestState("attaching",x);break}case H.SYNC:if(N=!0,U=this.syncChannelSerial=y.channelSerial,!y.presence)break;case H.PRESENCE:{for(var P=y.presence,Z=y.id,k=y.connectionId,at=y.timestamp,F=this.channelOptions,lt=void 0,it=0;it<P.length;it++)try{lt=P[it],G.default.decode(lt,F),lt.connectionId||(lt.connectionId=k),lt.timestamp||(lt.timestamp=at),lt.id||(lt.id=Z+":"+it)}catch(Rt){_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel.onMessage()",Rt.toString())}this.presence.setPresence(P,N,U);break}case H.MESSAGE:{if(this.state!=="attached"){_.default.logAction(_.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+y.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}var X=y.messages,J=X[0],$=X[X.length-1],Z=y.id,k=y.connectionId,at=y.timestamp;if(J.extras&&J.extras.delta&&J.extras.delta.from!==this._lastPayload.messageId){var nt='Delta message decode failure - previous message not available for message "'+y.id+'" on this channel "'+this.name+'".';_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel.onMessage()",nt),this._startDecodeFailureRecovery(new S.default(nt,40018,400));break}for(var it=0;it<X.length;it++){var nt=X[it];try{E.default.decode(nt,this._decodingContext)}catch(At){switch(_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel.onMessage()",At.toString()),At.code){case 40018:this._startDecodeFailureRecovery(At);return;case 40019:case 40021:this.notifyState("failed",At);return}}nt.connectionId||(nt.connectionId=k),nt.timestamp||(nt.timestamp=at),nt.id||(nt.id=Z+":"+it)}this._lastPayload.messageId=$.id,this._lastPayload.protocolMessageChannelSerial=y.channelSerial,this.onEvent(X);break}case H.ERROR:{var gt=y.error;gt&&gt.code==80016?this.checkPendingState():this.notifyState("failed",S.default.fromValues(gt));break}default:_.default.logAction(_.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+y.action+")"),this.connectionManager.abort(q.default.unknownChannelErr())}},T.prototype._startDecodeFailureRecovery=function(y){var U=this;this._lastPayload.decodeFailureRecoveryInProgress||(_.default.logAction(_.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,y,function(){U._lastPayload.decodeFailureRecoveryInProgress=!1}))},T.prototype.onAttached=function(){_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},T.prototype.notifyState=function(y,U,N,L,Q){if(_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+y),this.clearStateTimer(),g.arrIn(["detached","suspended","failed"],y)&&(this.properties.channelSerial=null),y!==this.state){this.presence.actOnChannelState(y,L,U),y==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),U&&(this.errorReason=U);var I=new D.default(this.state,y,N,Q,U),K=y==="failed"?_.default.LOG_ERROR:_.default.LOG_MAJOR;_.default.logAction(K,'Channel state for channel "'+this.name+'"',y+(U?"; reason: "+U:"")),y!=="attaching"&&y!=="suspended"&&(this.retryCount=0),y==="attached"&&this.onAttached(),y==="attached"?this._attachResume=!0:(y==="detaching"||y==="failed")&&(this._attachResume=!1),this.state=y,this._allChannelChanges.emit(y,I),this.emit(y,I)}},T.prototype.requestState=function(y,U){_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+y),this.notifyState(y,U),this.checkPendingState()},T.prototype.checkPendingState=function(){var y=this.connectionManager.state;if(!(y.sendEvents||y.forceQueueEvents)){_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}},T.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":{var y=new S.default("Channel attach timed out",90007,408);this.notifyState("suspended",y);break}case"detaching":{var y=new S.default("Channel detach timed out",90007,408);this.notifyState("attached",y);break}default:this.checkPendingState();break}},T.prototype.startStateTimerIfNotRunning=function(){var y=this;this.stateTimer||(this.stateTimer=setTimeout(function(){_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),y.stateTimer=null,y.timeoutPendingState()},this.realtime.options.timeouts.realtimeRequestTimeout))},T.prototype.clearStateTimer=function(){var y=this.stateTimer;y&&(clearTimeout(y),this.stateTimer=null)},T.prototype.startRetryTimer=function(){var y=this;if(!this.retryTimer){this.retryCount++;var U=g.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(function(){y.state==="suspended"&&y.connectionManager.state.sendEvents&&(y.retryTimer=null,_.default.logAction(_.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),y.requestState("attaching"))},U)}},T.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},T.prototype.getReleaseErr=function(){var y=this.state;return y==="initialized"||y==="detached"||y==="failed"?null:new S.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+y,90001,400)},T.prototype.setChannelSerial=function(y){_.default.logAction(_.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+y+"; previous = "+this.properties.channelSerial),y&&(this.properties.channelSerial=y)},T})(b.default);function M(A){var T=A||{};T.agent;var y=c.__rest(T,["agent"]);return y}r.default=w}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=(function(){function f(p,g,b,_,R){this.previous=p,this.current=g,g==="attached"&&(this.resumed=b,this.hasBacklog=_),R&&(this.reason=R)}return f})();r.default=c}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(){var f=c,p=f.lib,g=p.WordArray,b=p.Hasher,_=f.algo,R=[],E=_.SHA1=b.extend({_doReset:function(){this._hash=new g.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,S){for(var G=this._hash.words,q=G[0],H=G[1],B=G[2],z=G[3],w=G[4],M=0;M<80;M++){if(M<16)R[M]=D[S+M]|0;else{var A=R[M-3]^R[M-8]^R[M-14]^R[M-16];R[M]=A<<1|A>>>31}var T=(q<<5|q>>>27)+w+R[M];M<20?T+=(H&B|~H&z)+1518500249:M<40?T+=(H^B^z)+1859775393:M<60?T+=(H&B|H&z|B&z)-1894007588:T+=(H^B^z)-899497514,w=z,z=B,B=H<<30|H>>>2,H=q,q=T}G[0]=G[0]+q|0,G[1]=G[1]+H|0,G[2]=G[2]+B|0,G[3]=G[3]+z|0,G[4]=G[4]+w|0},_doFinalize:function(){var D=this._data,S=D.words,G=this._nDataBytes*8,q=D.sigBytes*8;return S[q>>>5]|=128<<24-q%32,S[(q+64>>>9<<4)+14]=Math.floor(G/4294967296),S[(q+64>>>9<<4)+15]=G,D.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var D=b.clone.call(this);return D._hash=this._hash.clone(),D}});f.SHA1=b._createHelper(E),f.HmacSHA1=b._createHmacHelper(E)})(),c.SHA1})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});function c(M){if(M===void 0)return"undefined";var A,T;if(M instanceof ArrayBuffer?(T="ArrayBuffer",A=new DataView(M)):M instanceof DataView&&(T="DataView",A=M),!A)return JSON.stringify(M);for(var y=[],U=0;U<M.byteLength;U++){if(U>20){y.push("...");break}var N=A.getUint8(U).toString(16);N.length===1&&(N="0"+N),y.push(N)}return"<"+T+" "+y.join(" ")+">"}function f(M,A,T){for(var y=0,U=T.length;y<U;y++){var N=T.charCodeAt(y);if(N<128){M.setUint8(A++,N>>>0&127|0);continue}if(N<2048){M.setUint8(A++,N>>>6&31|192),M.setUint8(A++,N>>>0&63|128);continue}if(N<65536){M.setUint8(A++,N>>>12&15|224),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}if(N<1114112){M.setUint8(A++,N>>>18&7|240),M.setUint8(A++,N>>>12&63|128),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}throw new Error("bad codepoint "+N)}}function p(M,A,T){for(var y="",U=A,N=A+T;U<N;U++){var L=M.getUint8(U);if((L&128)===0){y+=String.fromCharCode(L);continue}if((L&224)===192){y+=String.fromCharCode((L&15)<<6|M.getUint8(++U)&63);continue}if((L&240)===224){y+=String.fromCharCode((L&15)<<12|(M.getUint8(++U)&63)<<6|(M.getUint8(++U)&63)<<0);continue}if((L&248)===240){y+=String.fromCharCode((L&7)<<18|(M.getUint8(++U)&63)<<12|(M.getUint8(++U)&63)<<6|(M.getUint8(++U)&63)<<0);continue}throw new Error("Invalid byte "+L.toString(16))}return y}function g(M){for(var A=0,T=0,y=M.length;T<y;T++){var U=M.charCodeAt(T);if(U<128){A+=1;continue}if(U<2048){A+=2;continue}if(U<65536){A+=3;continue}if(U<1114112){A+=4;continue}throw new Error("bad codepoint "+U)}return A}function b(M,A){var T=w(M,A);if(T!==0){var y=new ArrayBuffer(T),U=new DataView(y);return z(M,U,0,A),y}}var _=65536*65536,R=1/_;function E(M,A){return A=A||0,M.getInt32(A)*_+M.getUint32(A+4)}function D(M,A){return A=A||0,M.getUint32(A)*_+M.getUint32(A+4)}function S(M,A,T){T<9223372036854776e3?(M.setInt32(A,Math.floor(T*R)),M.setInt32(A+4,T&-1)):(M.setUint32(A,2147483647),M.setUint32(A+4,2147483647))}function G(M,A,T){T<18446744073709552e3?(M.setUint32(A,Math.floor(T*R)),M.setInt32(A+4,T&-1)):(M.setUint32(A,4294967295),M.setUint32(A+4,4294967295))}var q=(function(){function M(A,T){var y=this;this.map=function(U){for(var N={},L=0;L<U;L++){var Q=y.parse();N[Q]=y.parse()}return N},this.bin=function(U){var N=new ArrayBuffer(U);return new Uint8Array(N).set(new Uint8Array(y.view.buffer,y.offset,U),0),y.offset+=U,N},this.buf=this.bin,this.str=function(U){var N=p(y.view,y.offset,U);return y.offset+=U,N},this.array=function(U){for(var N=new Array(U),L=0;L<U;L++)N[L]=y.parse();return N},this.ext=function(U){return y.offset+=U,{type:y.view.getInt8(y.offset),data:y.buf(U)}},this.parse=function(){var U=y.view.getUint8(y.offset),N,L;if((U&128)===0)return y.offset++,U;if((U&240)===128)return L=U&15,y.offset++,y.map(L);if((U&240)===144)return L=U&15,y.offset++,y.array(L);if((U&224)===160)return L=U&31,y.offset++,y.str(L);if((U&224)===224)return N=y.view.getInt8(y.offset),y.offset++,N;switch(U){case 192:return y.offset++,null;case 193:y.offset++;return;case 194:return y.offset++,!1;case 195:return y.offset++,!0;case 196:return L=y.view.getUint8(y.offset+1),y.offset+=2,y.bin(L);case 197:return L=y.view.getUint16(y.offset+1),y.offset+=3,y.bin(L);case 198:return L=y.view.getUint32(y.offset+1),y.offset+=5,y.bin(L);case 199:return L=y.view.getUint8(y.offset+1),y.offset+=2,y.ext(L);case 200:return L=y.view.getUint16(y.offset+1),y.offset+=3,y.ext(L);case 201:return L=y.view.getUint32(y.offset+1),y.offset+=5,y.ext(L);case 202:return N=y.view.getFloat32(y.offset+1),y.offset+=5,N;case 203:return N=y.view.getFloat64(y.offset+1),y.offset+=9,N;case 204:return N=y.view.getUint8(y.offset+1),y.offset+=2,N;case 205:return N=y.view.getUint16(y.offset+1),y.offset+=3,N;case 206:return N=y.view.getUint32(y.offset+1),y.offset+=5,N;case 207:return N=D(y.view,y.offset+1),y.offset+=9,N;case 208:return N=y.view.getInt8(y.offset+1),y.offset+=2,N;case 209:return N=y.view.getInt16(y.offset+1),y.offset+=3,N;case 210:return N=y.view.getInt32(y.offset+1),y.offset+=5,N;case 211:return N=E(y.view,y.offset+1),y.offset+=9,N;case 212:return L=1,y.offset++,y.ext(L);case 213:return L=2,y.offset++,y.ext(L);case 214:return L=4,y.offset++,y.ext(L);case 215:return L=8,y.offset++,y.ext(L);case 216:return L=16,y.offset++,y.ext(L);case 217:return L=y.view.getUint8(y.offset+1),y.offset+=2,y.str(L);case 218:return L=y.view.getUint16(y.offset+1),y.offset+=3,y.str(L);case 219:return L=y.view.getUint32(y.offset+1),y.offset+=5,y.str(L);case 220:return L=y.view.getUint16(y.offset+1),y.offset+=3,y.array(L);case 221:return L=y.view.getUint32(y.offset+1),y.offset+=5,y.array(L);case 222:return L=y.view.getUint16(y.offset+1),y.offset+=3,y.map(L);case 223:return L=y.view.getUint32(y.offset+1),y.offset+=5,y.map(L)}throw new Error("Unknown type 0x"+U.toString(16))},this.offset=T||0,this.view=A}return M})();function H(M){var A=new DataView(M),T=new q(A),y=T.parse();if(T.offset!==M.byteLength)throw new Error(M.byteLength-T.offset+" trailing bytes");return y}function B(M,A){return Object.keys(M).filter(function(T){var y=M[T],U=typeof y;return(!A||y!=null)&&(U!=="function"||!!y.toJSON)})}function z(M,A,T,y){var U=typeof M;if(typeof M=="string"){var N=g(M);if(N<32)return A.setUint8(T,N|160),f(A,T+1,M),1+N;if(N<256)return A.setUint8(T,217),A.setUint8(T+1,N),f(A,T+2,M),2+N;if(N<65536)return A.setUint8(T,218),A.setUint16(T+1,N),f(A,T+3,M),3+N;if(N<4294967296)return A.setUint8(T,219),A.setUint32(T+1,N),f(A,T+5,M),5+N}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var L=M.byteLength;if(L<256)return A.setUint8(T,196),A.setUint8(T+1,L),new Uint8Array(A.buffer).set(new Uint8Array(M),T+2),2+L;if(L<65536)return A.setUint8(T,197),A.setUint16(T+1,L),new Uint8Array(A.buffer).set(new Uint8Array(M),T+3),3+L;if(L<4294967296)return A.setUint8(T,198),A.setUint32(T+1,L),new Uint8Array(A.buffer).set(new Uint8Array(M),T+5),5+L}if(typeof M=="number"){if(Math.floor(M)!==M)return A.setUint8(T,203),A.setFloat64(T+1,M),9;if(M>=0){if(M<128)return A.setUint8(T,M),1;if(M<256)return A.setUint8(T,204),A.setUint8(T+1,M),2;if(M<65536)return A.setUint8(T,205),A.setUint16(T+1,M),3;if(M<4294967296)return A.setUint8(T,206),A.setUint32(T+1,M),5;if(M<18446744073709552e3)return A.setUint8(T,207),G(A,T+1,M),9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return A.setInt8(T,M),1;if(M>=-128)return A.setUint8(T,208),A.setInt8(T+1,M),2;if(M>=-32768)return A.setUint8(T,209),A.setInt16(T+1,M),3;if(M>=-2147483648)return A.setUint8(T,210),A.setInt32(T+1,M),5;if(M>=-9223372036854776e3)return A.setUint8(T,211),S(A,T+1,M),9;throw new Error("Number too small -0x"+(-M).toString(16).substr(1))}if(U==="undefined")return y?0:(A.setUint8(T,212),A.setUint8(T+1,0),A.setUint8(T+2,0),3);if(M===null)return y?0:(A.setUint8(T,192),1);if(U==="boolean")return A.setUint8(T,M?195:194),1;if(typeof M.toJSON=="function")return z(M.toJSON(),A,T,y);if(U==="object"){var Q,I=0,K=void 0,V=Array.isArray(M);if(V?Q=M.length:(K=B(M,y),Q=K.length),Q<16?(A.setUint8(T,Q|(V?144:128)),I=1):Q<65536?(A.setUint8(T,V?220:222),A.setUint16(T+1,Q),I=3):Q<4294967296&&(A.setUint8(T,V?221:223),A.setUint32(T+1,Q),I=5),V)for(var x=0;x<Q;x++)I+=z(M[x],A,T+I,y);else if(K)for(var x=0;x<Q;x++){var P=K[x];I+=z(P,A,T+I),I+=z(M[P],A,T+I,y)}return I}if(U==="function")return 0;throw new Error("Unknown type "+U)}function w(M,A){var T=typeof M;if(T==="string"){var y=g(M);if(y<32)return 1+y;if(y<256)return 2+y;if(y<65536)return 3+y;if(y<4294967296)return 5+y}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var U=M.byteLength;if(U<256)return 2+U;if(U<65536)return 3+U;if(U<4294967296)return 5+U}if(typeof M=="number"){if(Math.floor(M)!==M)return 9;if(M>=0){if(M<128)return 1;if(M<256)return 2;if(M<65536)return 3;if(M<4294967296)return 5;if(M<18446744073709552e3)return 9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return 1;if(M>=-128)return 2;if(M>=-32768)return 3;if(M>=-2147483648)return 5;if(M>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+M.toString(16).substr(1))}if(T==="boolean")return 1;if(M===null)return A?0:1;if(M===void 0)return A?0:3;if(typeof M.toJSON=="function")return w(M.toJSON(),A);if(T==="object"){var N,L=0;if(Array.isArray(M)){N=M.length;for(var Q=0;Q<N;Q++)L+=w(M[Q],A)}else{var I=B(M,A);N=I.length;for(var Q=0;Q<N;Q++){var K=I[Q];L+=w(K)+w(M[K],A)}}if(N<16)return 1+L;if(N<65536)return 3+L;if(N<4294967296)return 5+L;throw new Error("Array or object too long 0x"+N.toString(16))}if(T==="function")return 0;throw new Error("Unknown type "+T)}r.default={encode:b,decode:H,inspect:c,utf8Write:f,utf8Read:p,utf8ByteCount:g}}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(30)),p=c.__importDefault(o(50)),g=c.__importDefault(o(3)),b=c.__importDefault(o(4)),_=c.__importDefault(o(55)),R=c.__importDefault(o(57)),E=c.__importDefault(o(62)),D=c.__importDefault(o(64)),S=c.__importDefault(o(68)),G=c.__importDefault(o(2)),q=o(8),H=c.__importDefault(o(65)),B=c.__importDefault(o(66)),z=c.__importDefault(o(41)),w=(0,R.default)(D.default,_.default);g.default.Crypto=w,g.default.BufferUtils=_.default,g.default.Http=E.default,g.default.Config=D.default,g.default.Transports=S.default,g.default.WebStorage=H.default,f.default.Crypto=w,p.default.Crypto=w,G.default.initLogHandlers(),g.default.Defaults=(0,q.getDefaults)(B.default),g.default.Config.agent&&(g.default.Defaults.agent+=" "+g.default.Config.agent),g.default.Config.noUpgrade&&(g.default.Defaults.upgradeTransports=[]),r.default={ErrorInfo:b.default,Rest:f.default,Realtime:p.default,msgpack:z.default}}),(function(s){s.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.50","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**","src/**","react/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^8.14.2"},"peerDependencies":{"react":">=16.8.0","react-dom":">=16.8.0"},"peerDependenciesMeta":{"react":{"optional":true},"react-dom":{"optional":true}},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@arethetypeswrong/cli":"^0.13.1","@babel/preset-env":"^7.23.6","@testing-library/react":"^13.3.0","@types/crypto-js":"^4.0.1","@types/jmespath":"^0.15.2","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","@vitejs/plugin-react":"^1.3.2","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","babel-loader":"^8.3.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-import":"^2.28.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-react":"^7.32.2","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","jmespath":"^0.16.0","jsdom":"^20.0.0","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","mocha-junit-reporter":"^2.2.1","null-loader":"^4.0.1","playwright":"^1.39.0","prettier":"^2.5.1","react":">=18.1.0","react-dom":">=18.1.0","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","vite":"^4.4.9","vitest":"^0.18.0","webpack":"^4.44.2","webpack-cli":"^4.2.0","webpack-node-externals":"^3.0.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"start:react":"npx vite serve","grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","test:react":"vitest run","concat":"grunt concat","build":"grunt build:all && npm run build:react","build:node":"grunt build:node","build:browser":"grunt build:browser","build:react":"npm run build:react:mjs && npm run build:react:cjs && cp src/platform/react-hooks/res/package.react.json react/package.json","build:react:mjs":"tsc --project src/platform/react-hooks/tsconfig.mjs.json && cp src/platform/react-hooks/res/package.mjs.json react/mjs/package.json","build:react:cjs":"tsc --project src/platform/react-hooks/tsconfig.cjs.json && cp src/platform/react-hooks/res/package.cjs.json react/cjs/package.json","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')}),(function(s,r){}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(32),o(25))})(this,function(c){return c.HmacSHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(47)),g=c.__importDefault(o(15)),b=c.__importDefault(o(20)),_=c.__importDefault(o(4)),R=c.__importDefault(o(48)),E=function(){},D=(function(){function H(B){this.rest=B,this.admin=new S(B)}return H})(),S=(function(){function H(B){this.rest=B,this.deviceRegistrations=new G(B),this.channelSubscriptions=new q(B)}return H.prototype.publish=function(B,z,w){var M=this.rest,A=M.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,T=f.defaultPostHeaders(M.options,A),y={},U=f.mixin({recipient:B},z);if(typeof w!="function"){if(this.rest.options.promises)return f.promisify(this,"publish",arguments);w=E}M.options.headers&&f.mixin(T,M.options.headers),M.options.pushFullWait&&f.mixin(y,{fullWait:"true"});var N=f.encodeBody(U,A);g.default.post(M,"/push/publish",N,T,y,null,function(L){return w(L)})},H})(),G=(function(){function H(B){this.rest=B}return H.prototype.save=function(B,z){var w=this.rest,M=p.default.fromValues(B),A=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,T=f.defaultPostHeaders(w.options,A),y={};if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"save",arguments);z=E}w.options.headers&&f.mixin(T,w.options.headers),w.options.pushFullWait&&f.mixin(y,{fullWait:"true"});var U=f.encodeBody(M,A);g.default.put(w,"/push/deviceRegistrations/"+encodeURIComponent(B.id),U,T,y,null,function(N,L,Q,I){z(N,N?void 0:p.default.fromResponseBody(L,I?void 0:A))})},H.prototype.get=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=f.defaultGetHeaders(w.options,M),T=B.id||B;if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"get",arguments);z=E}if(typeof T!="string"||!T.length){z(new _.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400));return}w.options.headers&&f.mixin(A,w.options.headers),g.default.get(w,"/push/deviceRegistrations/"+encodeURIComponent(T),A,{},null,function(y,U,N,L){z(y,y?void 0:p.default.fromResponseBody(U,L?void 0:M))})},H.prototype.list=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=f.defaultGetHeaders(w.options,M);if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"list",arguments);z=E}w.options.headers&&f.mixin(T,w.options.headers),new b.default(w,"/push/deviceRegistrations",T,A,function(y,U,N){return p.default.fromResponseBody(y,N?void 0:M)}).get(B,z)},H.prototype.remove=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=f.defaultGetHeaders(w.options,M),T={},y=B.id||B;if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"remove",arguments);z=E}if(typeof y!="string"||!y.length){z(new _.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400));return}w.options.headers&&f.mixin(A,w.options.headers),w.options.pushFullWait&&f.mixin(T,{fullWait:"true"}),g.default.delete(w,"/push/deviceRegistrations/"+encodeURIComponent(y),A,T,null,function(U){return z(U)})},H.prototype.removeWhere=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=f.defaultGetHeaders(w.options,M);if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"removeWhere",arguments);z=E}w.options.headers&&f.mixin(A,w.options.headers),w.options.pushFullWait&&f.mixin(B,{fullWait:"true"}),g.default.delete(w,"/push/deviceRegistrations",A,B,null,function(T){return z(T)})},H})(),q=(function(){function H(B){this.remove=H.prototype.removeWhere,this.rest=B}return H.prototype.save=function(B,z){var w=this.rest,M=R.default.fromValues(B),A=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,T=f.defaultPostHeaders(w.options,A),y={};if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"save",arguments);z=E}w.options.headers&&f.mixin(T,w.options.headers),w.options.pushFullWait&&f.mixin(y,{fullWait:"true"});var U=f.encodeBody(M,A);g.default.post(w,"/push/channelSubscriptions",U,T,y,null,function(N,L,Q,I){z(N,!N&&R.default.fromResponseBody(L,I?void 0:A))})},H.prototype.list=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=f.defaultGetHeaders(w.options,M);if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"list",arguments);z=E}w.options.headers&&f.mixin(T,w.options.headers),new b.default(w,"/push/channelSubscriptions",T,A,function(y,U,N){return R.default.fromResponseBody(y,N?void 0:M)}).get(B,z)},H.prototype.removeWhere=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=f.defaultGetHeaders(w.options,M);if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"removeWhere",arguments);z=E}w.options.headers&&f.mixin(A,w.options.headers),w.options.pushFullWait&&f.mixin(B,{fullWait:"true"}),g.default.delete(w,"/push/channelSubscriptions",A,B,null,function(T){return z(T)})},H.prototype.listChannels=function(B,z){var w=this.rest,M=w.options.useBinaryProtocol?f.Format.msgpack:f.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=f.defaultGetHeaders(w.options,M);if(typeof z!="function"){if(this.rest.options.promises)return f.promisify(this,"listChannels",arguments);z=E}w.options.headers&&f.mixin(T,w.options.headers),w.options.pushFullWait&&f.mixin(B,{fullWait:"true"}),new b.default(w,"/push/channels",T,A,function(y,U,N){for(var L=!N&&M?f.decodeBody(y,M):y,Q=0;Q<L.length;Q++)L[Q]=String(L[Q]);return L}).get(B,z)},H})();r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(4)),g;(function(R){R.Phone="phone",R.Tablet="tablet",R.Desktop="desktop",R.TV="tv",R.Watch="watch",R.Car="car",R.Embedded="embedded",R.Other="other"})(g||(g={}));var b;(function(R){R.Android="android",R.IOS="ios",R.Browser="browser"})(b||(b={}));var _=(function(){function R(){}return R.prototype.toJSON=function(){var E,D,S;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(E=this.push)===null||E===void 0?void 0:E.recipient,state:(D=this.push)===null||D===void 0?void 0:D.state,error:(S=this.push)===null||S===void 0?void 0:S.error}}},R.prototype.toString=function(){var E,D,S,G,q="[DeviceDetails";return this.id&&(q+="; id="+this.id),this.platform&&(q+="; platform="+this.platform),this.formFactor&&(q+="; formFactor="+this.formFactor),this.clientId&&(q+="; clientId="+this.clientId),this.metadata&&(q+="; metadata="+this.metadata),this.deviceIdentityToken&&(q+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),!((E=this.push)===null||E===void 0)&&E.recipient&&(q+="; push.recipient="+JSON.stringify(this.push.recipient)),!((D=this.push)===null||D===void 0)&&D.state&&(q+="; push.state="+this.push.state),!((S=this.push)===null||S===void 0)&&S.error&&(q+="; push.error="+JSON.stringify(this.push.error)),!((G=this.push)===null||G===void 0)&&G.metadata&&(q+="; push.metadata="+this.push.metadata),q+="]",q},R.fromResponseBody=function(E,D){return D&&(E=f.decodeBody(E,D)),f.isArray(E)?R.fromValuesArray(E):R.fromValues(E)},R.fromValues=function(E){return E.error=E.error&&p.default.fromValues(E.error),Object.assign(new R,E)},R.fromValuesArray=function(E){for(var D=E.length,S=new Array(D),G=0;G<D;G++)S[G]=R.fromValues(E[G]);return S},R.toRequestBody=f.encodeBody,R})();r.default=_}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=(function(){function g(){}return g.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},g.prototype.toString=function(){var b="[PushChannelSubscription";return this.channel&&(b+="; channel="+this.channel),this.deviceId&&(b+="; deviceId="+this.deviceId),this.clientId&&(b+="; clientId="+this.clientId),b+="]",b},g.fromResponseBody=function(b,_){return _&&(b=f.decodeBody(b,_)),f.isArray(b)?g.fromValuesArray(b):g.fromValues(b)},g.fromValues=function(b){return Object.assign(new g,b)},g.fromValuesArray=function(b){for(var _=b.length,R=new Array(_),E=0;E<_;E++)R[E]=g.fromValues(b[E]);return R},g.toRequestBody=f.encodeBody,g})();r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=(function(){function w(M){this.count=M&&M.count||0,this.data=M&&M.data||0,this.uncompressedData=M&&M.uncompressedData||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return w})(),g=(function(w){c.__extends(M,w);function M(A){var T=w.call(this,A)||this;return A&&A.category&&(T.category={},f.forInOwnNonNullProperties(A.category,function(y){T.category[y]=new p(A.category[y])})),T}return M})(p),b=(function(){function w(M){this.peak=M&&M.peak||0,this.min=M&&M.min||0,this.mean=M&&M.mean||0,this.opened=M&&M.opened||0,this.refused=M&&M.refused||0}return w})(),_=(function(){function w(M){this.succeeded=M&&M.succeeded||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return w})(),R=(function(){function w(M){this.plain=new b(M&&M.plain),this.tls=new b(M&&M.tls),this.all=new b(M&&M.all)}return w})(),E=(function(){function w(M){this.messages=new g(M&&M.messages),this.presence=new g(M&&M.presence),this.all=new g(M&&M.all)}return w})(),D=(function(){function w(M){this.realtime=new E(M&&M.realtime),this.rest=new E(M&&M.rest),this.webhook=new E(M&&M.webhook),this.sharedQueue=new E(M&&M.sharedQueue),this.externalQueue=new E(M&&M.externalQueue),this.httpEvent=new E(M&&M.httpEvent),this.push=new E(M&&M.push),this.all=new E(M&&M.all)}return w})(),S=(function(){function w(M){this.all=new E(M&&M.all),this.inbound=new D(M&&M.inbound),this.outbound=new D(M&&M.outbound)}return w})(),G=(function(){function w(M){this.all=new E(M&&M.all),this.producerPaid=new S(M&&M.producerPaid),this.consumerPaid=new S(M&&M.consumerPaid)}return w})(),q=(function(){function w(M){this.messages=M&&M.messages||0;var A=M&&M.notifications;this.notifications={invalid:A&&A.invalid||0,attempted:A&&A.attempted||0,successful:A&&A.successful||0,failed:A&&A.failed||0},this.directPublishes=M&&M.directPublishes||0}return w})(),H=(function(){function w(M){this.succeeded=M&&M.succeeded||0,this.skipped=M&&M.skipped||0,this.failed=M&&M.failed||0}return w})(),B=(function(){function w(M){var A=this;this.delta=void 0,M&&M.delta&&(this.delta={},f.forInOwnNonNullProperties(M.delta,function(T){A.delta[T]=new H(M.delta[T])}))}return w})(),z=(function(w){c.__extends(M,w);function M(A){var T=w.call(this,A)||this;return T.persisted=new E(A&&A.persisted),T.connections=new R(A&&A.connections),T.channels=new b(A&&A.channels),T.apiRequests=new _(A&&A.apiRequests),T.tokenRequests=new _(A&&A.tokenRequests),T.xchgProducer=new G(A&&A.xchgProducer),T.xchgConsumer=new G(A&&A.xchgConsumer),T.push=new q(A&&A.pushStats),T.processed=new B(A&&A.processed),T.inProgress=A&&A.inProgress||void 0,T.unit=A&&A.unit||void 0,T.intervalId=A&&A.intervalId||void 0,T}return M.fromValues=function(A){return new M(A)},M})(S);r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(30)),g=c.__importDefault(o(7)),b=c.__importDefault(o(2)),_=c.__importDefault(o(51)),R=c.__importDefault(o(38)),E=c.__importDefault(o(8)),D=c.__importDefault(o(4)),S=c.__importDefault(o(10)),G=c.__importDefault(o(35)),q=c.__importDefault(o(3)),H=c.__importDefault(o(9)),B=(function(w){c.__extends(M,w);function M(A){var T=w.call(this,A)||this;return b.default.logAction(b.default.LOG_MINOR,"Realtime()",""),T.connection=new _.default(T,T.options),T.channels=new z(T),A.autoConnect!==!1&&T.connect(),T}return M.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},M.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},M.Promise=function(A){return A=E.default.objectifyOptions(A),A.promises=!0,new M(A)},M.Callbacks=M,M.Utils=f,M.ConnectionManager=G.default,M.Platform=q.default,M.ProtocolMessage=S.default,M.Message=H.default,M})(p.default),z=(function(w){c.__extends(M,w);function M(A){var T=w.call(this)||this;return T.realtime=A,T.all=Object.create(null),A.connection.connectionManager.on("transport.active",function(){T.onTransportActive()}),T}return M.prototype.channelSerials=function(){for(var A={},T=0,y=f.keysArray(this.all,!0);T<y.length;T++){var U=y[T],N=this.all[U];N.properties.channelSerial&&(A[U]=N.properties.channelSerial)}return A},M.prototype.recoverChannels=function(A){for(var T=0,y=f.keysArray(A,!0);T<y.length;T++){var U=y[T],N=this.get(U);N.properties.channelSerial=A[U]}},M.prototype.onChannelMessage=function(A){var T=A.channel;if(T===void 0){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+A.action);return}var y=this.all[T];if(!y){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+T);return}y.onMessage(A)},M.prototype.onTransportActive=function(){for(var A in this.all){var T=this.all[A];T.state==="attaching"||T.state==="detaching"?T.checkPendingState():T.state==="suspended"?T._attach(!1,null):T.state==="attached"&&T.requestState("attaching")}},M.prototype.propogateConnectionInterruption=function(A,T){var y={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},U=["attaching","attached","detaching","suspended"],N=y[A];for(var L in this.all){var Q=this.all[L];f.arrIn(U,Q.state)&&Q.notifyState(N,T)}},M.prototype.get=function(A,T){A=String(A);var y=this.all[A];if(!y)y=this.all[A]=new R.default(this.realtime,A,T);else if(T){if(y._shouldReattachToSetOptions(T,y.channelOptions))throw new D.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);y.setOptions(T)}return y},M.prototype.getDerived=function(A,T,y){if(T.filter){var U=f.toBase64(T.filter),N=f.matchDerivedChannel(A);A="[filter=".concat(U).concat(N.qualifierParam,"]").concat(N.channelName)}return this.get(A,y)},M.prototype.release=function(A){A=String(A);var T=this.all[A];if(T){var y=T.getReleaseErr();if(y)throw y;delete this.all[A]}},M})(g.default);r.default=B}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(7)),g=c.__importDefault(o(35)),b=c.__importDefault(o(2)),_=c.__importDefault(o(37)),R=c.__importDefault(o(3));function E(){}var D=(function(S){c.__extends(G,S);function G(q,H){var B=S.call(this)||this;return B.whenState=(function(z,w){return p.default.prototype.whenState.call(B,z,B.state,w,new _.default(void 0,z))}),B.ably=q,B.connectionManager=new g.default(q,H),B.state=B.connectionManager.state.state,B.key=void 0,B.id=void 0,B.errorReason=null,B.connectionManager.on("connectionstate",function(z){var w=B.state=z.current;R.default.Config.nextTick(function(){B.emit(w,z)})}),B.connectionManager.on("update",function(z){R.default.Config.nextTick(function(){B.emit("update",z)})}),B}return G.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},G.prototype.ping=function(q){if(b.default.logAction(b.default.LOG_MINOR,"Connection.ping()",""),!q){if(this.ably.options.promises)return f.promisify(this,"ping",arguments);q=E}this.connectionManager.ping(null,q)},G.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(G.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),G.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},G})(p.default);r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PendingMessage=void 0;var c=o(0),f=c.__importDefault(o(10)),p=c.__importStar(o(1)),g=c.__importDefault(o(7)),b=c.__importDefault(o(2)),_=c.__importDefault(o(36)),R=c.__importDefault(o(4)),E=f.default.Action,D=(function(){function G(q,H){this.message=q,this.callback=H,this.merged=!1;var B=q.action;this.sendAttempted=!1,this.ackRequired=B==E.MESSAGE||B==E.PRESENCE}return G})();r.PendingMessage=D;var S=(function(G){c.__extends(q,G);function q(H){var B=G.call(this)||this;return B.transport=H,B.messageQueue=new _.default,H.on("ack",function(z,w){B.onAck(z,w)}),H.on("nack",function(z,w,M){B.onNack(z,w,M)}),B}return q.prototype.onAck=function(H,B){b.default.logAction(b.default.LOG_MICRO,"Protocol.onAck()","serial = "+H+"; count = "+B),this.messageQueue.completeMessages(H,B)},q.prototype.onNack=function(H,B,z){b.default.logAction(b.default.LOG_ERROR,"Protocol.onNack()","serial = "+H+"; count = "+B+"; err = "+p.inspectError(z)),z||(z=new R.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(H,B,z)},q.prototype.onceIdle=function(H){var B=this.messageQueue;if(B.count()===0){H();return}B.once("idle",H)},q.prototype.send=function(H){H.ackRequired&&this.messageQueue.push(H),b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Protocol.send()","sending msg; "+f.default.stringify(H.message)),H.sendAttempted=!0,this.transport.send(H.message)},q.prototype.getTransport=function(){return this.transport},q.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},q.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},q.prototype.finish=function(){var H=this.transport;this.onceIdle(function(){H.disconnect()})},q})(g.default);r.default=S}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(3)),p=c.__importStar(o(1)),g=c.__importDefault(o(26)),b=c.__importDefault(o(8)),_=c.__importDefault(o(2)),R=c.__importDefault(o(10)),E=c.__importDefault(o(4)),D="web_socket";function S(H){return!!H.on}var G=(function(H){c.__extends(B,H);function B(z,w,M){var A=H.call(this,z,w,M)||this;return A.shortName=D,M.heartbeats=f.default.Config.useProtocolHeartbeats,A.wsHost=b.default.getHost(M.options,M.host,!0),A}return B.isAvailable=function(){return!!f.default.Config.WebSocket},B.prototype.createWebSocket=function(z,w){return this.uri=z+p.toQueryString(w),new f.default.Config.WebSocket(this.uri)},B.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},B.prototype.connect=function(){_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),g.default.prototype.connect.call(this);var z=this,w=this.params,M=w.options,A=M.tls?"wss://":"ws://",T=A+this.wsHost+":"+b.default.getPort(M)+"/";_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+T),this.auth.getAuthParams(function(y,U){if(!z.isDisposed){var N="";for(var L in U)N+=" "+L+": "+U[L]+";";if(_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+N+" err: "+y),y){z.disconnect(y);return}var Q=w.getConnectParams(U);try{var I=z.wsConnection=z.createWebSocket(T,Q);I.binaryType=f.default.Config.binaryType,I.onopen=function(){z.onWsOpen()},I.onclose=function(K){z.onWsClose(K)},I.onmessage=function(K){z.onWsData(K.data)},I.onerror=function(K){z.onWsError(K)},S(I)&&I.on("ping",function(){z.onActivity()})}catch(K){_.default.logAction(_.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(K.stack||K.message)),z.disconnect(K)}}})},B.prototype.send=function(z){var w=this.wsConnection;if(!w){_.default.logAction(_.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{w.send(R.default.serialize(z,this.params.format))}catch(A){var M="Exception from ws connection when trying to send: "+p.inspectError(A);_.default.logAction(_.default.LOG_ERROR,"WebSocketTransport.send()",M),this.finish("disconnected",new E.default(M,5e4,500))}},B.prototype.onWsData=function(z){_.default.logAction(_.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+z.length+"; type = "+typeof z);try{this.onProtocolMessage(R.default.deserialize(z,this.format))}catch(w){_.default.logAction(_.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+w.stack)}},B.prototype.onWsOpen=function(){_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},B.prototype.onWsClose=function(z){var w,M;if(typeof z=="object"?(M=z.code,w=z.wasClean||M===1e3):(M=z,w=M==1e3),delete this.wsConnection,w){_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var A=new E.default("Websocket closed",80003,400);this.finish("disconnected",A)}else{var T="Unclean disconnection of WebSocket ; code = "+M,A=new E.default(T,80003,400);_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.onWsClose()",T),this.finish("disconnected",A)}this.emit("disposed")},B.prototype.onWsError=function(z){var w=this;_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+z.message),f.default.Config.nextTick(function(){w.disconnect(Error(z.message))})},B.prototype.dispose=function(){_.default.logAction(_.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var z=this.wsConnection;z&&(z.onmessage=function(){},delete this.wsConnection,f.default.Config.nextTick(function(){if(_.default.logAction(_.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!z)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");z.close()}))},B})(g.default);function q(H){return G.isAvailable()&&(H.supportedTransports[D]=G),G}r.default=q}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(1)),p=c.__importDefault(o(34)),g=c.__importDefault(o(7)),b=c.__importDefault(o(2)),_=c.__importDefault(o(16)),R=c.__importStar(o(4)),E=c.__importDefault(o(38)),D=c.__importDefault(o(24)),S=c.__importDefault(o(39)),G=function(){};function q(A){return A.channel.realtime.auth.clientId}function H(A){var T=A.channel.realtime,y=T.auth.clientId;return(!y||y==="*")&&T.connection.state==="connected"}function B(A,T,y){switch(A.state){case"attached":case"suspended":y();break;case"initialized":case"detached":case"detaching":case"attaching":A.attach(function(U){U?T(U):y()});break;default:T(R.default.fromValues(A.invalidStateError()))}}function z(A,T){if(A.isSynthesized()||T.isSynthesized())return A.timestamp>=T.timestamp;var y=A.parseId(),U=T.parseId();return y.msgSerial===U.msgSerial?y.index>U.index:y.msgSerial>U.msgSerial}var w=(function(A){c.__extends(T,A);function T(y){var U=A.call(this,y)||this;return U.channel=y,U.syncComplete=!1,U.members=new M(U,function(N){return N.clientId+":"+N.connectionId}),U._myMembers=new M(U,function(N){return N.clientId}),U.subscriptions=new g.default,U.pendingPresence=[],U}return T.prototype.enter=function(y,U){if(H(this))throw new R.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"enter",U)},T.prototype.update=function(y,U){if(H(this))throw new R.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"update",U)},T.prototype.enterClient=function(y,U,N){return this._enterOrUpdateClient(void 0,y,U,"enter",N)},T.prototype.updateClient=function(y,U,N){return this._enterOrUpdateClient(void 0,y,U,"update",N)},T.prototype._enterOrUpdateClient=function(y,U,N,L,Q){var I=this;if(!Q)if(typeof N=="function")Q=N,N=null;else{if(this.channel.realtime.options.promises)return f.promisify(this,"_enterOrUpdateClient",[y,U,N,L]);Q=G}var K=this.channel;if(!K.connectionManager.activeState()){Q(K.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence."+L+"Client()","channel = "+K.name+", id = "+y+", client = "+(U||"(implicit) "+q(this)));var V=_.default.fromData(N);V.action=L,y&&(V.id=y),U&&(V.clientId=U),_.default.encode(V,K.channelOptions,function(x){if(x){Q(x);return}switch(K.state){case"attached":K.sendPresence(V,Q);break;case"initialized":case"detached":K.attach();case"attaching":I.pendingPresence.push({presence:V,callback:Q});break;default:x=new R.PartialErrorInfo("Unable to "+L+" presence channel while in "+K.state+" state",90001),x.code=90001,Q(x)}})},T.prototype.leave=function(y,U){if(H(this))throw new R.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,y,U)},T.prototype.leaveClient=function(y,U,N){if(!N)if(typeof U=="function")N=U,U=null;else{if(this.channel.realtime.options.promises)return f.promisify(this,"leaveClient",[y,U]);N=G}var L=this.channel;if(!L.connectionManager.activeState()){N==null||N(L.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+y);var Q=_.default.fromData(U);switch(Q.action="leave",y&&(Q.clientId=y),L.state){case"attached":L.sendPresence(Q,N);break;case"attaching":this.pendingPresence.push({presence:Q,callback:N});break;case"initialized":case"failed":{var I=new R.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);N==null||N(I);break}default:N==null||N(L.invalidStateError())}},T.prototype.get=function(y,U){var N=this,L=Array.prototype.slice.call(arguments);L.length==1&&typeof L[0]=="function"&&L.unshift(null),y=L[0],U=L[1];var Q=!y||("waitForSync"in y?y.waitForSync:!0);if(!U){if(this.channel.realtime.options.promises)return f.promisify(this,"get",L);U=G}function I(K){U(null,y?K.list(y):K.values())}if(this.channel.state==="suspended"){Q?U(R.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):I(this.members);return}B(this.channel,U,function(){var K=N.members;Q?K.waitSync(function(){I(K)}):I(K)})},T.prototype.history=function(y,U){if(b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),U===void 0)if(typeof y=="function")U=y,y=null;else{if(this.channel.realtime.options.promises)return f.promisify(this,"history",arguments);U=G}y&&y.untilAttach&&(this.channel.state==="attached"?(delete y.untilAttach,y.from_serial=this.channel.properties.attachSerial):U(new R.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),p.default.prototype._history.call(this,y,U)},T.prototype.setPresence=function(y,U,N){b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+y.length+" participants; syncChannelSerial = "+N);var L,Q,I=this.members,K=this._myMembers,V=[],x=this.channel.connectionManager.connectionId;U&&(this.members.startSync(),N&&(Q=N.match(/^[\w-]+:(.*)$/))&&(L=Q[1]));for(var P=0;P<y.length;P++){var Z=_.default.fromValues(y[P]);switch(Z.action){case"leave":I.remove(Z)&&V.push(Z),Z.connectionId===x&&!Z.isSynthesized()&&K.remove(Z);break;case"enter":case"present":case"update":I.put(Z)&&V.push(Z),Z.connectionId===x&&K.put(Z);break}}U&&!L&&(I.endSync(),this.channel.syncChannelSerial=null);for(var P=0;P<V.length;P++){var Z=V[P];this.subscriptions.emit(Z.action,Z)}},T.prototype.onAttached=function(y){b.default.logAction(b.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+y),y?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var U=this.pendingPresence,N=U.length;if(N){this.pendingPresence=[];var L=[],Q=D.default.create();b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+N+" queued presence messages");for(var I=0;I<N;I++){var K=U[I];L.push(K.presence),Q.push(K.callback)}this.channel.sendPresence(L,Q)}},T.prototype.actOnChannelState=function(y,U,N){switch(y){case"attached":this.onAttached(U);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(N);break}},T.prototype.failPendingPresence=function(y){if(this.pendingPresence.length){b.default.logAction(b.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+f.inspectError(y));for(var U=0;U<this.pendingPresence.length;U++)try{this.pendingPresence[U].callback(y)}catch{}this.pendingPresence=[]}},T.prototype._clearMyMembers=function(){this._myMembers.clear()},T.prototype._ensureMyMembersPresent=function(){var y=this,U=this._myMembers,N=function(I){if(I){var K="Presence auto-re-enter failed: "+I.toString(),V=new R.default(K,91004,400);b.default.logAction(b.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",K);var x=new S.default(y.channel.state,y.channel.state,!0,!1,V);y.channel.emit("update",x)}};for(var L in U.map){var Q=U.map[L];b.default.logAction(b.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+Q.clientId+'" into the presence set'),this._enterOrUpdateClient(Q.id,Q.clientId,Q.data,"enter",N)}},T.prototype._synthesizeLeaves=function(y){var U=this.subscriptions;f.arrForEach(y,function(N){var L=_.default.fromValues({action:"leave",connectionId:N.connectionId,clientId:N.clientId,data:N.data,encoding:N.encoding,timestamp:f.now()});U.emit("leave",L)})},T.prototype.on=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];b.default.renamedMethod("RealtimePresence","on","subscribe"),this.subscribe.apply(this,y)},T.prototype.off=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];b.default.renamedMethod("RealtimePresence","off","unsubscribe"),this.unsubscribe.apply(this,y)},T.prototype.subscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=E.default.processListenerArgs(y),L=N[0],Q=N[1],I=N[2],K=this.channel;if(!I){if(this.channel.realtime.options.promises)return f.promisify(this,"subscribe",[L,Q]);I=G}if(K.state==="failed"){I(R.default.fromValues(K.invalidStateError()));return}this.subscriptions.on(L,Q),K.attach(I)},T.prototype.unsubscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=E.default.processListenerArgs(y),L=N[0],Q=N[1];this.subscriptions.off(L,Q)},T})(p.default),M=(function(A){c.__extends(T,A);function T(y,U){var N=A.call(this)||this;return N.presence=y,N.map=Object.create(null),N.syncInProgress=!1,N.residualMembers=null,N.memberKey=U,N}return T.prototype.get=function(y){return this.map[y]},T.prototype.getClient=function(y){var U=this.map,N=[];for(var L in U){var Q=U[L];Q.clientId==y&&Q.action!="absent"&&N.push(Q)}return N},T.prototype.list=function(y){var U=this.map,N=y&&y.clientId,L=y&&y.connectionId,Q=[];for(var I in U){var K=U[I];K.action!=="absent"&&(N&&N!=K.clientId||L&&L!=K.connectionId||Q.push(K))}return Q},T.prototype.put=function(y){(y.action==="enter"||y.action==="update")&&(y=_.default.fromValues(y),y.action="present");var U=this.map,N=this.memberKey(y);this.residualMembers&&delete this.residualMembers[N];var L=U[N];return L&&!z(y,L)?!1:(U[N]=y,!0)},T.prototype.values=function(){var y=this.map,U=[];for(var N in y){var L=y[N];L.action!="absent"&&U.push(L)}return U},T.prototype.remove=function(y){var U=this.map,N=this.memberKey(y),L=U[N];return L&&!z(y,L)?!1:(this.syncInProgress?(y=_.default.fromValues(y),y.action="absent",U[N]=y):delete U[N],!0)},T.prototype.startSync=function(){var y=this.map,U=this.syncInProgress;b.default.logAction(b.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),this.syncInProgress||(this.residualMembers=f.copy(y),this.setInProgress(!0))},T.prototype.endSync=function(){var y=this.map,U=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),U){for(var N in y){var L=y[N];L.action==="absent"&&delete y[N]}this.presence._synthesizeLeaves(f.valuesArray(this.residualMembers));for(var N in this.residualMembers)delete y[N];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},T.prototype.waitSync=function(y){var U=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),!U){y();return}this.once("sync",y)},T.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},T.prototype.setInProgress=function(y){b.default.logAction(b.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+y),this.syncInProgress=y,this.presence.syncComplete=!y},T})(g.default);r.default=w}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=o(56),p=o(31),g=o(11),b=c.__importDefault(o(5)),_=c.__importDefault(o(3)),R=(function(){function E(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return E.prototype.isWordArray=function(D){return D!=null&&D.sigBytes!==void 0},E.prototype.isArrayBuffer=function(D){return D!=null&&D.constructor===ArrayBuffer},E.prototype.isTypedArray=function(D){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(D)},E.prototype.uint8ViewToBase64=function(D){for(var S="",G=this.base64CharSet,q=D.byteLength,H=q%3,B=q-H,z,w,M,A,T,y=0;y<B;y=y+3)T=D[y]<<16|D[y+1]<<8|D[y+2],z=(T&16515072)>>18,w=(T&258048)>>12,M=(T&4032)>>6,A=T&63,S+=G[z]+G[w]+G[M]+G[A];return H==1?(T=D[B],z=(T&252)>>2,w=(T&3)<<4,S+=G[z]+G[w]+"=="):H==2&&(T=D[B]<<8|D[B+1],z=(T&64512)>>10,w=(T&1008)>>4,M=(T&15)<<2,S+=G[z]+G[w]+G[M]+"="),S},E.prototype.base64ToArrayBuffer=function(D){for(var S=atob==null?void 0:atob(D),G=S.length,q=new Uint8Array(G),H=0;H<G;H++){var B=S.charCodeAt(H);q[H]=B}return q.buffer},E.prototype.isBuffer=function(D){return this.isArrayBuffer(D)||this.isWordArray(D)||this.isTypedArray(D)},E.prototype.toBuffer=function(D){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(D))return new Uint8Array(D);if(this.isTypedArray(D))return new Uint8Array(D.buffer);if(this.isWordArray(D)){for(var S=new ArrayBuffer(D.sigBytes),G=new Uint8Array(S),q=0;q<D.sigBytes;q++)G[q]=D.words[q>>>2]>>>24-q%4*8&255;return G}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},E.prototype.toArrayBuffer=function(D){return this.isArrayBuffer(D)?D:this.toBuffer(D).buffer},E.prototype.toWordArray=function(D){return this.isTypedArray(D)&&(D=D.buffer),this.isWordArray(D)?D:b.default.create(D)},E.prototype.base64Encode=function(D){return this.isWordArray(D)?(0,g.stringify)(D):this.uint8ViewToBase64(this.toBuffer(D))},E.prototype.base64Decode=function(D){return ArrayBuffer&&_.default.Config.atob?this.base64ToArrayBuffer(D):(0,g.parse)(D)},E.prototype.hexEncode=function(D){return(0,f.stringify)(this.toWordArray(D))},E.prototype.hexDecode=function(D){var S=(0,f.parse)(D);return ArrayBuffer?this.toArrayBuffer(S):S},E.prototype.utf8Encode=function(D){return _.default.Config.TextEncoder?new _.default.Config.TextEncoder().encode(D).buffer:(0,p.parse)(D)},E.prototype.utf8Decode=function(D){if(!this.isBuffer(D))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(D)?new TextDecoder().decode(D):(D=this.toWordArray(D),(0,p.stringify)(D))},E.prototype.bufferCompare=function(D,S){if(!D)return-1;if(!S)return 1;var G=this.toWordArray(D),q=this.toWordArray(S);G.clamp(),q.clamp();var H=G.sigBytes-q.sigBytes;if(H!=0)return H;for(var B=G.words,z=q.words,w=0;w<B.length;w++)if(H=B[w]-z[w],H!=0)return H;return 0},E.prototype.byteLength=function(D){return this.isArrayBuffer(D)||this.isTypedArray(D)?D.byteLength:this.isWordArray(D)?D.sigBytes:-1},E.prototype.typedArrayToBuffer=function(D){return D.buffer},E})();r.default=new R}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return c.enc.Hex})}),(function(s,r,o){o.r(r);var c=o(5),f=o.n(c),p=o(11),g=o(23),b=o.n(g),_=o(2),R=o.n(_),E=o(4),D=o.n(E),S=function(G,q){var H="aes",B=256,z="cbc",w=16,M=4,A=4294967296,T=2147483648,y;if(G.getRandomWordArray)y=G.getRandomWordArray;else if(typeof Uint32Array<"u"&&G.getRandomValues){var U=new Uint32Array(M);y=function(P,Z){var k=P/4,at=k==M?U:new Uint32Array(k);G.getRandomValues(at,function(F){typeof Z<"u"&&Z(F,q.toWordArray(at))})}}else y=function(P,Z){R.a.logAction(R.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var k=P/4,at=new Array(k),F=0;F<k;F++)at[F]=Math.floor(Math.random()*A)-T;Z(null,f.a.create(at))};function N(P){return P+w&-w}function L(P){if(P.algorithm==="aes"&&P.mode==="cbc"){if(P.keyLength===128||P.keyLength===256)return;throw new Error("Unsupported key length "+P.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function Q(P){return P.replace("_","/").replace("-","+")}var I=[f.a.create([269488144,269488144,269488144,269488144],16),f.a.create([16777216],1),f.a.create([33685504],2),f.a.create([50529024],3),f.a.create([67372036],4),f.a.create([84215045,83886080],5),f.a.create([101058054,101056512],6),f.a.create([117901063,117901056],7),f.a.create([134744072,134744072],8),f.a.create([151587081,151587081,150994944],9),f.a.create([168430090,168430090,168427520],10),f.a.create([185273099,185273099,185273088],11),f.a.create([202116108,202116108,202116108],12),f.a.create([218959117,218959117,218959117,218103808],13),f.a.create([235802126,235802126,235802126,235798528],14),f.a.create([252645135,252645135,252645135,252645135],15),f.a.create([269488144,269488144,269488144,269488144],16)];function K(){}function V(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}K.CipherParams=V,K.getDefaultParams=function(P){var Z;if(typeof P=="function"||typeof P=="string"){if(R.a.deprecated("The ability to pass a callback to `Crypto.getDefaultParams()`","This method now directly returns its result, instead of returning it asynchronously via a callback. Please update your code so that it uses the return value of this method instead of passing a callback."),typeof P=="function")R.a.deprecated("The ability to call `Crypto.getDefaultParams()` without specifying an encryption key","Please update your code so that it instead passes an object whose `key` property contains an encryption key. That is, replace `Crypto.getDefaultParams()` with `Crypto.getDefaultParams({ key })`, where `key` is an encryption key that you have generated (for example from the `Crypto.generateRandomKey()` method)."),K.generateRandomKey(function(at){P(null,K.getDefaultParams({key:at}))});else if(typeof arguments[1]=="function")R.a.deprecated("The ability to pass the encryption key as the first argument of `Crypto.getDefaultParams()`","Please update your code so that it instead passes an object whose `key` property contains the key. That is, replace `Crypto.getDefaultParams(key)` with `Crypto.getDefaultParams({ key })`."),arguments[1](null,K.getDefaultParams({key:P}));else throw new Error("Invalid arguments for Crypto.getDefaultParams");return}if(!P.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof P.key=="string"?Z=Object(p.parse)(Q(P.key)):Z=q.toWordArray(P.key);var k=new V;if(k.key=Z,k.algorithm=P.algorithm||H,k.keyLength=Z.words.length*32,k.mode=P.mode||z,P.keyLength&&P.keyLength!==k.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+P.keyLength+" was specified, but the key actually has length "+k.keyLength);return L(k),k},K.generateRandomKey=function(P,Z){arguments.length==1&&typeof P=="function"&&(Z=P,P=void 0),y((P||B)/8,function(k,at){Z!==void 0&&Z(k?D.a.fromValues(k):null,at)})},K.getCipher=function(P){var Z=P instanceof V?P:K.getDefaultParams(P);return{cipherParams:Z,cipher:new x(Z,M,P.iv)}};function x(P,Z,k){this.algorithm=P.algorithm+"-"+String(P.keyLength)+"-"+P.mode,this.cjsAlgorithm=P.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=q.toWordArray(P.key),k&&(this.iv=q.toWordArray(k).clone()),this.blockLengthWords=Z}return x.prototype.encrypt=function(P,Z){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.encrypt()",""),P=q.toWordArray(P);var k=P.sigBytes,at=N(k),F=this,lt=function(){F.getIv(function(it,X){if(it){Z(it);return}var J=F.encryptCipher.process(P.concat(I[at-k])),$=X.concat(J);Z(null,$)})};this.encryptCipher?lt():this.iv?(this.encryptCipher=b.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),lt()):y(w,function(it,X){if(it){Z(it);return}F.encryptCipher=b.a.algo[F.cjsAlgorithm].createEncryptor(F.key,{iv:X}),F.iv=X,lt()})},x.prototype.decrypt=function(P){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.decrypt()",""),P=q.toWordArray(P);var Z=this.blockLengthWords,k=P.words,at=f.a.create(k.slice(0,Z)),F=f.a.create(k.slice(Z)),lt=b.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:at}),it=lt.process(F),X=lt.finalize();return lt.reset(),X&&X.sigBytes&&it.concat(X),it},x.prototype.getIv=function(P){if(this.iv){var Z=this.iv;this.iv=null,P(null,Z);return}var k=this;y(w,function(at,F){if(at){P(at);return}P(null,k.encryptCipher.process(F))})},K};r.default=S}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(){var f=c,p=f.lib,g=p.WordArray,b=f.enc;b.Utf16=b.Utf16BE={stringify:function(R){for(var E=R.words,D=R.sigBytes,S=[],G=0;G<D;G+=2){var q=E[G>>>2]>>>16-G%4*8&65535;S.push(String.fromCharCode(q))}return S.join("")},parse:function(R){for(var E=R.length,D=[],S=0;S<E;S++)D[S>>>1]|=R.charCodeAt(S)<<16-S%2*16;return g.create(D,E*2)}},b.Utf16LE={stringify:function(R){for(var E=R.words,D=R.sigBytes,S=[],G=0;G<D;G+=2){var q=_(E[G>>>2]>>>16-G%4*8&65535);S.push(String.fromCharCode(q))}return S.join("")},parse:function(R){for(var E=R.length,D=[],S=0;S<E;S++)D[S>>>1]|=_(R.charCodeAt(S)<<16-S%2*16);return g.create(D,E*2)}};function _(R){return R<<8&4278255360|R>>>8&16711935}})(),c.enc.Utf16})}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(28))})(this,function(c){return(function(f){var p=c,g=p.lib,b=g.CipherParams,_=p.enc,R=_.Hex,E=p.format;E.Hex={stringify:function(D){return D.ciphertext.toString(R)},parse:function(D){var S=R.parse(D);return b.create({ciphertext:S})}}})(),c.format.Hex})}),(function(s,r,o){(function(c,f){s.exports=f(o(6),o(11),o(61),o(27),o(28))})(this,function(c){return(function(){var f=c,p=f.lib,g=p.BlockCipher,b=f.algo,_=[],R=[],E=[],D=[],S=[],G=[],q=[],H=[],B=[],z=[];(function(){for(var A=[],T=0;T<256;T++)T<128?A[T]=T<<1:A[T]=T<<1^283;for(var y=0,U=0,T=0;T<256;T++){var N=U^U<<1^U<<2^U<<3^U<<4;N=N>>>8^N&255^99,_[y]=N,R[N]=y;var L=A[y],Q=A[L],I=A[Q],K=A[N]*257^N*16843008;E[y]=K<<24|K>>>8,D[y]=K<<16|K>>>16,S[y]=K<<8|K>>>24,G[y]=K;var K=I*16843009^Q*65537^L*257^y*16843008;q[N]=K<<24|K>>>8,H[N]=K<<16|K>>>16,B[N]=K<<8|K>>>24,z[N]=K,y?(y=L^A[A[A[I^L]]],U^=A[A[U]]):y=U=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],M=b.AES=g.extend({_doReset:function(){var A;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,y=T.words,U=T.sigBytes/4,N=this._nRounds=U+6,L=(N+1)*4,Q=this._keySchedule=[],I=0;I<L;I++)I<U?Q[I]=y[I]:(A=Q[I-1],I%U?U>6&&I%U==4&&(A=_[A>>>24]<<24|_[A>>>16&255]<<16|_[A>>>8&255]<<8|_[A&255]):(A=A<<8|A>>>24,A=_[A>>>24]<<24|_[A>>>16&255]<<16|_[A>>>8&255]<<8|_[A&255],A^=w[I/U|0]<<24),Q[I]=Q[I-U]^A);for(var K=this._invKeySchedule=[],V=0;V<L;V++){var I=L-V;if(V%4)var A=Q[I];else var A=Q[I-4];V<4||I<=4?K[V]=A:K[V]=q[_[A>>>24]]^H[_[A>>>16&255]]^B[_[A>>>8&255]]^z[_[A&255]]}}},encryptBlock:function(A,T){this._doCryptBlock(A,T,this._keySchedule,E,D,S,G,_)},decryptBlock:function(A,T){var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y,this._doCryptBlock(A,T,this._invKeySchedule,q,H,B,z,R);var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y},_doCryptBlock:function(A,T,y,U,N,L,Q,I){for(var K=this._nRounds,V=A[T]^y[0],x=A[T+1]^y[1],P=A[T+2]^y[2],Z=A[T+3]^y[3],k=4,at=1;at<K;at++){var F=U[V>>>24]^N[x>>>16&255]^L[P>>>8&255]^Q[Z&255]^y[k++],lt=U[x>>>24]^N[P>>>16&255]^L[Z>>>8&255]^Q[V&255]^y[k++],it=U[P>>>24]^N[Z>>>16&255]^L[V>>>8&255]^Q[x&255]^y[k++],X=U[Z>>>24]^N[V>>>16&255]^L[x>>>8&255]^Q[P&255]^y[k++];V=F,x=lt,P=it,Z=X}var F=(I[V>>>24]<<24|I[x>>>16&255]<<16|I[P>>>8&255]<<8|I[Z&255])^y[k++],lt=(I[x>>>24]<<24|I[P>>>16&255]<<16|I[Z>>>8&255]<<8|I[V&255])^y[k++],it=(I[P>>>24]<<24|I[Z>>>16&255]<<16|I[V>>>8&255]<<8|I[x&255])^y[k++],X=(I[Z>>>24]<<24|I[V>>>16&255]<<16|I[x>>>8&255]<<8|I[P&255])^y[k++];A[T]=F,A[T+1]=lt,A[T+2]=it,A[T+3]=X},keySize:256/32});f.AES=g._createHelper(M)})(),c.AES})}),(function(s,r,o){(function(c,f){s.exports=f(o(6))})(this,function(c){return(function(f){var p=c,g=p.lib,b=g.WordArray,_=g.Hasher,R=p.algo,E=[];(function(){for(var B=0;B<64;B++)E[B]=f.abs(f.sin(B+1))*4294967296|0})();var D=R.MD5=_.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(B,z){for(var w=0;w<16;w++){var M=z+w,A=B[M];B[M]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var T=this._hash.words,y=B[z+0],U=B[z+1],N=B[z+2],L=B[z+3],Q=B[z+4],I=B[z+5],K=B[z+6],V=B[z+7],x=B[z+8],P=B[z+9],Z=B[z+10],k=B[z+11],at=B[z+12],F=B[z+13],lt=B[z+14],it=B[z+15],X=T[0],J=T[1],$=T[2],nt=T[3];X=S(X,J,$,nt,y,7,E[0]),nt=S(nt,X,J,$,U,12,E[1]),$=S($,nt,X,J,N,17,E[2]),J=S(J,$,nt,X,L,22,E[3]),X=S(X,J,$,nt,Q,7,E[4]),nt=S(nt,X,J,$,I,12,E[5]),$=S($,nt,X,J,K,17,E[6]),J=S(J,$,nt,X,V,22,E[7]),X=S(X,J,$,nt,x,7,E[8]),nt=S(nt,X,J,$,P,12,E[9]),$=S($,nt,X,J,Z,17,E[10]),J=S(J,$,nt,X,k,22,E[11]),X=S(X,J,$,nt,at,7,E[12]),nt=S(nt,X,J,$,F,12,E[13]),$=S($,nt,X,J,lt,17,E[14]),J=S(J,$,nt,X,it,22,E[15]),X=G(X,J,$,nt,U,5,E[16]),nt=G(nt,X,J,$,K,9,E[17]),$=G($,nt,X,J,k,14,E[18]),J=G(J,$,nt,X,y,20,E[19]),X=G(X,J,$,nt,I,5,E[20]),nt=G(nt,X,J,$,Z,9,E[21]),$=G($,nt,X,J,it,14,E[22]),J=G(J,$,nt,X,Q,20,E[23]),X=G(X,J,$,nt,P,5,E[24]),nt=G(nt,X,J,$,lt,9,E[25]),$=G($,nt,X,J,L,14,E[26]),J=G(J,$,nt,X,x,20,E[27]),X=G(X,J,$,nt,F,5,E[28]),nt=G(nt,X,J,$,N,9,E[29]),$=G($,nt,X,J,V,14,E[30]),J=G(J,$,nt,X,at,20,E[31]),X=q(X,J,$,nt,I,4,E[32]),nt=q(nt,X,J,$,x,11,E[33]),$=q($,nt,X,J,k,16,E[34]),J=q(J,$,nt,X,lt,23,E[35]),X=q(X,J,$,nt,U,4,E[36]),nt=q(nt,X,J,$,Q,11,E[37]),$=q($,nt,X,J,V,16,E[38]),J=q(J,$,nt,X,Z,23,E[39]),X=q(X,J,$,nt,F,4,E[40]),nt=q(nt,X,J,$,y,11,E[41]),$=q($,nt,X,J,L,16,E[42]),J=q(J,$,nt,X,K,23,E[43]),X=q(X,J,$,nt,P,4,E[44]),nt=q(nt,X,J,$,at,11,E[45]),$=q($,nt,X,J,it,16,E[46]),J=q(J,$,nt,X,N,23,E[47]),X=H(X,J,$,nt,y,6,E[48]),nt=H(nt,X,J,$,V,10,E[49]),$=H($,nt,X,J,lt,15,E[50]),J=H(J,$,nt,X,I,21,E[51]),X=H(X,J,$,nt,at,6,E[52]),nt=H(nt,X,J,$,L,10,E[53]),$=H($,nt,X,J,Z,15,E[54]),J=H(J,$,nt,X,U,21,E[55]),X=H(X,J,$,nt,x,6,E[56]),nt=H(nt,X,J,$,it,10,E[57]),$=H($,nt,X,J,K,15,E[58]),J=H(J,$,nt,X,F,21,E[59]),X=H(X,J,$,nt,Q,6,E[60]),nt=H(nt,X,J,$,k,10,E[61]),$=H($,nt,X,J,N,15,E[62]),J=H(J,$,nt,X,P,21,E[63]),T[0]=T[0]+X|0,T[1]=T[1]+J|0,T[2]=T[2]+$|0,T[3]=T[3]+nt|0},_doFinalize:function(){var B=this._data,z=B.words,w=this._nDataBytes*8,M=B.sigBytes*8;z[M>>>5]|=128<<24-M%32;var A=f.floor(w/4294967296),T=w;z[(M+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,z[(M+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,B.sigBytes=(z.length+1)*4,this._process();for(var y=this._hash,U=y.words,N=0;N<4;N++){var L=U[N];U[N]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return y},clone:function(){var B=_.clone.call(this);return B._hash=this._hash.clone(),B}});function S(B,z,w,M,A,T,y){var U=B+(z&w|~z&M)+A+y;return(U<<T|U>>>32-T)+z}function G(B,z,w,M,A,T,y){var U=B+(z&M|w&~M)+A+y;return(U<<T|U>>>32-T)+z}function q(B,z,w,M,A,T,y){var U=B+(z^w^M)+A+y;return(U<<T|U>>>32-T)+z}function H(B,z,w,M,A,T,y){var U=B+(w^(z|~M))+A+y;return(U<<T|U>>>32-T)+z}p.MD5=_._createHelper(D),p.HmacMD5=_._createHmacHelper(D)})(Math),c.MD5})}),(function(s,r,o){var c;Object.defineProperty(r,"__esModule",{value:!0});var f=o(0),p=f.__importDefault(o(3)),g=f.__importStar(o(1)),b=f.__importDefault(o(8)),_=o(4),R=f.__importDefault(o(19)),E=f.__importDefault(o(17)),D=f.__importDefault(o(22)),S=f.__importDefault(o(2)),G=o(29),q=f.__importDefault(o(63)),H=o(14);function B(M){var A=M.statusCode;return A===408&&!M.code||A===400&&!M.code||A>=500&&A<=504}function z(M){var A=M.connection,T=A&&A.connectionManager.host;return T?[T].concat(b.default.getFallbackHosts(M.options)):b.default.getHosts(M.options)}var w=(c=(function(){function M(A){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=z,this.options=A||{};var T=this.options.connectivityCheckUrl||b.default.connectivityCheckUrl,y=this.options.connectivityCheckParams,U=!this.options.connectivityCheckUrl;p.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(N,L,Q,I,K,V,x){var P=E.default.createRequest(Q,I,K,V,D.default.REQ_SEND,L&&L.options.timeouts,N);return P.once("complete",x),P.exec(),P},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+T),this.doUri(R.default.Get,null,T,null,null,y,function(L,Q,I,K,V){var x=!1;U?x=!L&&(Q==null?void 0:Q.replace(/\n/,""))=="yes":x=!L&&(0,H.isSuccessCode)(V),S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+x),N(null,x)})}):p.default.Config.jsonpSupported?(this.Request=function(N,L,Q,I,K,V,x){var P=(0,G.createRequest)(Q,I,K,V,D.default.REQ_SEND,L&&L.options.timeouts,N);return P.once("complete",x),p.default.Config.nextTick(function(){P.exec()}),P},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){var L=this,Q=b.default.jsonpInternetUpUrl;if(this.checksInProgress){this.checksInProgress.push(N);return}this.checksInProgress=[N],S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+Q);var I=new G.Request("isTheInternetUp",Q,null,null,null,D.default.REQ_SEND,b.default.TIMEOUTS);I.once("complete",function(K,V){var x=!K&&V;S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+x);for(var P=0;P<L.checksInProgress.length;P++)L.checksInProgress[P](null,x);L.checksInProgress=null}),p.default.Config.nextTick(function(){I.exec()})}):p.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=q.default,this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+T),this.doUri(R.default.Get,null,T,null,null,null,function(L,Q){var I=!L&&(Q==null?void 0:Q.replace(/\n/,""))=="yes";S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+I),N(null,I)})}):this.Request=function(N,L,Q,I,K,V,x){x(new _.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return M.prototype.do=function(A,T,y,U,N,L,Q){var I=this,K=typeof y=="function"?y:function(Z){return T.baseUri(Z)+y},V=T._currentFallback;if(V)if(V.validUntil>g.now()){if(!this.Request){Q==null||Q(new _.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,K(V.host),U,L,N,function(Z){for(var k=[],at=1;at<arguments.length;at++)k[at-1]=arguments[at];if(Z&&B(Z)){T._currentFallback=null,I.do(A,T,y,U,N,L,Q);return}Q==null||Q.apply(void 0,f.__spreadArray([Z],k,!1))});return}else T._currentFallback=null;var x=z(T);if(x.length===1){this.doUri(A,T,K(x[0]),U,N,L,Q);return}var P=function(Z,k){var at=Z.shift();I.doUri(A,T,K(at),U,N,L,function(F){for(var lt=[],it=1;it<arguments.length;it++)lt[it-1]=arguments[it];if(F&&B(F)&&Z.length){P(Z,!0);return}k&&(T._currentFallback={host:at,validUntil:g.now()+T.options.timeouts.fallbackRetryTimeout}),Q==null||Q.apply(void 0,f.__spreadArray([F],lt,!1))})};P(x)},M.prototype.doUri=function(A,T,y,U,N,L,Q){if(!this.Request){Q(new _.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,y,U,L,N,Q)},M})(),c.methods=[R.default.Get,R.default.Delete,R.default.Post,R.default.Put,R.default.Patch],c.methodsWithoutBody=[R.default.Get,R.default.Delete],c.methodsWithBody=[R.default.Post,R.default.Put,R.default.Patch],c);r.default=w}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importStar(o(4)),p=c.__importDefault(o(3)),g=c.__importDefault(o(8)),b=c.__importStar(o(1)),_=o(1);function R(S,G){return!!G.get("x-ably-errorcode")}function E(S,G){if(R(S,G))return S.error&&f.default.fromValues(S.error)}function D(S,G,q,H,B,z,w){var M=new Headers(H||{}),A=S?S.toUpperCase():b.isEmptyArg(z)?"GET":"POST",T=new AbortController,y=setTimeout(function(){T.abort(),w(new f.PartialErrorInfo("Request timed out",null,408))},G?G.options.timeouts.httpRequestTimeout:g.default.TIMEOUTS.httpRequestTimeout),U={method:A,headers:M,body:z};p.default.Config.isWebworker||(U.credentials=M.has("authorization")?"include":"same-origin"),(0,_.getGlobalObject)().fetch(q+"?"+new URLSearchParams(B||{}),U).then(function(N){clearTimeout(y);var L=N.headers.get("Content-Type"),Q;L&&L.indexOf("application/x-msgpack")>-1?Q=N.arrayBuffer():L&&L.indexOf("application/json")>-1?Q=N.json():Q=N.text(),Q.then(function(I){var K=!!L&&L.indexOf("application/x-msgpack")===-1;if(N.ok)w(null,I,N.headers,K,N.status);else{var V=E(I,N.headers)||new f.PartialErrorInfo("Error response received from server: "+N.status+" body was: "+p.default.Config.inspect(I),null,N.status);w(V,I,N.headers,K,N.status)}})}).catch(function(N){clearTimeout(y),w(N)})}r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(41)),p=c.__importStar(o(1)),g=p.getGlobalObject();typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function b(){var D=g.location;return!g.WebSocket||!D||!D.origin||D.origin.indexOf("http")>-1}var _=g.navigator&&g.navigator.userAgent.toString(),R=g.location&&g.location.href,E={agent:"browser",logTimestamps:!0,userAgent:_,currentUrl:R,noUpgrade:_&&!!_.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:g.WebSocket,fetchSupported:!!g.fetch,xhrSupported:g.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:typeof document<"u",allowComet:b(),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:f.default,supportsBinary:!!g.TextDecoder,preferBinary:!1,ArrayBuffer:g.ArrayBuffer,atob:g.atob,nextTick:typeof g.setImmediate<"u"?g.setImmediate.bind(g):function(D){setTimeout(D,0)},addEventListener:g.addEventListener,inspect:JSON.stringify,stringByteSize:function(D){return g.TextDecoder&&new g.TextEncoder().encode(D).length||D.length},TextEncoder:g.TextEncoder,TextDecoder:g.TextDecoder,Promise:g.Promise,getRandomValues:(function(D){if(D!==void 0)return function(S,G){D.getRandomValues(S),G&&G(null)}})(g.crypto||msCrypto)};r.default=E}),(function(s,r,o){(function(c){Object.defineProperty(r,"__esModule",{value:!0});var f=o(0),p=f.__importStar(o(1)),g="ablyjs-storage-test",b=(function(){function _(){try{c.sessionStorage.setItem(g,g),c.sessionStorage.removeItem(g),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{c.localStorage.setItem(g,g),c.localStorage.removeItem(g),this.localSupported=!0}catch{this.localSupported=!1}}return _.prototype.get=function(R){return this._get(R,!1)},_.prototype.getSession=function(R){return this._get(R,!0)},_.prototype.remove=function(R){return this._remove(R,!1)},_.prototype.removeSession=function(R){return this._remove(R,!0)},_.prototype.set=function(R,E,D){return this._set(R,E,D,!1)},_.prototype.setSession=function(R,E,D){return this._set(R,E,D,!0)},_.prototype._set=function(R,E,D,S){var G={value:E};return D&&(G.expires=p.now()+D),this.storageInterface(S).setItem(R,JSON.stringify(G))},_.prototype._get=function(R,E){if(E&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!E&&!this.localSupported)throw new Error("Local Storage not supported");var D=this.storageInterface(E).getItem(R);if(!D)return null;var S=JSON.parse(D);return S.expires&&S.expires<p.now()?(this.storageInterface(E).removeItem(R),null):S.value},_.prototype._remove=function(R,E){return this.storageInterface(E).removeItem(R)},_.prototype.storageInterface=function(R){return R?c.sessionStorage:c.localStorage},_})();r.default=new b}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),f=c.__importDefault(o(67)),p={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[f.default.XhrPolling,f.default.XhrStreaming,f.default.JsonP,f.default.WebSocket],baseTransportOrder:[f.default.XhrPolling,f.default.XhrStreaming,f.default.JsonP,f.default.WebSocket],transportPreferenceOrder:[f.default.JsonP,f.default.XhrPolling,f.default.XhrStreaming,f.default.WebSocket],upgradeTransports:[f.default.XhrStreaming,f.default.WebSocket]};r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var c;(function(f){f.WebSocket="web_socket",f.Comet="comet",f.XhrStreaming="xhr_streaming",f.XhrPolling="xhr_polling",f.JsonP="jsonp"})(c||(c={})),r.default=c}),(function(s,r,o){o.r(r);var c=o(29),f=o.n(c),p=o(1),g=o(3),b=o.n(g),_=o(12),R=o.n(_),E=o(17),D=o.n(E),S=function(B){var z="xhr_polling";function w(M,A,T){T.stream=!1,R.a.call(this,M,A,T),this.shortName=z}return p.inherits(w,R.a),w.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.allowComet},w.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},w.prototype.createRequest=function(M,A,T,y,U){return D.a.createRequest(M,A,T,y,U,this.timeouts)},typeof B<"u"&&w.isAvailable()&&(B.supportedTransports[z]=w),w},G=S,q=function(B){var z="xhr_streaming";function w(M,A,T){R.a.call(this,M,A,T),this.shortName=z}return p.inherits(w,R.a),w.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.streamingSupported&&b.a.Config.allowComet},w.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},w.prototype.createRequest=function(M,A,T,y,U){return D.a.createRequest(M,A,T,y,U,this.timeouts)},typeof B<"u"&&w.isAvailable()&&(B.supportedTransports[z]=w),w},H=q;r.default=[f.a,G,H]})]).default})})(Rg)),Rg.exports}var L6=Qv();const Lr={width:800,height:600},q6=.65,P6=2.2,a0="studentCanvasPrefs",Og=2,Y6=({sharedImage:h,canvasWidth:n,canvasHeight:s})=>{const[r,o]=yt.useState(null);if(yt.useEffect(()=>{if(!h){o(null);return}const R=new window.Image;R.src=h.dataUrl,R.onload=()=>{o(R)}},[h]),!h||!r)return null;const c=h.width/h.height,f=n/s;let p,g,b,_;return c>f?(p=n,g=n/c,b=0,_=(s-g)/2):(g=s,p=s*c,b=(n-p)/2,_=0),et.jsx(Tp,{image:r,x:b,y:_,width:p,height:g,listening:!1})};function V6(){const[h]=sv(),n=h.get("room")||"demo",s=h.get("name")||"Anonymous",[r,o]=yt.useState(null),[c]=yt.useState(`student-${Math.random().toString(36).substr(2,9)}`),[f,p]=yt.useState(!1),[g,b]=yt.useState([]),[_,R]=yt.useState([]),[E,D]=yt.useState(null),[S,G]=yt.useState("pen"),[q,H]=yt.useState("black"),[B,z]=yt.useState(3),[w,M]=yt.useState(!1),[A,T]=yt.useState("stylus-only"),[y,U]=yt.useState("left");yt.useEffect(()=>{if(!(typeof window>"u")){console.log("🔵 [STUDENT] Loading preferences from localStorage...");try{const At=localStorage.getItem(a0);if(At){const Bt=JSON.parse(At);if(console.log("🔵 [STUDENT] Found stored preferences:",Bt),Bt.version!==Og){console.log("🔵 [STUDENT] Version mismatch! Expected:",Og,"Got:",Bt.version),console.log("🔵 [STUDENT] Clearing old preferences..."),localStorage.removeItem(a0);return}console.log("🔵 [STUDENT] Applying preferences..."),Bt.tool&&G(Bt.tool),Bt.color&&H(Bt.color),typeof Bt.brushSize=="number"&&z(Bt.brushSize),Bt.inputMode&&T(Bt.inputMode),Bt.toolbarPosition&&U(Bt.toolbarPosition),console.log("🔵 [STUDENT] Preferences loaded successfully!")}else console.log("🔵 [STUDENT] No stored preferences found, using defaults")}catch(At){console.warn("🔵 [STUDENT] Failed to load student prefs",At),localStorage.removeItem(a0)}}},[]),yt.useEffect(()=>{if(typeof window>"u")return;if(Q.current){Q.current=!1,console.log("💾 [STUDENT] Skipping save on first render");return}const At={version:Og,tool:S,color:q,brushSize:B,inputMode:A,toolbarPosition:y};console.log("💾 [STUDENT] Saving preferences to localStorage:",At),localStorage.setItem(a0,JSON.stringify(At))},[S,q,B,A,y]);const N=yt.useRef([]),L=yt.useRef([]),Q=yt.useRef(!0),I=yt.useRef(!1),K=yt.useRef(!1),V=yt.useRef(null),[x,P]=yt.useState(Lr),Z=yt.useMemo(()=>Lr.width?x.width/Lr.width:1,[x.width]);yt.useEffect(()=>{(async()=>{try{const Bt=new L6.Realtime({authUrl:"/api/token",authParams:{clientId:c}});Bt.connection.on("connected",()=>{console.log("Connected to Ably"),p(!0)}),Bt.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),p(!1)});const $t=Bt.channels.get(`room-${n}`);return $t.subscribe("student-layer",kt=>{kt.clientId===c&&(I.current=!0,b(kt.data.lines||[]),setTimeout(()=>{I.current=!1},100))}),$t.subscribe("teacher-annotation",kt=>{kt.data.targetStudentId===c&&(I.current=!0,R(kt.data.annotations||[]),setTimeout(()=>{I.current=!1},100))}),$t.subscribe("teacher-image",kt=>{var _t,jt,ve,ne;D({dataUrl:(_t=kt.data)==null?void 0:_t.dataUrl,width:(jt=kt.data)==null?void 0:jt.width,height:(ve=kt.data)==null?void 0:ve.height,timestamp:(ne=kt.data)==null?void 0:ne.timestamp})}),$t.subscribe("teacher-template",kt=>{var _t,jt,ve,ne,ue;D({dataUrl:(_t=kt.data)==null?void 0:_t.dataUrl,width:(jt=kt.data)==null?void 0:jt.width,height:(ve=kt.data)==null?void 0:ve.height,type:(ne=kt.data)==null?void 0:ne.type,timestamp:(ue=kt.data)==null?void 0:ue.timestamp})}),$t.subscribe("teacher-clear",kt=>{D(null)}),$t.subscribe("clear-all-drawings",kt=>{console.log("📝 Clearing all drawings (teacher sent new content)"),I.current=!0,b([]),R([]),setTimeout(()=>{I.current=!1},100)}),$t.presence.enter({name:s}),console.log(`Joined room ${n} as ${s}`),o($t),()=>{Bt.close()}}catch(Bt){console.error("Failed to initialize Ably:",Bt)}})()},[c,n]),yt.useEffect(()=>{const At=V.current;if(!At)return;const Bt=()=>{if(!V.current)return;const kt=V.current.getBoundingClientRect(),_t=48,jt=Math.max(320,kt.width-_t),ve=Math.max(240,kt.height-_t),ne=jt/Lr.width,ue=ve/Lr.height,we=Math.min(ne,ue),Ae=Math.max(q6,Math.min(P6,we)),on=Math.round(Ae*20)/20;P({width:Math.round(Lr.width*on),height:Math.round(Lr.height*on)})};Bt(),window.addEventListener("resize",Bt);let $t;return window.ResizeObserver&&($t=new ResizeObserver(()=>Bt()),$t.observe(At)),()=>{window.removeEventListener("resize",Bt),$t&&$t.disconnect()}},[y]),yt.useEffect(()=>{if(!I.current&&r){const At=setTimeout(()=>{r.publish("student-layer",{lines:g,clientId:c,meta:{base:Lr,display:x,scale:Z}}),console.log("Published student layer:",g.length,"lines")},150);return()=>clearTimeout(At)}},[g,r,c,x,Z]);const k=At=>A!=="stylus-only"?!0:(At==null?void 0:At.pointerType)==="pen",at=At=>{const Bt=At.evt;if(!k(Bt)){Bt!=null&&Bt.preventDefault&&Bt.preventDefault();return}if(S==="pen"){M(!0);const $t=At.target.getStage().getPointerPosition(),kt=$t.x/Z,_t=$t.y/Z,jt={tool:S,points:[kt,_t],color:q,strokeWidth:B/Z};N.current.push([...g]),L.current=[],b([...g,jt])}else S==="eraser"&&(M(!0),K.current=!1);Bt.preventDefault&&Bt.preventDefault()},F=At=>{if(!w)return;const Bt=At.evt;if(!k(Bt)){Bt!=null&&Bt.preventDefault&&Bt.preventDefault();return}const kt=At.target.getStage().getPointerPosition();if(S==="pen"){const _t=g[g.length-1];if(_t){const jt=kt.x/Z,ve=kt.y/Z,ne={..._t,points:[..._t.points,jt,ve]};b([...g.slice(0,-1),ne])}}else if(S==="eraser"){const _t=g.length,jt=kt.x,ve=kt.y,ne=20,ue=g.filter(we=>{for(let Ae=0;Ae<we.points.length;Ae+=2){const on=we.points[Ae]*Z,Tn=we.points[Ae+1]*Z;if(Math.sqrt(Math.pow(on-jt,2)+Math.pow(Tn-ve,2))<ne)return!1}return!0});ue.length<_t&&!K.current&&(N.current.push([...g]),L.current=[],K.current=!0),b(ue)}Bt!=null&&Bt.preventDefault&&Bt.preventDefault()},lt=At=>{const Bt=At==null?void 0:At.evt;if(!k(Bt)){Bt!=null&&Bt.preventDefault&&Bt.preventDefault();return}M(!1)},it=()=>{if(N.current.length>0){const At=N.current.pop();L.current.push([...g]),b(At)}},X=()=>{if(L.current.length>0){const At=L.current.pop();N.current.push([...g]),b(At)}},J=async()=>{N.current.push([...g]),L.current=[],b([]),r&&(await r.publish("student-layer",{lines:[],clientId:c,meta:{base:Lr,display:x,scale:Z}}),console.log("Published student clear"))},$=()=>{var At;return((At=c.split("-")[1])==null?void 0:At.substring(0,3))||c},nt=()=>{T(At=>At==="stylus-only"?"all":"stylus-only")},gt=()=>{U(At=>At==="left"?"right":"left")},Rt=()=>`Connected as ${s!=="Anonymous"?s:$()}`,Ht=f?"Connected":"Reconnecting…",Kt=f?"online":"offline",Ft=At=>At.map((Bt,$t)=>Bt*Z),fe=At=>(At.strokeWidth||3)*Z;return et.jsx("div",{className:"student-canvas-page",children:et.jsxs("div",{className:"student-canvas-container",children:[et.jsxs("div",{className:"student-status-bar",children:[et.jsxs("div",{className:"student-status-text",children:[et.jsx("h1",{children:"Student Canvas"}),et.jsx("p",{children:Rt()})]}),et.jsxs("div",{className:"student-status-actions",children:[et.jsx("div",{className:"tool-status-indicator",children:et.jsxs("span",{className:"tool-status-text",children:[S==="pen"?"🖊️":"🧽"," ",A==="all"?"All inputs":"Stylus only"]})}),et.jsxs("div",{className:`connection-pill ${Kt}`,"aria-live":"polite",children:[et.jsx("span",{className:"connection-indicator-dot"}),et.jsx("span",{children:Ht})]}),et.jsxs("button",{className:"move-toolbar-btn",onClick:gt,children:["Move toolbar to ",y==="left"?"right":"left"]})]})]}),et.jsxs("div",{className:`student-workspace ${y==="right"?"toolbar-right":""}`,children:[et.jsxs("div",{className:"student-sidebar",children:[et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"COLORS"}),et.jsxs("div",{className:"color-buttons",children:[et.jsx("button",{onClick:()=>H("black"),className:`color-button ${q==="black"?"active":""}`,style:{background:"black"},"aria-label":"Black"}),et.jsx("button",{onClick:()=>H("#0066FF"),className:`color-button ${q==="#0066FF"?"active":""}`,style:{background:"#0066FF"},"aria-label":"Blue"}),et.jsx("button",{onClick:()=>H("#00AA00"),className:`color-button ${q==="#00AA00"?"active":""}`,style:{background:"#00AA00"},"aria-label":"Green"})]})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),et.jsxs("div",{className:"tool-buttons tool-icon-buttons",children:[et.jsxs("button",{onClick:()=>G("pen"),className:`tool-icon-button ${S==="pen"?"active":""}`,title:"Pen",children:[et.jsx("span",{className:"tool-icon",children:"🖊️"}),et.jsx("span",{className:"tool-label",children:"Pen"})]}),et.jsxs("button",{onClick:()=>G("eraser"),className:`tool-icon-button ${S==="eraser"?"active":""}`,title:"Eraser",children:[et.jsx("span",{className:"tool-icon",children:"🧽"}),et.jsx("span",{className:"tool-label",children:"Eraser"})]})]})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),et.jsx("div",{className:"brush-size-control",children:et.jsxs("div",{className:"brush-slider-container",children:[et.jsx("input",{type:"range",min:"1",max:"10",value:B,onChange:At=>z(parseInt(At.target.value)),className:"brush-slider"}),et.jsx("span",{className:"brush-value",children:B})]})})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),et.jsx("button",{className:`input-mode-toggle ${A==="all"?"all-inputs":""}`,onClick:nt,children:A==="stylus-only"?"Stylus mode (pen only)":"All inputs"})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),et.jsxs("div",{className:"history-buttons",children:[et.jsx("button",{onClick:it,className:"history-button",disabled:N.current.length===0,children:"Undo"}),et.jsx("button",{onClick:X,className:"history-button",disabled:L.current.length===0,children:"Redo"}),et.jsx("button",{onClick:J,className:"history-button danger",children:"Clear"})]})]})]}),et.jsx("div",{className:"student-canvas-panel",ref:V,children:et.jsx("div",{className:"student-canvas-frame",children:et.jsx("div",{className:"student-canvas-surface",style:{width:`${x.width}px`,height:`${x.height}px`},children:et.jsxs(Ap,{width:x.width,height:x.height,onPointerDown:at,onPointerMove:F,onPointerUp:lt,onPointerLeave:lt,className:"canvas-stage",style:{touchAction:"none"},children:[et.jsx(Pr,{listening:!1,children:et.jsx(Y6,{sharedImage:E,canvasWidth:x.width,canvasHeight:x.height})}),et.jsx(Pr,{children:g.map((At,Bt)=>et.jsx(Ec,{points:Ft(At.points),stroke:At.color,strokeWidth:fe(At),tension:.5,lineCap:"round",lineJoin:"round"},`student-${Bt}`))}),et.jsx(Pr,{listening:!1,children:_.map((At,Bt)=>et.jsx(Ec,{points:Ft(At.points),stroke:At.color,strokeWidth:fe(At),tension:.5,lineCap:"round",lineJoin:"round"},`teacher-${Bt}`))})]})})})})]})]})})}var Mg,Sm;function X6(){if(Sm)return Mg;Sm=1;function h(c){return typeof c=="string"&&(c=c.indexOf(":")==-1?{token:c}:{key:c}),c.promises=!0,c}var n=Qv(),s=function(c,f,p,g){return new n.ErrorInfo(c,f,p,g)},r=function(c){return new n.Rest(h(c))};Object.assign(r,n.Rest);var o=function(c){return new n.Realtime(h(c))};return Object.assign(o,n.Realtime),Mg={ErrorInfo:s,Rest:r,Realtime:o},Mg}var I6=X6();const Q6=vh(I6);var mc={},xg,bm;function K6(){return bm||(bm=1,xg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),xg}var Ng={},Us={},Cm;function Vo(){if(Cm)return Us;Cm=1;let h;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Us.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Us.getSymbolTotalCodewords=function(r){return n[r]},Us.getBCHDigit=function(s){let r=0;for(;s!==0;)r++,s>>>=1;return r},Us.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');h=r},Us.isKanjiModeEnabled=function(){return typeof h<"u"},Us.toSJIS=function(r){return h(r)},Us}var Dg={},Em;function _p(){return Em||(Em=1,(function(h){h.L={bit:1},h.M={bit:0},h.Q={bit:3},h.H={bit:2};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return h.L;case"m":case"medium":return h.M;case"q":case"quartile":return h.Q;case"h":case"high":return h.H;default:throw new Error("Unknown EC Level: "+s)}}h.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},h.from=function(r,o){if(h.isValid(r))return r;try{return n(r)}catch{return o}}})(Dg)),Dg}var Ug,Tm;function Z6(){if(Tm)return Ug;Tm=1;function h(){this.buffer=[],this.length=0}return h.prototype={get:function(n){const s=Math.floor(n/8);return(this.buffer[s]>>>7-n%8&1)===1},put:function(n,s){for(let r=0;r<s;r++)this.putBit((n>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),n&&(this.buffer[s]|=128>>>this.length%8),this.length++}},Ug=h,Ug}var zg,Am;function J6(){if(Am)return zg;Am=1;function h(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}return h.prototype.set=function(n,s,r,o){const c=n*this.size+s;this.data[c]=r,o&&(this.reservedBit[c]=!0)},h.prototype.get=function(n,s){return this.data[n*this.size+s]},h.prototype.xor=function(n,s,r){this.data[n*this.size+s]^=r},h.prototype.isReserved=function(n,s){return this.reservedBit[n*this.size+s]},zg=h,zg}var Bg={},_m;function F6(){return _m||(_m=1,(function(h){const n=Vo().getSymbolSize;h.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,c=n(r),f=c===145?26:Math.ceil((c-13)/(2*o-2))*2,p=[c-7];for(let g=1;g<o-1;g++)p[g]=p[g-1]-f;return p.push(6),p.reverse()},h.getPositions=function(r){const o=[],c=h.getRowColCoords(r),f=c.length;for(let p=0;p<f;p++)for(let g=0;g<f;g++)p===0&&g===0||p===0&&g===f-1||p===f-1&&g===0||o.push([c[p],c[g]]);return o}})(Bg)),Bg}var Gg={},Rm;function k6(){if(Rm)return Gg;Rm=1;const h=Vo().getSymbolSize,n=7;return Gg.getPositions=function(r){const o=h(r);return[[0,0],[o-n,0],[0,o-n]]},Gg}var wg={},Om;function W6(){return Om||(Om=1,(function(h){h.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};h.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},h.from=function(o){return h.isValid(o)?parseInt(o,10):void 0},h.getPenaltyN1=function(o){const c=o.size;let f=0,p=0,g=0,b=null,_=null;for(let R=0;R<c;R++){p=g=0,b=_=null;for(let E=0;E<c;E++){let D=o.get(R,E);D===b?p++:(p>=5&&(f+=n.N1+(p-5)),b=D,p=1),D=o.get(E,R),D===_?g++:(g>=5&&(f+=n.N1+(g-5)),_=D,g=1)}p>=5&&(f+=n.N1+(p-5)),g>=5&&(f+=n.N1+(g-5))}return f},h.getPenaltyN2=function(o){const c=o.size;let f=0;for(let p=0;p<c-1;p++)for(let g=0;g<c-1;g++){const b=o.get(p,g)+o.get(p,g+1)+o.get(p+1,g)+o.get(p+1,g+1);(b===4||b===0)&&f++}return f*n.N2},h.getPenaltyN3=function(o){const c=o.size;let f=0,p=0,g=0;for(let b=0;b<c;b++){p=g=0;for(let _=0;_<c;_++)p=p<<1&2047|o.get(b,_),_>=10&&(p===1488||p===93)&&f++,g=g<<1&2047|o.get(_,b),_>=10&&(g===1488||g===93)&&f++}return f*n.N3},h.getPenaltyN4=function(o){let c=0;const f=o.data.length;for(let g=0;g<f;g++)c+=o.data[g];return Math.abs(Math.ceil(c*100/f/5)-10)*n.N4};function s(r,o,c){switch(r){case h.Patterns.PATTERN000:return(o+c)%2===0;case h.Patterns.PATTERN001:return o%2===0;case h.Patterns.PATTERN010:return c%3===0;case h.Patterns.PATTERN011:return(o+c)%3===0;case h.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2===0;case h.Patterns.PATTERN101:return o*c%2+o*c%3===0;case h.Patterns.PATTERN110:return(o*c%2+o*c%3)%2===0;case h.Patterns.PATTERN111:return(o*c%3+(o+c)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}h.applyMask=function(o,c){const f=c.size;for(let p=0;p<f;p++)for(let g=0;g<f;g++)c.isReserved(g,p)||c.xor(g,p,s(o,g,p))},h.getBestMask=function(o,c){const f=Object.keys(h.Patterns).length;let p=0,g=1/0;for(let b=0;b<f;b++){c(b),h.applyMask(b,o);const _=h.getPenaltyN1(o)+h.getPenaltyN2(o)+h.getPenaltyN3(o)+h.getPenaltyN4(o);h.applyMask(b,o),_<g&&(g=_,p=b)}return p}})(wg)),wg}var i0={},Mm;function Kv(){if(Mm)return i0;Mm=1;const h=_p(),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return i0.getBlocksCount=function(o,c){switch(c){case h.L:return n[(o-1)*4+0];case h.M:return n[(o-1)*4+1];case h.Q:return n[(o-1)*4+2];case h.H:return n[(o-1)*4+3];default:return}},i0.getTotalCodewordsCount=function(o,c){switch(c){case h.L:return s[(o-1)*4+0];case h.M:return s[(o-1)*4+1];case h.Q:return s[(o-1)*4+2];case h.H:return s[(o-1)*4+3];default:return}},i0}var Hg={},ih={},xm;function $6(){if(xm)return ih;xm=1;const h=new Uint8Array(512),n=new Uint8Array(256);return(function(){let r=1;for(let o=0;o<255;o++)h[o]=r,n[r]=o,r<<=1,r&256&&(r^=285);for(let o=255;o<512;o++)h[o]=h[o-255]})(),ih.log=function(r){if(r<1)throw new Error("log("+r+")");return n[r]},ih.exp=function(r){return h[r]},ih.mul=function(r,o){return r===0||o===0?0:h[n[r]+n[o]]},ih}var Nm;function t8(){return Nm||(Nm=1,(function(h){const n=$6();h.mul=function(r,o){const c=new Uint8Array(r.length+o.length-1);for(let f=0;f<r.length;f++)for(let p=0;p<o.length;p++)c[f+p]^=n.mul(r[f],o[p]);return c},h.mod=function(r,o){let c=new Uint8Array(r);for(;c.length-o.length>=0;){const f=c[0];for(let g=0;g<o.length;g++)c[g]^=n.mul(o[g],f);let p=0;for(;p<c.length&&c[p]===0;)p++;c=c.slice(p)}return c},h.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let c=0;c<r;c++)o=h.mul(o,new Uint8Array([1,n.exp(c)]));return o}})(Hg)),Hg}var jg,Dm;function e8(){if(Dm)return jg;Dm=1;const h=t8();function n(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return n.prototype.initialize=function(r){this.degree=r,this.genPoly=h.generateECPolynomial(this.degree)},n.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(r.length+this.degree);o.set(r);const c=h.mod(o,this.genPoly),f=this.degree-c.length;if(f>0){const p=new Uint8Array(this.degree);return p.set(c,f),p}return c},jg=n,jg}var Lg={},qg={},Pg={},Um;function Zv(){return Um||(Um=1,Pg.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}),Pg}var Yl={},zm;function Jv(){if(zm)return Yl;zm=1;const h="[0-9]+",n="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;Yl.KANJI=new RegExp(s,"g"),Yl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Yl.BYTE=new RegExp(r,"g"),Yl.NUMERIC=new RegExp(h,"g"),Yl.ALPHANUMERIC=new RegExp(n,"g");const o=new RegExp("^"+s+"$"),c=new RegExp("^"+h+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Yl.testKanji=function(g){return o.test(g)},Yl.testNumeric=function(g){return c.test(g)},Yl.testAlphanumeric=function(g){return f.test(g)},Yl}var Bm;function Xo(){return Bm||(Bm=1,(function(h){const n=Zv(),s=Jv();h.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},h.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},h.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},h.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},h.MIXED={bit:-1},h.getCharCountIndicator=function(c,f){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!n.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?c.ccBits[0]:f<27?c.ccBits[1]:c.ccBits[2]},h.getBestModeForData=function(c){return s.testNumeric(c)?h.NUMERIC:s.testAlphanumeric(c)?h.ALPHANUMERIC:s.testKanji(c)?h.KANJI:h.BYTE},h.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},h.isValid=function(c){return c&&c.bit&&c.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return h.NUMERIC;case"alphanumeric":return h.ALPHANUMERIC;case"kanji":return h.KANJI;case"byte":return h.BYTE;default:throw new Error("Unknown mode: "+o)}}h.from=function(c,f){if(h.isValid(c))return c;try{return r(c)}catch{return f}}})(qg)),qg}var Gm;function n8(){return Gm||(Gm=1,(function(h){const n=Vo(),s=Kv(),r=_p(),o=Xo(),c=Zv(),f=7973,p=n.getBCHDigit(f);function g(E,D,S){for(let G=1;G<=40;G++)if(D<=h.getCapacity(G,S,E))return G}function b(E,D){return o.getCharCountIndicator(E,D)+4}function _(E,D){let S=0;return E.forEach(function(G){const q=b(G.mode,D);S+=q+G.getBitsLength()}),S}function R(E,D){for(let S=1;S<=40;S++)if(_(E,S)<=h.getCapacity(S,D,o.MIXED))return S}h.from=function(D,S){return c.isValid(D)?parseInt(D,10):S},h.getCapacity=function(D,S,G){if(!c.isValid(D))throw new Error("Invalid QR Code version");typeof G>"u"&&(G=o.BYTE);const q=n.getSymbolTotalCodewords(D),H=s.getTotalCodewordsCount(D,S),B=(q-H)*8;if(G===o.MIXED)return B;const z=B-b(G,D);switch(G){case o.NUMERIC:return Math.floor(z/10*3);case o.ALPHANUMERIC:return Math.floor(z/11*2);case o.KANJI:return Math.floor(z/13);case o.BYTE:default:return Math.floor(z/8)}},h.getBestVersionForData=function(D,S){let G;const q=r.from(S,r.M);if(Array.isArray(D)){if(D.length>1)return R(D,q);if(D.length===0)return 1;G=D[0]}else G=D;return g(G.mode,G.getLength(),q)},h.getEncodedBits=function(D){if(!c.isValid(D)||D<7)throw new Error("Invalid QR Code version");let S=D<<12;for(;n.getBCHDigit(S)-p>=0;)S^=f<<n.getBCHDigit(S)-p;return D<<12|S}})(Lg)),Lg}var Yg={},wm;function a8(){if(wm)return Yg;wm=1;const h=Vo(),n=1335,s=21522,r=h.getBCHDigit(n);return Yg.getEncodedBits=function(c,f){const p=c.bit<<3|f;let g=p<<10;for(;h.getBCHDigit(g)-r>=0;)g^=n<<h.getBCHDigit(g)-r;return(p<<10|g)^s},Yg}var Vg={},Xg,Hm;function i8(){if(Hm)return Xg;Hm=1;const h=Xo();function n(s){this.mode=h.NUMERIC,this.data=s.toString()}return n.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let o,c,f;for(o=0;o+3<=this.data.length;o+=3)c=this.data.substr(o,3),f=parseInt(c,10),r.put(f,10);const p=this.data.length-o;p>0&&(c=this.data.substr(o),f=parseInt(c,10),r.put(f,p*3+1))},Xg=n,Xg}var Ig,jm;function l8(){if(jm)return Ig;jm=1;const h=Xo(),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(r){this.mode=h.ALPHANUMERIC,this.data=r}return s.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){let c;for(c=0;c+2<=this.data.length;c+=2){let f=n.indexOf(this.data[c])*45;f+=n.indexOf(this.data[c+1]),o.put(f,11)}this.data.length%2&&o.put(n.indexOf(this.data[c]),6)},Ig=s,Ig}var Qg,Lm;function r8(){if(Lm)return Qg;Lm=1;const h=Xo();function n(s){this.mode=h.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return n.getBitsLength=function(r){return r*8},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){for(let r=0,o=this.data.length;r<o;r++)s.put(this.data[r],8)},Qg=n,Qg}var Kg,qm;function s8(){if(qm)return Kg;qm=1;const h=Xo(),n=Vo();function s(r){this.mode=h.KANJI,this.data=r}return s.getBitsLength=function(o){return o*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(r){let o;for(o=0;o<this.data.length;o++){let c=n.toSJIS(this.data[o]);if(c>=33088&&c<=40956)c-=33088;else if(c>=57408&&c<=60351)c-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);c=(c>>>8&255)*192+(c&255),r.put(c,13)}},Kg=s,Kg}var Zg={exports:{}},Pm;function o8(){return Pm||(Pm=1,(function(h){var n={single_source_shortest_paths:function(s,r,o){var c={},f={};f[r]=0;var p=n.PriorityQueue.make();p.push(r,0);for(var g,b,_,R,E,D,S,G,q;!p.empty();){g=p.pop(),b=g.value,R=g.cost,E=s[b]||{};for(_ in E)E.hasOwnProperty(_)&&(D=E[_],S=R+D,G=f[_],q=typeof f[_]>"u",(q||G>S)&&(f[_]=S,p.push(_,S),c[_]=b))}if(typeof o<"u"&&typeof f[o]>"u"){var H=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(H)}return c},extract_shortest_path_from_predecessor_list:function(s,r){for(var o=[],c=r;c;)o.push(c),s[c],c=s[c];return o.reverse(),o},find_path:function(s,r,o){var c=n.single_source_shortest_paths(s,r,o);return n.extract_shortest_path_from_predecessor_list(c,o)},PriorityQueue:{make:function(s){var r=n.PriorityQueue,o={},c;s=s||{};for(c in r)r.hasOwnProperty(c)&&(o[c]=r[c]);return o.queue=[],o.sorter=s.sorter||r.default_sorter,o},default_sorter:function(s,r){return s.cost-r.cost},push:function(s,r){var o={value:s,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};h.exports=n})(Zg)),Zg.exports}var Ym;function u8(){return Ym||(Ym=1,(function(h){const n=Xo(),s=i8(),r=l8(),o=r8(),c=s8(),f=Jv(),p=Vo(),g=o8();function b(H){return unescape(encodeURIComponent(H)).length}function _(H,B,z){const w=[];let M;for(;(M=H.exec(z))!==null;)w.push({data:M[0],index:M.index,mode:B,length:M[0].length});return w}function R(H){const B=_(f.NUMERIC,n.NUMERIC,H),z=_(f.ALPHANUMERIC,n.ALPHANUMERIC,H);let w,M;return p.isKanjiModeEnabled()?(w=_(f.BYTE,n.BYTE,H),M=_(f.KANJI,n.KANJI,H)):(w=_(f.BYTE_KANJI,n.BYTE,H),M=[]),B.concat(z,w,M).sort(function(T,y){return T.index-y.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function E(H,B){switch(B){case n.NUMERIC:return s.getBitsLength(H);case n.ALPHANUMERIC:return r.getBitsLength(H);case n.KANJI:return c.getBitsLength(H);case n.BYTE:return o.getBitsLength(H)}}function D(H){return H.reduce(function(B,z){const w=B.length-1>=0?B[B.length-1]:null;return w&&w.mode===z.mode?(B[B.length-1].data+=z.data,B):(B.push(z),B)},[])}function S(H){const B=[];for(let z=0;z<H.length;z++){const w=H[z];switch(w.mode){case n.NUMERIC:B.push([w,{data:w.data,mode:n.ALPHANUMERIC,length:w.length},{data:w.data,mode:n.BYTE,length:w.length}]);break;case n.ALPHANUMERIC:B.push([w,{data:w.data,mode:n.BYTE,length:w.length}]);break;case n.KANJI:B.push([w,{data:w.data,mode:n.BYTE,length:b(w.data)}]);break;case n.BYTE:B.push([{data:w.data,mode:n.BYTE,length:b(w.data)}])}}return B}function G(H,B){const z={},w={start:{}};let M=["start"];for(let A=0;A<H.length;A++){const T=H[A],y=[];for(let U=0;U<T.length;U++){const N=T[U],L=""+A+U;y.push(L),z[L]={node:N,lastCount:0},w[L]={};for(let Q=0;Q<M.length;Q++){const I=M[Q];z[I]&&z[I].node.mode===N.mode?(w[I][L]=E(z[I].lastCount+N.length,N.mode)-E(z[I].lastCount,N.mode),z[I].lastCount+=N.length):(z[I]&&(z[I].lastCount=N.length),w[I][L]=E(N.length,N.mode)+4+n.getCharCountIndicator(N.mode,B))}}M=y}for(let A=0;A<M.length;A++)w[M[A]].end=0;return{map:w,table:z}}function q(H,B){let z;const w=n.getBestModeForData(H);if(z=n.from(B,w),z!==n.BYTE&&z.bit<w.bit)throw new Error('"'+H+'" cannot be encoded with mode '+n.toString(z)+`.
 Suggested mode is: `+n.toString(w));switch(z===n.KANJI&&!p.isKanjiModeEnabled()&&(z=n.BYTE),z){case n.NUMERIC:return new s(H);case n.ALPHANUMERIC:return new r(H);case n.KANJI:return new c(H);case n.BYTE:return new o(H)}}h.fromArray=function(B){return B.reduce(function(z,w){return typeof w=="string"?z.push(q(w,null)):w.data&&z.push(q(w.data,w.mode)),z},[])},h.fromString=function(B,z){const w=R(B,p.isKanjiModeEnabled()),M=S(w),A=G(M,z),T=g.find_path(A.map,"start","end"),y=[];for(let U=1;U<T.length-1;U++)y.push(A.table[T[U]].node);return h.fromArray(D(y))},h.rawSplit=function(B){return h.fromArray(R(B,p.isKanjiModeEnabled()))}})(Vg)),Vg}var Vm;function c8(){if(Vm)return Ng;Vm=1;const h=Vo(),n=_p(),s=Z6(),r=J6(),o=F6(),c=k6(),f=W6(),p=Kv(),g=e8(),b=n8(),_=a8(),R=Xo(),E=u8();function D(A,T){const y=A.size,U=c.getPositions(T);for(let N=0;N<U.length;N++){const L=U[N][0],Q=U[N][1];for(let I=-1;I<=7;I++)if(!(L+I<=-1||y<=L+I))for(let K=-1;K<=7;K++)Q+K<=-1||y<=Q+K||(I>=0&&I<=6&&(K===0||K===6)||K>=0&&K<=6&&(I===0||I===6)||I>=2&&I<=4&&K>=2&&K<=4?A.set(L+I,Q+K,!0,!0):A.set(L+I,Q+K,!1,!0))}}function S(A){const T=A.size;for(let y=8;y<T-8;y++){const U=y%2===0;A.set(y,6,U,!0),A.set(6,y,U,!0)}}function G(A,T){const y=o.getPositions(T);for(let U=0;U<y.length;U++){const N=y[U][0],L=y[U][1];for(let Q=-2;Q<=2;Q++)for(let I=-2;I<=2;I++)Q===-2||Q===2||I===-2||I===2||Q===0&&I===0?A.set(N+Q,L+I,!0,!0):A.set(N+Q,L+I,!1,!0)}}function q(A,T){const y=A.size,U=b.getEncodedBits(T);let N,L,Q;for(let I=0;I<18;I++)N=Math.floor(I/3),L=I%3+y-8-3,Q=(U>>I&1)===1,A.set(N,L,Q,!0),A.set(L,N,Q,!0)}function H(A,T,y){const U=A.size,N=_.getEncodedBits(T,y);let L,Q;for(L=0;L<15;L++)Q=(N>>L&1)===1,L<6?A.set(L,8,Q,!0):L<8?A.set(L+1,8,Q,!0):A.set(U-15+L,8,Q,!0),L<8?A.set(8,U-L-1,Q,!0):L<9?A.set(8,15-L-1+1,Q,!0):A.set(8,15-L-1,Q,!0);A.set(U-8,8,1,!0)}function B(A,T){const y=A.size;let U=-1,N=y-1,L=7,Q=0;for(let I=y-1;I>0;I-=2)for(I===6&&I--;;){for(let K=0;K<2;K++)if(!A.isReserved(N,I-K)){let V=!1;Q<T.length&&(V=(T[Q]>>>L&1)===1),A.set(N,I-K,V),L--,L===-1&&(Q++,L=7)}if(N+=U,N<0||y<=N){N-=U,U=-U;break}}}function z(A,T,y){const U=new s;y.forEach(function(K){U.put(K.mode.bit,4),U.put(K.getLength(),R.getCharCountIndicator(K.mode,A)),K.write(U)});const N=h.getSymbolTotalCodewords(A),L=p.getTotalCodewordsCount(A,T),Q=(N-L)*8;for(U.getLengthInBits()+4<=Q&&U.put(0,4);U.getLengthInBits()%8!==0;)U.putBit(0);const I=(Q-U.getLengthInBits())/8;for(let K=0;K<I;K++)U.put(K%2?17:236,8);return w(U,A,T)}function w(A,T,y){const U=h.getSymbolTotalCodewords(T),N=p.getTotalCodewordsCount(T,y),L=U-N,Q=p.getBlocksCount(T,y),I=U%Q,K=Q-I,V=Math.floor(U/Q),x=Math.floor(L/Q),P=x+1,Z=V-x,k=new g(Z);let at=0;const F=new Array(Q),lt=new Array(Q);let it=0;const X=new Uint8Array(A.buffer);for(let Rt=0;Rt<Q;Rt++){const Ht=Rt<K?x:P;F[Rt]=X.slice(at,at+Ht),lt[Rt]=k.encode(F[Rt]),at+=Ht,it=Math.max(it,Ht)}const J=new Uint8Array(U);let $=0,nt,gt;for(nt=0;nt<it;nt++)for(gt=0;gt<Q;gt++)nt<F[gt].length&&(J[$++]=F[gt][nt]);for(nt=0;nt<Z;nt++)for(gt=0;gt<Q;gt++)J[$++]=lt[gt][nt];return J}function M(A,T,y,U){let N;if(Array.isArray(A))N=E.fromArray(A);else if(typeof A=="string"){let V=T;if(!V){const x=E.rawSplit(A);V=b.getBestVersionForData(x,y)}N=E.fromString(A,V||40)}else throw new Error("Invalid data");const L=b.getBestVersionForData(N,y);if(!L)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=L;else if(T<L)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+L+`.
`);const Q=z(T,y,N),I=h.getSymbolSize(T),K=new r(I);return D(K,T),S(K),G(K,T),H(K,y,0),T>=7&&q(K,T),B(K,Q),isNaN(U)&&(U=f.getBestMask(K,H.bind(null,K,y))),f.applyMask(U,K),H(K,y,U),{modules:K,version:T,errorCorrectionLevel:y,maskPattern:U,segments:N}}return Ng.create=function(T,y){if(typeof T>"u"||T==="")throw new Error("No input text");let U=n.M,N,L;return typeof y<"u"&&(U=n.from(y.errorCorrectionLevel,n.M),N=b.from(y.version),L=f.from(y.maskPattern),y.toSJISFunc&&h.setToSJISFunction(y.toSJISFunc)),M(T,N,U,L)},Ng}var Jg={},Fg={},Xm;function Fv(){return Xm||(Xm=1,(function(h){function n(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let r=s.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+s);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(c){return[c,c]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}h.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,c=r.width&&r.width>=21?r.width:void 0,f=r.scale||4;return{width:c,scale:c?4:f,margin:o,color:{dark:n(r.color.dark||"#000000ff"),light:n(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},h.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},h.getImageWidth=function(r,o){const c=h.getScale(r,o);return Math.floor((r+o.margin*2)*c)},h.qrToImageData=function(r,o,c){const f=o.modules.size,p=o.modules.data,g=h.getScale(f,c),b=Math.floor((f+c.margin*2)*g),_=c.margin*g,R=[c.color.light,c.color.dark];for(let E=0;E<b;E++)for(let D=0;D<b;D++){let S=(E*b+D)*4,G=c.color.light;if(E>=_&&D>=_&&E<b-_&&D<b-_){const q=Math.floor((E-_)/g),H=Math.floor((D-_)/g);G=R[p[q*f+H]?1:0]}r[S++]=G.r,r[S++]=G.g,r[S++]=G.b,r[S]=G.a}}})(Fg)),Fg}var Im;function f8(){return Im||(Im=1,(function(h){const n=Fv();function s(o,c,f){o.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=f,c.width=f,c.style.height=f+"px",c.style.width=f+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}h.render=function(c,f,p){let g=p,b=f;typeof g>"u"&&(!f||!f.getContext)&&(g=f,f=void 0),f||(b=r()),g=n.getOptions(g);const _=n.getImageWidth(c.modules.size,g),R=b.getContext("2d"),E=R.createImageData(_,_);return n.qrToImageData(E.data,c,g),s(R,b,_),R.putImageData(E,0,0),b},h.renderToDataURL=function(c,f,p){let g=p;typeof g>"u"&&(!f||!f.getContext)&&(g=f,f=void 0),g||(g={});const b=h.render(c,f,g),_=g.type||"image/png",R=g.rendererOpts||{};return b.toDataURL(_,R.quality)}})(Jg)),Jg}var kg={},Qm;function h8(){if(Qm)return kg;Qm=1;const h=Fv();function n(o,c){const f=o.a/255,p=c+'="'+o.hex+'"';return f<1?p+" "+c+'-opacity="'+f.toFixed(2).slice(1)+'"':p}function s(o,c,f){let p=o+c;return typeof f<"u"&&(p+=" "+f),p}function r(o,c,f){let p="",g=0,b=!1,_=0;for(let R=0;R<o.length;R++){const E=Math.floor(R%c),D=Math.floor(R/c);!E&&!b&&(b=!0),o[R]?(_++,R>0&&E>0&&o[R-1]||(p+=b?s("M",E+f,.5+D+f):s("m",g,0),g=0,b=!1),E+1<c&&o[R+1]||(p+=s("h",_),_=0)):g++}return p}return kg.render=function(c,f,p){const g=h.getOptions(f),b=c.modules.size,_=c.modules.data,R=b+g.margin*2,E=g.color.light.a?"<path "+n(g.color.light,"fill")+' d="M0 0h'+R+"v"+R+'H0z"/>':"",D="<path "+n(g.color.dark,"stroke")+' d="'+r(_,b,g.margin)+'"/>',S='viewBox="0 0 '+R+" "+R+'"',q='<svg xmlns="http://www.w3.org/2000/svg" '+(g.width?'width="'+g.width+'" height="'+g.width+'" ':"")+S+' shape-rendering="crispEdges">'+E+D+`</svg>
`;return typeof p=="function"&&p(null,q),q},kg}var Km;function d8(){if(Km)return mc;Km=1;const h=K6(),n=c8(),s=f8(),r=h8();function o(c,f,p,g,b){const _=[].slice.call(arguments,1),R=_.length,E=typeof _[R-1]=="function";if(!E&&!h())throw new Error("Callback required as last argument");if(E){if(R<2)throw new Error("Too few arguments provided");R===2?(b=p,p=f,f=g=void 0):R===3&&(f.getContext&&typeof b>"u"?(b=g,g=void 0):(b=g,g=p,p=f,f=void 0))}else{if(R<1)throw new Error("Too few arguments provided");return R===1?(p=f,f=g=void 0):R===2&&!f.getContext&&(g=p,p=f,f=void 0),new Promise(function(D,S){try{const G=n.create(p,g);D(c(G,f,g))}catch(G){S(G)}})}try{const D=n.create(p,g);b(null,c(D,f,g))}catch(D){b(D)}}return mc.create=n.create,mc.toCanvas=o.bind(null,s.render),mc.toDataURL=o.bind(null,s.renderToDataURL),mc.toString=o.bind(null,function(c,f,p){return r.render(c,p)}),mc}var g8=d8();const p8=vh(g8),kv=({active:h=!1,size:n=20})=>{const s=h?"#ff4d4f":"#b8c1cc",r=h?"#ff4d4f":"transparent";return et.jsxs("svg",{width:n,height:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[et.jsx("path",{d:"M5 2.5V17.5",stroke:s,strokeWidth:"1.6",strokeLinecap:"round"}),et.jsx("path",{d:"M5 3h10l-2 3 2 3H5V3Z",fill:r,stroke:s,strokeWidth:"1.4",strokeLinejoin:"round"})]})},m8=({student:h,onClick:n,onToggleFlag:s,teacherAnnotations:r=[],sharedImage:o,hideNames:c=!1})=>{var w,M,A,T;const f=yt.useRef(null),p=yt.useRef(null),[g,b]=yt.useState(null),[_,R]=yt.useState(300);yt.useEffect(()=>{if(!o){b(null);return}const y=new window.Image;y.src=o.dataUrl,y.onload=()=>{b(y)}},[o]),yt.useEffect(()=>{if(!p.current)return;const y=()=>{p.current&&R(p.current.clientWidth)};y();const U=new ResizeObserver(y);return U.observe(p.current),()=>U.disconnect()},[]);const E=()=>{if(h!=null&&h.name)return h.name;if(!(h!=null&&h.clientId))return"Unknown Student";const y=h.clientId.match(/student-(\d+)/);return y?`Student ${y[1]}`:h.clientId},D=()=>{if(!h.lastUpdate)return"Just joined";const y=Math.floor((Date.now()-h.lastUpdate)/1e3);return y<5?"Just now":y<60?`${y}s ago`:`${Math.floor(y/60)}m ago`},S=((M=(w=h.meta)==null?void 0:w.base)==null?void 0:M.width)||800,G=((T=(A=h.meta)==null?void 0:A.base)==null?void 0:T.height)||600,q=_/S,H=y=>{y.stopPropagation(),s&&s(h.clientId)},z=(()=>{if(!o||!g)return null;const y=o.width/o.height,U=S/G;let N,L,Q,I;return y>U?(N=S,L=S/y,Q=0,I=(G-L)/2):(L=G,N=G*y,Q=(S-N)/2,I=0),{x:Q,y:I,width:N,height:L}})();return et.jsxs("div",{className:`student-card ${h.isActive?"active":"inactive"}`,onClick:()=>n(h),children:[et.jsxs("div",{className:"student-card-header",children:[et.jsxs("div",{className:"student-name",children:[et.jsx("span",{className:"student-icon",children:"👤"}),c?"•••":E()]}),et.jsxs("div",{className:"student-header-actions",children:[et.jsx("button",{className:`flag-button ${h.isFlagged?"active":""}`,onClick:H,"aria-label":h.isFlagged?"Remove flag":"Flag student",title:h.isFlagged?"Remove flag":"Flag student",children:et.jsx(kv,{active:h.isFlagged,size:18})}),et.jsx("div",{className:"student-status",children:et.jsx("span",{className:`status-dot ${h.isActive?"online":"offline"}`})})]})]}),et.jsxs("div",{className:"student-card-canvas",ref:p,children:[et.jsxs(Ap,{ref:f,width:S,height:G,scaleX:q,scaleY:q,style:{transformOrigin:"top left",width:"100%",height:"100%"},children:[z&&et.jsx(Pr,{listening:!1,children:et.jsx(Tp,{image:g,x:z.x,y:z.y,width:z.width,height:z.height})}),et.jsx(Pr,{children:h.lines&&h.lines.map((y,U)=>et.jsx(Ec,{points:y.points,stroke:y.color||"black",strokeWidth:y.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`preview-${h.clientId}-${U}`))}),et.jsx(Pr,{children:r.map((y,U)=>et.jsx(Ec,{points:y.points,stroke:y.color||"#FF0000",strokeWidth:y.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${h.clientId}-${U}`))})]}),(!h.lines||h.lines.length===0)&&et.jsxs("div",{className:"no-drawing",children:[et.jsx("span",{children:"✏️"}),et.jsx("p",{children:"No drawing yet"})]}),h.lines&&h.lines.length>0&&et.jsxs("div",{className:"stroke-count",children:[h.lines.length," stroke",h.lines.length!==1?"s":""]})]}),et.jsxs("div",{className:"student-card-footer",children:[et.jsx("span",{className:"last-update",children:D()}),et.jsx("span",{className:"click-hint",children:"Click to annotate →"})]})]})},vc={width:800,height:600},l0="teacherAnnotationPrefs",Wg=2,Zm=[{label:"Red",value:"#FF3B30"},{label:"Purple",value:"#7C3AED"},{label:"Teal",value:"#0EA5E9"}],v8=({student:h,isOpen:n,onClose:s,onAnnotate:r,existingAnnotations:o=[],isFlagged:c=!1,onToggleFlag:f,sharedImage:p})=>{const[g,b]=yt.useState("pen"),[_,R]=yt.useState(Zm[0].value),[E,D]=yt.useState(3),[S,G]=yt.useState(!1),[q,H]=yt.useState([]),[B,z]=yt.useState("stylus-only"),[w,M]=yt.useState("left"),[A,T]=yt.useState(null),y=yt.useRef([]),U=yt.useRef([]),N=yt.useRef(!1),L=yt.useRef(null),Q=yt.useRef(!0),I=yt.useRef(null),K=yt.useRef(null);yt.useEffect(()=>{if(!p){T(null);return}const _t=new window.Image;_t.src=p.dataUrl,_t.onload=()=>{T(_t)}},[p]);const V=yt.useRef(null),x=yt.useRef(null),[P,Z]=yt.useState({width:960,height:720}),k=yt.useMemo(()=>({x:P.width/vc.width,y:P.height/vc.height}),[P]);yt.useEffect(()=>{if(!(typeof window>"u")){console.log("🟣 [TEACHER ANNOTATION] Loading preferences from localStorage...");try{const _t=localStorage.getItem(l0);if(_t){const jt=JSON.parse(_t);if(console.log("🟣 [TEACHER ANNOTATION] Found stored preferences:",jt),jt.version!==Wg){console.log("🟣 [TEACHER ANNOTATION] Version mismatch! Expected:",Wg,"Got:",jt.version),console.log("🟣 [TEACHER ANNOTATION] Clearing old preferences..."),localStorage.removeItem(l0);return}console.log("🟣 [TEACHER ANNOTATION] Applying preferences..."),jt.tool&&b(jt.tool),jt.color&&R(jt.color),typeof jt.brushSize=="number"&&D(jt.brushSize),jt.inputMode&&z(jt.inputMode),jt.toolbarPosition&&M(jt.toolbarPosition),console.log("🟣 [TEACHER ANNOTATION] Preferences loaded successfully!")}else console.log("🟣 [TEACHER ANNOTATION] No stored preferences found, using defaults")}catch(_t){console.warn("🟣 [TEACHER ANNOTATION] Failed to load teacher annotation prefs",_t),localStorage.removeItem(l0)}}},[]),yt.useEffect(()=>{if(typeof window>"u")return;if(Q.current){Q.current=!1,console.log("💾 [TEACHER ANNOTATION] Skipping save on first render");return}const _t={version:Wg,tool:g,color:_,brushSize:E,inputMode:B,toolbarPosition:w};console.log("💾 [TEACHER ANNOTATION] Saving preferences to localStorage:",_t),localStorage.setItem(l0,JSON.stringify(_t))},[g,_,E,B,w]),yt.useEffect(()=>{n&&h&&h.clientId!==L.current&&(L.current=h.clientId,H(o),y.current=[],U.current=[])},[n,h,o]),yt.useEffect(()=>()=>{K.current&&cancelAnimationFrame(K.current)},[]),yt.useEffect(()=>{if(n){const _t=document.body.style.overflow,jt=document.body.style.position,ve=document.body.style.touchAction;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.touchAction="none",()=>{document.body.style.overflow=_t,document.body.style.position=jt,document.body.style.touchAction=ve}}},[n]),yt.useEffect(()=>{if(!n)return;const _t=()=>{if(!V.current)return;const jt=V.current.getBoundingClientRect(),ue=24+4,we=Math.max(320,jt.width-ue),Ae=Math.max(240,jt.height-ue),on=we/vc.width,Tn=Ae/vc.height,pn=Math.min(on,Tn);Z({width:Math.round(vc.width*pn),height:Math.round(vc.height*pn)})};return _t(),window.addEventListener("resize",_t),()=>window.removeEventListener("resize",_t)},[w,n]);const at=()=>{if(!p||!A)return null;const _t=p.width/p.height,jt=P.width/P.height;let ve,ne,ue,we;return _t>jt?(ve=P.width,ne=P.width/_t,ue=0,we=(P.height-ne)/2):(ne=P.height,ve=P.height*_t,ue=(P.width-ve)/2,we=0),{x:ue,y:we,width:ve,height:ne}};if(!n||!h)return null;const F=at(),lt=()=>{if(h.name)return h.name;const _t=h.clientId.match(/student-(\d+)/)||h.clientId.match(/load-test-student-(\d+)/);return _t?`Student ${_t[1]}`:h.clientId},it=_t=>B!=="stylus-only"?!0:(_t==null?void 0:_t.pointerType)==="pen",X=(_t=[])=>_t.map((jt,ve)=>ve%2===0?jt*k.x:jt*k.y),J=_t=>({x:_t.x/k.x,y:_t.y/k.y}),$=_t=>(_t.strokeWidth||3)*k.x,nt=_t=>{const jt=_t.evt;if(jt!=null&&jt.preventDefault&&jt.preventDefault(),jt!=null&&jt.stopPropagation&&jt.stopPropagation(),!!it(jt))if(g==="pen"){G(!0);const ve=_t.target.getStage().getPointerPosition(),{x:ne,y:ue}=J(ve),we={tool:"pen",points:[ne,ue],color:_,strokeWidth:E};y.current.push([...q]),U.current=[],I.current=we,H([...q,we])}else g==="eraser"&&(G(!0),N.current=!1)},gt=_t=>{const jt=_t.evt;if(jt!=null&&jt.preventDefault&&jt.preventDefault(),jt!=null&&jt.stopPropagation&&jt.stopPropagation(),!S||!it(jt))return;const ne=_t.target.getStage().getPointerPosition();if(g==="pen"){if(I.current){const{x:ue,y:we}=J(ne);I.current.points=I.current.points.concat([ue,we]);const Ae=I.current;K.current&&cancelAnimationFrame(K.current),K.current=requestAnimationFrame(()=>{Ae&&H(on=>on.length===0?on:[...on.slice(0,-1),Ae])})}}else if(g==="eraser"){const ue=q.length,we=20,Ae=q.filter(on=>{for(let Tn=0;Tn<on.points.length;Tn+=2){const pn=on.points[Tn]*k.x,ut=on.points[Tn+1]*k.y;if(Math.sqrt(Math.pow(pn-ne.x,2)+Math.pow(ut-ne.y,2))<we)return!1}return!0});Ae.length<ue&&!N.current&&(y.current.push([...q]),U.current=[],N.current=!0),H(Ae)}},Rt=_t=>{const jt=_t==null?void 0:_t.evt;if(!it(jt)){jt!=null&&jt.preventDefault&&jt.preventDefault();return}if(G(!1),K.current&&(cancelAnimationFrame(K.current),K.current=null),I.current&&g==="pen"){const ve=I.current;H(ne=>{if(ne.length===0)return ne;const ue=[...ne.slice(0,-1),ve];return setTimeout(()=>r(ue),0),ue}),I.current=null}else setTimeout(()=>r(q),0)},Ht=()=>{if(y.current.length>0){const _t=y.current.pop();U.current.push([...q]),H(_t),r(_t)}},Kt=()=>{if(U.current.length>0){const _t=U.current.pop();y.current.push([...q]),H(_t),r(_t)}},Ft=()=>{y.current.push([...q]),U.current=[];const _t=[];H(_t),r(_t)},fe=()=>{f&&f(h.clientId)},At=()=>{G(!1),s()},Bt=()=>{z(_t=>_t==="stylus-only"?"all":"stylus-only")},$t=()=>{M(_t=>_t==="left"?"right":"left")},kt=_t=>{_t.preventDefault(),_t.stopPropagation()};return et.jsx("div",{className:"annotation-modal-overlay",onTouchMove:kt,onTouchStart:kt,children:et.jsx("div",{className:"annotation-modal student-console",children:et.jsxs("div",{className:"annotation-console",children:[et.jsxs("div",{className:"annotation-status-bar",children:[et.jsxs("div",{className:"annotation-status-text",children:[et.jsx("h1",{children:"Annotate Student"}),et.jsx("p",{children:lt()})]}),et.jsxs("div",{className:"annotation-status-actions",children:[et.jsx("div",{className:"tool-status-indicator",children:et.jsxs("span",{className:"tool-status-text",children:[g==="pen"?"🖊️":"🧽"," ",B==="all"?"All inputs":"Stylus only"]})}),et.jsxs("button",{className:`flag-pill ${c?"active":""}`,onClick:fe,children:[et.jsx(kv,{active:c,size:16}),c?"Flagged":"Flag"]}),et.jsxs("button",{className:"status-badge",onClick:$t,children:["Move toolbar to ",w==="left"?"right":"left"]}),et.jsx("button",{className:"status-badge danger",onClick:At,children:"✕ Close"})]})]}),et.jsxs("div",{className:`annotation-workspace ${w==="right"?"toolbar-right":""}`,children:[et.jsxs("div",{className:"annotation-sidebar",children:[et.jsxs("div",{className:"sidebar-header",children:[et.jsx("h2",{children:"Annotation Console"}),et.jsx("p",{children:"Mirror of student workspace"})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"COLORS"}),et.jsx("div",{className:"color-row",children:Zm.map(_t=>et.jsx("button",{className:`color-button ${_===_t.value?"active":""}`,style:{background:_t.value},onClick:()=>R(_t.value),"aria-label":_t.label},_t.value))})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),et.jsxs("div",{className:"tool-buttons tool-icon-buttons",children:[et.jsxs("button",{onClick:()=>b("pen"),className:`tool-icon-button ${g==="pen"?"active":""}`,title:"Pen",children:[et.jsx("span",{className:"tool-icon",children:"🖊️"}),et.jsx("span",{className:"tool-label",children:"Pen"})]}),et.jsxs("button",{onClick:()=>b("eraser"),className:`tool-icon-button ${g==="eraser"?"active":""}`,title:"Eraser",children:[et.jsx("span",{className:"tool-icon",children:"🧽"}),et.jsx("span",{className:"tool-label",children:"Eraser"})]})]})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),et.jsxs("div",{className:"brush-size-control",children:[et.jsx("input",{type:"range",min:"1",max:"10",value:E,onChange:_t=>D(parseInt(_t.target.value)),className:"brush-slider"}),et.jsx("span",{className:"brush-value",children:E})]})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),et.jsx("button",{className:`input-mode-toggle ${B==="all"?"all":""}`,onClick:Bt,children:B==="stylus-only"?"Stylus only":"All inputs"})]}),et.jsxs("div",{className:"sidebar-section",children:[et.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),et.jsxs("div",{className:"history-buttons",children:[et.jsx("button",{onClick:Ht,className:"history-button",disabled:y.current.length===0,children:"Undo"}),et.jsx("button",{onClick:Kt,className:"history-button",disabled:U.current.length===0,children:"Redo"}),et.jsx("button",{onClick:Ft,className:"history-button danger",children:"Clear"})]})]})]}),et.jsx("div",{className:"annotation-canvas-panel",children:et.jsx("div",{className:"annotation-canvas-frame",ref:V,onTouchMove:_t=>_t.preventDefault(),onTouchStart:_t=>_t.preventDefault(),children:et.jsxs(Ap,{ref:x,width:P.width,height:P.height,onPointerDown:nt,onPointerMove:gt,onPointerUp:Rt,onPointerLeave:Rt,onTouchMove:_t=>_t.preventDefault(),onTouchStart:_t=>_t.preventDefault(),className:"annotation-stage",children:[F&&et.jsx(Pr,{listening:!1,children:et.jsx(Tp,{image:A,x:F.x,y:F.y,width:F.width,height:F.height})}),et.jsx(Pr,{listening:!1,children:h.lines&&h.lines.map((_t,jt)=>et.jsx(Ec,{points:X(_t.points),stroke:_t.color||"black",strokeWidth:(_t.strokeWidth||3)*k.x,tension:.5,lineCap:"round",lineJoin:"round"},`student-${jt}`))}),et.jsx(Pr,{children:q.map((_t,jt)=>et.jsx(Ec,{points:X(_t.points),stroke:_t.color,strokeWidth:$(_t),tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${jt}`))})]})})})]})]})})})},y8=async(h,n=800,s=600,r=.7)=>{const o=await createImageBitmap(h),c=Math.min(n/o.width,s/o.height,1),f=Math.round(o.width*c),p=Math.round(o.height*c),g=document.createElement("canvas");g.width=f,g.height=p,g.getContext("2d").drawImage(o,0,0,f,p);const _=await new Promise((E,D)=>{g.toBlob(S=>{S?E(S):D(new Error("Failed to compress image"))},"image/jpeg",r)}),R=await new Promise((E,D)=>{const S=new FileReader;S.onload=()=>E(S.result),S.onerror=D,S.readAsDataURL(_)});return{blob:_,dataUrl:R,width:f,height:p,size:_.size}},S8=()=>{const[h,n]=sv(),s=pp(),r=()=>{const ft="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let Mt="";for(let Xt=0;Xt<6;Xt++)Mt+=ft.charAt(Math.floor(Math.random()*ft.length));return Mt},o=()=>{const ft=h.get("room");if(ft)return ft;const Mt=r();return n({room:Mt}),Mt},[c]=xn.useState(o),[f,p]=yt.useState(null),[g,b]=yt.useState(null),[_,R]=yt.useState(!1),[E]=yt.useState(`teacher-${Math.random().toString(36).substring(7)}`),[D,S]=yt.useState(()=>{const ft=parseInt(h.get("bot"))||0,Mt={};if(ft>0)for(let Xt=1;Xt<=ft;Xt++){const ae=`bot-${Xt}`;Mt[ae]={clientId:ae,name:`Bot ${Xt}`,lines:[],lastUpdate:Date.now()-Xt*1e3,isActive:!0,isFlagged:!1}}return Mt}),[G,q]=yt.useState(null),[H,B]=yt.useState({}),[z,w]=yt.useState(""),[M,A]=yt.useState("all"),[T,y]=yt.useState(()=>{const ft=localStorage.getItem("teacherDashboardHideNames");return ft?JSON.parse(ft):!1}),[U,N]=yt.useState(()=>{const ft=localStorage.getItem("teacherDashboardCardsPerRow");return ft?parseInt(ft):3}),[L,Q]=yt.useState("blank"),[I,K]=yt.useState(null),[V,x]=yt.useState(null),[P,Z]=yt.useState(""),[k,at]=yt.useState(!1),[F,lt]=yt.useState(null),it=yt.useRef(null),[X,J]=yt.useState(!1),[$,nt]=yt.useState(""),gt=yt.useRef(!1);yt.useEffect(()=>{localStorage.setItem("teacherDashboardHideNames",JSON.stringify(T))},[T]),yt.useEffect(()=>{localStorage.setItem("teacherDashboardCardsPerRow",U.toString())},[U]),yt.useEffect(()=>((async()=>{try{const Mt=`/api/token?clientId=${E}`,ae=await(await fetch(Mt)).json(),Lt=new Q6.Realtime({authCallback:async(ie,un)=>{un(null,ae)},clientId:E});Lt.connection.on("connected",()=>{console.log("Connected to Ably"),R(!0)}),Lt.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),R(!1)}),p(Lt);const mn=Lt.channels.get(`room-${c}`);mn.subscribe("student-layer",ie=>{console.log("📥 Teacher received student layer from",ie.clientId),gt.current=!0,S(un=>{var _e,Hi,Oa;return{...un,[ie.clientId]:{...un[ie.clientId]||{},clientId:ie.clientId,name:((_e=un[ie.clientId])==null?void 0:_e.name)||Rt(ie.clientId),lines:ie.data.lines||[],meta:ie.data.meta||((Hi=un[ie.clientId])==null?void 0:Hi.meta)||null,lastUpdate:Date.now(),isActive:!0,isFlagged:((Oa=un[ie.clientId])==null?void 0:Oa.isFlagged)||!1}}}),setTimeout(()=>{gt.current=!1},100)}),mn.presence.subscribe("enter",ie=>{var un;ie.clientId!==E&&ie.clientId.includes("student")&&(console.log("👋 Student joined:",ie.clientId,"Name:",(un=ie.data)==null?void 0:un.name),S(_e=>{var Hi,Oa;return{..._e,[ie.clientId]:{..._e[ie.clientId]||{},clientId:ie.clientId,name:((Hi=ie.data)==null?void 0:Hi.name)||Rt(ie.clientId),isActive:!0,lastUpdate:Date.now(),isFlagged:((Oa=_e[ie.clientId])==null?void 0:Oa.isFlagged)||!1}}}))}),mn.presence.subscribe("leave",ie=>{ie.clientId!==E&&ie.clientId.includes("student")&&(console.log("👋 Student left:",ie.clientId),S(un=>{var _e;return{...un,[ie.clientId]:{...un[ie.clientId]||{},isActive:!1,isFlagged:((_e=un[ie.clientId])==null?void 0:_e.isFlagged)||!1}}}))}),mn.subscribe("teacher-image",ie=>{console.log("📸 Teacher dashboard received shared image"),lt(ie.data)}),mn.presence.enter(),b(mn)}catch(Mt){console.error("Failed to connect to Ably:",Mt)}})(),()=>{f&&f.close()}),[c,E]);const Rt=ft=>{const Mt=ft.match(/student-(\d+)/)||ft.match(/student-([\w]+)/);return Mt?`Student ${Mt[1]}`:ft},Ht=ft=>{q(D[ft.clientId]||ft)},Kt=()=>{q(null)},Ft=ft=>{if(!G||!g)return;const Mt=G.clientId;B(Xt=>({...Xt,[Mt]:ft})),g.publish("teacher-annotation",{targetStudentId:Mt,annotations:ft,teacherId:E,timestamp:Date.now()}),console.log("📤 Published annotations for",Mt)},fe=ft=>{S(Mt=>{const Xt=Mt[ft];return Xt?{...Mt,[ft]:{...Xt,isFlagged:!Xt.isFlagged}}:Mt}),q(Mt=>Mt&&Mt.clientId===ft?{...Mt,isFlagged:!Mt.isFlagged}:Mt)},At=()=>{it.current&&(it.current.value="",it.current.click())},Bt=async ft=>{var Xt;const Mt=(Xt=ft.target.files)==null?void 0:Xt[0];if(!Mt){Z("No file selected.");return}at(!0),Z("");try{const{dataUrl:ae,width:Lt,height:mn}=await y8(Mt),ie={dataUrl:ae,width:Lt,height:mn,filename:Mt.name,timestamp:Date.now()};x(ie),Z("Image ready to send.")}catch(ae){console.error("Failed to upload image from dashboard:",ae),Z("Upload failed. Please try again.")}finally{at(!1)}},$t=()=>{x(null),Z(""),it.current&&(it.current.value="")},kt=ft=>{const Mt=document.createElement("canvas"),Xt=800,ae=600;Mt.width=Xt,Mt.height=ae;const Lt=Mt.getContext("2d");if(Lt.fillStyle="#FFFFFF",Lt.fillRect(0,0,Xt,ae),ft==="hanzi"){const un=(Xt-450)/2,_e=(ae-450)/2;Lt.strokeStyle="#0F9D83",Lt.lineWidth=4,Lt.strokeRect(un,_e,450,450),Lt.strokeStyle="#B0E8D8",Lt.lineWidth=2,Lt.setLineDash([8,8]),Lt.beginPath(),Lt.moveTo(Xt/2,_e),Lt.lineTo(Xt/2,_e+450),Lt.stroke(),Lt.beginPath(),Lt.moveTo(un,ae/2),Lt.lineTo(un+450,ae/2),Lt.stroke()}else if(ft==="graph-corner"){Lt.strokeStyle="#E0E0E0",Lt.lineWidth=1,Lt.setLineDash([]);for(let _e=80;_e<=Xt-80;_e+=40)Lt.beginPath(),Lt.moveTo(_e,80),Lt.lineTo(_e,ae-80),Lt.stroke();for(let _e=80;_e<=ae-80;_e+=40)Lt.beginPath(),Lt.moveTo(80,_e),Lt.lineTo(Xt-80,_e),Lt.stroke();Lt.strokeStyle="#5B9BD5",Lt.lineWidth=3,Lt.beginPath(),Lt.moveTo(80,ae-80),Lt.lineTo(Xt-80,ae-80),Lt.stroke(),Lt.beginPath(),Lt.moveTo(80,80),Lt.lineTo(80,ae-80),Lt.stroke()}else if(ft==="graph-cross"){Lt.strokeStyle="#E0E0E0",Lt.lineWidth=1,Lt.setLineDash([]);for(let _e=80;_e<=Xt-80;_e+=40)Lt.beginPath(),Lt.moveTo(_e,80),Lt.lineTo(_e,ae-80),Lt.stroke();for(let _e=80;_e<=ae-80;_e+=40)Lt.beginPath(),Lt.moveTo(80,_e),Lt.lineTo(Xt-80,_e),Lt.stroke();Lt.strokeStyle="#5B9BD5",Lt.lineWidth=3,Lt.beginPath(),Lt.moveTo(80,ae/2),Lt.lineTo(Xt-80,ae/2),Lt.stroke(),Lt.beginPath(),Lt.moveTo(Xt/2,80),Lt.lineTo(Xt/2,ae-80),Lt.stroke()}const mn=Mt.toDataURL("image/png");return{type:ft,dataUrl:mn,width:Xt,height:ae,timestamp:Date.now()}},_t=ft=>{const Mt=kt(ft);K(Mt),Z(`Template ready: ${ft}`)},jt=async()=>{if(g)try{await g.publish("clear-all-drawings",{timestamp:Date.now()}),S(ft=>{const Mt={};return Object.keys(ft).forEach(Xt=>{Mt[Xt]={...ft[Xt],lines:[]}}),Mt}),B({}),L==="blank"?(await g.publish("teacher-clear",{timestamp:Date.now()}),lt(null),K(null),Z("Cleared canvas for all students.")):L==="templates"&&I?(await g.publish("teacher-template",I),lt(I),Z("Template sent to all students.")):L==="image"&&V&&(await g.publish("teacher-image",V),lt(V),Z("Image sent to all students."))}catch(ft){console.error("Failed to send to class:",ft),Z("Failed to send. Please try again.")}},ve=()=>{f&&f.close(),s("/")},ne=async()=>{const ft=`${window.location.origin}/student?room=${c}`;try{const Mt=await p8.toDataURL(ft,{width:300,margin:2,color:{dark:"#0F172A",light:"#FFFFFF"}});nt(Mt),J(!0)}catch(Mt){console.error("Failed to generate QR code:",Mt)}},ue=async()=>{const ft=`${window.location.origin}/student?room=${c}`;try{await navigator.clipboard.writeText(ft),alert("Link copied to clipboard!")}catch(Mt){console.error("Failed to copy link:",Mt),alert("Failed to copy link. Please copy manually.")}},we=()=>Object.values(D).sort((ft,Mt)=>ft.isActive&&!Mt.isActive?-1:!ft.isActive&&Mt.isActive?1:(Mt.lastUpdate||0)-(ft.lastUpdate||0)),Ae=()=>{const ft=we(),Mt=z.trim().toLowerCase();return ft.filter(Xt=>{const ae=Mt?(Xt.name||Xt.clientId).toLowerCase().includes(Mt):!0,Lt=M==="all"||M==="flagged"&&Xt.isFlagged;return ae&&Lt})},on=we(),Tn=Ae(),pn=on.filter(ft=>ft.isActive).length,ut=G?D[G.clientId]||G:null,xt=P?!/fail|no file/i.test(P):!1;return et.jsxs("div",{className:"teacher-dashboard",children:[et.jsxs("div",{className:"dashboard-shell",children:[et.jsx("button",{className:"back-link",onClick:ve,children:"← Exit class"}),et.jsxs("section",{className:"hero-card glass-panel",children:[et.jsxs("div",{className:"hero-top",children:[et.jsxs("div",{className:"hero-copy",children:[et.jsx("p",{className:"eyebrow",children:"Teacher dashboard"}),et.jsx("h1",{children:"Monitor every student's canvas and annotate live with the shared toolbar."}),et.jsx("p",{className:"hero-subtitle",children:"Share the session code below to invite students. You'll see their canvases appear in real time as they connect."})]}),et.jsxs("div",{className:"session-info",children:[et.jsxs("div",{className:"session-code-pill clickable",onClick:ne,style:{cursor:"pointer"},children:[et.jsx("span",{className:"pill-label",children:"Session code"}),et.jsx("span",{className:"pill-value",children:c})]}),et.jsxs("div",{className:"status-group",children:[et.jsx("span",{className:"status-pill session-pill",children:"Session live"}),et.jsx("span",{className:`status-pill connection-pill ${_?"online":"offline"}`,children:_?"Connected":"Disconnected"}),et.jsxs("span",{className:"status-pill count-pill",children:[et.jsx("strong",{children:pn}),et.jsx("span",{children:"online"})]})]})]})]}),et.jsxs("div",{className:"hero-controls",children:[et.jsxs("div",{className:"search-input-wrapper",children:[et.jsx("span",{className:"search-icon",children:"🔍"}),et.jsx("input",{type:"text",placeholder:"Filter students",value:z,onChange:ft=>w(ft.target.value),className:"search-input"}),z&&et.jsx("button",{className:"clear-search-btn",onClick:()=>w(""),title:"Clear search",children:"✕"})]}),et.jsxs("div",{className:"control-set",children:[et.jsxs("label",{className:"hide-names-checkbox",children:[et.jsx("input",{type:"checkbox",checked:T,onChange:ft=>y(ft.target.checked)}),et.jsx("span",{children:"Hide names"})]}),et.jsx("button",{type:"button",className:`chip-button ${M==="flagged"?"active":""}`,onClick:()=>A(ft=>ft==="flagged"?"all":"flagged"),children:"Flagged only"}),et.jsxs("div",{className:"cards-select",children:[et.jsx("span",{children:"Cards/row"}),et.jsxs("select",{value:U,onChange:ft=>N(Number(ft.target.value)),children:[et.jsx("option",{value:2,children:"2"}),et.jsx("option",{value:3,children:"3"}),et.jsx("option",{value:4,children:"4"})]})]})]})]})]}),et.jsxs("section",{className:"prep-card glass-panel",children:[et.jsxs("div",{className:"prep-header",children:[et.jsxs("div",{children:[et.jsx("p",{className:"eyebrow",children:"Prepare next question"}),I&&et.jsxs("div",{style:{display:"inline-block",marginLeft:"12px",padding:"4px 12px",background:"#5B9BD5",color:"white",borderRadius:"12px",fontSize:"13px",fontWeight:"600"},children:["Staged: ",I.type==="hanzi"?"Hanzi":I.type==="graph-corner"?"Graph (corner)":"Graph (cross)"]}),et.jsx("h3",{children:"Stage an image or prompt before sending it to every student."})]}),et.jsx("button",{className:"send-to-class-btn",onClick:jt,disabled:L==="image"&&!V,children:"Send to class"})]}),et.jsxs("div",{className:"prep-controls",children:[et.jsxs("div",{className:"prep-tabs",children:[et.jsx("button",{type:"button",className:`prep-tab ${L==="blank"?"active":""}`,onClick:()=>{Q("blank"),K(null),x(null)},children:"Blank canvas"}),et.jsx("button",{type:"button",className:`prep-tab ${L==="templates"?"active":""}`,onClick:()=>{Q("templates"),x(null)},children:"Templates"}),et.jsx("button",{type:"button",className:`prep-tab ${L==="image"?"active":""} ${V?"ready":""}`,onClick:()=>{Q("image"),K(null)},disabled:k,children:k?"Uploading…":"Send image"})]}),et.jsx("input",{ref:it,type:"file",accept:"image/*",onChange:Bt,style:{display:"none"}}),L==="templates"&&et.jsxs("div",{className:"template-selector",children:[et.jsxs("div",{className:"template-buttons",children:[et.jsx("button",{type:"button",className:`template-btn ${(I==null?void 0:I.type)==="hanzi"?"active":""}`,onClick:()=>_t("hanzi"),children:"Hanzi box"}),et.jsx("button",{type:"button",className:`template-btn ${(I==null?void 0:I.type)==="graph-corner"?"active":""}`,onClick:()=>_t("graph-corner"),children:"Graph (corner)"}),et.jsx("button",{type:"button",className:`template-btn ${(I==null?void 0:I.type)==="graph-cross"?"active":""}`,onClick:()=>_t("graph-cross"),children:"Graph (cross)"})]}),I&&et.jsxs("div",{className:"template-preview",children:[et.jsx("img",{src:I.dataUrl,alt:"Template preview",style:{maxWidth:"300px",maxHeight:"250px",border:"2px solid #0F9D83",borderRadius:"8px"}}),et.jsx("p",{style:{marginTop:"8px",color:"#999",fontSize:"14px"},children:"Tiny preview (local only)"})]})]}),L==="image"&&et.jsx(et.Fragment,{children:V?et.jsxs("div",{className:"image-preview-surface",children:[et.jsx("img",{src:V.dataUrl,alt:"Preview",className:"image-preview-thumbnail"}),et.jsxs("div",{className:"preview-meta",children:[et.jsx("p",{className:"preview-title",children:V.filename||"Prepared image"}),et.jsx("p",{className:"preview-subtitle",children:V.width&&V.height?`${Math.round(V.width)} × ${Math.round(V.height)} px`:"Ready to send"}),et.jsxs("div",{className:"image-actions",children:[et.jsx("button",{className:"ghost-btn",onClick:At,children:"Choose another"}),et.jsx("button",{className:"ghost-btn",onClick:$t,children:"Clear"})]}),P&&et.jsx("span",{className:`image-message ${xt?"success":"error"}`,children:P})]})]}):et.jsxs("button",{type:"button",className:"image-dropzone",onClick:At,children:[et.jsx("div",{className:"dropzone-icon","aria-hidden":"true",children:"🖼️"}),et.jsx("p",{children:"Bring an illustration or worksheet to share with the class."}),et.jsx("span",{children:"Click to upload an image"}),P&&et.jsx("span",{className:`image-message ${xt?"success":"error"}`,children:P})]})}),L==="blank"&&et.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#999"},children:et.jsx("p",{children:`Click "Send to class" to clear all students' canvases.`})})]})]}),et.jsx("section",{className:"students-panel",children:et.jsx("div",{className:"students-surface glass-panel",children:on.length===0?et.jsxs("div",{className:"waiting-card",children:[et.jsx("div",{className:"waiting-icon","aria-hidden":"true",children:"👥"}),et.jsx("h2",{children:"Waiting for students to join…"}),et.jsxs("p",{children:["Share the ",et.jsx("span",{className:"inline-pill",children:"session code"})," shown above. Students will appear here once they connect."]})]}):Tn.length===0?et.jsxs("div",{className:"no-results",children:[et.jsx("div",{className:"no-results-icon",children:"🔍"}),et.jsx("h3",{children:"No students found"}),et.jsxs("p",{children:['No students match "',z,'"']}),et.jsx("button",{className:"clear-filter-btn",onClick:()=>w(""),children:"Clear filter"})]}):et.jsx("div",{className:"students-grid",style:{gridTemplateColumns:`repeat(${U}, 1fr)`},children:Tn.filter(ft=>ft&&ft.clientId).map(ft=>et.jsx(m8,{student:ft,onClick:Ht,onToggleFlag:fe,teacherAnnotations:H[ft.clientId]||[],sharedImage:F,hideNames:T},ft.clientId))})})})]}),et.jsx(v8,{student:ut,isOpen:!!ut,isFlagged:ut==null?void 0:ut.isFlagged,onToggleFlag:fe,onClose:Kt,onAnnotate:Ft,existingAnnotations:ut?H[ut.clientId]||[]:[],sharedImage:F}),et.jsx("div",{className:"dashboard-footer",children:et.jsxs("p",{children:["💡 ",et.jsx("strong",{children:"Tip:"})," Click on any student card to view their work and add annotations"]})}),X&&et.jsx("div",{className:"qr-modal-overlay",onClick:()=>J(!1),children:et.jsxs("div",{className:"qr-modal",onClick:ft=>ft.stopPropagation(),children:[et.jsxs("div",{className:"qr-modal-header",children:[et.jsxs("h2",{children:["Join Session: ",c]}),et.jsx("button",{className:"qr-close-btn",onClick:()=>J(!1),children:"✕"})]}),et.jsxs("div",{className:"qr-modal-content",children:[et.jsx("div",{className:"qr-code-container",children:$&&et.jsx("img",{src:$,alt:"QR Code",className:"qr-code-image"})}),et.jsxs("div",{className:"qr-instructions",children:[et.jsxs("p",{className:"qr-instruction-text",children:[et.jsx("strong",{children:"Students can scan this QR code"})," or use the link below to join the session"]}),et.jsxs("div",{className:"qr-link-box",children:[et.jsx("input",{type:"text",value:`${window.location.origin}/student?room=${c}`,readOnly:!0,className:"qr-link-input"}),et.jsx("button",{className:"qr-copy-btn",onClick:ue,children:"Copy Link"})]})]})]})]})})]})};function b8(){return et.jsx(Iy,{children:et.jsxs(Py,{children:[et.jsx(r0,{path:"/",element:et.jsx(Qy,{})}),et.jsx(r0,{path:"/student",element:et.jsx(V6,{})}),et.jsx(r0,{path:"/teacher",element:et.jsx(S8,{})})]})})}J2.createRoot(document.getElementById("root")).render(et.jsx(xn.StrictMode,{children:et.jsx(b8,{})}));
