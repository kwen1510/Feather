function _v(d,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in d)){const h=Object.getOwnPropertyDescriptor(r,o);h&&Object.defineProperty(d,o,h.get?h:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(o){if(o.ep)return;o.ep=!0;const h=s(o);fetch(o.href,h)}})();function $d(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var K0={exports:{}},Qf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1;function Ov(){if(z1)return Qf;z1=1;var d=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(r,o,h){var c=null;if(h!==void 0&&(c=""+h),o.key!==void 0&&(c=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:d,type:r,key:c,ref:o!==void 0?o:null,props:h}}return Qf.Fragment=n,Qf.jsx=s,Qf.jsxs=s,Qf}var U1;function Rv(){return U1||(U1=1,K0.exports=Ov()),K0.exports}var ot=Rv(),I0={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function Mv(){if(G1)return le;G1=1;var d=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),c=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),E=Symbol.iterator;function D(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,w={};function j(F,it,at){this.props=F,this.context=it,this.refs=w,this.updater=at||S}j.prototype.isReactComponent={},j.prototype.setState=function(F,it){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,it,"setState")},j.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function U(){}U.prototype=j.prototype;function z(F,it,at){this.props=F,this.context=it,this.refs=w,this.updater=at||S}var L=z.prototype=new U;L.constructor=z,G(L,j.prototype),L.isPureReactComponent=!0;var M=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},y=Object.prototype.hasOwnProperty;function B(F,it,at){var X=at.ref;return{$$typeof:d,type:F,key:it,ref:X!==void 0?X:null,props:at}}function N(F,it){return B(F.type,it,F.props)}function q(F){return typeof F=="object"&&F!==null&&F.$$typeof===d}function I(F){var it={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(at){return it[at]})}var Z=/\/+/g;function K(F,it){return typeof F=="object"&&F!==null&&F.key!=null?I(""+F.key):it.toString(36)}function P(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(A,A):(F.status="pending",F.then(function(it){F.status==="pending"&&(F.status="fulfilled",F.value=it)},function(it){F.status==="pending"&&(F.status="rejected",F.reason=it)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function x(F,it,at,X,J){var $=typeof F;($==="undefined"||$==="boolean")&&(F=null);var tt=!1;if(F===null)tt=!0;else switch($){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(F.$$typeof){case d:case n:tt=!0;break;case R:return tt=F._init,x(tt(F._payload),it,at,X,J)}}if(tt)return J=J(F),tt=X===""?"."+K(F,0):X,M(J)?(at="",tt!=null&&(at=tt.replace(Z,"$&/")+"/"),x(J,it,at,"",function(gt){return gt})):J!=null&&(q(J)&&(J=N(J,at+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(Z,"$&/")+"/")+tt)),it.push(J)),1;tt=0;var ut=X===""?".":X+":";if(M(F))for(var Tt=0;Tt<F.length;Tt++)X=F[Tt],$=ut+K(X,Tt),tt+=x(X,it,at,$,J);else if(Tt=D(F),typeof Tt=="function")for(F=Tt.call(F),Tt=0;!(X=F.next()).done;)X=X.value,$=ut+K(X,Tt++),tt+=x(X,it,at,$,J);else if($==="object"){if(typeof F.then=="function")return x(P(F),it,at,X,J);throw it=String(F),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return tt}function Y(F,it,at){if(F==null)return F;var X=[],J=0;return x(F,X,"","",function($){return it.call(at,$,J++)}),X}function Q(F){if(F._status===-1){var it=F._result;it=it(),it.then(function(at){(F._status===0||F._status===-1)&&(F._status=1,F._result=at)},function(at){(F._status===0||F._status===-1)&&(F._status=2,F._result=at)}),F._status===-1&&(F._status=0,F._result=it)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},nt={map:Y,forEach:function(F,it,at){Y(F,function(){it.apply(this,arguments)},at)},count:function(F){var it=0;return Y(F,function(){it++}),it},toArray:function(F){return Y(F,function(it){return it})||[]},only:function(F){if(!q(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return le.Activity=O,le.Children=nt,le.Component=j,le.Fragment=s,le.Profiler=o,le.PureComponent=z,le.StrictMode=r,le.Suspense=p,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},le.cache=function(F){return function(){return F.apply(null,arguments)}},le.cacheSignal=function(){return null},le.cloneElement=function(F,it,at){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var X=G({},F.props),J=F.key;if(it!=null)for($ in it.key!==void 0&&(J=""+it.key),it)!y.call(it,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&it.ref===void 0||(X[$]=it[$]);var $=arguments.length-2;if($===1)X.children=at;else if(1<$){for(var tt=Array($),ut=0;ut<$;ut++)tt[ut]=arguments[ut+2];X.children=tt}return B(F.type,J,X)},le.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:h,_context:F},F},le.createElement=function(F,it,at){var X,J={},$=null;if(it!=null)for(X in it.key!==void 0&&($=""+it.key),it)y.call(it,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(J[X]=it[X]);var tt=arguments.length-2;if(tt===1)J.children=at;else if(1<tt){for(var ut=Array(tt),Tt=0;Tt<tt;Tt++)ut[Tt]=arguments[Tt+2];J.children=ut}if(F&&F.defaultProps)for(X in tt=F.defaultProps,tt)J[X]===void 0&&(J[X]=tt[X]);return B(F,$,J)},le.createRef=function(){return{current:null}},le.forwardRef=function(F){return{$$typeof:g,render:F}},le.isValidElement=q,le.lazy=function(F){return{$$typeof:R,_payload:{_status:-1,_result:F},_init:Q}},le.memo=function(F,it){return{$$typeof:b,type:F,compare:it===void 0?null:it}},le.startTransition=function(F){var it=T.T,at={};T.T=at;try{var X=F(),J=T.S;J!==null&&J(at,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(A,W)}catch($){W($)}finally{it!==null&&at.types!==null&&(it.types=at.types),T.T=it}},le.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},le.use=function(F){return T.H.use(F)},le.useActionState=function(F,it,at){return T.H.useActionState(F,it,at)},le.useCallback=function(F,it){return T.H.useCallback(F,it)},le.useContext=function(F){return T.H.useContext(F)},le.useDebugValue=function(){},le.useDeferredValue=function(F,it){return T.H.useDeferredValue(F,it)},le.useEffect=function(F,it){return T.H.useEffect(F,it)},le.useEffectEvent=function(F){return T.H.useEffectEvent(F)},le.useId=function(){return T.H.useId()},le.useImperativeHandle=function(F,it,at){return T.H.useImperativeHandle(F,it,at)},le.useInsertionEffect=function(F,it){return T.H.useInsertionEffect(F,it)},le.useLayoutEffect=function(F,it){return T.H.useLayoutEffect(F,it)},le.useMemo=function(F,it){return T.H.useMemo(F,it)},le.useOptimistic=function(F,it){return T.H.useOptimistic(F,it)},le.useReducer=function(F,it,at){return T.H.useReducer(F,it,at)},le.useRef=function(F){return T.H.useRef(F)},le.useState=function(F){return T.H.useState(F)},le.useSyncExternalStore=function(F,it,at){return T.H.useSyncExternalStore(F,it,at)},le.useTransition=function(){return T.H.useTransition()},le.version="19.2.0",le}var B1;function t0(){return B1||(B1=1,I0.exports=Mv()),I0.exports}var At=t0();const Sn=$d(At),xv=_v({__proto__:null,default:Sn},[At]);var Z0={exports:{}},Kf={},J0={exports:{}},F0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1;function Nv(){return H1||(H1=1,(function(d){function n(x,Y){var Q=x.length;x.push(Y);t:for(;0<Q;){var W=Q-1>>>1,nt=x[W];if(0<o(nt,Y))x[W]=Y,x[Q]=nt,Q=W;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var Y=x[0],Q=x.pop();if(Q!==Y){x[0]=Q;t:for(var W=0,nt=x.length,F=nt>>>1;W<F;){var it=2*(W+1)-1,at=x[it],X=it+1,J=x[X];if(0>o(at,Q))X<nt&&0>o(J,at)?(x[W]=J,x[X]=Q,W=X):(x[W]=at,x[it]=Q,W=it);else if(X<nt&&0>o(J,Q))x[W]=J,x[X]=Q,W=X;else break t}}return Y}function o(x,Y){var Q=x.sortIndex-Y.sortIndex;return Q!==0?Q:x.id-Y.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],R=1,O=null,E=3,D=!1,S=!1,G=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L(x){for(var Y=s(b);Y!==null;){if(Y.callback===null)r(b);else if(Y.startTime<=x)r(b),Y.sortIndex=Y.expirationTime,n(p,Y);else break;Y=s(b)}}function M(x){if(G=!1,L(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var Y=s(b);Y!==null&&P(M,Y.startTime-x)}}var A=!1,T=-1,y=5,B=-1;function N(){return w?!0:!(d.unstable_now()-B<y)}function q(){if(w=!1,A){var x=d.unstable_now();B=x;var Y=!0;try{t:{S=!1,G&&(G=!1,U(T),T=-1),D=!0;var Q=E;try{e:{for(L(x),O=s(p);O!==null&&!(O.expirationTime>x&&N());){var W=O.callback;if(typeof W=="function"){O.callback=null,E=O.priorityLevel;var nt=W(O.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){O.callback=nt,L(x),Y=!0;break e}O===s(p)&&r(p),L(x)}else r(p);O=s(p)}if(O!==null)Y=!0;else{var F=s(b);F!==null&&P(M,F.startTime-x),Y=!1}}break t}finally{O=null,E=Q,D=!1}Y=void 0}}finally{Y?I():A=!1}}}var I;if(typeof z=="function")I=function(){z(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){j(q,0)};function P(x,Y){T=j(function(){x(d.unstable_now())},Y)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var Y=3;break;default:Y=E}var Q=E;E=Y;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return Y()}finally{E=Q}},d.unstable_scheduleCallback=function(x,Y,Q){var W=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:R++,callback:Y,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>W?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(G?(U(T),T=-1):G=!0,P(M,Q-W))):(x.sortIndex=nt,n(p,x),S||D||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var Y=E;return function(){var Q=E;E=Y;try{return x.apply(this,arguments)}finally{E=Q}}}})(F0)),F0}var j1;function Dv(){return j1||(j1=1,J0.exports=Nv()),J0.exports}var k0={exports:{}},ya={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1;function zv(){if(L1)return ya;L1=1;var d=t0();function n(p){var b="https://react.dev/errors/"+p;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(p,b,R){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:O==null?null:""+O,children:p,containerInfo:b,implementation:R}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,b){if(p==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return ya.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ya.createPortal=function(p,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return h(p,b,null,R)},ya.flushSync=function(p){var b=c.T,R=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=b,r.p=R,r.d.f()}},ya.preconnect=function(p,b){typeof p=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,r.d.C(p,b))},ya.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},ya.preinit=function(p,b){if(typeof p=="string"&&b&&typeof b.as=="string"){var R=b.as,O=g(R,b.crossOrigin),E=typeof b.integrity=="string"?b.integrity:void 0,D=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?r.d.S(p,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:O,integrity:E,fetchPriority:D}):R==="script"&&r.d.X(p,{crossOrigin:O,integrity:E,fetchPriority:D,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},ya.preinitModule=function(p,b){if(typeof p=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=g(b.as,b.crossOrigin);r.d.M(p,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&r.d.M(p)},ya.preload=function(p,b){if(typeof p=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,O=g(R,b.crossOrigin);r.d.L(p,R,{crossOrigin:O,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},ya.preloadModule=function(p,b){if(typeof p=="string")if(b){var R=g(b.as,b.crossOrigin);r.d.m(p,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else r.d.m(p)},ya.requestFormReset=function(p){r.d.r(p)},ya.unstable_batchedUpdates=function(p,b){return p(b)},ya.useFormState=function(p,b,R){return c.H.useFormState(p,b,R)},ya.useFormStatus=function(){return c.H.useHostTransitionStatus()},ya.version="19.2.0",ya}var w1;function qg(){if(w1)return k0.exports;w1=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(n){console.error(n)}}return d(),k0.exports=zv(),k0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function Uv(){if(Y1)return Kf;Y1=1;var d=Dv(),n=t0(),s=qg();function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)e+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var e=t,l=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(l=e.return),t=e.return;while(t)}return e.tag===3?l:null}function c(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p(t){if(h(t)!==t)throw Error(r(188))}function b(t){var e=t.alternate;if(!e){if(e=h(t),e===null)throw Error(r(188));return e!==t?null:t}for(var l=t,u=e;;){var v=l.return;if(v===null)break;var C=v.alternate;if(C===null){if(u=v.return,u!==null){l=u;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===l)return p(v),t;if(C===u)return p(v),e;C=C.sibling}throw Error(r(188))}if(l.return!==u.return)l=v,u=C;else{for(var V=!1,k=v.child;k;){if(k===l){V=!0,l=v,u=C;break}if(k===u){V=!0,u=v,l=C;break}k=k.sibling}if(!V){for(k=C.child;k;){if(k===l){V=!0,l=C,u=v;break}if(k===u){V=!0,u=C,l=v;break}k=k.sibling}if(!V)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:e}function R(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=R(t),e!==null)return e;t=t.sibling}return null}var O=Object.assign,E=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function K(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList";case B:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case S:return"Portal";case z:return t.displayName||"Context";case U:return(t._context.displayName||"Context")+".Consumer";case L:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return e=t.displayName||null,e!==null?e:K(t.type)||"Memo";case y:e=t._payload,t=t._init;try{return K(t(e))}catch{}}return null}var P=Array.isArray,x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},W=[],nt=-1;function F(t){return{current:t}}function it(t){0>nt||(t.current=W[nt],W[nt]=null,nt--)}function at(t,e){nt++,W[nt]=t.current,t.current=e}var X=F(null),J=F(null),$=F(null),tt=F(null);function ut(t,e){switch(at($,e),at(J,t),at(X,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?e1(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=e1(e),t=n1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(X),at(X,t)}function Tt(){it(X),it(J),it($)}function gt(t){t.memoizedState!==null&&at(tt,t);var e=X.current,l=n1(e,t.type);e!==l&&(at(J,t),at(X,l))}function Mt(t){J.current===t&&(it(X),it(J)),tt.current===t&&(it(tt),qf._currentValue=Q)}var Rt,Ot;function xt(t){if(Rt===void 0)try{throw Error()}catch(l){var e=l.stack.trim().match(/\n( *(at )?)/);Rt=e&&e[1]||"",Ot=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+t+Ot}var Xt=!1;function Zt(t,e){if(!t||Xt)return"";Xt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(e){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(Et){var bt=Et}Reflect.construct(t,[],zt)}else{try{zt.call()}catch(Et){bt=Et}t.call(zt.prototype)}}else{try{throw Error()}catch(Et){bt=Et}(zt=t())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(Et){if(Et&&bt&&typeof Et.stack=="string")return[Et.stack,bt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=u.DetermineComponentFrameRoot(),V=C[0],k=C[1];if(V&&k){var rt=V.split(`
`),vt=k.split(`
`);for(v=u=0;u<rt.length&&!rt[u].includes("DetermineComponentFrameRoot");)u++;for(;v<vt.length&&!vt[v].includes("DetermineComponentFrameRoot");)v++;if(u===rt.length||v===vt.length)for(u=rt.length-1,v=vt.length-1;1<=u&&0<=v&&rt[u]!==vt[v];)v--;for(;1<=u&&0<=v;u--,v--)if(rt[u]!==vt[v]){if(u!==1||v!==1)do if(u--,v--,0>v||rt[u]!==vt[v]){var _t=`
`+rt[u].replace(" at new "," at ");return t.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",t.displayName)),_t}while(1<=u&&0<=v);break}}}finally{Xt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?xt(l):""}function ye(t,e){switch(t.tag){case 26:case 27:case 5:return xt(t.type);case 16:return xt("Lazy");case 13:return t.child!==e&&e!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return Zt(t.type,!1);case 11:return Zt(t.type.render,!1);case 1:return Zt(t.type,!0);case 31:return xt("Activity");default:return""}}function he(t){try{var e="",l=null;do e+=ye(t,l),l=t,t=t.return;while(t);return e}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ue=Object.prototype.hasOwnProperty,_n=d.unstable_scheduleCallback,Ge=d.unstable_cancelCallback,Be=d.unstable_shouldYield,Sa=d.unstable_requestPaint,dn=d.unstable_now,wr=d.unstable_getCurrentPriorityLevel,ll=d.unstable_ImmediatePriority,ba=d.unstable_UserBlockingPriority,ft=d.unstable_NormalPriority,Dt=d.unstable_LowPriority,Ut=d.unstable_IdlePriority,Qt=d.log,ue=d.unstable_setDisableYieldValue,rn=null,bn=null;function li(t){if(typeof Qt=="function"&&ue(t),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(rn,t)}catch{}}var Ca=Math.clz32?Math.clz32:vc,uh=Math.log,u0=Math.LN2;function vc(t){return t>>>=0,t===0?32:31-(uh(t)/u0|0)|0}var Ll=256,Hs=262144,wl=4194304;function rl(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yl(t,e,l){var u=t.pendingLanes;if(u===0)return 0;var v=0,C=t.suspendedLanes,V=t.pingedLanes;t=t.warmLanes;var k=u&134217727;return k!==0?(u=k&~C,u!==0?v=rl(u):(V&=k,V!==0?v=rl(V):l||(l=k&~t,l!==0&&(v=rl(l))))):(k=u&~C,k!==0?v=rl(k):V!==0?v=rl(V):l||(l=u&~t,l!==0&&(v=rl(l)))),v===0?0:e!==0&&e!==v&&(e&C)===0&&(C=v&-v,l=e&-e,C>=l||C===32&&(l&4194048)!==0)?e:v}function Yr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function ch(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var t=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),t}function qr(t){for(var e=[],l=0;31>l;l++)e.push(t);return e}function sl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Sc(t,e,l,u,v,C){var V=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var k=t.entanglements,rt=t.expirationTimes,vt=t.hiddenUpdates;for(l=V&~l;0<l;){var _t=31-Ca(l),zt=1<<_t;k[_t]=0,rt[_t]=-1;var bt=vt[_t];if(bt!==null)for(vt[_t]=null,_t=0;_t<bt.length;_t++){var Et=bt[_t];Et!==null&&(Et.lane&=-536870913)}l&=~zt}u!==0&&ql(t,u,0),C!==0&&v===0&&t.tag!==0&&(t.suspendedLanes|=C&~(V&~e))}function ql(t,e,l){t.pendingLanes|=e,t.suspendedLanes&=~e;var u=31-Ca(e);t.entangledLanes|=e,t.entanglements[u]=t.entanglements[u]|1073741824|l&261930}function bc(t,e){var l=t.entangledLanes|=e;for(t=t.entanglements;l;){var u=31-Ca(l),v=1<<u;v&e|t[u]&e&&(t[u]|=e),l&=~v}}function js(t,e){var l=e&-e;return l=(l&42)!==0?1:Ls(l),(l&(t.suspendedLanes|e))!==0?0:l}function Ls(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ws(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ui(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:_1(t.type))}function Gi(t,e){var l=Y.p;try{return Y.p=t,e()}finally{Y.p=l}}var Ba=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Ba,On="__reactProps$"+Ba,ri="__reactContainer$"+Ba,jo="__reactEvents$"+Ba,fh="__reactListeners$"+Ba,hh="__reactHandles$"+Ba,Lo="__reactResources$"+Ba,Vl="__reactMarker$"+Ba;function tn(t){delete t[Cn],delete t[On],delete t[jo],delete t[fh],delete t[hh]}function ol(t){var e=t[Cn];if(e)return e;for(var l=t.parentNode;l;){if(e=l[ri]||l[Cn]){if(l=e.alternate,e.child!==null||l!==null&&l.child!==null)for(t=u1(t);t!==null;){if(l=t[Cn])return l;t=u1(t)}return e}t=l,l=t.parentNode}return null}function ul(t){if(t=t[Cn]||t[ri]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Vr(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(r(33))}function Xl(t){var e=t[Lo];return e||(e=t[Lo]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Rn(t){t[Vl]=!0}var wo=new Set,Yo={};function Bi(t,e){En(t,e),En(t+"Capture",e)}function En(t,e){for(Yo[t]=e,t=0;t<e.length;t++)wo.add(e[t])}var pn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Xr={};function Vo(t){return Ue.call(Xr,t)?!0:Ue.call(qo,t)?!1:pn.test(t)?Xr[t]=!0:(qo[t]=!0,!1)}function Pr(t,e,l){if(Vo(e))if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var u=e.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+l)}}function Ha(t,e,l){if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+l)}}function ja(t,e,l,u){if(u===null)t.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(e,l,""+u)}}function sa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dh(t,e,l){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,C=u.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return v.call(this)},set:function(V){l=""+V,C.call(this,V)}}),Object.defineProperty(t,e,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(V){l=""+V},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Po(t){if(!t._valueTracker){var e=Xo(t)?"checked":"value";t._valueTracker=dh(t,e,""+t[e])}}function Cc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var l=e.getValue(),u="";return t&&(u=Xo(t)?t.checked?"true":"false":t.value),t=u,t!==l?(e.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ph=/[\n"\\]/g;function Ea(t){return t.replace(ph,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qs(t,e,l,u,v,C,V,k){t.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?t.type=V:t.removeAttribute("type"),e!=null?V==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+sa(e)):t.value!==""+sa(e)&&(t.value=""+sa(e)):V!=="submit"&&V!=="reset"||t.removeAttribute("value"),e!=null?Tc(t,V,sa(e)):l!=null?Tc(t,V,sa(l)):u!=null&&t.removeAttribute("value"),v==null&&C!=null&&(t.defaultChecked=!!C),v!=null&&(t.checked=v&&typeof v!="function"&&typeof v!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+sa(k):t.removeAttribute("name")}function Ec(t,e,l,u,v,C,V,k){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.type=C),e!=null||l!=null){if(!(C!=="submit"&&C!=="reset"||e!=null)){Po(t);return}l=l!=null?""+sa(l):"",e=e!=null?""+sa(e):l,k||e===t.value||(t.value=e),t.defaultValue=e}u=u??v,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=k?t.checked:!!u,t.defaultChecked=!!u,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(t.name=V),Po(t)}function Tc(t,e,l){e==="number"&&Ys(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Pl(t,e,l,u){if(t=t.options,e){e={};for(var v=0;v<l.length;v++)e["$"+l[v]]=!0;for(l=0;l<t.length;l++)v=e.hasOwnProperty("$"+t[l].value),t[l].selected!==v&&(t[l].selected=v),v&&u&&(t[l].defaultSelected=!0)}else{for(l=""+sa(l),e=null,v=0;v<t.length;v++){if(t[v].value===l){t[v].selected=!0,u&&(t[v].defaultSelected=!0);return}e!==null||t[v].disabled||(e=t[v])}e!==null&&(e.selected=!0)}}function Ac(t,e,l){if(e!=null&&(e=""+sa(e),e!==t.value&&(t.value=e),l==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=l!=null?""+sa(l):""}function _c(t,e,l,u){if(e==null){if(u!=null){if(l!=null)throw Error(r(92));if(P(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),e=l}l=sa(e),t.defaultValue=l,u=t.textContent,u===l&&u!==""&&u!==null&&(t.value=u),Po(t)}function cl(t,e){if(e){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=e;return}}t.textContent=e}var gh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oc(t,e,l){var u=e.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":u?t.setProperty(e,l):typeof l!="number"||l===0||gh.has(e)?e==="float"?t.cssFloat=l:t[e]=(""+l).trim():t[e]=l+"px"}function Rc(t,e,l){if(e!=null&&typeof e!="object")throw Error(r(62));if(t=t.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||e!=null&&e.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var v in e)u=e[v],e.hasOwnProperty(v)&&l[v]!==u&&Oc(t,v,u)}else for(var C in e)e.hasOwnProperty(C)&&Oc(t,C,e[C])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),c0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vs(t){return c0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function oa(){}var Qr=null;function Ko(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hi=null,si=null;function Mc(t){var e=ul(t);if(e&&(t=e.stateNode)){var l=t[On]||null;t:switch(t=e.stateNode,e.type){case"input":if(qs(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),e=l.name,l.type==="radio"&&e!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ea(""+e)+'"][type="radio"]'),e=0;e<l.length;e++){var u=l[e];if(u!==t&&u.form===t.form){var v=u[On]||null;if(!v)throw Error(r(90));qs(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(e=0;e<l.length;e++)u=l[e],u.form===t.form&&Cc(u)}break t;case"textarea":Ac(t,l.value,l.defaultValue);break t;case"select":e=l.value,e!=null&&Pl(t,!!l.multiple,e,!1)}}}var Io=!1;function xc(t,e,l){if(Io)return t(e,l);Io=!0;try{var u=t(e);return u}finally{if(Io=!1,(Hi!==null||si!==null)&&(ys(),Hi&&(e=Hi,t=si,si=Hi=null,Mc(e),t)))for(e=0;e<t.length;e++)Mc(t[e])}}function Kr(t,e){var l=t.stateNode;if(l===null)return null;var u=l[On]||null;if(u===null)return null;l=u[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break t;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,e,typeof l));return l}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=!1;if(oi)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Zo=!1}var ji=null,Jo=null,Ir=null;function Nc(){if(Ir)return Ir;var t,e=Jo,l=e.length,u,v="value"in ji?ji.value:ji.textContent,C=v.length;for(t=0;t<l&&e[t]===v[t];t++);var V=l-t;for(u=1;u<=V&&e[l-u]===v[C-u];u++);return Ir=v.slice(t,1<u?1-u:void 0)}function Xs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ps(){return!0}function Fo(){return!1}function Fn(t){function e(l,u,v,C,V){this._reactName=l,this._targetInst=v,this.type=u,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(l=t[k],this[k]=l?l(C):C[k]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ps:Fo,this.isPropagationStopped=Fo,this}return O(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Fn(fl),Qs=O({},fl,{view:0,detail:0}),vh=Fn(Qs),Kl,Ks,hl,Is=O({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(Kl=t.screenX-hl.screenX,Ks=t.screenY-hl.screenY):Ks=Kl=0,hl=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:Ks}}),Dc=Fn(Is),Wo=O({},Is,{dataTransfer:0}),Zs=Fn(Wo),$o=O({},Qs,{relatedTarget:0}),tu=Fn($o),yh=O({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),dl=Fn(yh),Sh=O({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pl=Fn(Sh),Li=O({},fl,{data:0}),Js=Fn(Li),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Il(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ch[t])?!!e[t]:!1}function Zr(){return Il}var Eh=O({},Qs,{key:function(t){if(t.key){var e=zc[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(t){return t.type==="keypress"?Xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uc=Fn(Eh),Th=O({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=Fn(Th),f0=O({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),Un=Fn(f0),Ah=O({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_h=Fn(Ah),Oh=O({},Is,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rh=Fn(Oh),Mh=O({},fl,{newState:0,oldState:0}),eu=Fn(Mh),Bc=[9,13,27,32],nu=oi&&"CompositionEvent"in window,Jr=null;oi&&"documentMode"in document&&(Jr=document.documentMode);var xh=oi&&"TextEvent"in window&&!Jr,au=oi&&(!nu||Jr&&8<Jr&&11>=Jr),iu=" ",Hc=!1;function lu(t,e){switch(t){case"keyup":return Bc.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fs(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gl=!1;function Nh(t,e){switch(t){case"compositionend":return Fs(e);case"keypress":return e.which!==32?null:(Hc=!0,iu);case"textInput":return t=e.data,t===iu&&Hc?null:t;default:return null}}function jc(t,e){if(gl)return t==="compositionend"||!nu&&lu(t,e)?(t=Nc(),Ir=Jo=ji=null,gl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return au&&e.locale!=="ko"?null:e.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ui(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dh[t.type]:e==="textarea"}function ru(t,e,l,u){Hi?si?si.push(u):si=[u]:Hi=u,e=Ed(e,"onChange"),0<e.length&&(l=new ko("onChange","change",null,l,u),t.push({event:l,listeners:e}))}var ks=null,Fr=null;function Ta(t){Jp(t,0)}function Ws(t){var e=Vr(t);if(Cc(e))return t}function su(t,e){if(t==="change")return e}var Lc=!1;if(oi){var ou;if(oi){var $s="oninput"in document;if(!$s){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),$s=typeof uu.oninput=="function"}ou=$s}else ou=!1;Lc=ou&&(!document.documentMode||9<document.documentMode)}function wc(){ks&&(ks.detachEvent("onpropertychange",to),Fr=ks=null)}function to(t){if(t.propertyName==="value"&&Ws(Fr)){var e=[];ru(e,Fr,t,Ko(t)),xc(Ta,e)}}function eo(t,e,l){t==="focusin"?(wc(),ks=e,Fr=l,ks.attachEvent("onpropertychange",to)):t==="focusout"&&wc()}function en(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ws(Fr)}function h0(t,e){if(t==="click")return Ws(e)}function d0(t,e){if(t==="input"||t==="change")return Ws(e)}function zh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:zh;function La(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var l=Object.keys(t),u=Object.keys(e);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var v=l[u];if(!Ue.call(e,v)||!Gn(t[v],e[v]))return!1}return!0}function Yc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qc(t,e){var l=Yc(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=e&&u>=e)return{node:l,offset:e-t};t=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Yc(l)}}function kr(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kr(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qa(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ys(t.document);e instanceof t.HTMLIFrameElement;){try{var l=typeof e.contentWindow.location.href=="string"}catch{l=!1}if(l)t=e.contentWindow;else break;e=Ys(t.document)}return e}function cu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Vc=oi&&"documentMode"in document&&11>=document.documentMode,Zl=null,no=null,Jl=null,Wr=!1;function Xc(t,e,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wr||Zl==null||Zl!==Ys(u)||(u=Zl,"selectionStart"in u&&cu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Jl&&La(Jl,u)||(Jl=u,u=Ed(no,"onSelect"),0<u.length&&(e=new ko("onSelect","select",null,e,l),t.push({event:e,listeners:u}),e.target=Zl)))}function ml(t,e){var l={};return l[t.toLowerCase()]=e.toLowerCase(),l["Webkit"+t]="webkit"+e,l["Moz"+t]="moz"+e,l}var $r={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionrun:ml("Transition","TransitionRun"),transitionstart:ml("Transition","TransitionStart"),transitioncancel:ml("Transition","TransitionCancel"),transitionend:ml("Transition","TransitionEnd")},fu={},Pc={};oi&&(Pc=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function Bn(t){if(fu[t])return fu[t];if(!$r[t])return t;var e=$r[t],l;for(l in e)if(e.hasOwnProperty(l)&&l in Pc)return fu[t]=e[l];return t}var hu=Bn("animationend"),Qc=Bn("animationiteration"),Uh=Bn("animationstart"),Kc=Bn("transitionrun"),kn=Bn("transitionstart"),Gh=Bn("transitioncancel"),Wn=Bn("transitionend"),Ic=new Map,ci="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ci.push("scrollEnd");function Hn(t,e){Ic.set(t,e),Bi(e,[t])}var Ka=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ua=[],vl=0,wa=0;function ao(){for(var t=vl,e=wa=vl=0;e<t;){var l=ua[e];ua[e++]=null;var u=ua[e];ua[e++]=null;var v=ua[e];ua[e++]=null;var C=ua[e];if(ua[e++]=null,u!==null&&v!==null){var V=u.pending;V===null?v.next=v:(v.next=V.next,V.next=v),u.pending=v}C!==0&&Zc(l,v,C)}}function wi(t,e,l,u){ua[vl++]=t,ua[vl++]=e,ua[vl++]=l,ua[vl++]=u,wa|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Fl(t,e,l,u){return wi(t,e,l,u),io(t)}function Aa(t,e){return wi(t,null,null,e),io(t)}function Zc(t,e,l){t.lanes|=l;var u=t.alternate;u!==null&&(u.lanes|=l);for(var v=!1,C=t.return;C!==null;)C.childLanes|=l,u=C.alternate,u!==null&&(u.childLanes|=l),C.tag===22&&(t=C.stateNode,t===null||t._visibility&1||(v=!0)),t=C,C=C.return;return t.tag===3?(C=t.stateNode,v&&e!==null&&(v=31-Ca(l),t=C.hiddenUpdates,u=t[v],u===null?t[v]=[e]:u.push(e),e.lane=l|536870912),C):null}function io(t){if(50<xr)throw xr=0,Nr=null,Error(r(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var fi={};function Bh(t,e,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,l,u){return new Bh(t,e,l,u)}function du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ia(t,e){var l=t.alternate;return l===null?(l=Qn(t.tag,e,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=e,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,e=t.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function pu(t,e){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,e=l.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ts(t,e,l,u,v,C){var V=0;if(u=t,typeof t=="function")du(t)&&(V=1);else if(typeof t=="string")V=dv(t,l,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case B:return t=Qn(31,l,e,v),t.elementType=B,t.lanes=C,t;case G:return yl(l.children,v,C,e);case w:V=8,v|=24;break;case j:return t=Qn(12,l,e,v|2),t.elementType=j,t.lanes=C,t;case M:return t=Qn(13,l,e,v),t.elementType=M,t.lanes=C,t;case A:return t=Qn(19,l,e,v),t.elementType=A,t.lanes=C,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:V=10;break t;case U:V=9;break t;case L:V=11;break t;case T:V=14;break t;case y:V=16,u=null;break t}V=29,l=Error(r(130,t===null?"null":typeof t,"")),u=null}return e=Qn(V,l,e,v),e.elementType=t,e.type=u,e.lanes=C,e}function yl(t,e,l,u){return t=Qn(7,t,u,e),t.lanes=l,t}function lo(t,e,l){return t=Qn(6,t,null,e),t.lanes=l,t}function ca(t){var e=Qn(18,null,null,0);return e.stateNode=t,e}function gu(t,e,l){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=l,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var fa=new WeakMap;function _a(t,e){if(typeof t=="object"&&t!==null){var l=fa.get(t);return l!==void 0?l:(e={value:t,source:e,stack:he(e)},fa.set(t,e),e)}return{value:t,source:e,stack:he(e)}}var kl=[],es=0,Za=null,ns=0,ha=[],jn=0,Yi=null,Ja=1,Fa="";function hi(t,e){kl[es++]=ns,kl[es++]=Za,Za=t,ns=e}function mu(t,e,l){ha[jn++]=Ja,ha[jn++]=Fa,ha[jn++]=Yi,Yi=t;var u=Ja;t=Fa;var v=32-Ca(u)-1;u&=~(1<<v),l+=1;var C=32-Ca(e)+v;if(30<C){var V=v-v%5;C=(u&(1<<V)-1).toString(32),u>>=V,v-=V,Ja=1<<32-Ca(e)+v|l<<v|u,Fa=C+t}else Ja=1<<C|l<<v|u,Fa=t}function ro(t){t.return!==null&&(hi(t,1),mu(t,1,0))}function Jc(t){for(;t===Za;)Za=kl[--es],kl[es]=null,ns=kl[--es],kl[es]=null;for(;t===Yi;)Yi=ha[--jn],ha[jn]=null,Fa=ha[--jn],ha[jn]=null,Ja=ha[--jn],ha[jn]=null}function Hh(t,e){ha[jn++]=Ja,ha[jn++]=Fa,ha[jn++]=Yi,Ja=e.id,Fa=e.overflow,Yi=t}var Ln=null,we=null,pe=!1,Oa=null,$n=!1,vu=Error(r(519));function qi(t){var e=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw as(_a(e,t)),vu}function Fc(t){var e=t.stateNode,l=t.type,u=t.memoizedProps;switch(e[Cn]=t,e[On]=u,l){case"dialog":ve("cancel",e),ve("close",e);break;case"iframe":case"object":case"embed":ve("load",e);break;case"video":case"audio":for(l=0;l<Hf.length;l++)ve(Hf[l],e);break;case"source":ve("error",e);break;case"img":case"image":case"link":ve("error",e),ve("load",e);break;case"details":ve("toggle",e);break;case"input":ve("invalid",e),Ec(e,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ve("invalid",e);break;case"textarea":ve("invalid",e),_c(e,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||e.textContent===""+l||u.suppressHydrationWarning===!0||$p(e.textContent,l)?(u.popover!=null&&(ve("beforetoggle",e),ve("toggle",e)),u.onScroll!=null&&ve("scroll",e),u.onScrollEnd!=null&&ve("scrollend",e),u.onClick!=null&&(e.onclick=oa),e=!0):e=!1,e||qi(t,!0)}function kc(t){for(Ln=t.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Ln=Ln.return}}function Wl(t){if(t!==Ln)return!1;if(!pe)return kc(t),pe=!0,!1;var e=t.tag,l;if((l=e!==3&&e!==27)&&((l=e===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||D0(t.type,t.memoizedProps)),l=!l),l&&we&&qi(t),kc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));we=o1(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));we=o1(t)}else e===27?(e=we,Cs(t.type)?(t=H0,H0=null,we=t):we=e):we=Ln?Ni(t.stateNode.nextSibling):null;return!0}function Sl(){we=Ln=null,pe=!1}function $l(){var t=Oa;return t!==null&&(Ve===null?Ve=t:Ve.push.apply(Ve,t),Oa=null),t}function as(t){Oa===null?Oa=[t]:Oa.push(t)}var yu=F(null),me=null,ka=null;function bl(t,e,l){at(yu,e._currentValue),e._currentValue=l}function di(t){t._currentValue=yu.current,it(yu)}function Wc(t,e,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,u!==null&&(u.childLanes|=e)):u!==null&&(u.childLanes&e)!==e&&(u.childLanes|=e),t===l)break;t=t.return}}function $c(t,e,l,u){var v=t.child;for(v!==null&&(v.return=t);v!==null;){var C=v.dependencies;if(C!==null){var V=v.child;C=C.firstContext;t:for(;C!==null;){var k=C;C=v;for(var rt=0;rt<e.length;rt++)if(k.context===e[rt]){C.lanes|=l,k=C.alternate,k!==null&&(k.lanes|=l),Wc(C.return,l,t),u||(V=null);break t}C=k.next}}else if(v.tag===18){if(V=v.return,V===null)throw Error(r(341));V.lanes|=l,C=V.alternate,C!==null&&(C.lanes|=l),Wc(V,l,t),V=null}else V=v.child;if(V!==null)V.return=v;else for(V=v;V!==null;){if(V===t){V=null;break}if(v=V.sibling,v!==null){v.return=V.return,V=v;break}V=V.return}v=V}}function is(t,e,l,u){t=null;for(var v=e,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var V=v.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var k=v.type;Gn(v.pendingProps.value,V.value)||(t!==null?t.push(k):t=[k])}}else if(v===tt.current){if(V=v.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(t!==null?t.push(qf):t=[qf])}v=v.return}t!==null&&$c(e,t,l,u),e.flags|=262144}function Su(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vi(t){me=t,ka=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qe(t){return oo(me,t)}function so(t,e){return me===null&&Vi(t),oo(t,e)}function oo(t,e){var l=e._currentValue;if(e={context:e,memoizedValue:l,next:null},ka===null){if(t===null)throw Error(r(308));ka=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ka=ka.next=e;return l}var tr=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(l,u){t.push(u)}};this.abort=function(){e.aborted=!0,t.forEach(function(l){return l()})}},tf=d.unstable_scheduleCallback,ef=d.unstable_NormalPriority,gn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bu(){return{controller:new tr,data:new Map,refCount:0}}function ls(t){t.refCount--,t.refCount===0&&tf(ef,function(){t.controller.abort()})}var rs=null,Cu=0,er=0,Cl=null;function de(t,e){if(rs===null){var l=rs=[];Cu=0,er=E0(),Cl={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Cu++,e.then(jh,jh),e}function jh(){if(--Cu===0&&rs!==null){Cl!==null&&(Cl.status="fulfilled");var t=rs;rs=null,er=0,Cl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Ra(t,e){var l=[],u={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return t.then(function(){u.status="fulfilled",u.value=e;for(var v=0;v<l.length;v++)(0,l[v])(e)},function(v){for(u.status="rejected",u.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),u}var Eu=x.S;x.S=function(t,e){Ju=dn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&de(t,e),Eu!==null&&Eu(t,e)};var nr=F(null);function ss(){var t=nr.current;return t!==null?t:oe.pooledCache}function Xi(t,e){e===null?at(nr,nr.current):at(nr,e.pool)}function ar(){var t=ss();return t===null?null:{parent:gn._currentValue,pool:t}}var ir=Error(r(460)),uo=Error(r(474)),Tu=Error(r(542)),co={then:function(){}};function Pi(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Au(t,e,l){switch(l=t[l],l===void 0?t.push(e):l!==e&&(e.then(oa,oa),e=l),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ii(t),t;default:if(typeof e.status=="string")e.then(oa,oa);else{if(t=oe,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=e,t.status="pending",t.then(function(u){if(e.status==="pending"){var v=e;v.status="fulfilled",v.value=u}},function(u){if(e.status==="pending"){var v=e;v.status="rejected",v.reason=u}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ii(t),t}throw Ki=e,ir}}function Qi(t){try{var e=t._init;return e(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ki=l,ir):l}}var Ki=null;function _u(){if(Ki===null)throw Error(r(459));var t=Ki;return Ki=null,t}function Ii(t){if(t===ir||t===Tu)throw Error(r(483))}var El=null,fo=0;function ho(t){var e=fo;return fo+=1,El===null&&(El=[]),Au(El,t,e)}function po(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function lr(t,e){throw e.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(e),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Ft(t){function e(dt,ct){if(t){var mt=dt.deletions;mt===null?(dt.deletions=[ct],dt.flags|=16):mt.push(ct)}}function l(dt,ct){if(!t)return null;for(;ct!==null;)e(dt,ct),ct=ct.sibling;return null}function u(dt){for(var ct=new Map;dt!==null;)dt.key!==null?ct.set(dt.key,dt):ct.set(dt.index,dt),dt=dt.sibling;return ct}function v(dt,ct){return dt=Ia(dt,ct),dt.index=0,dt.sibling=null,dt}function C(dt,ct,mt){return dt.index=mt,t?(mt=dt.alternate,mt!==null?(mt=mt.index,mt<ct?(dt.flags|=67108866,ct):mt):(dt.flags|=67108866,ct)):(dt.flags|=1048576,ct)}function V(dt){return t&&dt.alternate===null&&(dt.flags|=67108866),dt}function k(dt,ct,mt,Nt){return ct===null||ct.tag!==6?(ct=lo(mt,dt.mode,Nt),ct.return=dt,ct):(ct=v(ct,mt),ct.return=dt,ct)}function rt(dt,ct,mt,Nt){var Jt=mt.type;return Jt===G?_t(dt,ct,mt.props.children,Nt,mt.key):ct!==null&&(ct.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===y&&Qi(Jt)===ct.type)?(ct=v(ct,mt.props),po(ct,mt),ct.return=dt,ct):(ct=ts(mt.type,mt.key,mt.props,null,dt.mode,Nt),po(ct,mt),ct.return=dt,ct)}function vt(dt,ct,mt,Nt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==mt.containerInfo||ct.stateNode.implementation!==mt.implementation?(ct=gu(mt,dt.mode,Nt),ct.return=dt,ct):(ct=v(ct,mt.children||[]),ct.return=dt,ct)}function _t(dt,ct,mt,Nt,Jt){return ct===null||ct.tag!==7?(ct=yl(mt,dt.mode,Nt,Jt),ct.return=dt,ct):(ct=v(ct,mt),ct.return=dt,ct)}function zt(dt,ct,mt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=lo(""+ct,dt.mode,mt),ct.return=dt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case D:return mt=ts(ct.type,ct.key,ct.props,null,dt.mode,mt),po(mt,ct),mt.return=dt,mt;case S:return ct=gu(ct,dt.mode,mt),ct.return=dt,ct;case y:return ct=Qi(ct),zt(dt,ct,mt)}if(P(ct)||I(ct))return ct=yl(ct,dt.mode,mt,null),ct.return=dt,ct;if(typeof ct.then=="function")return zt(dt,ho(ct),mt);if(ct.$$typeof===z)return zt(dt,so(dt,ct),mt);lr(dt,ct)}return null}function bt(dt,ct,mt,Nt){var Jt=ct!==null?ct.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Jt!==null?null:k(dt,ct,""+mt,Nt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:return mt.key===Jt?rt(dt,ct,mt,Nt):null;case S:return mt.key===Jt?vt(dt,ct,mt,Nt):null;case y:return mt=Qi(mt),bt(dt,ct,mt,Nt)}if(P(mt)||I(mt))return Jt!==null?null:_t(dt,ct,mt,Nt,null);if(typeof mt.then=="function")return bt(dt,ct,ho(mt),Nt);if(mt.$$typeof===z)return bt(dt,ct,so(dt,mt),Nt);lr(dt,mt)}return null}function Et(dt,ct,mt,Nt,Jt){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return dt=dt.get(mt)||null,k(ct,dt,""+Nt,Jt);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case D:return dt=dt.get(Nt.key===null?mt:Nt.key)||null,rt(ct,dt,Nt,Jt);case S:return dt=dt.get(Nt.key===null?mt:Nt.key)||null,vt(ct,dt,Nt,Jt);case y:return Nt=Qi(Nt),Et(dt,ct,mt,Nt,Jt)}if(P(Nt)||I(Nt))return dt=dt.get(mt)||null,_t(ct,dt,Nt,Jt,null);if(typeof Nt.then=="function")return Et(dt,ct,mt,ho(Nt),Jt);if(Nt.$$typeof===z)return Et(dt,ct,mt,so(ct,Nt),Jt);lr(ct,Nt)}return null}function Kt(dt,ct,mt,Nt){for(var Jt=null,Me=null,It=ct,fe=ct=0,Se=null;It!==null&&fe<mt.length;fe++){It.index>fe?(Se=It,It=null):Se=It.sibling;var xe=bt(dt,It,mt[fe],Nt);if(xe===null){It===null&&(It=Se);break}t&&It&&xe.alternate===null&&e(dt,It),ct=C(xe,ct,fe),Me===null?Jt=xe:Me.sibling=xe,Me=xe,It=Se}if(fe===mt.length)return l(dt,It),pe&&hi(dt,fe),Jt;if(It===null){for(;fe<mt.length;fe++)It=zt(dt,mt[fe],Nt),It!==null&&(ct=C(It,ct,fe),Me===null?Jt=It:Me.sibling=It,Me=It);return pe&&hi(dt,fe),Jt}for(It=u(It);fe<mt.length;fe++)Se=Et(It,dt,fe,mt[fe],Nt),Se!==null&&(t&&Se.alternate!==null&&It.delete(Se.key===null?fe:Se.key),ct=C(Se,ct,fe),Me===null?Jt=Se:Me.sibling=Se,Me=Se);return t&&It.forEach(function(Os){return e(dt,Os)}),pe&&hi(dt,fe),Jt}function te(dt,ct,mt,Nt){if(mt==null)throw Error(r(151));for(var Jt=null,Me=null,It=ct,fe=ct=0,Se=null,xe=mt.next();It!==null&&!xe.done;fe++,xe=mt.next()){It.index>fe?(Se=It,It=null):Se=It.sibling;var Os=bt(dt,It,xe.value,Nt);if(Os===null){It===null&&(It=Se);break}t&&It&&Os.alternate===null&&e(dt,It),ct=C(Os,ct,fe),Me===null?Jt=Os:Me.sibling=Os,Me=Os,It=Se}if(xe.done)return l(dt,It),pe&&hi(dt,fe),Jt;if(It===null){for(;!xe.done;fe++,xe=mt.next())xe=zt(dt,xe.value,Nt),xe!==null&&(ct=C(xe,ct,fe),Me===null?Jt=xe:Me.sibling=xe,Me=xe);return pe&&hi(dt,fe),Jt}for(It=u(It);!xe.done;fe++,xe=mt.next())xe=Et(It,dt,fe,xe.value,Nt),xe!==null&&(t&&xe.alternate!==null&&It.delete(xe.key===null?fe:xe.key),ct=C(xe,ct,fe),Me===null?Jt=xe:Me.sibling=xe,Me=xe);return t&&It.forEach(function(Av){return e(dt,Av)}),pe&&hi(dt,fe),Jt}function Pe(dt,ct,mt,Nt){if(typeof mt=="object"&&mt!==null&&mt.type===G&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:t:{for(var Jt=mt.key;ct!==null;){if(ct.key===Jt){if(Jt=mt.type,Jt===G){if(ct.tag===7){l(dt,ct.sibling),Nt=v(ct,mt.props.children),Nt.return=dt,dt=Nt;break t}}else if(ct.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===y&&Qi(Jt)===ct.type){l(dt,ct.sibling),Nt=v(ct,mt.props),po(Nt,mt),Nt.return=dt,dt=Nt;break t}l(dt,ct);break}else e(dt,ct);ct=ct.sibling}mt.type===G?(Nt=yl(mt.props.children,dt.mode,Nt,mt.key),Nt.return=dt,dt=Nt):(Nt=ts(mt.type,mt.key,mt.props,null,dt.mode,Nt),po(Nt,mt),Nt.return=dt,dt=Nt)}return V(dt);case S:t:{for(Jt=mt.key;ct!==null;){if(ct.key===Jt)if(ct.tag===4&&ct.stateNode.containerInfo===mt.containerInfo&&ct.stateNode.implementation===mt.implementation){l(dt,ct.sibling),Nt=v(ct,mt.children||[]),Nt.return=dt,dt=Nt;break t}else{l(dt,ct);break}else e(dt,ct);ct=ct.sibling}Nt=gu(mt,dt.mode,Nt),Nt.return=dt,dt=Nt}return V(dt);case y:return mt=Qi(mt),Pe(dt,ct,mt,Nt)}if(P(mt))return Kt(dt,ct,mt,Nt);if(I(mt)){if(Jt=I(mt),typeof Jt!="function")throw Error(r(150));return mt=Jt.call(mt),te(dt,ct,mt,Nt)}if(typeof mt.then=="function")return Pe(dt,ct,ho(mt),Nt);if(mt.$$typeof===z)return Pe(dt,ct,so(dt,mt),Nt);lr(dt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,ct!==null&&ct.tag===6?(l(dt,ct.sibling),Nt=v(ct,mt),Nt.return=dt,dt=Nt):(l(dt,ct),Nt=lo(mt,dt.mode,Nt),Nt.return=dt,dt=Nt),V(dt)):l(dt,ct)}return function(dt,ct,mt,Nt){try{fo=0;var Jt=Pe(dt,ct,mt,Nt);return El=null,Jt}catch(It){if(It===ir||It===Tu)throw It;var Me=Qn(29,It,null,dt.mode);return Me.lanes=Nt,Me.return=dt,Me}finally{}}}var rr=Ft(!0),Lh=Ft(!1),Zi=!1;function sr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Tl(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Al(t,e,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Wt&2)!==0){var v=u.pending;return v===null?e.next=e:(e.next=v.next,v.next=e),u.pending=e,e=io(t),Zc(t,null,l),e}return wi(t,u,e,l),io(t)}function go(t,e,l){if(e=e.updateQueue,e!==null&&(e=e.shared,(l&4194048)!==0)){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,bc(t,l)}}function af(t,e){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var v=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var V={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};C===null?v=C=V:C=C.next=V,l=l.next}while(l!==null);C===null?v=C=e:C=C.next=e}else v=C=e;l={baseState:u.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:u.shared,callbacks:u.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=e:t.next=e,l.lastBaseUpdate=e}var mo=!1;function os(){if(mo){var t=Cl;if(t!==null)throw t}}function _l(t,e,l,u){mo=!1;var v=t.updateQueue;Zi=!1;var C=v.firstBaseUpdate,V=v.lastBaseUpdate,k=v.shared.pending;if(k!==null){v.shared.pending=null;var rt=k,vt=rt.next;rt.next=null,V===null?C=vt:V.next=vt,V=rt;var _t=t.alternate;_t!==null&&(_t=_t.updateQueue,k=_t.lastBaseUpdate,k!==V&&(k===null?_t.firstBaseUpdate=vt:k.next=vt,_t.lastBaseUpdate=rt))}if(C!==null){var zt=v.baseState;V=0,_t=vt=rt=null,k=C;do{var bt=k.lane&-536870913,Et=bt!==k.lane;if(Et?(re&bt)===bt:(u&bt)===bt){bt!==0&&bt===er&&(mo=!0),_t!==null&&(_t=_t.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});t:{var Kt=t,te=k;bt=e;var Pe=l;switch(te.tag){case 1:if(Kt=te.payload,typeof Kt=="function"){zt=Kt.call(Pe,zt,bt);break t}zt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=te.payload,bt=typeof Kt=="function"?Kt.call(Pe,zt,bt):Kt,bt==null)break t;zt=O({},zt,bt);break t;case 2:Zi=!0}}bt=k.callback,bt!==null&&(t.flags|=64,Et&&(t.flags|=8192),Et=v.callbacks,Et===null?v.callbacks=[bt]:Et.push(bt))}else Et={lane:bt,tag:k.tag,payload:k.payload,callback:k.callback,next:null},_t===null?(vt=_t=Et,rt=zt):_t=_t.next=Et,V|=bt;if(k=k.next,k===null){if(k=v.shared.pending,k===null)break;Et=k,k=Et.next,Et.next=null,v.lastBaseUpdate=Et,v.shared.pending=null}}while(!0);_t===null&&(rt=zt),v.baseState=rt,v.firstBaseUpdate=vt,v.lastBaseUpdate=_t,C===null&&(v.shared.lanes=0),Ul|=V,t.lanes=V,t.memoizedState=zt}}function lf(t,e){if(typeof t!="function")throw Error(r(191,t));t.call(e)}function wh(t,e){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)lf(l[t],e)}var us=F(null),pi=F(0);function gi(t,e){t=Xa,at(pi,t),at(us,e),Xa=t|e.baseLanes}function Mn(){at(pi,Xa),at(us,us.current)}function mi(){Xa=pi.current,it(us),it(pi)}var Fe=F(null),Ya=null;function Ol(t){var e=t.alternate;at(sn,sn.current&1),at(Fe,t),Ya===null&&(e===null||us.current!==null||e.memoizedState!==null)&&(Ya=t)}function mn(t){at(sn,sn.current),at(Fe,t),Ya===null&&(Ya=t)}function vi(t){t.tag===22?(at(sn,sn.current),at(Fe,t),Ya===null&&(Ya=t)):Rl()}function Rl(){at(sn,sn.current),at(Fe,Fe.current)}function Ma(t){it(Fe),Ya===t&&(Ya=null),it(sn)}var sn=F(0);function Ou(t){for(var e=t;e!==null;){if(e.tag===13){var l=e.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||G0(l)||B0(l)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yi=0,ae=null,Ne=null,vn=null,Ji=!1,qa=!1,or=!1,Ru=0,vo=0,Si=null,p0=0;function ln(){throw Error(r(321))}function rf(t,e){if(e===null)return!1;for(var l=0;l<e.length&&l<t.length;l++)if(!Gn(t[l],e[l]))return!1;return!0}function ur(t,e,l,u,v,C){return yi=C,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,x.H=t===null||t.memoizedState===null?cr:Co,or=!1,C=l(u,v),or=!1,qa&&(C=qh(e,l,u,v)),Yh(t),C}function Yh(t){x.H=fs;var e=Ne!==null&&Ne.next!==null;if(yi=0,vn=Ne=ae=null,Ji=!1,vo=0,Si=null,e)throw Error(r(300));t===null||yn||(t=t.dependencies,t!==null&&Su(t)&&(yn=!0))}function qh(t,e,l,u){ae=t;var v=0;do{if(qa&&(Si=null),vo=0,qa=!1,25<=v)throw Error(r(301));if(v+=1,vn=Ne=null,t.updateQueue!=null){var C=t.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}x.H=fr,C=e(l,u)}while(qa);return C}function g0(){var t=x.H,e=t.useState()[0];return e=typeof e.then=="function"?yo(e):e,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(ae.flags|=1024),e}function sf(){var t=Ru!==0;return Ru=0,t}function of(t,e,l){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l}function uf(t){if(Ji){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ji=!1}yi=0,vn=Ne=ae=null,qa=!1,vo=Ru=0,Si=null}function ta(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?ae.memoizedState=vn=t:vn=vn.next=t,vn}function on(){if(Ne===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=vn===null?ae.memoizedState:vn.next;if(e!==null)vn=e,Ne=t;else{if(t===null)throw ae.alternate===null?Error(r(467)):Error(r(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},vn===null?ae.memoizedState=vn=t:vn=vn.next=t}return vn}function Mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var e=vo;return vo+=1,Si===null&&(Si=[]),t=Au(Si,t,e),e=ae,(vn===null?e.memoizedState:vn.next)===null&&(e=e.alternate,x.H=e===null||e.memoizedState===null?cr:Co),t}function xu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===z)return Qe(t)}throw Error(r(438,String(t)))}function cf(t){var e=null,l=ae.updateQueue;if(l!==null&&(e=l.memoCache),e==null){var u=ae.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(e={data:u.data.map(function(v){return v.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),l===null&&(l=Mu(),ae.updateQueue=l),l.memoCache=e,l=e.data[e.index],l===void 0)for(l=e.data[e.index]=Array(t),u=0;u<t;u++)l[u]=N;return e.index++,l}function bi(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=on();return ff(e,Ne,t)}function ff(t,e,l){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var v=t.baseQueue,C=u.pending;if(C!==null){if(v!==null){var V=v.next;v.next=C.next,C.next=V}e.baseQueue=v=C,u.pending=null}if(C=t.baseState,v===null)t.memoizedState=C;else{e=v.next;var k=V=null,rt=null,vt=e,_t=!1;do{var zt=vt.lane&-536870913;if(zt!==vt.lane?(re&zt)===zt:(yi&zt)===zt){var bt=vt.revertLane;if(bt===0)rt!==null&&(rt=rt.next={lane:0,revertLane:0,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),zt===er&&(_t=!0);else if((yi&bt)===bt){vt=vt.next,bt===er&&(_t=!0);continue}else zt={lane:0,revertLane:vt.revertLane,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},rt===null?(k=rt=zt,V=C):rt=rt.next=zt,ae.lanes|=bt,Ul|=bt;zt=vt.action,or&&l(C,zt),C=vt.hasEagerState?vt.eagerState:l(C,zt)}else bt={lane:zt,revertLane:vt.revertLane,gesture:vt.gesture,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},rt===null?(k=rt=bt,V=C):rt=rt.next=bt,ae.lanes|=zt,Ul|=zt;vt=vt.next}while(vt!==null&&vt!==e);if(rt===null?V=C:rt.next=k,!Gn(C,t.memoizedState)&&(yn=!0,_t&&(l=Cl,l!==null)))throw l;t.memoizedState=C,t.baseState=V,t.baseQueue=rt,u.lastRenderedState=C}return v===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function hf(t){var e=on(),l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var u=l.dispatch,v=l.pending,C=e.memoizedState;if(v!==null){l.pending=null;var V=v=v.next;do C=t(C,V.action),V=V.next;while(V!==v);Gn(C,e.memoizedState)||(yn=!0),e.memoizedState=C,e.baseQueue===null&&(e.baseState=C),l.lastRenderedState=C}return[C,u]}function Vh(t,e,l){var u=ae,v=on(),C=pe;if(C){if(l===void 0)throw Error(r(407));l=l()}else l=e();var V=!Gn((Ne||v).memoizedState,l);if(V&&(v.memoizedState=l,yn=!0),v=v.queue,yf(df.bind(null,u,v,t),[t]),v.getSnapshot!==e||V||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,cs(9,{destroy:void 0},Ph.bind(null,u,v,l,e),null),oe===null)throw Error(r(349));C||(yi&127)!==0||Xh(u,e,l)}return l}function Xh(t,e,l){t.flags|=16384,t={getSnapshot:e,value:l},e=ae.updateQueue,e===null?(e=Mu(),ae.updateQueue=e,e.stores=[t]):(l=e.stores,l===null?e.stores=[t]:l.push(t))}function Ph(t,e,l,u){e.value=l,e.getSnapshot=u,pf(e)&&Qh(t)}function df(t,e,l){return l(function(){pf(e)&&Qh(t)})}function pf(t){var e=t.getSnapshot;t=t.value;try{var l=e();return!Gn(t,l)}catch{return!0}}function Qh(t){var e=Aa(t,2);e!==null&&Re(e,t,2)}function Du(t){var e=ta();if(typeof t=="function"){var l=t;if(t=l(),or){li(!0);try{l()}finally{li(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:t},e}function gf(t,e,l,u){return t.baseState=l,ff(t,Ne,typeof u=="function"?u:bi)}function Kh(t,e,l,u,v){if(bo(t))throw Error(r(485));if(t=e.action,t!==null){var C={payload:v,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){C.listeners.push(V)}};x.T!==null?l(!0):C.isTransition=!1,u(C),l=e.pending,l===null?(C.next=e.pending=C,zu(e,C)):(C.next=l.next,e.pending=l.next=C)}}function zu(t,e){var l=e.action,u=e.payload,v=t.state;if(e.isTransition){var C=x.T,V={};x.T=V;try{var k=l(v,u),rt=x.S;rt!==null&&rt(V,k),Uu(t,e,k)}catch(vt){mf(t,e,vt)}finally{C!==null&&V.types!==null&&(C.types=V.types),x.T=C}}else try{C=l(v,u),Uu(t,e,C)}catch(vt){mf(t,e,vt)}}function Uu(t,e,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Ih(t,e,u)},function(u){return mf(t,e,u)}):Ih(t,e,l)}function Ih(t,e,l){e.status="fulfilled",e.value=l,Zh(e),t.state=l,e=t.pending,e!==null&&(l=e.next,l===e?t.pending=null:(l=l.next,e.next=l,zu(t,l)))}function mf(t,e,l){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do e.status="rejected",e.reason=l,Zh(e),e=e.next;while(e!==u)}t.action=null}function Zh(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Jh(t,e){return e}function vf(t,e){if(pe){var l=oe.formState;if(l!==null){t:{var u=ae;if(pe){if(we){e:{for(var v=we,C=$n;v.nodeType!==8;){if(!C){v=null;break e}if(v=Ni(v.nextSibling),v===null){v=null;break e}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){we=Ni(v.nextSibling),u=v.data==="F!";break t}}qi(u)}u=!1}u&&(e=l[0])}}return l=ta(),l.memoizedState=l.baseState=e,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:e},l.queue=u,l=Ef.bind(null,ae,u),u.dispatch=l,u=Du(!1),C=un.bind(null,ae,!1,u.queue),u=ta(),v={state:e,dispatch:null,action:t,pending:null},u.queue=v,l=Kh.bind(null,ae,v,C,l),v.dispatch=l,u.memoizedState=t,[e,l,!1]}function Fh(t){var e=on();return kh(e,Ne,t)}function kh(t,e,l){if(e=ff(t,e,Jh)[0],t=Nu(bi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var u=yo(e)}catch(V){throw V===ir?Tu:V}else u=e;e=on();var v=e.queue,C=v.dispatch;return l!==e.memoizedState&&(ae.flags|=2048,cs(9,{destroy:void 0},m0.bind(null,v,l),null)),[u,C,t]}function m0(t,e){t.action=e}function Wh(t){var e=on(),l=Ne;if(l!==null)return kh(e,l,t);on(),e=e.memoizedState,l=on();var u=l.queue.dispatch;return l.memoizedState=t,[e,u,!1]}function cs(t,e,l,u){return t={tag:t,create:l,deps:u,inst:e,next:null},e=ae.updateQueue,e===null&&(e=Mu(),ae.updateQueue=e),l=e.lastEffect,l===null?e.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,e.lastEffect=t),t}function $h(){return on().memoizedState}function Gu(t,e,l,u){var v=ta();ae.flags|=t,v.memoizedState=cs(1|e,{destroy:void 0},l,u===void 0?null:u)}function Bu(t,e,l,u){var v=on();u=u===void 0?null:u;var C=v.memoizedState.inst;Ne!==null&&u!==null&&rf(u,Ne.memoizedState.deps)?v.memoizedState=cs(e,C,l,u):(ae.flags|=t,v.memoizedState=cs(1|e,C,l,u))}function td(t,e){Gu(8390656,8,t,e)}function yf(t,e){Bu(2048,8,t,e)}function v0(t){ae.flags|=4;var e=ae.updateQueue;if(e===null)e=Mu(),ae.updateQueue=e,e.events=[t];else{var l=e.events;l===null?e.events=[t]:l.push(t)}}function ed(t){var e=on().memoizedState;return v0({ref:e,nextImpl:t}),function(){if((Wt&2)!==0)throw Error(r(440));return e.impl.apply(void 0,arguments)}}function nd(t,e){return Bu(4,2,t,e)}function ad(t,e){return Bu(4,4,t,e)}function id(t,e){if(typeof e=="function"){t=t();var l=e(t);return function(){typeof l=="function"?l():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ld(t,e,l){l=l!=null?l.concat([t]):null,Bu(4,4,id.bind(null,e,t),l)}function Hu(){}function rd(t,e){var l=on();e=e===void 0?null:e;var u=l.memoizedState;return e!==null&&rf(e,u[1])?u[0]:(l.memoizedState=[t,e],t)}function sd(t,e){var l=on();e=e===void 0?null:e;var u=l.memoizedState;if(e!==null&&rf(e,u[1]))return u[0];if(u=t(),or){li(!0);try{t()}finally{li(!1)}}return l.memoizedState=[u,e],u}function xa(t,e,l){return l===void 0||(yi&1073741824)!==0&&(re&261930)===0?t.memoizedState=e:(t.memoizedState=l,t=nl(),ae.lanes|=t,Ul|=t,l)}function Sf(t,e,l,u){return Gn(l,e)?l:us.current!==null?(t=xa(t,l,u),Gn(t,e)||(yn=!0),t):(yi&42)===0||(yi&1073741824)!==0&&(re&261930)===0?(yn=!0,t.memoizedState=l):(t=nl(),ae.lanes|=t,Ul|=t,e)}function ju(t,e,l,u,v){var C=Y.p;Y.p=C!==0&&8>C?C:8;var V=x.T,k={};x.T=k,un(t,!1,e,l);try{var rt=v(),vt=x.S;if(vt!==null&&vt(k,rt),rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var _t=Ra(rt,u);So(t,e,_t,Jn(t))}else So(t,e,u,Jn(t))}catch(zt){So(t,e,{then:function(){},status:"rejected",reason:zt},Jn())}finally{Y.p=C,V!==null&&k.types!==null&&(V.types=k.types),x.T=V}}function od(){}function Lu(t,e,l,u){if(t.tag!==5)throw Error(r(476));var v=bf(t).queue;ju(t,v,e,Q,l===null?od:function(){return ud(t),l(u)})}function bf(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:Q},next:null};var l={};return e.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:l},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function ud(t){var e=bf(t);e.next===null&&(e=t.alternate.memoizedState),So(t,e.next.queue,{},Jn())}function wu(){return Qe(qf)}function Cf(){return on().memoizedState}function cd(){return on().memoizedState}function y0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var l=Jn();t=Tl(l);var u=Al(e,t,l);u!==null&&(Re(u,e,l),go(u,e,l)),e={cache:bu()},t.payload=e;return}e=e.return}}function S0(t,e,l){var u=Jn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bo(t)?fd(e,l):(l=Fl(t,e,l,u),l!==null&&(Re(l,t,u),Tf(l,e,u)))}function Ef(t,e,l){var u=Jn();So(t,e,l,u)}function So(t,e,l,u){var v={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(bo(t))fd(e,v);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=e.lastRenderedReducer,C!==null))try{var V=e.lastRenderedState,k=C(V,l);if(v.hasEagerState=!0,v.eagerState=k,Gn(k,V))return wi(t,e,v,0),oe===null&&ao(),!1}catch{}finally{}if(l=Fl(t,e,v,u),l!==null)return Re(l,t,u),Tf(l,e,u),!0}return!1}function un(t,e,l,u){if(u={lane:2,revertLane:E0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},bo(t)){if(e)throw Error(r(479))}else e=Fl(t,l,u,2),e!==null&&Re(e,t,2)}function bo(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function fd(t,e){qa=Ji=!0;var l=t.pending;l===null?e.next=e:(e.next=l.next,l.next=e),t.pending=e}function Tf(t,e,l){if((l&4194048)!==0){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,bc(t,l)}}var fs={readContext:Qe,use:xu,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};fs.useEffectEvent=ln;var cr={readContext:Qe,use:xu,useCallback:function(t,e){return ta().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:td,useImperativeHandle:function(t,e,l){l=l!=null?l.concat([t]):null,Gu(4194308,4,id.bind(null,e,t),l)},useLayoutEffect:function(t,e){return Gu(4194308,4,t,e)},useInsertionEffect:function(t,e){Gu(4,2,t,e)},useMemo:function(t,e){var l=ta();e=e===void 0?null:e;var u=t();if(or){li(!0);try{t()}finally{li(!1)}}return l.memoizedState=[u,e],u},useReducer:function(t,e,l){var u=ta();if(l!==void 0){var v=l(e);if(or){li(!0);try{l(e)}finally{li(!1)}}}else v=e;return u.memoizedState=u.baseState=v,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:v},u.queue=t,t=t.dispatch=S0.bind(null,ae,t),[u.memoizedState,t]},useRef:function(t){var e=ta();return t={current:t},e.memoizedState=t},useState:function(t){t=Du(t);var e=t.queue,l=Ef.bind(null,ae,e);return e.dispatch=l,[t.memoizedState,l]},useDebugValue:Hu,useDeferredValue:function(t,e){var l=ta();return xa(l,t,e)},useTransition:function(){var t=Du(!1);return t=ju.bind(null,ae,t.queue,!0,!1),ta().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,l){var u=ae,v=ta();if(pe){if(l===void 0)throw Error(r(407));l=l()}else{if(l=e(),oe===null)throw Error(r(349));(re&127)!==0||Xh(u,e,l)}v.memoizedState=l;var C={value:l,getSnapshot:e};return v.queue=C,td(df.bind(null,u,C,t),[t]),u.flags|=2048,cs(9,{destroy:void 0},Ph.bind(null,u,C,l,e),null),l},useId:function(){var t=ta(),e=oe.identifierPrefix;if(pe){var l=Fa,u=Ja;l=(u&~(1<<32-Ca(u)-1)).toString(32)+l,e="_"+e+"R_"+l,l=Ru++,0<l&&(e+="H"+l.toString(32)),e+="_"}else l=p0++,e="_"+e+"r_"+l.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:wu,useFormState:vf,useActionState:vf,useOptimistic:function(t){var e=ta();e.memoizedState=e.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=l,e=un.bind(null,ae,!0,l),l.dispatch=e,[t,e]},useMemoCache:cf,useCacheRefresh:function(){return ta().memoizedState=y0.bind(null,ae)},useEffectEvent:function(t){var e=ta(),l={impl:t};return e.memoizedState=l,function(){if((Wt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Co={readContext:Qe,use:xu,useCallback:rd,useContext:Qe,useEffect:yf,useImperativeHandle:ld,useInsertionEffect:nd,useLayoutEffect:ad,useMemo:sd,useReducer:Nu,useRef:$h,useState:function(){return Nu(bi)},useDebugValue:Hu,useDeferredValue:function(t,e){var l=on();return Sf(l,Ne.memoizedState,t,e)},useTransition:function(){var t=Nu(bi)[0],e=on().memoizedState;return[typeof t=="boolean"?t:yo(t),e]},useSyncExternalStore:Vh,useId:Cf,useHostTransitionStatus:wu,useFormState:Fh,useActionState:Fh,useOptimistic:function(t,e){var l=on();return gf(l,Ne,t,e)},useMemoCache:cf,useCacheRefresh:cd};Co.useEffectEvent=ed;var fr={readContext:Qe,use:xu,useCallback:rd,useContext:Qe,useEffect:yf,useImperativeHandle:ld,useInsertionEffect:nd,useLayoutEffect:ad,useMemo:sd,useReducer:hf,useRef:$h,useState:function(){return hf(bi)},useDebugValue:Hu,useDeferredValue:function(t,e){var l=on();return Ne===null?xa(l,t,e):Sf(l,Ne.memoizedState,t,e)},useTransition:function(){var t=hf(bi)[0],e=on().memoizedState;return[typeof t=="boolean"?t:yo(t),e]},useSyncExternalStore:Vh,useId:Cf,useHostTransitionStatus:wu,useFormState:Wh,useActionState:Wh,useOptimistic:function(t,e){var l=on();return Ne!==null?gf(l,Ne,t,e):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:cf,useCacheRefresh:cd};fr.useEffectEvent=ed;function Ml(t,e,l,u){e=t.memoizedState,l=l(u,e),l=l==null?e:O({},e,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var ea={enqueueSetState:function(t,e,l){t=t._reactInternals;var u=Jn(),v=Tl(u);v.payload=e,l!=null&&(v.callback=l),e=Al(t,v,u),e!==null&&(Re(e,t,u),go(e,t,u))},enqueueReplaceState:function(t,e,l){t=t._reactInternals;var u=Jn(),v=Tl(u);v.tag=1,v.payload=e,l!=null&&(v.callback=l),e=Al(t,v,u),e!==null&&(Re(e,t,u),go(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var l=Jn(),u=Tl(l);u.tag=2,e!=null&&(u.callback=e),e=Al(t,u,l),e!==null&&(Re(e,t,l),go(e,t,l))}};function hd(t,e,l,u,v,C,V){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,C,V):e.prototype&&e.prototype.isPureReactComponent?!La(l,u)||!La(v,C):!0}function dd(t,e,l,u){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(l,u),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(l,u),e.state!==t&&ea.enqueueReplaceState(e,e.state,null)}function Ci(t,e){var l=e;if("ref"in e){l={};for(var u in e)u!=="ref"&&(l[u]=e[u])}if(t=t.defaultProps){l===e&&(l=O({},l));for(var v in t)l[v]===void 0&&(l[v]=t[v])}return l}function Eo(t){Ka(t)}function To(t){console.error(t)}function Yu(t){Ka(t)}function qu(t,e){try{var l=t.onUncaughtError;l(e.value,{componentStack:e.stack})}catch(u){setTimeout(function(){throw u})}}function pd(t,e,l){try{var u=t.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Na(t,e,l){return l=Tl(l),l.tag=3,l.payload={element:null},l.callback=function(){qu(t,e)},l}function Af(t){return t=Tl(t),t.tag=3,t}function gd(t,e,l,u){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var C=u.value;t.payload=function(){return v(C)},t.callback=function(){pd(e,l,u)}}var V=l.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(t.callback=function(){pd(e,l,u),typeof v!="function"&&(la===null?la=new Set([this]):la.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function _f(t,e,l,u,v){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(e=l.alternate,e!==null&&is(e,l,v,!0),l=Fe.current,l!==null){switch(l.tag){case 31:case 13:return Ya===null?m():l.alternate===null&&qe===0&&(qe=3),l.flags&=-257,l.flags|=65536,l.lanes=v,u===co?l.flags|=16384:(e=l.updateQueue,e===null?l.updateQueue=new Set([u]):e.add(u),Le(t,u,v)),!1;case 22:return l.flags|=65536,u===co?l.flags|=16384:(e=l.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=e):(l=e.retryQueue,l===null?e.retryQueue=new Set([u]):l.add(u)),Le(t,u,v)),!1}throw Error(r(435,l.tag))}return Le(t,u,v),m(),!1}if(pe)return e=Fe.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=v,u!==vu&&(t=Error(r(422),{cause:u}),as(_a(t,l)))):(u!==vu&&(e=Error(r(423),{cause:u}),as(_a(e,l))),t=t.current.alternate,t.flags|=65536,v&=-v,t.lanes|=v,u=_a(u,l),v=Na(t.stateNode,u,v),af(t,v),qe!==4&&(qe=2)),!1;var C=Error(r(520),{cause:u});if(C=_a(C,l),be===null?be=[C]:be.push(C),qe!==4&&(qe=2),e===null)return!0;u=_a(u,l),l=e;do{switch(l.tag){case 3:return l.flags|=65536,t=v&-v,l.lanes|=t,t=Na(l.stateNode,u,t),af(l,t),!1;case 1:if(e=l.type,C=l.stateNode,(l.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(la===null||!la.has(C))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Af(v),gd(v,t,l,u),af(l,v),!1}l=l.return}while(l!==null);return!1}var Of=Error(r(461)),yn=!1;function wn(t,e,l,u){e.child=t===null?Lh(e,null,l,u):rr(e,t.child,l,u)}function hs(t,e,l,u,v){l=l.render;var C=e.ref;if("ref"in u){var V={};for(var k in u)k!=="ref"&&(V[k]=u[k])}else V=u;return Vi(e),u=ur(t,e,l,V,C,v),k=sf(),t!==null&&!yn?(of(t,e,v),ti(t,e,v)):(pe&&k&&ro(e),e.flags|=1,wn(t,e,u,v),e.child)}function da(t,e,l,u,v){if(t===null){var C=l.type;return typeof C=="function"&&!du(C)&&C.defaultProps===void 0&&l.compare===null?(e.tag=15,e.type=C,Vu(t,e,C,u,v)):(t=ts(l.type,null,u,e,e.mode,v),t.ref=e.ref,t.return=e,e.child=t)}if(C=t.child,!na(t,v)){var V=C.memoizedProps;if(l=l.compare,l=l!==null?l:La,l(V,u)&&t.ref===e.ref)return ti(t,e,v)}return e.flags|=1,t=Ia(C,u),t.ref=e.ref,t.return=e,e.child=t}function Vu(t,e,l,u,v){if(t!==null){var C=t.memoizedProps;if(La(C,u)&&t.ref===e.ref)if(yn=!1,e.pendingProps=u=C,na(t,v))(t.flags&131072)!==0&&(yn=!0);else return e.lanes=t.lanes,ti(t,e,v)}return pa(t,e,l,u,v)}function Rf(t,e,l,u){var v=u.children,C=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((e.flags&128)!==0){if(C=C!==null?C.baseLanes|l:l,t!==null){for(u=e.child=t.child,v=0;u!==null;)v=v|u.lanes|u.childLanes,u=u.sibling;u=v&~C}else u=0,e.child=null;return Mf(t,e,C,l,u)}if((l&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xi(e,C!==null?C.cachePool:null),C!==null?gi(e,C):Mn(),vi(e);else return u=e.lanes=536870912,Mf(t,e,C!==null?C.baseLanes|l:l,l,u)}else C!==null?(Xi(e,C.cachePool),gi(e,C),Rl(),e.memoizedState=null):(t!==null&&Xi(e,null),Mn(),Rl());return wn(t,e,v,l),e.child}function hr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Mf(t,e,l,u,v){var C=ss();return C=C===null?null:{parent:gn._currentValue,pool:C},e.memoizedState={baseLanes:l,cachePool:C},t!==null&&Xi(e,null),Mn(),vi(e),t!==null&&is(t,e,u,!0),e.childLanes=v,null}function Fi(t,e){return e=xn({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function dr(t,e,l){return rr(e,t.child,null,l),t=Fi(e,e.pendingProps),t.flags|=2,Ma(e),e.memoizedState=null,t}function Xu(t,e,l){var u=e.pendingProps,v=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(pe){if(u.mode==="hidden")return t=Fi(e,u),e.lanes=536870912,hr(null,t);if(mn(e),(t=we)?(t=s1(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Yi!==null?{id:Ja,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},l=ca(t),l.return=e,e.child=l,Ln=e,we=null)):t=null,t===null)throw qi(e);return e.lanes=536870912,null}return Fi(e,u)}var C=t.memoizedState;if(C!==null){var V=C.dehydrated;if(mn(e),v)if(e.flags&256)e.flags&=-257,e=dr(t,e,l);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(r(558));else if(yn||is(t,e,l,!1),v=(l&t.childLanes)!==0,yn||v){if(u=oe,u!==null&&(V=js(u,l),V!==0&&V!==C.retryLane))throw C.retryLane=V,Aa(t,V),Re(u,t,V),Of;m(),e=dr(t,e,l)}else t=C.treeContext,we=Ni(V.nextSibling),Ln=e,pe=!0,Oa=null,$n=!1,t!==null&&Hh(e,t),e=Fi(e,u),e.flags|=4096;return e}return t=Ia(t.child,{mode:u.mode,children:u.children}),t.ref=e.ref,e.child=t,t.return=e,t}function pr(t,e){var l=e.ref;if(l===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(t===null||t.ref!==l)&&(e.flags|=4194816)}}function pa(t,e,l,u,v){return Vi(e),l=ur(t,e,l,u,void 0,v),u=sf(),t!==null&&!yn?(of(t,e,v),ti(t,e,v)):(pe&&u&&ro(e),e.flags|=1,wn(t,e,l,v),e.child)}function Da(t,e,l,u,v,C){return Vi(e),e.updateQueue=null,l=qh(e,u,l,v),Yh(t),u=sf(),t!==null&&!yn?(of(t,e,C),ti(t,e,C)):(pe&&u&&ro(e),e.flags|=1,wn(t,e,l,C),e.child)}function xl(t,e,l,u,v){if(Vi(e),e.stateNode===null){var C=fi,V=l.contextType;typeof V=="object"&&V!==null&&(C=Qe(V)),C=new l(u,C),e.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=ea,e.stateNode=C,C._reactInternals=e,C=e.stateNode,C.props=u,C.state=e.memoizedState,C.refs={},sr(e),V=l.contextType,C.context=typeof V=="object"&&V!==null?Qe(V):fi,C.state=e.memoizedState,V=l.getDerivedStateFromProps,typeof V=="function"&&(Ml(e,l,V,u),C.state=e.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(V=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),V!==C.state&&ea.enqueueReplaceState(C,C.state,null),_l(e,u,C,v),os(),C.state=e.memoizedState),typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!0}else if(t===null){C=e.stateNode;var k=e.memoizedProps,rt=Ci(l,k);C.props=rt;var vt=C.context,_t=l.contextType;V=fi,typeof _t=="object"&&_t!==null&&(V=Qe(_t));var zt=l.getDerivedStateFromProps;_t=typeof zt=="function"||typeof C.getSnapshotBeforeUpdate=="function",k=e.pendingProps!==k,_t||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k||vt!==V)&&dd(e,C,u,V),Zi=!1;var bt=e.memoizedState;C.state=bt,_l(e,u,C,v),os(),vt=e.memoizedState,k||bt!==vt||Zi?(typeof zt=="function"&&(Ml(e,l,zt,u),vt=e.memoizedState),(rt=Zi||hd(e,l,rt,u,bt,vt,V))?(_t||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(e.flags|=4194308)):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=u,e.memoizedState=vt),C.props=u,C.state=vt,C.context=V,u=rt):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!1)}else{C=e.stateNode,nf(t,e),V=e.memoizedProps,_t=Ci(l,V),C.props=_t,zt=e.pendingProps,bt=C.context,vt=l.contextType,rt=fi,typeof vt=="object"&&vt!==null&&(rt=Qe(vt)),k=l.getDerivedStateFromProps,(vt=typeof k=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==zt||bt!==rt)&&dd(e,C,u,rt),Zi=!1,bt=e.memoizedState,C.state=bt,_l(e,u,C,v),os();var Et=e.memoizedState;V!==zt||bt!==Et||Zi||t!==null&&t.dependencies!==null&&Su(t.dependencies)?(typeof k=="function"&&(Ml(e,l,k,u),Et=e.memoizedState),(_t=Zi||hd(e,l,_t,u,bt,Et,rt)||t!==null&&t.dependencies!==null&&Su(t.dependencies))?(vt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(u,Et,rt),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(u,Et,rt)),typeof C.componentDidUpdate=="function"&&(e.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=1024),e.memoizedProps=u,e.memoizedState=Et),C.props=u,C.state=Et,C.context=rt,u=_t):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=1024),u=!1)}return C=u,pr(t,e),u=(e.flags&128)!==0,C||u?(C=e.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:C.render(),e.flags|=1,t!==null&&u?(e.child=rr(e,t.child,null,v),e.child=rr(e,null,l,v)):wn(t,e,l,v),e.memoizedState=C.state,t=e.child):t=ti(t,e,v),t}function Ei(t,e,l,u){return Sl(),e.flags|=256,wn(t,e,l,u),e.child}var Wa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tn(t){return{baseLanes:t,cachePool:ar()}}function gr(t,e,l){return t=t!==null?t.childLanes&~l:0,e&&(t|=$t),t}function ki(t,e,l){var u=e.pendingProps,v=!1,C=(e.flags&128)!==0,V;if((V=C)||(V=t!==null&&t.memoizedState===null?!1:(sn.current&2)!==0),V&&(v=!0,e.flags&=-129),V=(e.flags&32)!==0,e.flags&=-33,t===null){if(pe){if(v?Ol(e):Rl(),(t=we)?(t=s1(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Yi!==null?{id:Ja,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},l=ca(t),l.return=e,e.child=l,Ln=e,we=null)):t=null,t===null)throw qi(e);return B0(t)?e.lanes=32:e.lanes=536870912,null}var k=u.children;return u=u.fallback,v?(Rl(),v=e.mode,k=xn({mode:"hidden",children:k},v),u=yl(u,v,l,null),k.return=e,u.return=e,k.sibling=u,e.child=k,u=e.child,u.memoizedState=Tn(l),u.childLanes=gr(t,V,l),e.memoizedState=Wa,hr(null,u)):(Ol(e),ds(e,k))}var rt=t.memoizedState;if(rt!==null&&(k=rt.dehydrated,k!==null)){if(C)e.flags&256?(Ol(e),e.flags&=-257,e=cn(t,e,l)):e.memoizedState!==null?(Rl(),e.child=t.child,e.flags|=128,e=null):(Rl(),k=u.fallback,v=e.mode,u=xn({mode:"visible",children:u.children},v),k=yl(k,v,l,null),k.flags|=2,u.return=e,k.return=e,u.sibling=k,e.child=u,rr(e,t.child,null,l),u=e.child,u.memoizedState=Tn(l),u.childLanes=gr(t,V,l),e.memoizedState=Wa,e=hr(null,u));else if(Ol(e),B0(k)){if(V=k.nextSibling&&k.nextSibling.dataset,V)var vt=V.dgst;V=vt,u=Error(r(419)),u.stack="",u.digest=V,as({value:u,source:null,stack:null}),e=cn(t,e,l)}else if(yn||is(t,e,l,!1),V=(l&t.childLanes)!==0,yn||V){if(V=oe,V!==null&&(u=js(V,l),u!==0&&u!==rt.retryLane))throw rt.retryLane=u,Aa(t,u),Re(V,t,u),Of;G0(k)||m(),e=cn(t,e,l)}else G0(k)?(e.flags|=192,e.child=t.child,e=null):(t=rt.treeContext,we=Ni(k.nextSibling),Ln=e,pe=!0,Oa=null,$n=!1,t!==null&&Hh(e,t),e=ds(e,u.children),e.flags|=4096);return e}return v?(Rl(),k=u.fallback,v=e.mode,rt=t.child,vt=rt.sibling,u=Ia(rt,{mode:"hidden",children:u.children}),u.subtreeFlags=rt.subtreeFlags&65011712,vt!==null?k=Ia(vt,k):(k=yl(k,v,l,null),k.flags|=2),k.return=e,u.return=e,u.sibling=k,e.child=u,hr(null,u),u=e.child,k=t.child.memoizedState,k===null?k=Tn(l):(v=k.cachePool,v!==null?(rt=gn._currentValue,v=v.parent!==rt?{parent:rt,pool:rt}:v):v=ar(),k={baseLanes:k.baseLanes|l,cachePool:v}),u.memoizedState=k,u.childLanes=gr(t,V,l),e.memoizedState=Wa,hr(t.child,u)):(Ol(e),l=t.child,t=l.sibling,l=Ia(l,{mode:"visible",children:u.children}),l.return=e,l.sibling=null,t!==null&&(V=e.deletions,V===null?(e.deletions=[t],e.flags|=16):V.push(t)),e.child=l,e.memoizedState=null,l)}function ds(t,e){return e=xn({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function xn(t,e){return t=Qn(22,t,null,e),t.lanes=0,t}function cn(t,e,l){return rr(e,t.child,null,l),t=ds(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Te(t,e,l){t.lanes|=e;var u=t.alternate;u!==null&&(u.lanes|=e),Wc(t.return,e,l)}function Wi(t,e,l,u,v,C){var V=t.memoizedState;V===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:v,treeForkCount:C}:(V.isBackwards=e,V.rendering=null,V.renderingStartTime=0,V.last=u,V.tail=l,V.tailMode=v,V.treeForkCount=C)}function $a(t,e,l){var u=e.pendingProps,v=u.revealOrder,C=u.tail;u=u.children;var V=sn.current,k=(V&2)!==0;if(k?(V=V&1|2,e.flags|=128):V&=1,at(sn,V),wn(t,e,u,l),u=pe?ns:0,!k&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Te(t,l,e);else if(t.tag===19)Te(t,l,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(v){case"forwards":for(l=e.child,v=null;l!==null;)t=l.alternate,t!==null&&Ou(t)===null&&(v=l),l=l.sibling;l=v,l===null?(v=e.child,e.child=null):(v=l.sibling,l.sibling=null),Wi(e,!1,v,l,C,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=e.child,e.child=null;v!==null;){if(t=v.alternate,t!==null&&Ou(t)===null){e.child=v;break}t=v.sibling,v.sibling=l,l=v,v=t}Wi(e,!0,l,null,C,u);break;case"together":Wi(e,!1,null,null,void 0,u);break;default:e.memoizedState=null}return e.child}function ti(t,e,l){if(t!==null&&(e.dependencies=t.dependencies),Ul|=e.lanes,(l&e.childLanes)===0)if(t!==null){if(is(t,e,l,!1),(l&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(r(153));if(e.child!==null){for(t=e.child,l=Ia(t,t.pendingProps),e.child=l,l.return=e;t.sibling!==null;)t=t.sibling,l=l.sibling=Ia(t,t.pendingProps),l.return=e;l.sibling=null}return e.child}function na(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Su(t)))}function Pu(t,e,l){switch(e.tag){case 3:ut(e,e.stateNode.containerInfo),bl(e,gn,t.memoizedState.cache),Sl();break;case 27:case 5:gt(e);break;case 4:ut(e,e.stateNode.containerInfo);break;case 10:bl(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,mn(e),null;break;case 13:var u=e.memoizedState;if(u!==null)return u.dehydrated!==null?(Ol(e),e.flags|=128,null):(l&e.child.childLanes)!==0?ki(t,e,l):(Ol(e),t=ti(t,e,l),t!==null?t.sibling:null);Ol(e);break;case 19:var v=(t.flags&128)!==0;if(u=(l&e.childLanes)!==0,u||(is(t,e,l,!1),u=(l&e.childLanes)!==0),v){if(u)return $a(t,e,l);e.flags|=128}if(v=e.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),at(sn,sn.current),u)break;return null;case 22:return e.lanes=0,Rf(t,e,l,e.pendingProps);case 24:bl(e,gn,t.memoizedState.cache)}return ti(t,e,l)}function Nl(t,e,l){if(t!==null)if(t.memoizedProps!==e.pendingProps)yn=!0;else{if(!na(t,l)&&(e.flags&128)===0)return yn=!1,Pu(t,e,l);yn=(t.flags&131072)!==0}else yn=!1,pe&&(e.flags&1048576)!==0&&mu(e,ns,e.index);switch(e.lanes=0,e.tag){case 16:t:{var u=e.pendingProps;if(t=Qi(e.elementType),e.type=t,typeof t=="function")du(t)?(u=Ci(t,u),e.tag=1,e=xl(null,e,t,u,l)):(e.tag=0,e=pa(null,e,t,u,l));else{if(t!=null){var v=t.$$typeof;if(v===L){e.tag=11,e=hs(null,e,t,u,l);break t}else if(v===T){e.tag=14,e=da(null,e,t,u,l);break t}}throw e=K(t)||t,Error(r(306,e,""))}}return e;case 0:return pa(t,e,e.type,e.pendingProps,l);case 1:return u=e.type,v=Ci(u,e.pendingProps),xl(t,e,u,v,l);case 3:t:{if(ut(e,e.stateNode.containerInfo),t===null)throw Error(r(387));u=e.pendingProps;var C=e.memoizedState;v=C.element,nf(t,e),_l(e,u,null,l);var V=e.memoizedState;if(u=V.cache,bl(e,gn,u),u!==C.cache&&$c(e,[gn],l,!0),os(),u=V.element,C.isDehydrated)if(C={element:u,isDehydrated:!1,cache:V.cache},e.updateQueue.baseState=C,e.memoizedState=C,e.flags&256){e=Ei(t,e,u,l);break t}else if(u!==v){v=_a(Error(r(424)),e),as(v),e=Ei(t,e,u,l);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(we=Ni(t.firstChild),Ln=e,pe=!0,Oa=null,$n=!0,l=Lh(e,null,u,l),e.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Sl(),u===v){e=ti(t,e,l);break t}wn(t,e,u,l)}e=e.child}return e;case 26:return pr(t,e),t===null?(l=d1(e.type,null,e.pendingProps,null))?e.memoizedState=l:pe||(l=e.type,t=e.pendingProps,u=Td($.current).createElement(l),u[Cn]=e,u[On]=t,ra(u,l,t),Rn(u),e.stateNode=u):e.memoizedState=d1(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return gt(e),t===null&&pe&&(u=e.stateNode=c1(e.type,e.pendingProps,$.current),Ln=e,$n=!0,v=we,Cs(e.type)?(H0=v,we=Ni(u.firstChild)):we=v),wn(t,e,e.pendingProps.children,l),pr(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&pe&&((v=u=we)&&(u=tv(u,e.type,e.pendingProps,$n),u!==null?(e.stateNode=u,Ln=e,we=Ni(u.firstChild),$n=!1,v=!0):v=!1),v||qi(e)),gt(e),v=e.type,C=e.pendingProps,V=t!==null?t.memoizedProps:null,u=C.children,D0(v,C)?u=null:V!==null&&D0(v,V)&&(e.flags|=32),e.memoizedState!==null&&(v=ur(t,e,g0,null,null,l),qf._currentValue=v),pr(t,e),wn(t,e,u,l),e.child;case 6:return t===null&&pe&&((t=l=we)&&(l=ev(l,e.pendingProps,$n),l!==null?(e.stateNode=l,Ln=e,we=null,t=!0):t=!1),t||qi(e)),null;case 13:return ki(t,e,l);case 4:return ut(e,e.stateNode.containerInfo),u=e.pendingProps,t===null?e.child=rr(e,null,u,l):wn(t,e,u,l),e.child;case 11:return hs(t,e,e.type,e.pendingProps,l);case 7:return wn(t,e,e.pendingProps,l),e.child;case 8:return wn(t,e,e.pendingProps.children,l),e.child;case 12:return wn(t,e,e.pendingProps.children,l),e.child;case 10:return u=e.pendingProps,bl(e,e.type,u.value),wn(t,e,u.children,l),e.child;case 9:return v=e.type._context,u=e.pendingProps.children,Vi(e),v=Qe(v),u=u(v),e.flags|=1,wn(t,e,u,l),e.child;case 14:return da(t,e,e.type,e.pendingProps,l);case 15:return Vu(t,e,e.type,e.pendingProps,l);case 19:return $a(t,e,l);case 31:return Xu(t,e,l);case 22:return Rf(t,e,l,e.pendingProps);case 24:return Vi(e),u=Qe(gn),t===null?(v=ss(),v===null&&(v=oe,C=bu(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=l),v=C),e.memoizedState={parent:u,cache:v},sr(e),bl(e,gn,v)):((t.lanes&l)!==0&&(nf(t,e),_l(e,null,null,l),os()),v=t.memoizedState,C=e.memoizedState,v.parent!==u?(v={parent:u,cache:u},e.memoizedState=v,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=v),bl(e,gn,u)):(u=C.cache,bl(e,gn,u),u!==v.cache&&$c(e,[gn],l,!0))),wn(t,e,e.pendingProps.children,l),e.child;case 29:throw e.pendingProps}throw Error(r(156,e.tag))}function Yn(t){t.flags|=4}function xf(t,e,l,u,v){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(v&335544128)===v)if(t.stateNode.complete)t.flags|=8192;else if(a())t.flags|=8192;else throw Ki=co,uo}else t.flags&=-16777217}function md(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!y1(e))if(a())t.flags|=8192;else throw Ki=co,uo}function Qu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?yc():536870912,t.lanes|=e,ce|=e)}function Ye(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var l=null;e!==null;)e.alternate!==null&&(l=e),e=e.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(e)for(var v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags&65011712,u|=v.flags&65011712,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags,u|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=u,t.childLanes=l,e}function ps(t,e,l){var u=e.pendingProps;switch(Jc(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return He(e),null;case 3:return l=e.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),e.memoizedState.cache!==u&&(e.flags|=2048),di(gn),Tt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Wl(e)?Yn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,$l())),He(e),null;case 26:var v=e.type,C=e.memoizedState;return t===null?(Yn(e),C!==null?(He(e),md(e,C)):(He(e),xf(e,v,null,u,l))):C?C!==t.memoizedState?(Yn(e),He(e),md(e,C)):(He(e),e.flags&=-16777217):(t=t.memoizedProps,t!==u&&Yn(e),He(e),xf(e,v,t,u,l)),null;case 27:if(Mt(e),l=$.current,v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Yn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return He(e),null}t=X.current,Wl(e)?Fc(e):(t=c1(v,u,l),e.stateNode=t,Yn(e))}return He(e),null;case 5:if(Mt(e),v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Yn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return He(e),null}if(C=X.current,Wl(e))Fc(e);else{var V=Td($.current);switch(C){case 1:C=V.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:C=V.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":C=V.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":C=V.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":C=V.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof u.is=="string"?V.createElement("select",{is:u.is}):V.createElement("select"),u.multiple?C.multiple=!0:u.size&&(C.size=u.size);break;default:C=typeof u.is=="string"?V.createElement(v,{is:u.is}):V.createElement(v)}}C[Cn]=e,C[On]=u;t:for(V=e.child;V!==null;){if(V.tag===5||V.tag===6)C.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break t;for(;V.sibling===null;){if(V.return===null||V.return===e)break t;V=V.return}V.sibling.return=V.return,V=V.sibling}e.stateNode=C;t:switch(ra(C,v,u),v){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Yn(e)}}return He(e),xf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,l),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==u&&Yn(e);else{if(typeof u!="string"&&e.stateNode===null)throw Error(r(166));if(t=$.current,Wl(e)){if(t=e.stateNode,l=e.memoizedProps,u=null,v=Ln,v!==null)switch(v.tag){case 27:case 5:u=v.memoizedProps}t[Cn]=e,t=!!(t.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||$p(t.nodeValue,l)),t||qi(e,!0)}else t=Td(t).createTextNode(u),t[Cn]=e,e.stateNode=t}return He(e),null;case 31:if(l=e.memoizedState,t===null||t.memoizedState!==null){if(u=Wl(e),l!==null){if(t===null){if(!u)throw Error(r(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Cn]=e}else Sl(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;He(e),t=!1}else l=$l(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return e.flags&256?(Ma(e),e):(Ma(e),null);if((e.flags&128)!==0)throw Error(r(558))}return He(e),null;case 13:if(u=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(v=Wl(e),u!==null&&u.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=e.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Cn]=e}else Sl(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;He(e),v=!1}else v=$l(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=v),v=!0;if(!v)return e.flags&256?(Ma(e),e):(Ma(e),null)}return Ma(e),(e.flags&128)!==0?(e.lanes=l,e):(l=u!==null,t=t!==null&&t.memoizedState!==null,l&&(u=e.child,v=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(v=u.alternate.memoizedState.cachePool.pool),C=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),C!==v&&(u.flags|=2048)),l!==t&&l&&(e.child.flags|=8192),Qu(e,e.updateQueue),He(e),null);case 4:return Tt(),t===null&&O0(e.stateNode.containerInfo),He(e),null;case 10:return di(e.type),He(e),null;case 19:if(it(sn),u=e.memoizedState,u===null)return He(e),null;if(v=(e.flags&128)!==0,C=u.rendering,C===null)if(v)Ye(u,!1);else{if(qe!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(C=Ou(t),C!==null){for(e.flags|=128,Ye(u,!1),t=C.updateQueue,e.updateQueue=t,Qu(e,t),e.subtreeFlags=0,t=l,l=e.child;l!==null;)pu(l,t),l=l.sibling;return at(sn,sn.current&1|2),pe&&hi(e,u.treeForkCount),e.child}t=t.sibling}u.tail!==null&&dn()>Pa&&(e.flags|=128,v=!0,Ye(u,!1),e.lanes=4194304)}else{if(!v)if(t=Ou(C),t!==null){if(e.flags|=128,v=!0,t=t.updateQueue,e.updateQueue=t,Qu(e,t),Ye(u,!0),u.tail===null&&u.tailMode==="hidden"&&!C.alternate&&!pe)return He(e),null}else 2*dn()-u.renderingStartTime>Pa&&l!==536870912&&(e.flags|=128,v=!0,Ye(u,!1),e.lanes=4194304);u.isBackwards?(C.sibling=e.child,e.child=C):(t=u.last,t!==null?t.sibling=C:e.child=C,u.last=C)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=dn(),t.sibling=null,l=sn.current,at(sn,v?l&1|2:l&1),pe&&hi(e,u.treeForkCount),t):(He(e),null);case 22:case 23:return Ma(e),mi(),u=e.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(e.flags|=8192):u&&(e.flags|=8192),u?(l&536870912)!==0&&(e.flags&128)===0&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),l=e.updateQueue,l!==null&&Qu(e,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),u=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),u!==l&&(e.flags|=2048),t!==null&&it(nr),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),e.memoizedState.cache!==l&&(e.flags|=2048),di(gn),He(e),null;case 25:return null;case 30:return null}throw Error(r(156,e.tag))}function Nf(t,e){switch(Jc(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(gn),Tt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Mt(e),null;case 31:if(e.memoizedState!==null){if(Ma(e),e.alternate===null)throw Error(r(340));Sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ma(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(r(340));Sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(sn),null;case 4:return Tt(),null;case 10:return di(e.type),null;case 22:case 23:return Ma(e),mi(),t!==null&&it(nr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return di(gn),null;case 25:return null;default:return null}}function Ao(t,e){switch(Jc(e),e.tag){case 3:di(gn),Tt();break;case 26:case 27:case 5:Mt(e);break;case 4:Tt();break;case 31:e.memoizedState!==null&&Ma(e);break;case 13:Ma(e);break;case 19:it(sn);break;case 10:di(e.type);break;case 22:case 23:Ma(e),mi(),t!==null&&it(nr);break;case 24:di(gn)}}function mr(t,e){try{var l=e.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var v=u.next;l=v;do{if((l.tag&t)===t){u=void 0;var C=l.create,V=l.inst;u=C(),V.destroy=u}l=l.next}while(l!==v)}}catch(k){Yt(e,e.return,k)}}function za(t,e,l){try{var u=e.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var C=v.next;u=C;do{if((u.tag&t)===t){var V=u.inst,k=V.destroy;if(k!==void 0){V.destroy=void 0,v=e;var rt=l,vt=k;try{vt()}catch(_t){Yt(v,rt,_t)}}}u=u.next}while(u!==C)}}catch(_t){Yt(e,e.return,_t)}}function gs(t){var e=t.updateQueue;if(e!==null){var l=t.stateNode;try{wh(e,l)}catch(u){Yt(t,t.return,u)}}}function Ku(t,e,l){l.props=Ci(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(u){Yt(t,e,u)}}function Ti(t,e){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof l=="function"?t.refCleanup=l(u):l.current=u}}catch(v){Yt(t,e,v)}}function aa(t,e){var l=t.ref,u=t.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(v){Yt(t,e,v)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Yt(t,e,v)}else l.current=null}function Df(t){var e=t.type,l=t.memoizedProps,u=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(v){Yt(t,t.return,v)}}function $i(t,e,l){try{var u=t.stateNode;Zm(u,t.type,l,e),u[On]=e}catch(v){Yt(t,t.return,v)}}function vd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cs(t.type)||t.tag===4}function vr(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||vd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cs(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _o(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,e):(e=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,e.appendChild(t),l=l._reactRootContainer,l!=null||e.onclick!==null||(e.onclick=oa));else if(u!==4&&(u===27&&Cs(t.type)&&(l=t.stateNode,e=null),t=t.child,t!==null))for(_o(t,e,l),t=t.sibling;t!==null;)_o(t,e,l),t=t.sibling}function yr(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?l.insertBefore(t,e):l.appendChild(t);else if(u!==4&&(u===27&&Cs(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(yr(t,e,l),t=t.sibling;t!==null;)yr(t,e,l),t=t.sibling}function Oo(t){var e=t.stateNode,l=t.memoizedProps;try{for(var u=t.type,v=e.attributes;v.length;)e.removeAttributeNode(v[0]);ra(e,u,l),e[Cn]=t,e[On]=l}catch(C){Yt(t,t.return,C)}}var ga=!1,_e=!1,Dl=!1,Iu=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function zf(t,e){if(t=t.containerInfo,x0=Nd,t=Qa(t),cu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else t:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var v=u.anchorOffset,C=u.focusNode;u=u.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break t}var V=0,k=-1,rt=-1,vt=0,_t=0,zt=t,bt=null;e:for(;;){for(var Et;zt!==l||v!==0&&zt.nodeType!==3||(k=V+v),zt!==C||u!==0&&zt.nodeType!==3||(rt=V+u),zt.nodeType===3&&(V+=zt.nodeValue.length),(Et=zt.firstChild)!==null;)bt=zt,zt=Et;for(;;){if(zt===t)break e;if(bt===l&&++vt===v&&(k=V),bt===C&&++_t===u&&(rt=V),(Et=zt.nextSibling)!==null)break;zt=bt,bt=zt.parentNode}zt=Et}l=k===-1||rt===-1?null:{start:k,end:rt}}else l=null}l=l||{start:0,end:0}}else l=null;for(N0={focusedElem:t,selectionRange:l},Nd=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){switch(e=Ke,C=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)v=t[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&C!==null){t=void 0,l=e,v=C.memoizedProps,C=C.memoizedState,u=l.stateNode;try{var Kt=Ci(l.type,v);t=u.getSnapshotBeforeUpdate(Kt,C),u.__reactInternalSnapshotBeforeUpdate=t}catch(te){Yt(l,l.return,te)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,l=t.nodeType,l===9)U0(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":U0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function Sr(t,e,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Ai(t,l),u&4&&mr(5,l);break;case 1:if(Ai(t,l),u&4)if(t=l.stateNode,e===null)try{t.componentDidMount()}catch(V){Yt(l,l.return,V)}else{var v=Ci(l.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(v,e,t.__reactInternalSnapshotBeforeUpdate)}catch(V){Yt(l,l.return,V)}}u&64&&gs(l),u&512&&Ti(l,l.return);break;case 3:if(Ai(t,l),u&64&&(t=l.updateQueue,t!==null)){if(e=null,l.child!==null)switch(l.child.tag){case 27:case 5:e=l.child.stateNode;break;case 1:e=l.child.stateNode}try{wh(t,e)}catch(V){Yt(l,l.return,V)}}break;case 27:e===null&&u&4&&Oo(l);case 26:case 5:Ai(t,l),e===null&&u&4&&Df(l),u&512&&Ti(l,l.return);break;case 12:Ai(t,l);break;case 31:Ai(t,l),u&4&&Mo(t,l);break;case 13:Ai(t,l),u&4&&br(t,l),u&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=zn.bind(null,l),nv(t,l))));break;case 22:if(u=l.memoizedState!==null||ga,!u){e=e!==null&&e.memoizedState!==null||_e,v=ga;var C=_e;ga=u,(_e=e)&&!C?ma(t,l,(l.subtreeFlags&8772)!==0):Ai(t,l),ga=v,_e=C}break;case 30:break;default:Ai(t,l)}}function Ro(t){var e=t.alternate;e!==null&&(t.alternate=null,Ro(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&tn(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Oe=null,kt=!1;function ge(t,e,l){for(l=l.child;l!==null;)fn(t,e,l),l=l.sibling}function fn(t,e,l){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(rn,l)}catch{}switch(l.tag){case 26:_e||aa(l,e),ge(t,e,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_e||aa(l,e);var u=Oe,v=kt;Cs(l.type)&&(Oe=l.stateNode,kt=!1),ge(t,e,l),Lf(l.stateNode),Oe=u,kt=v;break;case 5:_e||aa(l,e);case 6:if(u=Oe,v=kt,Oe=null,ge(t,e,l),Oe=u,kt=v,Oe!==null)if(kt)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(l.stateNode)}catch(C){Yt(l,e,C)}else try{Oe.removeChild(l.stateNode)}catch(C){Yt(l,e,C)}break;case 18:Oe!==null&&(kt?(t=Oe,l1(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),ic(t)):l1(Oe,l.stateNode));break;case 4:u=Oe,v=kt,Oe=l.stateNode.containerInfo,kt=!0,ge(t,e,l),Oe=u,kt=v;break;case 0:case 11:case 14:case 15:za(2,l,e),_e||za(4,l,e),ge(t,e,l);break;case 1:_e||(aa(l,e),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Ku(l,e,u)),ge(t,e,l);break;case 21:ge(t,e,l);break;case 22:_e=(u=_e)||l.memoizedState!==null,ge(t,e,l),_e=u;break;default:ge(t,e,l)}}function Mo(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ic(t)}catch(l){Yt(e,e.return,l)}}}function br(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ic(t)}catch(l){Yt(e,e.return,l)}}function Cr(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Iu),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Iu),e;default:throw Error(r(435,t.tag))}}function Er(t,e){var l=Cr(t);e.forEach(function(u){if(!l.has(u)){l.add(u);var v=Ae.bind(null,t,u);u.then(v,v)}})}function Nn(t,e){var l=e.deletions;if(l!==null)for(var u=0;u<l.length;u++){var v=l[u],C=t,V=e,k=V;t:for(;k!==null;){switch(k.tag){case 27:if(Cs(k.type)){Oe=k.stateNode,kt=!1;break t}break;case 5:Oe=k.stateNode,kt=!1;break t;case 3:case 4:Oe=k.stateNode.containerInfo,kt=!0;break t}k=k.return}if(Oe===null)throw Error(r(160));fn(C,V,v),Oe=null,kt=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)yd(e,t),e=e.sibling}var Kn=null;function yd(t,e){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(e,t),qn(t),u&4&&(za(3,t,t.return),mr(3,t),za(5,t,t.return));break;case 1:Nn(e,t),qn(t),u&512&&(_e||l===null||aa(l,l.return)),u&64&&ga&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var v=Kn;if(Nn(e,t),qn(t),u&512&&(_e||l===null||aa(l,l.return)),u&4){var C=l!==null?l.memoizedState:null;if(u=t.memoizedState,l===null)if(u===null)if(t.stateNode===null){t:{u=t.type,l=t.memoizedProps,v=v.ownerDocument||v;e:switch(u){case"title":C=v.getElementsByTagName("title")[0],(!C||C[Vl]||C[Cn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(u),v.head.insertBefore(C,v.querySelector("head > title"))),ra(C,u,l),C[Cn]=t,Rn(C),u=C;break t;case"link":var V=m1("link","href",v).get(u+(l.href||""));if(V){for(var k=0;k<V.length;k++)if(C=V[k],C.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&C.getAttribute("rel")===(l.rel==null?null:l.rel)&&C.getAttribute("title")===(l.title==null?null:l.title)&&C.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){V.splice(k,1);break e}}C=v.createElement(u),ra(C,u,l),v.head.appendChild(C);break;case"meta":if(V=m1("meta","content",v).get(u+(l.content||""))){for(k=0;k<V.length;k++)if(C=V[k],C.getAttribute("content")===(l.content==null?null:""+l.content)&&C.getAttribute("name")===(l.name==null?null:l.name)&&C.getAttribute("property")===(l.property==null?null:l.property)&&C.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&C.getAttribute("charset")===(l.charSet==null?null:l.charSet)){V.splice(k,1);break e}}C=v.createElement(u),ra(C,u,l),v.head.appendChild(C);break;default:throw Error(r(468,u))}C[Cn]=t,Rn(C),u=C}t.stateNode=u}else v1(v,t.type,t.stateNode);else t.stateNode=g1(v,u,t.memoizedProps);else C!==u?(C===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):C.count--,u===null?v1(v,t.type,t.stateNode):g1(v,u,t.memoizedProps)):u===null&&t.stateNode!==null&&$i(t,t.memoizedProps,l.memoizedProps)}break;case 27:Nn(e,t),qn(t),u&512&&(_e||l===null||aa(l,l.return)),l!==null&&u&4&&$i(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Nn(e,t),qn(t),u&512&&(_e||l===null||aa(l,l.return)),t.flags&32){v=t.stateNode;try{cl(v,"")}catch(Kt){Yt(t,t.return,Kt)}}u&4&&t.stateNode!=null&&(v=t.memoizedProps,$i(t,v,l!==null?l.memoizedProps:v)),u&1024&&(Dl=!0);break;case 6:if(Nn(e,t),qn(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,l=t.stateNode;try{l.nodeValue=u}catch(Kt){Yt(t,t.return,Kt)}}break;case 3:if(Od=null,v=Kn,Kn=Ad(e.containerInfo),Nn(e,t),Kn=v,qn(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ic(e.containerInfo)}catch(Kt){Yt(t,t.return,Kt)}Dl&&(Dl=!1,Uf(t));break;case 4:u=Kn,Kn=Ad(t.stateNode.containerInfo),Nn(e,t),qn(t),Kn=u;break;case 12:Nn(e,t),qn(t);break;case 31:Nn(e,t),qn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Er(t,u)));break;case 13:Nn(e,t),qn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(el=dn()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Er(t,u)));break;case 22:v=t.memoizedState!==null;var rt=l!==null&&l.memoizedState!==null,vt=ga,_t=_e;if(ga=vt||v,_e=_t||rt,Nn(e,t),_e=_t,ga=vt,qn(t),u&8192)t:for(e=t.stateNode,e._visibility=v?e._visibility&-2:e._visibility|1,v&&(l===null||rt||ga||_e||Tr(t)),l=null,e=t;;){if(e.tag===5||e.tag===26){if(l===null){rt=l=e;try{if(C=rt.stateNode,v)V=C.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{k=rt.stateNode;var zt=rt.memoizedProps.style,bt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;k.style.display=bt==null||typeof bt=="boolean"?"":(""+bt).trim()}}catch(Kt){Yt(rt,rt.return,Kt)}}}else if(e.tag===6){if(l===null){rt=e;try{rt.stateNode.nodeValue=v?"":rt.memoizedProps}catch(Kt){Yt(rt,rt.return,Kt)}}}else if(e.tag===18){if(l===null){rt=e;try{var Et=rt.stateNode;v?r1(Et,!0):r1(rt.stateNode,!1)}catch(Kt){Yt(rt,rt.return,Kt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;l===e&&(l=null),e=e.return}l===e&&(l=null),e.sibling.return=e.return,e=e.sibling}u&4&&(u=t.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Er(t,l))));break;case 19:Nn(e,t),qn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Er(t,u)));break;case 30:break;case 21:break;default:Nn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{for(var l,u=t.return;u!==null;){if(vd(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,C=vr(t);yr(t,C,v);break;case 5:var V=l.stateNode;l.flags&32&&(cl(V,""),l.flags&=-33);var k=vr(t);yr(t,k,V);break;case 3:case 4:var rt=l.stateNode.containerInfo,vt=vr(t);_o(t,vt,rt);break;default:throw Error(r(161))}}catch(_t){Yt(t,t.return,_t)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Uf(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ai(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Sr(t,e.alternate,e),e=e.sibling}function Tr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:za(4,e,e.return),Tr(e);break;case 1:aa(e,e.return);var l=e.stateNode;typeof l.componentWillUnmount=="function"&&Ku(e,e.return,l),Tr(e);break;case 27:Lf(e.stateNode);case 26:case 5:aa(e,e.return),Tr(e);break;case 22:e.memoizedState===null&&Tr(e);break;case 30:Tr(e);break;default:Tr(e)}t=t.sibling}}function ma(t,e,l){for(l=l&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var u=e.alternate,v=t,C=e,V=C.flags;switch(C.tag){case 0:case 11:case 15:ma(v,C,l),mr(4,C);break;case 1:if(ma(v,C,l),u=C,v=u.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(vt){Yt(u,u.return,vt)}if(u=C,v=u.updateQueue,v!==null){var k=u.stateNode;try{var rt=v.shared.hiddenCallbacks;if(rt!==null)for(v.shared.hiddenCallbacks=null,v=0;v<rt.length;v++)lf(rt[v],k)}catch(vt){Yt(u,u.return,vt)}}l&&V&64&&gs(C),Ti(C,C.return);break;case 27:Oo(C);case 26:case 5:ma(v,C,l),l&&u===null&&V&4&&Df(C),Ti(C,C.return);break;case 12:ma(v,C,l);break;case 31:ma(v,C,l),l&&V&4&&Mo(v,C);break;case 13:ma(v,C,l),l&&V&4&&br(v,C);break;case 22:C.memoizedState===null&&ma(v,C,l),Ti(C,C.return);break;case 30:break;default:ma(v,C,l)}e=e.sibling}}function Ar(t,e){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&ls(l))}function zl(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ls(t))}function Va(t,e,l,u){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ua(t,e,l,u),e=e.sibling}function Ua(t,e,l,u){var v=e.flags;switch(e.tag){case 0:case 11:case 15:Va(t,e,l,u),v&2048&&mr(9,e);break;case 1:Va(t,e,l,u);break;case 3:Va(t,e,l,u),v&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ls(t)));break;case 12:if(v&2048){Va(t,e,l,u),t=e.stateNode;try{var C=e.memoizedProps,V=C.id,k=C.onPostCommit;typeof k=="function"&&k(V,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(rt){Yt(e,e.return,rt)}}else Va(t,e,l,u);break;case 31:Va(t,e,l,u);break;case 13:Va(t,e,l,u);break;case 23:break;case 22:C=e.stateNode,V=e.alternate,e.memoizedState!==null?C._visibility&2?Va(t,e,l,u):nn(t,e):C._visibility&2?Va(t,e,l,u):(C._visibility|=2,ia(t,e,l,u,(e.subtreeFlags&10256)!==0||!1)),v&2048&&Ar(V,e);break;case 24:Va(t,e,l,u),v&2048&&zl(e.alternate,e);break;default:Va(t,e,l,u)}}function ia(t,e,l,u,v){for(v=v&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var C=t,V=e,k=l,rt=u,vt=V.flags;switch(V.tag){case 0:case 11:case 15:ia(C,V,k,rt,v),mr(8,V);break;case 23:break;case 22:var _t=V.stateNode;V.memoizedState!==null?_t._visibility&2?ia(C,V,k,rt,v):nn(C,V):(_t._visibility|=2,ia(C,V,k,rt,v)),v&&vt&2048&&Ar(V.alternate,V);break;case 24:ia(C,V,k,rt,v),v&&vt&2048&&zl(V.alternate,V);break;default:ia(C,V,k,rt,v)}e=e.sibling}}function nn(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var l=t,u=e,v=u.flags;switch(u.tag){case 22:nn(l,u),v&2048&&Ar(u.alternate,u);break;case 24:nn(l,u),v&2048&&zl(u.alternate,u);break;default:nn(l,u)}e=e.sibling}}var _r=8192;function Or(t,e,l){if(t.subtreeFlags&_r)for(t=t.child;t!==null;)Gf(t,e,l),t=t.sibling}function Gf(t,e,l){switch(t.tag){case 26:Or(t,e,l),t.flags&_r&&t.memoizedState!==null&&pv(l,Kn,t.memoizedState,t.memoizedProps);break;case 5:Or(t,e,l);break;case 3:case 4:var u=Kn;Kn=Ad(t.stateNode.containerInfo),Or(t,e,l),Kn=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=_r,_r=16777216,Or(t,e,l),_r=u):Or(t,e,l));break;default:Or(t,e,l)}}function An(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Rr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];Ke=u,Zu(u,t)}An(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_i(t),t=t.sibling}function _i(t){switch(t.tag){case 0:case 11:case 15:Rr(t),t.flags&2048&&za(9,t,t.return);break;case 3:Rr(t);break;case 12:Rr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ke(t)):Rr(t);break;default:Rr(t)}}function ke(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];Ke=u,Zu(u,t)}An(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:za(8,e,e.return),ke(e);break;case 22:l=e.stateNode,l._visibility&2&&(l._visibility&=-3,ke(e));break;default:ke(e)}t=t.sibling}}function Zu(t,e){for(;Ke!==null;){var l=Ke;switch(l.tag){case 0:case 11:case 15:za(8,l,e);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ls(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Ke=u;else t:for(l=t;Ke!==null;){u=Ke;var v=u.sibling,C=u.return;if(Ro(u),u===l){Ke=null;break t}if(v!==null){v.return=C,Ke=v;break t}Ke=C}}}var Sd={getCacheForType:function(t){var e=Qe(gn),l=e.data.get(t);return l===void 0&&(l=t(),e.data.set(t,l)),l},cacheSignal:function(){return Qe(gn).controller.signal}},Dn=typeof WeakMap=="function"?WeakMap:Map,Wt=0,oe=null,ne=null,re=0,De=0,In=null,ei=!1,tl=!1,ms=!1,Xa=0,qe=0,Ul=0,se=0,je=0,$t=0,ce=0,be=null,Ve=null,Oi=!1,el=0,Ju=0,Pa=1/0,Ie=null,la=null,Ze=0,Ri=null,Vn=null,va=0,Mr=0,Zn=null,Fu=null,xr=0,Nr=null;function Jn(){return(Wt&2)!==0&&re!==0?re&-re:x.T!==null?E0():Ui()}function nl(){if($t===0)if((re&536870912)===0||pe){var t=Hs;Hs<<=1,(Hs&3932160)===0&&(Hs=262144),$t=t}else $t=536870912;return t=Fe.current,t!==null&&(t.flags|=32),$t}function Re(t,e,l){(t===oe&&(De===2||De===9)||t.cancelPendingCommit!==null)&&(xi(t,0),Mi(t,re,$t,!1)),sl(t,l),((Wt&2)===0||t!==oe)&&(t===oe&&((Wt&2)===0&&(se|=l),qe===4&&Mi(t,re,$t,!1)),Hl(t))}function al(t,e,l){if((Wt&6)!==0)throw Error(r(327));var u=!l&&(e&127)===0&&(e&t.expiredLanes)===0||Yr(t,e),v=u?et(t,e):_(t,e,!0),C=u;do{if(v===0){tl&&!u&&Mi(t,e,0,!1);break}else{if(l=t.current.alternate,C&&!vs(l)){v=_(t,e,!1),C=!1;continue}if(v===2){if(C=e,t.errorRecoveryDisabledLanes&C)var V=0;else V=t.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){e=V;t:{var k=t;v=be;var rt=k.current.memoizedState.isDehydrated;if(rt&&(xi(k,V).flags|=256),V=_(k,V,!1),V!==2){if(ms&&!rt){k.errorRecoveryDisabledLanes|=C,se|=C,v=4;break t}C=Ve,Ve=v,C!==null&&(Ve===null?Ve=C:Ve.push.apply(Ve,C))}v=V}if(C=!1,v!==2)continue}}if(v===1){xi(t,0),Mi(t,e,0,!0);break}t:{switch(u=t,C=v,C){case 0:case 1:throw Error(r(345));case 4:if((e&4194048)!==e)break;case 6:Mi(u,e,$t,!ei);break t;case 2:Ve=null;break;case 3:case 5:break;default:throw Error(r(329))}if((e&62914560)===e&&(v=el+300-dn(),10<v)){if(Mi(u,e,$t,!ei),Yl(u,0,!0)!==0)break t;va=e,u.timeoutHandle=a1(Dr.bind(null,u,l,Ve,Ie,Oi,e,$t,se,ce,ei,C,"Throttled",-0,0),v);break t}Dr(u,l,Ve,Ie,Oi,e,$t,se,ce,ei,C,null,-0,0)}}break}while(!0);Hl(t)}function Dr(t,e,l,u,v,C,V,k,rt,vt,_t,zt,bt,Et){if(t.timeoutHandle=-1,zt=e.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oa},Gf(e,C,zt);var Kt=(C&62914560)===C?el-dn():(C&4194048)===C?Ju-dn():0;if(Kt=gv(zt,Kt),Kt!==null){va=C,t.cancelPendingCommit=Kt(ie.bind(null,t,e,C,l,u,v,V,k,rt,_t,zt,null,bt,Et)),Mi(t,C,V,!vt);return}}ie(t,e,C,l,u,v,V,k,rt)}function vs(t){for(var e=t;;){var l=e.tag;if((l===0||l===11||l===15)&&e.flags&16384&&(l=e.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var v=l[u],C=v.getSnapshot;v=v.value;try{if(!Gn(C(),v))return!1}catch{return!1}}if(l=e.child,e.subtreeFlags&16384&&l!==null)l.return=e,e=l;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mi(t,e,l,u){e&=~je,e&=~se,t.suspendedLanes|=e,t.pingedLanes&=~e,u&&(t.warmLanes|=e),u=t.expirationTimes;for(var v=e;0<v;){var C=31-Ca(v),V=1<<C;u[C]=-1,v&=~V}l!==0&&ql(t,l,e)}function ys(){return(Wt&6)===0?(Bf(0),!1):!0}function ku(){if(ne!==null){if(De===0)var t=ne.return;else t=ne,ka=me=null,uf(t),El=null,fo=0,t=ne;for(;t!==null;)Ao(t.alternate,t),t=t.return;ne=null}}function xi(t,e){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,km(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),va=0,ku(),oe=t,ne=l=Ia(t.current,null),re=e,De=0,In=null,ei=!1,tl=Yr(t,e),ms=!1,ce=$t=je=se=Ul=qe=0,Ve=be=null,Oi=!1,(e&8)!==0&&(e|=e&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=e;0<u;){var v=31-Ca(u),C=1<<v;e|=t[v],u&=~C}return Xa=e,ao(),l}function Wu(t,e){ae=null,x.H=fs,e===ir||e===Tu?(e=_u(),De=3):e===uo?(e=_u(),De=4):De=e===Of?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,In=e,ne===null&&(qe=1,qu(t,_a(e,t.current)))}function a(){var t=Fe.current;return t===null?!0:(re&4194048)===re?Ya===null:(re&62914560)===re||(re&536870912)!==0?t===Ya:!1}function i(){var t=x.H;return x.H=fs,t===null?fs:t}function f(){var t=x.A;return x.A=Sd,t}function m(){qe=4,ei||(re&4194048)!==re&&Fe.current!==null||(tl=!0),(Ul&134217727)===0&&(se&134217727)===0||oe===null||Mi(oe,re,$t,!1)}function _(t,e,l){var u=Wt;Wt|=2;var v=i(),C=f();(oe!==t||re!==e)&&(Ie=null,xi(t,e)),e=!1;var V=qe;t:do try{if(De!==0&&ne!==null){var k=ne,rt=In;switch(De){case 8:ku(),V=6;break t;case 3:case 2:case 9:case 6:Fe.current===null&&(e=!0);var vt=De;if(De=0,In=null,Ht(t,k,rt,vt),l&&tl){V=0;break t}break;default:vt=De,De=0,In=null,Ht(t,k,rt,vt)}}H(),V=qe;break}catch(_t){Wu(t,_t)}while(!0);return e&&t.shellSuspendCounter++,ka=me=null,Wt=u,x.H=v,x.A=C,ne===null&&(oe=null,re=0,ao()),V}function H(){for(;ne!==null;)St(ne)}function et(t,e){var l=Wt;Wt|=2;var u=i(),v=f();oe!==t||re!==e?(Ie=null,Pa=dn()+500,xi(t,e)):tl=Yr(t,e);t:do try{if(De!==0&&ne!==null){e=ne;var C=In;e:switch(De){case 1:De=0,In=null,Ht(t,e,C,1);break;case 2:case 9:if(Pi(C)){De=0,In=null,Gt(e);break}e=function(){De!==2&&De!==9||oe!==t||(De=7),Hl(t)},C.then(e,e);break t;case 3:De=7;break t;case 4:De=5;break t;case 7:Pi(C)?(De=0,In=null,Gt(e)):(De=0,In=null,Ht(t,e,C,7));break;case 5:var V=null;switch(ne.tag){case 26:V=ne.memoizedState;case 5:case 27:var k=ne;if(V?y1(V):k.stateNode.complete){De=0,In=null;var rt=k.sibling;if(rt!==null)ne=rt;else{var vt=k.return;vt!==null?(ne=vt,Vt(vt)):ne=null}break e}}De=0,In=null,Ht(t,e,C,5);break;case 6:De=0,In=null,Ht(t,e,C,6);break;case 8:ku(),qe=6;break t;default:throw Error(r(462))}}st();break}catch(_t){Wu(t,_t)}while(!0);return ka=me=null,x.H=u,x.A=v,Wt=l,ne!==null?0:(oe=null,re=0,ao(),qe)}function st(){for(;ne!==null&&!Be();)St(ne)}function St(t){var e=Nl(t.alternate,t,Xa);t.memoizedProps=t.pendingProps,e===null?Vt(t):ne=e}function Gt(t){var e=t,l=e.alternate;switch(e.tag){case 15:case 0:e=Da(l,e,e.pendingProps,e.type,void 0,re);break;case 11:e=Da(l,e,e.pendingProps,e.type.render,e.ref,re);break;case 5:uf(e);default:Ao(l,e),e=ne=pu(e,Xa),e=Nl(l,e,Xa)}t.memoizedProps=t.pendingProps,e===null?Vt(t):ne=e}function Ht(t,e,l,u){ka=me=null,uf(e),El=null,fo=0;var v=e.return;try{if(_f(t,v,e,l,re)){qe=1,qu(t,_a(l,t.current)),ne=null;return}}catch(C){if(v!==null)throw ne=v,C;qe=1,qu(t,_a(l,t.current)),ne=null;return}e.flags&32768?(pe||u===1?t=!0:tl||(re&536870912)!==0?t=!1:(ei=t=!0,(u===2||u===9||u===3||u===6)&&(u=Fe.current,u!==null&&u.tag===13&&(u.flags|=16384))),Pt(e,t)):Vt(e)}function Vt(t){var e=t;do{if((e.flags&32768)!==0){Pt(e,ei);return}t=e.return;var l=ps(e.alternate,e,Xa);if(l!==null){ne=l;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);qe===0&&(qe=5)}function Pt(t,e){do{var l=Nf(t.alternate,t);if(l!==null){l.flags&=32767,ne=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!e&&(t=t.sibling,t!==null)){ne=t;return}ne=t=l}while(t!==null);qe=6,ne=null}function ie(t,e,l,u,v,C,V,k,rt){t.cancelPendingCommit=null;do ht();while(Ze!==0);if((Wt&6)!==0)throw Error(r(327));if(e!==null){if(e===t.current)throw Error(r(177));if(C=e.lanes|e.childLanes,C|=wa,Sc(t,l,C,V,k,rt),t===oe&&(ne=oe=null,re=0),Vn=e,Ri=t,va=l,Mr=C,Zn=v,Fu=u,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bl(ft,function(){return Ct(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||u){u=x.T,x.T=null,v=Y.p,Y.p=2,V=Wt,Wt|=4;try{zf(t,e,l)}finally{Wt=V,Y.p=v,x.T=u}}Ze=1,Ga(),Ss(),Gl()}}function Ga(){if(Ze===1){Ze=0;var t=Ri,e=Vn,l=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||l){l=x.T,x.T=null;var u=Y.p;Y.p=2;var v=Wt;Wt|=4;try{yd(e,t);var C=N0,V=Qa(t.containerInfo),k=C.focusedElem,rt=C.selectionRange;if(V!==k&&k&&k.ownerDocument&&kr(k.ownerDocument.documentElement,k)){if(rt!==null&&cu(k)){var vt=rt.start,_t=rt.end;if(_t===void 0&&(_t=vt),"selectionStart"in k)k.selectionStart=vt,k.selectionEnd=Math.min(_t,k.value.length);else{var zt=k.ownerDocument||document,bt=zt&&zt.defaultView||window;if(bt.getSelection){var Et=bt.getSelection(),Kt=k.textContent.length,te=Math.min(rt.start,Kt),Pe=rt.end===void 0?te:Math.min(rt.end,Kt);!Et.extend&&te>Pe&&(V=Pe,Pe=te,te=V);var dt=qc(k,te),ct=qc(k,Pe);if(dt&&ct&&(Et.rangeCount!==1||Et.anchorNode!==dt.node||Et.anchorOffset!==dt.offset||Et.focusNode!==ct.node||Et.focusOffset!==ct.offset)){var mt=zt.createRange();mt.setStart(dt.node,dt.offset),Et.removeAllRanges(),te>Pe?(Et.addRange(mt),Et.extend(ct.node,ct.offset)):(mt.setEnd(ct.node,ct.offset),Et.addRange(mt))}}}}for(zt=[],Et=k;Et=Et.parentNode;)Et.nodeType===1&&zt.push({element:Et,left:Et.scrollLeft,top:Et.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<zt.length;k++){var Nt=zt[k];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}Nd=!!x0,N0=x0=null}finally{Wt=v,Y.p=u,x.T=l}}t.current=e,Ze=2}}function Ss(){if(Ze===2){Ze=0;var t=Ri,e=Vn,l=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||l){l=x.T,x.T=null;var u=Y.p;Y.p=2;var v=Wt;Wt|=4;try{Sr(t,e.alternate,e)}finally{Wt=v,Y.p=u,x.T=l}}Ze=3}}function Gl(){if(Ze===4||Ze===3){Ze=0,Sa();var t=Ri,e=Vn,l=va,u=Fu;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Ze=5:(Ze=0,Vn=Ri=null,yt(t,t.pendingLanes));var v=t.pendingLanes;if(v===0&&(la=null),ws(l),e=e.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(rn,e,void 0,(e.current.flags&128)===128)}catch{}if(u!==null){e=x.T,v=Y.p,Y.p=2,x.T=null;try{for(var C=t.onRecoverableError,V=0;V<u.length;V++){var k=u[V];C(k.value,{componentStack:k.stack})}}finally{x.T=e,Y.p=v}}(va&3)!==0&&ht(),Hl(t),v=t.pendingLanes,(l&261930)!==0&&(v&42)!==0?t===Nr?xr++:(xr=0,Nr=t):xr=0,Bf(0)}}function yt(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ls(e)))}function ht(){return Ga(),Ss(),Gl(),Ct()}function Ct(){if(Ze!==5)return!1;var t=Ri,e=Mr;Mr=0;var l=ws(va),u=x.T,v=Y.p;try{Y.p=32>l?32:l,x.T=null,l=Zn,Zn=null;var C=Ri,V=va;if(Ze=0,Vn=Ri=null,va=0,(Wt&6)!==0)throw Error(r(331));var k=Wt;if(Wt|=4,_i(C.current),Ua(C,C.current,V,l),Wt=k,Bf(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(rn,C)}catch{}return!0}finally{Y.p=v,x.T=u,yt(t,e)}}function jt(t,e,l){e=_a(l,e),e=Na(t.stateNode,e,2),t=Al(t,e,2),t!==null&&(sl(t,2),Hl(t))}function Yt(t,e,l){if(t.tag===3)jt(t,t,l);else for(;e!==null;){if(e.tag===3){jt(e,t,l);break}else if(e.tag===1){var u=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(la===null||!la.has(u))){t=_a(l,t),l=Af(2),u=Al(e,l,2),u!==null&&(gd(l,u,e,t),sl(u,2),Hl(u));break}}e=e.return}}function Le(t,e,l){var u=t.pingCache;if(u===null){u=t.pingCache=new Dn;var v=new Set;u.set(e,v)}else v=u.get(e),v===void 0&&(v=new Set,u.set(e,v));v.has(l)||(ms=!0,v.add(l),t=ee.bind(null,t,e,l),e.then(t,t))}function ee(t,e,l){var u=t.pingCache;u!==null&&u.delete(e),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,oe===t&&(re&l)===l&&(qe===4||qe===3&&(re&62914560)===re&&300>dn()-el?(Wt&2)===0&&xi(t,0):je|=l,ce===re&&(ce=0)),Hl(t)}function Ce(t,e){e===0&&(e=yc()),t=Aa(t,e),t!==null&&(sl(t,e),Hl(t))}function zn(t){var e=t.memoizedState,l=0;e!==null&&(l=e.retryLane),Ce(t,l)}function Ae(t,e){var l=0;switch(t.tag){case 31:case 13:var u=t.stateNode,v=t.memoizedState;v!==null&&(l=v.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(e),Ce(t,l)}function Bl(t,e){return _n(t,e)}var $u=null,tc=null,b0=!1,bd=!1,C0=!1,bs=0;function Hl(t){t!==tc&&t.next===null&&(tc===null?$u=tc=t:tc=tc.next=t),bd=!0,b0||(b0=!0,Ym())}function Bf(t,e){if(!C0&&bd){C0=!0;do for(var l=!1,u=$u;u!==null;){if(t!==0){var v=u.pendingLanes;if(v===0)var C=0;else{var V=u.suspendedLanes,k=u.pingedLanes;C=(1<<31-Ca(42|t)+1)-1,C&=v&~(V&~k),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(l=!0,Kp(u,C))}else C=re,C=Yl(u,u===oe?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(C&3)===0||Yr(u,C)||(l=!0,Kp(u,C));u=u.next}while(l);C0=!1}}function wm(){Xp()}function Xp(){bd=b0=!1;var t=0;bs!==0&&Fm()&&(t=bs);for(var e=dn(),l=null,u=$u;u!==null;){var v=u.next,C=Pp(u,e);C===0?(u.next=null,l===null?$u=v:l.next=v,v===null&&(tc=l)):(l=u,(t!==0||(C&3)!==0)&&(bd=!0)),u=v}Ze!==0&&Ze!==5||Bf(t),bs!==0&&(bs=0)}function Pp(t,e){for(var l=t.suspendedLanes,u=t.pingedLanes,v=t.expirationTimes,C=t.pendingLanes&-62914561;0<C;){var V=31-Ca(C),k=1<<V,rt=v[V];rt===-1?((k&l)===0||(k&u)!==0)&&(v[V]=ch(k,e)):rt<=e&&(t.expiredLanes|=k),C&=~k}if(e=oe,l=re,l=Yl(t,t===e?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,l===0||t===e&&(De===2||De===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Ge(u),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Yr(t,l)){if(e=l&-l,e===t.callbackPriority)return e;switch(u!==null&&Ge(u),ws(l)){case 2:case 8:l=ba;break;case 32:l=ft;break;case 268435456:l=Ut;break;default:l=ft}return u=Qp.bind(null,t),l=_n(l,u),t.callbackPriority=e,t.callbackNode=l,e}return u!==null&&u!==null&&Ge(u),t.callbackPriority=2,t.callbackNode=null,2}function Qp(t,e){if(Ze!==0&&Ze!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(ht()&&t.callbackNode!==l)return null;var u=re;return u=Yl(t,t===oe?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(al(t,u,e),Pp(t,dn()),t.callbackNode!=null&&t.callbackNode===l?Qp.bind(null,t):null)}function Kp(t,e){if(ht())return null;al(t,e,!0)}function Ym(){Wm(function(){(Wt&6)!==0?_n(ll,wm):Xp()})}function E0(){if(bs===0){var t=er;t===0&&(t=Ll,Ll<<=1,(Ll&261888)===0&&(Ll=256)),bs=t}return bs}function Ip(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Vs(""+t)}function Zp(t,e){var l=e.ownerDocument.createElement("input");return l.name=e.name,l.value=e.value,t.id&&l.setAttribute("form",t.id),e.parentNode.insertBefore(l,e),t=new FormData(t),l.parentNode.removeChild(l),t}function qm(t,e,l,u,v){if(e==="submit"&&l&&l.stateNode===v){var C=Ip((v[On]||null).action),V=u.submitter;V&&(e=(e=V[On]||null)?Ip(e.formAction):V.getAttribute("formAction"),e!==null&&(C=e,V=null));var k=new ko("action","action",null,u,v);t.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(bs!==0){var rt=V?Zp(v,V):new FormData(v);Lu(l,{pending:!0,data:rt,method:v.method,action:C},null,rt)}}else typeof C=="function"&&(k.preventDefault(),rt=V?Zp(v,V):new FormData(v),Lu(l,{pending:!0,data:rt,method:v.method,action:C},C,rt))},currentTarget:v}]})}}for(var T0=0;T0<ci.length;T0++){var A0=ci[T0],Vm=A0.toLowerCase(),Xm=A0[0].toUpperCase()+A0.slice(1);Hn(Vm,"on"+Xm)}Hn(hu,"onAnimationEnd"),Hn(Qc,"onAnimationIteration"),Hn(Uh,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(Kc,"onTransitionRun"),Hn(kn,"onTransitionStart"),Hn(Gh,"onTransitionCancel"),Hn(Wn,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hf));function Jp(t,e){e=(e&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],v=u.event;u=u.listeners;t:{var C=void 0;if(e)for(var V=u.length-1;0<=V;V--){var k=u[V],rt=k.instance,vt=k.currentTarget;if(k=k.listener,rt!==C&&v.isPropagationStopped())break t;C=k,v.currentTarget=vt;try{C(v)}catch(_t){Ka(_t)}v.currentTarget=null,C=rt}else for(V=0;V<u.length;V++){if(k=u[V],rt=k.instance,vt=k.currentTarget,k=k.listener,rt!==C&&v.isPropagationStopped())break t;C=k,v.currentTarget=vt;try{C(v)}catch(_t){Ka(_t)}v.currentTarget=null,C=rt}}}}function ve(t,e){var l=e[jo];l===void 0&&(l=e[jo]=new Set);var u=t+"__bubble";l.has(u)||(Fp(e,t,2,!1),l.add(u))}function _0(t,e,l){var u=0;e&&(u|=4),Fp(l,t,u,e)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function O0(t){if(!t[Cd]){t[Cd]=!0,wo.forEach(function(l){l!=="selectionchange"&&(Pm.has(l)||_0(l,!1,t),_0(l,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cd]||(e[Cd]=!0,_0("selectionchange",!1,e))}}function Fp(t,e,l,u){switch(_1(e)){case 2:var v=yv;break;case 8:v=Sv;break;default:v=q0}l=v.bind(null,e,l,t),v=void 0,!Zo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(v=!0),u?v!==void 0?t.addEventListener(e,l,{capture:!0,passive:v}):t.addEventListener(e,l,!0):v!==void 0?t.addEventListener(e,l,{passive:v}):t.addEventListener(e,l,!1)}function R0(t,e,l,u,v){var C=u;if((e&1)===0&&(e&2)===0&&u!==null)t:for(;;){if(u===null)return;var V=u.tag;if(V===3||V===4){var k=u.stateNode.containerInfo;if(k===v)break;if(V===4)for(V=u.return;V!==null;){var rt=V.tag;if((rt===3||rt===4)&&V.stateNode.containerInfo===v)return;V=V.return}for(;k!==null;){if(V=ol(k),V===null)return;if(rt=V.tag,rt===5||rt===6||rt===26||rt===27){u=C=V;continue t}k=k.parentNode}}u=u.return}xc(function(){var vt=C,_t=Ko(l),zt=[];t:{var bt=Ic.get(t);if(bt!==void 0){var Et=ko,Kt=t;switch(t){case"keypress":if(Xs(l)===0)break t;case"keydown":case"keyup":Et=Uc;break;case"focusin":Kt="focus",Et=tu;break;case"focusout":Kt="blur",Et=tu;break;case"beforeblur":case"afterblur":Et=tu;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Un;break;case hu:case Qc:case Uh:Et=dl;break;case Wn:Et=_h;break;case"scroll":case"scrollend":Et=vh;break;case"wheel":Et=Rh;break;case"copy":case"cut":case"paste":Et=pl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=Gc;break;case"toggle":case"beforetoggle":Et=eu}var te=(e&4)!==0,Pe=!te&&(t==="scroll"||t==="scrollend"),dt=te?bt!==null?bt+"Capture":null:bt;te=[];for(var ct=vt,mt;ct!==null;){var Nt=ct;if(mt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||mt===null||dt===null||(Nt=Kr(ct,dt),Nt!=null&&te.push(jf(ct,Nt,mt))),Pe)break;ct=ct.return}0<te.length&&(bt=new Et(bt,Kt,null,l,_t),zt.push({event:bt,listeners:te}))}}if((e&7)===0){t:{if(bt=t==="mouseover"||t==="pointerover",Et=t==="mouseout"||t==="pointerout",bt&&l!==Qr&&(Kt=l.relatedTarget||l.fromElement)&&(ol(Kt)||Kt[ri]))break t;if((Et||bt)&&(bt=_t.window===_t?_t:(bt=_t.ownerDocument)?bt.defaultView||bt.parentWindow:window,Et?(Kt=l.relatedTarget||l.toElement,Et=vt,Kt=Kt?ol(Kt):null,Kt!==null&&(Pe=h(Kt),te=Kt.tag,Kt!==Pe||te!==5&&te!==27&&te!==6)&&(Kt=null)):(Et=null,Kt=vt),Et!==Kt)){if(te=Dc,Nt="onMouseLeave",dt="onMouseEnter",ct="mouse",(t==="pointerout"||t==="pointerover")&&(te=Gc,Nt="onPointerLeave",dt="onPointerEnter",ct="pointer"),Pe=Et==null?bt:Vr(Et),mt=Kt==null?bt:Vr(Kt),bt=new te(Nt,ct+"leave",Et,l,_t),bt.target=Pe,bt.relatedTarget=mt,Nt=null,ol(_t)===vt&&(te=new te(dt,ct+"enter",Kt,l,_t),te.target=mt,te.relatedTarget=Pe,Nt=te),Pe=Nt,Et&&Kt)e:{for(te=Qm,dt=Et,ct=Kt,mt=0,Nt=dt;Nt;Nt=te(Nt))mt++;Nt=0;for(var Jt=ct;Jt;Jt=te(Jt))Nt++;for(;0<mt-Nt;)dt=te(dt),mt--;for(;0<Nt-mt;)ct=te(ct),Nt--;for(;mt--;){if(dt===ct||ct!==null&&dt===ct.alternate){te=dt;break e}dt=te(dt),ct=te(ct)}te=null}else te=null;Et!==null&&kp(zt,bt,Et,te,!1),Kt!==null&&Pe!==null&&kp(zt,Pe,Kt,te,!0)}}t:{if(bt=vt?Vr(vt):window,Et=bt.nodeName&&bt.nodeName.toLowerCase(),Et==="select"||Et==="input"&&bt.type==="file")var Me=su;else if(ui(bt))if(Lc)Me=d0;else{Me=en;var It=eo}else Et=bt.nodeName,!Et||Et.toLowerCase()!=="input"||bt.type!=="checkbox"&&bt.type!=="radio"?vt&&Qo(vt.elementType)&&(Me=su):Me=h0;if(Me&&(Me=Me(t,vt))){ru(zt,Me,l,_t);break t}It&&It(t,bt,vt),t==="focusout"&&vt&&bt.type==="number"&&vt.memoizedProps.value!=null&&Tc(bt,"number",bt.value)}switch(It=vt?Vr(vt):window,t){case"focusin":(ui(It)||It.contentEditable==="true")&&(Zl=It,no=vt,Jl=null);break;case"focusout":Jl=no=Zl=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":Wr=!1,Xc(zt,l,_t);break;case"selectionchange":if(Vc)break;case"keydown":case"keyup":Xc(zt,l,_t)}var fe;if(nu)t:{switch(t){case"compositionstart":var Se="onCompositionStart";break t;case"compositionend":Se="onCompositionEnd";break t;case"compositionupdate":Se="onCompositionUpdate";break t}Se=void 0}else gl?lu(t,l)&&(Se="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(au&&l.locale!=="ko"&&(gl||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&gl&&(fe=Nc()):(ji=_t,Jo="value"in ji?ji.value:ji.textContent,gl=!0)),It=Ed(vt,Se),0<It.length&&(Se=new Js(Se,t,null,l,_t),zt.push({event:Se,listeners:It}),fe?Se.data=fe:(fe=Fs(l),fe!==null&&(Se.data=fe)))),(fe=xh?Nh(t,l):jc(t,l))&&(Se=Ed(vt,"onBeforeInput"),0<Se.length&&(It=new Js("onBeforeInput","beforeinput",null,l,_t),zt.push({event:It,listeners:Se}),It.data=fe)),qm(zt,t,vt,l,_t)}Jp(zt,e)})}function jf(t,e,l){return{instance:t,listener:e,currentTarget:l}}function Ed(t,e){for(var l=e+"Capture",u=[];t!==null;){var v=t,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=Kr(t,l),v!=null&&u.unshift(jf(t,v,C)),v=Kr(t,e),v!=null&&u.push(jf(t,v,C))),t.tag===3)return u;t=t.return}return[]}function Qm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kp(t,e,l,u,v){for(var C=e._reactName,V=[];l!==null&&l!==u;){var k=l,rt=k.alternate,vt=k.stateNode;if(k=k.tag,rt!==null&&rt===u)break;k!==5&&k!==26&&k!==27||vt===null||(rt=vt,v?(vt=Kr(l,C),vt!=null&&V.unshift(jf(l,vt,rt))):v||(vt=Kr(l,C),vt!=null&&V.push(jf(l,vt,rt)))),l=l.return}V.length!==0&&t.push({event:e,listeners:V})}var Km=/\r\n?/g,Im=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(Km,`
`).replace(Im,"")}function $p(t,e){return e=Wp(e),Wp(t)===e}function Xe(t,e,l,u,v,C){switch(l){case"children":typeof u=="string"?e==="body"||e==="textarea"&&u===""||cl(t,u):(typeof u=="number"||typeof u=="bigint")&&e!=="body"&&cl(t,""+u);break;case"className":Ha(t,"class",u);break;case"tabIndex":Ha(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ha(t,l,u);break;case"style":Rc(t,u,C);break;case"data":if(e!=="object"){Ha(t,"data",u);break}case"src":case"href":if(u===""&&(e!=="a"||l!=="href")){t.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Vs(""+u),t.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(l==="formAction"?(e!=="input"&&Xe(t,e,"name",v.name,v,null),Xe(t,e,"formEncType",v.formEncType,v,null),Xe(t,e,"formMethod",v.formMethod,v,null),Xe(t,e,"formTarget",v.formTarget,v,null)):(Xe(t,e,"encType",v.encType,v,null),Xe(t,e,"method",v.method,v,null),Xe(t,e,"target",v.target,v,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Vs(""+u),t.setAttribute(l,u);break;case"onClick":u!=null&&(t.onclick=oa);break;case"onScroll":u!=null&&ve("scroll",t);break;case"onScrollEnd":u!=null&&ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}l=Vs(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""+u):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":u===!0?t.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,u):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(l,u):t.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(l):t.setAttribute(l,u);break;case"popover":ve("beforetoggle",t),ve("toggle",t),Pr(t,"popover",u);break;case"xlinkActuate":ja(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ja(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ja(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ja(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ja(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ja(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ja(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ja(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ja(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Pr(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=mh.get(l)||l,Pr(t,l,u))}}function M0(t,e,l,u,v,C){switch(l){case"style":Rc(t,u,C);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"children":typeof u=="string"?cl(t,u):(typeof u=="number"||typeof u=="bigint")&&cl(t,""+u);break;case"onScroll":u!=null&&ve("scroll",t);break;case"onScrollEnd":u!=null&&ve("scrollend",t);break;case"onClick":u!=null&&(t.onclick=oa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),e=l.slice(2,v?l.length-7:void 0),C=t[On]||null,C=C!=null?C[l]:null,typeof C=="function"&&t.removeEventListener(e,C,v),typeof u=="function")){typeof C!="function"&&C!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(e,u,v);break t}l in t?t[l]=u:u===!0?t.setAttribute(l,""):Pr(t,l,u)}}}function ra(t,e,l){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",t),ve("load",t);var u=!1,v=!1,C;for(C in l)if(l.hasOwnProperty(C)){var V=l[C];if(V!=null)switch(C){case"src":u=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Xe(t,e,C,V,l,null)}}v&&Xe(t,e,"srcSet",l.srcSet,l,null),u&&Xe(t,e,"src",l.src,l,null);return;case"input":ve("invalid",t);var k=C=V=v=null,rt=null,vt=null;for(u in l)if(l.hasOwnProperty(u)){var _t=l[u];if(_t!=null)switch(u){case"name":v=_t;break;case"type":V=_t;break;case"checked":rt=_t;break;case"defaultChecked":vt=_t;break;case"value":C=_t;break;case"defaultValue":k=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,e));break;default:Xe(t,e,u,_t,l,null)}}Ec(t,C,k,rt,vt,V,v,!1);return;case"select":ve("invalid",t),u=V=C=null;for(v in l)if(l.hasOwnProperty(v)&&(k=l[v],k!=null))switch(v){case"value":C=k;break;case"defaultValue":V=k;break;case"multiple":u=k;default:Xe(t,e,v,k,l,null)}e=C,l=V,t.multiple=!!u,e!=null?Pl(t,!!u,e,!1):l!=null&&Pl(t,!!u,l,!0);return;case"textarea":ve("invalid",t),C=v=u=null;for(V in l)if(l.hasOwnProperty(V)&&(k=l[V],k!=null))switch(V){case"value":u=k;break;case"defaultValue":v=k;break;case"children":C=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:Xe(t,e,V,k,l,null)}_c(t,u,v,C);return;case"option":for(rt in l)if(l.hasOwnProperty(rt)&&(u=l[rt],u!=null))switch(rt){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Xe(t,e,rt,u,l,null)}return;case"dialog":ve("beforetoggle",t),ve("toggle",t),ve("cancel",t),ve("close",t);break;case"iframe":case"object":ve("load",t);break;case"video":case"audio":for(u=0;u<Hf.length;u++)ve(Hf[u],t);break;case"image":ve("error",t),ve("load",t);break;case"details":ve("toggle",t);break;case"embed":case"source":case"link":ve("error",t),ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(vt in l)if(l.hasOwnProperty(vt)&&(u=l[vt],u!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Xe(t,e,vt,u,l,null)}return;default:if(Qo(e)){for(_t in l)l.hasOwnProperty(_t)&&(u=l[_t],u!==void 0&&M0(t,e,_t,u,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(u=l[k],u!=null&&Xe(t,e,k,u,l,null))}function Zm(t,e,l,u){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,V=null,k=null,rt=null,vt=null,_t=null;for(Et in l){var zt=l[Et];if(l.hasOwnProperty(Et)&&zt!=null)switch(Et){case"checked":break;case"value":break;case"defaultValue":rt=zt;default:u.hasOwnProperty(Et)||Xe(t,e,Et,null,u,zt)}}for(var bt in u){var Et=u[bt];if(zt=l[bt],u.hasOwnProperty(bt)&&(Et!=null||zt!=null))switch(bt){case"type":C=Et;break;case"name":v=Et;break;case"checked":vt=Et;break;case"defaultChecked":_t=Et;break;case"value":V=Et;break;case"defaultValue":k=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(r(137,e));break;default:Et!==zt&&Xe(t,e,bt,Et,u,zt)}}qs(t,V,k,rt,vt,_t,C,v);return;case"select":Et=V=k=bt=null;for(C in l)if(rt=l[C],l.hasOwnProperty(C)&&rt!=null)switch(C){case"value":break;case"multiple":Et=rt;default:u.hasOwnProperty(C)||Xe(t,e,C,null,u,rt)}for(v in u)if(C=u[v],rt=l[v],u.hasOwnProperty(v)&&(C!=null||rt!=null))switch(v){case"value":bt=C;break;case"defaultValue":k=C;break;case"multiple":V=C;default:C!==rt&&Xe(t,e,v,C,u,rt)}e=k,l=V,u=Et,bt!=null?Pl(t,!!l,bt,!1):!!u!=!!l&&(e!=null?Pl(t,!!l,e,!0):Pl(t,!!l,l?[]:"",!1));return;case"textarea":Et=bt=null;for(k in l)if(v=l[k],l.hasOwnProperty(k)&&v!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Xe(t,e,k,null,u,v)}for(V in u)if(v=u[V],C=l[V],u.hasOwnProperty(V)&&(v!=null||C!=null))switch(V){case"value":bt=v;break;case"defaultValue":Et=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==C&&Xe(t,e,V,v,u,C)}Ac(t,bt,Et);return;case"option":for(var Kt in l)if(bt=l[Kt],l.hasOwnProperty(Kt)&&bt!=null&&!u.hasOwnProperty(Kt))switch(Kt){case"selected":t.selected=!1;break;default:Xe(t,e,Kt,null,u,bt)}for(rt in u)if(bt=u[rt],Et=l[rt],u.hasOwnProperty(rt)&&bt!==Et&&(bt!=null||Et!=null))switch(rt){case"selected":t.selected=bt&&typeof bt!="function"&&typeof bt!="symbol";break;default:Xe(t,e,rt,bt,u,Et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var te in l)bt=l[te],l.hasOwnProperty(te)&&bt!=null&&!u.hasOwnProperty(te)&&Xe(t,e,te,null,u,bt);for(vt in u)if(bt=u[vt],Et=l[vt],u.hasOwnProperty(vt)&&bt!==Et&&(bt!=null||Et!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,e));break;default:Xe(t,e,vt,bt,u,Et)}return;default:if(Qo(e)){for(var Pe in l)bt=l[Pe],l.hasOwnProperty(Pe)&&bt!==void 0&&!u.hasOwnProperty(Pe)&&M0(t,e,Pe,void 0,u,bt);for(_t in u)bt=u[_t],Et=l[_t],!u.hasOwnProperty(_t)||bt===Et||bt===void 0&&Et===void 0||M0(t,e,_t,bt,u,Et);return}}for(var dt in l)bt=l[dt],l.hasOwnProperty(dt)&&bt!=null&&!u.hasOwnProperty(dt)&&Xe(t,e,dt,null,u,bt);for(zt in u)bt=u[zt],Et=l[zt],!u.hasOwnProperty(zt)||bt===Et||bt==null&&Et==null||Xe(t,e,zt,bt,u,Et)}function t1(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jm(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var v=l[u],C=v.transferSize,V=v.initiatorType,k=v.duration;if(C&&k&&t1(V)){for(V=0,k=v.responseEnd,u+=1;u<l.length;u++){var rt=l[u],vt=rt.startTime;if(vt>k)break;var _t=rt.transferSize,zt=rt.initiatorType;_t&&t1(zt)&&(rt=rt.responseEnd,V+=_t*(rt<k?1:(k-vt)/(rt-vt)))}if(--u,e+=8*(C+V)/(v.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var x0=null,N0=null;function Td(t){return t.nodeType===9?t:t.ownerDocument}function e1(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function D0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z0=null;function Fm(){var t=window.event;return t&&t.type==="popstate"?t===z0?!1:(z0=t,!0):(z0=null,!1)}var a1=typeof setTimeout=="function"?setTimeout:void 0,km=typeof clearTimeout=="function"?clearTimeout:void 0,i1=typeof Promise=="function"?Promise:void 0,Wm=typeof queueMicrotask=="function"?queueMicrotask:typeof i1<"u"?function(t){return i1.resolve(null).then(t).catch($m)}:a1;function $m(t){setTimeout(function(){throw t})}function Cs(t){return t==="head"}function l1(t,e){var l=e,u=0;do{var v=l.nextSibling;if(t.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(u===0){t.removeChild(v),ic(e);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Lf(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Lf(l);for(var C=l.firstChild;C;){var V=C.nextSibling,k=C.nodeName;C[Vl]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=V}}else l==="body"&&Lf(t.ownerDocument.body);l=v}while(l);ic(e)}function r1(t,e){var l=t;t=0;do{var u=l.nextSibling;if(l.nodeType===1?e?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(e?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=u}while(l)}function U0(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var l=e;switch(e=e.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":U0(l),tn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function tv(t,e,l,u){for(;t.nodeType===1;){var v=l;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Vl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(C=t.getAttribute("rel"),C==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(C!==v.rel||t.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||t.getAttribute("title")!==(v.title==null?null:v.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(C=t.getAttribute("src"),(C!==(v.src==null?null:v.src)||t.getAttribute("type")!==(v.type==null?null:v.type)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&t.getAttribute("name")===C)return t}else return t;if(t=Ni(t.nextSibling),t===null)break}return null}function ev(t,e,l){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Ni(t.nextSibling),t===null))return null;return t}function s1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ni(t.nextSibling),t===null))return null;return t}function G0(t){return t.data==="$?"||t.data==="$~"}function B0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nv(t,e){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||l.readyState!=="loading")e();else{var u=function(){e(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var H0=null;function o1(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(e===0)return Ni(t.nextSibling);e--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||e++}t=t.nextSibling}return null}function u1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(e===0)return t;e--}else l!=="/$"&&l!=="/&"||e++}t=t.previousSibling}return null}function c1(t,e,l){switch(e=Td(l),t){case"html":if(t=e.documentElement,!t)throw Error(r(452));return t;case"head":if(t=e.head,!t)throw Error(r(453));return t;case"body":if(t=e.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Lf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);tn(t)}var Di=new Map,f1=new Set;function Ad(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zr=Y.d;Y.d={f:av,r:iv,D:lv,C:rv,L:sv,m:ov,X:cv,S:uv,M:fv};function av(){var t=zr.f(),e=ys();return t||e}function iv(t){var e=ul(t);e!==null&&e.tag===5&&e.type==="form"?ud(e):zr.r(t)}var ec=typeof document>"u"?null:document;function h1(t,e,l){var u=ec;if(u&&typeof e=="string"&&e){var v=Ea(e);v='link[rel="'+t+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),f1.has(v)||(f1.add(v),t={rel:t,crossOrigin:l,href:e},u.querySelector(v)===null&&(e=u.createElement("link"),ra(e,"link",t),Rn(e),u.head.appendChild(e)))}}function lv(t){zr.D(t),h1("dns-prefetch",t,null)}function rv(t,e){zr.C(t,e),h1("preconnect",t,e)}function sv(t,e,l){zr.L(t,e,l);var u=ec;if(u&&t&&e){var v='link[rel="preload"][as="'+Ea(e)+'"]';e==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Ea(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Ea(l.imageSizes)+'"]')):v+='[href="'+Ea(t)+'"]';var C=v;switch(e){case"style":C=nc(t);break;case"script":C=ac(t)}Di.has(C)||(t=O({rel:"preload",href:e==="image"&&l&&l.imageSrcSet?void 0:t,as:e},l),Di.set(C,t),u.querySelector(v)!==null||e==="style"&&u.querySelector(wf(C))||e==="script"&&u.querySelector(Yf(C))||(e=u.createElement("link"),ra(e,"link",t),Rn(e),u.head.appendChild(e)))}}function ov(t,e){zr.m(t,e);var l=ec;if(l&&t){var u=e&&typeof e.as=="string"?e.as:"script",v='link[rel="modulepreload"][as="'+Ea(u)+'"][href="'+Ea(t)+'"]',C=v;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ac(t)}if(!Di.has(C)&&(t=O({rel:"modulepreload",href:t},e),Di.set(C,t),l.querySelector(v)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yf(C)))return}u=l.createElement("link"),ra(u,"link",t),Rn(u),l.head.appendChild(u)}}}function uv(t,e,l){zr.S(t,e,l);var u=ec;if(u&&t){var v=Xl(u).hoistableStyles,C=nc(t);e=e||"default";var V=v.get(C);if(!V){var k={loading:0,preload:null};if(V=u.querySelector(wf(C)))k.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":e},l),(l=Di.get(C))&&j0(t,l);var rt=V=u.createElement("link");Rn(rt),ra(rt,"link",t),rt._p=new Promise(function(vt,_t){rt.onload=vt,rt.onerror=_t}),rt.addEventListener("load",function(){k.loading|=1}),rt.addEventListener("error",function(){k.loading|=2}),k.loading|=4,_d(V,e,u)}V={type:"stylesheet",instance:V,count:1,state:k},v.set(C,V)}}}function cv(t,e){zr.X(t,e);var l=ec;if(l&&t){var u=Xl(l).hoistableScripts,v=ac(t),C=u.get(v);C||(C=l.querySelector(Yf(v)),C||(t=O({src:t,async:!0},e),(e=Di.get(v))&&L0(t,e),C=l.createElement("script"),Rn(C),ra(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function fv(t,e){zr.M(t,e);var l=ec;if(l&&t){var u=Xl(l).hoistableScripts,v=ac(t),C=u.get(v);C||(C=l.querySelector(Yf(v)),C||(t=O({src:t,async:!0,type:"module"},e),(e=Di.get(v))&&L0(t,e),C=l.createElement("script"),Rn(C),ra(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function d1(t,e,l,u){var v=(v=$.current)?Ad(v):null;if(!v)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(e=nc(l.href),l=Xl(v).hoistableStyles,u=l.get(e),u||(u={type:"style",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=nc(l.href);var C=Xl(v).hoistableStyles,V=C.get(t);if(V||(v=v.ownerDocument||v,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(t,V),(C=v.querySelector(wf(t)))&&!C._p&&(V.instance=C,V.state.loading=5),Di.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Di.set(t,l),C||hv(v,t,l,V.state))),e&&u===null)throw Error(r(528,""));return V}if(e&&u!==null)throw Error(r(529,""));return null;case"script":return e=l.async,l=l.src,typeof l=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ac(l),l=Xl(v).hoistableScripts,u=l.get(e),u||(u={type:"script",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function nc(t){return'href="'+Ea(t)+'"'}function wf(t){return'link[rel="stylesheet"]['+t+"]"}function p1(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function hv(t,e,l,u){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?u.loading=1:(e=t.createElement("link"),u.preload=e,e.addEventListener("load",function(){return u.loading|=1}),e.addEventListener("error",function(){return u.loading|=2}),ra(e,"link",l),Rn(e),t.head.appendChild(e))}function ac(t){return'[src="'+Ea(t)+'"]'}function Yf(t){return"script[async]"+t}function g1(t,e,l){if(e.count++,e.instance===null)switch(e.type){case"style":var u=t.querySelector('style[data-href~="'+Ea(l.href)+'"]');if(u)return e.instance=u,Rn(u),u;var v=O({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Rn(u),ra(u,"style",v),_d(u,l.precedence,t),e.instance=u;case"stylesheet":v=nc(l.href);var C=t.querySelector(wf(v));if(C)return e.state.loading|=4,e.instance=C,Rn(C),C;u=p1(l),(v=Di.get(v))&&j0(u,v),C=(t.ownerDocument||t).createElement("link"),Rn(C);var V=C;return V._p=new Promise(function(k,rt){V.onload=k,V.onerror=rt}),ra(C,"link",u),e.state.loading|=4,_d(C,l.precedence,t),e.instance=C;case"script":return C=ac(l.src),(v=t.querySelector(Yf(C)))?(e.instance=v,Rn(v),v):(u=l,(v=Di.get(C))&&(u=O({},l),L0(u,v)),t=t.ownerDocument||t,v=t.createElement("script"),Rn(v),ra(v,"link",u),t.head.appendChild(v),e.instance=v);case"void":return null;default:throw Error(r(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(u=e.instance,e.state.loading|=4,_d(u,l.precedence,t));return e.instance}function _d(t,e,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=u.length?u[u.length-1]:null,C=v,V=0;V<u.length;V++){var k=u[V];if(k.dataset.precedence===e)C=k;else if(C!==v)break}C?C.parentNode.insertBefore(t,C.nextSibling):(e=l.nodeType===9?l.head:l,e.insertBefore(t,e.firstChild))}function j0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function L0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Od=null;function m1(t,e,l){if(Od===null){var u=new Map,v=Od=new Map;v.set(l,u)}else v=Od,u=v.get(l),u||(u=new Map,v.set(l,u));if(u.has(t))return u;for(u.set(t,null),l=l.getElementsByTagName(t),v=0;v<l.length;v++){var C=l[v];if(!(C[Vl]||C[Cn]||t==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var V=C.getAttribute(e)||"";V=t+V;var k=u.get(V);k?k.push(C):u.set(V,[C])}}return u}function v1(t,e,l){t=t.ownerDocument||t,t.head.insertBefore(l,e==="title"?t.querySelector("head > title"):null)}function dv(t,e,l){if(l===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function y1(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pv(t,e,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=nc(u.href),C=e.querySelector(wf(v));if(C){e=C._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Rd.bind(t),e.then(t,t)),l.state.loading|=4,l.instance=C,Rn(C);return}C=e.ownerDocument||e,u=p1(u),(v=Di.get(v))&&j0(u,v),C=C.createElement("link"),Rn(C);var V=C;V._p=new Promise(function(k,rt){V.onload=k,V.onerror=rt}),ra(C,"link",u),l.instance=C}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,e),(e=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Rd.bind(t),e.addEventListener("load",l),e.addEventListener("error",l))}}var w0=0;function gv(t,e){return t.stylesheets&&t.count===0&&xd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var u=setTimeout(function(){if(t.stylesheets&&xd(t,t.stylesheets),t.unsuspend){var C=t.unsuspend;t.unsuspend=null,C()}},6e4+e);0<t.imgBytes&&w0===0&&(w0=62500*Jm());var v=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&xd(t,t.stylesheets),t.unsuspend)){var C=t.unsuspend;t.unsuspend=null,C()}},(t.imgBytes>w0?50:800)+e);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(v)}}:null}function Rd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Md=null;function xd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Md=new Map,e.forEach(mv,t),Md=null,Rd.call(t))}function mv(t,e){if(!(e.state.loading&4)){var l=Md.get(t);if(l)var u=l.get(null);else{l=new Map,Md.set(t,l);for(var v=t.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var V=v[C];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(l.set(V.dataset.precedence,V),u=V)}u&&l.set(null,u)}v=e.instance,V=v.getAttribute("data-precedence"),C=l.get(V)||u,C===u&&l.set(null,v),l.set(V,v),this.count++,u=Rd.bind(this),v.addEventListener("load",u),v.addEventListener("error",u),C?C.parentNode.insertBefore(v,C.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(v,t.firstChild)),e.state.loading|=4}}var qf={$$typeof:z,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function vv(t,e,l,u,v,C,V,k,rt){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=u,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function S1(t,e,l,u,v,C,V,k,rt,vt,_t,zt){return t=new vv(t,e,l,V,rt,vt,_t,zt,k),e=1,C===!0&&(e|=24),C=Qn(3,null,null,e),t.current=C,C.stateNode=t,e=bu(),e.refCount++,t.pooledCache=e,e.refCount++,C.memoizedState={element:u,isDehydrated:l,cache:e},sr(C),t}function b1(t){return t?(t=fi,t):fi}function C1(t,e,l,u,v,C){v=b1(v),u.context===null?u.context=v:u.pendingContext=v,u=Tl(e),u.payload={element:l},C=C===void 0?null:C,C!==null&&(u.callback=C),l=Al(t,u,e),l!==null&&(Re(l,t,e),go(l,t,e))}function E1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<e?l:e}}function Y0(t,e){E1(t,e),(t=t.alternate)&&E1(t,e)}function T1(t){if(t.tag===13||t.tag===31){var e=Aa(t,67108864);e!==null&&Re(e,t,67108864),Y0(t,67108864)}}function A1(t){if(t.tag===13||t.tag===31){var e=Jn();e=Ls(e);var l=Aa(t,e);l!==null&&Re(l,t,e),Y0(t,e)}}var Nd=!0;function yv(t,e,l,u){var v=x.T;x.T=null;var C=Y.p;try{Y.p=2,q0(t,e,l,u)}finally{Y.p=C,x.T=v}}function Sv(t,e,l,u){var v=x.T;x.T=null;var C=Y.p;try{Y.p=8,q0(t,e,l,u)}finally{Y.p=C,x.T=v}}function q0(t,e,l,u){if(Nd){var v=V0(u);if(v===null)R0(t,e,u,Dd,l),O1(t,u);else if(Cv(v,t,e,l,u))u.stopPropagation();else if(O1(t,u),e&4&&-1<bv.indexOf(t)){for(;v!==null;){var C=ul(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var V=rl(C.pendingLanes);if(V!==0){var k=C;for(k.pendingLanes|=2,k.entangledLanes|=2;V;){var rt=1<<31-Ca(V);k.entanglements[1]|=rt,V&=~rt}Hl(C),(Wt&6)===0&&(Pa=dn()+500,Bf(0))}}break;case 31:case 13:k=Aa(C,2),k!==null&&Re(k,C,2),ys(),Y0(C,2)}if(C=V0(u),C===null&&R0(t,e,u,Dd,l),C===v)break;v=C}v!==null&&u.stopPropagation()}else R0(t,e,u,null,l)}}function V0(t){return t=Ko(t),X0(t)}var Dd=null;function X0(t){if(Dd=null,t=ol(t),t!==null){var e=h(t);if(e===null)t=null;else{var l=e.tag;if(l===13){if(t=c(e),t!==null)return t;t=null}else if(l===31){if(t=g(e),t!==null)return t;t=null}else if(l===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Dd=t,null}function _1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case ll:return 2;case ba:return 8;case ft:case Dt:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var P0=!1,Es=null,Ts=null,As=null,Vf=new Map,Xf=new Map,_s=[],bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O1(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":Vf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Pf(t,e,l,u,v,C){return t===null||t.nativeEvent!==C?(t={blockedOn:e,domEventName:l,eventSystemFlags:u,nativeEvent:C,targetContainers:[v]},e!==null&&(e=ul(e),e!==null&&T1(e)),t):(t.eventSystemFlags|=u,e=t.targetContainers,v!==null&&e.indexOf(v)===-1&&e.push(v),t)}function Cv(t,e,l,u,v){switch(e){case"focusin":return Es=Pf(Es,t,e,l,u,v),!0;case"dragenter":return Ts=Pf(Ts,t,e,l,u,v),!0;case"mouseover":return As=Pf(As,t,e,l,u,v),!0;case"pointerover":var C=v.pointerId;return Vf.set(C,Pf(Vf.get(C)||null,t,e,l,u,v)),!0;case"gotpointercapture":return C=v.pointerId,Xf.set(C,Pf(Xf.get(C)||null,t,e,l,u,v)),!0}return!1}function R1(t){var e=ol(t.target);if(e!==null){var l=h(e);if(l!==null){if(e=l.tag,e===13){if(e=c(l),e!==null){t.blockedOn=e,Gi(t.priority,function(){A1(l)});return}}else if(e===31){if(e=g(l),e!==null){t.blockedOn=e,Gi(t.priority,function(){A1(l)});return}}else if(e===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var l=V0(t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Qr=u,l.target.dispatchEvent(u),Qr=null}else return e=ul(l),e!==null&&T1(e),t.blockedOn=l,!1;e.shift()}return!0}function M1(t,e,l){zd(t)&&l.delete(e)}function Ev(){P0=!1,Es!==null&&zd(Es)&&(Es=null),Ts!==null&&zd(Ts)&&(Ts=null),As!==null&&zd(As)&&(As=null),Vf.forEach(M1),Xf.forEach(M1)}function Ud(t,e){t.blockedOn===e&&(t.blockedOn=null,P0||(P0=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Ev)))}var Gd=null;function x1(t){Gd!==t&&(Gd=t,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Gd===t&&(Gd=null);for(var e=0;e<t.length;e+=3){var l=t[e],u=t[e+1],v=t[e+2];if(typeof u!="function"){if(X0(u||l)===null)continue;break}var C=ul(l);C!==null&&(t.splice(e,3),e-=3,Lu(C,{pending:!0,data:v,method:l.method,action:u},u,v))}}))}function ic(t){function e(rt){return Ud(rt,t)}Es!==null&&Ud(Es,t),Ts!==null&&Ud(Ts,t),As!==null&&Ud(As,t),Vf.forEach(e),Xf.forEach(e);for(var l=0;l<_s.length;l++){var u=_s[l];u.blockedOn===t&&(u.blockedOn=null)}for(;0<_s.length&&(l=_s[0],l.blockedOn===null);)R1(l),l.blockedOn===null&&_s.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var v=l[u],C=l[u+1],V=v[On]||null;if(typeof C=="function")V||x1(l);else if(V){var k=null;if(C&&C.hasAttribute("formAction")){if(v=C,V=C[On]||null)k=V.formAction;else if(X0(v)!==null)continue}else k=V.action;typeof k=="function"?l[u+1]=k:(l.splice(u,3),u-=3),x1(l)}}}function N1(){function t(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(V){return v=V})},focusReset:"manual",scroll:"manual"})}function e(){v!==null&&(v(),v=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,v=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),v!==null&&(v(),v=null)}}}function Q0(t){this._internalRoot=t}Bd.prototype.render=Q0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(r(409));var l=e.current,u=Jn();C1(l,u,t,e,null,null)},Bd.prototype.unmount=Q0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;C1(t.current,2,null,t,null,null),ys(),e[ri]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ui();t={blockedOn:null,target:t,priority:e};for(var l=0;l<_s.length&&e!==0&&e<_s[l].priority;l++);_s.splice(l,0,t),l===0&&R1(t)}};var D1=n.version;if(D1!=="19.2.0")throw Error(r(527,D1,"19.2.0"));Y.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=b(e),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var Tv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{rn=Hd.inject(Tv),bn=Hd}catch{}}return Kf.createRoot=function(t,e){if(!o(t))throw Error(r(299));var l=!1,u="",v=Eo,C=To,V=Yu;return e!=null&&(e.unstable_strictMode===!0&&(l=!0),e.identifierPrefix!==void 0&&(u=e.identifierPrefix),e.onUncaughtError!==void 0&&(v=e.onUncaughtError),e.onCaughtError!==void 0&&(C=e.onCaughtError),e.onRecoverableError!==void 0&&(V=e.onRecoverableError)),e=S1(t,1,!1,null,null,l,u,null,v,C,V,N1),t[ri]=e.current,O0(t),new Q0(e)},Kf.hydrateRoot=function(t,e,l){if(!o(t))throw Error(r(299));var u=!1,v="",C=Eo,V=To,k=Yu,rt=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(V=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.formState!==void 0&&(rt=l.formState)),e=S1(t,1,!0,e,l??null,u,v,rt,C,V,k,N1),e.context=b1(null),l=e.current,u=Jn(),u=Ls(u),v=Tl(u),v.callback=null,Al(l,v,u),l=u,e.current.lanes=l,sl(e,l),Hl(e),t[ri]=e.current,O0(t),new Bd(e)},Kf.version="19.2.0",Kf}var q1;function Gv(){if(q1)return Z0.exports;q1=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(n){console.error(n)}}return d(),Z0.exports=Uv(),Z0.exports}var Bv=Gv();const Hv=$d(Bv);qg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(d){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(d[r]=s[r])}return d},lh.apply(this,arguments)}var Ns;(function(d){d.Pop="POP",d.Push="PUSH",d.Replace="REPLACE"})(Ns||(Ns={}));const V1="popstate";function jv(d){d===void 0&&(d={});function n(r,o){let{pathname:h,search:c,hash:g}=r.location;return yp("",{pathname:h,search:c,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(r,o){return typeof o=="string"?o:Xg(o)}return wv(n,s,null,d)}function Xn(d,n){if(d===!1||d===null||typeof d>"u")throw new Error(n)}function Vg(d,n){if(!d){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Lv(){return Math.random().toString(36).substr(2,8)}function X1(d,n){return{usr:d.state,key:d.key,idx:n}}function yp(d,n,s,r){return s===void 0&&(s=null),lh({pathname:typeof d=="string"?d:d.pathname,search:"",hash:""},typeof n=="string"?pc(n):n,{state:s,key:n&&n.key||r||Lv()})}function Xg(d){let{pathname:n="/",search:s="",hash:r=""}=d;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function pc(d){let n={};if(d){let s=d.indexOf("#");s>=0&&(n.hash=d.substr(s),d=d.substr(0,s));let r=d.indexOf("?");r>=0&&(n.search=d.substr(r),d=d.substr(0,r)),d&&(n.pathname=d)}return n}function wv(d,n,s,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:h=!1}=r,c=o.history,g=Ns.Pop,p=null,b=R();b==null&&(b=0,c.replaceState(lh({},c.state,{idx:b}),""));function R(){return(c.state||{idx:null}).idx}function O(){g=Ns.Pop;let w=R(),j=w==null?null:w-b;b=w,p&&p({action:g,location:G.location,delta:j})}function E(w,j){g=Ns.Push;let U=yp(G.location,w,j);b=R()+1;let z=X1(U,b),L=G.createHref(U);try{c.pushState(z,"",L)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(L)}h&&p&&p({action:g,location:G.location,delta:1})}function D(w,j){g=Ns.Replace;let U=yp(G.location,w,j);b=R();let z=X1(U,b),L=G.createHref(U);c.replaceState(z,"",L),h&&p&&p({action:g,location:G.location,delta:0})}function S(w){let j=o.location.origin!=="null"?o.location.origin:o.location.href,U=typeof w=="string"?w:Xg(w);return U=U.replace(/ $/,"%20"),Xn(j,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,j)}let G={get action(){return g},get location(){return d(o,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(V1,O),p=w,()=>{o.removeEventListener(V1,O),p=null}},createHref(w){return n(o,w)},createURL:S,encodeLocation(w){let j=S(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:E,replace:D,go(w){return c.go(w)}};return G}var P1;(function(d){d.data="data",d.deferred="deferred",d.redirect="redirect",d.error="error"})(P1||(P1={}));function Yv(d,n,s){return s===void 0&&(s="/"),qv(d,n,s)}function qv(d,n,s,r){let o=typeof n=="string"?pc(n):n,h=Kg(o.pathname||"/",s);if(h==null)return null;let c=Pg(d);Vv(c);let g=null;for(let p=0;g==null&&p<c.length;++p){let b=t2(h);g=kv(c[p],b)}return g}function Pg(d,n,s,r){n===void 0&&(n=[]),s===void 0&&(s=[]),r===void 0&&(r="");let o=(h,c,g)=>{let p={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:c,route:h};p.relativePath.startsWith("/")&&(Xn(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let b=Do([r,p.relativePath]),R=s.concat(p);h.children&&h.children.length>0&&(Xn(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),Pg(h.children,n,R,b)),!(h.path==null&&!h.index)&&n.push({path:b,score:Jv(b,h.index),routesMeta:R})};return d.forEach((h,c)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))o(h,c);else for(let p of Qg(h.path))o(h,c,p)}),n}function Qg(d){let n=d.split("/");if(n.length===0)return[];let[s,...r]=n,o=s.endsWith("?"),h=s.replace(/\?$/,"");if(r.length===0)return o?[h,""]:[h];let c=Qg(r.join("/")),g=[];return g.push(...c.map(p=>p===""?h:[h,p].join("/"))),o&&g.push(...c),g.map(p=>d.startsWith("/")&&p===""?"/":p)}function Vv(d){d.sort((n,s)=>n.score!==s.score?s.score-n.score:Fv(n.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const Xv=/^:[\w-]+$/,Pv=3,Qv=2,Kv=1,Iv=10,Zv=-2,Q1=d=>d==="*";function Jv(d,n){let s=d.split("/"),r=s.length;return s.some(Q1)&&(r+=Zv),n&&(r+=Qv),s.filter(o=>!Q1(o)).reduce((o,h)=>o+(Xv.test(h)?Pv:h===""?Kv:Iv),r)}function Fv(d,n){return d.length===n.length&&d.slice(0,-1).every((r,o)=>r===n[o])?d[d.length-1]-n[n.length-1]:0}function kv(d,n,s){let{routesMeta:r}=d,o={},h="/",c=[];for(let g=0;g<r.length;++g){let p=r[g],b=g===r.length-1,R=h==="/"?n:n.slice(h.length)||"/",O=Wv({path:p.relativePath,caseSensitive:p.caseSensitive,end:b},R),E=p.route;if(!O)return null;Object.assign(o,O.params),c.push({params:o,pathname:Do([h,O.pathname]),pathnameBase:r2(Do([h,O.pathnameBase])),route:E}),O.pathnameBase!=="/"&&(h=Do([h,O.pathnameBase]))}return c}function Wv(d,n){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[s,r]=$v(d.path,d.caseSensitive,d.end),o=n.match(s);if(!o)return null;let h=o[0],c=h.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((b,R,O)=>{let{paramName:E,isOptional:D}=R;if(E==="*"){let G=g[O]||"";c=h.slice(0,h.length-G.length).replace(/(.)\/+$/,"$1")}const S=g[O];return D&&!S?b[E]=void 0:b[E]=(S||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:c,pattern:d}}function $v(d,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Vg(d==="*"||!d.endsWith("*")||d.endsWith("/*"),'Route path "'+d+'" will be treated as if it were '+('"'+d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+d.replace(/\*$/,"/*")+'".'));let r=[],o="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,g,p)=>(r.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(r.push({paramName:"*"}),o+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":d!==""&&d!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),r]}function t2(d){try{return d.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Vg(!1,'The URL path "'+d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),d}}function Kg(d,n){if(n==="/")return d;if(!d.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,r=d.charAt(s);return r&&r!=="/"?null:d.slice(s)||"/"}function e2(d,n){n===void 0&&(n="/");let{pathname:s,search:r="",hash:o=""}=typeof d=="string"?pc(d):d;return{pathname:s?s.startsWith("/")?s:n2(s,n):n,search:s2(r),hash:o2(o)}}function n2(d,n){let s=n.replace(/\/+$/,"").split("/");return d.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function W0(d,n,s,r){return"Cannot include a '"+d+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a2(d){return d.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function i2(d,n){let s=a2(d);return n?s.map((r,o)=>o===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function l2(d,n,s,r){r===void 0&&(r=!1);let o;typeof d=="string"?o=pc(d):(o=lh({},d),Xn(!o.pathname||!o.pathname.includes("?"),W0("?","pathname","search",o)),Xn(!o.pathname||!o.pathname.includes("#"),W0("#","pathname","hash",o)),Xn(!o.search||!o.search.includes("#"),W0("#","search","hash",o)));let h=d===""||o.pathname==="",c=h?"/":o.pathname,g;if(c==null)g=s;else{let O=n.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),O-=1;o.pathname=E.join("/")}g=O>=0?n[O]:"/"}let p=e2(o,g),b=c&&c!=="/"&&c.endsWith("/"),R=(h||c===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(b||R)&&(p.pathname+="/"),p}const Do=d=>d.join("/").replace(/\/\/+/g,"/"),r2=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),s2=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,o2=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function u2(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}const Ig=["post","put","patch","delete"];new Set(Ig);const c2=["get",...Ig];new Set(c2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(d){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(d[r]=s[r])}return d},rh.apply(this,arguments)}const zp=At.createContext(null),f2=At.createContext(null),e0=At.createContext(null),n0=At.createContext(null),gc=At.createContext({outlet:null,matches:[],isDataRoute:!1}),Zg=At.createContext(null);function a0(){return At.useContext(n0)!=null}function Up(){return a0()||Xn(!1),At.useContext(n0).location}function Jg(d){At.useContext(e0).static||At.useLayoutEffect(d)}function Gp(){let{isDataRoute:d}=At.useContext(gc);return d?A2():h2()}function h2(){a0()||Xn(!1);let d=At.useContext(zp),{basename:n,future:s,navigator:r}=At.useContext(e0),{matches:o}=At.useContext(gc),{pathname:h}=Up(),c=JSON.stringify(i2(o,s.v7_relativeSplatPath)),g=At.useRef(!1);return Jg(()=>{g.current=!0}),At.useCallback(function(b,R){if(R===void 0&&(R={}),!g.current)return;if(typeof b=="number"){r.go(b);return}let O=l2(b,JSON.parse(c),h,R.relative==="path");d==null&&n!=="/"&&(O.pathname=O.pathname==="/"?n:Do([n,O.pathname])),(R.replace?r.replace:r.push)(O,R.state,R)},[n,r,c,h,d])}function d2(d,n){return p2(d,n)}function p2(d,n,s,r){a0()||Xn(!1);let{navigator:o}=At.useContext(e0),{matches:h}=At.useContext(gc),c=h[h.length-1],g=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let b=Up(),R;if(n){var O;let w=typeof n=="string"?pc(n):n;p==="/"||(O=w.pathname)!=null&&O.startsWith(p)||Xn(!1),R=w}else R=b;let E=R.pathname||"/",D=E;if(p!=="/"){let w=p.replace(/^\//,"").split("/");D="/"+E.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=Yv(d,{pathname:D}),G=S2(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},g,w.params),pathname:Do([p,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?p:Do([p,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),h,s,r);return n&&G?At.createElement(n0.Provider,{value:{location:rh({pathname:"/",search:"",hash:"",state:null,key:"default"},R),navigationType:Ns.Pop}},G):G}function g2(){let d=T2(),n=u2(d)?d.status+" "+d.statusText:d instanceof Error?d.message:JSON.stringify(d),s=d instanceof Error?d.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return At.createElement(At.Fragment,null,At.createElement("h2",null,"Unexpected Application Error!"),At.createElement("h3",{style:{fontStyle:"italic"}},n),s?At.createElement("pre",{style:o},s):null,null)}const m2=At.createElement(g2,null);class v2 extends At.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?At.createElement(gc.Provider,{value:this.props.routeContext},At.createElement(Zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y2(d){let{routeContext:n,match:s,children:r}=d,o=At.useContext(zp);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),At.createElement(gc.Provider,{value:n},r)}function S2(d,n,s,r){var o;if(n===void 0&&(n=[]),s===void 0&&(s=null),r===void 0&&(r=null),d==null){var h;if(!s)return null;if(s.errors)d=s.matches;else if((h=r)!=null&&h.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)d=s.matches;else return null}let c=d,g=(o=s)==null?void 0:o.errors;if(g!=null){let R=c.findIndex(O=>O.route.id&&(g==null?void 0:g[O.route.id])!==void 0);R>=0||Xn(!1),c=c.slice(0,Math.min(c.length,R+1))}let p=!1,b=-1;if(s&&r&&r.v7_partialHydration)for(let R=0;R<c.length;R++){let O=c[R];if((O.route.HydrateFallback||O.route.hydrateFallbackElement)&&(b=R),O.route.id){let{loaderData:E,errors:D}=s,S=O.route.loader&&E[O.route.id]===void 0&&(!D||D[O.route.id]===void 0);if(O.route.lazy||S){p=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((R,O,E)=>{let D,S=!1,G=null,w=null;s&&(D=g&&O.route.id?g[O.route.id]:void 0,G=O.route.errorElement||m2,p&&(b<0&&E===0?(_2("route-fallback"),S=!0,w=null):b===E&&(S=!0,w=O.route.hydrateFallbackElement||null)));let j=n.concat(c.slice(0,E+1)),U=()=>{let z;return D?z=G:S?z=w:O.route.Component?z=At.createElement(O.route.Component,null):O.route.element?z=O.route.element:z=R,At.createElement(y2,{match:O,routeContext:{outlet:R,matches:j,isDataRoute:s!=null},children:z})};return s&&(O.route.ErrorBoundary||O.route.errorElement||E===0)?At.createElement(v2,{location:s.location,revalidation:s.revalidation,component:G,error:D,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}var Fg=(function(d){return d.UseBlocker="useBlocker",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d})(Fg||{}),kg=(function(d){return d.UseBlocker="useBlocker",d.UseLoaderData="useLoaderData",d.UseActionData="useActionData",d.UseRouteError="useRouteError",d.UseNavigation="useNavigation",d.UseRouteLoaderData="useRouteLoaderData",d.UseMatches="useMatches",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d.UseRouteId="useRouteId",d})(kg||{});function b2(d){let n=At.useContext(zp);return n||Xn(!1),n}function C2(d){let n=At.useContext(f2);return n||Xn(!1),n}function E2(d){let n=At.useContext(gc);return n||Xn(!1),n}function Wg(d){let n=E2(),s=n.matches[n.matches.length-1];return s.route.id||Xn(!1),s.route.id}function T2(){var d;let n=At.useContext(Zg),s=C2(),r=Wg();return n!==void 0?n:(d=s.errors)==null?void 0:d[r]}function A2(){let{router:d}=b2(Fg.UseNavigateStable),n=Wg(kg.UseNavigateStable),s=At.useRef(!1);return Jg(()=>{s.current=!0}),At.useCallback(function(o,h){h===void 0&&(h={}),s.current&&(typeof o=="number"?d.navigate(o):d.navigate(o,rh({fromRouteId:n},h)))},[d,n])}const K1={};function _2(d,n,s){K1[d]||(K1[d]=!0)}function O2(d,n){d==null||d.v7_startTransition,d==null||d.v7_relativeSplatPath}function Zd(d){Xn(!1)}function R2(d){let{basename:n="/",children:s=null,location:r,navigationType:o=Ns.Pop,navigator:h,static:c=!1,future:g}=d;a0()&&Xn(!1);let p=n.replace(/^\/*/,"/"),b=At.useMemo(()=>({basename:p,navigator:h,static:c,future:rh({v7_relativeSplatPath:!1},g)}),[p,g,h,c]);typeof r=="string"&&(r=pc(r));let{pathname:R="/",search:O="",hash:E="",state:D=null,key:S="default"}=r,G=At.useMemo(()=>{let w=Kg(R,p);return w==null?null:{location:{pathname:w,search:O,hash:E,state:D,key:S},navigationType:o}},[p,R,O,E,D,S,o]);return G==null?null:At.createElement(e0.Provider,{value:b},At.createElement(n0.Provider,{children:s,value:G}))}function M2(d){let{children:n,location:s}=d;return d2(Sp(n),s)}new Promise(()=>{});function Sp(d,n){n===void 0&&(n=[]);let s=[];return At.Children.forEach(d,(r,o)=>{if(!At.isValidElement(r))return;let h=[...n,o];if(r.type===At.Fragment){s.push.apply(s,Sp(r.props.children,h));return}r.type!==Zd&&Xn(!1),!r.props.index||!r.props.children||Xn(!1);let c={id:r.props.id||h.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Sp(r.props.children,h)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bp(d){return d===void 0&&(d=""),new URLSearchParams(typeof d=="string"||Array.isArray(d)||d instanceof URLSearchParams?d:Object.keys(d).reduce((n,s)=>{let r=d[s];return n.concat(Array.isArray(r)?r.map(o=>[s,o]):[[s,r]])},[]))}function x2(d,n){let s=bp(d);return n&&n.forEach((r,o)=>{s.has(o)||n.getAll(o).forEach(h=>{s.append(o,h)})}),s}const N2="6";try{window.__reactRouterVersion=N2}catch{}const D2="startTransition",I1=xv[D2];function z2(d){let{basename:n,children:s,future:r,window:o}=d,h=At.useRef();h.current==null&&(h.current=jv({window:o,v5Compat:!0}));let c=h.current,[g,p]=At.useState({action:c.action,location:c.location}),{v7_startTransition:b}=r||{},R=At.useCallback(O=>{b&&I1?I1(()=>p(O)):p(O)},[p,b]);return At.useLayoutEffect(()=>c.listen(R),[c,R]),At.useEffect(()=>O2(r),[r]),At.createElement(R2,{basename:n,children:s,location:g.location,navigationType:g.action,navigator:c,future:r})}var Z1;(function(d){d.UseScrollRestoration="useScrollRestoration",d.UseSubmit="useSubmit",d.UseSubmitFetcher="useSubmitFetcher",d.UseFetcher="useFetcher",d.useViewTransitionState="useViewTransitionState"})(Z1||(Z1={}));var J1;(function(d){d.UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration"})(J1||(J1={}));function $g(d){let n=At.useRef(bp(d)),s=At.useRef(!1),r=Up(),o=At.useMemo(()=>x2(r.search,s.current?null:n.current),[r.search]),h=Gp(),c=At.useCallback((g,p)=>{const b=bp(typeof g=="function"?g(o):g);s.current=!0,h("?"+b,p)},[h,o]);return[o,c]}function U2(){const d=Gp();return ot.jsxs("div",{className:"landing-page",children:[ot.jsxs("div",{className:"background-decorations",children:[ot.jsx("div",{className:"bg-blob bg-blob-1"}),ot.jsx("div",{className:"bg-blob bg-blob-2"}),ot.jsx("div",{className:"bg-gradient-overlay"})]}),ot.jsx("main",{className:"landing-main",children:ot.jsxs("div",{className:"glass-surface landing-container",children:[ot.jsxs("div",{className:"landing-content",children:[ot.jsx("span",{className:"glass-pill landing-badge",children:ot.jsx("span",{children:"FEATHER"})}),ot.jsxs("div",{className:"landing-header",children:[ot.jsx("h1",{className:"landing-title",children:"Teach visually. Collaborate instantly."}),ot.jsx("p",{className:"landing-description",children:"Feather streams pencil-perfect strokes between teachers and students in real time. Instant sync, buttery smooth annotation tools, and delightful classroom-ready controls built for iPad and stylus workflows."})]}),ot.jsxs("dl",{className:"features",children:[ot.jsxs("div",{className:"feature-card",children:[ot.jsx("dt",{className:"feature-title",children:"Palm rejection"}),ot.jsx("dd",{className:"feature-subtitle",children:"Silky palm drawing"})]}),ot.jsxs("div",{className:"feature-card",children:[ot.jsx("dt",{className:"feature-title",children:"Frameless logos"}),ot.jsx("dd",{className:"feature-subtitle",children:"Delightful annotations"})]}),ot.jsxs("div",{className:"feature-card",children:[ot.jsx("dt",{className:"feature-title",children:"Realtime sync"}),ot.jsx("dd",{className:"feature-subtitle",children:"Sub-second latency"})]})]})]}),ot.jsxs("div",{className:"workspace-section",children:[ot.jsx("p",{className:"workspace-label",children:"PICK YOUR WORKSPACE"}),ot.jsxs("div",{className:"workspace-cards",children:[ot.jsxs("a",{onClick:()=>d("/teacher?room=demo"),className:"glass-button teacher-card",children:[ot.jsxs("div",{children:[ot.jsx("p",{className:"workspace-title",children:"Teacher dashboard"}),ot.jsx("p",{className:"workspace-description",children:"Monitor your students, sync views, and annotate the board. Assign templates/images, and manage the class."})]}),ot.jsx("span",{className:"workspace-emoji",children:"👩‍🏫"})]}),ot.jsxs("a",{onClick:()=>d("/student?room=demo"),className:"glass-button student-card",children:[ot.jsxs("div",{children:[ot.jsx("p",{className:"workspace-title",children:"Student workspace"}),ot.jsx("p",{className:"workspace-description",children:"Sketch on a public or draw alongside the class, with undo/redo, templates, and stylus-first controls."})]}),ot.jsx("span",{className:"workspace-emoji",children:"👩‍🎓"})]})]})]})]})})]})}const G2=Math.PI/180;function B2(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const No=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},qt={_global:No,version:"10.0.7",isBrowser:B2(),isUnminified:/param/.test((function(d){}).toString()),dblClickWindow:400,getAngle(d){return qt.angleDeg?d*G2:d},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return qt.DD.isDragging},isTransforming(){var d,n;return(n=(d=qt.Transformer)===null||d===void 0?void 0:d.isTransforming())!==null&&n!==void 0?n:!1},isDragReady(){return!!qt.DD.node},releaseCanvasOnDestroy:!0,document:No.document,_injectGlobal(d){typeof No.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),No.Konva=d}},hn=d=>{qt[d.prototype.getClassName()]=d};qt._injectGlobal(qt);const H2=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,F1=()=>{if(typeof document>"u")throw new Error(H2)};class ni{constructor(n=[1,0,0,1,0,0]){this.dirty=!1,this.m=n&&n.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ni(this.m)}copyInto(n){n.m[0]=this.m[0],n.m[1]=this.m[1],n.m[2]=this.m[2],n.m[3]=this.m[3],n.m[4]=this.m[4],n.m[5]=this.m[5]}point(n){const s=this.m;return{x:s[0]*n.x+s[2]*n.y+s[4],y:s[1]*n.x+s[3]*n.y+s[5]}}translate(n,s){return this.m[4]+=this.m[0]*n+this.m[2]*s,this.m[5]+=this.m[1]*n+this.m[3]*s,this}scale(n,s){return this.m[0]*=n,this.m[1]*=n,this.m[2]*=s,this.m[3]*=s,this}rotate(n){const s=Math.cos(n),r=Math.sin(n),o=this.m[0]*s+this.m[2]*r,h=this.m[1]*s+this.m[3]*r,c=this.m[0]*-r+this.m[2]*s,g=this.m[1]*-r+this.m[3]*s;return this.m[0]=o,this.m[1]=h,this.m[2]=c,this.m[3]=g,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(n,s){const r=this.m[0]+this.m[2]*s,o=this.m[1]+this.m[3]*s,h=this.m[2]+this.m[0]*n,c=this.m[3]+this.m[1]*n;return this.m[0]=r,this.m[1]=o,this.m[2]=h,this.m[3]=c,this}multiply(n){const s=this.m[0]*n.m[0]+this.m[2]*n.m[1],r=this.m[1]*n.m[0]+this.m[3]*n.m[1],o=this.m[0]*n.m[2]+this.m[2]*n.m[3],h=this.m[1]*n.m[2]+this.m[3]*n.m[3],c=this.m[0]*n.m[4]+this.m[2]*n.m[5]+this.m[4],g=this.m[1]*n.m[4]+this.m[3]*n.m[5]+this.m[5];return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=h,this.m[4]=c,this.m[5]=g,this}invert(){const n=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),s=this.m[3]*n,r=-this.m[1]*n,o=-this.m[2]*n,h=this.m[0]*n,c=n*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=n*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=h,this.m[4]=c,this.m[5]=g,this}getMatrix(){return this.m}decompose(){const n=this.m[0],s=this.m[1],r=this.m[2],o=this.m[3],h=this.m[4],c=this.m[5],g=n*o-s*r,p={x:h,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(n!=0||s!=0){const b=Math.sqrt(n*n+s*s);p.rotation=s>0?Math.acos(n/b):-Math.acos(n/b),p.scaleX=b,p.scaleY=g/b,p.skewX=(n*r+s*o)/g,p.skewY=0}else if(r!=0||o!=0){const b=Math.sqrt(r*r+o*o);p.rotation=Math.PI/2-(o>0?Math.acos(-r/b):-Math.acos(r/b)),p.scaleX=g/b,p.scaleY=b,p.skewX=0,p.skewY=(n*r+s*o)/g}return p.rotation=pt._getRotation(p.rotation),p}}const j2="[object Array]",L2="[object Number]",w2="[object String]",Y2="[object Boolean]",q2=Math.PI/180,V2=180/Math.PI,$0="#",X2="",P2="0",Q2="Konva warning: ",k1="Konva error: ",K2="rgb(",tp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},I2=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let jd=[];const Z2=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)},pt={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===j2},_isNumber(d){return Object.prototype.toString.call(d)===L2&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===w2},_isBoolean(d){return Object.prototype.toString.call(d)===Y2},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const n=d[0];return n==="#"||n==="."||n===n.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){jd.push(d),jd.length===1&&Z2(function(){const n=jd;jd=[],n.forEach(function(s){s()})})},createCanvasElement(){F1();const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return F1(),document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,n){const s=pt.createImageElement();s.onload=function(){n(s)},s.src=d},_rgbToHex(d,n,s){return((1<<24)+(d<<16)+(n<<8)+s).toString(16).slice(1)},_hexToRgb(d){d=d.replace($0,X2);const n=parseInt(d,16);return{r:n>>16&255,g:n>>8&255,b:n&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=P2+d;return $0+d},getRGB(d){let n;return d in tp?(n=tp[d],{r:n[0],g:n[1],b:n[2]}):d[0]===$0?this._hexToRgb(d.substring(1)):d.substr(0,4)===K2?(n=I2.exec(d.replace(/ /g,"")),{r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",pt._namedColorToRBA(d)||pt._hex3ColorToRGBA(d)||pt._hex4ColorToRGBA(d)||pt._hex6ColorToRGBA(d)||pt._hex8ColorToRGBA(d)||pt._rgbColorToRGBA(d)||pt._rgbaColorToRGBA(d)||pt._hslColorToRGBA(d)},_namedColorToRBA(d){const n=tp[d.toLowerCase()];return n?{r:n[0],g:n[1],b:n[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const n=d.split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const n=d.split(/ *, */).map((s,r)=>s.slice(-1)==="%"?r===3?parseInt(s)/100:parseInt(s)/100*255:Number(s));return{r:n[0],g:n[1],b:n[2],a:n[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[n,...s]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),r=Number(s[0])/360,o=Number(s[1])/100,h=Number(s[2])/100;let c,g,p;if(o===0)return p=h*255,{r:Math.round(p),g:Math.round(p),b:Math.round(p),a:1};h<.5?c=h*(1+o):c=h+o-h*o;const b=2*h-c,R=[0,0,0];for(let O=0;O<3;O++)g=r+1/3*-(O-1),g<0&&g++,g>1&&g--,6*g<1?p=b+(c-b)*6*g:2*g<1?p=c:3*g<2?p=b+(c-b)*(2/3-g)*6:p=b,R[O]=p*255;return{r:Math.round(R[0]),g:Math.round(R[1]),b:Math.round(R[2]),a:1}}},haveIntersection(d,n){return!(n.x>d.x+d.width||n.x+n.width<d.x||n.y>d.y+d.height||n.y+n.height<d.y)},cloneObject(d){const n={};for(const s in d)this._isPlainObject(d[s])?n[s]=this.cloneObject(d[s]):this._isArray(d[s])?n[s]=this.cloneArray(d[s]):n[s]=d[s];return n},cloneArray(d){return d.slice(0)},degToRad(d){return d*q2},radToDeg(d){return d*V2},_degToRad(d){return pt.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),pt.degToRad(d)},_radToDeg(d){return pt.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),pt.radToDeg(d)},_getRotation(d){return qt.angleDeg?pt.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(k1+d)},error(d){console.error(k1+d)},warn(d){qt.showWarnings&&console.warn(Q2+d)},each(d,n){for(const s in d)n(s,d[s])},_inRange(d,n,s){return n<=d&&d<s},_getProjectionToSegment(d,n,s,r,o,h){let c,g,p;const b=(d-s)*(d-s)+(n-r)*(n-r);if(b==0)c=d,g=n,p=(o-s)*(o-s)+(h-r)*(h-r);else{const R=((o-d)*(s-d)+(h-n)*(r-n))/b;R<0?(c=d,g=n,p=(d-o)*(d-o)+(n-h)*(n-h)):R>1?(c=s,g=r,p=(s-o)*(s-o)+(r-h)*(r-h)):(c=d+R*(s-d),g=n+R*(r-n),p=(c-o)*(c-o)+(g-h)*(g-h))}return[c,g,p]},_getProjectionToLine(d,n,s){const r=pt.cloneObject(d);let o=Number.MAX_VALUE;return n.forEach(function(h,c){if(!s&&c===n.length-1)return;const g=n[(c+1)%n.length],p=pt._getProjectionToSegment(h.x,h.y,g.x,g.y,d.x,d.y),b=p[0],R=p[1],O=p[2];O<o&&(r.x=b,r.y=R,o=O)}),r},_prepareArrayForTween(d,n,s){const r=[],o=[];if(d.length>n.length){const c=n;n=d,d=c}for(let c=0;c<d.length;c+=2)r.push({x:d[c],y:d[c+1]});for(let c=0;c<n.length;c+=2)o.push({x:n[c],y:n[c+1]});const h=[];return o.forEach(function(c){const g=pt._getProjectionToLine(c,r,s);h.push(g.x),h.push(g.y)}),h},_prepareToStringify(d){let n;d.visitedByCircularReferenceRemoval=!0;for(const s in d)if(d.hasOwnProperty(s)&&d[s]&&typeof d[s]=="object"){if(n=Object.getOwnPropertyDescriptor(d,s),d[s].visitedByCircularReferenceRemoval||pt._isElement(d[s]))if(n.configurable)delete d[s];else return null;else if(pt._prepareToStringify(d[s])===null)if(n.configurable)delete d[s];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,n){for(const s in n)d[s]=n[s];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){qt.releaseCanvasOnDestroy&&d.forEach(n=>{n.width=0,n.height=0})},drawRoundedRectPath(d,n,s,r){let o=n<0?n:0,h=s<0?s:0;n=Math.abs(n),s=Math.abs(s);let c=0,g=0,p=0,b=0;typeof r=="number"?c=g=p=b=Math.min(r,n/2,s/2):(c=Math.min(r[0]||0,n/2,s/2),g=Math.min(r[1]||0,n/2,s/2),b=Math.min(r[2]||0,n/2,s/2),p=Math.min(r[3]||0,n/2,s/2)),d.moveTo(o+c,h),d.lineTo(o+n-g,h),d.arc(o+n-g,h+g,g,Math.PI*3/2,0,!1),d.lineTo(o+n,h+s-b),d.arc(o+n-b,h+s-b,b,0,Math.PI/2,!1),d.lineTo(o+p,h+s),d.arc(o+p,h+s-p,p,Math.PI/2,Math.PI,!1),d.lineTo(o,h+c),d.arc(o+c,h+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(d,n,s,r,o){r=Math.abs(r);for(let h=0;h<s;h++){const c=n[(h-1+s)%s],g=n[h],p=n[(h+1)%s],b={x:g.x-c.x,y:g.y-c.y},R={x:p.x-g.x,y:p.y-g.y},O=Math.hypot(b.x,b.y),E=Math.hypot(R.x,R.y);let D;typeof o=="number"?D=o:D=h<o.length?o[h]:0,D=r*Math.cos(Math.PI/s)*Math.min(1,D/r*2);const G={x:b.x/O,y:b.y/O},w={x:R.x/E,y:R.y/E},j={x:g.x-G.x*D,y:g.y-G.y*D},U={x:g.x+w.x*D,y:g.y+w.y*D};h===0?d.moveTo(j.x,j.y):d.lineTo(j.x,j.y),d.arcTo(g.x,g.y,U.x,U.y,D)}}};function J2(d){const n=[],s=d.length,r=pt;for(let o=0;o<s;o++){let h=d[o];r._isNumber(h)?h=Math.round(h*1e3)/1e3:r._isString(h)||(h=h+""),n.push(h)}return n}const W1=",",F2="(",k2=")",W2="([",$2="])",ty=";",ey="()",ny="=",$1=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],ay=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],iy=100;let Ld=null;function tg(){if(Ld!==null)return Ld;try{const n=pt.createCanvasElement().getContext("2d");return n?!!n&&"filter"in n:(Ld=!1,!1)}catch{return Ld=!1,!1}}class i0{constructor(n){this.canvas=n,qt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(n){n.fillEnabled()&&this._fill(n)}_fill(n){}strokeShape(n){n.hasStroke()&&this._stroke(n)}_stroke(n){}fillStrokeShape(n){n.attrs.fillAfterStrokeEnabled?(this.strokeShape(n),this.fillShape(n)):(this.fillShape(n),this.strokeShape(n))}getTrace(n,s){let r=this.traceArr,o=r.length,h="",c,g,p,b;for(c=0;c<o;c++)g=r[c],p=g.method,p?(b=g.args,h+=p,n?h+=ey:pt._isArray(b[0])?h+=W2+b.join(W1)+$2:(s&&(b=b.map(R=>typeof R=="number"?Math.floor(R):R)),h+=F2+b.join(W1)+k2)):(h+=g.property,n||(h+=ny+g.val)),h+=ty;return h}clearTrace(){this.traceArr=[]}_trace(n){let s=this.traceArr,r;s.push(n),r=s.length,r>=iy&&s.shift()}reset(){const n=this.getCanvas().getPixelRatio();this.setTransform(1*n,0,0,1*n,0,0)}getCanvas(){return this.canvas}clear(n){const s=this.getCanvas();n?this.clearRect(n.x||0,n.y||0,n.width||0,n.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(n){const s=n.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(n){const s=n.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(n){const s=n.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}_applyMiterLimit(n){const s=n.attrs.miterLimit;s!=null&&this.setAttr("miterLimit",s)}setAttr(n,s){this._context[n]=s}arc(n,s,r,o,h,c){this._context.arc(n,s,r,o,h,c)}arcTo(n,s,r,o,h){this._context.arcTo(n,s,r,o,h)}beginPath(){this._context.beginPath()}bezierCurveTo(n,s,r,o,h,c){this._context.bezierCurveTo(n,s,r,o,h,c)}clearRect(n,s,r,o){this._context.clearRect(n,s,r,o)}clip(...n){this._context.clip.apply(this._context,n)}closePath(){this._context.closePath()}createImageData(n,s){const r=arguments;if(r.length===2)return this._context.createImageData(n,s);if(r.length===1)return this._context.createImageData(n)}createLinearGradient(n,s,r,o){return this._context.createLinearGradient(n,s,r,o)}createPattern(n,s){return this._context.createPattern(n,s)}createRadialGradient(n,s,r,o,h,c){return this._context.createRadialGradient(n,s,r,o,h,c)}drawImage(n,s,r,o,h,c,g,p,b){const R=arguments,O=this._context;R.length===3?O.drawImage(n,s,r):R.length===5?O.drawImage(n,s,r,o,h):R.length===9&&O.drawImage(n,s,r,o,h,c,g,p,b)}ellipse(n,s,r,o,h,c,g,p){this._context.ellipse(n,s,r,o,h,c,g,p)}isPointInPath(n,s,r,o){return r?this._context.isPointInPath(r,n,s,o):this._context.isPointInPath(n,s,o)}fill(...n){this._context.fill.apply(this._context,n)}fillRect(n,s,r,o){this._context.fillRect(n,s,r,o)}strokeRect(n,s,r,o){this._context.strokeRect(n,s,r,o)}fillText(n,s,r,o){o?this._context.fillText(n,s,r,o):this._context.fillText(n,s,r)}measureText(n){return this._context.measureText(n)}getImageData(n,s,r,o){return this._context.getImageData(n,s,r,o)}lineTo(n,s){this._context.lineTo(n,s)}moveTo(n,s){this._context.moveTo(n,s)}rect(n,s,r,o){this._context.rect(n,s,r,o)}roundRect(n,s,r,o,h){this._context.roundRect(n,s,r,o,h)}putImageData(n,s,r){this._context.putImageData(n,s,r)}quadraticCurveTo(n,s,r,o){this._context.quadraticCurveTo(n,s,r,o)}restore(){this._context.restore()}rotate(n){this._context.rotate(n)}save(){this._context.save()}scale(n,s){this._context.scale(n,s)}setLineDash(n){this._context.setLineDash?this._context.setLineDash(n):"mozDash"in this._context?this._context.mozDash=n:"webkitLineDash"in this._context&&(this._context.webkitLineDash=n)}getLineDash(){return this._context.getLineDash()}setTransform(n,s,r,o,h,c){this._context.setTransform(n,s,r,o,h,c)}stroke(n){n?this._context.stroke(n):this._context.stroke()}strokeText(n,s,r,o){this._context.strokeText(n,s,r,o)}transform(n,s,r,o,h,c){this._context.transform(n,s,r,o,h,c)}translate(n,s){this._context.translate(n,s)}_enableTrace(){let n=this,s=$1.length,r=this.setAttr,o,h;const c=function(g){let p=n[g],b;n[g]=function(){return h=J2(Array.prototype.slice.call(arguments,0)),b=p.apply(n,arguments),n._trace({method:g,args:h}),b}};for(o=0;o<s;o++)c($1[o]);n.setAttr=function(){r.apply(n,arguments);const g=arguments[0];let p=arguments[1];(g==="shadowOffsetX"||g==="shadowOffsetY"||g==="shadowBlur")&&(p=p/this.canvas.getPixelRatio()),n._trace({property:g,val:p})}}_applyGlobalCompositeOperation(n){const s=n.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}}ay.forEach(function(d){Object.defineProperty(i0.prototype,d,{get(){return this._context[d]},set(n){this._context[d]=n}})});class ly extends i0{constructor(n,{willReadFrequently:s=!1}={}){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(n){const s=n.fill();this.setAttr("fillStyle",s),n._fillFunc(this)}_fillPattern(n){this.setAttr("fillStyle",n._getFillPattern()),n._fillFunc(this)}_fillLinearGradient(n){const s=n._getLinearGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fillRadialGradient(n){const s=n._getRadialGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fill(n){const s=n.fill(),r=n.getFillPriority();if(s&&r==="color"){this._fillColor(n);return}const o=n.getFillPatternImage();if(o&&r==="pattern"){this._fillPattern(n);return}const h=n.getFillLinearGradientColorStops();if(h&&r==="linear-gradient"){this._fillLinearGradient(n);return}const c=n.getFillRadialGradientColorStops();if(c&&r==="radial-gradient"){this._fillRadialGradient(n);return}s?this._fillColor(n):o?this._fillPattern(n):h?this._fillLinearGradient(n):c&&this._fillRadialGradient(n)}_strokeLinearGradient(n){const s=n.getStrokeLinearGradientStartPoint(),r=n.getStrokeLinearGradientEndPoint(),o=n.getStrokeLinearGradientColorStops(),h=this.createLinearGradient(s.x,s.y,r.x,r.y);if(o){for(let c=0;c<o.length;c+=2)h.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",h)}}_stroke(n){const s=n.dash(),r=n.getStrokeScaleEnabled();if(n.hasStroke()){if(!r){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(n),s&&n.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",n.dashOffset())),this.setAttr("lineWidth",n.strokeWidth()),n.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),n.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(n):this.setAttr("strokeStyle",n.stroke()),n._strokeFunc(this),r||this.restore()}}_applyShadow(n){var s,r,o;const h=(s=n.getShadowRGBA())!==null&&s!==void 0?s:"black",c=(r=n.getShadowBlur())!==null&&r!==void 0?r:5,g=(o=n.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},p=n.getAbsoluteScale(),b=this.canvas.getPixelRatio(),R=p.x*b,O=p.y*b;this.setAttr("shadowColor",h),this.setAttr("shadowBlur",c*Math.min(Math.abs(R),Math.abs(O))),this.setAttr("shadowOffsetX",g.x*R),this.setAttr("shadowOffsetY",g.y*O)}}class ry extends i0{constructor(n){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:!0})}_fill(n){this.save(),this.setAttr("fillStyle",n.colorKey),n._fillFuncHit(this),this.restore()}strokeShape(n){n.hasHitStroke()&&this._stroke(n)}_stroke(n){if(n.hasHitStroke()){const s=n.getStrokeScaleEnabled();if(!s){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(n);const r=n.hitStrokeWidth(),o=r==="auto"?n.strokeWidth():r;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",n.colorKey),n._strokeFuncHit(this),s||this.restore()}}}let wd;function sy(){if(wd)return wd;const d=pt.createCanvasElement(),n=d.getContext("2d");return wd=(function(){const s=qt._global.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;return s/r})(),pt.releaseCanvas(d),wd}class Bp{constructor(n){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(n||{}).pixelRatio||qt.pixelRatio||sy();this.pixelRatio=r,this._canvas=pt.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(n){const s=this.pixelRatio;this.pixelRatio=n,this.setSize(this.getWidth()/s,this.getHeight()/s)}setWidth(n){this.width=this._canvas.width=n*this.pixelRatio,this._canvas.style.width=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}setHeight(n){this.height=this._canvas.height=n*this.pixelRatio,this._canvas.style.height=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}getWidth(){return this.width}getHeight(){return this.height}setSize(n,s){this.setWidth(n||0),this.setHeight(s||0)}toDataURL(n,s){try{return this._canvas.toDataURL(n,s)}catch{try{return this._canvas.toDataURL()}catch(o){return pt.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class xs extends Bp{constructor(n={width:0,height:0,willReadFrequently:!1}){super(n),this.context=new ly(this,{willReadFrequently:n.willReadFrequently}),this.setSize(n.width,n.height)}}function eg(){const d=pt.createCanvasElement();d.width=1,d.height=1;const n=d.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,1,1),n.fillStyle="rgba(255,0,255,1)",n.fillRect(0,0,1,1);const s=n.getImageData(0,0,1,1).data;return!(s[0]===255&&s[1]===0&&s[2]===255&&s[3]===255)}function ng(){var d,n;return typeof navigator>"u"?!1:(n=(d=navigator.brave)===null||d===void 0?void 0:d.isBrave())!==null&&n!==void 0?n:!1}let ag=!1;function oy(){return ng()&&eg()&&!ag&&(ag=!0,pt.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),ng()&&eg()}class Hp extends Bp{constructor(n={width:0,height:0}){super(n),this.hitCanvas=!0,this.context=new ry(this),this.setSize(n.width,n.height),oy()}}const ze={get isDragging(){let d=!1;return ze._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(d=!0)}),d},justDragged:!1,get node(){let d;return ze._dragElements.forEach(n=>{d=n.node}),d},_dragElements:new Map,_drag(d){const n=[];ze._dragElements.forEach((s,r)=>{const{node:o}=s,h=o.getStage();h.setPointersPositions(d),s.pointerId===void 0&&(s.pointerId=pt._getFirstPointerId(d));const c=h._changedPointerPositions.find(g=>g.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){const g=o.dragDistance();if(Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y))<g||(o.startDrag({evt:d}),!o.isDragging()))return}o._setDragPosition(d,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:d},!0)})},_endDragBefore(d){const n=[];ze._dragElements.forEach(s=>{const{node:r}=s,o=r.getStage();if(d&&o.setPointersPositions(d),!o._changedPointerPositions.find(g=>g.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(ze.justDragged=!0,qt._mouseListenClick=!1,qt._touchListenClick=!1,qt._pointerListenClick=!1,s.dragStatus="stopped");const c=s.node.getLayer()||s.node instanceof qt.Stage&&s.node;c&&n.indexOf(c)===-1&&n.push(c)}),n.forEach(s=>{s.draw()})},_endDragAfter(d){ze._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:d},!0),n.dragStatus!=="dragging"&&ze._dragElements.delete(s)})}};qt.isBrowser&&(window.addEventListener("mouseup",ze._endDragBefore,!0),window.addEventListener("touchend",ze._endDragBefore,!0),window.addEventListener("touchcancel",ze._endDragBefore,!0),window.addEventListener("mousemove",ze._drag),window.addEventListener("touchmove",ze._drag),window.addEventListener("mouseup",ze._endDragAfter,!1),window.addEventListener("touchend",ze._endDragAfter,!1),window.addEventListener("touchcancel",ze._endDragAfter,!1));function Ds(d){return pt._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||pt._isBoolean(d)?d:Object.prototype.toString.call(d)}function tm(d){return d>255?255:d<0?0:Math.round(d)}function wt(){if(qt.isUnminified)return function(d,n){return pt._isNumber(d)||pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a number.'),d}}function l0(d){if(qt.isUnminified)return function(n,s){let r=pt._isNumber(n),o=pt._isArray(n)&&n.length==d;return!r&&!o&&pt.warn(Ds(n)+' is a not valid value for "'+s+'" attribute. The value should be a number or Array<number>('+d+")"),n}}function jp(){if(qt.isUnminified)return function(d,n){return pt._isNumber(d)||d==="auto"||pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a number or "auto".'),d}}function zo(){if(qt.isUnminified)return function(d,n){return pt._isString(d)||pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a string.'),d}}function em(){if(qt.isUnminified)return function(d,n){const s=pt._isString(d),r=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return s||r||pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a string or a native gradient.'),d}}function uy(){if(qt.isUnminified)return function(d,n){const s=Int8Array?Object.getPrototypeOf(Int8Array):null;return s&&d instanceof s||(pt._isArray(d)?d.forEach(function(r){pt._isNumber(r)||pt.warn('"'+n+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a array of numbers.')),d}}function il(){if(qt.isUnminified)return function(d,n){return d===!0||d===!1||pt.warn(Ds(d)+' is a not valid value for "'+n+'" attribute. The value should be a boolean.'),d}}function cy(d){if(qt.isUnminified)return function(n,s){return n==null||pt.isObject(n)||pt.warn(Ds(n)+' is a not valid value for "'+s+'" attribute. The value should be an object with properties '+d),n}}const If="get",Zf="set",lt={addGetterSetter(d,n,s,r,o){lt.addGetter(d,n,s),lt.addSetter(d,n,r,o),lt.addOverloadedGetterSetter(d,n)},addGetter(d,n,s){const r=If+pt._capitalize(n);d.prototype[r]=d.prototype[r]||function(){const o=this.attrs[n];return o===void 0?s:o}},addSetter(d,n,s,r){const o=Zf+pt._capitalize(n);d.prototype[o]||lt.overWriteSetter(d,n,s,r)},overWriteSetter(d,n,s,r){const o=Zf+pt._capitalize(n);d.prototype[o]=function(h){return s&&h!==void 0&&h!==null&&(h=s.call(this,h,n)),this._setAttr(n,h),r&&r.call(this),this}},addComponentsGetterSetter(d,n,s,r,o){const h=s.length,c=pt._capitalize,g=If+c(n),p=Zf+c(n);d.prototype[g]=function(){const R={};for(let O=0;O<h;O++){const E=s[O];R[E]=this.getAttr(n+c(E))}return R};const b=cy(s);d.prototype[p]=function(R){const O=this.attrs[n];r&&(R=r.call(this,R,n)),b&&b.call(this,R,n);for(const E in R)R.hasOwnProperty(E)&&this._setAttr(n+c(E),R[E]);return R||s.forEach(E=>{this._setAttr(n+c(E),void 0)}),this._fireChangeEvent(n,O,R),o&&o.call(this),this},lt.addOverloadedGetterSetter(d,n)},addOverloadedGetterSetter(d,n){const s=pt._capitalize(n),r=Zf+s,o=If+s;d.prototype[n]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(d,n,s,r){pt.error("Adding deprecated "+n);const o=If+pt._capitalize(n),h=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";d.prototype[o]=function(){pt.error(h);const c=this.attrs[n];return c===void 0?s:c},lt.addSetter(d,n,r,function(){pt.error(h)}),lt.addOverloadedGetterSetter(d,n)},backCompat(d,n){pt.each(n,function(s,r){const o=d.prototype[r],h=If+pt._capitalize(s),c=Zf+pt._capitalize(s);function g(){o.apply(this,arguments),pt.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}d.prototype[s]=g,d.prototype[h]=g,d.prototype[c]=g})},afterSetFilter(){this._filterUpToDate=!1}};function fy(d){const n=/(\w+)\(([^)]+)\)/g;let s;for(;(s=n.exec(d))!==null;){const[,r,o]=s;switch(r){case"blur":{const h=parseFloat(o.replace("px",""));return function(c){this.blurRadius(h*.5);const g=qt.Filters;g&&g.Blur&&g.Blur.call(this,c)}}case"brightness":{const h=o.includes("%")?parseFloat(o)/100:parseFloat(o);return function(c){this.brightness(h);const g=qt.Filters;g&&g.Brightness&&g.Brightness.call(this,c)}}case"contrast":{const h=parseFloat(o);return function(c){const g=100*(Math.sqrt(h)-1);this.contrast(g);const p=qt.Filters;p&&p.Contrast&&p.Contrast.call(this,c)}}case"grayscale":return function(h){const c=qt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,h)};case"sepia":return function(h){const c=qt.Filters;c&&c.Sepia&&c.Sepia.call(this,h)};case"invert":return function(h){const c=qt.Filters;c&&c.Invert&&c.Invert.call(this,h)};default:pt.warn(`CSS filter "${r}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Jd="absoluteOpacity",Yd="allEventListeners",Br="absoluteTransform",ig="absoluteScale",xo="canvas",hy="Change",dy="children",py="konva",Cp="listening",gy="mouseenter",my="mouseleave",vy="pointerenter",yy="pointerleave",Sy="touchenter",by="touchleave",lg="set",rg="Shape",Fd=" ",sg="stage",Rs="transform",Cy="Stage",Ep="visible",Ey=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Fd);let Ty=1;class Lt{constructor(n){this._id=Ty++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(n),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(n){(n===Rs||n===Br)&&this._cache.get(n)?this._cache.get(n).dirty=!0:n?this._cache.delete(n):this._cache.clear()}_getCache(n,s){let r=this._cache.get(n);return(r===void 0||(n===Rs||n===Br)&&r.dirty===!0)&&(r=s.call(this),this._cache.set(n,r)),r}_calculate(n,s,r){if(!this._attachedDepsListeners.get(n)){const o=s.map(h=>h+"Change.konva").join(Fd);this.on(o,()=>{this._clearCache(n)}),this._attachedDepsListeners.set(n,!0)}return this._getCache(n,r)}_getCanvasCache(){return this._cache.get(xo)}_clearSelfAndDescendantCache(n){this._clearCache(n),n===Br&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(xo)){const{scene:n,filter:s,hit:r,buffer:o}=this._cache.get(xo);pt.releaseCanvas(n,s,r,o),this._cache.delete(xo)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(n){const s=n||{};let r={};(s.x===void 0||s.y===void 0||s.width===void 0||s.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(s.width||r.width),h=Math.ceil(s.height||r.height),c=s.pixelRatio,g=s.x===void 0?Math.floor(r.x):s.x,p=s.y===void 0?Math.floor(r.y):s.y,b=s.offset||0,R=s.drawBorder||!1,O=s.hitCanvasPixelRatio||1;if(!o||!h){pt.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const E=Math.abs(Math.round(r.x)-g)>.5?1:0,D=Math.abs(Math.round(r.y)-p)>.5?1:0;o+=b*2+E,h+=b*2+D,g-=b,p-=b;const S=new xs({pixelRatio:c,width:o,height:h}),G=new xs({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),w=new Hp({pixelRatio:O,width:o,height:h}),j=S.getContext(),U=w.getContext(),z=new xs({width:S.width/S.pixelRatio+Math.abs(g),height:S.height/S.pixelRatio+Math.abs(p),pixelRatio:S.pixelRatio}),L=z.getContext();return w.isCache=!0,S.isCache=!0,this._cache.delete(xo),this._filterUpToDate=!1,s.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,G.getContext()._context.imageSmoothingEnabled=!1),j.save(),U.save(),L.save(),j.translate(-g,-p),U.translate(-g,-p),L.translate(-g,-p),z.x=g,z.y=p,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Jd),this._clearSelfAndDescendantCache(ig),this.drawScene(S,this,z),this.drawHit(w,this),this._isUnderCache=!1,j.restore(),U.restore(),R&&(j.save(),j.beginPath(),j.rect(0,0,o,h),j.closePath(),j.setAttr("strokeStyle","red"),j.setAttr("lineWidth",5),j.stroke(),j.restore()),this._cache.set(xo,{scene:S,filter:G,hit:w,buffer:z,x:g,y:p}),this._requestDraw(),this}isCached(){return this._cache.has(xo)}getClientRect(n){throw new Error('abstract "getClientRect" method call')}_transformedRect(n,s){const r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}];let o=1/0,h=1/0,c=-1/0,g=-1/0;const p=this.getAbsoluteTransform(s);return r.forEach(function(b){const R=p.point(b);o===void 0&&(o=c=R.x,h=g=R.y),o=Math.min(o,R.x),h=Math.min(h,R.y),c=Math.max(c,R.x),g=Math.max(g,R.y)}),{x:o,y:h,width:c-o,height:g-h}}_drawCachedSceneCanvas(n){n.save(),n._applyOpacity(this),n._applyGlobalCompositeOperation(this);const s=this._getCanvasCache();n.translate(s.x,s.y);const r=this._getCachedSceneCanvas(),o=r.pixelRatio;n.drawImage(r._canvas,0,0,r.width/o,r.height/o),n.restore()}_drawCachedHitCanvas(n){const s=this._getCanvasCache(),r=s.hit;n.save(),n.translate(s.x,s.y),n.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),n.restore()}_getCachedSceneCanvas(){let n=this.filters(),s=this._getCanvasCache(),r=s.scene,o=s.filter,h=o.getContext(),c,g,p,b;if(!n||n.length===0)return r;if(this._filterUpToDate)return o;let R=!0;for(let E=0;E<n.length;E++)if(typeof n[E]=="string"&&tg(),typeof n[E]!="string"||!tg()){R=!1;break}const O=r.pixelRatio;if(o.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio),R){const E=n.join(" ");return h.save(),h.setAttr("filter",E),h.drawImage(r._canvas,0,0,r.getWidth()/O,r.getHeight()/O),h.restore(),this._filterUpToDate=!0,o}try{for(c=n.length,h.clear(),h.drawImage(r._canvas,0,0,r.getWidth()/O,r.getHeight()/O),g=h.getImageData(0,0,o.getWidth(),o.getHeight()),p=0;p<c;p++)b=n[p],typeof b=="string"&&(b=fy(b)),b.call(this,g),h.putImageData(g,0,0)}catch(E){pt.error("Unable to apply filter. "+E.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,o}on(n,s){if(this._cache&&this._cache.delete(Yd),arguments.length===3)return this._delegate.apply(this,arguments);const r=n.split(Fd);for(let o=0;o<r.length;o++){const c=r[o].split("."),g=c[0],p=c[1]||"";this.eventListeners[g]||(this.eventListeners[g]=[]),this.eventListeners[g].push({name:p,handler:s})}return this}off(n,s){let r=(n||"").split(Fd),o=r.length,h,c,g,p,b,R;if(this._cache&&this._cache.delete(Yd),!n)for(c in this.eventListeners)this._off(c);for(h=0;h<o;h++)if(g=r[h],p=g.split("."),b=p[0],R=p[1],b)this.eventListeners[b]&&this._off(b,R,s);else for(c in this.eventListeners)this._off(c,R,s);return this}dispatchEvent(n){const s={target:this,type:n.type,evt:n};return this.fire(n.type,s),this}addEventListener(n,s){return this.on(n,function(r){s.call(this,r.evt)}),this}removeEventListener(n){return this.off(n),this}_delegate(n,s,r){const o=this;this.on(n,function(h){const c=h.target.findAncestors(s,!0,o);for(let g=0;g<c.length;g++)h=pt.cloneObject(h),h.currentTarget=c[g],r.call(c[g],h)})}remove(){return this.isDragging()&&this.stopDrag(),ze._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Br),this._clearSelfAndDescendantCache(Jd),this._clearSelfAndDescendantCache(ig),this._clearSelfAndDescendantCache(sg),this._clearSelfAndDescendantCache(Ep),this._clearSelfAndDescendantCache(Cp)}_remove(){this._clearCaches();const n=this.getParent();n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(n){const s="get"+pt._capitalize(n);return pt._isFunction(this[s])?this[s]():this.attrs[n]}getAncestors(){let n=this.getParent(),s=[];for(;n;)s.push(n),n=n.getParent();return s}getAttrs(){return this.attrs||{}}setAttrs(n){return this._batchTransformChanges(()=>{let s,r;if(!n)return this;for(s in n)s!==dy&&(r=lg+pt._capitalize(s),pt._isFunction(this[r])?this[r](n[s]):this._setAttr(s,n[s]))}),this}isListening(){return this._getCache(Cp,this._isListening)}_isListening(n){if(!this.listening())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isListening(n):!0}isVisible(){return this._getCache(Ep,this._isVisible)}_isVisible(n){if(!this.visible())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isVisible(n):!0}shouldDrawHit(n,s=!1){if(n)return this._isVisible(n)&&this._isListening(n);const r=this.getLayer();let o=!1;ze._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===r)&&(o=!0)});const h=!s&&!qt.hitOnDragEnabled&&(o||qt.isTransforming());return this.isListening()&&this.isVisible()&&!h}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let n=this.getDepth(),s=this,r=0,o,h,c,g;function p(R){for(o=[],h=R.length,c=0;c<h;c++)g=R[c],r++,g.nodeType!==rg&&(o=o.concat(g.getChildren().slice())),g._id===s._id&&(c=h);o.length>0&&o[0].getDepth()<=n&&p(o)}const b=this.getStage();return s.nodeType!==Cy&&b&&p(b.getChildren()),r}getDepth(){let n=0,s=this.parent;for(;s;)n++,s=s.parent;return n}_batchTransformChanges(n){this._batchingTransformChange=!0,n(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Rs),this._clearSelfAndDescendantCache(Br)),this._needClearTransformCache=!1}setPosition(n){return this._batchTransformChanges(()=>{this.x(n.x),this.y(n.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const n=this.getStage();if(!n)return null;const s=n.getPointerPosition();if(!s)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(s)}getAbsolutePosition(n){let s=!1,r=this.parent;for(;r;){if(r.isCached()){s=!0;break}r=r.parent}s&&!n&&(n=!0);const o=this.getAbsoluteTransform(n).getMatrix(),h=new ni,c=this.offset();return h.m=o.slice(),h.translate(c.x,c.y),h.getTranslation()}setAbsolutePosition(n){const{x:s,y:r,...o}=this._clearTransform();this.attrs.x=s,this.attrs.y=r,this._clearCache(Rs);const h=this._getAbsoluteTransform().copy();return h.invert(),h.translate(n.x,n.y),n={x:this.attrs.x+h.getTranslation().x,y:this.attrs.y+h.getTranslation().y},this._setTransform(o),this.setPosition({x:n.x,y:n.y}),this._clearCache(Rs),this._clearSelfAndDescendantCache(Br),this}_setTransform(n){let s;for(s in n)this.attrs[s]=n[s]}_clearTransform(){const n={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,n}move(n){let s=n.x,r=n.y,o=this.x(),h=this.y();return s!==void 0&&(o+=s),r!==void 0&&(h+=r),this.setPosition({x:o,y:h}),this}_eachAncestorReverse(n,s){let r=[],o=this.getParent(),h,c;if(!(s&&s._id===this._id)){for(r.unshift(this);o&&(!s||o._id!==s._id);)r.unshift(o),o=o.parent;for(h=r.length,c=0;c<h;c++)n(r[c])}}rotate(n){return this.rotation(this.rotation()+n),this}moveToTop(){if(!this.parent)return pt.warn("Node has no parent. moveToTop function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return pt.warn("Node has no parent. moveUp function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.splice(n+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return pt.warn("Node has no parent. moveDown function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.splice(n-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return pt.warn("Node has no parent. moveToBottom function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(n){if(!this.parent)return pt.warn("Node has no parent. zIndex parameter is ignored."),this;(n<0||n>=this.parent.children.length)&&pt.warn("Unexpected value "+n+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const s=this.index;return this.parent.children.splice(s,1),this.parent.children.splice(n,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Jd,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let n=this.opacity();const s=this.getParent();return s&&!s._isUnderCache&&(n*=s.getAbsoluteOpacity()),n}moveTo(n){return this.getParent()!==n&&(this._remove(),n.add(this)),this}toObject(){let n=this.getAttrs(),s,r,o,h,c;const g={attrs:{},className:this.getClassName()};for(s in n)r=n[s],c=pt.isObject(r)&&!pt._isPlainObject(r)&&!pt._isArray(r),!c&&(o=typeof this[s]=="function"&&this[s],delete n[s],h=o?o.call(this):null,n[s]=r,h!==r&&(g.attrs[s]=r));return pt._prepareToStringify(g)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(n,s,r){const o=[];s&&this._isMatch(n)&&o.push(this);let h=this.parent;for(;h;){if(h===r)return o;h._isMatch(n)&&o.push(h),h=h.parent}return o}isAncestorOf(n){return!1}findAncestor(n,s,r){return this.findAncestors(n,s,r)[0]}_isMatch(n){if(!n)return!1;if(typeof n=="function")return n(this);let s=n.replace(/ /g,"").split(","),r=s.length,o,h;for(o=0;o<r;o++)if(h=s[o],pt.isValidSelector(h)||(pt.warn('Selector "'+h+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),pt.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),pt.warn("Konva is awesome, right?")),h.charAt(0)==="#"){if(this.id()===h.slice(1))return!0}else if(h.charAt(0)==="."){if(this.hasName(h.slice(1)))return!0}else if(this.className===h||this.nodeType===h)return!0;return!1}getLayer(){const n=this.getParent();return n?n.getLayer():null}getStage(){return this._getCache(sg,this._getStage)}_getStage(){const n=this.getParent();return n?n.getStage():null}fire(n,s={},r){return s.target=s.target||this,r?this._fireAndBubble(n,s):this._fire(n,s),this}getAbsoluteTransform(n){return n?this._getAbsoluteTransform(n):this._getCache(Br,this._getAbsoluteTransform)}_getAbsoluteTransform(n){let s;if(n)return s=new ni,this._eachAncestorReverse(function(r){const o=r.transformsEnabled();o==="all"?s.multiply(r.getTransform()):o==="position"&&s.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},n),s;{s=this._cache.get(Br)||new ni,this.parent?this.parent.getAbsoluteTransform().copyInto(s):s.reset();const r=this.transformsEnabled();if(r==="all")s.multiply(this.getTransform());else if(r==="position"){const o=this.attrs.x||0,h=this.attrs.y||0,c=this.attrs.offsetX||0,g=this.attrs.offsetY||0;s.translate(o-c,h-g)}return s.dirty=!1,s}}getAbsoluteScale(n){let s=this;for(;s;)s._isUnderCache&&(n=s),s=s.getParent();const o=this.getAbsoluteTransform(n).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Rs,this._getTransform)}_getTransform(){var n,s;const r=this._cache.get(Rs)||new ni;r.reset();const o=this.x(),h=this.y(),c=qt.getAngle(this.rotation()),g=(n=this.attrs.scaleX)!==null&&n!==void 0?n:1,p=(s=this.attrs.scaleY)!==null&&s!==void 0?s:1,b=this.attrs.skewX||0,R=this.attrs.skewY||0,O=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(o!==0||h!==0)&&r.translate(o,h),c!==0&&r.rotate(c),(b!==0||R!==0)&&r.skew(b,R),(g!==1||p!==1)&&r.scale(g,p),(O!==0||E!==0)&&r.translate(-1*O,-1*E),r.dirty=!1,r}clone(n){let s=pt.cloneObject(this.attrs),r,o,h,c,g;for(r in n)s[r]=n[r];const p=new this.constructor(s);for(r in this.eventListeners)for(o=this.eventListeners[r],h=o.length,c=0;c<h;c++)g=o[c],g.name.indexOf(py)<0&&(p.eventListeners[r]||(p.eventListeners[r]=[]),p.eventListeners[r].push(g));return p}_toKonvaCanvas(n){n=n||{};const s=this.getClientRect(),r=this.getStage(),o=n.x!==void 0?n.x:Math.floor(s.x),h=n.y!==void 0?n.y:Math.floor(s.y),c=n.pixelRatio||1,g=new xs({width:n.width||Math.ceil(s.width)||(r?r.width():0),height:n.height||Math.ceil(s.height)||(r?r.height():0),pixelRatio:c}),p=g.getContext(),b=new xs({width:g.width/g.pixelRatio+Math.abs(o),height:g.height/g.pixelRatio+Math.abs(h),pixelRatio:g.pixelRatio});return n.imageSmoothingEnabled===!1&&(p._context.imageSmoothingEnabled=!1),p.save(),(o||h)&&p.translate(-1*o,-1*h),this.drawScene(g,void 0,b),p.restore(),g}toCanvas(n){return this._toKonvaCanvas(n)._canvas}toDataURL(n){n=n||{};const s=n.mimeType||null,r=n.quality||null,o=this._toKonvaCanvas(n).toDataURL(s,r);return n.callback&&n.callback(o),o}toImage(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,pt._urlToImage(this.toDataURL(n),function(h){s(h),o==null||o(h)})}catch(o){r(o)}})}toBlob(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,this.toCanvas(n).toBlob(h=>{s(h),o==null||o(h)},n==null?void 0:n.mimeType,n==null?void 0:n.quality)}catch(o){r(o)}})}setSize(n){return this.width(n.width),this.height(n.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():qt.dragDistance}_off(n,s,r){let o=this.eventListeners[n],h,c,g;for(h=0;h<o.length;h++)if(c=o[h].name,g=o[h].handler,(c!=="konva"||s==="konva")&&(!s||c===s)&&(!r||r===g)){if(o.splice(h,1),o.length===0){delete this.eventListeners[n];break}h--}}_fireChangeEvent(n,s,r){this._fire(n+hy,{oldVal:s,newVal:r})}addName(n){if(!this.hasName(n)){const s=this.name(),r=s?s+" "+n:n;this.name(r)}return this}hasName(n){if(!n)return!1;const s=this.name();return s?(s||"").split(/\s/g).indexOf(n)!==-1:!1}removeName(n){const s=(this.name()||"").split(/\s/g),r=s.indexOf(n);return r!==-1&&(s.splice(r,1),this.name(s.join(" "))),this}setAttr(n,s){const r=this[lg+pt._capitalize(n)];return pt._isFunction(r)?r.call(this,s):this._setAttr(n,s),this}_requestDraw(){if(qt.autoDrawEnabled){const n=this.getLayer()||this.getStage();n==null||n.batchDraw()}}_setAttr(n,s){const r=this.attrs[n];r===s&&!pt.isObject(s)||(s==null?delete this.attrs[n]:this.attrs[n]=s,this._shouldFireChangeEvents&&this._fireChangeEvent(n,r,s),this._requestDraw())}_setComponentAttr(n,s,r){let o;r!==void 0&&(o=this.attrs[n],o||(this.attrs[n]=this.getAttr(n)),this.attrs[n][s]=r,this._fireChangeEvent(n,o,r))}_fireAndBubble(n,s,r){s&&this.nodeType===rg&&(s.target=this);const o=[gy,my,vy,yy,Sy,by];if(!(o.indexOf(n)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(n,s);const c=o.indexOf(n)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(s&&!s.cancelBubble||!s)&&this.parent&&this.parent.isListening()&&!c&&(r&&r.parent?this._fireAndBubble.call(this.parent,n,s,r):this._fireAndBubble.call(this.parent,n,s))}}_getProtoListeners(n){var s,r,o;const h=(s=this._cache.get(Yd))!==null&&s!==void 0?s:{};let c=h==null?void 0:h[n];if(c===void 0){c=[];let g=Object.getPrototypeOf(this);for(;g;){const p=(o=(r=g.eventListeners)===null||r===void 0?void 0:r[n])!==null&&o!==void 0?o:[];c.push(...p),g=Object.getPrototypeOf(g)}h[n]=c,this._cache.set(Yd,h)}return c}_fire(n,s){s=s||{},s.currentTarget=this,s.type=n;const r=this._getProtoListeners(n);if(r)for(let h=0;h<r.length;h++)r[h].handler.call(this,s);const o=this.eventListeners[n];if(o)for(let h=0;h<o.length;h++)o[h].handler.call(this,s)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(n){const s=n?n.pointerId:void 0,r=this.getStage(),o=this.getAbsolutePosition();if(!r)return;const h=r._getPointerById(s)||r._changedPointerPositions[0]||o;ze._dragElements.set(this._id,{node:this,startPointerPos:h,offset:{x:h.x-o.x,y:h.y-o.y},dragStatus:"ready",pointerId:s})}startDrag(n,s=!0){ze._dragElements.has(this._id)||this._createDragElement(n);const r=ze._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:n&&n.evt},s)}_setDragPosition(n,s){const r=this.getStage()._getPointerById(s.pointerId);if(!r)return;let o={x:r.x-s.offset.x,y:r.y-s.offset.y};const h=this.dragBoundFunc();if(h!==void 0){const c=h.call(this,o,n);c?o=c:pt.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(n){const s=ze._dragElements.get(this._id);s&&(s.dragStatus="stopped"),ze._endDragBefore(n),ze._endDragAfter(n)}setDraggable(n){this._setAttr("draggable",n),this._dragChange()}isDragging(){const n=ze._dragElements.get(this._id);return n?n.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(n){if(!(!(n.evt.button!==void 0)||qt.dragButtons.indexOf(n.evt.button)>=0)||this.isDragging())return;let o=!1;ze._dragElements.forEach(h=>{this.isAncestorOf(h.node)&&(o=!0)}),o||this._createDragElement(n)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const s=ze._dragElements.get(this._id),r=s&&s.dragStatus==="dragging",o=s&&s.dragStatus==="ready";r?this.stopDrag():o&&ze._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(n={x:0,y:0}){const s=this.getStage();if(!s)return!1;const r={x:-n.x,y:-n.y,width:s.width()+2*n.x,height:s.height()+2*n.y};return pt.haveIntersection(r,this.getClientRect())}static create(n,s){return pt._isString(n)&&(n=JSON.parse(n)),this._createNode(n,s)}static _createNode(n,s){let r=Lt.prototype.getClassName.call(n),o=n.children,h,c,g;s&&(n.attrs.container=s),qt[r]||(pt.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const p=qt[r];if(h=new p(n.attrs),o)for(c=o.length,g=0;g<c;g++)h.add(Lt._createNode(o[g]));return h}}Lt.prototype.nodeType="Node";Lt.prototype._attrsAffectingSize=[];Lt.prototype.eventListeners={};Lt.prototype.on.call(Lt.prototype,Ey,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Rs),this._clearSelfAndDescendantCache(Br)});Lt.prototype.on.call(Lt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Ep)});Lt.prototype.on.call(Lt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Cp)});Lt.prototype.on.call(Lt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Jd)});const Je=lt.addGetterSetter;Je(Lt,"zIndex");Je(Lt,"absolutePosition");Je(Lt,"position");Je(Lt,"x",0,wt());Je(Lt,"y",0,wt());Je(Lt,"globalCompositeOperation","source-over",zo());Je(Lt,"opacity",1,wt());Je(Lt,"name","",zo());Je(Lt,"id","",zo());Je(Lt,"rotation",0,wt());lt.addComponentsGetterSetter(Lt,"scale",["x","y"]);Je(Lt,"scaleX",1,wt());Je(Lt,"scaleY",1,wt());lt.addComponentsGetterSetter(Lt,"skew",["x","y"]);Je(Lt,"skewX",0,wt());Je(Lt,"skewY",0,wt());lt.addComponentsGetterSetter(Lt,"offset",["x","y"]);Je(Lt,"offsetX",0,wt());Je(Lt,"offsetY",0,wt());Je(Lt,"dragDistance",void 0,wt());Je(Lt,"width",0,wt());Je(Lt,"height",0,wt());Je(Lt,"listening",!0,il());Je(Lt,"preventDefault",!0,il());Je(Lt,"filters",void 0,function(d){return this._filterUpToDate=!1,d});Je(Lt,"visible",!0,il());Je(Lt,"transformsEnabled","all",zo());Je(Lt,"size");Je(Lt,"dragBoundFunc");Je(Lt,"draggable",!1,il());lt.backCompat(Lt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ai extends Lt{constructor(){super(...arguments),this.children=[]}getChildren(n){const s=this.children||[];return n?s.filter(n):s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let r=0;r<n.length;r++)this.add(n[r]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const r=[];return this._descendants(o=>{const h=o._isMatch(n);return h&&r.push(o),!!(h&&s)}),r}_descendants(n){let s=!1;const r=this.getChildren();for(const o of r){if(s=n(o),s)return!0;if(o.hasChildren()&&(s=o._descendants(n),s))return!0}return!1}toObject(){const n=Lt.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=Lt.prototype.clone.call(this,n);return this.getChildren().forEach(function(r){s.add(r.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(n)&&s.push(r)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(r){r._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,r){s.index=r}),this._requestDraw()}drawScene(n,s,r){const o=this.getLayer(),h=n||o&&o.getCanvas(),c=h&&h.getContext(),g=this._getCanvasCache(),p=g&&g.scene,b=h&&h.isCache;if(!this.isVisible()&&!b)return this;if(p){c.save();const R=this.getAbsoluteTransform(s).getMatrix();c.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",h,s,r);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const r=this.getLayer(),o=n||r&&r.hitCanvas,h=o&&o.getContext(),c=this._getCanvasCache();if(c&&c.hit){h.save();const p=this.getAbsoluteTransform(s).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",o,s);return this}_drawChildren(n,s,r,o){var h;const c=s&&s.getContext(),g=this.clipWidth(),p=this.clipHeight(),b=this.clipFunc(),R=typeof g=="number"&&typeof p=="number"||b,O=r===this;if(R){c.save();const D=this.getAbsoluteTransform(r);let S=D.getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.beginPath();let G;if(b)G=b.call(this,c,this);else{const w=this.clipX(),j=this.clipY();c.rect(w||0,j||0,g,p)}c.clip.apply(c,G),S=D.copy().invert().getMatrix(),c.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const E=!O&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";E&&(c.save(),c._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(D){D[n](s,r,o)}),E&&c.restore(),R&&c.restore()}getClientRect(n={}){var s;const r=n.skipTransform,o=n.relativeTo;let h,c,g,p,b={x:1/0,y:1/0,width:0,height:0};const R=this;(s=this.children)===null||s===void 0||s.forEach(function(D){if(!D.visible())return;const S=D.getClientRect({relativeTo:R,skipShadow:n.skipShadow,skipStroke:n.skipStroke});S.width===0&&S.height===0||(h===void 0?(h=S.x,c=S.y,g=S.x+S.width,p=S.y+S.height):(h=Math.min(h,S.x),c=Math.min(c,S.y),g=Math.max(g,S.x+S.width),p=Math.max(p,S.y+S.height)))});const O=this.find("Shape");let E=!1;for(let D=0;D<O.length;D++)if(O[D]._isVisible(this)){E=!0;break}return E&&h!==void 0?b={x:h,y:c,width:g-h,height:p-c}:b={x:0,y:0,width:0,height:0},r?b:this._transformedRect(b,o)}}lt.addComponentsGetterSetter(ai,"clip",["x","y","width","height"]);lt.addGetterSetter(ai,"clipX",void 0,wt());lt.addGetterSetter(ai,"clipY",void 0,wt());lt.addGetterSetter(ai,"clipWidth",void 0,wt());lt.addGetterSetter(ai,"clipHeight",void 0,wt());lt.addGetterSetter(ai,"clipFunc");const sh=new Map,nm=qt._global.PointerEvent!==void 0;function ep(d){return sh.get(d)}function Lp(d){return{evt:d,pointerId:d.pointerId}}function am(d,n){return sh.get(d)===n}function im(d,n){eh(d),n.getStage()&&(sh.set(d,n),nm&&n._fire("gotpointercapture",Lp(new PointerEvent("gotpointercapture"))))}function eh(d,n){const s=sh.get(d);if(!s)return;const r=s.getStage();r&&r.content,sh.delete(d),nm&&s._fire("lostpointercapture",Lp(new PointerEvent("lostpointercapture")))}const Ay="Stage",_y="string",og="px",Oy="mouseout",lm="mouseleave",rm="mouseover",sm="mouseenter",om="mousemove",um="mousedown",cm="mouseup",Ff="pointermove",kf="pointerdown",uc="pointerup",Wf="pointercancel",Ry="lostpointercapture",qd="pointerout",$f="pointerleave",Vd="pointerover",Xd="pointerenter",Tp="contextmenu",fm="touchstart",hm="touchend",dm="touchmove",pm="touchcancel",Ap="wheel",My=5,xy=[[sm,"_pointerenter"],[um,"_pointerdown"],[om,"_pointermove"],[cm,"_pointerup"],[lm,"_pointerleave"],[fm,"_pointerdown"],[dm,"_pointermove"],[hm,"_pointerup"],[pm,"_pointercancel"],[rm,"_pointerover"],[Ap,"_wheel"],[Tp,"_contextmenu"],[kf,"_pointerdown"],[Ff,"_pointermove"],[uc,"_pointerup"],[Wf,"_pointercancel"],[$f,"_pointerleave"],[Ry,"_lostpointercapture"]],np={mouse:{[qd]:Oy,[$f]:lm,[Vd]:rm,[Xd]:sm,[Ff]:om,[kf]:um,[uc]:cm,[Wf]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[qd]:"touchout",[$f]:"touchleave",[Vd]:"touchover",[Xd]:"touchenter",[Ff]:dm,[kf]:fm,[uc]:hm,[Wf]:pm,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[qd]:qd,[$f]:$f,[Vd]:Vd,[Xd]:Xd,[Ff]:Ff,[kf]:kf,[uc]:uc,[Wf]:Wf,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},th=d=>d.indexOf("pointer")>=0?"pointer":d.indexOf("touch")>=0?"touch":"mouse",lc=d=>{const n=th(d);if(n==="pointer")return qt.pointerEventsEnabled&&np.pointer;if(n==="touch")return np.touch;if(n==="mouse")return np.mouse};function ug(d={}){return(d.clipFunc||d.clipWidth||d.clipHeight)&&pt.warn("Stage does not support clipping. Please use clip for Layers or Groups."),d}const Ny="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",nh=[];let r0=class extends ai{constructor(n){super(ug(n)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),nh.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ug(this.attrs)}),this._checkVisibility()}_validateAdd(n){const s=n.getType()==="Layer",r=n.getType()==="FastLayer";s||r||pt.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const n=this.visible()?"":"none";this.content.style.display=n}setContainer(n){if(typeof n===_y){let s;if(n.charAt(0)==="."){const r=n.slice(1);n=document.getElementsByClassName(r)[0]}else n.charAt(0)!=="#"?s=n:s=n.slice(1),n=document.getElementById(s);if(!n)throw"Can not find container in document with id "+s}return this._setAttr("container",n),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),n.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const n=this.children,s=n.length;for(let r=0;r<s;r++)n[r].clear();return this}clone(n){return n||(n={}),n.container=typeof document<"u"&&document.createElement("div"),ai.prototype.clone.call(this,n)}destroy(){super.destroy();const n=this.content;n&&pt._isInDocument(n)&&this.container().removeChild(n);const s=nh.indexOf(this);return s>-1&&nh.splice(s,1),pt.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const n=this._pointerPositions[0]||this._changedPointerPositions[0];return n?{x:n.x,y:n.y}:(pt.warn(Ny),null)}_getPointerById(n){return this._pointerPositions.find(s=>s.id===n)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(n){n={...n},n.x=n.x||0,n.y=n.y||0,n.width=n.width||this.width(),n.height=n.height||this.height();const s=new xs({width:n.width,height:n.height,pixelRatio:n.pixelRatio||1}),r=s.getContext()._context,o=this.children;return(n.x||n.y)&&r.translate(-1*n.x,-1*n.y),o.forEach(function(h){if(!h.isVisible())return;const c=h._toKonvaCanvas(n);r.drawImage(c._canvas,n.x,n.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),s}getIntersection(n){if(!n)return null;const s=this.children,r=s.length,o=r-1;for(let h=o;h>=0;h--){const c=s[h].getIntersection(n);if(c)return c}return null}_resizeDOM(){const n=this.width(),s=this.height();this.content&&(this.content.style.width=n+og,this.content.style.height=s+og),this.bufferCanvas.setSize(n,s),this.bufferHitCanvas.setSize(n,s),this.children.forEach(r=>{r.setSize({width:n,height:s}),r.draw()})}add(n,...s){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(n);const r=this.children.length;return r>My&&pt.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),n.setSize({width:this.width(),height:this.height()}),n.draw(),qt.isBrowser&&this.content.appendChild(n.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(n){return am(n,this)}setPointerCapture(n){im(n,this)}releaseCapture(n){eh(n)}getLayers(){return this.children}_bindContentEvents(){qt.isBrowser&&xy.forEach(([n,s])=>{this.content.addEventListener(n,r=>{this[s](r)},{passive:!1})})}_pointerenter(n){this.setPointersPositions(n);const s=lc(n.type);s&&this._fire(s.pointerenter,{evt:n,target:this,currentTarget:this})}_pointerover(n){this.setPointersPositions(n);const s=lc(n.type);s&&this._fire(s.pointerover,{evt:n,target:this,currentTarget:this})}_getTargetShape(n){let s=this[n+"targetShape"];return s&&!s.getStage()&&(s=null),s}_pointerleave(n){const s=lc(n.type),r=th(n.type);if(!s)return;this.setPointersPositions(n);const o=this._getTargetShape(r),h=!(qt.isDragging()||qt.isTransforming())||qt.hitOnDragEnabled;o&&h?(o._fireAndBubble(s.pointerout,{evt:n}),o._fireAndBubble(s.pointerleave,{evt:n}),this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this[r+"targetShape"]=null):h&&(this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this._fire(s.pointerout,{evt:n,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(n){const s=lc(n.type),r=th(n.type);if(!s)return;this.setPointersPositions(n);let o=!1;this._changedPointerPositions.forEach(h=>{const c=this.getIntersection(h);if(ze.justDragged=!1,qt["_"+r+"ListenClick"]=!0,!c||!c.isListening()){this[r+"ClickStartShape"]=void 0;return}qt.capturePointerEventsEnabled&&c.setPointerCapture(h.id),this[r+"ClickStartShape"]=c,c._fireAndBubble(s.pointerdown,{evt:n,pointerId:h.id}),o=!0;const g=n.type.indexOf("touch")>=0;c.preventDefault()&&n.cancelable&&g&&n.preventDefault()}),o||this._fire(s.pointerdown,{evt:n,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(n){const s=lc(n.type),r=th(n.type);if(!s)return;const o=n.type.indexOf("touch")>=0||n.pointerType==="touch";if(qt.isDragging()&&ze.node.preventDefault()&&n.cancelable&&o&&n.preventDefault(),this.setPointersPositions(n),!(!(qt.isDragging()||qt.isTransforming())||qt.hitOnDragEnabled))return;const c={};let g=!1;const p=this._getTargetShape(r);this._changedPointerPositions.forEach(b=>{const R=ep(b.id)||this.getIntersection(b),O=b.id,E={evt:n,pointerId:O},D=p!==R;if(D&&p&&(p._fireAndBubble(s.pointerout,{...E},R),p._fireAndBubble(s.pointerleave,{...E},R)),R){if(c[R._id])return;c[R._id]=!0}R&&R.isListening()?(g=!0,D&&(R._fireAndBubble(s.pointerover,{...E},p),R._fireAndBubble(s.pointerenter,{...E},p),this[r+"targetShape"]=R),R._fireAndBubble(s.pointermove,{...E})):p&&(this._fire(s.pointerover,{evt:n,target:this,currentTarget:this,pointerId:O}),this[r+"targetShape"]=null)}),g||this._fire(s.pointermove,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(n){const s=lc(n.type),r=th(n.type);if(!s)return;this.setPointersPositions(n);const o=this[r+"ClickStartShape"],h=this[r+"ClickEndShape"],c={};let g=!1;this._changedPointerPositions.forEach(p=>{const b=ep(p.id)||this.getIntersection(p);if(b){if(b.releaseCapture(p.id),c[b._id])return;c[b._id]=!0}const R=p.id,O={evt:n,pointerId:R};let E=!1;qt["_"+r+"InDblClickWindow"]?(E=!0,clearTimeout(this[r+"DblTimeout"])):ze.justDragged||(qt["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){qt["_"+r+"InDblClickWindow"]=!1},qt.dblClickWindow),b&&b.isListening()?(g=!0,this[r+"ClickEndShape"]=b,b._fireAndBubble(s.pointerup,{...O}),qt["_"+r+"ListenClick"]&&o&&o===b&&(b._fireAndBubble(s.pointerclick,{...O}),E&&h&&h===b&&b._fireAndBubble(s.pointerdblclick,{...O}))):(this[r+"ClickEndShape"]=null,g||(this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),g=!0),qt["_"+r+"ListenClick"]&&this._fire(s.pointerclick,{evt:n,target:this,currentTarget:this,pointerId:R}),E&&this._fire(s.pointerdblclick,{evt:n,target:this,currentTarget:this,pointerId:R}))}),g||this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),qt["_"+r+"ListenClick"]=!1,n.cancelable&&r!=="touch"&&r!=="pointer"&&n.preventDefault()}_contextmenu(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(Tp,{evt:n}):this._fire(Tp,{evt:n,target:this,currentTarget:this})}_wheel(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(Ap,{evt:n}):this._fire(Ap,{evt:n,target:this,currentTarget:this})}_pointercancel(n){this.setPointersPositions(n);const s=ep(n.pointerId)||this.getIntersection(this.getPointerPosition());s&&s._fireAndBubble(uc,Lp(n)),eh(n.pointerId)}_lostpointercapture(n){eh(n.pointerId)}setPointersPositions(n){const s=this._getContentPosition();let r=null,o=null;n=n||window.event,n.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(n.touches,h=>{this._pointerPositions.push({id:h.identifier,x:(h.clientX-s.left)/s.scaleX,y:(h.clientY-s.top)/s.scaleY})}),Array.prototype.forEach.call(n.changedTouches||n.touches,h=>{this._changedPointerPositions.push({id:h.identifier,x:(h.clientX-s.left)/s.scaleX,y:(h.clientY-s.top)/s.scaleY})})):(r=(n.clientX-s.left)/s.scaleX,o=(n.clientY-s.top)/s.scaleY,this.pointerPos={x:r,y:o},this._pointerPositions=[{x:r,y:o,id:pt._getFirstPointerId(n)}],this._changedPointerPositions=[{x:r,y:o,id:pt._getFirstPointerId(n)}])}_setPointerPosition(n){pt.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(n)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const n=this.content.getBoundingClientRect();return{top:n.top,left:n.left,scaleX:n.width/this.content.clientWidth||1,scaleY:n.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new xs({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Hp({pixelRatio:1,width:this.width(),height:this.height()}),!qt.isBrowser)return;const n=this.container();if(!n)throw"Stage has no container. A container is required.";n.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),n.appendChild(this.content),this._resizeDOM()}cache(){return pt.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(n){n.batchDraw()}),this}};r0.prototype.nodeType=Ay;hn(r0);lt.addGetterSetter(r0,"container");qt.isBrowser&&document.addEventListener("visibilitychange",()=>{nh.forEach(d=>{d.batchDraw()})});const gm="hasShadow",mm="shadowRGBA",vm="patternImage",ym="linearGradient",Sm="radialGradient";let Pd;function ap(){return Pd||(Pd=pt.createCanvasElement().getContext("2d"),Pd)}const ah={};function Dy(d){const n=this.attrs.fillRule;n?d.fill(n):d.fill()}function zy(d){d.stroke()}function Uy(d){const n=this.attrs.fillRule;n?d.fill(n):d.fill()}function Gy(d){d.stroke()}function By(){this._clearCache(gm)}function Hy(){this._clearCache(mm)}function jy(){this._clearCache(vm)}function Ly(){this._clearCache(ym)}function wy(){this._clearCache(Sm)}class Bt extends Lt{constructor(n){super(n);let s;for(;s=pt.getRandomColor(),!(s&&!(s in ah)););this.colorKey=s,ah[s]=this}getContext(){return pt.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return pt.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(gm,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(vm,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const s=ap().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(s&&s.setTransform){const r=new ni;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(qt.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=r.getMatrix(),h=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);s.setTransform(h)}return s}}_getLinearGradient(){return this._getCache(ym,this.__getLinearGradient)}__getLinearGradient(){const n=this.fillLinearGradientColorStops();if(n){const s=ap(),r=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),h=s.createLinearGradient(r.x,r.y,o.x,o.y);for(let c=0;c<n.length;c+=2)h.addColorStop(n[c],n[c+1]);return h}}_getRadialGradient(){return this._getCache(Sm,this.__getRadialGradient)}__getRadialGradient(){const n=this.fillRadialGradientColorStops();if(n){const s=ap(),r=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),h=s.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let c=0;c<n.length;c+=2)h.addColorStop(n[c],n[c+1]);return h}}getShadowRGBA(){return this._getCache(mm,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const n=pt.colorToRGBA(this.shadowColor());if(n)return"rgba("+n.r+","+n.g+","+n.b+","+n.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const n=this.hitStrokeWidth();return n==="auto"?this.hasStroke():this.strokeEnabled()&&!!n}intersects(n){const s=this.getStage();if(!s)return!1;const r=s.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(n.x),Math.round(n.y),1,1).data[3]>0}destroy(){return Lt.prototype.destroy.call(this),delete ah[this.colorKey],delete this.colorKey,this}_useBufferCanvas(n){var s;if(!((s=this.attrs.perfectDrawEnabled)!==null&&s!==void 0?s:!0))return!1;const o=n||this.hasFill(),h=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(o&&h&&c)return!0;const g=this.hasShadow(),p=this.shadowForStrokeEnabled();return!!(o&&h&&g&&p)}setStrokeHitEnabled(n){pt.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),n?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const n=this.size();return{x:this._centroid?-n.width/2:0,y:this._centroid?-n.height/2:0,width:n.width,height:n.height}}getClientRect(n={}){let s=!1,r=this.getParent();for(;r;){if(r.isCached()){s=!0;break}r=r.getParent()}const o=n.skipTransform,h=n.relativeTo||s&&this.getStage()||void 0,c=this.getSelfRect(),p=!n.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,b=c.width+p,R=c.height+p,O=!n.skipShadow&&this.hasShadow(),E=O?this.shadowOffsetX():0,D=O?this.shadowOffsetY():0,S=b+Math.abs(E),G=R+Math.abs(D),w=O&&this.shadowBlur()||0,j=S+w*2,U=G+w*2,z={width:j,height:U,x:-(p/2+w)+Math.min(E,0)+c.x,y:-(p/2+w)+Math.min(D,0)+c.y};return o?z:this._transformedRect(z,h)}drawScene(n,s,r){const o=this.getLayer(),h=n||o.getCanvas(),c=h.getContext(),g=this._getCanvasCache(),p=this.getSceneFunc(),b=this.hasShadow();let R;const O=s===this;if(!this.isVisible()&&!O)return this;if(g){c.save();const E=this.getAbsoluteTransform(s).getMatrix();return c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!p)return this;if(c.save(),this._useBufferCanvas()){R=this.getStage();const E=r||R.bufferCanvas,D=E.getContext();D.clear(),D.save(),D._applyLineJoin(this),D._applyMiterLimit(this);const S=this.getAbsoluteTransform(s).getMatrix();D.transform(S[0],S[1],S[2],S[3],S[4],S[5]),p.call(this,D,this),D.restore();const G=E.pixelRatio;b&&c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(E._canvas,E.x||0,E.y||0,E.width/G,E.height/G)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!O){const E=this.getAbsoluteTransform(s).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}b&&c._applyShadow(this),p.call(this,c,this)}return c.restore(),this}drawHit(n,s,r=!1){if(!this.shouldDrawHit(s,r))return this;const o=this.getLayer(),h=n||o.hitCanvas,c=h&&h.getContext(),g=this.hitFunc()||this.sceneFunc(),p=this._getCanvasCache(),b=p&&p.hit;if(this.colorKey||pt.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),b){c.save();const O=this.getAbsoluteTransform(s).getMatrix();return c.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!g)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===s)){const O=this.getAbsoluteTransform(s).getMatrix();c.transform(O[0],O[1],O[2],O[3],O[4],O[5])}return g.call(this,c,this),c.restore(),this}drawHitFromCache(n=0){const s=this._getCanvasCache(),r=this._getCachedSceneCanvas(),o=s.hit,h=o.getContext(),c=o.getWidth(),g=o.getHeight();h.clear(),h.drawImage(r._canvas,0,0,c,g);try{const p=h.getImageData(0,0,c,g),b=p.data,R=b.length,O=pt._hexToRgb(this.colorKey);for(let E=0;E<R;E+=4)b[E+3]>n?(b[E]=O.r,b[E+1]=O.g,b[E+2]=O.b,b[E+3]=255):b[E+3]=0;h.putImageData(p,0,0)}catch(p){pt.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this}hasPointerCapture(n){return am(n,this)}setPointerCapture(n){im(n,this)}releaseCapture(n){eh(n)}}Bt.prototype._fillFunc=Dy;Bt.prototype._strokeFunc=zy;Bt.prototype._fillFuncHit=Uy;Bt.prototype._strokeFuncHit=Gy;Bt.prototype._centroid=!1;Bt.prototype.nodeType="Shape";hn(Bt);Bt.prototype.eventListeners={};Bt.prototype.on.call(Bt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",By);Bt.prototype.on.call(Bt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Hy);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",jy);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Ly);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",wy);lt.addGetterSetter(Bt,"stroke",void 0,em());lt.addGetterSetter(Bt,"strokeWidth",2,wt());lt.addGetterSetter(Bt,"fillAfterStrokeEnabled",!1);lt.addGetterSetter(Bt,"hitStrokeWidth","auto",jp());lt.addGetterSetter(Bt,"strokeHitEnabled",!0,il());lt.addGetterSetter(Bt,"perfectDrawEnabled",!0,il());lt.addGetterSetter(Bt,"shadowForStrokeEnabled",!0,il());lt.addGetterSetter(Bt,"lineJoin");lt.addGetterSetter(Bt,"lineCap");lt.addGetterSetter(Bt,"miterLimit");lt.addGetterSetter(Bt,"sceneFunc");lt.addGetterSetter(Bt,"hitFunc");lt.addGetterSetter(Bt,"dash");lt.addGetterSetter(Bt,"dashOffset",0,wt());lt.addGetterSetter(Bt,"shadowColor",void 0,zo());lt.addGetterSetter(Bt,"shadowBlur",0,wt());lt.addGetterSetter(Bt,"shadowOpacity",1,wt());lt.addComponentsGetterSetter(Bt,"shadowOffset",["x","y"]);lt.addGetterSetter(Bt,"shadowOffsetX",0,wt());lt.addGetterSetter(Bt,"shadowOffsetY",0,wt());lt.addGetterSetter(Bt,"fillPatternImage");lt.addGetterSetter(Bt,"fill",void 0,em());lt.addGetterSetter(Bt,"fillPatternX",0,wt());lt.addGetterSetter(Bt,"fillPatternY",0,wt());lt.addGetterSetter(Bt,"fillLinearGradientColorStops");lt.addGetterSetter(Bt,"strokeLinearGradientColorStops");lt.addGetterSetter(Bt,"fillRadialGradientStartRadius",0);lt.addGetterSetter(Bt,"fillRadialGradientEndRadius",0);lt.addGetterSetter(Bt,"fillRadialGradientColorStops");lt.addGetterSetter(Bt,"fillPatternRepeat","repeat");lt.addGetterSetter(Bt,"fillEnabled",!0);lt.addGetterSetter(Bt,"strokeEnabled",!0);lt.addGetterSetter(Bt,"shadowEnabled",!0);lt.addGetterSetter(Bt,"dashEnabled",!0);lt.addGetterSetter(Bt,"strokeScaleEnabled",!0);lt.addGetterSetter(Bt,"fillPriority","color");lt.addComponentsGetterSetter(Bt,"fillPatternOffset",["x","y"]);lt.addGetterSetter(Bt,"fillPatternOffsetX",0,wt());lt.addGetterSetter(Bt,"fillPatternOffsetY",0,wt());lt.addComponentsGetterSetter(Bt,"fillPatternScale",["x","y"]);lt.addGetterSetter(Bt,"fillPatternScaleX",1,wt());lt.addGetterSetter(Bt,"fillPatternScaleY",1,wt());lt.addComponentsGetterSetter(Bt,"fillLinearGradientStartPoint",["x","y"]);lt.addComponentsGetterSetter(Bt,"strokeLinearGradientStartPoint",["x","y"]);lt.addGetterSetter(Bt,"fillLinearGradientStartPointX",0);lt.addGetterSetter(Bt,"strokeLinearGradientStartPointX",0);lt.addGetterSetter(Bt,"fillLinearGradientStartPointY",0);lt.addGetterSetter(Bt,"strokeLinearGradientStartPointY",0);lt.addComponentsGetterSetter(Bt,"fillLinearGradientEndPoint",["x","y"]);lt.addComponentsGetterSetter(Bt,"strokeLinearGradientEndPoint",["x","y"]);lt.addGetterSetter(Bt,"fillLinearGradientEndPointX",0);lt.addGetterSetter(Bt,"strokeLinearGradientEndPointX",0);lt.addGetterSetter(Bt,"fillLinearGradientEndPointY",0);lt.addGetterSetter(Bt,"strokeLinearGradientEndPointY",0);lt.addComponentsGetterSetter(Bt,"fillRadialGradientStartPoint",["x","y"]);lt.addGetterSetter(Bt,"fillRadialGradientStartPointX",0);lt.addGetterSetter(Bt,"fillRadialGradientStartPointY",0);lt.addComponentsGetterSetter(Bt,"fillRadialGradientEndPoint",["x","y"]);lt.addGetterSetter(Bt,"fillRadialGradientEndPointX",0);lt.addGetterSetter(Bt,"fillRadialGradientEndPointY",0);lt.addGetterSetter(Bt,"fillPatternRotation",0);lt.addGetterSetter(Bt,"fillRule",void 0,zo());lt.backCompat(Bt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Yy="#",qy="beforeDraw",Vy="draw",bm=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Xy=bm.length;let Uo=class extends ai{constructor(n){super(n),this.canvas=new xs,this.hitCanvas=new Hp({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(n){return this.getContext().clear(n),this.getHitCanvas().getContext().clear(n),this}setZIndex(n){super.setZIndex(n);const s=this.getStage();return s&&s.content&&(s.content.removeChild(this.getNativeCanvasElement()),n<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[n+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Lt.prototype.moveToTop.call(this);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Lt.prototype.moveUp.call(this))return!1;const s=this.getStage();return!s||!s.content?!1:(s.content.removeChild(this.getNativeCanvasElement()),this.index<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[this.index+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Lt.prototype.moveDown.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Lt.prototype.moveToBottom.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const n=this.getNativeCanvasElement();return Lt.prototype.remove.call(this),n&&n.parentNode&&pt._isInDocument(n)&&n.parentNode.removeChild(n),this}getStage(){return this.parent}setSize({width:n,height:s}){return this.canvas.setSize(n,s),this.hitCanvas.setSize(n,s),this._setSmoothEnabled(),this}_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&pt.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(n){return n={...n},n.width=n.width||this.getWidth(),n.height=n.height||this.getHeight(),n.x=n.x!==void 0?n.x:this.x(),n.y=n.y!==void 0?n.y:this.y(),Lt.prototype._toKonvaCanvas.call(this,n)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){pt.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){pt.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,pt.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(n){if(!this.isListening()||!this.isVisible())return null;let s=1,r=!1;for(;;){for(let o=0;o<Xy;o++){const h=bm[o],c=this._getIntersection({x:n.x+h.x*s,y:n.y+h.y*s}),g=c.shape;if(g)return g;if(r=!!c.antialiased,!c.antialiased)break}if(r)s+=1;else return null}}_getIntersection(n){const s=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(n.x*s),Math.round(n.y*s),1,1).data,o=r[3];if(o===255){const h=pt._rgbToHex(r[0],r[1],r[2]),c=ah[Yy+h];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(n,s,r){const o=this.getLayer(),h=n||o&&o.getCanvas();return this._fire(qy,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),ai.prototype.drawScene.call(this,h,s,r),this._fire(Vy,{node:this}),this}drawHit(n,s){const r=this.getLayer(),o=n||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),ai.prototype.drawHit.call(this,o,s),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(n){pt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(n)}getHitGraphEnabled(n){return pt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const n=this.parent;!!this.hitCanvas._canvas.parentNode?n.content.removeChild(this.hitCanvas._canvas):n.content.appendChild(this.hitCanvas._canvas)}destroy(){return pt.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Uo.prototype.nodeType="Layer";hn(Uo);lt.addGetterSetter(Uo,"imageSmoothingEnabled",!0);lt.addGetterSetter(Uo,"clearBeforeDraw",!0);lt.addGetterSetter(Uo,"hitGraphEnabled",!0,il());class wp extends Uo{constructor(n){super(n),this.listening(!1),pt.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}wp.prototype.nodeType="FastLayer";hn(wp);class cc extends ai{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&pt.throw("You may only add groups and shapes to groups.")}}cc.prototype.nodeType="Group";hn(cc);const ip=(function(){return No.performance&&No.performance.now?function(){return No.performance.now()}:function(){return new Date().getTime()}})();class zi{constructor(n,s){this.id=zi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ip(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,r=s.length;for(let o=0;o<r;o++)if(s[o]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=zi.animations,r=s.length;for(let o=0;o<r;o++)if(s[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ip(),zi._addAnimation(this),this}stop(){return zi._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,r=this.animations,o=r.length;for(let h=0;h<o;h++)if(r[h].id===s){this.animations.splice(h,1);break}}static _runFrames(){const n={},s=this.animations;for(let r=0;r<s.length;r++){const o=s[r],h=o.layers,c=o.func;o._updateFrameObject(ip());const g=h.length;let p;if(c?p=c.call(o,o.frame)!==!1:p=!0,!!p)for(let b=0;b<g;b++){const R=h[b];R._id!==void 0&&(n[R._id]=R)}}for(const r in n)n.hasOwnProperty(r)&&n[r].batchDraw()}static _animationLoop(){const n=zi;n.animations.length?(n._runFrames(),pt.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,pt.requestAnimFrame(this._animationLoop))}}zi.animations=[];zi.animIdCounter=0;zi.animRunning=!1;const Py={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Qy=1,cg=2,fg=3,hg=["fill","stroke","shadowColor"];let Ky=0;class Iy{constructor(n,s,r,o,h,c,g){this.prop=n,this.propFunc=s,this.begin=o,this._pos=o,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=h-this.begin,this.pause()}fire(n){const s=this[n];s&&s()}setTime(n){n>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():n<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=n,this.update())}getTime(){return this._time}setPosition(n){this.prevPos=this._pos,this.propFunc(n),this._pos=n}getPosition(n){return n===void 0&&(n=this._time),this.func(n,this.begin,this._change,this.duration)}play(){this.state=cg,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=fg,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(n){this.pause(),this._time=n,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const n=this.getTimer()-this._startTime;this.state===cg?this.setTime(n):this.state===fg&&this.setTime(this.duration-n)}pause(){this.state=Qy,this.fire("onPause")}getTimer(){return new Date().getTime()}}class We{constructor(n){const s=this,r=n.node,o=r._id,h=n.easing||ih.Linear,c=!!n.yoyo;let g,p;typeof n.duration>"u"?g=.3:n.duration===0?g=.001:g=n.duration,this.node=r,this._id=Ky++;const b=r.getLayer()||(r instanceof qt.Stage?r.getLayers():null);b||pt.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new zi(function(){s.tween.onEnterFrame()},b),this.tween=new Iy(p,function(R){s._tweenFunc(R)},h,0,1,g*1e3,c),this._addListeners(),We.attrs[o]||(We.attrs[o]={}),We.attrs[o][this._id]||(We.attrs[o][this._id]={}),We.tweens[o]||(We.tweens[o]={});for(p in n)Py[p]===void 0&&this._addAttr(p,n[p]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}_addAttr(n,s){const r=this.node,o=r._id;let h,c,g,p,b;const R=We.tweens[o][n];R&&delete We.attrs[o][R][n];let O=r.getAttr(n);if(pt._isArray(s))if(h=[],c=Math.max(s.length,O.length),n==="points"&&s.length!==O.length&&(s.length>O.length?(p=O,O=pt._prepareArrayForTween(O,s,r.closed())):(g=s,s=pt._prepareArrayForTween(s,O,r.closed()))),n.indexOf("fill")===0)for(let E=0;E<c;E++)if(E%2===0)h.push(s[E]-O[E]);else{const D=pt.colorToRGBA(O[E]);b=pt.colorToRGBA(s[E]),O[E]=D,h.push({r:b.r-D.r,g:b.g-D.g,b:b.b-D.b,a:b.a-D.a})}else for(let E=0;E<c;E++)h.push(s[E]-O[E]);else hg.indexOf(n)!==-1?(O=pt.colorToRGBA(O),b=pt.colorToRGBA(s),h={r:b.r-O.r,g:b.g-O.g,b:b.b-O.b,a:b.a-O.a}):h=s-O;We.attrs[o][this._id][n]={start:O,diff:h,end:s,trueEnd:g,trueStart:p},We.tweens[o][n]=this._id}_tweenFunc(n){const s=this.node,r=We.attrs[s._id][this._id];let o,h,c,g,p,b,R,O;for(o in r){if(h=r[o],c=h.start,g=h.diff,O=h.end,pt._isArray(c))if(p=[],R=Math.max(c.length,O.length),o.indexOf("fill")===0)for(b=0;b<R;b++)b%2===0?p.push((c[b]||0)+g[b]*n):p.push("rgba("+Math.round(c[b].r+g[b].r*n)+","+Math.round(c[b].g+g[b].g*n)+","+Math.round(c[b].b+g[b].b*n)+","+(c[b].a+g[b].a*n)+")");else for(b=0;b<R;b++)p.push((c[b]||0)+g[b]*n);else hg.indexOf(o)!==-1?p="rgba("+Math.round(c.r+g.r*n)+","+Math.round(c.g+g.g*n)+","+Math.round(c.b+g.b*n)+","+(c.a+g.a*n)+")":p=c+g*n;s.setAttr(o,p)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const n=this.node,s=We.attrs[n._id][this._id];s.points&&s.points.trueEnd&&n.setAttr("points",s.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const n=this.node,s=We.attrs[n._id][this._id];s.points&&s.points.trueStart&&n.points(s.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(n){return this.tween.seek(n*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const n=this.node._id,s=this._id,r=We.tweens[n];this.pause(),this.anim&&this.anim.stop();for(const o in r)delete We.tweens[n][o];delete We.attrs[n][s],We.tweens[n]&&(Object.keys(We.tweens[n]).length===0&&delete We.tweens[n],Object.keys(We.attrs[n]).length===0&&delete We.attrs[n])}}We.attrs={};We.tweens={};Lt.prototype.to=function(d){const n=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),n&&n()},new We(d).play()};const ih={BackEaseIn(d,n,s,r){return s*(d/=r)*d*((1.70158+1)*d-1.70158)+n},BackEaseOut(d,n,s,r){return s*((d=d/r-1)*d*((1.70158+1)*d+1.70158)+1)+n},BackEaseInOut(d,n,s,r){let o=1.70158;return(d/=r/2)<1?s/2*(d*d*(((o*=1.525)+1)*d-o))+n:s/2*((d-=2)*d*(((o*=1.525)+1)*d+o)+2)+n},ElasticEaseIn(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r)===1?n+s:(h||(h=r*.3),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),-(o*Math.pow(2,10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h))+n)},ElasticEaseOut(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r)===1?n+s:(h||(h=r*.3),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*d)*Math.sin((d*r-c)*(2*Math.PI)/h)+s+n)},ElasticEaseInOut(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r/2)===2?n+s:(h||(h=r*(.3*1.5)),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),d<1?-.5*(o*Math.pow(2,10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h))+n:o*Math.pow(2,-10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h)*.5+s+n)},BounceEaseOut(d,n,s,r){return(d/=r)<1/2.75?s*(7.5625*d*d)+n:d<2/2.75?s*(7.5625*(d-=1.5/2.75)*d+.75)+n:d<2.5/2.75?s*(7.5625*(d-=2.25/2.75)*d+.9375)+n:s*(7.5625*(d-=2.625/2.75)*d+.984375)+n},BounceEaseIn(d,n,s,r){return s-ih.BounceEaseOut(r-d,0,s,r)+n},BounceEaseInOut(d,n,s,r){return d<r/2?ih.BounceEaseIn(d*2,0,s,r)*.5+n:ih.BounceEaseOut(d*2-r,0,s,r)*.5+s*.5+n},EaseIn(d,n,s,r){return s*(d/=r)*d+n},EaseOut(d,n,s,r){return-s*(d/=r)*(d-2)+n},EaseInOut(d,n,s,r){return(d/=r/2)<1?s/2*d*d+n:-s/2*(--d*(d-2)-1)+n},StrongEaseIn(d,n,s,r){return s*(d/=r)*d*d*d*d+n},StrongEaseOut(d,n,s,r){return s*((d=d/r-1)*d*d*d*d+1)+n},StrongEaseInOut(d,n,s,r){return(d/=r/2)<1?s/2*d*d*d*d*d+n:s/2*((d-=2)*d*d*d*d+2)+n},Linear(d,n,s,r){return s*d/r+n}},fc=pt._assign(qt,{Util:pt,Transform:ni,Node:Lt,Container:ai,Stage:r0,stages:nh,Layer:Uo,FastLayer:wp,Group:cc,DD:ze,Shape:Bt,shapes:ah,Animation:zi,Tween:We,Easings:ih,Context:i0,Canvas:Bp});class Hr extends Bt{_sceneFunc(n){const s=qt.getAngle(this.angle()),r=this.clockwise();n.beginPath(),n.arc(0,0,this.outerRadius(),0,s,r),n.arc(0,0,this.innerRadius(),s,0,!r),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}getSelfRect(){const n=this.innerRadius(),s=this.outerRadius(),r=this.clockwise(),o=qt.getAngle(r?360-this.angle():this.angle()),h=Math.cos(Math.min(o,Math.PI)),c=1,g=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),p=Math.sin(Math.min(o,Math.PI/2)),b=h*(h>0?n:s),R=c*s,O=g*(g>0?n:s),E=p*(p>0?s:n);return{x:b,y:r?-1*E:O,width:R-b,height:E-O}}}Hr.prototype._centroid=!0;Hr.prototype.className="Arc";Hr.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];hn(Hr);lt.addGetterSetter(Hr,"innerRadius",0,wt());lt.addGetterSetter(Hr,"outerRadius",0,wt());lt.addGetterSetter(Hr,"angle",0,wt());lt.addGetterSetter(Hr,"clockwise",!1,il());function _p(d,n,s,r,o,h,c){const g=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-n,2)),p=Math.sqrt(Math.pow(o-s,2)+Math.pow(h-r,2)),b=c*g/(g+p),R=c*p/(g+p),O=s-b*(o-d),E=r-b*(h-n),D=s+R*(o-d),S=r+R*(h-n);return[O,E,D,S]}function dg(d,n){const s=d.length,r=[];for(let o=2;o<s-2;o+=2){const h=_p(d[o-2],d[o-1],d[o],d[o+1],d[o+2],d[o+3],n);isNaN(h[0])||(r.push(h[0]),r.push(h[1]),r.push(d[o]),r.push(d[o+1]),r.push(h[2]),r.push(h[3]))}return r}let jr=class extends Bt{constructor(n){super(n),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(n){const s=this.points(),r=s.length,o=this.tension(),h=this.closed(),c=this.bezier();if(!r)return;let g=0;if(n.beginPath(),n.moveTo(s[0],s[1]),o!==0&&r>4){const p=this.getTensionPoints(),b=p.length;for(g=h?0:4,h||n.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<b-2;)n.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);h||n.quadraticCurveTo(p[b-2],p[b-1],s[r-2],s[r-1])}else if(c)for(g=2;g<r;)n.bezierCurveTo(s[g++],s[g++],s[g++],s[g++],s[g++],s[g++]);else for(g=2;g<r;g+=2)n.lineTo(s[g],s[g+1]);h?(n.closePath(),n.fillStrokeShape(this)):n.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():dg(this.points(),this.tension())}_getTensionPointsClosed(){const n=this.points(),s=n.length,r=this.tension(),o=_p(n[s-2],n[s-1],n[0],n[1],n[2],n[3],r),h=_p(n[s-4],n[s-3],n[s-2],n[s-1],n[0],n[1],r),c=dg(n,r);return[o[2],o[3]].concat(c).concat([h[0],h[1],n[s-2],n[s-1],h[2],h[3],o[0],o[1],n[0],n[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let n=this.points();if(n.length<4)return{x:n[0]||0,y:n[1]||0,width:0,height:0};this.tension()!==0?n=[n[0],n[1],...this._getTensionPoints(),n[n.length-2],n[n.length-1]]:n=this.points();let s=n[0],r=n[0],o=n[1],h=n[1],c,g;for(let p=0;p<n.length/2;p++)c=n[p*2],g=n[p*2+1],s=Math.min(s,c),r=Math.max(r,c),o=Math.min(o,g),h=Math.max(h,g);return{x:s,y:o,width:r-s,height:h-o}}};jr.prototype.className="Line";jr.prototype._attrsAffectingSize=["points","bezier","tension"];hn(jr);lt.addGetterSetter(jr,"closed",!1);lt.addGetterSetter(jr,"bezier",!1);lt.addGetterSetter(jr,"tension",0,wt());lt.addGetterSetter(jr,"points",[],uy());const Zy=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Jy=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Fy=[[1],[1,1],[1,2,1],[1,3,3,1]],pg=(d,n,s)=>{let r,o;const c=s/2;r=0;for(let g=0;g<20;g++)o=c*Zy[20][g]+c,r+=Jy[20][g]*ky(d,n,o);return c*r},gg=(d,n,s)=>{s===void 0&&(s=1);const r=d[0]-2*d[1]+d[2],o=n[0]-2*n[1]+n[2],h=2*d[1]-2*d[0],c=2*n[1]-2*n[0],g=4*(r*r+o*o),p=4*(r*h+o*c),b=h*h+c*c;if(g===0)return s*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(n[2]-n[0],2));const R=p/(2*g),O=b/g,E=s+R,D=O-R*R,S=E*E+D>0?Math.sqrt(E*E+D):0,G=R*R+D>0?Math.sqrt(R*R+D):0,w=R+Math.sqrt(R*R+D)!==0?D*Math.log(Math.abs((E+S)/(R+G))):0;return Math.sqrt(g)/2*(E*S-R*G+w)};function ky(d,n,s){const r=Op(1,s,d),o=Op(1,s,n),h=r*r+o*o;return Math.sqrt(h)}const Op=(d,n,s)=>{const r=s.length-1;let o,h;if(r===0)return 0;if(d===0){h=0;for(let c=0;c<=r;c++)h+=Fy[r][c]*Math.pow(1-n,r-c)*Math.pow(n,c)*s[c];return h}else{o=new Array(r);for(let c=0;c<r;c++)o[c]=r*(s[c+1]-s[c]);return Op(d-1,n,o)}},mg=(d,n,s)=>{let r=1,o=d/n,h=(d-s(o))/n,c=0;for(;r>.001;){const g=s(o+h),p=Math.abs(d-g)/n;if(p<r)r=p,o+=h;else{const b=s(o-h),R=Math.abs(d-b)/n;R<r?(r=R,o-=h):h/=2}if(c++,c>500)break}return o};class $e extends Bt{constructor(n){super(n),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=$e.parsePathData(this.data()),this.pathLength=$e.getPathLength(this.dataArray)}_sceneFunc(n){const s=this.dataArray;n.beginPath();let r=!1;for(let o=0;o<s.length;o++){const h=s[o].command,c=s[o].points;switch(h){case"L":n.lineTo(c[0],c[1]);break;case"M":n.moveTo(c[0],c[1]);break;case"C":n.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":n.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const g=c[0],p=c[1],b=c[2],R=c[3],O=c[4],E=c[5],D=c[6],S=c[7],G=b>R?b:R,w=b>R?1:b/R,j=b>R?R/b:1;n.translate(g,p),n.rotate(D),n.scale(w,j),n.arc(0,0,G,O,O+E,1-S),n.scale(1/w,1/j),n.rotate(-D),n.translate(-g,-p);break;case"z":r=!0,n.closePath();break}}!r&&!this.hasFill()?n.strokeShape(this):n.fillStrokeShape(this)}getSelfRect(){let n=[];this.dataArray.forEach(function(p){if(p.command==="A"){const b=p.points[4],R=p.points[5],O=p.points[4]+R;let E=Math.PI/180;if(Math.abs(b-O)<E&&(E=Math.abs(b-O)),R<0)for(let D=b-E;D>O;D-=E){const S=$e.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],D,0);n.push(S.x,S.y)}else for(let D=b+E;D<O;D+=E){const S=$e.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],D,0);n.push(S.x,S.y)}}else if(p.command==="C")for(let b=0;b<=1;b+=.01){const R=$e.getPointOnCubicBezier(b,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);n.push(R.x,R.y)}else n=n.concat(p.points)});let s=n[0],r=n[0],o=n[1],h=n[1],c,g;for(let p=0;p<n.length/2;p++)c=n[p*2],g=n[p*2+1],isNaN(c)||(s=Math.min(s,c),r=Math.max(r,c)),isNaN(g)||(o=Math.min(o,g),h=Math.max(h,g));return{x:s,y:o,width:r-s,height:h-o}}getLength(){return this.pathLength}getPointAtLength(n){return $e.getPointAtLengthOfDataArray(n,this.dataArray)}static getLineLength(n,s,r,o){return Math.sqrt((r-n)*(r-n)+(o-s)*(o-s))}static getPathLength(n){let s=0;for(let r=0;r<n.length;++r)s+=n[r].pathLength;return s}static getPointAtLengthOfDataArray(n,s){let r,o=0,h=s.length;if(!h)return null;for(;o<h&&n>s[o].pathLength;)n-=s[o].pathLength,++o;if(o===h)return r=s[o-1].points.slice(-2),{x:r[0],y:r[1]};if(n<.01)return s[o].command==="M"?(r=s[o].points.slice(0,2),{x:r[0],y:r[1]}):{x:s[o].start.x,y:s[o].start.y};const c=s[o],g=c.points;switch(c.command){case"L":return $e.getPointOnLine(n,c.start.x,c.start.y,g[0],g[1]);case"C":return $e.getPointOnCubicBezier(mg(n,$e.getPathLength(s),G=>pg([c.start.x,g[0],g[2],g[4]],[c.start.y,g[1],g[3],g[5]],G)),c.start.x,c.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return $e.getPointOnQuadraticBezier(mg(n,$e.getPathLength(s),G=>gg([c.start.x,g[0],g[2]],[c.start.y,g[1],g[3]],G)),c.start.x,c.start.y,g[0],g[1],g[2],g[3]);case"A":const p=g[0],b=g[1],R=g[2],O=g[3],E=g[5],D=g[6];let S=g[4];return S+=E*n/c.pathLength,$e.getPointOnEllipticalArc(p,b,R,O,S,D)}return null}static getPointOnLine(n,s,r,o,h,c,g){c=c??s,g=g??r;const p=this.getLineLength(s,r,o,h);if(p<1e-10)return{x:s,y:r};if(o===s)return{x:c,y:g+(h>r?n:-n)};const b=(h-r)/(o-s),R=Math.sqrt(n*n/(1+b*b))*(o<s?-1:1),O=b*R;if(Math.abs(g-r-b*(c-s))<1e-10)return{x:c+R,y:g+O};const E=((c-s)*(o-s)+(g-r)*(h-r))/(p*p),D=s+E*(o-s),S=r+E*(h-r),G=this.getLineLength(c,g,D,S),w=Math.sqrt(n*n-G*G),j=Math.sqrt(w*w/(1+b*b))*(o<s?-1:1),U=b*j;return{x:D+j,y:S+U}}static getPointOnCubicBezier(n,s,r,o,h,c,g,p,b){function R(w){return w*w*w}function O(w){return 3*w*w*(1-w)}function E(w){return 3*w*(1-w)*(1-w)}function D(w){return(1-w)*(1-w)*(1-w)}const S=p*R(n)+c*O(n)+o*E(n)+s*D(n),G=b*R(n)+g*O(n)+h*E(n)+r*D(n);return{x:S,y:G}}static getPointOnQuadraticBezier(n,s,r,o,h,c,g){function p(D){return D*D}function b(D){return 2*D*(1-D)}function R(D){return(1-D)*(1-D)}const O=c*p(n)+o*b(n)+s*R(n),E=g*p(n)+h*b(n)+r*R(n);return{x:O,y:E}}static getPointOnEllipticalArc(n,s,r,o,h,c){const g=Math.cos(c),p=Math.sin(c),b={x:r*Math.cos(h),y:o*Math.sin(h)};return{x:n+(b.x*g-b.y*p),y:s+(b.x*p+b.y*g)}}static parsePathData(n){if(!n)return[];let s=n;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(let O=0;O<r.length;O++)s=s.replace(new RegExp(r[O],"g"),"|"+r[O]);const o=s.split("|"),h=[],c=[];let g=0,p=0;const b=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let R;for(let O=1;O<o.length;O++){let E=o[O],D=E.charAt(0);for(E=E.slice(1),c.length=0;R=b.exec(E);)c.push(R[0]);let S=[],G=D==="A"||D==="a"?0:-1;for(let w=0,j=c.length;w<j;w++){const U=c[w];if(U==="00"){S.push(0,0),G>=0&&(G+=2,G>=7&&(G-=7));continue}if(G>=0){if(G===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(U)){S.push(parseInt(U[0],10)),S.push(parseInt(U[1],10)),S.push(parseFloat(U.slice(2))),G+=3,G>=7&&(G-=7);continue}if(U==="11"||U==="10"||U==="01"){S.push(parseInt(U[0],10)),S.push(parseInt(U[1],10)),G+=2,G>=7&&(G-=7);continue}if(U==="0"||U==="1"){S.push(parseInt(U,10)),G+=1,G>=7&&(G-=7);continue}}else if(G===4){if(/^[01]\d+(?:\.\d+)?$/.test(U)){S.push(parseInt(U[0],10)),S.push(parseFloat(U.slice(1))),G+=2,G>=7&&(G-=7);continue}if(U==="0"||U==="1"){S.push(parseInt(U,10)),G+=1,G>=7&&(G-=7);continue}}const z=parseFloat(U);isNaN(z)?S.push(0):S.push(z),G+=1,G>=7&&(G-=7)}else{const z=parseFloat(U);isNaN(z)?S.push(0):S.push(z)}}for(;S.length>0&&!isNaN(S[0]);){let w="",j=[];const U=g,z=p;let L,M,A,T,y,B,N,q,I,Z;switch(D){case"l":g+=S.shift(),p+=S.shift(),w="L",j.push(g,p);break;case"L":g=S.shift(),p=S.shift(),j.push(g,p);break;case"m":const K=S.shift(),P=S.shift();if(g+=K,p+=P,w="M",h.length>2&&h[h.length-1].command==="z"){for(let x=h.length-2;x>=0;x--)if(h[x].command==="M"){g=h[x].points[0]+K,p=h[x].points[1]+P;break}}j.push(g,p),D="l";break;case"M":g=S.shift(),p=S.shift(),w="M",j.push(g,p),D="L";break;case"h":g+=S.shift(),w="L",j.push(g,p);break;case"H":g=S.shift(),w="L",j.push(g,p);break;case"v":p+=S.shift(),w="L",j.push(g,p);break;case"V":p=S.shift(),w="L",j.push(g,p);break;case"C":j.push(S.shift(),S.shift(),S.shift(),S.shift()),g=S.shift(),p=S.shift(),j.push(g,p);break;case"c":j.push(g+S.shift(),p+S.shift(),g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="C",j.push(g,p);break;case"S":M=g,A=p,L=h[h.length-1],L.command==="C"&&(M=g+(g-L.points[2]),A=p+(p-L.points[3])),j.push(M,A,S.shift(),S.shift()),g=S.shift(),p=S.shift(),w="C",j.push(g,p);break;case"s":M=g,A=p,L=h[h.length-1],L.command==="C"&&(M=g+(g-L.points[2]),A=p+(p-L.points[3])),j.push(M,A,g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="C",j.push(g,p);break;case"Q":j.push(S.shift(),S.shift()),g=S.shift(),p=S.shift(),j.push(g,p);break;case"q":j.push(g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="Q",j.push(g,p);break;case"T":M=g,A=p,L=h[h.length-1],L.command==="Q"&&(M=g+(g-L.points[0]),A=p+(p-L.points[1])),g=S.shift(),p=S.shift(),w="Q",j.push(M,A,g,p);break;case"t":M=g,A=p,L=h[h.length-1],L.command==="Q"&&(M=g+(g-L.points[0]),A=p+(p-L.points[1])),g+=S.shift(),p+=S.shift(),w="Q",j.push(M,A,g,p);break;case"A":T=S.shift(),y=S.shift(),B=S.shift(),N=S.shift(),q=S.shift(),I=g,Z=p,g=S.shift(),p=S.shift(),w="A",j=this.convertEndpointToCenterParameterization(I,Z,g,p,N,q,T,y,B);break;case"a":T=S.shift(),y=S.shift(),B=S.shift(),N=S.shift(),q=S.shift(),I=g,Z=p,g+=S.shift(),p+=S.shift(),w="A",j=this.convertEndpointToCenterParameterization(I,Z,g,p,N,q,T,y,B);break}h.push({command:w||D,points:j,start:{x:U,y:z},pathLength:this.calcLength(U,z,w||D,j)})}(D==="z"||D==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(n,s,r,o){let h,c,g,p;const b=$e;switch(r){case"L":return b.getLineLength(n,s,o[0],o[1]);case"C":return pg([n,o[0],o[2],o[4]],[s,o[1],o[3],o[5]],1);case"Q":return gg([n,o[0],o[2]],[s,o[1],o[3]],1);case"A":h=0;const R=o[4],O=o[5],E=o[4]+O;let D=Math.PI/180;if(Math.abs(R-E)<D&&(D=Math.abs(R-E)),c=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],R,0),O<0)for(p=R-D;p>E;p-=D)g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],p,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),c=g;else for(p=R+D;p<E;p+=D)g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],p,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),c=g;return g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],E,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),h}return 0}static convertEndpointToCenterParameterization(n,s,r,o,h,c,g,p,b){const R=b*(Math.PI/180),O=Math.cos(R)*(n-r)/2+Math.sin(R)*(s-o)/2,E=-1*Math.sin(R)*(n-r)/2+Math.cos(R)*(s-o)/2,D=O*O/(g*g)+E*E/(p*p);D>1&&(g*=Math.sqrt(D),p*=Math.sqrt(D));let S=Math.sqrt((g*g*(p*p)-g*g*(E*E)-p*p*(O*O))/(g*g*(E*E)+p*p*(O*O)));h===c&&(S*=-1),isNaN(S)&&(S=0);const G=S*g*E/p,w=S*-p*O/g,j=(n+r)/2+Math.cos(R)*G-Math.sin(R)*w,U=(s+o)/2+Math.sin(R)*G+Math.cos(R)*w,z=function(N){return Math.sqrt(N[0]*N[0]+N[1]*N[1])},L=function(N,q){return(N[0]*q[0]+N[1]*q[1])/(z(N)*z(q))},M=function(N,q){return(N[0]*q[1]<N[1]*q[0]?-1:1)*Math.acos(L(N,q))},A=M([1,0],[(O-G)/g,(E-w)/p]),T=[(O-G)/g,(E-w)/p],y=[(-1*O-G)/g,(-1*E-w)/p];let B=M(T,y);return L(T,y)<=-1&&(B=Math.PI),L(T,y)>=1&&(B=0),c===0&&B>0&&(B=B-2*Math.PI),c===1&&B<0&&(B=B+2*Math.PI),[j,U,g,p,A,B,R,c]}}$e.prototype.className="Path";$e.prototype._attrsAffectingSize=["data"];hn($e);lt.addGetterSetter($e,"data");class Go extends jr{_sceneFunc(n){super._sceneFunc(n);const s=Math.PI*2,r=this.points();let o=r;const h=this.tension()!==0&&r.length>4;h&&(o=this.getTensionPoints());const c=this.pointerLength(),g=r.length;let p,b;if(h){const E=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],r[g-2],r[g-1]],D=$e.calcLength(o[o.length-4],o[o.length-3],"C",E),S=$e.getPointOnQuadraticBezier(Math.min(1,1-c/D),E[0],E[1],E[2],E[3],E[4],E[5]);p=r[g-2]-S.x,b=r[g-1]-S.y}else p=r[g-2]-r[g-4],b=r[g-1]-r[g-3];const R=(Math.atan2(b,p)+s)%s,O=this.pointerWidth();this.pointerAtEnding()&&(n.save(),n.beginPath(),n.translate(r[g-2],r[g-1]),n.rotate(R),n.moveTo(0,0),n.lineTo(-c,O/2),n.lineTo(-c,-O/2),n.closePath(),n.restore(),this.__fillStroke(n)),this.pointerAtBeginning()&&(n.save(),n.beginPath(),n.translate(r[0],r[1]),h?(p=(o[0]+o[2])/2-r[0],b=(o[1]+o[3])/2-r[1]):(p=r[2]-r[0],b=r[3]-r[1]),n.rotate((Math.atan2(-b,-p)+s)%s),n.moveTo(0,0),n.lineTo(-c,O/2),n.lineTo(-c,-O/2),n.closePath(),n.restore(),this.__fillStroke(n))}__fillStroke(n){const s=this.dashEnabled();s&&(this.attrs.dashEnabled=!1,n.setLineDash([])),n.fillStrokeShape(this),s&&(this.attrs.dashEnabled=!0)}getSelfRect(){const n=super.getSelfRect(),s=this.pointerWidth()/2;return{x:n.x,y:n.y-s,width:n.width,height:n.height+s*2}}}Go.prototype.className="Arrow";hn(Go);lt.addGetterSetter(Go,"pointerLength",10,wt());lt.addGetterSetter(Go,"pointerWidth",10,wt());lt.addGetterSetter(Go,"pointerAtBeginning",!1);lt.addGetterSetter(Go,"pointerAtEnding",!0);class mc extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius()!==n/2&&this.radius(n/2)}setHeight(n){this.radius()!==n/2&&this.radius(n/2)}}mc.prototype._centroid=!0;mc.prototype.className="Circle";mc.prototype._attrsAffectingSize=["radius"];hn(mc);lt.addGetterSetter(mc,"radius",0,wt());class zs extends Bt{_sceneFunc(n){const s=this.radiusX(),r=this.radiusY();n.beginPath(),n.save(),s!==r&&n.scale(1,r/s),n.arc(0,0,s,0,Math.PI*2,!1),n.restore(),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(n){this.radiusX(n/2)}setHeight(n){this.radiusY(n/2)}}zs.prototype.className="Ellipse";zs.prototype._centroid=!0;zs.prototype._attrsAffectingSize=["radiusX","radiusY"];hn(zs);lt.addComponentsGetterSetter(zs,"radius",["x","y"]);lt.addGetterSetter(zs,"radiusX",0,wt());lt.addGetterSetter(zs,"radiusY",0,wt());class ii extends Bt{constructor(n){super(n),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",s=>{this._removeImageLoad(s.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const n=this.image();n&&n.complete||n&&n.readyState===4||n&&n.addEventListener&&n.addEventListener("load",this._loadListener)}_removeImageLoad(n){n&&n.removeEventListener&&n.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const n=!!this.cornerRadius(),s=this.hasShadow();return n&&s?!0:super._useBufferCanvas(!0)}_sceneFunc(n){const s=this.getWidth(),r=this.getHeight(),o=this.cornerRadius(),h=this.attrs.image;let c;if(h){const g=this.attrs.cropWidth,p=this.attrs.cropHeight;g&&p?c=[h,this.cropX(),this.cropY(),g,p,0,0,s,r]:c=[h,0,0,s,r]}(this.hasFill()||this.hasStroke()||o)&&(n.beginPath(),o?pt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)),h&&(o&&n.clip(),n.drawImage.apply(n,c))}_hitFunc(n){const s=this.width(),r=this.height(),o=this.cornerRadius();n.beginPath(),o?pt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}getWidth(){var n,s,r;return(r=(n=this.attrs.width)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.width)!==null&&r!==void 0?r:0}getHeight(){var n,s,r;return(r=(n=this.attrs.height)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.height)!==null&&r!==void 0?r:0}static fromURL(n,s,r=null){const o=pt.createImageElement();o.onload=function(){const h=new ii({image:o});s(h)},o.onerror=r,o.crossOrigin="Anonymous",o.src=n}}ii.prototype.className="Image";ii.prototype._attrsAffectingSize=["image"];hn(ii);lt.addGetterSetter(ii,"cornerRadius",0,l0(4));lt.addGetterSetter(ii,"image");lt.addComponentsGetterSetter(ii,"crop",["x","y","width","height"]);lt.addGetterSetter(ii,"cropX",0,wt());lt.addGetterSetter(ii,"cropY",0,wt());lt.addGetterSetter(ii,"cropWidth",0,wt());lt.addGetterSetter(ii,"cropHeight",0,wt());const Cm=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Wy="Change.konva",$y="none",Rp="up",Mp="right",xp="down",Np="left",t4=Cm.length;class Yp extends cc{constructor(n){super(n),this.on("add.konva",function(s){this._addListeners(s.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(n){let s=this,r;const o=function(){s._sync()};for(r=0;r<t4;r++)n.on(Cm[r]+Wy,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let n=this.getText(),s=this.getTag(),r,o,h,c,g,p,b;if(n&&s){switch(r=n.width(),o=n.height(),h=s.pointerDirection(),c=s.pointerWidth(),b=s.pointerHeight(),g=0,p=0,h){case Rp:g=r/2,p=-1*b;break;case Mp:g=r+c,p=o/2;break;case xp:g=r/2,p=o+b;break;case Np:g=-1*c,p=o/2;break}s.setAttrs({x:-1*g,y:-1*p,width:r,height:o}),n.setAttrs({x:-1*g,y:-1*p})}}}Yp.prototype.className="Label";hn(Yp);class Bo extends Bt{_sceneFunc(n){const s=this.width(),r=this.height(),o=this.pointerDirection(),h=this.pointerWidth(),c=this.pointerHeight(),g=this.cornerRadius();let p=0,b=0,R=0,O=0;typeof g=="number"?p=b=R=O=Math.min(g,s/2,r/2):(p=Math.min(g[0]||0,s/2,r/2),b=Math.min(g[1]||0,s/2,r/2),O=Math.min(g[2]||0,s/2,r/2),R=Math.min(g[3]||0,s/2,r/2)),n.beginPath(),n.moveTo(p,0),o===Rp&&(n.lineTo((s-h)/2,0),n.lineTo(s/2,-1*c),n.lineTo((s+h)/2,0)),n.lineTo(s-b,0),n.arc(s-b,b,b,Math.PI*3/2,0,!1),o===Mp&&(n.lineTo(s,(r-c)/2),n.lineTo(s+h,r/2),n.lineTo(s,(r+c)/2)),n.lineTo(s,r-O),n.arc(s-O,r-O,O,0,Math.PI/2,!1),o===xp&&(n.lineTo((s+h)/2,r),n.lineTo(s/2,r+c),n.lineTo((s-h)/2,r)),n.lineTo(R,r),n.arc(R,r-R,R,Math.PI/2,Math.PI,!1),o===Np&&(n.lineTo(0,(r+c)/2),n.lineTo(-1*h,r/2),n.lineTo(0,(r-c)/2)),n.lineTo(0,p),n.arc(p,p,p,Math.PI,Math.PI*3/2,!1),n.closePath(),n.fillStrokeShape(this)}getSelfRect(){let n=0,s=0,r=this.pointerWidth(),o=this.pointerHeight(),h=this.pointerDirection(),c=this.width(),g=this.height();return h===Rp?(s-=o,g+=o):h===xp?g+=o:h===Np?(n-=r*1.5,c+=r):h===Mp&&(c+=r*1.5),{x:n,y:s,width:c,height:g}}}Bo.prototype.className="Tag";hn(Bo);lt.addGetterSetter(Bo,"pointerDirection",$y);lt.addGetterSetter(Bo,"pointerWidth",0,wt());lt.addGetterSetter(Bo,"pointerHeight",0,wt());lt.addGetterSetter(Bo,"cornerRadius",0,l0(4));class oh extends Bt{_sceneFunc(n){const s=this.cornerRadius(),r=this.width(),o=this.height();n.beginPath(),s?pt.drawRoundedRectPath(n,r,o,s):n.rect(0,0,r,o),n.closePath(),n.fillStrokeShape(this)}}oh.prototype.className="Rect";hn(oh);lt.addGetterSetter(oh,"cornerRadius",0,l0(4));class Us extends Bt{_sceneFunc(n){const s=this._getPoints(),r=this.radius(),o=this.sides(),h=this.cornerRadius();if(n.beginPath(),h)pt.drawRoundedPolygonPath(n,s,o,r,h);else{n.moveTo(s[0].x,s[0].y);for(let c=1;c<s.length;c++)n.lineTo(s[c].x,s[c].y)}n.closePath(),n.fillStrokeShape(this)}_getPoints(){const n=this.attrs.sides,s=this.attrs.radius||0,r=[];for(let o=0;o<n;o++)r.push({x:s*Math.sin(o*2*Math.PI/n),y:-1*s*Math.cos(o*2*Math.PI/n)});return r}getSelfRect(){const n=this._getPoints();let s=n[0].x,r=n[0].y,o=n[0].x,h=n[0].y;return n.forEach(c=>{s=Math.min(s,c.x),r=Math.max(r,c.x),o=Math.min(o,c.y),h=Math.max(h,c.y)}),{x:s,y:o,width:r-s,height:h-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Us.prototype.className="RegularPolygon";Us.prototype._centroid=!0;Us.prototype._attrsAffectingSize=["radius"];hn(Us);lt.addGetterSetter(Us,"radius",0,wt());lt.addGetterSetter(Us,"sides",0,wt());lt.addGetterSetter(Us,"cornerRadius",0,l0(4));const vg=Math.PI*2;class Ho extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.innerRadius(),0,vg,!1),n.moveTo(this.outerRadius(),0),n.arc(0,0,this.outerRadius(),vg,0,!0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}Ho.prototype.className="Ring";Ho.prototype._centroid=!0;Ho.prototype._attrsAffectingSize=["innerRadius","outerRadius"];hn(Ho);lt.addGetterSetter(Ho,"innerRadius",0,wt());lt.addGetterSetter(Ho,"outerRadius",0,wt());class jl extends Bt{constructor(n){super(n),this._updated=!0,this.anim=new zi(()=>{const s=this._updated;return this._updated=!1,s}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,h=this.animations()[s],c=this.frameOffsets(),g=h[o+0],p=h[o+1],b=h[o+2],R=h[o+3],O=this.image();if((this.hasFill()||this.hasStroke())&&(n.beginPath(),n.rect(0,0,b,R),n.closePath(),n.fillStrokeShape(this)),O)if(c){const E=c[s],D=r*2;n.drawImage(O,g,p,b,R,E[D+0],E[D+1],b,R)}else n.drawImage(O,g,p,b,R,0,0,b,R)}_hitFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,h=this.animations()[s],c=this.frameOffsets(),g=h[o+2],p=h[o+3];if(n.beginPath(),c){const b=c[s],R=r*2;n.rect(b[R+0],b[R+1],g,p)}else n.rect(0,0,g,p);n.closePath(),n.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const n=this;this.interval=setInterval(function(){n._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const n=this.getLayer();this.anim.setLayers(n),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const n=this.frameIndex(),s=this.animation(),r=this.animations(),o=r[s],h=o.length/4;n<h-1?this.frameIndex(n+1):this.frameIndex(0)}}jl.prototype.className="Sprite";hn(jl);lt.addGetterSetter(jl,"animation");lt.addGetterSetter(jl,"animations");lt.addGetterSetter(jl,"frameOffsets");lt.addGetterSetter(jl,"image");lt.addGetterSetter(jl,"frameIndex",0,wt());lt.addGetterSetter(jl,"frameRate",17,wt());lt.backCompat(jl,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Gs extends Bt{_sceneFunc(n){const s=this.innerRadius(),r=this.outerRadius(),o=this.numPoints();n.beginPath(),n.moveTo(0,0-r);for(let h=1;h<o*2;h++){const c=h%2===0?r:s,g=c*Math.sin(h*Math.PI/o),p=-1*c*Math.cos(h*Math.PI/o);n.lineTo(g,p)}n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}Gs.prototype.className="Star";Gs.prototype._centroid=!0;Gs.prototype._attrsAffectingSize=["innerRadius","outerRadius"];hn(Gs);lt.addGetterSetter(Gs,"numPoints",5,wt());lt.addGetterSetter(Gs,"innerRadius",0,wt());lt.addGetterSetter(Gs,"outerRadius",0,wt());function Ms(d){return[...d].reduce((n,s,r,o)=>{if(new RegExp("\\p{Emoji}","u").test(s)){const h=o[r+1];h&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(h)?(n.push(s+h),o[r+1]=""):n.push(s)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(s+(o[r+1]||""))?n.push(s+o[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(s)?n[n.length-1]+=s:s&&n.push(s);return n},[])}const rc="auto",e4="center",Em="inherit",sc="justify",n4="Change.konva",a4="2d",yg="-",Tm="left",i4="text",l4="Text",r4="top",s4="bottom",Sg="middle",Am="normal",o4="px ",Qd=" ",u4="right",bg="rtl",c4="word",f4="char",Cg="none",lp="…",_m=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],h4=_m.length;function d4(d){return d.split(",").map(n=>{n=n.trim();const s=n.indexOf(" ")>=0,r=n.indexOf('"')>=0||n.indexOf("'")>=0;return s&&!r&&(n=`"${n}"`),n}).join(", ")}let Kd;function rp(){return Kd||(Kd=pt.createCanvasElement().getContext(a4),Kd)}function p4(d){d.fillText(this._partialText,this._partialTextX,this._partialTextY)}function g4(d){d.setAttr("miterLimit",2),d.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function m4(d){return d=d||{},!d.fillLinearGradientColorStops&&!d.fillRadialGradientColorStops&&!d.fillPatternImage&&(d.fill=d.fill||"black"),d}class an extends Bt{constructor(n){super(m4(n)),this._partialTextX=0,this._partialTextY=0;for(let s=0;s<h4;s++)this.on(_m[s]+n4,this._setTextData);this._setTextData()}_sceneFunc(n){var s,r;const o=this.textArr,h=o.length;if(!this.text())return;let c=this.padding(),g=this.fontSize(),p=this.lineHeight()*g,b=this.verticalAlign(),R=this.direction(),O=0,E=this.align(),D=this.getWidth(),S=this.letterSpacing(),G=this.charRenderFunc(),w=this.fill(),j=this.textDecoration(),U=j.indexOf("underline")!==-1,z=j.indexOf("line-through")!==-1,L;R=R===Em?n.direction:R;let M=p/2,A=Sg;if(!qt.legacyTextRendering){const T=this.measureSize("M");A="alphabetic";const y=(s=T.fontBoundingBoxAscent)!==null&&s!==void 0?s:T.actualBoundingBoxAscent,B=(r=T.fontBoundingBoxDescent)!==null&&r!==void 0?r:T.actualBoundingBoxDescent;M=(y-B)/2+p/2}for(R===bg&&n.setAttr("direction",R),n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",A),n.setAttr("textAlign",Tm),b===Sg?O=(this.getHeight()-h*p-c*2)/2:b===s4&&(O=this.getHeight()-h*p-c*2),n.translate(c,O+c),L=0;L<h;L++){let T=0,y=0;const B=o[L],N=B.text,q=B.width,I=B.lastInParagraph;if(n.save(),E===u4?T+=D-q-c*2:E===e4&&(T+=(D-q-c*2)/2),U){n.save(),n.beginPath();const Z=qt.legacyTextRendering?Math.round(g/2):Math.round(g/4),K=T,P=M+y+Z;n.moveTo(K,P);const x=E===sc&&!I?D-c*2:q;n.lineTo(K+Math.round(x),P),n.lineWidth=g/15;const Y=this._getLinearGradient();n.strokeStyle=Y||w,n.stroke(),n.restore()}if(R!==bg&&(S!==0||E===sc||G)){const Z=N.split(" ").length-1,K=Ms(N);for(let P=0;P<K.length;P++){const x=K[P];if(x===" "&&!I&&E===sc&&(T+=(D-c*2-q)/Z),this._partialTextX=T,this._partialTextY=M+y,this._partialText=x,G){n.save();const Q=o.slice(0,L).reduce((nt,F)=>nt+Ms(F.text).length,0),W=P+Q;G({char:x,index:W,x:T,y:M+y,lineIndex:L,column:P,isLastInLine:I,width:this.measureSize(x).width,context:n})}n.fillStrokeShape(this),G&&n.restore(),T+=this.measureSize(x).width+S}}else S!==0&&n.setAttr("letterSpacing",`${S}px`),this._partialTextX=T,this._partialTextY=M+y,this._partialText=N,n.fillStrokeShape(this);if(z){n.save(),n.beginPath();const Z=qt.legacyTextRendering?0:-Math.round(g/4),K=E===sc?0:T;n.moveTo(K,M+y+Z);const P=E===sc&&!I?D-c*2:q;n.lineTo(K+Math.round(P),M+y+Z),n.lineWidth=g/15;const x=this._getLinearGradient();n.strokeStyle=x||w,n.stroke(),n.restore()}n.restore(),h>1&&(M+=p)}}_hitFunc(n){const s=this.getWidth(),r=this.getHeight();n.beginPath(),n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}setText(n){const s=pt._isString(n)?n:n==null?"":n+"";return this._setAttr(i4,s),this}getWidth(){return this.attrs.width===rc||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===rc||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return pt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(n){var s,r,o,h,c,g,p,b,R,O,E;let D=rp(),S=this.fontSize(),G;D.save(),D.font=this._getContextFont(),G=D.measureText(n),D.restore();const w=S/100;return{actualBoundingBoxAscent:(s=G.actualBoundingBoxAscent)!==null&&s!==void 0?s:71.58203125*w,actualBoundingBoxDescent:(r=G.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(o=G.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*w,actualBoundingBoxRight:(h=G.actualBoundingBoxRight)!==null&&h!==void 0?h:75.732421875*w,alphabeticBaseline:(c=G.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(g=G.emHeightAscent)!==null&&g!==void 0?g:100*w,emHeightDescent:(p=G.emHeightDescent)!==null&&p!==void 0?p:-20*w,fontBoundingBoxAscent:(b=G.fontBoundingBoxAscent)!==null&&b!==void 0?b:91*w,fontBoundingBoxDescent:(R=G.fontBoundingBoxDescent)!==null&&R!==void 0?R:21*w,hangingBaseline:(O=G.hangingBaseline)!==null&&O!==void 0?O:72.80000305175781*w,ideographicBaseline:(E=G.ideographicBaseline)!==null&&E!==void 0?E:-21*w,width:G.width,height:S}}_getContextFont(){return this.fontStyle()+Qd+this.fontVariant()+Qd+(this.fontSize()+o4)+d4(this.fontFamily())}_addTextLine(n){this.align()===sc&&(n=n.trim());const r=this._getTextWidth(n);return this.textArr.push({text:n,width:r,lastInParagraph:!1})}_getTextWidth(n){const s=this.letterSpacing(),r=n.length;return rp().measureText(n).width+s*r}_setTextData(){let n=this.text().split(`
`),s=+this.fontSize(),r=0,o=this.lineHeight()*s,h=this.attrs.width,c=this.attrs.height,g=h!==rc&&h!==void 0,p=c!==rc&&c!==void 0,b=this.padding(),R=h-b*2,O=c-b*2,E=0,D=this.wrap(),S=D!==Cg,G=D!==f4&&S,w=this.ellipsis();this.textArr=[],rp().font=this._getContextFont();const j=w?this._getTextWidth(lp):0;for(let U=0,z=n.length;U<z;++U){let L=n[U],M=this._getTextWidth(L);if(g&&M>R)for(;L.length>0;){let A=0,T=Ms(L).length,y="",B=0;for(;A<T;){const N=A+T>>>1,q=Ms(L),I=q.slice(0,N+1).join(""),Z=this._getTextWidth(I);(w&&p&&E+o>O?Z+j:Z)<=R?(A=N+1,y=I,B=Z):T=N}if(y){if(G){const I=Ms(L),Z=Ms(y),K=I[Z.length],P=K===Qd||K===yg;let x;if(P&&B<=R)x=Z.length;else{const Y=Z.lastIndexOf(Qd),Q=Z.lastIndexOf(yg);x=Math.max(Y,Q)+1}x>0&&(A=x,y=I.slice(0,A).join(""),B=this._getTextWidth(y))}if(y=y.trimRight(),this._addTextLine(y),r=Math.max(r,B),E+=o,this._shouldHandleEllipsis(E)){this._tryToAddEllipsisToLastLine();break}if(L=Ms(L).slice(A).join("").trimLeft(),L.length>0&&(M=this._getTextWidth(L),M<=R)){this._addTextLine(L),E+=o,r=Math.max(r,M);break}}else break}else this._addTextLine(L),E+=o,r=Math.max(r,M),this._shouldHandleEllipsis(E)&&U<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),p&&E+o>O)break}this.textHeight=s,this.textWidth=r}_shouldHandleEllipsis(n){const s=+this.fontSize(),r=this.lineHeight()*s,o=this.attrs.height,h=o!==rc&&o!==void 0,c=this.padding(),g=o-c*2;return!(this.wrap()!==Cg)||h&&n+r>g}_tryToAddEllipsisToLastLine(){const n=this.attrs.width,s=n!==rc&&n!==void 0,r=this.padding(),o=n-r*2,h=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!h||(s&&(this._getTextWidth(c.text+lp)<o||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+lp))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const n=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,s=this.hasShadow();return n&&s?!0:super._useBufferCanvas()}}an.prototype._fillFunc=p4;an.prototype._strokeFunc=g4;an.prototype.className=l4;an.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];hn(an);lt.overWriteSetter(an,"width",jp());lt.overWriteSetter(an,"height",jp());lt.addGetterSetter(an,"direction",Em);lt.addGetterSetter(an,"fontFamily","Arial");lt.addGetterSetter(an,"fontSize",12,wt());lt.addGetterSetter(an,"fontStyle",Am);lt.addGetterSetter(an,"fontVariant",Am);lt.addGetterSetter(an,"padding",0,wt());lt.addGetterSetter(an,"align",Tm);lt.addGetterSetter(an,"verticalAlign",r4);lt.addGetterSetter(an,"lineHeight",1,wt());lt.addGetterSetter(an,"wrap",c4);lt.addGetterSetter(an,"ellipsis",!1,il());lt.addGetterSetter(an,"letterSpacing",0,wt());lt.addGetterSetter(an,"text","",zo());lt.addGetterSetter(an,"textDecoration","");lt.addGetterSetter(an,"charRenderFunc",void 0);const v4="",Om="normal";function Rm(d){d.fillText(this.partialText,0,0)}function Mm(d){d.strokeText(this.partialText,0,0)}class Pn extends Bt{constructor(n){super(n),this.dummyCanvas=pt.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return $e.getPathLength(this.dataArray)}_getPointAtLength(n){if(!this.attrs.data)return null;const s=this.pathLength;return n>s?null:$e.getPointAtLengthOfDataArray(n,this.dataArray)}_readDataAttribute(){this.dataArray=$e.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(n){n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",this.textBaseline()),n.setAttr("textAlign","left"),n.save();const s=this.textDecoration(),r=this.fill(),o=this.fontSize(),h=this.glyphInfo,c=s.indexOf("underline")!==-1,g=s.indexOf("line-through")!==-1;c&&n.beginPath();for(let p=0;p<h.length;p++){n.save();const b=h[p].p0;n.translate(b.x,b.y),n.rotate(h[p].rotation),this.partialText=h[p].text,n.fillStrokeShape(this),c&&(p===0&&n.moveTo(0,o/2+1),n.lineTo(h[p].width,o/2+1)),n.restore()}if(c&&(n.strokeStyle=r,n.lineWidth=o/20,n.stroke()),g){n.beginPath();for(let p=0;p<h.length;p++){n.save();const b=h[p].p0;n.translate(b.x,b.y),n.rotate(h[p].rotation),p===0&&n.moveTo(0,0),n.lineTo(h[p].width,0),n.restore()}n.strokeStyle=r,n.lineWidth=o/20,n.stroke()}n.restore()}_hitFunc(n){n.beginPath();const s=this.glyphInfo;if(s.length>=1){const r=s[0].p0;n.moveTo(r.x,r.y)}for(let r=0;r<s.length;r++){const o=s[r].p1;n.lineTo(o.x,o.y)}n.setAttr("lineWidth",this.fontSize()),n.setAttr("strokeStyle",this.colorKey),n.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return pt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(n){return an.prototype.setText.call(this,n)}_getContextFont(){return an.prototype._getContextFont.call(this)}_getTextSize(n){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const o=r.measureText(n);return r.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const n=Ms(this.text()),s=[];let r=0;for(let O=0;O<n.length;O++)s.push({char:n[O],width:this._getTextSize(n[O]).width}),r+=s[O].width;const{height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=r,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const h=this.letterSpacing(),c=this.align(),g=this.kerningFunc(),p=Math.max(this.textWidth+((this.attrs.text||"").length-1)*h,0);let b=0;c==="center"&&(b=Math.max(0,this.pathLength/2-p/2)),c==="right"&&(b=Math.max(0,this.pathLength-p));let R=b;for(let O=0;O<s.length;O++){const E=this._getPointAtLength(R);if(!E)return;const D=s[O].char;let S=s[O].width+h;if(D===" "&&c==="justify"){const L=this.text().split(" ").length-1;S+=(this.pathLength-p)/L}const G=this._getPointAtLength(R+S);if(!G)return;const w=$e.getLineLength(E.x,E.y,G.x,G.y);let j=0;if(g)try{j=g(s[O-1].char,D)*this.fontSize()}catch{j=0}E.x+=j,G.x+=j,this.textWidth+=j;const U=$e.getPointOnLine(j+w/2,E.x,E.y,G.x,G.y),z=Math.atan2(G.y-E.y,G.x-E.x);this.glyphInfo.push({transposeX:U.x,transposeY:U.y,text:n[O],rotation:z,p0:E,p1:G,width:w}),R+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const n=[];this.glyphInfo.forEach(function(b){n.push(b.p0.x),n.push(b.p0.y),n.push(b.p1.x),n.push(b.p1.y)});let s=n[0]||0,r=n[0]||0,o=n[1]||0,h=n[1]||0,c,g;for(let b=0;b<n.length/2;b++)c=n[b*2],g=n[b*2+1],s=Math.min(s,c),r=Math.max(r,c),o=Math.min(o,g),h=Math.max(h,g);const p=this.fontSize();return{x:s-p/2,y:o-p/2,width:r-s+p,height:h-o+p}}destroy(){return pt.releaseCanvas(this.dummyCanvas),super.destroy()}}Pn.prototype._fillFunc=Rm;Pn.prototype._strokeFunc=Mm;Pn.prototype._fillFuncHit=Rm;Pn.prototype._strokeFuncHit=Mm;Pn.prototype.className="TextPath";Pn.prototype._attrsAffectingSize=["text","fontSize","data"];hn(Pn);lt.addGetterSetter(Pn,"data");lt.addGetterSetter(Pn,"fontFamily","Arial");lt.addGetterSetter(Pn,"fontSize",12,wt());lt.addGetterSetter(Pn,"fontStyle",Om);lt.addGetterSetter(Pn,"align","left");lt.addGetterSetter(Pn,"letterSpacing",0,wt());lt.addGetterSetter(Pn,"textBaseline","middle");lt.addGetterSetter(Pn,"fontVariant",Om);lt.addGetterSetter(Pn,"text",v4);lt.addGetterSetter(Pn,"textDecoration","");lt.addGetterSetter(Pn,"kerningFunc",void 0);const xm="tr-konva",y4=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(d=>d+`.${xm}`).join(" "),Eg="nodesRect",S4=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],b4={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},C4="ontouchstart"in qt._global;function E4(d,n,s){if(d==="rotater")return s;n+=pt.degToRad(b4[d]||0);const r=(pt.radToDeg(n)%360+360)%360;return pt._inRange(r,315+22.5,360)||pt._inRange(r,0,22.5)?"ns-resize":pt._inRange(r,45-22.5,45+22.5)?"nesw-resize":pt._inRange(r,90-22.5,90+22.5)?"ew-resize":pt._inRange(r,135-22.5,135+22.5)?"nwse-resize":pt._inRange(r,180-22.5,180+22.5)?"ns-resize":pt._inRange(r,225-22.5,225+22.5)?"nesw-resize":pt._inRange(r,270-22.5,270+22.5)?"ew-resize":pt._inRange(r,315-22.5,315+22.5)?"nwse-resize":(pt.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const kd=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T4(d){return{x:d.x+d.width/2*Math.cos(d.rotation)+d.height/2*Math.sin(-d.rotation),y:d.y+d.height/2*Math.cos(d.rotation)+d.width/2*Math.sin(d.rotation)}}function Nm(d,n,s){const r=s.x+(d.x-s.x)*Math.cos(n)-(d.y-s.y)*Math.sin(n),o=s.y+(d.x-s.x)*Math.sin(n)+(d.y-s.y)*Math.cos(n);return{...d,rotation:d.rotation+n,x:r,y:o}}function A4(d,n){const s=T4(d);return Nm(d,n,s)}function _4(d,n,s){let r=n;for(let o=0;o<d.length;o++){const h=qt.getAngle(d[o]),c=Math.abs(h-n)%(Math.PI*2);Math.min(c,Math.PI*2-c)<s&&(r=h)}return r}let Dp=0;class Ee extends cc{constructor(n){super(n),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(y4,this.update),this.getNode()&&this.update()}attachTo(n){return this.setNode(n),this}setNode(n){return pt.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([n])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return xm+this._id}setNodes(n=[]){this._nodes&&this._nodes.length&&this.detach();const s=n.filter(o=>o.isAncestorOf(this)?(pt.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=n=s,n.length===1&&this.useSingleNodeRotation()?this.rotation(n[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const h=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(o._attrsAffectingSize.length){const c=o._attrsAffectingSize.map(g=>g+"Change."+this._getEventNamespace()).join(" ");o.on(c,h)}o.on(S4.map(c=>c+`.${this._getEventNamespace()}`).join(" "),h),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(n){let s;n.on(`dragstart.${this._getEventNamespace()}`,r=>{s=n.getAbsolutePosition(),!this.isDragging()&&n!==this.findOne(".back")&&this.startDrag(r,!1)}),n.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!s)return;const o=n.getAbsolutePosition(),h=o.x-s.x,c=o.y-s.y;this.nodes().forEach(g=>{if(g===n||g.isDragging())return;const p=g.getAbsolutePosition();g.setAbsolutePosition({x:p.x+h,y:p.y+c}),g.startDrag(r)}),s=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(n=>{n.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Eg),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Eg,this.__getNodeRect)}__getNodeShape(n,s=this.rotation(),r){const o=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=n.getAbsoluteScale(r),c=n.getAbsolutePosition(r),g=o.x*h.x-n.offsetX()*h.x,p=o.y*h.y-n.offsetY()*h.y,b=(qt.getAngle(n.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),R={x:c.x+g*Math.cos(b)+p*Math.sin(-b),y:c.y+p*Math.cos(b)+g*Math.sin(b),width:o.width*h.x,height:o.height*h.y,rotation:b};return Nm(R,-qt.getAngle(s),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const s=[];this.nodes().map(b=>{const R=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),O=[{x:R.x,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x+R.width,y:R.y+R.height},{x:R.x,y:R.y+R.height}],E=b.getAbsoluteTransform();O.forEach(function(D){const S=E.point(D);s.push(S)})});const r=new ni;r.rotate(-qt.getAngle(this.rotation()));let o=1/0,h=1/0,c=-1/0,g=-1/0;s.forEach(function(b){const R=r.point(b);o===void 0&&(o=c=R.x,h=g=R.y),o=Math.min(o,R.x),h=Math.min(h,R.y),c=Math.max(c,R.x),g=Math.max(g,R.y)}),r.invert();const p=r.point({x:o,y:h});return{x:p.x,y:p.y,width:c-o,height:g-h,rotation:qt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),kd.forEach(n=>{this._createAnchor(n)}),this._createAnchor("rotater")}_createAnchor(n){const s=new oh({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:n+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:C4?10:"auto"}),r=this;s.on("mousedown touchstart",function(o){r._handleMouseDown(o)}),s.on("dragstart",o=>{s.stopDrag(),o.cancelBubble=!0}),s.on("dragend",o=>{o.cancelBubble=!0}),s.on("mouseenter",()=>{const o=qt.getAngle(this.rotation()),h=this.rotateAnchorCursor(),c=E4(n,o,h);s.getStage().content&&(s.getStage().content.style.cursor=c),this._cursorChange=!0}),s.on("mouseout",()=>{s.getStage().content&&(s.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(s)}_createBack(){const n=new Bt({name:"back",width:0,height:0,sceneFunc(s,r){const o=r.getParent(),h=o.padding();s.beginPath(),s.rect(-h,-h,r.width()+h*2,r.height()+h*2),s.moveTo(r.width()/2,-h),o.rotateEnabled()&&o.rotateLineVisible()&&s.lineTo(r.width()/2,-o.rotateAnchorOffset()*pt._sign(r.height())-h),s.fillStrokeShape(r)},hitFunc:(s,r)=>{if(!this.shouldOverdrawWholeArea())return;const o=this.padding();s.beginPath(),s.rect(-o,-o,r.width()+o*2,r.height()+o*2),s.fillStrokeShape(r)}});this.add(n),this._proxyDrag(n),n.on("dragstart",s=>{s.cancelBubble=!0}),n.on("dragmove",s=>{s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),this.on("dragmove",s=>{this.update()})}_handleMouseDown(n){if(this._transforming)return;this._movingAnchorName=n.target.name().split(" ")[0];const s=this._getNodeRect(),r=s.width,o=s.height,h=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));this.sin=Math.abs(o/h),this.cos=Math.abs(r/h),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=n.target.getAbsolutePosition(),g=n.target.getStage().getPointerPosition();this._anchorDragOffset={x:g.x-c.x,y:g.y-c.y},Dp++,this._fire("transformstart",{evt:n.evt,target:this.getNode()}),this._nodes.forEach(p=>{p._fire("transformstart",{evt:n.evt,target:p})})}_handleMouseMove(n){let s,r,o;const h=this.findOne("."+this._movingAnchorName),c=h.getStage();c.setPointersPositions(n);const g=c.getPointerPosition();let p={x:g.x-this._anchorDragOffset.x,y:g.y-this._anchorDragOffset.y};const b=h.getAbsolutePosition();this.anchorDragBoundFunc()&&(p=this.anchorDragBoundFunc()(b,p,n)),h.setAbsolutePosition(p);const R=h.getAbsolutePosition();if(b.x===R.x&&b.y===R.y)return;if(this._movingAnchorName==="rotater"){const U=this._getNodeRect();s=h.x()-U.width/2,r=-h.y()+U.height/2;let z=Math.atan2(-r,s)+Math.PI/2;U.height<0&&(z-=Math.PI);const M=qt.getAngle(this.rotation())+z,A=qt.getAngle(this.rotationSnapTolerance()),y=_4(this.rotationSnaps(),M,A)-U.rotation,B=A4(U,y);this._fitNodesInto(B,n);return}const O=this.shiftBehavior();let E;O==="inverted"?E=this.keepRatio()&&!n.shiftKey:O==="none"?E=this.keepRatio():E=this.keepRatio()||n.shiftKey;let D=this.centeredScaling()||n.altKey;if(this._movingAnchorName==="top-left"){if(E){const U=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(U.x-h.x(),2)+Math.pow(U.y-h.y(),2));const z=this.findOne(".top-left").x()>U.x?-1:1,L=this.findOne(".top-left").y()>U.y?-1:1;s=o*this.cos*z,r=o*this.sin*L,this.findOne(".top-left").x(U.x-s),this.findOne(".top-left").y(U.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(h.y());else if(this._movingAnchorName==="top-right"){if(E){const U=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(h.x()-U.x,2)+Math.pow(U.y-h.y(),2));const z=this.findOne(".top-right").x()<U.x?-1:1,L=this.findOne(".top-right").y()>U.y?-1:1;s=o*this.cos*z,r=o*this.sin*L,this.findOne(".top-right").x(U.x+s),this.findOne(".top-right").y(U.y-r)}var S=h.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(h.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(h.x());else if(this._movingAnchorName==="bottom-left"){if(E){const U=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(U.x-h.x(),2)+Math.pow(h.y()-U.y,2));const z=U.x<h.x()?-1:1,L=h.y()<U.y?-1:1;s=o*this.cos*z,r=o*this.sin*L,h.x(U.x-s),h.y(U.y+r)}S=h.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(h.y());else if(this._movingAnchorName==="bottom-right"){if(E){const U=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(h.x()-U.x,2)+Math.pow(h.y()-U.y,2));const z=this.findOne(".bottom-right").x()<U.x?-1:1,L=this.findOne(".bottom-right").y()<U.y?-1:1;s=o*this.cos*z,r=o*this.sin*L,this.findOne(".bottom-right").x(U.x+s),this.findOne(".bottom-right").y(U.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(D=this.centeredScaling()||n.altKey,D){const U=this.findOne(".top-left"),z=this.findOne(".bottom-right"),L=U.x(),M=U.y(),A=this.getWidth()-z.x(),T=this.getHeight()-z.y();z.move({x:-L,y:-M}),U.move({x:A,y:T})}const G=this.findOne(".top-left").getAbsolutePosition();s=G.x,r=G.y;const w=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:s,y:r,width:w,height:j,rotation:qt.getAngle(this.rotation())},n)}_handleMouseUp(n){this._removeEvents(n)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(n){var s;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();Dp--,this._fire("transformend",{evt:n,target:r}),(s=this.getLayer())===null||s===void 0||s.batchDraw(),r&&this._nodes.forEach(o=>{var h;o._fire("transformend",{evt:n,target:o}),(h=o.getLayer())===null||h===void 0||h.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(n,s){const r=this._getNodeRect(),o=1;if(pt._inRange(n.width,-this.padding()*2-o,o)){this.update();return}if(pt._inRange(n.height,-this.padding()*2-o,o)){this.update();return}const h=new ni;if(h.rotate(qt.getAngle(this.rotation())),this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("left")>=0){const E=h.point({x:-this.padding()*2,y:0});n.x+=E.x,n.y+=E.y,n.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y}else if(this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("right")>=0){const E=h.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.width+=this.padding()*2}if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("top")>=0){const E=h.point({x:0,y:-this.padding()*2});n.x+=E.x,n.y+=E.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}else if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const E=h.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}if(this.boundBoxFunc()){const E=this.boundBoxFunc()(r,n);E?n=E:pt.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,g=new ni;g.translate(r.x,r.y),g.rotate(r.rotation),g.scale(r.width/c,r.height/c);const p=new ni,b=n.width/c,R=n.height/c;this.flipEnabled()===!1?(p.translate(n.x,n.y),p.rotate(n.rotation),p.translate(n.width<0?n.width:0,n.height<0?n.height:0),p.scale(Math.abs(b),Math.abs(R))):(p.translate(n.x,n.y),p.rotate(n.rotation),p.scale(b,R));const O=p.multiply(g.invert());this._nodes.forEach(E=>{var D;if(!E.getStage())return;const S=E.getParent().getAbsoluteTransform(),G=E.getTransform().copy();G.translate(E.offsetX(),E.offsetY());const w=new ni;w.multiply(S.copy().invert()).multiply(O).multiply(S).multiply(G);const j=w.decompose();E.setAttrs(j),(D=E.getLayer())===null||D===void 0||D.batchDraw()}),this.rotation(pt._getRotation(n.rotation)),this._nodes.forEach(E=>{this._fire("transform",{evt:s,target:E}),E._fire("transform",{evt:s,target:E})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(n,s){this.findOne(n).setAttrs(s)}update(){var n;const s=this._getNodeRect();this.rotation(pt._getRotation(s.rotation));const r=s.width,o=s.height,h=this.enabledAnchors(),c=this.resizeEnabled(),g=this.padding(),p=this.anchorSize(),b=this.find("._anchor");b.forEach(O=>{O.setAttrs({width:p,height:p,offsetX:p/2,offsetY:p/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:p/2+g,offsetY:p/2+g,visible:c&&h.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:p/2+g,visible:c&&h.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:p/2-g,offsetY:p/2+g,visible:c&&h.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:p/2+g,visible:c&&h.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:o/2,offsetX:p/2-g,visible:c&&h.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:p/2+g,offsetY:p/2-g,visible:c&&h.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:o,offsetY:p/2-g,visible:c&&h.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:o,offsetX:p/2-g,offsetY:p/2-g,visible:c&&h.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*pt._sign(o)-g,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(O=>O.draggable()),x:0,y:0});const R=this.anchorStyleFunc();R&&b.forEach(O=>{R(O)}),(n=this.getLayer())===null||n===void 0||n.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const n=this.findOne("."+this._movingAnchorName);n&&n.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),cc.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Lt.prototype.toObject.call(this)}clone(n){return Lt.prototype.clone.call(this,n)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ee.isTransforming=()=>Dp>0;function O4(d){return d instanceof Array||pt.warn("enabledAnchors value should be an array"),d instanceof Array&&d.forEach(function(n){kd.indexOf(n)===-1&&pt.warn("Unknown anchor name: "+n+". Available names are: "+kd.join(", "))}),d||[]}Ee.prototype.className="Transformer";hn(Ee);lt.addGetterSetter(Ee,"enabledAnchors",kd,O4);lt.addGetterSetter(Ee,"flipEnabled",!0,il());lt.addGetterSetter(Ee,"resizeEnabled",!0);lt.addGetterSetter(Ee,"anchorSize",10,wt());lt.addGetterSetter(Ee,"rotateEnabled",!0);lt.addGetterSetter(Ee,"rotateLineVisible",!0);lt.addGetterSetter(Ee,"rotationSnaps",[]);lt.addGetterSetter(Ee,"rotateAnchorOffset",50,wt());lt.addGetterSetter(Ee,"rotateAnchorCursor","crosshair");lt.addGetterSetter(Ee,"rotationSnapTolerance",5,wt());lt.addGetterSetter(Ee,"borderEnabled",!0);lt.addGetterSetter(Ee,"anchorStroke","rgb(0, 161, 255)");lt.addGetterSetter(Ee,"anchorStrokeWidth",1,wt());lt.addGetterSetter(Ee,"anchorFill","white");lt.addGetterSetter(Ee,"anchorCornerRadius",0,wt());lt.addGetterSetter(Ee,"borderStroke","rgb(0, 161, 255)");lt.addGetterSetter(Ee,"borderStrokeWidth",1,wt());lt.addGetterSetter(Ee,"borderDash");lt.addGetterSetter(Ee,"keepRatio",!0);lt.addGetterSetter(Ee,"shiftBehavior","default");lt.addGetterSetter(Ee,"centeredScaling",!1);lt.addGetterSetter(Ee,"ignoreStroke",!1);lt.addGetterSetter(Ee,"padding",0,wt());lt.addGetterSetter(Ee,"nodes");lt.addGetterSetter(Ee,"node");lt.addGetterSetter(Ee,"boundBoxFunc");lt.addGetterSetter(Ee,"anchorDragBoundFunc");lt.addGetterSetter(Ee,"anchorStyleFunc");lt.addGetterSetter(Ee,"shouldOverdrawWholeArea",!1);lt.addGetterSetter(Ee,"useSingleNodeRotation",!0);lt.backCompat(Ee,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Lr extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.radius(),0,qt.getAngle(this.angle()),this.clockwise()),n.lineTo(0,0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Lr.prototype.className="Wedge";Lr.prototype._centroid=!0;Lr.prototype._attrsAffectingSize=["radius"];hn(Lr);lt.addGetterSetter(Lr,"radius",0,wt());lt.addGetterSetter(Lr,"angle",0,wt());lt.addGetterSetter(Lr,"clockwise",!1);lt.backCompat(Lr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Tg(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const R4=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],M4=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function x4(d,n){const s=d.data,r=d.width,o=d.height;let h,c,g,p,b,R,O,E,D,S,G,w,j,U,z,L,M,A,T,y;const B=n+n+1,N=r-1,q=o-1,I=n+1,Z=I*(I+1)/2,K=new Tg,P=R4[n],x=M4[n];let Y=null,Q=K,W=null,nt=null;for(let F=1;F<B;F++)Q=Q.next=new Tg,F===I&&(Y=Q);Q.next=K,g=c=0;for(let F=0;F<o;F++){w=j=U=z=p=b=R=O=0,E=I*(L=s[c]),D=I*(M=s[c+1]),S=I*(A=s[c+2]),G=I*(T=s[c+3]),p+=Z*L,b+=Z*M,R+=Z*A,O+=Z*T,Q=K;for(let it=0;it<I;it++)Q.r=L,Q.g=M,Q.b=A,Q.a=T,Q=Q.next;for(let it=1;it<I;it++)h=c+((N<it?N:it)<<2),p+=(Q.r=L=s[h])*(y=I-it),b+=(Q.g=M=s[h+1])*y,R+=(Q.b=A=s[h+2])*y,O+=(Q.a=T=s[h+3])*y,w+=L,j+=M,U+=A,z+=T,Q=Q.next;W=K,nt=Y;for(let it=0;it<r;it++)s[c+3]=T=O*P>>x,T!==0?(T=255/T,s[c]=(p*P>>x)*T,s[c+1]=(b*P>>x)*T,s[c+2]=(R*P>>x)*T):s[c]=s[c+1]=s[c+2]=0,p-=E,b-=D,R-=S,O-=G,E-=W.r,D-=W.g,S-=W.b,G-=W.a,h=g+((h=it+n+1)<N?h:N)<<2,w+=W.r=s[h],j+=W.g=s[h+1],U+=W.b=s[h+2],z+=W.a=s[h+3],p+=w,b+=j,R+=U,O+=z,W=W.next,E+=L=nt.r,D+=M=nt.g,S+=A=nt.b,G+=T=nt.a,w-=L,j-=M,U-=A,z-=T,nt=nt.next,c+=4;g+=r}for(let F=0;F<r;F++){j=U=z=w=b=R=O=p=0,c=F<<2,E=I*(L=s[c]),D=I*(M=s[c+1]),S=I*(A=s[c+2]),G=I*(T=s[c+3]),p+=Z*L,b+=Z*M,R+=Z*A,O+=Z*T,Q=K;for(let at=0;at<I;at++)Q.r=L,Q.g=M,Q.b=A,Q.a=T,Q=Q.next;let it=r;for(let at=1;at<=n;at++)c=it+F<<2,p+=(Q.r=L=s[c])*(y=I-at),b+=(Q.g=M=s[c+1])*y,R+=(Q.b=A=s[c+2])*y,O+=(Q.a=T=s[c+3])*y,w+=L,j+=M,U+=A,z+=T,Q=Q.next,at<q&&(it+=r);c=F,W=K,nt=Y;for(let at=0;at<o;at++)h=c<<2,s[h+3]=T=O*P>>x,T>0?(T=255/T,s[h]=(p*P>>x)*T,s[h+1]=(b*P>>x)*T,s[h+2]=(R*P>>x)*T):s[h]=s[h+1]=s[h+2]=0,p-=E,b-=D,R-=S,O-=G,E-=W.r,D-=W.g,S-=W.b,G-=W.a,h=F+((h=at+I)<q?h:q)*r<<2,p+=w+=W.r=s[h],b+=j+=W.g=s[h+1],R+=U+=W.b=s[h+2],O+=z+=W.a=s[h+3],W=W.next,E+=L=nt.r,D+=M=nt.g,S+=A=nt.b,G+=T=nt.a,w-=L,j-=M,U-=A,z-=T,nt=nt.next,c+=r}}const N4=function(n){const s=Math.round(this.blurRadius());s>0&&x4(n,s)};lt.addGetterSetter(Lt,"blurRadius",0,wt(),lt.afterSetFilter);const D4=function(d){const n=this.brightness()*255,s=d.data,r=s.length;for(let o=0;o<r;o+=4)s[o]+=n,s[o+1]+=n,s[o+2]+=n};lt.addGetterSetter(Lt,"brightness",0,wt(),lt.afterSetFilter);const z4=function(d){const n=this.brightness(),s=d.data,r=s.length;for(let o=0;o<r;o+=4)s[o]=Math.min(255,s[o]*n),s[o+1]=Math.min(255,s[o+1]*n),s[o+2]=Math.min(255,s[o+2]*n)},U4=function(d){const n=Math.pow((this.contrast()+100)/100,2),s=d.data,r=s.length;let o=150,h=150,c=150;for(let g=0;g<r;g+=4)o=s[g],h=s[g+1],c=s[g+2],o/=255,o-=.5,o*=n,o+=.5,o*=255,h/=255,h-=.5,h*=n,h+=.5,h*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,o=o<0?0:o>255?255:o,h=h<0?0:h>255?255:h,c=c<0?0:c>255?255:c,s[g]=o,s[g+1]=h,s[g+2]=c};lt.addGetterSetter(Lt,"contrast",0,wt(),lt.afterSetFilter);const G4=function(d){var n,s,r,o,h,c,g,p,b;const R=d.data,O=d.width,E=d.height,D=Math.min(1,Math.max(0,(s=(n=this.embossStrength)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:.5)),S=Math.min(1,Math.max(0,(o=(r=this.embossWhiteLevel)===null||r===void 0?void 0:r.call(this))!==null&&o!==void 0?o:.5)),w=(g={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(h=this.embossDirection)===null||h===void 0?void 0:h.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&g!==void 0?g:315,j=!!((b=(p=this.embossBlend)===null||p===void 0?void 0:p.call(this))!==null&&b!==void 0&&b),U=D*10,z=S*255,L=w*Math.PI/180,M=Math.cos(L),A=Math.sin(L),T=128/1020*U,y=new Uint8ClampedArray(R),B=new Float32Array(O*E);for(let K=0,P=0;P<R.length;P+=4,K++)B[K]=.2126*y[P]+.7152*y[P+1]+.0722*y[P+2];const N=[-1,0,1,-2,0,2,-1,0,1],q=[-1,-2,-1,0,0,0,1,2,1],I=[-O-1,-O,-O+1,-1,0,1,O-1,O,O+1],Z=K=>K<0?0:K>255?255:K;for(let K=1;K<E-1;K++)for(let P=1;P<O-1;P++){const x=K*O+P;let Y=0,Q=0;Y+=B[x+I[0]]*N[0],Q+=B[x+I[0]]*q[0],Y+=B[x+I[1]]*N[1],Q+=B[x+I[1]]*q[1],Y+=B[x+I[2]]*N[2],Q+=B[x+I[2]]*q[2],Y+=B[x+I[3]]*N[3],Q+=B[x+I[3]]*q[3],Y+=B[x+I[5]]*N[5],Q+=B[x+I[5]]*q[5],Y+=B[x+I[6]]*N[6],Q+=B[x+I[6]]*q[6],Y+=B[x+I[7]]*N[7],Q+=B[x+I[7]]*q[7],Y+=B[x+I[8]]*N[8],Q+=B[x+I[8]]*q[8];const W=M*Y+A*Q,nt=Z(z+W*T),F=x*4;if(j){const it=nt-z;R[F]=Z(y[F]+it),R[F+1]=Z(y[F+1]+it),R[F+2]=Z(y[F+2]+it),R[F+3]=y[F+3]}else R[F]=R[F+1]=R[F+2]=nt,R[F+3]=y[F+3]}for(let K=0;K<O;K++){let P=K*4,x=((E-1)*O+K)*4;R[P]=y[P],R[P+1]=y[P+1],R[P+2]=y[P+2],R[P+3]=y[P+3],R[x]=y[x],R[x+1]=y[x+1],R[x+2]=y[x+2],R[x+3]=y[x+3]}for(let K=1;K<E-1;K++){let P=K*O*4,x=(K*O+(O-1))*4;R[P]=y[P],R[P+1]=y[P+1],R[P+2]=y[P+2],R[P+3]=y[P+3],R[x]=y[x],R[x+1]=y[x+1],R[x+2]=y[x+2],R[x+3]=y[x+3]}return d};lt.addGetterSetter(Lt,"embossStrength",.5,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"embossWhiteLevel",.5,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"embossDirection","top-left",void 0,lt.afterSetFilter);lt.addGetterSetter(Lt,"embossBlend",!1,void 0,lt.afterSetFilter);function sp(d,n,s,r,o){const h=s-n,c=o-r;if(h===0)return r+c/2;if(c===0)return r;let g=(d-n)/h;return g=c*g+r,g}const B4=function(d){const n=d.data,s=n.length;let r=n[0],o=r,h,c=n[1],g=c,p,b=n[2],R=b,O;const E=this.enhance();if(E===0)return;for(let z=0;z<s;z+=4)h=n[z+0],h<r?r=h:h>o&&(o=h),p=n[z+1],p<c?c=p:p>g&&(g=p),O=n[z+2],O<b?b=O:O>R&&(R=O);o===r&&(o=255,r=0),g===c&&(g=255,c=0),R===b&&(R=255,b=0);let D,S,G,w,j,U;if(E>0)D=o+E*(255-o),S=r-E*(r-0),G=g+E*(255-g),w=c-E*(c-0),j=R+E*(255-R),U=b-E*(b-0);else{const z=(o+r)*.5;D=o+E*(o-z),S=r+E*(r-z);const L=(g+c)*.5;G=g+E*(g-L),w=c+E*(c-L);const M=(R+b)*.5;j=R+E*(R-M),U=b+E*(b-M)}for(let z=0;z<s;z+=4)n[z+0]=sp(n[z+0],r,o,S,D),n[z+1]=sp(n[z+1],c,g,w,G),n[z+2]=sp(n[z+2],b,R,U,j)};lt.addGetterSetter(Lt,"enhance",0,wt(),lt.afterSetFilter);const H4=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4){const o=.34*n[r]+.5*n[r+1]+.16*n[r+2];n[r]=o,n[r+1]=o,n[r+2]=o}};lt.addGetterSetter(Lt,"hue",0,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"saturation",0,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"luminance",0,wt(),lt.afterSetFilter);const j4=function(d){const n=d.data,s=n.length,r=1,o=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,c=this.luminance()*127,g=r*o*Math.cos(h*Math.PI/180),p=r*o*Math.sin(h*Math.PI/180),b=.299*r+.701*g+.167*p,R=.587*r-.587*g+.33*p,O=.114*r-.114*g-.497*p,E=.299*r-.299*g-.328*p,D=.587*r+.413*g+.035*p,S=.114*r-.114*g+.293*p,G=.299*r-.3*g+1.25*p,w=.587*r-.586*g-1.05*p,j=.114*r+.886*g-.2*p;let U,z,L,M;for(let A=0;A<s;A+=4)U=n[A+0],z=n[A+1],L=n[A+2],M=n[A+3],n[A+0]=b*U+R*z+O*L+c,n[A+1]=E*U+D*z+S*L+c,n[A+2]=G*U+w*z+j*L+c,n[A+3]=M},L4=function(d){const n=d.data,s=n.length,r=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,c=r*o*Math.cos(h*Math.PI/180),g=r*o*Math.sin(h*Math.PI/180),p=.299*r+.701*c+.167*g,b=.587*r-.587*c+.33*g,R=.114*r-.114*c-.497*g,O=.299*r-.299*c-.328*g,E=.587*r+.413*c+.035*g,D=.114*r-.114*c+.293*g,S=.299*r-.3*c+1.25*g,G=.587*r-.586*c-1.05*g,w=.114*r+.886*c-.2*g;for(let j=0;j<s;j+=4){const U=n[j+0],z=n[j+1],L=n[j+2],M=n[j+3];n[j+0]=p*U+b*z+R*L,n[j+1]=O*U+E*z+D*L,n[j+2]=S*U+G*z+w*L,n[j+3]=M}};lt.addGetterSetter(Lt,"hue",0,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"saturation",0,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"value",0,wt(),lt.afterSetFilter);const w4=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]},Y4=function(d,n,s){const r=d.data,o=n.data,h=d.width,c=d.height,g=s.polarCenterX||h/2,p=s.polarCenterY||c/2;let b=Math.sqrt(g*g+p*p),R=h-g,O=c-p;const E=Math.sqrt(R*R+O*O);b=E>b?E:b;const D=c,S=h,G=360/S*Math.PI/180;for(let w=0;w<S;w+=1){const j=Math.sin(w*G),U=Math.cos(w*G);for(let z=0;z<D;z+=1){R=Math.floor(g+b*z/D*U),O=Math.floor(p+b*z/D*j);let L=(O*h+R)*4;const M=r[L+0],A=r[L+1],T=r[L+2],y=r[L+3];L=(w+z*h)*4,o[L+0]=M,o[L+1]=A,o[L+2]=T,o[L+3]=y}}},q4=function(d,n,s){const r=d.data,o=n.data,h=d.width,c=d.height,g=s.polarCenterX||h/2,p=s.polarCenterY||c/2;let b=Math.sqrt(g*g+p*p),R=h-g,O=c-p;const E=Math.sqrt(R*R+O*O);b=E>b?E:b;const D=c,S=h,G=0;let w,j;for(R=0;R<h;R+=1)for(O=0;O<c;O+=1){const U=R-g,z=O-p,L=Math.sqrt(U*U+z*z)*D/b;let M=(Math.atan2(z,U)*180/Math.PI+360+G)%360;M=M*S/360,w=Math.floor(M),j=Math.floor(L);let A=(j*h+w)*4;const T=r[A+0],y=r[A+1],B=r[A+2],N=r[A+3];A=(O*h+R)*4,o[A+0]=T,o[A+1]=y,o[A+2]=B,o[A+3]=N}},V4=function(d){const n=d.width,s=d.height;let r,o,h,c,g,p,b,R,O,E,D=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),G=Math.floor(n*(S%360)/360);if(D<1)return;const w=pt.createCanvasElement();w.width=n,w.height=s;const j=w.getContext("2d").getImageData(0,0,n,s);pt.releaseCanvas(w),Y4(d,j,{polarCenterX:n/2,polarCenterY:s/2});let U=n/Math.pow(2,D);for(;U<=8;)U=U*2,D-=1;U=Math.ceil(U);let z=U,L=0,M=z,A=1;for(G+U>n&&(L=z,M=0,A=-1),o=0;o<s;o+=1)for(r=L;r!==M;r+=A)h=Math.round(r+G)%n,O=(n*o+h)*4,g=j.data[O+0],p=j.data[O+1],b=j.data[O+2],R=j.data[O+3],E=(n*o+r)*4,j.data[E+0]=g,j.data[E+1]=p,j.data[E+2]=b,j.data[E+3]=R;for(o=0;o<s;o+=1)for(z=Math.floor(U),c=0;c<D;c+=1){for(r=0;r<z+1;r+=1)O=(n*o+r)*4,g=j.data[O+0],p=j.data[O+1],b=j.data[O+2],R=j.data[O+3],E=(n*o+z*2-r-1)*4,j.data[E+0]=g,j.data[E+1]=p,j.data[E+2]=b,j.data[E+3]=R;z*=2}q4(j,d,{})};lt.addGetterSetter(Lt,"kaleidoscopePower",2,wt(),lt.afterSetFilter);lt.addGetterSetter(Lt,"kaleidoscopeAngle",0,wt(),lt.afterSetFilter);function Id(d,n,s){let r=(s*d.width+n)*4;const o=[];return o.push(d.data[r++],d.data[r++],d.data[r++],d.data[r++]),o}function Jf(d,n){return Math.sqrt(Math.pow(d[0]-n[0],2)+Math.pow(d[1]-n[1],2)+Math.pow(d[2]-n[2],2))}function X4(d){const n=[0,0,0];for(let s=0;s<d.length;s++)n[0]+=d[s][0],n[1]+=d[s][1],n[2]+=d[s][2];return n[0]/=d.length,n[1]/=d.length,n[2]/=d.length,n}function P4(d,n){const s=Id(d,0,0),r=Id(d,d.width-1,0),o=Id(d,0,d.height-1),h=Id(d,d.width-1,d.height-1),c=n||10;if(Jf(s,r)<c&&Jf(r,h)<c&&Jf(h,o)<c&&Jf(o,s)<c){const g=X4([r,s,h,o]),p=[];for(let b=0;b<d.width*d.height;b++){const R=Jf(g,[d.data[b*4],d.data[b*4+1],d.data[b*4+2]]);p[b]=R<c?0:255}return p}}function Q4(d,n){for(let s=0;s<d.width*d.height;s++)d.data[4*s+3]=n[s]}function K4(d,n,s){const r=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let R=0;for(let O=0;O<o;O++)for(let E=0;E<o;E++){const D=g+O-h,S=p+E-h;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,w=r[O*o+E];R+=d[G]*w}}c[b]=R===2040?255:0}return c}function I4(d,n,s){const r=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let R=0;for(let O=0;O<o;O++)for(let E=0;E<o;E++){const D=g+O-h,S=p+E-h;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,w=r[O*o+E];R+=d[G]*w}}c[b]=R>=1020?255:0}return c}function Z4(d,n,s){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let R=0;for(let O=0;O<o;O++)for(let E=0;E<o;E++){const D=g+O-h,S=p+E-h;if(D>=0&&D<s&&S>=0&&S<n){const G=D*n+S,w=r[O*o+E];R+=d[G]*w}}c[b]=R}return c}const J4=function(d){const n=this.threshold();let s=P4(d,n);return s&&(s=K4(s,d.width,d.height),s=I4(s,d.width,d.height),s=Z4(s,d.width,d.height),Q4(d,s)),d};lt.addGetterSetter(Lt,"threshold",0,wt(),lt.afterSetFilter);const F4=function(d){const n=this.noise()*255,s=d.data,r=s.length,o=n/2;for(let h=0;h<r;h+=4)s[h+0]+=o-2*o*Math.random(),s[h+1]+=o-2*o*Math.random(),s[h+2]+=o-2*o*Math.random()};lt.addGetterSetter(Lt,"noise",.2,wt(),lt.afterSetFilter);const k4=function(d){let n=Math.ceil(this.pixelSize()),s=d.width,r=d.height,o=Math.ceil(s/n),h=Math.ceil(r/n),c=d.data;if(n<=0){pt.error("pixelSize value can not be <= 0");return}for(let g=0;g<o;g+=1)for(let p=0;p<h;p+=1){let b=0,R=0,O=0,E=0;const D=g*n,S=D+n,G=p*n,w=G+n;let j=0;for(let U=D;U<S;U+=1)if(!(U>=s))for(let z=G;z<w;z+=1){if(z>=r)continue;const L=(s*z+U)*4;b+=c[L+0],R+=c[L+1],O+=c[L+2],E+=c[L+3],j+=1}b=b/j,R=R/j,O=O/j,E=E/j;for(let U=D;U<S;U+=1)if(!(U>=s))for(let z=G;z<w;z+=1){if(z>=r)continue;const L=(s*z+U)*4;c[L+0]=b,c[L+1]=R,c[L+2]=O,c[L+3]=E}}};lt.addGetterSetter(Lt,"pixelSize",8,wt(),lt.afterSetFilter);const W4=function(d){const n=Math.round(this.levels()*254)+1,s=d.data,r=s.length,o=255/n;for(let h=0;h<r;h+=1)s[h]=Math.floor(s[h]/o)*o};lt.addGetterSetter(Lt,"levels",.5,wt(),lt.afterSetFilter);const $4=function(d){const n=d.data,s=n.length,r=this.red(),o=this.green(),h=this.blue();for(let c=0;c<s;c+=4){const g=(.34*n[c]+.5*n[c+1]+.16*n[c+2])/255;n[c]=g*r,n[c+1]=g*o,n[c+2]=g*h,n[c+3]=n[c+3]}};lt.addGetterSetter(Lt,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});lt.addGetterSetter(Lt,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});lt.addGetterSetter(Lt,"blue",0,tm,lt.afterSetFilter);const t3=function(d){const n=d.data,s=n.length,r=this.red(),o=this.green(),h=this.blue(),c=this.alpha();for(let g=0;g<s;g+=4){const p=1-c;n[g]=r*c+n[g]*p,n[g+1]=o*c+n[g+1]*p,n[g+2]=h*c+n[g+2]*p}};lt.addGetterSetter(Lt,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});lt.addGetterSetter(Lt,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});lt.addGetterSetter(Lt,"blue",0,tm,lt.afterSetFilter);lt.addGetterSetter(Lt,"alpha",1,function(d){return this._filterUpToDate=!1,d>1?1:d<0?0:d});const e3=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4){const o=n[r+0],h=n[r+1],c=n[r+2];n[r+0]=Math.min(255,o*.393+h*.769+c*.189),n[r+1]=Math.min(255,o*.349+h*.686+c*.168),n[r+2]=Math.min(255,o*.272+h*.534+c*.131)}},n3=function(d){const s=d.data;for(let r=0;r<s.length;r+=4){const o=s[r],h=s[r+1],c=s[r+2];.2126*o+.7152*h+.0722*c>=128&&(s[r]=255-o,s[r+1]=255-h,s[r+2]=255-c)}return d},a3=function(d){const n=this.threshold()*255,s=d.data,r=s.length;for(let o=0;o<r;o+=1)s[o]=s[o]<n?0:255};lt.addGetterSetter(Lt,"threshold",.5,wt(),lt.afterSetFilter);fc.Util._assign(fc,{Arc:Hr,Arrow:Go,Circle:mc,Ellipse:zs,Image:ii,Label:Yp,Tag:Bo,Line:jr,Path:$e,Rect:oh,RegularPolygon:Us,Ring:Ho,Sprite:jl,Star:Gs,Text:an,TextPath:Pn,Transformer:Ee,Wedge:Lr,Filters:{Blur:N4,Brightness:z4,Brighten:D4,Contrast:U4,Emboss:G4,Enhance:B4,Grayscale:H4,HSL:j4,HSV:L4,Invert:w4,Kaleidoscope:V4,Mask:J4,Noise:F4,Pixelate:k4,Posterize:W4,RGB:$4,RGBA:t3,Sepia:e3,Solarize:n3,Threshold:a3}});var op={exports:{}},up={exports:{}},cp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function i3(){return Ag||(Ag=1,(function(d){function n(x,Y){var Q=x.length;x.push(Y);t:for(;0<Q;){var W=Q-1>>>1,nt=x[W];if(0<o(nt,Y))x[W]=Y,x[Q]=nt,Q=W;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var Y=x[0],Q=x.pop();if(Q!==Y){x[0]=Q;t:for(var W=0,nt=x.length,F=nt>>>1;W<F;){var it=2*(W+1)-1,at=x[it],X=it+1,J=x[X];if(0>o(at,Q))X<nt&&0>o(J,at)?(x[W]=J,x[X]=Q,W=X):(x[W]=at,x[it]=Q,W=it);else if(X<nt&&0>o(J,Q))x[W]=J,x[X]=Q,W=X;else break t}}return Y}function o(x,Y){var Q=x.sortIndex-Y.sortIndex;return Q!==0?Q:x.id-Y.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],R=1,O=null,E=3,D=!1,S=!1,G=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L(x){for(var Y=s(b);Y!==null;){if(Y.callback===null)r(b);else if(Y.startTime<=x)r(b),Y.sortIndex=Y.expirationTime,n(p,Y);else break;Y=s(b)}}function M(x){if(G=!1,L(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var Y=s(b);Y!==null&&P(M,Y.startTime-x)}}var A=!1,T=-1,y=5,B=-1;function N(){return w?!0:!(d.unstable_now()-B<y)}function q(){if(w=!1,A){var x=d.unstable_now();B=x;var Y=!0;try{t:{S=!1,G&&(G=!1,U(T),T=-1),D=!0;var Q=E;try{e:{for(L(x),O=s(p);O!==null&&!(O.expirationTime>x&&N());){var W=O.callback;if(typeof W=="function"){O.callback=null,E=O.priorityLevel;var nt=W(O.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){O.callback=nt,L(x),Y=!0;break e}O===s(p)&&r(p),L(x)}else r(p);O=s(p)}if(O!==null)Y=!0;else{var F=s(b);F!==null&&P(M,F.startTime-x),Y=!1}}break t}finally{O=null,E=Q,D=!1}Y=void 0}}finally{Y?I():A=!1}}}var I;if(typeof z=="function")I=function(){z(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){j(q,0)};function P(x,Y){T=j(function(){x(d.unstable_now())},Y)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var Y=3;break;default:Y=E}var Q=E;E=Y;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return Y()}finally{E=Q}},d.unstable_scheduleCallback=function(x,Y,Q){var W=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:R++,callback:Y,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>W?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(G?(U(T),T=-1):G=!0,P(M,Q-W))):(x.sortIndex=nt,n(p,x),S||D||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var Y=E;return function(){var Q=E;E=Y;try{return x.apply(this,arguments)}finally{E=Q}}}})(fp)),fp}var _g;function l3(){return _g||(_g=1,cp.exports=i3()),cp.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function r3(){return Og||(Og=1,(function(d){d.exports=function(n){function s(a,i,f,m){return new Su(a,i,f,m)}function r(){}function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)i+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(a){var i=a,f=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(f=i.return),a=i.return;while(a)}return i.tag===3?f:null}function c(a){if(h(a)!==a)throw Error(o(188))}function g(a){var i=a.alternate;if(!i){if(i=h(a),i===null)throw Error(o(188));return i!==a?null:a}for(var f=a,m=i;;){var _=f.return;if(_===null)break;var H=_.alternate;if(H===null){if(m=_.return,m!==null){f=m;continue}break}if(_.child===H.child){for(H=_.child;H;){if(H===f)return c(_),a;if(H===m)return c(_),i;H=H.sibling}throw Error(o(188))}if(f.return!==m.return)f=_,m=H;else{for(var et=!1,st=_.child;st;){if(st===f){et=!0,f=_,m=H;break}if(st===m){et=!0,m=_,f=H;break}st=st.sibling}if(!et){for(st=H.child;st;){if(st===f){et=!0,f=H,m=_;break}if(st===m){et=!0,m=H,f=_;break}st=st.sibling}if(!et)throw Error(o(189))}}if(f.alternate!==m)throw Error(o(190))}if(f.tag!==3)throw Error(o(188));return f.stateNode.current===f?a:i}function p(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=p(a),i!==null)return i;a=a.sibling}return null}function b(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(a.tag!==4&&(i=b(a),i!==null))return i;a=a.sibling}return null}function R(a){return a===null||typeof a!="object"?null:(a=ho&&a[ho]||a["@@iterator"],typeof a=="function"?a:null)}function O(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===po?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ar:return"Fragment";case uo:return"Profiler";case ir:return"StrictMode";case Qi:return"Suspense";case Ki:return"SuspenseList";case El:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case Xi:return"Portal";case Pi:return(a.displayName||"Context")+".Provider";case co:return(a._context.displayName||"Context")+".Consumer";case Au:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case _u:return i=a.displayName||null,i!==null?i:O(a.type)||"Memo";case Ii:i=a._payload,a=a._init;try{return O(a(i))}catch{}}return null}function E(a){return{current:a}}function D(a){0>fr||(a.current=Co[fr],Co[fr]=null,fr--)}function S(a,i){fr++,Co[fr]=a.current,a.current=i}function G(a){return a>>>=0,a===0?32:31-(hd(a)/dd|0)|0}function w(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function j(a,i,f){var m=a.pendingLanes;if(m===0)return 0;var _=0,H=a.suspendedLanes,et=a.pingedLanes;a=a.warmLanes;var st=m&134217727;return st!==0?(m=st&~H,m!==0?_=w(m):(et&=st,et!==0?_=w(et):f||(f=st&~a,f!==0&&(_=w(f))))):(st=m&~H,st!==0?_=w(st):et!==0?_=w(et):f||(f=m&~a,f!==0&&(_=w(f)))),_===0?0:i!==0&&i!==_&&(i&H)===0&&(H=_&-_,f=i&-i,H>=f||H===32&&(f&4194048)!==0)?i:_}function U(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function z(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var a=Ci;return Ci<<=1,(Ci&4194048)===0&&(Ci=256),a}function M(){var a=Eo;return Eo<<=1,(Eo&62914560)===0&&(Eo=4194304),a}function A(a){for(var i=[],f=0;31>f;f++)i.push(a);return i}function T(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function y(a,i,f,m,_,H){var et=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var st=a.entanglements,St=a.expirationTimes,Gt=a.hiddenUpdates;for(f=et&~f;0<f;){var Ht=31-ea(f),Vt=1<<Ht;st[Ht]=0,St[Ht]=-1;var Pt=Gt[Ht];if(Pt!==null)for(Gt[Ht]=null,Ht=0;Ht<Pt.length;Ht++){var ie=Pt[Ht];ie!==null&&(ie.lane&=-536870913)}f&=~Vt}m!==0&&B(a,m,0),H!==0&&_===0&&a.tag!==0&&(a.suspendedLanes|=H&~(et&~i))}function B(a,i,f){a.pendingLanes|=i,a.suspendedLanes&=~i;var m=31-ea(i);a.entangledLanes|=i,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function N(a,i){var f=a.entangledLanes|=i;for(a=a.entanglements;f;){var m=31-ea(f),_=1<<m;_&i|a[m]&i&&(a[m]|=i),f&=~_}}function q(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function I(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Z(a){if(typeof yn=="function"&&wn(a),da&&typeof da.setStrictMode=="function")try{da.setStrictMode(hs,a)}catch{}}function K(a){if(Vu===void 0)try{throw Error()}catch(f){var i=f.stack.trim().match(/\n( *(at )?)/);Vu=i&&i[1]||"",Rf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vu+a+Rf}function P(a,i){if(!a||hr)return"";hr=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Vt=function(){throw Error()};if(Object.defineProperty(Vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Vt,[])}catch(ie){var Pt=ie}Reflect.construct(a,[],Vt)}else{try{Vt.call()}catch(ie){Pt=ie}a.call(Vt.prototype)}}else{try{throw Error()}catch(ie){Pt=ie}(Vt=a())&&typeof Vt.catch=="function"&&Vt.catch(function(){})}}catch(ie){if(ie&&Pt&&typeof ie.stack=="string")return[ie.stack,Pt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=m.DetermineComponentFrameRoot(),et=H[0],st=H[1];if(et&&st){var St=et.split(`
`),Gt=st.split(`
`);for(_=m=0;m<St.length&&!St[m].includes("DetermineComponentFrameRoot");)m++;for(;_<Gt.length&&!Gt[_].includes("DetermineComponentFrameRoot");)_++;if(m===St.length||_===Gt.length)for(m=St.length-1,_=Gt.length-1;1<=m&&0<=_&&St[m]!==Gt[_];)_--;for(;1<=m&&0<=_;m--,_--)if(St[m]!==Gt[_]){if(m!==1||_!==1)do if(m--,_--,0>_||St[m]!==Gt[_]){var Ht=`
`+St[m].replace(" at new "," at ");return a.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",a.displayName)),Ht}while(1<=m&&0<=_);break}}}finally{hr=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?K(f):""}function x(a){switch(a.tag){case 26:case 27:case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return P(a.type,!1);case 11:return P(a.type.render,!1);case 1:return P(a.type,!0);case 31:return K("Activity");default:return""}}function Y(a){try{var i="";do i+=x(a),a=a.return;while(a);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Q(a,i){if(typeof a=="object"&&a!==null){var f=Mf.get(a);return f!==void 0?f:(i={value:a,source:i,stack:Y(i)},Mf.set(a,i),i)}return{value:a,source:i,stack:Y(i)}}function W(a,i){Fi[dr++]=pr,Fi[dr++]=Xu,Xu=a,pr=i}function nt(a,i,f){pa[Da++]=Ei,pa[Da++]=Wa,pa[Da++]=xl,xl=a;var m=Ei;a=Wa;var _=32-ea(m)-1;m&=~(1<<_),f+=1;var H=32-ea(i)+_;if(30<H){var et=_-_%5;H=(m&(1<<et)-1).toString(32),m>>=et,_-=et,Ei=1<<32-ea(i)+_|f<<_|m,Wa=H+a}else Ei=1<<H|f<<_|m,Wa=a}function F(a){a.return!==null&&(W(a,1),nt(a,1,0))}function it(a){for(;a===Xu;)Xu=Fi[--dr],Fi[dr]=null,pr=Fi[--dr],Fi[dr]=null;for(;a===xl;)xl=pa[--Da],pa[Da]=null,Wa=pa[--Da],pa[Da]=null,Ei=pa[--Da],pa[Da]=null}function at(a,i){S(ki,i),S(gr,a),S(Tn,null),a=nf(i),D(Tn),S(Tn,a)}function X(){D(Tn),D(gr),D(ki)}function J(a){a.memoizedState!==null&&S(ds,a);var i=Tn.current,f=Tl(i,a.type);i!==f&&(S(gr,a),S(Tn,f))}function $(a){gr.current===a&&(D(Tn),D(gr)),ds.current===a&&(D(ds),gi?qa._currentValue=Ji:qa._currentValue2=Ji)}function tt(a){var i=Error(o(418,""));throw Ot(Q(i,a)),ti}function ut(a,i){if(!Fe)throw Error(o(175));td(a.stateNode,a.type,a.memoizedProps,i,a)||tt(a)}function Tt(a){for(xn=a.return;xn;)switch(xn.tag){case 5:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:xn=xn.return}}function gt(a){if(!Fe||a!==xn)return!1;if(!Te)return Tt(a),Te=!0,!1;var i=a.tag;if(un?i!==3&&i!==27&&(i!==5||Hu(a.type)&&!_l(a.type,a.memoizedProps))&&cn&&tt(a):i!==3&&(i!==5||Hu(a.type)&&!_l(a.type,a.memoizedProps))&&cn&&tt(a),Tt(a),i===13){if(!Fe)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));cn=ed(a)}else cn=un&&i===27?Fh(a.type,cn):xn?vf(a.stateNode):null;return!0}function Mt(){Fe&&(cn=xn=null,Te=!1)}function Rt(){var a=Wi;return a!==null&&(Zn===null?Zn=a:Zn.push.apply(Zn,a),Wi=null),a}function Ot(a){Wi===null?Wi=[a]:Wi.push(a)}function xt(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}function Xt(a,i,f){gi?(S(Pu,i._currentValue),i._currentValue=f):(S(Pu,i._currentValue2),i._currentValue2=f)}function Zt(a){var i=Pu.current;gi?a._currentValue=i:a._currentValue2=i,D(Pu)}function ye(a,i,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),a===f)break;a=a.return}}function he(a,i,f,m){var _=a.child;for(_!==null&&(_.return=a);_!==null;){var H=_.dependencies;if(H!==null){var et=_.child;H=H.firstContext;t:for(;H!==null;){var st=H;H=_;for(var St=0;St<i.length;St++)if(st.context===i[St]){H.lanes|=f,st=H.alternate,st!==null&&(st.lanes|=f),ye(H.return,f,a),m||(et=null);break t}H=st.next}}else if(_.tag===18){if(et=_.return,et===null)throw Error(o(341));et.lanes|=f,H=et.alternate,H!==null&&(H.lanes|=f),ye(et,f,a),et=null}else et=_.child;if(et!==null)et.return=_;else for(et=_;et!==null;){if(et===a){et=null;break}if(_=et.sibling,_!==null){_.return=et.return,et=_;break}et=et.return}_=et}}function Ue(a,i,f,m){a=null;for(var _=i,H=!1;_!==null;){if(!H){if((_.flags&524288)!==0)H=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var et=_.alternate;if(et===null)throw Error(o(387));if(et=et.memoizedProps,et!==null){var st=_.type;na(_.pendingProps.value,et.value)||(a!==null?a.push(st):a=[st])}}else if(_===ds.current){if(et=_.alternate,et===null)throw Error(o(387));et.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(a!==null?a.push(qa):a=[qa])}_=_.return}a!==null&&he(i,a,f,m),i.flags|=262144}function _n(a){for(a=a.firstContext;a!==null;){var i=a.context;if(!na(gi?i._currentValue:i._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function Ge(a){Nl=a,Yn=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Be(a){return dn(Nl,a)}function Sa(a,i){return Nl===null&&Ge(a),dn(a,i)}function dn(a,i){var f=gi?i._currentValue:i._currentValue2;if(i={context:i,memoizedValue:f,next:null},Yn===null){if(a===null)throw Error(o(308));Yn=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Yn=Yn.next=i;return f}function wr(){return{controller:new xf,data:new Map,refCount:0}}function ll(a){a.refCount--,a.refCount===0&&md(Qu,function(){a.controller.abort()})}function ba(a){a!==ps&&a.next===null&&(ps===null?He=ps=a:ps=ps.next=a),Ao=!0,Nf||(Nf=!0,bn())}function ft(a,i){if(!mr&&Ao){mr=!0;do for(var f=!1,m=He;m!==null;){if(a!==0){var _=m.pendingLanes;if(_===0)var H=0;else{var et=m.suspendedLanes,st=m.pingedLanes;H=(1<<31-ea(42|a)+1)-1,H&=_&~(et&~st),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(f=!0,rn(m,H))}else H=ce,H=j(m,m===je?H:0,m.cancelPendingCommit!==null||m.timeoutHandle!==pi),(H&3)===0||U(m,H)||(f=!0,rn(m,H));m=m.next}while(f);mr=!1}}function Dt(){Ut()}function Ut(){Ao=Nf=!1;var a=0;za!==0&&(Ma()&&(a=za),za=0);for(var i=Na(),f=null,m=He;m!==null;){var _=m.next,H=Qt(m,i);H===0?(m.next=null,f===null?He=_:f.next=_,_===null&&(ps=f)):(f=m,(a!==0||(H&3)!==0)&&(Ao=!0)),m=_}ft(a)}function Qt(a,i){for(var f=a.suspendedLanes,m=a.pingedLanes,_=a.expirationTimes,H=a.pendingLanes&-62914561;0<H;){var et=31-ea(H),st=1<<et,St=_[et];St===-1?((st&f)===0||(st&m)!==0)&&(_[et]=z(st,i)):St<=i&&(a.expiredLanes|=st),H&=~st}if(i=je,f=ce,f=j(a,a===i?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==pi),m=a.callbackNode,f===0||a===i&&(be===2||be===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Yu(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||U(a,f)){if(i=f&-f,i===a.callbackPriority)return i;switch(m!==null&&Yu(m),I(f)){case 2:case 8:f=gd;break;case 32:f=_f;break;case 268435456:f=Of;break;default:f=_f}return m=ue.bind(null,a),f=To(f,m),a.callbackPriority=i,a.callbackNode=f,i}return m!==null&&m!==null&&Yu(m),a.callbackPriority=2,a.callbackNode=null,2}function ue(a,i){if(Re!==0&&Re!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if($l()&&a.callbackNode!==f)return null;var m=ce;return m=j(a,a===je?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==pi),m===0?null:(_a(a,m,i),Qt(a,Na()),a.callbackNode!=null&&a.callbackNode===f?ue.bind(null,a):null)}function rn(a,i){if($l())return null;_a(a,i,!0)}function bn(){Ru?vo(function(){(se&6)!==0?To(Af,Dt):Ut()}):To(Af,Dt)}function li(){return za===0&&(za=L()),za}function Ca(a,i){if(gs===null){var f=gs=[];Ku=0,Ti=li(),aa={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Ku++,i.then(uh,uh),i}function uh(){if(--Ku===0&&gs!==null){aa!==null&&(aa.status="fulfilled");var a=gs;gs=null,Ti=0,aa=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function u0(a,i){var f=[],m={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return a.then(function(){m.status="fulfilled",m.value=i;for(var _=0;_<f.length;_++)(0,f[_])(i)},function(_){for(m.status="rejected",m.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),m}function vc(){var a=$i.current;return a!==null?a:je.pooledCache}function Ll(a,i){i===null?S($i,$i.current):S($i,i.pool)}function Hs(){var a=vc();return a===null?null:{parent:gi?Ye._currentValue:Ye._currentValue2,pool:a}}function wl(a,i){if(na(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var f=Object.keys(a),m=Object.keys(i);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var _=f[m];if(!vd.call(i,_)||!na(a[_],i[_]))return!1}return!0}function rl(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Yl(){}function Yr(a,i,f){switch(f=a[f],f===void 0?a.push(i):f!==i&&(i.then(Yl,Yl),i=f),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,yc(a),a;default:if(typeof i.status=="string")i.then(Yl,Yl);else{if(a=je,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(m){if(i.status==="pending"){var _=i;_.status="fulfilled",_.value=m}},function(m){if(i.status==="pending"){var _=i;_.status="rejected",_.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,yc(a),a}throw ga=i,vr}}function ch(){if(ga===null)throw Error(o(459));var a=ga;return ga=null,a}function yc(a){if(a===vr||a===yr)throw Error(o(483))}function qr(){for(var a=Dl,i=Iu=Dl=0;i<a;){var f=_e[i];_e[i++]=null;var m=_e[i];_e[i++]=null;var _=_e[i];_e[i++]=null;var H=_e[i];if(_e[i++]=null,m!==null&&_!==null){var et=m.pending;et===null?_.next=_:(_.next=et.next,et.next=_),m.pending=_}H!==0&&bc(f,_,H)}}function sl(a,i,f,m){_e[Dl++]=a,_e[Dl++]=i,_e[Dl++]=f,_e[Dl++]=m,Iu|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Sc(a,i,f,m){return sl(a,i,f,m),js(a)}function ql(a,i){return sl(a,null,null,i),js(a)}function bc(a,i,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var _=!1,H=a.return;H!==null;)H.childLanes|=f,m=H.alternate,m!==null&&(m.childLanes|=f),H.tag===22&&(a=H.stateNode,a===null||a._visibility&1||(_=!0)),a=H,H=H.return;return a.tag===3?(H=a.stateNode,_&&i!==null&&(_=31-ea(f),a=H.hiddenUpdates,m=a[_],m===null?a[_]=[i]:m.push(i),i.lane=f|536870912),H):null}function js(a){if(50<xi)throw xi=0,Wu=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}function Ls(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ws(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ui(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Gi(a,i,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(se&2)!==0){var _=m.pending;return _===null?i.next=i:(i.next=_.next,_.next=i),m.pending=i,i=js(a),bc(a,null,f),i}return sl(a,m,i,f),js(a)}function Ba(a,i,f){if(i=i.updateQueue,i!==null&&(i=i.shared,(f&4194048)!==0)){var m=i.lanes;m&=a.pendingLanes,f|=m,i.lanes=f,N(a,f)}}function Cn(a,i){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var _=null,H=null;if(f=f.firstBaseUpdate,f!==null){do{var et={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};H===null?_=H=et:H=H.next=et,f=f.next}while(f!==null);H===null?_=H=i:H=H.next=i}else _=H=i;f={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:H,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=i:a.next=i,f.lastBaseUpdate=i}function On(){if(zf){var a=aa;if(a!==null)throw a}}function ri(a,i,f,m){zf=!1;var _=a.updateQueue;Ke=!1;var H=_.firstBaseUpdate,et=_.lastBaseUpdate,st=_.shared.pending;if(st!==null){_.shared.pending=null;var St=st,Gt=St.next;St.next=null,et===null?H=Gt:et.next=Gt,et=St;var Ht=a.alternate;Ht!==null&&(Ht=Ht.updateQueue,st=Ht.lastBaseUpdate,st!==et&&(st===null?Ht.firstBaseUpdate=Gt:st.next=Gt,Ht.lastBaseUpdate=St))}if(H!==null){var Vt=_.baseState;et=0,Ht=Gt=St=null,st=H;do{var Pt=st.lane&-536870913,ie=Pt!==st.lane;if(ie?(ce&Pt)===Pt:(m&Pt)===Pt){Pt!==0&&Pt===Ti&&(zf=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});t:{var Ga=a,Ss=st;Pt=i;var Gl=f;switch(Ss.tag){case 1:if(Ga=Ss.payload,typeof Ga=="function"){Vt=Ga.call(Gl,Vt,Pt);break t}Vt=Ga;break t;case 3:Ga.flags=Ga.flags&-65537|128;case 0:if(Ga=Ss.payload,Pt=typeof Ga=="function"?Ga.call(Gl,Vt,Pt):Ga,Pt==null)break t;Vt=Eu({},Vt,Pt);break t;case 2:Ke=!0}}Pt=st.callback,Pt!==null&&(a.flags|=64,ie&&(a.flags|=8192),ie=_.callbacks,ie===null?_.callbacks=[Pt]:ie.push(Pt))}else ie={lane:Pt,tag:st.tag,payload:st.payload,callback:st.callback,next:null},Ht===null?(Gt=Ht=ie,St=Vt):Ht=Ht.next=ie,et|=Pt;if(st=st.next,st===null){if(st=_.shared.pending,st===null)break;ie=st,st=ie.next,ie.next=null,_.lastBaseUpdate=ie,_.shared.pending=null}}while(!0);Ht===null&&(St=Vt),_.baseState=St,_.firstBaseUpdate=Gt,_.lastBaseUpdate=Ht,H===null&&(_.shared.lanes=0),la|=et,a.lanes=et,a.memoizedState=Vt}}function jo(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function fh(a,i){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)jo(f[a],i)}function hh(a,i){a=Pa,S(Ro,a),S(Sr,i),Pa=a|i.baseLanes}function Lo(){S(Ro,Pa),S(Sr,Sr.current)}function Vl(){Pa=Ro.current,D(Sr),D(Ro)}function tn(){throw Error(o(321))}function ol(a,i){if(i===null)return!1;for(var f=0;f<i.length&&f<a.length;f++)if(!na(a[f],i[f]))return!1;return!0}function ul(a,i,f,m,_,H){return Oe=H,kt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ft.H=a===null||a.memoizedState===null?Uf:Ai,Cr=!1,H=f(m,_),Cr=!1,br&&(H=Xl(i,f,m,_)),Vr(a),H}function Vr(a){Ft.H=qn;var i=ge!==null&&ge.next!==null;if(Oe=0,fn=ge=kt=null,Mo=!1,Nn=0,Kn=null,i)throw Error(o(300));a===null||An||(a=a.dependencies,a!==null&&_n(a)&&(An=!0))}function Xl(a,i,f,m){kt=a;var _=0;do{if(br&&(Kn=null),Nn=0,br=!1,25<=_)throw Error(o(301));if(_+=1,fn=ge=null,a.updateQueue!=null){var H=a.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Ft.H=Tr,H=i(f,m)}while(br);return H}function Rn(){var a=Ft.H,i=a.useState()[0];return i=typeof i.then=="function"?Xr(i):i,a=a.useState()[0],(ge!==null?ge.memoizedState:null)!==a&&(kt.flags|=1024),i}function wo(){var a=Er!==0;return Er=0,a}function Yo(a,i,f){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~f}function Bi(a){if(Mo){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Mo=!1}Oe=0,fn=ge=kt=null,br=!1,Nn=Er=0,Kn=null}function En(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?kt.memoizedState=fn=a:fn=fn.next=a,fn}function pn(){if(ge===null){var a=kt.alternate;a=a!==null?a.memoizedState:null}else a=ge.next;var i=fn===null?kt.memoizedState:fn.next;if(i!==null)fn=i,ge=a;else{if(a===null)throw kt.alternate===null?Error(o(467)):Error(o(310));ge=a,a={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},fn===null?kt.memoizedState=fn=a:fn=fn.next=a}return fn}function qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xr(a){var i=Nn;return Nn+=1,Kn===null&&(Kn=[]),a=Yr(Kn,a,i),i=kt,(fn===null?i.memoizedState:fn.next)===null&&(i=i.alternate,Ft.H=i===null||i.memoizedState===null?Uf:Ai),a}function Vo(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Xr(a);if(a.$$typeof===Pi)return Be(a)}throw Error(o(438,String(a)))}function Pr(a){var i=null,f=kt.updateQueue;if(f!==null&&(i=f.memoCache),i==null){var m=kt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(_){return _.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),f===null&&(f=qo(),kt.updateQueue=f),f.memoCache=i,f=i.data[i.index],f===void 0)for(f=i.data[i.index]=Array(a),m=0;m<a;m++)f[m]=fo;return i.index++,f}function Ha(a,i){return typeof i=="function"?i(a):i}function ja(a){var i=pn();return sa(i,ge,a)}function sa(a,i,f){var m=a.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=f;var _=a.baseQueue,H=m.pending;if(H!==null){if(_!==null){var et=_.next;_.next=H.next,H.next=et}i.baseQueue=_=H,m.pending=null}if(H=a.baseState,_===null)a.memoizedState=H;else{i=_.next;var st=et=null,St=null,Gt=i,Ht=!1;do{var Vt=Gt.lane&-536870913;if(Vt!==Gt.lane?(ce&Vt)===Vt:(Oe&Vt)===Vt){var Pt=Gt.revertLane;if(Pt===0)St!==null&&(St=St.next={lane:0,revertLane:0,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null}),Vt===Ti&&(Ht=!0);else if((Oe&Pt)===Pt){Gt=Gt.next,Pt===Ti&&(Ht=!0);continue}else Vt={lane:0,revertLane:Gt.revertLane,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null},St===null?(st=St=Vt,et=H):St=St.next=Vt,kt.lanes|=Pt,la|=Pt;Vt=Gt.action,Cr&&f(H,Vt),H=Gt.hasEagerState?Gt.eagerState:f(H,Vt)}else Pt={lane:Vt,revertLane:Gt.revertLane,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null},St===null?(st=St=Pt,et=H):St=St.next=Pt,kt.lanes|=Vt,la|=Vt;Gt=Gt.next}while(Gt!==null&&Gt!==i);if(St===null?et=H:St.next=st,!na(H,a.memoizedState)&&(An=!0,Ht&&(f=aa,f!==null)))throw f;a.memoizedState=H,a.baseState=et,a.baseQueue=St,m.lastRenderedState=H}return _===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Xo(a){var i=pn(),f=i.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=a;var m=f.dispatch,_=f.pending,H=i.memoizedState;if(_!==null){f.pending=null;var et=_=_.next;do H=a(H,et.action),et=et.next;while(et!==_);na(H,i.memoizedState)||(An=!0),i.memoizedState=H,i.baseQueue===null&&(i.baseState=H),f.lastRenderedState=H}return[H,m]}function dh(a,i,f){var m=kt,_=pn(),H=Te;if(H){if(f===void 0)throw Error(o(407));f=f()}else f=i();var et=!na((ge||_).memoizedState,f);et&&(_.memoizedState=f,An=!0),_=_.queue;var st=Ys.bind(null,m,_,a);if(si(2048,8,st,[a]),_.getSnapshot!==i||et||fn!==null&&fn.memoizedState.tag&1){if(m.flags|=2048,oa(9,Qr(),Cc.bind(null,m,_,f,i),null),je===null)throw Error(o(349));H||(Oe&124)!==0||Po(m,i,f)}return f}function Po(a,i,f){a.flags|=16384,a={getSnapshot:i,value:f},i=kt.updateQueue,i===null?(i=qo(),kt.updateQueue=i,i.stores=[a]):(f=i.stores,f===null?i.stores=[a]:f.push(a))}function Cc(a,i,f,m){i.value=f,i.getSnapshot=m,ph(i)&&Ea(a)}function Ys(a,i,f){return f(function(){ph(i)&&Ea(a)})}function ph(a){var i=a.getSnapshot;a=a.value;try{var f=i();return!na(a,f)}catch{return!0}}function Ea(a){var i=ql(a,2);i!==null&&fa(i,a,2)}function qs(a){var i=En();if(typeof a=="function"){var f=a;if(a=f(),Cr){Z(!0);try{f()}finally{Z(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:a},i}function Ec(a,i,f,m){return a.baseState=f,sa(a,ge,typeof m=="function"?m:Ha)}function Tc(a,i,f,m,_){if(hl(a))throw Error(o(485));if(a=i.action,a!==null){var H={payload:_,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(et){H.listeners.push(et)}};Ft.T!==null?f(!0):H.isTransition=!1,m(H),f=i.pending,f===null?(H.next=i.pending=H,Pl(i,H)):(H.next=f.next,i.pending=f.next=H)}}function Pl(a,i){var f=i.action,m=i.payload,_=a.state;if(i.isTransition){var H=Ft.T,et={};Ft.T=et;try{var st=f(_,m),St=Ft.S;St!==null&&St(et,st),Ac(a,i,st)}catch(Gt){cl(a,i,Gt)}finally{Ft.T=H}}else try{H=f(_,m),Ac(a,i,H)}catch(Gt){cl(a,i,Gt)}}function Ac(a,i,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){_c(a,i,m)},function(m){return cl(a,i,m)}):_c(a,i,f)}function _c(a,i,f){i.status="fulfilled",i.value=f,gh(i),a.state=f,i=a.pending,i!==null&&(f=i.next,f===i?a.pending=null:(f=f.next,i.next=f,Pl(a,f)))}function cl(a,i,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=f,gh(i),i=i.next;while(i!==m)}a.action=null}function gh(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function Oc(a,i){return i}function Rc(a,i){if(Te){var f=je.formState;if(f!==null){t:{var m=kt;if(Te){if(cn){var _=Zh(cn,$a);if(_){cn=vf(_),m=Jh(_);break t}}tt(m)}m=!1}m&&(i=f[0])}}f=En(),f.memoizedState=f.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:i},f.queue=m,f=vh.bind(null,kt,m),m.dispatch=f,m=qs(!1);var H=Ks.bind(null,kt,!1,m.queue);return m=En(),_={state:i,dispatch:null,action:a,pending:null},m.queue=_,f=Tc.bind(null,kt,_,H,f),_.dispatch=f,m.memoizedState=a,[i,f,!1]}function Qo(a){var i=pn();return mh(i,ge,a)}function mh(a,i,f){if(i=sa(a,i,Oc)[0],a=ja(Ha)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=Xr(i)}catch(et){throw et===vr?yr:et}else m=i;i=pn();var _=i.queue,H=_.dispatch;return f!==i.memoizedState&&(kt.flags|=2048,oa(9,Qr(),c0.bind(null,_,f),null)),[m,H,a]}function c0(a,i){a.action=i}function Vs(a){var i=pn(),f=ge;if(f!==null)return mh(i,f,a);pn(),i=i.memoizedState,f=pn();var m=f.queue.dispatch;return f.memoizedState=a,[i,m,!1]}function oa(a,i,f,m){return a={tag:a,create:f,deps:m,inst:i,next:null},i=kt.updateQueue,i===null&&(i=qo(),kt.updateQueue=i),f=i.lastEffect,f===null?i.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,i.lastEffect=a),a}function Qr(){return{destroy:void 0,resource:void 0}}function Ko(){return pn().memoizedState}function Hi(a,i,f,m){var _=En();m=m===void 0?null:m,kt.flags|=a,_.memoizedState=oa(1|i,Qr(),f,m)}function si(a,i,f,m){var _=pn();m=m===void 0?null:m;var H=_.memoizedState.inst;ge!==null&&m!==null&&ol(m,ge.memoizedState.deps)?_.memoizedState=oa(i,H,f,m):(kt.flags|=a,_.memoizedState=oa(1|i,H,f,m))}function Mc(a,i){Hi(8390656,8,a,i)}function Io(a,i){si(2048,8,a,i)}function xc(a,i){return si(4,2,a,i)}function Kr(a,i){return si(4,4,a,i)}function oi(a,i){if(typeof i=="function"){a=a();var f=i(a);return function(){typeof f=="function"?f():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function Zo(a,i,f){f=f!=null?f.concat([a]):null,si(4,4,oi.bind(null,i,a),f)}function Ql(){}function ji(a,i){var f=pn();i=i===void 0?null:i;var m=f.memoizedState;return i!==null&&ol(i,m[1])?m[0]:(f.memoizedState=[a,i],a)}function Jo(a,i){var f=pn();i=i===void 0?null:i;var m=f.memoizedState;if(i!==null&&ol(i,m[1]))return m[0];if(m=a(),Cr){Z(!0);try{a()}finally{Z(!1)}}return f.memoizedState=[m,i],m}function Ir(a,i,f){return f===void 0||(Oe&1073741824)!==0?a.memoizedState=i:(a.memoizedState=f,a=gu(),kt.lanes|=a,la|=a,f)}function Nc(a,i,f,m){return na(f,i)?f:Sr.current!==null?(a=Ir(a,f,m),na(a,i)||(An=!0),a):(Oe&42)===0?(An=!0,a.memoizedState=f):(a=gu(),kt.lanes|=a,la|=a,i)}function Xs(a,i,f,m,_){var H=vi();mn(H!==0&&8>H?H:8);var et=Ft.T,st={};Ft.T=st,Ks(a,!1,i,f);try{var St=_(),Gt=Ft.S;if(Gt!==null&&Gt(st,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var Ht=u0(St,m);Kl(a,i,Ht,ca(a))}else Kl(a,i,m,ca(a))}catch(Vt){Kl(a,i,{then:function(){},status:"rejected",reason:Vt},ca())}finally{mn(H),Ft.T=et}}function Ps(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:Ji,baseState:Ji,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:Ji},next:null};var f={};return i.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:f},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function Fo(){return Be(qa)}function Fn(){return pn().memoizedState}function fl(){return pn().memoizedState}function ko(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var f=ca();a=Ui(f);var m=Gi(i,a,f);m!==null&&(fa(m,i,f),Ba(m,i,f)),i={cache:wr()},a.payload=i;return}i=i.return}}function Qs(a,i,f){var m=ca();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},hl(a)?Is(i,f):(f=Sc(a,i,f,m),f!==null&&(fa(f,a,m),Dc(f,i,m)))}function vh(a,i,f){var m=ca();Kl(a,i,f,m)}function Kl(a,i,f,m){var _={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(hl(a))Is(i,_);else{var H=a.alternate;if(a.lanes===0&&(H===null||H.lanes===0)&&(H=i.lastRenderedReducer,H!==null))try{var et=i.lastRenderedState,st=H(et,f);if(_.hasEagerState=!0,_.eagerState=st,na(st,et))return sl(a,i,_,0),je===null&&qr(),!1}catch{}finally{}if(f=Sc(a,i,_,m),f!==null)return fa(f,a,m),Dc(f,i,m),!0}return!1}function Ks(a,i,f,m){if(m={lane:2,revertLane:li(),action:m,hasEagerState:!1,eagerState:null,next:null},hl(a)){if(i)throw Error(o(479))}else i=Sc(a,f,m,2),i!==null&&fa(i,a,2)}function hl(a){var i=a.alternate;return a===kt||i!==null&&i===kt}function Is(a,i){br=Mo=!0;var f=a.pending;f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i}function Dc(a,i,f){if((f&4194048)!==0){var m=i.lanes;m&=a.pendingLanes,f|=m,i.lanes=f,N(a,f)}}function Wo(a){var i=Ar;return Ar+=1,ma===null&&(ma=[]),Yr(ma,a,i)}function Zs(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function $o(a,i){throw i.$$typeof===nr?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function tu(a){var i=a._init;return i(a._payload)}function yh(a){function i(yt,ht){if(a){var Ct=yt.deletions;Ct===null?(yt.deletions=[ht],yt.flags|=16):Ct.push(ht)}}function f(yt,ht){if(!a)return null;for(;ht!==null;)i(yt,ht),ht=ht.sibling;return null}function m(yt){for(var ht=new Map;yt!==null;)yt.key!==null?ht.set(yt.key,yt):ht.set(yt.index,yt),yt=yt.sibling;return ht}function _(yt,ht){return yt=Qe(yt,ht),yt.index=0,yt.sibling=null,yt}function H(yt,ht,Ct){return yt.index=Ct,a?(Ct=yt.alternate,Ct!==null?(Ct=Ct.index,Ct<ht?(yt.flags|=67108866,ht):Ct):(yt.flags|=67108866,ht)):(yt.flags|=1048576,ht)}function et(yt){return a&&yt.alternate===null&&(yt.flags|=67108866),yt}function st(yt,ht,Ct,jt){return ht===null||ht.tag!==6?(ht=tf(Ct,yt.mode,jt),ht.return=yt,ht):(ht=_(ht,Ct),ht.return=yt,ht)}function St(yt,ht,Ct,jt){var Yt=Ct.type;return Yt===ar?Ht(yt,ht,Ct.props.children,jt,Ct.key):ht!==null&&(ht.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Ii&&tu(Yt)===ht.type)?(ht=_(ht,Ct.props),Zs(ht,Ct),ht.return=yt,ht):(ht=oo(Ct.type,Ct.key,Ct.props,null,yt.mode,jt),Zs(ht,Ct),ht.return=yt,ht)}function Gt(yt,ht,Ct,jt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Ct.containerInfo||ht.stateNode.implementation!==Ct.implementation?(ht=ef(Ct,yt.mode,jt),ht.return=yt,ht):(ht=_(ht,Ct.children||[]),ht.return=yt,ht)}function Ht(yt,ht,Ct,jt,Yt){return ht===null||ht.tag!==7?(ht=tr(Ct,yt.mode,jt,Yt),ht.return=yt,ht):(ht=_(ht,Ct),ht.return=yt,ht)}function Vt(yt,ht,Ct){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=tf(""+ht,yt.mode,Ct),ht.return=yt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case ss:return Ct=oo(ht.type,ht.key,ht.props,null,yt.mode,Ct),Zs(Ct,ht),Ct.return=yt,Ct;case Xi:return ht=ef(ht,yt.mode,Ct),ht.return=yt,ht;case Ii:var jt=ht._init;return ht=jt(ht._payload),Vt(yt,ht,Ct)}if(lr(ht)||R(ht))return ht=tr(ht,yt.mode,Ct,null),ht.return=yt,ht;if(typeof ht.then=="function")return Vt(yt,Wo(ht),Ct);if(ht.$$typeof===Pi)return Vt(yt,Sa(yt,ht),Ct);$o(yt,ht)}return null}function Pt(yt,ht,Ct,jt){var Yt=ht!==null?ht.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Yt!==null?null:st(yt,ht,""+Ct,jt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case ss:return Ct.key===Yt?St(yt,ht,Ct,jt):null;case Xi:return Ct.key===Yt?Gt(yt,ht,Ct,jt):null;case Ii:return Yt=Ct._init,Ct=Yt(Ct._payload),Pt(yt,ht,Ct,jt)}if(lr(Ct)||R(Ct))return Yt!==null?null:Ht(yt,ht,Ct,jt,null);if(typeof Ct.then=="function")return Pt(yt,ht,Wo(Ct),jt);if(Ct.$$typeof===Pi)return Pt(yt,ht,Sa(yt,Ct),jt);$o(yt,Ct)}return null}function ie(yt,ht,Ct,jt,Yt){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return yt=yt.get(Ct)||null,st(ht,yt,""+jt,Yt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case ss:return yt=yt.get(jt.key===null?Ct:jt.key)||null,St(ht,yt,jt,Yt);case Xi:return yt=yt.get(jt.key===null?Ct:jt.key)||null,Gt(ht,yt,jt,Yt);case Ii:var Le=jt._init;return jt=Le(jt._payload),ie(yt,ht,Ct,jt,Yt)}if(lr(jt)||R(jt))return yt=yt.get(Ct)||null,Ht(ht,yt,jt,Yt,null);if(typeof jt.then=="function")return ie(yt,ht,Ct,Wo(jt),Yt);if(jt.$$typeof===Pi)return ie(yt,ht,Ct,Sa(ht,jt),Yt);$o(ht,jt)}return null}function Ga(yt,ht,Ct,jt){for(var Yt=null,Le=null,ee=ht,Ce=ht=0,zn=null;ee!==null&&Ce<Ct.length;Ce++){ee.index>Ce?(zn=ee,ee=null):zn=ee.sibling;var Ae=Pt(yt,ee,Ct[Ce],jt);if(Ae===null){ee===null&&(ee=zn);break}a&&ee&&Ae.alternate===null&&i(yt,ee),ht=H(Ae,ht,Ce),Le===null?Yt=Ae:Le.sibling=Ae,Le=Ae,ee=zn}if(Ce===Ct.length)return f(yt,ee),Te&&W(yt,Ce),Yt;if(ee===null){for(;Ce<Ct.length;Ce++)ee=Vt(yt,Ct[Ce],jt),ee!==null&&(ht=H(ee,ht,Ce),Le===null?Yt=ee:Le.sibling=ee,Le=ee);return Te&&W(yt,Ce),Yt}for(ee=m(ee);Ce<Ct.length;Ce++)zn=ie(ee,yt,Ce,Ct[Ce],jt),zn!==null&&(a&&zn.alternate!==null&&ee.delete(zn.key===null?Ce:zn.key),ht=H(zn,ht,Ce),Le===null?Yt=zn:Le.sibling=zn,Le=zn);return a&&ee.forEach(function(Bl){return i(yt,Bl)}),Te&&W(yt,Ce),Yt}function Ss(yt,ht,Ct,jt){if(Ct==null)throw Error(o(151));for(var Yt=null,Le=null,ee=ht,Ce=ht=0,zn=null,Ae=Ct.next();ee!==null&&!Ae.done;Ce++,Ae=Ct.next()){ee.index>Ce?(zn=ee,ee=null):zn=ee.sibling;var Bl=Pt(yt,ee,Ae.value,jt);if(Bl===null){ee===null&&(ee=zn);break}a&&ee&&Bl.alternate===null&&i(yt,ee),ht=H(Bl,ht,Ce),Le===null?Yt=Bl:Le.sibling=Bl,Le=Bl,ee=zn}if(Ae.done)return f(yt,ee),Te&&W(yt,Ce),Yt;if(ee===null){for(;!Ae.done;Ce++,Ae=Ct.next())Ae=Vt(yt,Ae.value,jt),Ae!==null&&(ht=H(Ae,ht,Ce),Le===null?Yt=Ae:Le.sibling=Ae,Le=Ae);return Te&&W(yt,Ce),Yt}for(ee=m(ee);!Ae.done;Ce++,Ae=Ct.next())Ae=ie(ee,yt,Ce,Ae.value,jt),Ae!==null&&(a&&Ae.alternate!==null&&ee.delete(Ae.key===null?Ce:Ae.key),ht=H(Ae,ht,Ce),Le===null?Yt=Ae:Le.sibling=Ae,Le=Ae);return a&&ee.forEach(function($u){return i(yt,$u)}),Te&&W(yt,Ce),Yt}function Gl(yt,ht,Ct,jt){if(typeof Ct=="object"&&Ct!==null&&Ct.type===ar&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case ss:t:{for(var Yt=Ct.key;ht!==null;){if(ht.key===Yt){if(Yt=Ct.type,Yt===ar){if(ht.tag===7){f(yt,ht.sibling),jt=_(ht,Ct.props.children),jt.return=yt,yt=jt;break t}}else if(ht.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Ii&&tu(Yt)===ht.type){f(yt,ht.sibling),jt=_(ht,Ct.props),Zs(jt,Ct),jt.return=yt,yt=jt;break t}f(yt,ht);break}else i(yt,ht);ht=ht.sibling}Ct.type===ar?(jt=tr(Ct.props.children,yt.mode,jt,Ct.key),jt.return=yt,yt=jt):(jt=oo(Ct.type,Ct.key,Ct.props,null,yt.mode,jt),Zs(jt,Ct),jt.return=yt,yt=jt)}return et(yt);case Xi:t:{for(Yt=Ct.key;ht!==null;){if(ht.key===Yt)if(ht.tag===4&&ht.stateNode.containerInfo===Ct.containerInfo&&ht.stateNode.implementation===Ct.implementation){f(yt,ht.sibling),jt=_(ht,Ct.children||[]),jt.return=yt,yt=jt;break t}else{f(yt,ht);break}else i(yt,ht);ht=ht.sibling}jt=ef(Ct,yt.mode,jt),jt.return=yt,yt=jt}return et(yt);case Ii:return Yt=Ct._init,Ct=Yt(Ct._payload),Gl(yt,ht,Ct,jt)}if(lr(Ct))return Ga(yt,ht,Ct,jt);if(R(Ct)){if(Yt=R(Ct),typeof Yt!="function")throw Error(o(150));return Ct=Yt.call(Ct),Ss(yt,ht,Ct,jt)}if(typeof Ct.then=="function")return Gl(yt,ht,Wo(Ct),jt);if(Ct.$$typeof===Pi)return Gl(yt,ht,Sa(yt,Ct),jt);$o(yt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,ht!==null&&ht.tag===6?(f(yt,ht.sibling),jt=_(ht,Ct),jt.return=yt,yt=jt):(f(yt,ht),jt=tf(Ct,yt.mode,jt),jt.return=yt,yt=jt),et(yt)):f(yt,ht)}return function(yt,ht,Ct,jt){try{Ar=0;var Yt=Gl(yt,ht,Ct,jt);return ma=null,Yt}catch(ee){if(ee===vr||ee===yr)throw ee;var Le=s(29,ee,null,yt.mode);return Le.lanes=jt,Le.return=yt,Le}finally{}}}function dl(a){var i=a.alternate;S(nn,nn.current&1),S(Ua,a),ia===null&&(i===null||Sr.current!==null||i.memoizedState!==null)&&(ia=a)}function Sh(a){if(a.tag===22){if(S(nn,nn.current),S(Ua,a),ia===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(ia=a)}}else pl()}function pl(){S(nn,nn.current),S(Ua,Ua.current)}function Li(a){D(Ua),ia===a&&(ia=null),D(nn)}function Js(a){for(var i=a;i!==null;){if(i.tag===13){var f=i.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||zu(f)||Uu(f)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function zc(a,i,f,m){i=a.memoizedState,f=f(m,i),f=f==null?i:Eu({},i,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}function bh(a,i,f,m,_,H,et){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,H,et):i.prototype&&i.prototype.isPureReactComponent?!wl(f,m)||!wl(_,H):!0}function Ch(a,i,f,m){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(f,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(f,m),i.state!==a&&_r.enqueueReplaceState(i,i.state,null)}function Il(a,i){var f=i;if("ref"in i){f={};for(var m in i)m!=="ref"&&(f[m]=i[m])}if(a=a.defaultProps){f===i&&(f=Eu({},f));for(var _ in a)f[_]===void 0&&(f[_]=a[_])}return f}function Zr(a,i){try{var f=a.onUncaughtError;f(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function Eh(a,i,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Uc(a,i,f){return f=Ui(f),f.tag=3,f.payload={element:null},f.callback=function(){Zr(a,i)},f}function Th(a){return a=Ui(a),a.tag=3,a}function Gc(a,i,f,m){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var H=m.value;a.payload=function(){return _(H)},a.callback=function(){Eh(i,f,m)}}var et=f.stateNode;et!==null&&typeof et.componentDidCatch=="function"&&(a.callback=function(){Eh(i,f,m),typeof _!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var st=m.stack;this.componentDidCatch(m.value,{componentStack:st!==null?st:""})})}function f0(a,i,f,m,_){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=f.alternate,i!==null&&Ue(i,f,_,!0),f=Ua.current,f!==null){switch(f.tag){case 13:return ia===null?mu():f.alternate===null&&Ie===0&&(Ie=3),f.flags&=-257,f.flags|=65536,f.lanes=_,m===Oo?f.flags|=16384:(i=f.updateQueue,i===null?f.updateQueue=new Set([m]):i.add(m),ka(a,m,_)),!1;case 22:return f.flags|=65536,m===Oo?f.flags|=16384:(i=f.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=i):(f=i.retryQueue,f===null?i.retryQueue=new Set([m]):f.add(m)),ka(a,m,_)),!1}throw Error(o(435,f.tag))}return ka(a,m,_),mu(),!1}if(Te)return i=Ua.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=_,m!==ti&&(a=Error(o(422),{cause:m}),Ot(Q(a,f)))):(m!==ti&&(i=Error(o(423),{cause:m}),Ot(Q(i,f))),a=a.current.alternate,a.flags|=65536,_&=-_,a.lanes|=_,m=Q(m,f),_=Uc(a.stateNode,m,_),Cn(a,_),Ie!==4&&(Ie=2)),!1;var H=Error(o(520),{cause:m});if(H=Q(H,f),Mr===null?Mr=[H]:Mr.push(H),Ie!==4&&(Ie=2),i===null)return!0;m=Q(m,f),f=i;do{switch(f.tag){case 3:return f.flags|=65536,a=_&-_,f.lanes|=a,a=Uc(f.stateNode,m,a),Cn(f,a),!1;case 1:if(i=f.type,H=f.stateNode,(f.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(nl===null||!nl.has(H))))return f.flags|=65536,_&=-_,f.lanes|=_,_=Th(_),Gc(_,a,f,m),Cn(f,_),!1}f=f.return}while(f!==null);return!1}function Un(a,i,f,m){i.child=a===null?Va(i,null,f,m):zl(i,a.child,f,m)}function Ah(a,i,f,m,_){f=f.render;var H=i.ref;if("ref"in m){var et={};for(var st in m)st!=="ref"&&(et[st]=m[st])}else et=m;return Ge(i),m=ul(a,i,f,et,H,_),st=wo(),a!==null&&!An?(Yo(a,i,_),ui(a,i,_)):(Te&&st&&F(i),i.flags|=1,Un(a,i,m,_),i.child)}function _h(a,i,f,m,_){if(a===null){var H=f.type;return typeof H=="function"&&!Vi(H)&&H.defaultProps===void 0&&f.compare===null?(i.tag=15,i.type=H,Oh(a,i,H,m,_)):(a=oo(f.type,null,m,i,i.mode,_),a.ref=i.ref,a.return=i,i.child=a)}if(H=a.child,!ru(a,_)){var et=H.memoizedProps;if(f=f.compare,f=f!==null?f:wl,f(et,m)&&a.ref===i.ref)return ui(a,i,_)}return i.flags|=1,a=Qe(H,m),a.ref=i.ref,a.return=i,i.child=a}function Oh(a,i,f,m,_){if(a!==null){var H=a.memoizedProps;if(wl(H,m)&&a.ref===i.ref)if(An=!1,i.pendingProps=m=H,ru(a,_))(a.flags&131072)!==0&&(An=!0);else return i.lanes=a.lanes,ui(a,i,_)}return Bc(a,i,f,m,_)}function Rh(a,i,f){var m=i.pendingProps,_=m.children,H=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=H!==null?H.baseLanes|f:f,a!==null){for(_=i.child=a.child,H=0;_!==null;)H=H|_.lanes|_.childLanes,_=_.sibling;i.childLanes=H&~m}else i.childLanes=0,i.child=null;return Mh(a,i,m,f)}if((f&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ll(i,H!==null?H.cachePool:null),H!==null?hh(i,H):Lo(),Sh(i);else return i.lanes=i.childLanes=536870912,Mh(a,i,H!==null?H.baseLanes|f:f,f)}else H!==null?(Ll(i,H.cachePool),hh(i,H),pl(),i.memoizedState=null):(a!==null&&Ll(i,null),Lo(),pl());return Un(a,i,_,f),i.child}function Mh(a,i,f,m){var _=vc();return _=_===null?null:{parent:gi?Ye._currentValue:Ye._currentValue2,pool:_},i.memoizedState={baseLanes:f,cachePool:_},a!==null&&Ll(i,null),Lo(),Sh(i),a!==null&&Ue(a,i,m,!0),null}function eu(a,i){var f=i.ref;if(f===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(o(284));(a===null||a.ref!==f)&&(i.flags|=4194816)}}function Bc(a,i,f,m,_){return Ge(i),f=ul(a,i,f,m,void 0,_),m=wo(),a!==null&&!An?(Yo(a,i,_),ui(a,i,_)):(Te&&m&&F(i),i.flags|=1,Un(a,i,f,_),i.child)}function nu(a,i,f,m,_,H){return Ge(i),i.updateQueue=null,f=Xl(i,m,f,_),Vr(a),m=wo(),a!==null&&!An?(Yo(a,i,H),ui(a,i,H)):(Te&&m&&F(i),i.flags|=1,Un(a,i,f,H),i.child)}function Jr(a,i,f,m,_){if(Ge(i),i.stateNode===null){var H=Ml,et=f.contextType;typeof et=="object"&&et!==null&&(H=Be(et)),H=new f(m,H),i.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=_r,i.stateNode=H,H._reactInternals=i,H=i.stateNode,H.props=m,H.state=i.memoizedState,H.refs={},Ls(i),et=f.contextType,H.context=typeof et=="object"&&et!==null?Be(et):Ml,H.state=i.memoizedState,et=f.getDerivedStateFromProps,typeof et=="function"&&(zc(i,f,et,m),H.state=i.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(et=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),et!==H.state&&_r.enqueueReplaceState(H,H.state,null),ri(i,m,H,_),On(),H.state=i.memoizedState),typeof H.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(a===null){H=i.stateNode;var st=i.memoizedProps,St=Il(f,st);H.props=St;var Gt=H.context,Ht=f.contextType;et=Ml,typeof Ht=="object"&&Ht!==null&&(et=Be(Ht));var Vt=f.getDerivedStateFromProps;Ht=typeof Vt=="function"||typeof H.getSnapshotBeforeUpdate=="function",st=i.pendingProps!==st,Ht||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(st||Gt!==et)&&Ch(i,H,m,et),Ke=!1;var Pt=i.memoizedState;H.state=Pt,ri(i,m,H,_),On(),Gt=i.memoizedState,st||Pt!==Gt||Ke?(typeof Vt=="function"&&(zc(i,f,Vt,m),Gt=i.memoizedState),(St=Ke||bh(i,f,St,m,Pt,Gt,et))?(Ht||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(i.flags|=4194308)):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Gt),H.props=m,H.state=Gt,H.context=et,m=St):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{H=i.stateNode,ws(a,i),et=i.memoizedProps,Ht=Il(f,et),H.props=Ht,Vt=i.pendingProps,Pt=H.context,Gt=f.contextType,St=Ml,typeof Gt=="object"&&Gt!==null&&(St=Be(Gt)),st=f.getDerivedStateFromProps,(Gt=typeof st=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(et!==Vt||Pt!==St)&&Ch(i,H,m,St),Ke=!1,Pt=i.memoizedState,H.state=Pt,ri(i,m,H,_),On();var ie=i.memoizedState;et!==Vt||Pt!==ie||Ke||a!==null&&a.dependencies!==null&&_n(a.dependencies)?(typeof st=="function"&&(zc(i,f,st,m),ie=i.memoizedState),(Ht=Ke||bh(i,f,Ht,m,Pt,ie,St)||a!==null&&a.dependencies!==null&&_n(a.dependencies))?(Gt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(m,ie,St),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(m,ie,St)),typeof H.componentDidUpdate=="function"&&(i.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof H.componentDidUpdate!="function"||et===a.memoizedProps&&Pt===a.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||et===a.memoizedProps&&Pt===a.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=ie),H.props=m,H.state=ie,H.context=St,m=Ht):(typeof H.componentDidUpdate!="function"||et===a.memoizedProps&&Pt===a.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||et===a.memoizedProps&&Pt===a.memoizedState||(i.flags|=1024),m=!1)}return H=m,eu(a,i),m=(i.flags&128)!==0,H||m?(H=i.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:H.render(),i.flags|=1,a!==null&&m?(i.child=zl(i,a.child,null,_),i.child=zl(i,null,f,_)):Un(a,i,f,_),i.memoizedState=H.state,a=i.child):a=ui(a,i,_),a}function xh(a,i,f,m){return Mt(),i.flags|=256,Un(a,i,f,m),i.child}function au(a){return{baseLanes:a,cachePool:Hs()}}function iu(a,i,f){return a=a!==null?a.childLanes&~f:0,i&&(a|=Vn),a}function Hc(a,i,f){var m=i.pendingProps,_=!1,H=(i.flags&128)!==0,et;if((et=H)||(et=a!==null&&a.memoizedState===null?!1:(nn.current&2)!==0),et&&(_=!0,i.flags&=-129),et=(i.flags&32)!==0,i.flags&=-33,a===null){if(Te){if(_?dl(i):pl(),Te){var st=cn,St;(St=st)&&(st=Bu(st,$a),st!==null?(i.memoizedState={dehydrated:st,treeContext:xl!==null?{id:Ei,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},St=s(18,null,null,0),St.stateNode=st,St.return=i,i.child=St,xn=i,cn=null,St=!0):St=!1),St||tt(i)}if(st=i.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return Uu(st)?i.lanes=32:i.lanes=536870912,null;Li(i)}return st=m.children,m=m.fallback,_?(pl(),_=i.mode,st=Fs({mode:"hidden",children:st},_),m=tr(m,_,f,null),st.return=i,m.return=i,st.sibling=m,i.child=st,_=i.child,_.memoizedState=au(f),_.childLanes=iu(a,et,f),i.memoizedState=Rr,m):(dl(i),lu(i,st))}if(St=a.memoizedState,St!==null&&(st=St.dehydrated,st!==null)){if(H)i.flags&256?(dl(i),i.flags&=-257,i=gl(a,i,f)):i.memoizedState!==null?(pl(),i.child=a.child,i.flags|=128,i=null):(pl(),_=m.fallback,st=i.mode,m=Fs({mode:"visible",children:m.children},st),_=tr(_,st,f,null),_.flags|=2,m.return=i,_.return=i,m.sibling=_,i.child=m,zl(i,a.child,null,f),m=i.child,m.memoizedState=au(f),m.childLanes=iu(a,et,f),i.memoizedState=Rr,i=_);else if(dl(i),Uu(st))et=Ih(st).digest,m=Error(o(419)),m.stack="",m.digest=et,Ot({value:m,source:null,stack:null}),i=gl(a,i,f);else if(An||Ue(a,i,f,!1),et=(f&a.childLanes)!==0,An||et){if(et=je,et!==null&&(m=f&-f,m=(m&42)!==0?1:q(m),m=(m&(et.suspendedLanes|f))!==0?0:m,m!==0&&m!==St.retryLane))throw St.retryLane=m,ql(a,m),fa(et,a,m),Gf;zu(st)||mu(),i=gl(a,i,f)}else zu(st)?(i.flags|=192,i.child=a.child,i=null):(a=St.treeContext,Fe&&(cn=Wh(st),xn=i,Te=!0,Wi=null,$a=!1,a!==null&&(pa[Da++]=Ei,pa[Da++]=Wa,pa[Da++]=xl,Ei=a.id,Wa=a.overflow,xl=i)),i=lu(i,m.children),i.flags|=4096);return i}return _?(pl(),_=m.fallback,st=i.mode,St=a.child,H=St.sibling,m=Qe(St,{mode:"hidden",children:m.children}),m.subtreeFlags=St.subtreeFlags&65011712,H!==null?_=Qe(H,_):(_=tr(_,st,f,null),_.flags|=2),_.return=i,m.return=i,m.sibling=_,i.child=m,m=_,_=i.child,st=a.child.memoizedState,st===null?st=au(f):(St=st.cachePool,St!==null?(H=gi?Ye._currentValue:Ye._currentValue2,St=St.parent!==H?{parent:H,pool:H}:St):St=Hs(),st={baseLanes:st.baseLanes|f,cachePool:St}),_.memoizedState=st,_.childLanes=iu(a,et,f),i.memoizedState=Rr,m):(dl(i),f=a.child,a=f.sibling,f=Qe(f,{mode:"visible",children:m.children}),f.return=i,f.sibling=null,a!==null&&(et=i.deletions,et===null?(i.deletions=[a],i.flags|=16):et.push(a)),i.child=f,i.memoizedState=null,f)}function lu(a,i){return i=Fs({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Fs(a,i){return a=s(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function gl(a,i,f){return zl(i,a.child,null,f),a=lu(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function Nh(a,i,f){a.lanes|=i;var m=a.alternate;m!==null&&(m.lanes|=i),ye(a.return,i,f)}function jc(a,i,f,m,_){var H=a.memoizedState;H===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:_}:(H.isBackwards=i,H.rendering=null,H.renderingStartTime=0,H.last=m,H.tail=f,H.tailMode=_)}function Dh(a,i,f){var m=i.pendingProps,_=m.revealOrder,H=m.tail;if(Un(a,i,m.children,f),m=nn.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Nh(a,f,i);else if(a.tag===19)Nh(a,f,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(S(nn,m),_){case"forwards":for(f=i.child,_=null;f!==null;)a=f.alternate,a!==null&&Js(a)===null&&(_=f),f=f.sibling;f=_,f===null?(_=i.child,i.child=null):(_=f.sibling,f.sibling=null),jc(i,!1,_,f,H);break;case"backwards":for(f=null,_=i.child,i.child=null;_!==null;){if(a=_.alternate,a!==null&&Js(a)===null){i.child=_;break}a=_.sibling,_.sibling=f,f=_,_=a}jc(i,!0,f,null,H);break;case"together":jc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ui(a,i,f){if(a!==null&&(i.dependencies=a.dependencies),la|=i.lanes,(f&i.childLanes)===0)if(a!==null){if(Ue(a,i,f,!1),(f&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,f=Qe(a,a.pendingProps),i.child=f,f.return=i;a.sibling!==null;)a=a.sibling,f=f.sibling=Qe(a,a.pendingProps),f.return=i;f.sibling=null}return i.child}function ru(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&_n(a)))}function ks(a,i,f){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Xt(i,Ye,a.memoizedState.cache),Mt();break;case 27:case 5:J(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Xt(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(dl(i),i.flags|=128,null):(f&i.child.childLanes)!==0?Hc(a,i,f):(dl(i),a=ui(a,i,f),a!==null?a.sibling:null);dl(i);break;case 19:var _=(a.flags&128)!==0;if(m=(f&i.childLanes)!==0,m||(Ue(a,i,f,!1),m=(f&i.childLanes)!==0),_){if(m)return Dh(a,i,f);i.flags|=128}if(_=i.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),S(nn,nn.current),m)break;return null;case 22:case 23:return i.lanes=0,Rh(a,i,f);case 24:Xt(i,Ye,a.memoizedState.cache)}return ui(a,i,f)}function Fr(a,i,f){if(a!==null)if(a.memoizedProps!==i.pendingProps)An=!0;else{if(!ru(a,f)&&(i.flags&128)===0)return An=!1,ks(a,i,f);An=(a.flags&131072)!==0}else An=!1,Te&&(i.flags&1048576)!==0&&nt(i,pr,i.index);switch(i.lanes=0,i.tag){case 16:t:{a=i.pendingProps;var m=i.elementType,_=m._init;if(m=_(m._payload),i.type=m,typeof m=="function")Vi(m)?(a=Il(m,a),i.tag=1,i=Jr(null,i,m,a,f)):(i.tag=0,i=Bc(null,i,m,a,f));else{if(m!=null){if(_=m.$$typeof,_===Au){i.tag=11,i=Ah(null,i,m,a,f);break t}else if(_===_u){i.tag=14,i=_h(null,i,m,a,f);break t}}throw i=O(m)||m,Error(o(306,i,""))}}return i;case 0:return Bc(a,i,i.type,i.pendingProps,f);case 1:return m=i.type,_=Il(m,i.pendingProps),Jr(a,i,m,_,f);case 3:t:{if(at(i,i.stateNode.containerInfo),a===null)throw Error(o(387));var H=i.pendingProps;_=i.memoizedState,m=_.element,ws(a,i),ri(i,H,null,f);var et=i.memoizedState;if(H=et.cache,Xt(i,Ye,H),H!==_.cache&&he(i,[Ye],f,!0),On(),H=et.element,Fe&&_.isDehydrated)if(_={element:H,isDehydrated:!1,cache:et.cache},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){i=xh(a,i,H,f);break t}else if(H!==m){m=Q(Error(o(424)),i),Ot(m),i=xh(a,i,H,f);break t}else for(Fe&&(cn=m0(i.stateNode.containerInfo),xn=i,Te=!0,Wi=null,$a=!0),f=Va(i,null,H,f),i.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Mt(),H===m){i=ui(a,i,f);break t}Un(a,i,H,f)}i=i.child}return i;case 26:if(xa)return eu(a,i),a===null?(f=od(i.type,null,i.pendingProps,null))?i.memoizedState=f:Te||(i.stateNode=cd(i.type,i.pendingProps,ki.current,i)):i.memoizedState=od(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:if(un)return J(i),a===null&&un&&Te&&(m=i.stateNode=bo(i.type,i.pendingProps,ki.current,Tn.current,!1),xn=i,$a=!0,cn=cs(i.type,m,cn)),Un(a,i,i.pendingProps.children,f),eu(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Te&&(rd(i.type,i.pendingProps,Tn.current),(_=m=cn)&&(m=$h(m,i.type,i.pendingProps,$a),m!==null?(i.stateNode=m,xn=i,cn=kh(m),$a=!1,_=!0):_=!1),_||tt(i)),J(i),_=i.type,H=i.pendingProps,et=a!==null?a.memoizedProps:null,m=H.children,_l(_,H)?m=null:et!==null&&_l(_,et)&&(i.flags|=32),i.memoizedState!==null&&(_=ul(a,i,Rn,null,null,f),gi?qa._currentValue=_:qa._currentValue2=_),eu(a,i),Un(a,i,m,f),i.child;case 6:return a===null&&Te&&(sd(i.pendingProps,Tn.current),(a=f=cn)&&(f=Gu(f,i.pendingProps,$a),f!==null?(i.stateNode=f,xn=i,cn=null,a=!0):a=!1),a||tt(i)),null;case 13:return Hc(a,i,f);case 4:return at(i,i.stateNode.containerInfo),m=i.pendingProps,a===null?i.child=zl(i,null,m,f):Un(a,i,m,f),i.child;case 11:return Ah(a,i,i.type,i.pendingProps,f);case 7:return Un(a,i,i.pendingProps,f),i.child;case 8:return Un(a,i,i.pendingProps.children,f),i.child;case 12:return Un(a,i,i.pendingProps.children,f),i.child;case 10:return m=i.pendingProps,Xt(i,i.type,m.value),Un(a,i,m.children,f),i.child;case 9:return _=i.type._context,m=i.pendingProps.children,Ge(i),_=Be(_),m=m(_),i.flags|=1,Un(a,i,m,f),i.child;case 14:return _h(a,i,i.type,i.pendingProps,f);case 15:return Oh(a,i,i.type,i.pendingProps,f);case 19:return Dh(a,i,f);case 31:return m=i.pendingProps,f=i.mode,m={mode:m.mode,children:m.children},a===null?(f=Fs(m,f),f.ref=i.ref,i.child=f,f.return=i,i=f):(f=Qe(a.child,m),f.ref=i.ref,i.child=f,f.return=i,i=f),i;case 22:return Rh(a,i,f);case 24:return Ge(i),m=Be(Ye),a===null?(_=vc(),_===null&&(_=je,H=wr(),_.pooledCache=H,H.refCount++,H!==null&&(_.pooledCacheLanes|=f),_=H),i.memoizedState={parent:m,cache:_},Ls(i),Xt(i,Ye,_)):((a.lanes&f)!==0&&(ws(a,i),ri(i,null,null,f),On()),_=a.memoizedState,H=i.memoizedState,_.parent!==m?(_={parent:m,cache:m},i.memoizedState=_,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=_),Xt(i,Ye,m)):(m=H.cache,Xt(i,Ye,m),m!==_.cache&&he(i,[Ye],f,!0))),Un(a,i,i.pendingProps.children,f),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function Ta(a){a.flags|=4}function Ws(a,i){if(a!==null&&a.child===i.child)return!1;if((i.flags&16)!==0)return!0;for(a=i.child;a!==null;){if((a.flags&13878)!==0||(a.subtreeFlags&13878)!==0)return!0;a=a.sibling}return!1}function su(a,i,f,m){if(Mn)for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)mo(a,f.stateNode);else if(!(f.tag===4||un&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break;for(;f.sibling===null;){if(f.return===null||f.return===i)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(mi)for(var _=i.child;_!==null;){if(_.tag===5){var H=_.stateNode;f&&m&&(H=gf(H,_.type,_.memoizedProps)),mo(a,H)}else if(_.tag===6)H=_.stateNode,f&&m&&(H=Kh(H,_.memoizedProps)),mo(a,H);else if(_.tag!==4){if(_.tag===22&&_.memoizedState!==null)H=_.child,H!==null&&(H.return=_),su(a,_,!0,!0);else if(_.child!==null){_.child.return=_,_=_.child;continue}}if(_===i)break;for(;_.sibling===null;){if(_.return===null||_.return===i)return;_=_.return}_.sibling.return=_.return,_=_.sibling}}function Lc(a,i,f,m){var _=!1;if(mi)for(var H=i.child;H!==null;){if(H.tag===5){var et=H.stateNode;f&&m&&(et=gf(et,H.type,H.memoizedProps)),pf(a,et)}else if(H.tag===6)et=H.stateNode,f&&m&&(et=Kh(et,H.memoizedProps)),pf(a,et);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)_=H.child,_!==null&&(_.return=H),Lc(a,H,!0,!0),_=!0;else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===i)break;for(;H.sibling===null;){if(H.return===null||H.return===i)return _;H=H.return}H.sibling.return=H.return,H=H.sibling}return _}function ou(a,i){if(mi&&Ws(a,i)){a=i.stateNode;var f=a.containerInfo,m=df();Lc(m,i,!1,!1),a.pendingChildren=m,Ta(i),Qh(f,m)}}function $s(a,i,f,m){if(Mn)a.memoizedProps!==m&&Ta(i);else if(mi){var _=a.stateNode,H=a.memoizedProps;if((a=Ws(a,i))||H!==m){var et=Tn.current;H=Ph(_,f,H,m,!a,null),H===_?i.stateNode=_:(os(H,f,m,et)&&Ta(i),i.stateNode=H,a?su(H,i,!1,!1):Ta(i))}else i.stateNode=_}}function uu(a,i,f){if(Ou(i,f)){if(a.flags|=16777216,!yi(i,f))if(Ja())a.flags|=8192;else throw ga=Oo,_o}else a.flags&=-16777217}function wc(a,i){if(S0(i)){if(a.flags|=16777216,!Ef(i))if(Ja())a.flags|=8192;else throw ga=Oo,_o}else a.flags&=-16777217}function to(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?M():536870912,a.lanes|=i,va|=i)}function eo(a,i){if(!Te)switch(a.tailMode){case"hidden":i=a.tail;for(var f=null;i!==null;)i.alternate!==null&&(f=i),i=i.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function en(a){var i=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(i)for(var _=a.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=m,a.childLanes=f,i}function h0(a,i,f){var m=i.pendingProps;switch(it(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(i),null;case 1:return en(i),null;case 3:return f=i.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),Zt(Ye),X(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(gt(i)?Ta(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rt())),ou(a,i),en(i),null;case 26:if(xa){f=i.type;var _=i.memoizedState;return a===null?(Ta(i),_!==null?(en(i),wc(i,_)):(en(i),uu(i,f,m))):_?_!==a.memoizedState?(Ta(i),en(i),wc(i,_)):(en(i),i.flags&=-16777217):(Mn?a.memoizedProps!==m&&Ta(i):$s(a,i,f,m),en(i),uu(i,f,m)),null}case 27:if(un){if($(i),f=ki.current,_=i.type,a!==null&&i.stateNode!=null)Mn?a.memoizedProps!==m&&Ta(i):$s(a,i,_,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return en(i),null}a=Tn.current,gt(i)?ut(i,a):(a=bo(_,m,f,a,!0),i.stateNode=a,Ta(i))}return en(i),null}case 5:if($(i),f=i.type,a!==null&&i.stateNode!=null)$s(a,i,f,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return en(i),null}a=Tn.current,gt(i)?ut(i,a):(_=af(f,m,ki.current,a,i),su(_,i,!1,!1),i.stateNode=_,os(_,f,m,a)&&Ta(i))}return en(i),uu(i,i.type,i.pendingProps),null;case 6:if(a&&i.stateNode!=null)f=a.memoizedProps,Mn?f!==m&&Ta(i):mi&&(f!==m?(i.stateNode=lf(m,ki.current,Tn.current,i),Ta(i)):i.stateNode=a.stateNode);else{if(typeof m!="string"&&i.stateNode===null)throw Error(o(166));if(a=ki.current,f=Tn.current,gt(i)){if(!Fe)throw Error(o(176));if(a=i.stateNode,f=i.memoizedProps,m=null,_=xn,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}yf(a,f,i,m)||tt(i)}else i.stateNode=lf(m,a,f,i)}return en(i),null;case 13:if(m=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_=gt(i),m!==null&&m.dehydrated!==null){if(a===null){if(!_)throw Error(o(318));if(!Fe)throw Error(o(344));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));v0(_,i)}else Mt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;en(i),_=!1}else _=Rt(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=_),_=!0;if(!_)return i.flags&256?(Li(i),i):(Li(i),null)}if(Li(i),(i.flags&128)!==0)return i.lanes=f,i;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=i.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var H=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(H=m.memoizedState.cachePool.pool),H!==_&&(m.flags|=2048)}return f!==a&&f&&(i.child.flags|=8192),to(i,i.updateQueue),en(i),null;case 4:return X(),ou(a,i),a===null&&Ol(i.stateNode.containerInfo),en(i),null;case 10:return Zt(i.type),en(i),null;case 19:if(D(nn),_=i.memoizedState,_===null)return en(i),null;if(m=(i.flags&128)!==0,H=_.rendering,H===null)if(m)eo(_,!1);else{if(Ie!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(H=Js(a),H!==null){for(i.flags|=128,eo(_,!1),a=H.updateQueue,i.updateQueue=a,to(i,a),i.subtreeFlags=0,a=f,f=i.child;f!==null;)so(f,a),f=f.sibling;return S(nn,nn.current&1|2),i.child}a=a.sibling}_.tail!==null&&Na()>Nr&&(i.flags|=128,m=!0,eo(_,!1),i.lanes=4194304)}else{if(!m)if(a=Js(H),a!==null){if(i.flags|=128,m=!0,a=a.updateQueue,i.updateQueue=a,to(i,a),eo(_,!0),_.tail===null&&_.tailMode==="hidden"&&!H.alternate&&!Te)return en(i),null}else 2*Na()-_.renderingStartTime>Nr&&f!==536870912&&(i.flags|=128,m=!0,eo(_,!1),i.lanes=4194304);_.isBackwards?(H.sibling=i.child,i.child=H):(a=_.last,a!==null?a.sibling=H:i.child=H,_.last=H)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=Na(),i.sibling=null,a=nn.current,S(nn,m?a&1|2:a&1),i):(en(i),null);case 22:case 23:return Li(i),Vl(),m=i.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(f&536870912)!==0&&(i.flags&128)===0&&(en(i),i.subtreeFlags&6&&(i.flags|=8192)):en(i),f=i.updateQueue,f!==null&&to(i,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==f&&(i.flags|=2048),a!==null&&D($i),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),Zt(Ye),en(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function d0(a,i){switch(it(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Zt(Ye),X(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return $(i),null;case 13:if(Li(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Mt()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return D(nn),null;case 4:return X(),null;case 10:return Zt(i.type),null;case 22:case 23:return Li(i),Vl(),a!==null&&D($i),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Zt(Ye),null;case 25:return null;default:return null}}function zh(a,i){switch(it(i),i.tag){case 3:Zt(Ye),X();break;case 26:case 27:case 5:$(i);break;case 4:X();break;case 13:Li(i);break;case 19:D(nn);break;case 10:Zt(i.type);break;case 22:case 23:Li(i),Vl(),a!==null&&D($i);break;case 24:Zt(Ye)}}function Gn(a,i){try{var f=i.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var _=m.next;f=_;do{if((f.tag&a)===a){m=void 0;var H=f.create,et=f.inst;m=H(),et.destroy=m}f=f.next}while(f!==_)}}catch(st){me(i,i.return,st)}}function La(a,i,f){try{var m=i.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var H=_.next;m=H;do{if((m.tag&a)===a){var et=m.inst,st=et.destroy;if(st!==void 0){et.destroy=void 0,_=i;var St=f,Gt=st;try{Gt()}catch(Ht){me(_,St,Ht)}}}m=m.next}while(m!==H)}}catch(Ht){me(i,i.return,Ht)}}function Yc(a){var i=a.updateQueue;if(i!==null){var f=a.stateNode;try{fh(i,f)}catch(m){me(a,a.return,m)}}}function qc(a,i,f){f.props=Il(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){me(a,i,m)}}function kr(a,i){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=sr(a.stateNode);break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(_){me(a,i,_)}}function Qa(a,i){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(_){me(a,i,_)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){me(a,i,_)}else f.current=null}function cu(a){var i=a.type,f=a.memoizedProps,m=a.stateNode;try{ta(m,i,f,a)}catch(_){me(a,a.return,_)}}function Vc(a,i,f){try{on(a.stateNode,a.type,f,i,a)}catch(m){me(a,a.return,m)}}function Zl(a){return a.tag===5||a.tag===3||(xa?a.tag===26:!1)||(un?a.tag===27&&cr(a.type):!1)||a.tag===4}function no(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Zl(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(un&&a.tag===27&&cr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Jl(a,i,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?yo(f,a,i):of(f,a);else if(m!==4&&(un&&m===27&&cr(a.type)&&(f=a.stateNode,i=null),a=a.child,a!==null))for(Jl(a,i,f),a=a.sibling;a!==null;)Jl(a,i,f),a=a.sibling}function Wr(a,i,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?Mu(f,a,i):sf(f,a);else if(m!==4&&(un&&m===27&&cr(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Wr(a,i,f),a=a.sibling;a!==null;)Wr(a,i,f),a=a.sibling}function Xc(a,i,f){a=a.containerInfo;try{Du(a,f)}catch(m){me(i,i.return,m)}}function ml(a){var i=a.stateNode,f=a.memoizedProps;try{fd(a.type,f,i,a)}catch(m){me(a,a.return,m)}}function $r(a,i){for(Al(a.containerInfo),Dn=i;Dn!==null;)if(a=Dn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Dn=i;else for(;Dn!==null;){a=Dn;var f=a.alternate;switch(i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&f!==null){i=void 0;var m=a,_=f.memoizedProps;f=f.memoizedState;var H=m.stateNode;try{var et=Il(m.type,_,m.elementType===m.type);i=H.getSnapshotBeforeUpdate(et,f),H.__reactInternalSnapshotBeforeUpdate=i}catch(st){me(m,m.return,st)}}break;case 3:(i&1024)!==0&&Mn&&Xh(a.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=a.sibling,i!==null){i.return=a.return,Dn=i;break}Dn=a.return}}function fu(a,i,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:ci(a,f),m&4&&Gn(5,f);break;case 1:if(ci(a,f),m&4)if(a=f.stateNode,i===null)try{a.componentDidMount()}catch(et){me(f,f.return,et)}else{var _=Il(f.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(_,i,a.__reactInternalSnapshotBeforeUpdate)}catch(et){me(f,f.return,et)}}m&64&&Yc(f),m&512&&kr(f,f.return);break;case 3:if(ci(a,f),m&64&&(a=f.updateQueue,a!==null)){if(i=null,f.child!==null)switch(f.child.tag){case 27:case 5:i=sr(f.child.stateNode);break;case 1:i=f.child.stateNode}try{fh(a,i)}catch(et){me(f,f.return,et)}}break;case 27:un&&i===null&&m&4&&ml(f);case 26:case 5:ci(a,f),i===null&&m&4&&cu(f),m&512&&kr(f,f.return);break;case 12:ci(a,f);break;case 13:ci(a,f),m&4&&Qc(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=Wc.bind(null,f),mf(a,f))));break;case 22:if(m=f.memoizedState!==null||_i,!m){i=i!==null&&i.memoizedState!==null||ke,_=_i;var H=ke;_i=m,(ke=i)&&!H?Ka(a,f,(f.subtreeFlags&8772)!==0):ci(a,f),_i=_,ke=H}break;case 30:break;default:ci(a,f)}}function Pc(a){var i=a.alternate;i!==null&&(a.alternate=null,Pc(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&sn(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Bn(a,i,f){for(f=f.child;f!==null;)hu(a,i,f),f=f.sibling}function hu(a,i,f){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(hs,f)}catch{}switch(f.tag){case 26:if(xa){ke||Qa(f,i),Bn(a,i,f),f.memoizedState?bf(f.memoizedState):f.stateNode&&Cf(f.stateNode);break}case 27:if(un){ke||Qa(f,i);var m=Wt,_=oe;cr(f.type)&&(Wt=f.stateNode,oe=!1),Bn(a,i,f),Tf(f.stateNode),Wt=m,oe=_;break}case 5:ke||Qa(f,i);case 6:if(Mn){if(m=Wt,_=oe,Wt=null,Bn(a,i,f),Wt=m,oe=_,Wt!==null)if(oe)try{cf(Wt,f.stateNode)}catch(H){me(f,i,H)}else try{xu(Wt,f.stateNode)}catch(H){me(f,i,H)}}else Bn(a,i,f);break;case 18:Mn&&Wt!==null&&(oe?ld(Wt,f.stateNode):id(Wt,f.stateNode));break;case 4:Mn?(m=Wt,_=oe,Wt=f.stateNode.containerInfo,oe=!0,Bn(a,i,f),Wt=m,oe=_):(mi&&Xc(f.stateNode,f,df()),Bn(a,i,f));break;case 0:case 11:case 14:case 15:ke||La(2,f,i),ke||La(4,f,i),Bn(a,i,f);break;case 1:ke||(Qa(f,i),m=f.stateNode,typeof m.componentWillUnmount=="function"&&qc(f,i,m)),Bn(a,i,f);break;case 21:Bn(a,i,f);break;case 22:ke=(m=ke)||f.memoizedState!==null,Bn(a,i,f),ke=m;break;default:Bn(a,i,f)}}function Qc(a,i){if(Fe&&i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ad(a)}catch(f){me(i,i.return,f)}}function Uh(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new Sd),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new Sd),i;default:throw Error(o(435,a.tag))}}function Kc(a,i){var f=Uh(a);i.forEach(function(m){var _=$c.bind(null,a,m);f.has(m)||(f.add(m),m.then(_,_))})}function kn(a,i){var f=i.deletions;if(f!==null)for(var m=0;m<f.length;m++){var _=f[m],H=a,et=i;if(Mn){var st=et;t:for(;st!==null;){switch(st.tag){case 27:if(un){if(cr(st.type)){Wt=st.stateNode,oe=!1;break t}break}case 5:Wt=st.stateNode,oe=!1;break t;case 3:case 4:Wt=st.stateNode.containerInfo,oe=!0;break t}st=st.return}if(Wt===null)throw Error(o(160));hu(H,et,_),Wt=null,oe=!1}else hu(H,et,_);H=_.alternate,H!==null&&(H.return=null),_.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Gh(i,a),i=i.sibling}function Gh(a,i){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:kn(i,a),Wn(a),m&4&&(La(3,a,a.return),Gn(3,a),La(5,a,a.return));break;case 1:kn(i,a),Wn(a),m&512&&(ke||f===null||Qa(f,f.return)),m&64&&_i&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:if(xa){var _=ne;if(kn(i,a),Wn(a),m&512&&(ke||f===null||Qa(f,f.return)),m&4){m=f!==null?f.memoizedState:null;var H=a.memoizedState;f===null?H===null?a.stateNode===null?a.stateNode=ud(_,a.type,a.memoizedProps,a):wu(_,a.type,a.stateNode):a.stateNode=Lu(_,H,a.memoizedProps):m!==H?(m===null?f.stateNode!==null&&Cf(f.stateNode):bf(m),H===null?wu(_,a.type,a.stateNode):Lu(_,H,a.memoizedProps)):H===null&&a.stateNode!==null&&Vc(a,a.memoizedProps,f.memoizedProps)}break}case 27:if(un){kn(i,a),Wn(a),m&512&&(ke||f===null||Qa(f,f.return)),f!==null&&m&4&&Vc(a,a.memoizedProps,f.memoizedProps);break}case 5:if(kn(i,a),Wn(a),m&512&&(ke||f===null||Qa(f,f.return)),Mn){if(a.flags&32){_=a.stateNode;try{bi(_)}catch(Ht){me(a,a.return,Ht)}}m&4&&a.stateNode!=null&&(_=a.memoizedProps,Vc(a,_,f!==null?f.memoizedProps:_)),m&1024&&(Zu=!0)}break;case 6:if(kn(i,a),Wn(a),m&4&&Mn){if(a.stateNode===null)throw Error(o(162));m=a.memoizedProps,f=f!==null?f.memoizedProps:m,_=a.stateNode;try{uf(_,f,m)}catch(Ht){me(a,a.return,Ht)}}break;case 3:if(xa?(y0(),_=ne,ne=ju(i.containerInfo),kn(i,a),ne=_):kn(i,a),Wn(a),m&4){if(Mn&&Fe&&f!==null&&f.memoizedState.isDehydrated)try{nd(i.containerInfo)}catch(Ht){me(a,a.return,Ht)}if(mi){m=i.containerInfo,f=i.pendingChildren;try{Du(m,f)}catch(Ht){me(a,a.return,Ht)}}}Zu&&(Zu=!1,Ic(a));break;case 4:xa?(f=ne,ne=ju(a.stateNode.containerInfo),kn(i,a),Wn(a),ne=f):(kn(i,a),Wn(a)),m&4&&mi&&Xc(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:kn(i,a),Wn(a);break;case 13:kn(i,a),Wn(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(xr=Na()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Kc(a,m)));break;case 22:_=a.memoizedState!==null;var et=f!==null&&f.memoizedState!==null,st=_i,St=ke;if(_i=st||_,ke=St||et,kn(i,a),ke=St,_i=st,Wn(a),m&8192&&(i=a.stateNode,i._visibility=_?i._visibility&-2:i._visibility|1,_&&(f===null||et||_i||ke||Hn(a)),Mn)){t:if(f=null,Mn)for(i=a;;){if(i.tag===5||xa&&i.tag===26){if(f===null){et=f=i;try{H=et.stateNode,_?Nu(H):hf(et.stateNode,et.memoizedProps)}catch(Ht){me(et,et.return,Ht)}}}else if(i.tag===6){if(f===null){et=i;try{var Gt=et.stateNode;_?ff(Gt):Vh(Gt,et.memoizedProps)}catch(Ht){me(et,et.return,Ht)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;f===i&&(f=null),i=i.return}f===i&&(f=null),i.sibling.return=i.return,i=i.sibling}}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Kc(a,f))));break;case 19:kn(i,a),Wn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Kc(a,m)));break;case 30:break;case 21:break;default:kn(i,a),Wn(a)}}function Wn(a){var i=a.flags;if(i&2){try{if(Mn){for(var f,m=a.return;m!==null;){if(Zl(m)){f=m;break}m=m.return}if(f==null)throw Error(o(160));switch(f.tag){case 27:if(un){var _=f.stateNode,H=no(a);Wr(a,H,_);break}case 5:var et=f.stateNode;f.flags&32&&(bi(et),f.flags&=-33);var st=no(a);Wr(a,st,et);break;case 3:case 4:var St=f.stateNode.containerInfo,Gt=no(a);Jl(a,Gt,St);break;default:throw Error(o(161))}}}catch(Ht){me(a,a.return,Ht)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Ic(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Ic(i),i.tag===5&&i.flags&1024&&or(i.stateNode),a=a.sibling}}function ci(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)fu(a,i.alternate,i),i=i.sibling}function Hn(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:La(4,i,i.return),Hn(i);break;case 1:Qa(i,i.return);var f=i.stateNode;typeof f.componentWillUnmount=="function"&&qc(i,i.return,f),Hn(i);break;case 27:un&&Tf(i.stateNode);case 26:case 5:Qa(i,i.return),Hn(i);break;case 22:i.memoizedState===null&&Hn(i);break;case 30:Hn(i);break;default:Hn(i)}a=a.sibling}}function Ka(a,i,f){for(f=f&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,_=a,H=i,et=H.flags;switch(H.tag){case 0:case 11:case 15:Ka(_,H,f),Gn(4,H);break;case 1:if(Ka(_,H,f),m=H,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Gt){me(m,m.return,Gt)}if(m=H,_=m.updateQueue,_!==null){var st=m.stateNode;try{var St=_.shared.hiddenCallbacks;if(St!==null)for(_.shared.hiddenCallbacks=null,_=0;_<St.length;_++)jo(St[_],st)}catch(Gt){me(m,m.return,Gt)}}f&&et&64&&Yc(H),kr(H,H.return);break;case 27:un&&ml(H);case 26:case 5:Ka(_,H,f),f&&m===null&&et&4&&cu(H),kr(H,H.return);break;case 12:Ka(_,H,f);break;case 13:Ka(_,H,f),f&&et&4&&Qc(_,H);break;case 22:H.memoizedState===null&&Ka(_,H,f),kr(H,H.return);break;case 30:break;default:Ka(_,H,f)}i=i.sibling}}function ua(a,i){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&ll(f))}function vl(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&ll(a))}function wa(a,i,f,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ao(a,i,f,m),i=i.sibling}function ao(a,i,f,m){var _=i.flags;switch(i.tag){case 0:case 11:case 15:wa(a,i,f,m),_&2048&&Gn(9,i);break;case 1:wa(a,i,f,m);break;case 3:wa(a,i,f,m),_&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&ll(a)));break;case 12:if(_&2048){wa(a,i,f,m),a=i.stateNode;try{var H=i.memoizedProps,et=H.id,st=H.onPostCommit;typeof st=="function"&&st(et,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(St){me(i,i.return,St)}}else wa(a,i,f,m);break;case 13:wa(a,i,f,m);break;case 23:break;case 22:H=i.stateNode,et=i.alternate,i.memoizedState!==null?H._visibility&2?wa(a,i,f,m):Fl(a,i):H._visibility&2?wa(a,i,f,m):(H._visibility|=2,wi(a,i,f,m,(i.subtreeFlags&10256)!==0)),_&2048&&ua(et,i);break;case 24:wa(a,i,f,m),_&2048&&vl(i.alternate,i);break;default:wa(a,i,f,m)}}function wi(a,i,f,m,_){for(_=_&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var H=a,et=i,st=f,St=m,Gt=et.flags;switch(et.tag){case 0:case 11:case 15:wi(H,et,st,St,_),Gn(8,et);break;case 23:break;case 22:var Ht=et.stateNode;et.memoizedState!==null?Ht._visibility&2?wi(H,et,st,St,_):Fl(H,et):(Ht._visibility|=2,wi(H,et,st,St,_)),_&&Gt&2048&&ua(et.alternate,et);break;case 24:wi(H,et,st,St,_),_&&Gt&2048&&vl(et.alternate,et);break;default:wi(H,et,st,St,_)}i=i.sibling}}function Fl(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var f=a,m=i,_=m.flags;switch(m.tag){case 22:Fl(f,m),_&2048&&ua(m.alternate,m);break;case 24:Fl(f,m),_&2048&&vl(m.alternate,m);break;default:Fl(f,m)}i=i.sibling}}function Aa(a){if(a.subtreeFlags&re)for(a=a.child;a!==null;)Zc(a),a=a.sibling}function Zc(a){switch(a.tag){case 26:Aa(a),a.flags&re&&(a.memoizedState!==null?So(ne,a.memoizedState,a.memoizedProps):Ne(a.type,a.memoizedProps));break;case 5:Aa(a),a.flags&re&&Ne(a.type,a.memoizedProps);break;case 3:case 4:if(xa){var i=ne;ne=ju(a.stateNode.containerInfo),Aa(a),ne=i}else Aa(a);break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=re,re=16777216,Aa(a),re=i):Aa(a));break;default:Aa(a)}}function io(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function fi(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var m=i[f];Dn=m,du(m,a)}io(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bh(a),a=a.sibling}function Bh(a){switch(a.tag){case 0:case 11:case 15:fi(a),a.flags&2048&&La(9,a,a.return);break;case 3:fi(a);break;case 12:fi(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Qn(a)):fi(a);break;default:fi(a)}}function Qn(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var m=i[f];Dn=m,du(m,a)}io(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:La(8,i,i.return),Qn(i);break;case 22:f=i.stateNode,f._visibility&2&&(f._visibility&=-3,Qn(i));break;default:Qn(i)}a=a.sibling}}function du(a,i){for(;Dn!==null;){var f=Dn;switch(f.tag){case 0:case 11:case 15:La(8,f,i);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ll(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,Dn=m;else t:for(f=a;Dn!==null;){m=Dn;var _=m.sibling,H=m.return;if(Pc(m),m===f){Dn=null;break t}if(_!==null){_.return=H,Dn=_;break t}Dn=H}}}function Ia(a){var i=Ya(a);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(o(364));return i}if(a=p0(a),a===null)throw Error(o(362));return a.stateNode.current}function pu(a,i){var f=a.tag;switch(i.$$typeof){case In:if(a.type===i.value)return!0;break;case ei:t:{for(i=i.value,a=[a,0],f=0;f<a.length;){var m=a[f++],_=m.tag,H=a[f++],et=i[H];if(_!==5&&_!==26&&_!==27||!ur(m)){for(;et!=null&&pu(m,et);)H++,et=i[H];if(H===i.length){i=!0;break t}else for(m=m.child;m!==null;)a.push(m,H),m=m.sibling}}i=!1}return i;case tl:if((f===5||f===26||f===27)&&Yh(a.stateNode,i.value))return!0;break;case Xa:if((f===5||f===6||f===26||f===27)&&(a=rf(a),a!==null&&0<=a.indexOf(i.value)))return!0;break;case ms:if((f===5||f===26||f===27)&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ts(a){switch(a.$$typeof){case In:return"<"+(O(a.value)||"Unknown")+">";case ei:return":has("+(ts(a)||"")+")";case tl:return'[role="'+a.value+'"]';case Xa:return'"'+a.value+'"';case ms:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function yl(a,i){var f=[];a=[a,0];for(var m=0;m<a.length;){var _=a[m++],H=_.tag,et=a[m++],st=i[et];if(H!==5&&H!==26&&H!==27||!ur(_)){for(;st!=null&&pu(_,st);)et++,st=i[et];if(et===i.length)f.push(_);else for(_=_.child;_!==null;)a.push(_,et),_=_.sibling}}return f}function lo(a,i){if(!Si)throw Error(o(363));a=Ia(a),a=yl(a,i),i=[],a=Array.from(a);for(var f=0;f<a.length;){var m=a[f++],_=m.tag;if(_===5||_===26||_===27)ur(m)||i.push(m.stateNode);else for(m=m.child;m!==null;)a.push(m),m=m.sibling}return i}function ca(){if((se&2)!==0&&ce!==0)return ce&-ce;if(Ft.T!==null){var a=Ti;return a!==0?a:li()}return Rl()}function gu(){Vn===0&&(Vn=(ce&536870912)===0||Te?L():536870912);var a=Ua.current;return a!==null&&(a.flags|=32),Vn}function fa(a,i,f){(a===je&&(be===2||be===9)||a.cancelPendingCommit!==null)&&(jn(a,0),Za(a,ce,Vn,!1)),T(a,f),((se&2)===0||a!==je)&&(a===je&&((se&2)===0&&(Ze|=f),Ie===4&&Za(a,ce,Vn,!1)),ba(a))}function _a(a,i,f){if((se&6)!==0)throw Error(o(327));var m=!f&&(i&124)===0&&(i&a.expiredLanes)===0||U(a,i),_=m?Hh(a,i):ro(a,i,!0),H=m;do{if(_===0){el&&!m&&Za(a,i,0,!1);break}else{if(f=a.current.alternate,H&&!es(f)){_=ro(a,i,!1),H=!1;continue}if(_===2){if(H=i,a.errorRecoveryDisabledLanes&H)var et=0;else et=a.pendingLanes&-536870913,et=et!==0?et:et&536870912?536870912:0;if(et!==0){i=et;t:{var st=a;_=Mr;var St=Fe&&st.current.memoizedState.isDehydrated;if(St&&(jn(st,et).flags|=256),et=ro(st,et,!1),et!==2){if(Ju&&!St){st.errorRecoveryDisabledLanes|=H,Ze|=H,_=4;break t}H=Zn,Zn=_,H!==null&&(Zn===null?Zn=H:Zn.push.apply(Zn,H))}_=et}if(H=!1,_!==2)continue}}if(_===1){jn(a,0),Za(a,i,0,!0);break}t:{switch(m=a,H=_,H){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Za(m,i,Vn,!Oi);break t;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(_=xr+300-Na(),10<_)){if(Za(m,i,Vn,!Oi),j(m,0,!0)!==0)break t;m.timeoutHandle=wh(kl.bind(null,m,f,Zn,Jn,Fu,i,Vn,Ze,va,Oi,H,2,-0,0),_);break t}kl(m,f,Zn,Jn,Fu,i,Vn,Ze,va,Oi,H,0,-0,0)}}break}while(!0);ba(a)}function kl(a,i,f,m,_,H,et,st,St,Gt,Ht,Vt,Pt,ie){if(a.timeoutHandle=pi,Vt=i.subtreeFlags,(Vt&8192||(Vt&16785408)===16785408)&&(ae(),Zc(i),Vt=vn(),Vt!==null)){a.cancelPendingCommit=Vt(qi.bind(null,a,i,H,f,m,_,et,st,St,Ht,1,Pt,ie)),Za(a,H,et,!Gt);return}qi(a,i,H,f,m,_,et,st,St)}function es(a){for(var i=a;;){var f=i.tag;if((f===0||f===11||f===15)&&i.flags&16384&&(f=i.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var _=f[m],H=_.getSnapshot;_=_.value;try{if(!na(H(),_))return!1}catch{return!1}}if(f=i.child,i.subtreeFlags&16384&&f!==null)f.return=i,i=f;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Za(a,i,f,m){i&=~Ri,i&=~Ze,a.suspendedLanes|=i,a.pingedLanes&=~i,m&&(a.warmLanes|=i),m=a.expirationTimes;for(var _=i;0<_;){var H=31-ea(_),et=1<<H;m[H]=-1,_&=~et}f!==0&&B(a,f,i)}function ns(){return(se&6)===0?(ft(0),!1):!0}function ha(){if($t!==null){if(be===0)var a=$t.return;else a=$t,Yn=Nl=null,Bi(a),ma=null,Ar=0,a=$t;for(;a!==null;)zh(a.alternate,a),a=a.return;$t=null}}function jn(a,i){var f=a.timeoutHandle;f!==pi&&(a.timeoutHandle=pi,us(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),ha(),je=a,$t=f=Qe(a.current,null),ce=i,be=0,Ve=null,Oi=!1,el=U(a,i),Ju=!1,va=Vn=Ri=Ze=la=Ie=0,Zn=Mr=null,Fu=!1,(i&8)!==0&&(i|=i&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=i;0<m;){var _=31-ea(m),H=1<<_;i|=a[_],m&=~H}return Pa=i,qr(),f}function Yi(a,i){kt=null,Ft.H=qn,i===vr||i===yr?(i=ch(),be=3):i===_o?(i=ch(),be=4):be=i===Gf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ve=i,$t===null&&(Ie=1,Zr(a,Q(i,a.current)))}function Ja(){var a=Ua.current;return a===null?!0:(ce&4194048)===ce?ia===null:(ce&62914560)===ce||(ce&536870912)!==0?a===ia:!1}function Fa(){var a=Ft.H;return Ft.H=qn,a===null?qn:a}function hi(){var a=Ft.A;return Ft.A=De,a}function mu(){Ie=4,Oi||(ce&4194048)!==ce&&Ua.current!==null||(el=!0),(la&134217727)===0&&(Ze&134217727)===0||je===null||Za(je,ce,Vn,!1)}function ro(a,i,f){var m=se;se|=2;var _=Fa(),H=hi();(je!==a||ce!==i)&&(Jn=null,jn(a,i)),i=!1;var et=Ie;t:do try{if(be!==0&&$t!==null){var st=$t,St=Ve;switch(be){case 8:ha(),et=6;break t;case 3:case 2:case 9:case 6:Ua.current===null&&(i=!0);var Gt=be;if(be=0,Ve=null,Oa(a,st,St,Gt),f&&el){et=0;break t}break;default:Gt=be,be=0,Ve=null,Oa(a,st,St,Gt)}}Jc(),et=Ie;break}catch(Ht){Yi(a,Ht)}while(!0);return i&&a.shellSuspendCounter++,Yn=Nl=null,se=m,Ft.H=_,Ft.A=H,$t===null&&(je=null,ce=0,qr()),et}function Jc(){for(;$t!==null;)we($t)}function Hh(a,i){var f=se;se|=2;var m=Fa(),_=hi();je!==a||ce!==i?(Jn=null,Nr=Na()+500,jn(a,i)):el=U(a,i);t:do try{if(be!==0&&$t!==null){i=$t;var H=Ve;e:switch(be){case 1:be=0,Ve=null,Oa(a,i,H,1);break;case 2:case 9:if(rl(H)){be=0,Ve=null,pe(i);break}i=function(){be!==2&&be!==9||je!==a||(be=7),ba(a)},H.then(i,i);break t;case 3:be=7;break t;case 4:be=5;break t;case 7:rl(H)?(be=0,Ve=null,pe(i)):(be=0,Ve=null,Oa(a,i,H,7));break;case 5:var et=null;switch($t.tag){case 26:et=$t.memoizedState;case 5:case 27:var st=$t,St=st.type,Gt=st.pendingProps;if(et?Ef(et):yi(St,Gt)){be=0,Ve=null;var Ht=st.sibling;if(Ht!==null)$t=Ht;else{var Vt=st.return;Vt!==null?($t=Vt,$n(Vt)):$t=null}break e}}be=0,Ve=null,Oa(a,i,H,5);break;case 6:be=0,Ve=null,Oa(a,i,H,6);break;case 8:ha(),Ie=6;break t;default:throw Error(o(462))}}Ln();break}catch(Pt){Yi(a,Pt)}while(!0);return Yn=Nl=null,Ft.H=m,Ft.A=_,se=f,$t!==null?0:(je=null,ce=0,qr(),Ie)}function Ln(){for(;$t!==null&&!qu();)we($t)}function we(a){var i=Fr(a.alternate,a,Pa);a.memoizedProps=a.pendingProps,i===null?$n(a):$t=i}function pe(a){var i=a,f=i.alternate;switch(i.tag){case 15:case 0:i=nu(f,i,i.pendingProps,i.type,void 0,ce);break;case 11:i=nu(f,i,i.pendingProps,i.type.render,i.ref,ce);break;case 5:Bi(i);default:zh(f,i),i=$t=so(i,Pa),i=Fr(f,i,Pa)}a.memoizedProps=a.pendingProps,i===null?$n(a):$t=i}function Oa(a,i,f,m){Yn=Nl=null,Bi(i),ma=null,Ar=0;var _=i.return;try{if(f0(a,_,i,f,ce)){Ie=1,Zr(a,Q(f,a.current)),$t=null;return}}catch(H){if(_!==null)throw $t=_,H;Ie=1,Zr(a,Q(f,a.current)),$t=null;return}i.flags&32768?(Te||m===1?a=!0:el||(ce&536870912)!==0?a=!1:(Oi=a=!0,(m===2||m===9||m===3||m===6)&&(m=Ua.current,m!==null&&m.tag===13&&(m.flags|=16384))),vu(i,a)):$n(i)}function $n(a){var i=a;do{if((i.flags&32768)!==0){vu(i,Oi);return}a=i.return;var f=h0(i.alternate,i,Pa);if(f!==null){$t=f;return}if(i=i.sibling,i!==null){$t=i;return}$t=i=a}while(i!==null);Ie===0&&(Ie=5)}function vu(a,i){do{var f=d0(a.alternate,a);if(f!==null){f.flags&=32767,$t=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!i&&(a=a.sibling,a!==null)){$t=a;return}$t=a=f}while(a!==null);Ie=6,$t=null}function qi(a,i,f,m,_,H,et,st,St){a.cancelPendingCommit=null;do $l();while(Re!==0);if((se&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(H=i.lanes|i.childLanes,H|=Iu,y(a,f,H,et,st,St),a===je&&($t=je=null,ce=0),Dr=i,al=a,vs=f,Mi=H,ys=_,ku=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,is(_f,function(){return as(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=Ft.T,Ft.T=null,_=vi(),mn(2),et=se,se|=4;try{$r(a,i,f)}finally{se=et,mn(_),Ft.T=m}}Re=1,Fc(),kc(),Wl()}}function Fc(){if(Re===1){Re=0;var a=al,i=Dr,f=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||f){f=Ft.T,Ft.T=null;var m=vi();mn(2);var _=se;se|=4;try{Gh(i,a),go(a.containerInfo)}finally{se=_,mn(m),Ft.T=f}}a.current=i,Re=2}}function kc(){if(Re===2){Re=0;var a=al,i=Dr,f=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||f){f=Ft.T,Ft.T=null;var m=vi();mn(2);var _=se;se|=4;try{fu(a,i.alternate,i)}finally{se=_,mn(m),Ft.T=f}}Re=3}}function Wl(){if(Re===4||Re===3){Re=0,pd();var a=al,i=Dr,f=vs,m=ku;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Re=5:(Re=0,Dr=al=null,Sl(a,a.pendingLanes));var _=a.pendingLanes;if(_===0&&(nl=null),I(f),i=i.stateNode,da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(hs,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=Ft.T,_=vi(),mn(2),Ft.T=null;try{for(var H=a.onRecoverableError,et=0;et<m.length;et++){var st=m[et];H(st.value,{componentStack:st.stack})}}finally{Ft.T=i,mn(_)}}(vs&3)!==0&&$l(),ba(a),_=a.pendingLanes,(f&4194090)!==0&&(_&42)!==0?a===Wu?xi++:(xi=0,Wu=a):xi=0,ft(0)}}function Sl(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,ll(i)))}function $l(a){return Fc(),kc(),Wl(),as()}function as(){if(Re!==5)return!1;var a=al,i=Mi;Mi=0;var f=I(vs),m=32>f?32:f;f=Ft.T;var _=vi();try{mn(m),Ft.T=null,m=ys,ys=null;var H=al,et=vs;if(Re=0,Dr=al=null,vs=0,(se&6)!==0)throw Error(o(331));var st=se;if(se|=4,Bh(H.current),ao(H,H.current,et,m),se=st,ft(0,!1),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(hs,H)}catch{}return!0}finally{mn(_),Ft.T=f,Sl(a,i)}}function yu(a,i,f){i=Q(f,i),i=Uc(a.stateNode,i,2),a=Gi(a,i,2),a!==null&&(T(a,2),ba(a))}function me(a,i,f){if(a.tag===3)yu(a,a,f);else for(;i!==null;){if(i.tag===3){yu(i,a,f);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(nl===null||!nl.has(m))){a=Q(f,a),f=Th(2),m=Gi(i,f,2),m!==null&&(Gc(f,m,i,a),T(m,2),ba(m));break}}i=i.return}}function ka(a,i,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Ul;var _=new Set;m.set(i,_)}else _=m.get(i),_===void 0&&(_=new Set,m.set(i,_));_.has(f)||(Ju=!0,_.add(f),a=bl.bind(null,a,i,f),i.then(a,a))}function bl(a,i,f){var m=a.pingCache;m!==null&&m.delete(i),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,je===a&&(ce&f)===f&&(Ie===4||Ie===3&&(ce&62914560)===ce&&300>Na()-xr?(se&2)===0&&jn(a,0):Ri|=f,va===ce&&(va=0)),ba(a)}function di(a,i){i===0&&(i=M()),a=ql(a,i),a!==null&&(T(a,i),ba(a))}function Wc(a){var i=a.memoizedState,f=0;i!==null&&(f=i.retryLane),di(a,f)}function $c(a,i){var f=0;switch(a.tag){case 13:var m=a.stateNode,_=a.memoizedState;_!==null&&(f=_.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(o(314))}m!==null&&m.delete(i),di(a,f)}function is(a,i){return To(a,i)}function Su(a,i,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Qe(a,i){var f=a.alternate;return f===null?(f=s(a.tag,i,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=i,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,i=a.dependencies,f.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function so(a,i){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,i=f.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function oo(a,i,f,m,_,H){var et=0;if(m=a,typeof a=="function")Vi(a)&&(et=1);else if(typeof a=="string")et=xa&&un?Sf(a,f,Tn.current)?26:fs(a)?27:5:xa?Sf(a,f,Tn.current)?26:5:un&&fs(a)?27:5;else t:switch(a){case El:return a=s(31,f,i,_),a.elementType=El,a.lanes=H,a;case ar:return tr(f.children,_,H,i);case ir:et=8,_|=24;break;case uo:return a=s(12,f,i,_|2),a.elementType=uo,a.lanes=H,a;case Qi:return a=s(13,f,i,_),a.elementType=Qi,a.lanes=H,a;case Ki:return a=s(19,f,i,_),a.elementType=Ki,a.lanes=H,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Tu:case Pi:et=10;break t;case co:et=9;break t;case Au:et=11;break t;case _u:et=14;break t;case Ii:et=16,m=null;break t}et=29,f=Error(o(130,a===null?"null":typeof a,"")),m=null}return i=s(et,f,i,_),i.elementType=a,i.type=m,i.lanes=H,i}function tr(a,i,f,m){return a=s(7,a,m,i),a.lanes=f,a}function tf(a,i,f){return a=s(6,a,null,i),a.lanes=f,a}function ef(a,i,f){return i=s(4,a.children!==null?a.children:[],a.key,i),i.lanes=f,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}function gn(a,i,f,m,_,H,et,st){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=pi,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=A(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A(0),this.hiddenUpdates=A(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=H,this.onRecoverableError=et,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function bu(a,i,f,m,_,H,et,st,St,Gt,Ht,Vt){return a=new gn(a,i,f,et,st,St,Gt,Vt),i=1,H===!0&&(i|=24),H=s(3,null,null,i),a.current=H,H.stateNode=a,i=wr(),i.refCount++,a.pooledCache=i,i.refCount++,H.memoizedState={element:m,isDehydrated:f,cache:i},Ls(H),a}function ls(a){return a?(a=Ml,a):Ml}function rs(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=g(i),a=a!==null?p(a):null,a===null?null:sr(a.stateNode)}function Cu(a,i,f,m,_,H){_=ls(_),m.context===null?m.context=_:m.pendingContext=_,m=Ui(i),m.payload={element:f},H=H===void 0?null:H,H!==null&&(m.callback=H),f=Gi(a,m,i),f!==null&&(fa(f,a,i),Ba(f,a,i))}function er(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<i?f:i}}function Cl(a,i){er(a,i),(a=a.alternate)&&er(a,i)}var de={},jh=t0(),Ra=l3(),Eu=Object.assign,nr=Symbol.for("react.element"),ss=Symbol.for("react.transitional.element"),Xi=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),ir=Symbol.for("react.strict_mode"),uo=Symbol.for("react.profiler"),Tu=Symbol.for("react.provider"),co=Symbol.for("react.consumer"),Pi=Symbol.for("react.context"),Au=Symbol.for("react.forward_ref"),Qi=Symbol.for("react.suspense"),Ki=Symbol.for("react.suspense_list"),_u=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),El=Symbol.for("react.activity"),fo=Symbol.for("react.memo_cache_sentinel"),ho=Symbol.iterator,po=Symbol.for("react.client.reference"),lr=Array.isArray,Ft=jh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rr=n.rendererVersion,Lh=n.rendererPackageName,Zi=n.extraDevToolsConfig,sr=n.getPublicInstance,nf=n.getRootHostContext,Tl=n.getChildHostContext,Al=n.prepareForCommit,go=n.resetAfterCommit,af=n.createInstance;n.cloneMutableInstance;var mo=n.appendInitialChild,os=n.finalizeInitialChildren,_l=n.shouldSetTextContent,lf=n.createTextInstance;n.cloneMutableTextInstance;var wh=n.scheduleTimeout,us=n.cancelTimeout,pi=n.noTimeout,gi=n.isPrimaryRenderer;n.warnsIfNotActing;var Mn=n.supportsMutation,mi=n.supportsPersistence,Fe=n.supportsHydration,Ya=n.getInstanceFromNode;n.beforeActiveInstanceBlur;var Ol=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var mn=n.setCurrentUpdatePriority,vi=n.getCurrentUpdatePriority,Rl=n.resolveUpdatePriority;n.trackSchedulerEvent,n.resolveEventType,n.resolveEventTimeStamp;var Ma=n.shouldAttemptEagerTransition,sn=n.detachDeletedInstance;n.requestPostPaintCallback;var Ou=n.maySuspendCommit,yi=n.preloadInstance,ae=n.startSuspendingCommit,Ne=n.suspendInstance;n.suspendOnActiveViewTransition;var vn=n.waitForCommitToBeReady,Ji=n.NotPendingTransition,qa=n.HostTransitionContext,or=n.resetFormInstance;n.bindToConsole;var Ru=n.supportsMicrotasks,vo=n.scheduleMicrotask,Si=n.supportsTestSelectors,p0=n.findFiberRoot,ln=n.getBoundingRect,rf=n.getTextContent,ur=n.isHiddenSubtree,Yh=n.matchAccessibilityRole,qh=n.setFocusIfFocusable,g0=n.setupIntersectionObserver,sf=n.appendChild,of=n.appendChildToContainer,uf=n.commitTextUpdate,ta=n.commitMount,on=n.commitUpdate,Mu=n.insertBefore,yo=n.insertInContainerBefore,xu=n.removeChild,cf=n.removeChildFromContainer,bi=n.resetTextContent,Nu=n.hideInstance,ff=n.hideTextInstance,hf=n.unhideInstance,Vh=n.unhideTextInstance;n.cancelViewTransitionName,n.cancelRootViewTransitionName,n.restoreRootViewTransitionName,n.cloneRootViewTransitionContainer,n.removeRootViewTransitionClone,n.measureClonedInstance,n.hasInstanceChanged,n.hasInstanceAffectedParent,n.startViewTransition,n.startGestureTransition,n.stopGestureTransition,n.getCurrentGestureOffset,n.subscribeToGestureDirection,n.createViewTransitionInstance;var Xh=n.clearContainer;n.createFragmentInstance,n.updateFragmentInstanceFiber,n.commitNewChildToFragmentInstance,n.deleteChildFromFragmentInstance;var Ph=n.cloneInstance,df=n.createContainerChildSet,pf=n.appendChildToContainerChildSet,Qh=n.finalizeContainerChildren,Du=n.replaceContainerChildren,gf=n.cloneHiddenInstance,Kh=n.cloneHiddenTextInstance,zu=n.isSuspenseInstancePending,Uu=n.isSuspenseInstanceFallback,Ih=n.getSuspenseInstanceFallbackErrorDetails,mf=n.registerSuspenseInstanceRetry,Zh=n.canHydrateFormStateMarker,Jh=n.isFormStateMarkerMatching,vf=n.getNextHydratableSibling,Fh=n.getNextHydratableSiblingAfterSingleton,kh=n.getFirstHydratableChild,m0=n.getFirstHydratableChildWithinContainer,Wh=n.getFirstHydratableChildWithinSuspenseInstance,cs=n.getFirstHydratableChildWithinSingleton,$h=n.canHydrateInstance,Gu=n.canHydrateTextInstance,Bu=n.canHydrateSuspenseInstance,td=n.hydrateInstance,yf=n.hydrateTextInstance,v0=n.hydrateSuspenseInstance,ed=n.getNextHydratableInstanceAfterSuspenseInstance,nd=n.commitHydratedContainer,ad=n.commitHydratedSuspenseInstance,id=n.clearSuspenseBoundary,ld=n.clearSuspenseBoundaryFromContainer,Hu=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var rd=n.validateHydratableInstance,sd=n.validateHydratableTextInstance,xa=n.supportsResources,Sf=n.isHostHoistableType,ju=n.getHoistableRoot,od=n.getResource,Lu=n.acquireResource,bf=n.releaseResource,ud=n.hydrateHoistable,wu=n.mountHoistable,Cf=n.unmountHoistable,cd=n.createHoistableInstance,y0=n.prepareToCommitHoistables,S0=n.mayResourceSuspendCommit,Ef=n.preloadResource,So=n.suspendResource,un=n.supportsSingletons,bo=n.resolveSingletonInstance,fd=n.acquireSingletonInstance,Tf=n.releaseSingletonInstance,fs=n.isHostSingletonType,cr=n.isSingletonScope,Co=[],fr=-1,Ml={},ea=Math.clz32?Math.clz32:G,hd=Math.log,dd=Math.LN2,Ci=256,Eo=4194304,To=Ra.unstable_scheduleCallback,Yu=Ra.unstable_cancelCallback,qu=Ra.unstable_shouldYield,pd=Ra.unstable_requestPaint,Na=Ra.unstable_now,Af=Ra.unstable_ImmediatePriority,gd=Ra.unstable_UserBlockingPriority,_f=Ra.unstable_NormalPriority,Of=Ra.unstable_IdlePriority,yn=Ra.log,wn=Ra.unstable_setDisableYieldValue,hs=null,da=null,Vu,Rf,hr=!1,Mf=new WeakMap,Fi=[],dr=0,Xu=null,pr=0,pa=[],Da=0,xl=null,Ei=1,Wa="",Tn=E(null),gr=E(null),ki=E(null),ds=E(null),xn=null,cn=null,Te=!1,Wi=null,$a=!1,ti=Error(o(519)),na=typeof Object.is=="function"?Object.is:xt,Pu=E(null),Nl=null,Yn=null,xf=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){i.aborted=!0,a.forEach(function(f){return f()})}},md=Ra.unstable_scheduleCallback,Qu=Ra.unstable_NormalPriority,Ye={$$typeof:Pi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},He=null,ps=null,Nf=!1,Ao=!1,mr=!1,za=0,gs=null,Ku=0,Ti=0,aa=null,Df=Ft.S;Ft.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ca(a,i),Df!==null&&Df(a,i)};var $i=E(null),vd=Object.prototype.hasOwnProperty,vr=Error(o(460)),_o=Error(o(474)),yr=Error(o(542)),Oo={then:function(){}},ga=null,_e=[],Dl=0,Iu=0,Ke=!1,zf=!1,Sr=E(null),Ro=E(0),Oe=0,kt=null,ge=null,fn=null,Mo=!1,br=!1,Cr=!1,Er=0,Nn=0,Kn=null,yd=0,qn={readContext:Be,use:Vo,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},Uf={readContext:Be,use:Vo,useCallback:function(a,i){return En().memoizedState=[a,i===void 0?null:i],a},useContext:Be,useEffect:Mc,useImperativeHandle:function(a,i,f){f=f!=null?f.concat([a]):null,Hi(4194308,4,oi.bind(null,i,a),f)},useLayoutEffect:function(a,i){return Hi(4194308,4,a,i)},useInsertionEffect:function(a,i){Hi(4,2,a,i)},useMemo:function(a,i){var f=En();i=i===void 0?null:i;var m=a();if(Cr){Z(!0);try{a()}finally{Z(!1)}}return f.memoizedState=[m,i],m},useReducer:function(a,i,f){var m=En();if(f!==void 0){var _=f(i);if(Cr){Z(!0);try{f(i)}finally{Z(!1)}}}else _=i;return m.memoizedState=m.baseState=_,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:_},m.queue=a,a=a.dispatch=Qs.bind(null,kt,a),[m.memoizedState,a]},useRef:function(a){var i=En();return a={current:a},i.memoizedState=a},useState:function(a){a=qs(a);var i=a.queue,f=vh.bind(null,kt,i);return i.dispatch=f,[a.memoizedState,f]},useDebugValue:Ql,useDeferredValue:function(a,i){var f=En();return Ir(f,a,i)},useTransition:function(){var a=qs(!1);return a=Xs.bind(null,kt,a.queue,!0,!1),En().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,f){var m=kt,_=En();if(Te){if(f===void 0)throw Error(o(407));f=f()}else{if(f=i(),je===null)throw Error(o(349));(ce&124)!==0||Po(m,i,f)}_.memoizedState=f;var H={value:f,getSnapshot:i};return _.queue=H,Mc(Ys.bind(null,m,H,a),[a]),m.flags|=2048,oa(9,Qr(),Cc.bind(null,m,H,f,i),null),f},useId:function(){var a=En(),i=je.identifierPrefix;if(Te){var f=Wa,m=Ei;f=(m&~(1<<32-ea(m)-1)).toString(32)+f,i="«"+i+"R"+f,f=Er++,0<f&&(i+="H"+f.toString(32)),i+="»"}else f=yd++,i="«"+i+"r"+f.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:Fo,useFormState:Rc,useActionState:Rc,useOptimistic:function(a){var i=En();i.memoizedState=i.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=f,i=Ks.bind(null,kt,!0,f),f.dispatch=i,[a,i]},useMemoCache:Pr,useCacheRefresh:function(){return En().memoizedState=ko.bind(null,kt)}},Ai={readContext:Be,use:Vo,useCallback:ji,useContext:Be,useEffect:Io,useImperativeHandle:Zo,useInsertionEffect:xc,useLayoutEffect:Kr,useMemo:Jo,useReducer:ja,useRef:Ko,useState:function(){return ja(Ha)},useDebugValue:Ql,useDeferredValue:function(a,i){var f=pn();return Nc(f,ge.memoizedState,a,i)},useTransition:function(){var a=ja(Ha)[0],i=pn().memoizedState;return[typeof a=="boolean"?a:Xr(a),i]},useSyncExternalStore:dh,useId:Fn,useHostTransitionStatus:Fo,useFormState:Qo,useActionState:Qo,useOptimistic:function(a,i){var f=pn();return Ec(f,ge,a,i)},useMemoCache:Pr,useCacheRefresh:fl},Tr={readContext:Be,use:Vo,useCallback:ji,useContext:Be,useEffect:Io,useImperativeHandle:Zo,useInsertionEffect:xc,useLayoutEffect:Kr,useMemo:Jo,useReducer:Xo,useRef:Ko,useState:function(){return Xo(Ha)},useDebugValue:Ql,useDeferredValue:function(a,i){var f=pn();return ge===null?Ir(f,a,i):Nc(f,ge.memoizedState,a,i)},useTransition:function(){var a=Xo(Ha)[0],i=pn().memoizedState;return[typeof a=="boolean"?a:Xr(a),i]},useSyncExternalStore:dh,useId:Fn,useHostTransitionStatus:Fo,useFormState:Vs,useActionState:Vs,useOptimistic:function(a,i){var f=pn();return ge!==null?Ec(f,ge,a,i):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Pr,useCacheRefresh:fl},ma=null,Ar=0,zl=yh(!0),Va=yh(!1),Ua=E(null),ia=null,nn=E(0),_r={enqueueSetState:function(a,i,f){a=a._reactInternals;var m=ca(),_=Ui(m);_.payload=i,f!=null&&(_.callback=f),i=Gi(a,_,m),i!==null&&(fa(i,a,m),Ba(i,a,m))},enqueueReplaceState:function(a,i,f){a=a._reactInternals;var m=ca(),_=Ui(m);_.tag=1,_.payload=i,f!=null&&(_.callback=f),i=Gi(a,_,m),i!==null&&(fa(i,a,m),Ba(i,a,m))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var f=ca(),m=Ui(f);m.tag=2,i!=null&&(m.callback=i),i=Gi(a,m,f),i!==null&&(fa(i,a,f),Ba(i,a,f))}},Or=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Gf=Error(o(461)),An=!1,Rr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},_i=!1,ke=!1,Zu=!1,Sd=typeof WeakSet=="function"?WeakSet:Set,Dn=null,Wt=null,oe=!1,ne=null,re=8192,De={getCacheForType:function(a){var i=Be(Ye),f=i.data.get(a);return f===void 0&&(f=a(),i.data.set(a,f)),f}},In=0,ei=1,tl=2,ms=3,Xa=4;if(typeof Symbol=="function"&&Symbol.for){var qe=Symbol.for;In=qe("selector.component"),ei=qe("selector.has_pseudo_class"),tl=qe("selector.role"),ms=qe("selector.test_id"),Xa=qe("selector.text")}var Ul=typeof WeakMap=="function"?WeakMap:Map,se=0,je=null,$t=null,ce=0,be=0,Ve=null,Oi=!1,el=!1,Ju=!1,Pa=0,Ie=0,la=0,Ze=0,Ri=0,Vn=0,va=0,Mr=null,Zn=null,Fu=!1,xr=0,Nr=1/0,Jn=null,nl=null,Re=0,al=null,Dr=null,vs=0,Mi=0,ys=null,ku=null,xi=0,Wu=null;return de.attemptContinuousHydration=function(a){if(a.tag===13){var i=ql(a,67108864);i!==null&&fa(i,a,67108864),Cl(a,67108864)}},de.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var i=ca();i=q(i);var f=ql(a,i);f!==null&&fa(f,a,i),Cl(a,i)}},de.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var i=w(a.pendingLanes);if(i!==0){for(a.pendingLanes|=2,a.entangledLanes|=2;i;){var f=1<<31-ea(i);a.entanglements[1]|=f,i&=~f}ba(a),(se&6)===0&&(Nr=Na()+500,ft(0))}}break;case 13:i=ql(a,2),i!==null&&fa(i,a,2),ns(),Cl(a,2)}},de.batchedUpdates=function(a,i){return a(i)},de.createComponentSelector=function(a){return{$$typeof:In,value:a}},de.createContainer=function(a,i,f,m,_,H,et,st,St,Gt){return bu(a,i,!1,null,f,m,H,et,st,St,Gt,null)},de.createHasPseudoClassSelector=function(a){return{$$typeof:ei,value:a}},de.createHydrationContainer=function(a,i,f,m,_,H,et,st,St,Gt,Ht,Vt,Pt){return a=bu(f,m,!0,a,_,H,st,St,Gt,Ht,Vt,Pt),a.context=ls(null),f=a.current,m=ca(),m=q(m),_=Ui(m),_.callback=i??null,Gi(f,_,m),i=m,a.current.lanes=i,T(a,i),ba(a),a},de.createPortal=function(a,i,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:m==null?null:""+m,children:a,containerInfo:i,implementation:f}},de.createRoleSelector=function(a){return{$$typeof:tl,value:a}},de.createTestNameSelector=function(a){return{$$typeof:ms,value:a}},de.createTextSelector=function(a){return{$$typeof:Xa,value:a}},de.defaultOnCaughtError=function(a){console.error(a)},de.defaultOnRecoverableError=function(a){Or(a)},de.defaultOnUncaughtError=function(a){Or(a)},de.deferredUpdates=function(a){var i=Ft.T,f=vi();try{return mn(32),Ft.T=null,a()}finally{mn(f),Ft.T=i}},de.discreteUpdates=function(a,i,f,m,_){var H=Ft.T,et=vi();try{return mn(2),Ft.T=null,a(i,f,m,_)}finally{mn(et),Ft.T=H,se===0&&(Nr=Na()+500)}},de.findAllNodes=lo,de.findBoundingRects=function(a,i){if(!Si)throw Error(o(363));i=lo(a,i),a=[];for(var f=0;f<i.length;f++)a.push(ln(i[f]));for(i=a.length-1;0<i;i--){f=a[i];for(var m=f.x,_=m+f.width,H=f.y,et=H+f.height,st=i-1;0<=st;st--)if(i!==st){var St=a[st],Gt=St.x,Ht=Gt+St.width,Vt=St.y,Pt=Vt+St.height;if(m>=Gt&&H>=Vt&&_<=Ht&&et<=Pt){a.splice(i,1);break}else if(m!==Gt||f.width!==St.width||Pt<H||Vt>et){if(!(H!==Vt||f.height!==St.height||Ht<m||Gt>_)){Gt>m&&(St.width+=Gt-m,St.x=m),Ht<_&&(St.width=_-Gt),a.splice(i,1);break}}else{Vt>H&&(St.height+=Vt-H,St.y=H),Pt<et&&(St.height=et-Vt),a.splice(i,1);break}}}return a},de.findHostInstance=rs,de.findHostInstanceWithNoPortals=function(a){return a=g(a),a=a!==null?b(a):null,a===null?null:sr(a.stateNode)},de.findHostInstanceWithWarning=function(a){return rs(a)},de.flushPassiveEffects=$l,de.flushSyncFromReconciler=function(a){var i=se;se|=1;var f=Ft.T,m=vi();try{if(mn(2),Ft.T=null,a)return a()}finally{mn(m),Ft.T=f,se=i,(se&6)===0&&ft(0)}},de.flushSyncWork=ns,de.focusWithin=function(a,i){if(!Si)throw Error(o(363));for(a=Ia(a),i=yl(a,i),i=Array.from(i),a=0;a<i.length;){var f=i[a++],m=f.tag;if(!ur(f)){if((m===5||m===26||m===27)&&qh(f.stateNode))return!0;for(f=f.child;f!==null;)i.push(f),f=f.sibling}}return!1},de.getFindAllNodesFailureDescription=function(a,i){if(!Si)throw Error(o(363));var f=0,m=[];a=[Ia(a),0];for(var _=0;_<a.length;){var H=a[_++],et=H.tag,st=a[_++],St=i[st];if((et!==5&&et!==26&&et!==27||!ur(H))&&(pu(H,St)&&(m.push(ts(St)),st++,st>f&&(f=st)),st<i.length))for(H=H.child;H!==null;)a.push(H,st),H=H.sibling}if(f<i.length){for(a=[];f<i.length;f++)a.push(ts(i[f]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},de.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 27:case 5:return sr(a.child.stateNode);default:return a.child.stateNode}},de.injectIntoDevTools=function(){var a={bundleType:0,version:rr,rendererPackageName:Lh,currentDispatcherRef:Ft,reconcilerVersion:"19.1.0"};if(Zi!==null&&(a.rendererConfig=Zi),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)a=!0;else{try{hs=i.inject(a),da=i}catch{}a=!!i.checkDCE}}return a},de.isAlreadyRendering=function(){return(se&6)!==0},de.observeVisibleRects=function(a,i,f,m){if(!Si)throw Error(o(363));a=lo(a,i);var _=g0(a,f,m).disconnect;return{disconnect:function(){_()}}},de.shouldError=function(){return null},de.shouldSuspend=function(){return!1},de.startHostTransition=function(a,i,f,m){if(a.tag!==5)throw Error(o(476));var _=Ps(a).queue;Xs(a,_,i,Ji,f===null?r:function(){var H=Ps(a).next.queue;return Kl(a,H,{},ca()),f(m)})},de.updateContainer=function(a,i,f,m){var _=i.current,H=ca();return Cu(_,H,a,i,f,m),H},de.updateContainerSync=function(a,i,f,m){return Cu(i.current,2,a,i,f,m),2},de},d.exports.default=d.exports,Object.defineProperty(d.exports,"__esModule",{value:!0})})(up)),up.exports}var Rg;function s3(){return Rg||(Rg=1,op.exports=r3()),op.exports}var o3=s3();const u3=$d(o3);var hp={exports:{}},Ur={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function c3(){return Mg||(Mg=1,Ur.ConcurrentRoot=1,Ur.ContinuousEventPriority=8,Ur.DefaultEventPriority=32,Ur.DiscreteEventPriority=2,Ur.IdleEventPriority=268435456,Ur.LegacyRoot=0,Ur.NoEventPriority=0),Ur}var xg;function f3(){return xg||(xg=1,hp.exports=c3()),hp.exports}var s0=f3();const Ng={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Dg=!1,zg=!1;const Wd=".react-konva-event",h3=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,d3=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,p3={};function o0(d,n,s=p3){if(!Dg&&"zIndex"in n&&(console.warn(d3),Dg=!0),!zg&&n.draggable){var r=n.x!==void 0||n.y!==void 0,o=n.onDragEnd||n.onDragMove;r&&!o&&(console.warn(h3),zg=!0)}for(var h in s)if(!Ng[h]){var c=h.slice(0,2)==="on",g=s[h]!==n[h];if(c&&g){var p=h.substr(2).toLowerCase();p.substr(0,7)==="content"&&(p="content"+p.substr(7,1).toUpperCase()+p.substr(8)),d.off(p,s[h])}var b=!n.hasOwnProperty(h);b&&d.setAttr(h,void 0)}var R=n._useStrictMode,O={},E=!1;const D={};for(var h in n)if(!Ng[h]){var c=h.slice(0,2)==="on",S=s[h]!==n[h];if(c&&S){var p=h.substr(2).toLowerCase();p.substr(0,7)==="content"&&(p="content"+p.substr(7,1).toUpperCase()+p.substr(8)),n[h]&&(D[p]=n[h])}!c&&(n[h]!==s[h]||R&&n[h]!==d.getAttr(h))&&(E=!0,O[h]=n[h])}E&&(d.setAttrs(O),Bs(d));for(var p in D)d.off(p+Wd),d.on(p+Wd,D[p])}function Bs(d){if(!qt.autoDrawEnabled){var n=d.getLayer()||d.getStage();n&&n.batchDraw()}}var dp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function g3(){return Ug||(Ug=1,(function(d){function n(x,Y){var Q=x.length;x.push(Y);t:for(;0<Q;){var W=Q-1>>>1,nt=x[W];if(0<o(nt,Y))x[W]=Y,x[Q]=nt,Q=W;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var Y=x[0],Q=x.pop();if(Q!==Y){x[0]=Q;t:for(var W=0,nt=x.length,F=nt>>>1;W<F;){var it=2*(W+1)-1,at=x[it],X=it+1,J=x[X];if(0>o(at,Q))X<nt&&0>o(J,at)?(x[W]=J,x[X]=Q,W=X):(x[W]=at,x[it]=Q,W=it);else if(X<nt&&0>o(J,Q))x[W]=J,x[X]=Q,W=X;else break t}}return Y}function o(x,Y){var Q=x.sortIndex-Y.sortIndex;return Q!==0?Q:x.id-Y.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],R=1,O=null,E=3,D=!1,S=!1,G=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L(x){for(var Y=s(b);Y!==null;){if(Y.callback===null)r(b);else if(Y.startTime<=x)r(b),Y.sortIndex=Y.expirationTime,n(p,Y);else break;Y=s(b)}}function M(x){if(G=!1,L(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var Y=s(b);Y!==null&&P(M,Y.startTime-x)}}var A=!1,T=-1,y=5,B=-1;function N(){return w?!0:!(d.unstable_now()-B<y)}function q(){if(w=!1,A){var x=d.unstable_now();B=x;var Y=!0;try{t:{S=!1,G&&(G=!1,U(T),T=-1),D=!0;var Q=E;try{e:{for(L(x),O=s(p);O!==null&&!(O.expirationTime>x&&N());){var W=O.callback;if(typeof W=="function"){O.callback=null,E=O.priorityLevel;var nt=W(O.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){O.callback=nt,L(x),Y=!0;break e}O===s(p)&&r(p),L(x)}else r(p);O=s(p)}if(O!==null)Y=!0;else{var F=s(b);F!==null&&P(M,F.startTime-x),Y=!1}}break t}finally{O=null,E=Q,D=!1}Y=void 0}}finally{Y?I():A=!1}}}var I;if(typeof z=="function")I=function(){z(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){j(q,0)};function P(x,Y){T=j(function(){x(d.unstable_now())},Y)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var Y=3;break;default:Y=E}var Q=E;E=Y;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return Y()}finally{E=Q}},d.unstable_scheduleCallback=function(x,Y,Q){var W=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:R++,callback:Y,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>W?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(G?(U(T),T=-1):G=!0,P(M,Q-W))):(x.sortIndex=nt,n(p,x),S||D||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var Y=E;return function(){var Q=E;E=Y;try{return x.apply(this,arguments)}finally{E=Q}}}})(pp)),pp}var Gg;function m3(){return Gg||(Gg=1,dp.exports=g3()),dp.exports}var gp=m3();const Dm={},v3={};fc.Node.prototype._applyProps=o0;let zm=s0.DefaultEventPriority;function y3(d,n){if(typeof n=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${n}`);return}d.add(n),Bs(d)}function S3(d,n,s){let r=fc[d];r||(console.error(`Konva has no node with the type ${d}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${d}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=fc.Group);const o={},h={};for(var c in n)if(c!=="ref"){var g=c.slice(0,2)==="on";g?h[c]=n[c]:o[c]=n[c]}const p=new r(o);return o0(p,h),p}function b3(d,n,s){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${d}"`)}function C3(d,n,s){return!1}function E3(d){return d}function T3(){return null}function A3(){return null}function _3(d,n,s,r){return v3}function O3(){}function R3(d){}function M3(d,n){return!1}function x3(){return Dm}function N3(){return Dm}const D3=setTimeout,z3=clearTimeout,U3=!0,G3=d=>{d()},B3=-1;function H3(d,n){return!1}const j3=!1,L3=!1,w3=!0,Y3=!1,q3=!1;function V3(d,n){n.parent===d?n.moveToTop():d.add(n),Bs(d)}function X3(d,n){n.parent===d?n.moveToTop():d.add(n),Bs(d)}function Um(d,n,s){n._remove(),d.add(n),n.setZIndex(s.getZIndex()),Bs(d)}function P3(d,n,s){Um(d,n,s)}function Q3(d,n){n.destroy(),n.off(Wd),Bs(d)}function K3(d,n){n.destroy(),n.off(Wd),Bs(d)}function I3(d,n,s){console.error(`Text components are not yet supported in ReactKonva. You text is: "${s}"`)}function Z3(d,n,s){}function J3(d,n,s,r){o0(d,r,s)}function F3(d){d.hide(),Bs(d)}function k3(d){}function W3(d,n){(n.visible==null||n.visible)&&d.show()}function $3(d,n){}function t5(d){}function e5(){}function n5(){return s0.DefaultEventPriority}function a5(){}function i5(){return null}function l5(d){zm=d}function r5(){return zm}function s5(){return s0.DiscreteEventPriority}function o5(){return!1}function u5(){}function c5(){return!1}function f5(){return!0}function h5(){}function d5(){}function p5(){return null}const g5=null;function m5(){}const v5=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:g5,appendChild:V3,appendChildToContainer:X3,appendInitialChild:y3,cancelTimeout:z3,clearContainer:t5,commitMount:Z3,commitTextUpdate:I3,commitUpdate:J3,createInstance:S3,createTextInstance:b3,detachDeletedInstance:e5,finalizeInitialChildren:C3,getChildHostContext:N3,getCurrentEventPriority:n5,getCurrentUpdatePriority:r5,getInstanceFromScope:i5,getPublicInstance:E3,getRootHostContext:x3,hideInstance:F3,hideTextInstance:k3,idlePriority:gp.unstable_IdlePriority,insertBefore:Um,insertInContainerBefore:P3,isPrimaryRenderer:j3,maySuspendCommit:c5,noTimeout:B3,now:gp.unstable_now,preloadInstance:f5,prepareForCommit:T3,preparePortalMount:A3,prepareScopeUpdate:a5,prepareUpdate:_3,removeChild:Q3,removeChildFromContainer:K3,requestPostPaintCallback:u5,resetAfterCommit:O3,resetFormInstance:m5,resetTextContent:R3,resolveUpdatePriority:s5,run:gp.unstable_runWithPriority,scheduleMicrotask:G3,scheduleTimeout:D3,setCurrentUpdatePriority:l5,shouldAttemptEagerTransition:o5,shouldDeprioritizeSubtree:M3,shouldSetTextContent:H3,startSuspendingCommit:h5,supportsHydration:q3,supportsMicrotasks:U3,supportsMutation:w3,supportsPersistence:Y3,suspendInstance:d5,unhideInstance:W3,unhideTextInstance:$3,waitForCommitToBeReady:p5,warnsIfNotActing:L3},Symbol.toStringTag,{value:"Module"}));function Gm(d,n,s){if(!d)return;if(s(d)===!0)return d;let r=d.child;for(;r;){const o=Gm(r,n,s);if(o)return o;r=r.sibling}}function Bm(d){try{return Object.defineProperties(d,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return d}}const qp=Bm(At.createContext(null));class Hm extends At.Component{render(){return At.createElement(qp.Provider,{value:this._reactInternals},this.props.children)}}function y5(){const d=At.useContext(qp);if(d===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=At.useId();return At.useMemo(()=>{for(const s of[d,d==null?void 0:d.alternate]){if(!s)continue;const r=Gm(s,!1,o=>{let h=o.memoizedState;for(;h;){if(h.memoizedState===n)return!0;h=h.next}});if(r)return r}},[d,n])}const S5=Symbol.for("react.context"),b5=d=>d!==null&&typeof d=="object"&&"$$typeof"in d&&d.$$typeof===S5;function C5(){const d=y5(),[n]=At.useState(()=>new Map);n.clear();let s=d;for(;s;){const r=s.type;b5(r)&&r!==qp&&!n.has(r)&&n.set(r,At.use(Bm(r))),s=s.return}return n}function E5(){const d=C5();return At.useMemo(()=>Array.from(d.keys()).reduce((n,s)=>r=>At.createElement(n,null,At.createElement(s.Provider,{...r,value:d.get(s)})),n=>At.createElement(Hm,{...n})),[d])}if(Sn.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function T5(d){const n=Sn.useRef({});return Sn.useLayoutEffect(()=>{n.current=d}),Sn.useLayoutEffect(()=>()=>{n.current={}},[]),n.current}const A5=()=>{const d=Sn.useRef(0);return Sn.useMemo(()=>{d.current++},[]),d.current>1},_5=d=>{const n=Sn.useRef(null),s=Sn.useRef(null),r=Sn.useRef(null),o=T5(d),h=E5(),c=Sn.useRef(!1),g=b=>{const{forwardedRef:R}=d;R&&(typeof R=="function"?R(b):R.current=b)},p=A5();return Sn.useLayoutEffect(()=>c.current&&p?()=>{c.current=!1,g(null),oc.updateContainer(null,r.current,null),s.current.destroy()}:(c.current=!0,s.current=new fc.Stage({width:d.width,height:d.height,container:n.current}),g(s.current),r.current=oc.createContainer(s.current,s0.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),oc.updateContainer(Sn.createElement(h,{},d.children),r.current,null,()=>{}),()=>{p||(g(null),oc.updateContainer(null,r.current,null),s.current.destroy())}),[]),Sn.useLayoutEffect(()=>{g(s.current),o0(s.current,d,o),oc.updateContainer(Sn.createElement(h,{},d.children),r.current,null)}),Sn.createElement("div",{ref:n,id:d.id,accessKey:d.accessKey,className:d.className,role:d.role,style:d.style,tabIndex:d.tabIndex,title:d.title})},hc="Layer",dc="Line",oc=u3(v5);oc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Sn.version,rendererPackageName:"react-konva"});const Vp=Sn.forwardRef((d,n)=>Sn.createElement(Hm,{},Sn.createElement(_5,{...d,forwardedRef:n})));var mp={exports:{}};/*!
 * @license Copyright 2015-2022 Ably Real-time Ltd (ably.com)
 * 
 * Ably JavaScript Library v1.2.50
 * https://github.com/ably/ably-js
 * 
 * Released under the Apache Licence v2.0
 */var Bg;function jm(){return Bg||(Bg=1,(function(d,n){(function(r,o){d.exports=o()})(window,function(){return(function(s){var r={};function o(h){if(r[h])return r[h].exports;var c=r[h]={i:h,l:!1,exports:{}};return s[h].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=s,o.c=r,o.d=function(h,c,g){o.o(h,c)||Object.defineProperty(h,c,{enumerable:!0,get:g})},o.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},o.t=function(h,c){if(c&1&&(h=o(h)),c&8||c&4&&typeof h=="object"&&h&&h.__esModule)return h;var g=Object.create(null);if(o.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),c&2&&typeof h!="string")for(var p in h)o.d(g,p,(function(b){return h[b]}).bind(null,p));return g},o.n=function(h){var c=h&&h.__esModule?function(){return h.default}:function(){return h};return o.d(c,"a",c),c},o.o=function(h,c){return Object.prototype.hasOwnProperty.call(h,c)},o.p="",o(o.s=42)})([(function(s,r,o){o.r(r),o.d(r,"__extends",function(){return c}),o.d(r,"__assign",function(){return g}),o.d(r,"__rest",function(){return p}),o.d(r,"__decorate",function(){return b}),o.d(r,"__param",function(){return R}),o.d(r,"__metadata",function(){return O}),o.d(r,"__awaiter",function(){return E}),o.d(r,"__generator",function(){return D}),o.d(r,"__createBinding",function(){return S}),o.d(r,"__exportStar",function(){return G}),o.d(r,"__values",function(){return w}),o.d(r,"__read",function(){return j}),o.d(r,"__spread",function(){return U}),o.d(r,"__spreadArrays",function(){return z}),o.d(r,"__spreadArray",function(){return L}),o.d(r,"__await",function(){return M}),o.d(r,"__asyncGenerator",function(){return A}),o.d(r,"__asyncDelegator",function(){return T}),o.d(r,"__asyncValues",function(){return y}),o.d(r,"__makeTemplateObject",function(){return B}),o.d(r,"__importStar",function(){return q}),o.d(r,"__importDefault",function(){return I}),o.d(r,"__classPrivateFieldGet",function(){return Z}),o.d(r,"__classPrivateFieldSet",function(){return K});/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var h=function(P,x){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,Q){Y.__proto__=Q}||function(Y,Q){for(var W in Q)Object.prototype.hasOwnProperty.call(Q,W)&&(Y[W]=Q[W])},h(P,x)};function c(P,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");h(P,x);function Y(){this.constructor=P}P.prototype=x===null?Object.create(x):(Y.prototype=x.prototype,new Y)}var g=function(){return g=Object.assign||function(x){for(var Y,Q=1,W=arguments.length;Q<W;Q++){Y=arguments[Q];for(var nt in Y)Object.prototype.hasOwnProperty.call(Y,nt)&&(x[nt]=Y[nt])}return x},g.apply(this,arguments)};function p(P,x){var Y={};for(var Q in P)Object.prototype.hasOwnProperty.call(P,Q)&&x.indexOf(Q)<0&&(Y[Q]=P[Q]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var W=0,Q=Object.getOwnPropertySymbols(P);W<Q.length;W++)x.indexOf(Q[W])<0&&Object.prototype.propertyIsEnumerable.call(P,Q[W])&&(Y[Q[W]]=P[Q[W]]);return Y}function b(P,x,Y,Q){var W=arguments.length,nt=W<3?x:Q===null?Q=Object.getOwnPropertyDescriptor(x,Y):Q,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(P,x,Y,Q);else for(var it=P.length-1;it>=0;it--)(F=P[it])&&(nt=(W<3?F(nt):W>3?F(x,Y,nt):F(x,Y))||nt);return W>3&&nt&&Object.defineProperty(x,Y,nt),nt}function R(P,x){return function(Y,Q){x(Y,Q,P)}}function O(P,x){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(P,x)}function E(P,x,Y,Q){function W(nt){return nt instanceof Y?nt:new Y(function(F){F(nt)})}return new(Y||(Y=Promise))(function(nt,F){function it(J){try{X(Q.next(J))}catch($){F($)}}function at(J){try{X(Q.throw(J))}catch($){F($)}}function X(J){J.done?nt(J.value):W(J.value).then(it,at)}X((Q=Q.apply(P,x||[])).next())})}function D(P,x){var Y={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},Q,W,nt,F;return F={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function it(X){return function(J){return at([X,J])}}function at(X){if(Q)throw new TypeError("Generator is already executing.");for(;Y;)try{if(Q=1,W&&(nt=X[0]&2?W.return:X[0]?W.throw||((nt=W.return)&&nt.call(W),0):W.next)&&!(nt=nt.call(W,X[1])).done)return nt;switch(W=0,nt&&(X=[X[0]&2,nt.value]),X[0]){case 0:case 1:nt=X;break;case 4:return Y.label++,{value:X[1],done:!1};case 5:Y.label++,W=X[1],X=[0];continue;case 7:X=Y.ops.pop(),Y.trys.pop();continue;default:if(nt=Y.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(X[0]===6||X[0]===2)){Y=0;continue}if(X[0]===3&&(!nt||X[1]>nt[0]&&X[1]<nt[3])){Y.label=X[1];break}if(X[0]===6&&Y.label<nt[1]){Y.label=nt[1],nt=X;break}if(nt&&Y.label<nt[2]){Y.label=nt[2],Y.ops.push(X);break}nt[2]&&Y.ops.pop(),Y.trys.pop();continue}X=x.call(P,Y)}catch(J){X=[6,J],W=0}finally{Q=nt=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}}var S=Object.create?(function(P,x,Y,Q){Q===void 0&&(Q=Y),Object.defineProperty(P,Q,{enumerable:!0,get:function(){return x[Y]}})}):(function(P,x,Y,Q){Q===void 0&&(Q=Y),P[Q]=x[Y]});function G(P,x){for(var Y in P)Y!=="default"&&!Object.prototype.hasOwnProperty.call(x,Y)&&S(x,P,Y)}function w(P){var x=typeof Symbol=="function"&&Symbol.iterator,Y=x&&P[x],Q=0;if(Y)return Y.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&Q>=P.length&&(P=void 0),{value:P&&P[Q++],done:!P}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(P,x){var Y=typeof Symbol=="function"&&P[Symbol.iterator];if(!Y)return P;var Q=Y.call(P),W,nt=[],F;try{for(;(x===void 0||x-- >0)&&!(W=Q.next()).done;)nt.push(W.value)}catch(it){F={error:it}}finally{try{W&&!W.done&&(Y=Q.return)&&Y.call(Q)}finally{if(F)throw F.error}}return nt}function U(){for(var P=[],x=0;x<arguments.length;x++)P=P.concat(j(arguments[x]));return P}function z(){for(var P=0,x=0,Y=arguments.length;x<Y;x++)P+=arguments[x].length;for(var Q=Array(P),W=0,x=0;x<Y;x++)for(var nt=arguments[x],F=0,it=nt.length;F<it;F++,W++)Q[W]=nt[F];return Q}function L(P,x,Y){if(Y||arguments.length===2)for(var Q=0,W=x.length,nt;Q<W;Q++)(nt||!(Q in x))&&(nt||(nt=Array.prototype.slice.call(x,0,Q)),nt[Q]=x[Q]);return P.concat(nt||Array.prototype.slice.call(x))}function M(P){return this instanceof M?(this.v=P,this):new M(P)}function A(P,x,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=Y.apply(P,x||[]),W,nt=[];return W={},F("next"),F("throw"),F("return"),W[Symbol.asyncIterator]=function(){return this},W;function F(tt){Q[tt]&&(W[tt]=function(ut){return new Promise(function(Tt,gt){nt.push([tt,ut,Tt,gt])>1||it(tt,ut)})})}function it(tt,ut){try{at(Q[tt](ut))}catch(Tt){$(nt[0][3],Tt)}}function at(tt){tt.value instanceof M?Promise.resolve(tt.value.v).then(X,J):$(nt[0][2],tt)}function X(tt){it("next",tt)}function J(tt){it("throw",tt)}function $(tt,ut){tt(ut),nt.shift(),nt.length&&it(nt[0][0],nt[0][1])}}function T(P){var x,Y;return x={},Q("next"),Q("throw",function(W){throw W}),Q("return"),x[Symbol.iterator]=function(){return this},x;function Q(W,nt){x[W]=P[W]?function(F){return(Y=!Y)?{value:M(P[W](F)),done:W==="return"}:nt?nt(F):F}:nt}}function y(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=P[Symbol.asyncIterator],Y;return x?x.call(P):(P=typeof w=="function"?w(P):P[Symbol.iterator](),Y={},Q("next"),Q("throw"),Q("return"),Y[Symbol.asyncIterator]=function(){return this},Y);function Q(nt){Y[nt]=P[nt]&&function(F){return new Promise(function(it,at){F=P[nt](F),W(it,at,F.done,F.value)})}}function W(nt,F,it,at){Promise.resolve(at).then(function(X){nt({value:X,done:it})},F)}}function B(P,x){return Object.defineProperty?Object.defineProperty(P,"raw",{value:x}):P.raw=x,P}var N=Object.create?(function(P,x){Object.defineProperty(P,"default",{enumerable:!0,value:x})}):function(P,x){P.default=x};function q(P){if(P&&P.__esModule)return P;var x={};if(P!=null)for(var Y in P)Y!=="default"&&Object.prototype.hasOwnProperty.call(P,Y)&&S(x,P,Y);return N(x,P),x}function I(P){return P&&P.__esModule?P:{default:P}}function Z(P,x,Y,Q){if(Y==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?P!==x||!Q:!x.has(P))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?Q:Y==="a"?Q.call(P):Q?Q.value:x.get(P)}function K(P,x,Y,Q,W){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!W)throw new TypeError("Private accessor was defined without a setter");if(typeof x=="function"?P!==x||!W:!x.has(P))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?W.call(P,Y):W?W.value=Y:x.set(P,Y),Y}}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0}),r.allToUpperCase=r.allToLowerCase=r.encodeBody=r.decodeBody=r.Format=r.promisify=r.trim=r.arrChooseN=r.randomHexString=r.randomString=r.cheapRandStr=r.dataSizeBytes=r.inspectBody=r.inspectError=r.isErrorInfoOrPartialErrorInfo=r.now=r.parseQueryString=r.toQueryString=r.arrPopRandomElement=r.defaultPostHeaders=r.defaultGetHeaders=r.allSame=r.arrEvery=r.arrFilter=r.arrMap=r.safeArrForEach=r.arrForEach=r.forInOwnNonNullProperties=r.valuesArray=r.keysArray=r.arrWithoutValue=r.arrDeleteValue=r.arrIn=r.arrIndexOf=r.arrSubtract=r.arrIntersectOb=r.arrIntersect=r.intersect=r.containsValue=r.inherits=r.prototypicalClone=r.shallowClone=r.isEmptyArg=r.isOnlyPropIn=r.isEmpty=r.isObject=r.ensureArray=r.isArray=r.copy=r.mixin=void 0,r.arrEquals=r.toBase64=r.matchDerivedChannel=r.shallowEquals=r.getGlobalObject=r.getRetryTime=r.getJitterCoefficient=r.getBackoffCoefficient=void 0;var c=o(0),g=c.__importDefault(o(3)),p=c.__importStar(o(8)),b=c.__importDefault(o(4)),R=o(11),O=o(31);function E(ft){return Math.floor(Math.random()*ft.length)}function D(ft){for(var Dt=[],Ut=1;Ut<arguments.length;Ut++)Dt[Ut-1]=arguments[Ut];for(var Qt=0;Qt<Dt.length;Qt++){var ue=Dt[Qt];if(!ue)break;var rn=Object.prototype.hasOwnProperty;for(var bn in ue)(!rn||rn.call(ue,bn))&&(ft[bn]=ue[bn])}return ft}r.mixin=D;function S(ft){return D({},ft)}r.copy=S,r.isArray=Array.isArray||function(ft){return Object.prototype.toString.call(ft)=="[object Array]"};function G(ft){return z(ft)?[]:(0,r.isArray)(ft)?ft:[ft]}r.ensureArray=G;function w(ft){return Object.prototype.toString.call(ft)=="[object Object]"}r.isObject=w;function j(ft){for(var Dt in ft)return!1;return!0}r.isEmpty=j;function U(ft,Dt){for(var Ut in ft)if(Ut!==Dt)return!1;return!0}r.isOnlyPropIn=U;function z(ft){return ft==null}r.isEmptyArg=z;function L(ft){var Dt=new Object;for(var Ut in ft)Dt[Ut]=ft[Ut];return Dt}r.shallowClone=L;function M(ft,Dt){var Ut=(function(){function ue(){}return ue})();Ut.prototype=ft;var Qt=new Ut;return Dt&&D(Qt,Dt),Qt}r.prototypicalClone=M;var A=function(ft,Dt){if(g.default.Config.inherits){g.default.Config.inherits(ft,Dt);return}ft.super_=Dt,ft.prototype=M(Dt.prototype,{constructor:ft})};r.inherits=A;function T(ft,Dt){for(var Ut in ft)if(ft[Ut]==Dt)return!0;return!1}r.containsValue=T;function y(ft,Dt){return(0,r.isArray)(Dt)?B(ft,Dt):N(ft,Dt)}r.intersect=y;function B(ft,Dt){for(var Ut=[],Qt=0;Qt<ft.length;Qt++){var ue=ft[Qt];(0,r.arrIndexOf)(Dt,ue)!=-1&&Ut.push(ue)}return Ut}r.arrIntersect=B;function N(ft,Dt){for(var Ut=[],Qt=0;Qt<ft.length;Qt++){var ue=ft[Qt];ue in Dt&&Ut.push(ue)}return Ut}r.arrIntersectOb=N;function q(ft,Dt){for(var Ut=[],Qt=0;Qt<ft.length;Qt++){var ue=ft[Qt];(0,r.arrIndexOf)(Dt,ue)==-1&&Ut.push(ue)}return Ut}r.arrSubtract=q,r.arrIndexOf=Array.prototype.indexOf?function(ft,Dt,Ut){return ft.indexOf(Dt,Ut)}:function(ft,Dt,Ut){Ut=Ut||0;for(var Qt=ft.length;Ut<Qt;Ut++)if(ft[Ut]===Dt)return Ut;return-1};function I(ft,Dt){return(0,r.arrIndexOf)(ft,Dt)!==-1}r.arrIn=I;function Z(ft,Dt){var Ut=(0,r.arrIndexOf)(ft,Dt),Qt=Ut!=-1;return Qt&&ft.splice(Ut,1),Qt}r.arrDeleteValue=Z;function K(ft,Dt){var Ut=ft.slice();return Z(Ut,Dt),Ut}r.arrWithoutValue=K;function P(ft,Dt){var Ut=[];for(var Qt in ft)Dt&&!Object.prototype.hasOwnProperty.call(ft,Qt)||Ut.push(Qt);return Ut}r.keysArray=P;function x(ft,Dt){var Ut=[];for(var Qt in ft)Dt&&!Object.prototype.hasOwnProperty.call(ft,Qt)||Ut.push(ft[Qt]);return Ut}r.valuesArray=x;function Y(ft,Dt){for(var Ut in ft)Object.prototype.hasOwnProperty.call(ft,Ut)&&ft[Ut]&&Dt(Ut)}r.forInOwnNonNullProperties=Y,r.arrForEach=Array.prototype.forEach?function(ft,Dt){ft.forEach(Dt)}:function(ft,Dt){for(var Ut=ft.length,Qt=0;Qt<Ut;Qt++)Dt(ft[Qt],Qt,ft)};function Q(ft,Dt){return(0,r.arrForEach)(ft.slice(),Dt)}r.safeArrForEach=Q,r.arrMap=Array.prototype.map?function(ft,Dt){return ft.map(Dt)}:function(ft,Dt){for(var Ut=[],Qt=ft.length,ue=0;ue<Qt;ue++)Ut.push(Dt(ft[ue],ue,ft));return Ut},r.arrFilter=Array.prototype.filter?function(ft,Dt){return ft.filter(Dt)}:function(ft,Dt){for(var Ut=[],Qt=ft.length,ue=0;ue<Qt;ue++)Dt(ft[ue])&&Ut.push(ft[ue]);return Ut},r.arrEvery=Array.prototype.every?function(ft,Dt){return ft.every(Dt)}:function(ft,Dt){for(var Ut=ft.length,Qt=0;Qt<Ut;Qt++)if(!Dt(ft[Qt],Qt,ft))return!1;return!0};function W(ft,Dt){if(ft.length===0)return!0;var Ut=ft[0][Dt];return(0,r.arrEvery)(ft,function(Qt){return Qt[Dt]===Ut})}r.allSame=W;var nt={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function F(ft,Dt){var Ut=nt[Dt||Xt.json];return{accept:Ut,"X-Ably-Version":p.default.protocolVersion.toString(),"Ably-Agent":(0,p.getAgentString)(ft)}}r.defaultGetHeaders=F;function it(ft,Dt){var Ut,Qt=Ut=nt[Dt||Xt.json];return{accept:Qt,"content-type":Ut,"X-Ably-Version":p.default.protocolVersion.toString(),"Ably-Agent":(0,p.getAgentString)(ft)}}r.defaultPostHeaders=it;function at(ft){return ft.splice(E(ft),1)[0]}r.arrPopRandomElement=at;function X(ft){var Dt=[];if(ft)for(var Ut in ft)Dt.push(encodeURIComponent(Ut)+"="+encodeURIComponent(ft[Ut]));return Dt.length?"?"+Dt.join("&"):""}r.toQueryString=X;function J(ft){for(var Dt,Ut=/([^?&=]+)=?([^&]*)/g,Qt={};Dt=Ut.exec(ft);)Qt[decodeURIComponent(Dt[1])]=decodeURIComponent(Dt[2]);return Qt}r.parseQueryString=J,r.now=Date.now||function(){return new Date().getTime()};function $(ft){return typeof ft=="object"&&ft!==null&&(ft.constructor.name=="ErrorInfo"||ft.constructor.name=="PartialErrorInfo")}r.isErrorInfoOrPartialErrorInfo=$;function tt(ft){var Dt,Ut;return ft instanceof Error||((Dt=ft==null?void 0:ft.constructor)===null||Dt===void 0?void 0:Dt.name)==="ErrorInfo"||((Ut=ft==null?void 0:ft.constructor)===null||Ut===void 0?void 0:Ut.name)==="PartialErrorInfo"?ft.toString():g.default.Config.inspect(ft)}r.inspectError=tt;function ut(ft){return g.default.BufferUtils.isBuffer(ft)?ft.toString():typeof ft=="string"?ft:g.default.Config.inspect(ft)}r.inspectBody=ut;function Tt(ft){if(g.default.BufferUtils.isBuffer(ft))return g.default.BufferUtils.byteLength(ft);if(typeof ft=="string")return g.default.Config.stringByteSize(ft);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof ft)}r.dataSizeBytes=Tt;function gt(){return String(Math.random()).substr(2)}r.cheapRandStr=gt;var Mt=function(ft){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var Dt=new Uint8Array(ft);return g.default.Config.getRandomValues(Dt),g.default.BufferUtils.base64Encode(Dt)}for(var Ut=g.default.BufferUtils.base64CharSet,Qt=Math.round(ft*4/3),ue="",rn=0;rn<Qt;rn++)ue+=Ut[E(Ut)];return ue};r.randomString=Mt;var Rt=function(ft){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var Dt=new Uint8Array(ft);return g.default.Config.getRandomValues(Dt),g.default.BufferUtils.hexEncode(Dt)}for(var Ut=g.default.BufferUtils.hexCharSet,Qt=ft*2,ue="",rn=0;rn<Qt;rn++)ue+=Ut[E(Ut)];return ue};r.randomHexString=Rt;function Ot(ft,Dt){for(var Ut=Math.min(Dt,ft.length),Qt=ft.slice(),ue=[],rn=0;rn<Ut;rn++)ue.push(at(Qt));return ue}r.arrChooseN=Ot,r.trim=String.prototype.trim?function(ft){return ft.trim()}:function(ft){return ft.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function xt(ft,Dt,Ut){return new Promise(function(Qt,ue){ft[Dt].apply(ft,c.__spreadArray(c.__spreadArray([],Ut,!1),[function(rn,bn){rn?ue(rn):Qt(bn)}],!1))})}r.promisify=xt;var Xt;(function(ft){ft.msgpack="msgpack",ft.json="json"})(Xt=r.Format||(r.Format={}));function Zt(ft,Dt){return Dt=="msgpack"?g.default.Config.msgpack.decode(ft):JSON.parse(String(ft))}r.decodeBody=Zt;function ye(ft,Dt){return Dt=="msgpack"?g.default.Config.msgpack.encode(ft,!0):JSON.stringify(ft)}r.encodeBody=ye;function he(ft){return ft.map(function(Dt){return Dt&&Dt.toLowerCase()})}r.allToLowerCase=he;function Ue(ft){return ft.map(function(Dt){return Dt&&Dt.toUpperCase()})}r.allToUpperCase=Ue;function _n(ft){return Math.min((ft+2)/3,2)}r.getBackoffCoefficient=_n;function Ge(){return 1-Math.random()*.2}r.getJitterCoefficient=Ge;function Be(ft,Dt){return ft*_n(Dt)*Ge()}r.getRetryTime=Be;function Sa(){return h||(typeof window<"u"?window:self)}r.getGlobalObject=Sa;function dn(ft,Dt){return Object.keys(ft).every(function(Ut){return ft[Ut]===Dt[Ut]})&&Object.keys(Dt).every(function(Ut){return Dt[Ut]===ft[Ut]})}r.shallowEquals=dn;function wr(ft){var Dt=/^(\[([^?]*)(?:(.*))\])?(.+)$/,Ut=ft.match(Dt);if(!Ut||!Ut.length||Ut.length<5)throw new b.default("regex match failed",400,40010);if(Ut[2])throw new b.default("cannot use a derived option with a ".concat(Ut[2]," channel"),400,40010);return{qualifierParam:Ut[3]||"",channelName:Ut[4]}}r.matchDerivedChannel=wr;function ll(ft){return g.default.Config.createHmac?Buffer.from(ft,"ascii").toString("base64"):(0,R.stringify)((0,O.parse)(ft))}r.toBase64=ll;function ba(ft,Dt){return ft.length===Dt.length&&(0,r.arrEvery)(ft,function(Ut,Qt){return Ut===Dt[Qt]})}r.arrEquals=ba}).call(this,o(13))}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importDefault(o(3)),p=h||(typeof window<"u"?window:self),b;(function(S){S[S.None=0]="None",S[S.Error=1]="Error",S[S.Major=2]="Major",S[S.Minor=3]="Minor",S[S.Micro=4]="Micro"})(b||(b={}));function R(S,G){return"".concat(S).padStart(G?3:2,"0")}function O(S){return g.default.Config.logTimestamps?function(G){var w=new Date;S(R(w.getHours())+":"+R(w.getMinutes())+":"+R(w.getSeconds())+"."+R(w.getMilliseconds(),1)+" "+G)}:S}var E=function(){var S,G,w,j;return typeof Window>"u"&&typeof WorkerGlobalScope>"u"||typeof((G=(S=p==null?void 0:p.console)===null||S===void 0?void 0:S.log)===null||G===void 0?void 0:G.apply)=="function"?(w=function(){for(var U=[],z=0;z<arguments.length;z++)U[z]=arguments[z];console.log.apply(console,U)},j=console.warn?function(){for(var U=[],z=0;z<arguments.length;z++)U[z]=arguments[z];console.warn.apply(console,U)}:w):p!=null&&p.console.log?w=j=function(){Function.prototype.apply.call(console.log,console,arguments)}:w=j=function(){},[w,j].map(O)},D=(function(){function S(){S.logLevel=S.LOG_DEFAULT}return S.initLogHandlers=function(){var G=E(),w=G[0],j=G[1];this.logHandler=w,this.logErrorHandler=j},S.renamedClientOption=function(G,w){S.deprecationWarning("The `".concat(G,"` client option has been renamed to `").concat(w,"`. Please update your code to use `").concat(w,"` instead. `").concat(G,"` will be removed in a future version."))},S.renamedMethod=function(G,w,j){S.deprecationWarning("`".concat(G,"`’s `").concat(w,"` method has been renamed to `").concat(j,"`. Please update your code to use `").concat(j,"` instead. `").concat(w,"` will be removed in a future version."))},S.deprecationWarning=function(G){S.shouldLog(b.Error)&&S.logErrorHandler("Ably: Deprecation warning - ".concat(G))},S.logLevel=b.Error,S.LOG_NONE=b.None,S.LOG_ERROR=b.Error,S.LOG_MAJOR=b.Major,S.LOG_MINOR=b.Minor,S.LOG_MICRO=b.Micro,S.LOG_DEFAULT=b.Error,S.LOG_DEBUG=b.Micro,S.logAction=function(G,w,j){S.shouldLog(G)&&(G===b.Error?S.logErrorHandler:S.logHandler)("Ably: "+w+": "+j)},S.deprecated=function(G,w){S.deprecationWarning("".concat(G," is deprecated and will be removed in a future version. ").concat(w))},S.shouldLog=function(G){return G<=S.logLevel},S.setLog=function(G,w){G!==void 0&&(S.logLevel=G),w!==void 0&&(S.logHandler=S.logErrorHandler=w)},S})();r.default=D}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(){}return c})();r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PartialErrorInfo=void 0;var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1));function p(O){var E="["+O.constructor.name;return O.message&&(E+=": "+O.message),O.statusCode&&(E+="; statusCode="+O.statusCode),O.code&&(E+="; code="+O.code),O.cause&&(E+="; cause="+g.inspectError(O.cause)),O.href&&!(O.message&&O.message.indexOf("help.ably.io")>-1)&&(E+="; see "+O.href+" "),E+="]",E}var b=(function(O){h.__extends(E,O);function E(D,S,G,w){var j=O.call(this,D)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(j,E.prototype),j.code=S,j.statusCode=G,j.cause=w,j}return E.prototype.toString=function(){return p(this)},E.fromValues=function(D){var S=D,G=S.message,w=S.code,j=S.statusCode;if(typeof G!="string"||typeof w!="number"||typeof j!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+c.default.Config.inspect(D));var U=Object.assign(new E(G,w,j),D);return U.code&&!U.href&&(U.href="https://help.ably.io/error/"+U.code),U},E})(Error);r.default=b;var R=(function(O){h.__extends(E,O);function E(D,S,G,w){var j=O.call(this,D)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(j,E.prototype),j.code=S,j.statusCode=G,j.cause=w,j}return E.prototype.toString=function(){return p(this)},E})(Error);r.PartialErrorInfo=R}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){if(typeof ArrayBuffer=="function"){var c=h,g=c.lib,p=g.WordArray,b=p.init,R=p.init=function(O){if(O instanceof ArrayBuffer&&(O=new Uint8Array(O)),(O instanceof Int8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)&&(O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength)),O instanceof Uint8Array){for(var E=O.byteLength,D=[],S=0;S<E;S++)D[S>>>2]|=O[S]<<24-S%4*8;b.call(this,D,E)}else b.apply(this,arguments)};R.prototype=p}})(),h.lib.WordArray})}),(function(s,r,o){(function(h){(function(c,g){s.exports=g()})(this,function(){var c=c||(function(g,p){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&typeof h<"u"&&h.crypto&&(b=h.crypto),!b)try{b=o(44)}catch{}var R=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},O=Object.create||(function(){function A(){}return function(T){var y;return A.prototype=T,y=new A,A.prototype=null,y}})(),E={},D=E.lib={},S=D.Base=(function(){return{extend:function(A){var T=O(this);return A&&T.mixIn(A),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var T in A)A.hasOwnProperty(T)&&(this[T]=A[T]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),G=D.WordArray=S.extend({init:function(A,T){A=this.words=A||[],T!=p?this.sigBytes=T:this.sigBytes=A.length*4},toString:function(A){return(A||j).stringify(this)},concat:function(A){var T=this.words,y=A.words,B=this.sigBytes,N=A.sigBytes;if(this.clamp(),B%4)for(var q=0;q<N;q++){var I=y[q>>>2]>>>24-q%4*8&255;T[B+q>>>2]|=I<<24-(B+q)%4*8}else for(var q=0;q<N;q+=4)T[B+q>>>2]=y[q>>>2];return this.sigBytes+=N,this},clamp:function(){var A=this.words,T=this.sigBytes;A[T>>>2]&=4294967295<<32-T%4*8,A.length=g.ceil(T/4)},clone:function(){var A=S.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var T=[],y=0;y<A;y+=4)T.push(R());return new G.init(T,A)}}),w=E.enc={},j=w.Hex={stringify:function(A){for(var T=A.words,y=A.sigBytes,B=[],N=0;N<y;N++){var q=T[N>>>2]>>>24-N%4*8&255;B.push((q>>>4).toString(16)),B.push((q&15).toString(16))}return B.join("")},parse:function(A){for(var T=A.length,y=[],B=0;B<T;B+=2)y[B>>>3]|=parseInt(A.substr(B,2),16)<<24-B%8*4;return new G.init(y,T/2)}},U=w.Latin1={stringify:function(A){for(var T=A.words,y=A.sigBytes,B=[],N=0;N<y;N++){var q=T[N>>>2]>>>24-N%4*8&255;B.push(String.fromCharCode(q))}return B.join("")},parse:function(A){for(var T=A.length,y=[],B=0;B<T;B++)y[B>>>2]|=(A.charCodeAt(B)&255)<<24-B%4*8;return new G.init(y,T)}},z=w.Utf8={stringify:function(A){try{return decodeURIComponent(escape(U.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return U.parse(unescape(encodeURIComponent(A)))}},L=D.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new G.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=z.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var T,y=this._data,B=y.words,N=y.sigBytes,q=this.blockSize,I=q*4,Z=N/I;A?Z=g.ceil(Z):Z=g.max((Z|0)-this._minBufferSize,0);var K=Z*q,P=g.min(K*4,N);if(K){for(var x=0;x<K;x+=q)this._doProcessBlock(B,x);T=B.splice(0,K),y.sigBytes-=P}return new G.init(T,P)},clone:function(){var A=S.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});D.Hasher=L.extend({cfg:S.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){L.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(A){return function(T,y){return new A.init(y).finalize(T)}},_createHmacHelper:function(A){return function(T,y){return new M.HMAC.init(A,y).finalize(T)}}});var M=E.algo={};return E})(Math);return c})}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(3));function b(E,D,S){try{D.apply(E,S)}catch(G){g.default.logAction(g.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+G+"; stack = "+(G&&G.stack))}}function R(E,D,S){for(var G,w,j,U=0;U<E.length;U++)if(G=E[U],S&&(G=G[S]),c.isArray(G)){for(;(w=c.arrIndexOf(G,D))!==-1;)G.splice(w,1);S&&G.length===0&&delete E[U][S]}else if(c.isObject(G))for(j in G)Object.prototype.hasOwnProperty.call(G,j)&&c.isArray(G[j])&&R([G],D,j)}var O=(function(){function E(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return E.prototype.on=function(){for(var D=this,S=[],G=0;G<arguments.length;G++)S[G]=arguments[G];if(S.length===1){var w=S[0];if(typeof w=="function")this.any.push(w);else throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S))}if(S.length===2){var j=S[0],U=S[1];if(typeof U!="function")throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S));if(c.isEmptyArg(j))this.any.push(U);else if(c.isArray(j))j.forEach(function(L){D.on(L,U)});else{if(typeof j!="string")throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S));var z=this.events[j]||(this.events[j]=[]);z.push(U)}}},E.prototype.off=function(){for(var D,S=this,G=[],w=0;w<arguments.length;w++)G[w]=arguments[w];if(G.length==0||c.isEmptyArg(G[0])&&c.isEmptyArg(G[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}var j=G[0],U=G[1],z=null,L=null;if(G.length===1||!U)typeof j=="function"?z=j:L=j;else{if(typeof U!="function")throw new Error("EventEmitter.off(): invalid arguments:"+p.default.Config.inspect(G));D=[j,U],L=D[0],z=D[1]}if(z&&c.isEmptyArg(L)){R([this.any,this.events,this.anyOnce,this.eventsOnce],z);return}if(c.isArray(L)){L.forEach(function(M){S.off(M,z)});return}if(typeof L!="string")throw new Error("EventEmitter.off(): invalid arguments:"+p.default.Config.inspect(G));z?R([this.events,this.eventsOnce],z,L):(delete this.events[L],delete this.eventsOnce[L])},E.prototype.listeners=function(D){if(D){var S=this.events[D]||[];return this.eventsOnce[D]&&Array.prototype.push.apply(S,this.eventsOnce[D]),S.length?S:null}return this.any.length?this.any:null},E.prototype.emit=function(D){for(var S=[],G=1;G<arguments.length;G++)S[G-1]=arguments[G];var w={event:D},j=[];this.anyOnce.length&&(Array.prototype.push.apply(j,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(j,this.any);var U=this.eventsOnce[D];U&&(Array.prototype.push.apply(j,U),delete this.eventsOnce[D]);var z=this.events[D];z&&Array.prototype.push.apply(j,z),c.arrForEach(j,function(L){b(w,L,S)})},E.prototype.once=function(){for(var D=this,S=[],G=0;G<arguments.length;G++)S[G]=arguments[G];var w=S.length;if((w===0||w===1&&typeof S[0]!="function")&&p.default.Config.Promise){var j=S[0];return new p.default.Config.Promise(function(T){D.once(j,T)})}var U=S[0],z=S[1];if(S.length===1&&typeof U=="function")this.anyOnce.push(U);else if(c.isEmptyArg(U)){if(typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));this.anyOnce.push(z)}else if(c.isArray(U)){var L=this,M=function(){var T=Array.prototype.slice.call(arguments);if(c.arrForEach(U,function(y){L.off(y,M)}),typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));z.apply(this,T)};c.arrForEach(U,function(T){L.on(T,M)})}else{if(typeof U!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));var A=this.eventsOnce[U]||(this.eventsOnce[U]=[]);if(z){if(typeof z!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));A.push(z)}}},E.prototype.whenState=function(D,S,G){for(var w=this,j=[],U=3;U<arguments.length;U++)j[U-3]=arguments[U];var z={event:D};if(typeof D!="string"||typeof S!="string")throw"whenState requires a valid event String argument";if(typeof G!="function"&&p.default.Config.Promise)return new p.default.Config.Promise(function(L){E.prototype.whenState.apply(w,[D,S,L].concat(j))});D===S?b(z,G,j):this.once(D,G)},E})();r.default=O}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaults=r.normaliseOptions=r.objectifyOptions=r.getAgentString=r.getHosts=r.getFallbackHosts=r.environmentFallbackHosts=r.getHttpScheme=r.getPort=r.getHost=void 0;var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(2)),b=h.__importDefault(o(4)),R=o(43),O="ably-js/"+R.version,E={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:R.version,protocolVersion:2,agent:O,getHost:D,getPort:S,getHttpScheme:G,environmentFallbackHosts:w,getFallbackHosts:j,getHosts:U,checkHost:z,objectifyOptions:T,normaliseOptions:y};function D(N,q,I){return I?q=q==N.restHost&&N.realtimeHost||q||N.realtimeHost:q=q||N.restHost,q}r.getHost=D;function S(N,q){return q||N.tls?N.tlsPort:N.port}r.getPort=S;function G(N){return N.tls?"https://":"http://"}r.getHttpScheme=G;function w(N){return[N+"-a-fallback.ably-realtime.com",N+"-b-fallback.ably-realtime.com",N+"-c-fallback.ably-realtime.com",N+"-d-fallback.ably-realtime.com",N+"-e-fallback.ably-realtime.com"]}r.environmentFallbackHosts=w;function j(N){var q=N.fallbackHosts,I=typeof N.httpMaxRetryCount<"u"?N.httpMaxRetryCount:E.httpMaxRetryCount;return q?g.arrChooseN(q,I):[]}r.getFallbackHosts=j;function U(N){return[N.restHost].concat(j(N))}r.getHosts=U;function z(N){if(typeof N!="string")throw new b.default("host must be a string; was a "+typeof N,4e4,400);if(!N.length)throw new b.default("host must not be zero-length",4e4,400)}function L(N,q,I){return N.realtimeHost?N.realtimeHost:N.restHost?(p.default.logAction(p.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+N.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+N.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),N.restHost):q?E.REALTIME_HOST:I+"-"+E.REALTIME_HOST}function M(N){var q={};for(var I in E.TIMEOUTS)q[I]=N[I]||E.TIMEOUTS[I];return q}function A(N){var q=E.agent;if(N.agents)for(var I in N.agents)q+=" "+I+"/"+N.agents[I];return q}r.getAgentString=A;function T(N){return typeof N=="string"?N.indexOf(":")==-1?{token:N}:{key:N}:N}r.objectifyOptions=T;function y(N){if(N.host&&(p.default.renamedClientOption("host","restHost"),N.restHost=N.host),N.wsHost&&(p.default.renamedClientOption("wsHost","realtimeHost"),N.realtimeHost=N.wsHost),N.queueEvents&&(p.default.renamedClientOption("queueEvents","queueMessages"),N.queueMessages=N.queueEvents),N.headers&&p.default.deprecated("the `headers` client option",""),N.fallbackHostsUseDefault){if(N.fallbackHosts){var q="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions",q),new b.default(q,4e4,400)}if(N.port||N.tlsPort){var q="fallbackHostsUseDefault cannot be set when port or tlsPort are set";throw p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions",q),new b.default(q,4e4,400)}N.environment?p.default.deprecated("The `fallbackHostsUseDefault` client option","If you’re using this client option to force the library to make use of fallback hosts even though you’ve set the `environment` client option, then this is no longer necessary: remove your usage of the `fallbackHostsUseDefault` client option and the library will then automatically choose the correct fallback hosts to use for the specified environment."):p.default.deprecated("The `fallbackHostsUseDefault` client option","If you’re using this client option to force the library to make use of fallback hosts even though you’re not using the primary Ably environment, then stop using `fallbackHostsUseDefault`, and update your code to either pass the `environment` client option (in which case the library will automatically choose the correct fallback hosts to use for the specified environment), or to pass the `fallbackHosts` client option to specify a custom list of fallback hosts to use (for example, if you’re using a custom CNAME, in which case Ably will have provided you with an explicit list of fallback hosts)."),N.fallbackHosts=E.FALLBACK_HOSTS}N.recover===!0&&(p.default.deprecated("The ability to use a boolean value for the `recover` client option","If you wish for the connection to always be recovered, replace `{ recover: true }` with a function that always passes `true` to its callback: `{ recover: function(lastConnectionDetails, cb) { cb(true); } }`"),N.recover=function(at,X){X(!0)}),typeof N.recover=="function"&&N.closeOnUnload===!0&&(p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),N.recover=void 0),"closeOnUnload"in N||(N.closeOnUnload=!N.recover),N.transports&&g.arrIn(N.transports,"xhr")&&(p.default.deprecationWarning('The "xhr" transport has been renamed to "xhr_streaming". Please update your client options code to use `transports: ["xhr_streaming"]` instead. The ability to use `transports: ["xhr"]` will be removed in a future version.'),g.arrDeleteValue(N.transports,"xhr"),N.transports.push("xhr_streaming")),"queueMessages"in N||(N.queueMessages=!0);var I=N.environment&&String(N.environment).toLowerCase()||E.ENVIRONMENT,Z=!I||I==="production";!N.fallbackHosts&&!N.restHost&&!N.realtimeHost&&!N.port&&!N.tlsPort&&(N.fallbackHosts=Z?E.FALLBACK_HOSTS:w(I));var K=N.restHost||(Z?E.REST_HOST:I+"-"+E.REST_HOST),P=L(N,Z,I);g.arrForEach((N.fallbackHosts||[]).concat(K,P),z),N.port=N.port||E.PORT,N.tlsPort=N.tlsPort||E.TLS_PORT,"tls"in N||(N.tls=!0);var x=M(N);if("useBinaryProtocol"in N?N.useBinaryProtocol=c.default.Config.supportsBinary&&N.useBinaryProtocol:N.useBinaryProtocol=c.default.Config.preferBinary,N.clientId){var Y=N.headers=N.headers||{};Y["X-Ably-ClientId"]=c.default.BufferUtils.base64Encode(c.default.BufferUtils.utf8Encode(N.clientId))}"idempotentRestPublishing"in N||(N.idempotentRestPublishing=!0),N.promises&&!c.default.Config.Promise&&(p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),N.promises=!1);var Q=null,W=N.connectivityCheckUrl;if(N.connectivityCheckUrl){var nt=N.connectivityCheckUrl.split("?"),F=nt[0],it=nt[1];Q=it?g.parseQueryString(it):{},F.indexOf("://")===-1&&(F="https://"+F),W=F}return h.__assign(h.__assign({},N),{useBinaryProtocol:"useBinaryProtocol"in N?c.default.Config.supportsBinary&&N.useBinaryProtocol:c.default.Config.preferBinary,realtimeHost:P,restHost:K,maxMessageSize:N.maxMessageSize||E.maxMessageSize,timeouts:x,connectivityCheckParams:Q,connectivityCheckUrl:W})}r.normaliseOptions=y,r.default=E;function B(N){return Object.assign(E,N)}r.getDefaults=B}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importDefault(o(2)),p=h.__importDefault(o(4)),b=h.__importStar(o(1));function R(S){return!S||!S.channelOptions?{channelOptions:S,plugins:{},baseEncodedPreviousPayload:void 0}:S}function O(S){if(S&&S.cipher){if(!c.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var G=c.default.Crypto.getCipher(S.cipher);return{cipher:G.cipherParams,channelCipher:G.cipher}}return S??{}}function E(S){var G=0;return S.name&&(G+=S.name.length),S.clientId&&(G+=S.clientId.length),S.extras&&(G+=JSON.stringify(S.extras).length),S.data&&(G+=b.dataSizeBytes(S.data)),G}var D=(function(){function S(){}return S.prototype.toJSON=function(){var G=this.encoding,w=this.data;return w&&c.default.BufferUtils.isBuffer(w)&&(arguments.length>0?(G=G?G+"/base64":"base64",w=c.default.BufferUtils.base64Encode(w)):w=c.default.BufferUtils.toBuffer(w)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:G,data:w}},S.prototype.toString=function(){var G="[Message";return this.name&&(G+="; name="+this.name),this.id&&(G+="; id="+this.id),this.timestamp&&(G+="; timestamp="+this.timestamp),this.clientId&&(G+="; clientId="+this.clientId),this.connectionId&&(G+="; connectionId="+this.connectionId),this.encoding&&(G+="; encoding="+this.encoding),this.extras&&(G+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?G+="; data="+this.data:c.default.BufferUtils.isBuffer(this.data)?G+="; data (buffer)="+c.default.BufferUtils.base64Encode(this.data):G+="; data (json)="+JSON.stringify(this.data)),this.extras&&(G+="; extras="+JSON.stringify(this.extras)),G+="]",G},S.encrypt=function(G,w,j){var U=G.data,z=G.encoding,L=w.channelCipher;z=z?z+"/":"",c.default.BufferUtils.isBuffer(U)||(U=c.default.BufferUtils.utf8Encode(String(U)),z=z+"utf-8/"),L.encrypt(U,function(M,A){if(M){j(M);return}G.data=A,G.encoding=z+"cipher+"+L.algorithm,j(null,G)})},S.encode=function(G,w,j){var U=G.data,z=typeof U=="string"||c.default.BufferUtils.isBuffer(U)||U===null||U===void 0;if(!z)if(b.isObject(U)||b.isArray(U))G.data=JSON.stringify(U),G.encoding=G.encoding?G.encoding+"/json":"json";else throw new p.default("Data type is unsupported",40013,400);w!=null&&w.cipher?S.encrypt(G,w,j):j(null,G)},S.encodeArray=function(G,w,j){for(var U=0,z=0;z<G.length;z++)S.encode(G[z],w,function(L){if(L){j(L);return}U++,U==G.length&&j(null,G)})},S.decode=function(G,w){var j=R(w),U=G.data,z=G.encoding;if(z){var L=z.split("/"),M=void 0,A=L.length,T=G.data,y="";try{for(;(M=A)>0;){var B=L[--A].match(/([-\w]+)(\+([\w-]+))?/);if(!B)break;switch(y=B[1],y){case"base64":T=c.default.BufferUtils.base64Decode(String(T)),M==L.length&&(U=T);continue;case"utf-8":T=c.default.BufferUtils.utf8Decode(T);continue;case"json":T=JSON.parse(T);continue;case"cipher":if(j.channelOptions!=null&&j.channelOptions.cipher&&j.channelOptions.channelCipher){var N=B[3],q=j.channelOptions.channelCipher;if(N!=q.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");T=q.decrypt(T);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!j.plugins||!j.plugins.vcdiff)throw new p.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new p.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var I=j.baseEncodedPreviousPayload;typeof I=="string"&&(I=c.default.BufferUtils.utf8Encode(I)),I=c.default.BufferUtils.toBuffer(I),T=c.default.BufferUtils.toBuffer(T),T=c.default.BufferUtils.typedArrayToBuffer(j.plugins.vcdiff.decode(T,I)),U=T}catch(K){throw new p.default("Vcdiff delta decode failed with "+K,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(K){var Z=K;throw new p.default("Error processing the "+y+" encoding, decoder returned ‘"+Z.message+"’",Z.code||40013,400)}finally{G.encoding=M<=0?null:L.slice(0,M).join("/"),G.data=T}}j.baseEncodedPreviousPayload=U},S.fromResponseBody=function(G,w,j){j&&(G=b.decodeBody(G,j));for(var U=0;U<G.length;U++){var z=G[U]=S.fromValues(G[U]);try{S.decode(z,w)}catch(L){g.default.logAction(g.default.LOG_ERROR,"Message.fromResponseBody()",L.toString())}}return G},S.fromValues=function(G){return Object.assign(new S,G)},S.fromValuesArray=function(G){for(var w=G.length,j=new Array(w),U=0;U<w;U++)j[U]=S.fromValues(G[U]);return j},S.fromEncoded=function(G,w){var j=S.fromValues(G),U=O(w??null);try{S.decode(j,U)}catch(z){g.default.logAction(g.default.LOG_ERROR,"Message.fromEncoded()",z.toString())}return j},S.fromEncodedArray=function(G,w){return G.map(function(j){return S.fromEncoded(j,w)})},S.getMessagesSize=function(G){for(var w,j=0,U=0;U<G.length;U++)w=G[U],j+=w.size||(w.size=E(w));return j},S.serialize=b.encodeBody,S})();r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(4)),p=h.__importDefault(o(9)),b=h.__importDefault(o(16)),R={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},O=[];Object.keys(R).forEach(function(j){O[R[j]]=j});var E={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},D=Object.keys(E);E.MODE_ALL=E.PRESENCE|E.PUBLISH|E.SUBSCRIBE|E.PRESENCE_SUBSCRIBE;function S(j){var U=[];if(j)for(var z=0;z<j.length;z++)U.push(j[z].toString());return"[ "+U.join(", ")+" ]"}var G="id channel channelSerial connectionId count msgSerial timestamp".split(" "),w=(function(){function j(){var U=this;this.hasFlag=function(z){return(U.flags&E[z])>0}}return j.prototype.setFlag=function(U){return this.flags=this.flags|E[U]},j.prototype.getMode=function(){return this.flags&&this.flags&E.MODE_ALL},j.prototype.encodeModesToFlags=function(U){var z=this;U.forEach(function(L){return z.setFlag(L)})},j.prototype.decodeModesFromFlags=function(){var U=this,z=[];return j.channelModes.forEach(function(L){U.hasFlag(L)&&z.push(L)}),z.length>0?z:void 0},j.fromValues=function(U){return Object.assign(new j,U)},j.Action=R,j.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],j.ActionName=O,j.serialize=c.encodeBody,j.deserialize=function(U,z){var L=c.decodeBody(U,z);return j.fromDeserialized(L)},j.fromDeserialized=function(U){var z=U.error;z&&(U.error=g.default.fromValues(z));var L=U.messages;if(L)for(var M=0;M<L.length;M++)L[M]=p.default.fromValues(L[M]);var A=U.presence;if(A)for(var M=0;M<A.length;M++)A[M]=b.default.fromValues(A[M],!0);return Object.assign(new j,U)},j.stringify=function(U){var z="[ProtocolMessage";U.action!==void 0&&(z+="; action="+j.ActionName[U.action]||!1);for(var L,M=0;M<G.length;M++)L=G[M],U[L]!==void 0&&(z+="; "+L+"="+U[L]);if(U.messages&&(z+="; messages="+S(p.default.fromValuesArray(U.messages))),U.presence&&(z+="; presence="+S(b.default.fromValuesArray(U.presence))),U.error&&(z+="; error="+g.default.fromValues(U.error).toString()),U.auth&&U.auth.accessToken&&(z+="; token="+U.auth.accessToken),U.flags&&(z+="; flags="+D.filter(U.hasFlag).join(",")),U.params){var A="";c.forInOwnNonNullProperties(U.params,function(T){A.length>0&&(A+="; "),A+=T+"="+U.params[T]}),A.length>0&&(z+="; params=["+A+"]")}return z+="]",z},j})();r.default=w}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=c.enc;b.Base64={stringify:function(O){var E=O.words,D=O.sigBytes,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";O.clamp();for(var G=[],w=0;w<D;w+=3)for(var j=E[w>>>2]>>>24-w%4*8&255,U=E[w+1>>>2]>>>24-(w+1)%4*8&255,z=E[w+2>>>2]>>>24-(w+2)%4*8&255,L=j<<16|U<<8|z,M=0;M<4&&w+M*.75<D;M++)G.push(S.charAt(L>>>6*(3-M)&63));var A=S.charAt(64);if(A)for(;G.length%4;)G.push(A);return G.join("")},parse:function(O){var E=O.length,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var G=0;G<D.length;G++)S[D.charCodeAt(G)]=G}var w=D.charAt(64);if(w){var j=O.indexOf(w);j!==-1&&(E=j)}return R(O,E,S)}};function R(O,E,D){for(var S=[],G=0,w=0;w<E;w++)if(w%4){var j=D[O.charCodeAt(w-1)]<<w%4*2,U=D[O.charCodeAt(w)]>>>6-w%4*2,z=j|U;S[G>>>2]|=z<<24-G%4*8,G++}return p.create(S,G)}})(),h.enc.Base64})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(10)),p=h.__importDefault(o(26)),b=h.__importDefault(o(2)),R=h.__importDefault(o(8)),O=h.__importDefault(o(21)),E=h.__importDefault(o(18)),D=h.__importDefault(o(4)),S=h.__importDefault(o(22)),G=h.__importDefault(o(3));function w(z){var L=[80015,80017,80030];return z.code?E.default.isTokenErr(z)?!1:c.arrIn(L,z.code)?!0:z.code>=4e4&&z.code<5e4:!1}function j(z){return w(z)?[g.default.fromValues({action:g.default.Action.ERROR,error:z})]:[g.default.fromValues({action:g.default.Action.DISCONNECTED,error:z})]}var U=(function(z){h.__extends(L,z);function L(M,A,T){var y=z.call(this,M,A,T,!0)||this;return y.onAuthUpdated=function(B){y.authParams={access_token:B.token}},y.stream="stream"in T?T.stream:!0,y.sendRequest=null,y.recvRequest=null,y.pendingCallback=null,y.pendingItems=null,y}return L.prototype.connect=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","starting"),p.default.prototype.connect.call(this);var A=this.params,T=A.options,y=R.default.getHost(T,A.host),B=R.default.getPort(T),N=T.tls?"https://":"http://";this.baseUri=N+y+":"+B+"/comet/";var q=this.baseUri+"connect";b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","uri: "+q),this.auth.getAuthParams(function(I,Z){if(I){M.disconnect(I);return}if(!M.isDisposed){M.authParams=Z;var K=M.params.getConnectParams(Z);"stream"in K&&(M.stream=K.stream),b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+c.toQueryString(K));var P=!1,x=M.recvRequest=M.createRequest(q,null,K,null,M.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV);x.on("data",function(Y){M.recvRequest&&(P||(P=!0,M.emit("preconnect")),M.onData(Y))}),x.on("complete",function(Y){if(M.recvRequest||(Y=Y||new D.default("Request cancelled",80003,400)),M.recvRequest=null,!P&&!Y&&(P=!0,M.emit("preconnect")),M.onActivity(),Y){Y.code?M.onData(j(Y)):M.disconnect(Y);return}G.default.Config.nextTick(function(){M.recv()})}),x.exec()}})},L.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},L.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},L.prototype._requestCloseOrDisconnect=function(M){var A=this,T=M?this.closeUri:this.disconnectUri;if(T){var y=this.createRequest(T,null,this.authParams,null,S.default.REQ_SEND);y.on("complete",function(B){B&&(b.default.logAction(b.default.LOG_ERROR,"CometTransport.request"+(M?"Close()":"Disconnect()"),"request returned err = "+c.inspectError(B)),A.finish("disconnected",B))}),y.exec()}},L.prototype.dispose=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",O.default.disconnected()),G.default.Config.nextTick(function(){M.emit("disposed")}))},L.prototype.onConnect=function(M){var A;if(!this.isDisposed){var T=(A=M.connectionDetails)===null||A===void 0?void 0:A.connectionKey;p.default.prototype.onConnect.call(this,M);var y=this.baseUri+T;b.default.logAction(b.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+y),this.sendUri=y+"/send",this.recvUri=y+"/recv",this.closeUri=y+"/close",this.disconnectUri=y+"/disconnect"}},L.prototype.send=function(M){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(M);return}var A=this.pendingItems||[];A.push(M),this.pendingItems=null,this.sendItems(A)},L.prototype.sendAnyPending=function(){var M=this.pendingItems;M&&(this.pendingItems=null,this.sendItems(M))},L.prototype.sendItems=function(M){var A=this,T=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(M),S.default.REQ_SEND);T.on("complete",function(y,B){if(y&&b.default.logAction(b.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+c.inspectError(y)),A.sendRequest=null,y){y.code?A.onData(j(y)):A.disconnect(y);return}B&&A.onData(B),A.pendingItems&&G.default.Config.nextTick(function(){A.sendRequest||A.sendAnyPending()})}),T.exec()},L.prototype.recv=function(){var M=this;if(!this.recvRequest&&this.isConnected){var A=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV_POLL);A.on("data",function(T){M.onData(T)}),A.on("complete",function(T){if(M.recvRequest=null,M.onActivity(),T){T.code?M.onData(j(T)):M.disconnect(T);return}G.default.Config.nextTick(function(){M.recv()})}),A.exec()}},L.prototype.onData=function(M){try{var A=this.decodeResponse(M);if(A&&A.length)for(var T=0;T<A.length;T++)this.onProtocolMessage(g.default.fromDeserialized(A[T]))}catch(y){b.default.logAction(b.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+y.stack)}},L.prototype.encodeRequest=function(M){return JSON.stringify(M)},L.prototype.decodeResponse=function(M){return typeof M=="string"?JSON.parse(M):M},L})(p.default);r.default=U}),(function(s,r){var o;o=(function(){return this})();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isSuccessCode=void 0;var h;(function(g){g[g.Success=200]="Success",g[g.NoContent=204]="NoContent",g[g.BadRequest=400]="BadRequest",g[g.Unauthorized=401]="Unauthorized",g[g.Forbidden=403]="Forbidden",g[g.RequestTimeout=408]="RequestTimeout",g[g.InternalServerError=500]="InternalServerError"})(h||(h={}));function c(g){return g>=h.Success&&g<h.BadRequest}r.isSuccessCode=c,r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(2)),b=h.__importDefault(o(18)),R=h.__importDefault(o(19)),O=o(4),E=h.__importDefault(o(14));function D(z,L,M,A,T){z.http.supportsAuthHeaders?z.auth.getAuthHeaders(function(y,B){y?A(y):T(g.mixin(B,L),M)}):z.auth.getAuthParams(function(y,B){y?A(y):T(L,g.mixin(B,M))})}function S(z,L){return function(M,A,T,y,B){if(M&&!A){z(M);return}if(B===E.default.NoContent){z(M,[],T,!0,B);return}if(!y)try{A=g.decodeBody(A,L)}catch(P){g.isErrorInfoOrPartialErrorInfo(P)?z(P):z(new O.PartialErrorInfo(g.inspectError(P),null));return}if(!A){z(new O.PartialErrorInfo("unenvelope(): Response body is missing",null));return}var N=A,q=N.statusCode,I=N.response,Z=N.headers;if(q===void 0){z(M,A,T,!0,B);return}if(q<200||q>=300){var K=I&&I.error||M;K||(K=new Error("Error in unenveloping "+A),K.statusCode=q),z(K,I,Z,!0,q);return}z(M,I,Z,!0,q)}}function G(z){var L=[];if(z)for(var M in z)L.push(M+"="+z[M]);return L.join("&")}function w(z,L){return z+(L?"?":"")+G(L)}function j(z,L,M,A){return function(T,y,B,N,q){T?p.default.logAction(p.default.LOG_MICRO,"Resource."+L+"()","Received Error; "+w(M,A)+"; Error: "+g.inspectError(T)):p.default.logAction(p.default.LOG_MICRO,"Resource."+L+"()","Received; "+w(M,A)+"; Headers: "+G(B)+"; StatusCode: "+q+"; Body: "+(c.default.BufferUtils.isBuffer(y)?y.toString():y)),z&&z(T,y,B,N,q)}}var U=(function(){function z(){}return z.get=function(L,M,A,T,y,B){z.do(R.default.Get,L,M,null,A,T,y,B)},z.delete=function(L,M,A,T,y,B){z.do(R.default.Delete,L,M,null,A,T,y,B)},z.post=function(L,M,A,T,y,B,N){z.do(R.default.Post,L,M,A,T,y,B,N)},z.patch=function(L,M,A,T,y,B,N){z.do(R.default.Patch,L,M,A,T,y,B,N)},z.put=function(L,M,A,T,y,B,N){z.do(R.default.Put,L,M,A,T,y,B,N)},z.do=function(L,M,A,T,y,B,N,q){p.default.shouldLog(p.default.LOG_MICRO)&&(q=j(q,L,A,B)),N&&(q=q&&S(q,N),(B=B||{}).envelope=N);function I(Z,K){var P;if(p.default.shouldLog(p.default.LOG_MICRO)&&p.default.logAction(p.default.LOG_MICRO,"Resource."+L+"()","Sending; "+w(A,K)),p.default.shouldLog(p.default.LOG_MICRO)){var x=T;if(((P=Z["content-type"])===null||P===void 0?void 0:P.indexOf("msgpack"))>0)try{x=c.default.Config.msgpack.decode(T)}catch(Y){p.default.logAction(p.default.LOG_MICRO,"Resource."+L+"()","Sending MsgPack Decoding Error: "+g.inspectError(Y))}p.default.logAction(p.default.LOG_MICRO,"Resource."+L+"()","Sending; "+w(A,K)+"; Body: "+x)}M.http.do(L,M,A,Z,T,K,function(Y,Q,W,nt,F){if(Y&&b.default.isTokenErr(Y)){M.auth.authorize(null,null,function(it){if(it){q(it);return}D(M,Z,K,q,I)});return}q(Y,Q,W,nt,F)})}D(M,y,B,q,I)},z})();r.default=U}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=h.__importDefault(o(3)),p=h.__importDefault(o(9)),b=h.__importStar(o(1));function R(E){return O.Actions.indexOf(E)}var O=(function(){function E(){}return E.prototype.isSynthesized=function(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId},E.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var D=this.id.split(":");return{connectionId:D[0],msgSerial:parseInt(D[1],10),index:parseInt(D[2],10)}},E.prototype.toJSON=function(){var D=this.data,S=this.encoding;return D&&g.default.BufferUtils.isBuffer(D)&&(arguments.length>0?(S=S?S+"/base64":"base64",D=g.default.BufferUtils.base64Encode(D)):D=g.default.BufferUtils.toBuffer(D)),{id:this.id,clientId:this.clientId,action:R(this.action),data:D,encoding:S,extras:this.extras}},E.prototype.toString=function(){var D="[PresenceMessage";return D+="; action="+this.action,this.id&&(D+="; id="+this.id),this.timestamp&&(D+="; timestamp="+this.timestamp),this.clientId&&(D+="; clientId="+this.clientId),this.connectionId&&(D+="; connectionId="+this.connectionId),this.encoding&&(D+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?D+="; data="+this.data:g.default.BufferUtils.isBuffer(this.data)?D+="; data (buffer)="+g.default.BufferUtils.base64Encode(this.data):D+="; data (json)="+JSON.stringify(this.data)),this.extras&&(D+="; extras="+JSON.stringify(this.extras)),D+="]",D},E.fromResponseBody=function(D,S,G){var w=[];G&&(D=b.decodeBody(D,G));for(var j=0;j<D.length;j++){var U=w[j]=E.fromValues(D[j],!0);try{E.decode(U,S)}catch(z){c.default.logAction(c.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",z.toString())}}return w},E.fromValues=function(D,S){return S&&(D.action=E.Actions[D.action]),Object.assign(new E,D)},E.fromValuesArray=function(D){for(var S=D.length,G=new Array(S),w=0;w<S;w++)G[w]=E.fromValues(D[w]);return G},E.fromEncoded=function(D,S){var G=E.fromValues(D,!0);try{E.decode(G,S??{})}catch(w){c.default.logAction(c.default.LOG_ERROR,"PresenceMessage.fromEncoded()",w.toString())}return G},E.fromEncodedArray=function(D,S){return D.map(function(G){return E.fromEncoded(G,S)})},E.fromData=function(D){return D instanceof E?D:E.fromValues({data:D})},E.Actions=["absent","present","enter","leave","update"],E.encode=p.default.encode,E.decode=p.default.decode,E.getMessagesSize=p.default.getMessagesSize,E})();r.default=O}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importStar(o(1)),p=c.__importDefault(o(7)),b=c.__importStar(o(4)),R=c.__importDefault(o(2)),O=c.__importDefault(o(8)),E=c.__importDefault(o(22)),D=c.__importDefault(o(3));function S(N,q){return g.arrIn(g.allToLowerCase(g.keysArray(q)),"x-ably-errorcode")}function G(N,q){if(S(N,q))return N.error&&b.default.fromValues(N.error)}var w=function(){},j=0,U={},z=typeof h<"u"&&h.XDomainRequest;function L(){var N=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/);return N&&Number(N[1])}function M(){var N;return z&&(N=L())&&N===10}function A(N,q){return N.getResponseHeader&&N.getResponseHeader(q)}function T(N){return N.getResponseHeader&&(N.getResponseHeader("transfer-encoding")||!N.getResponseHeader("content-length"))}function y(N){for(var q=g.trim(N.getAllResponseHeaders()).split(`\r
`),I={},Z=0;Z<q.length;Z++){var K=q[Z].split(":").map(g.trim);I[K[0].toLowerCase()]=K[1]}return I}var B=(function(N){c.__extends(q,N);function q(I,Z,K,P,x,Y,Q){var W=N.call(this)||this;return K=K||{},K.rnd=g.cheapRandStr(),M()&&!K.envelope&&(K.envelope="json"),W.uri=I+g.toQueryString(K),W.headers=Z||{},W.body=P,W.method=Q?Q.toUpperCase():g.isEmptyArg(P)?"GET":"POST",W.requestMode=x,W.timeouts=Y,W.timedOut=!1,W.requestComplete=!1,W.id=String(++j),U[W.id]=W,W}return q.createRequest=function(I,Z,K,P,x,Y,Q){var W=Y||O.default.TIMEOUTS;return new q(I,Z,g.copy(K),P,x,W,Q)},q.prototype.complete=function(I,Z,K,P,x){this.requestComplete||(this.requestComplete=!0,!I&&Z&&this.emit("data",Z),this.emit("complete",I,Z,K,P,x),this.dispose())},q.prototype.abort=function(){this.dispose()},q.prototype.exec=function(){var I=this,Z=this.headers,K=this.requestMode==E.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,P=this.timer=setTimeout(function(){I.timedOut=!0,Y.abort()},K),x=this.method,Y=this.xhr=new XMLHttpRequest,Q=Z.accept,W=this.body,nt="text";if(Q?Q.indexOf("application/x-msgpack")===0&&(nt="arraybuffer"):Z.accept="application/json",W){var F=Z["content-type"]||(Z["content-type"]="application/json");F.indexOf("application/json")>-1&&typeof W!="string"&&(W=JSON.stringify(W))}Y.open(x,this.uri,!0),Y.responseType=nt,"authorization"in Z&&(Y.withCredentials=!0);for(var it in Z)Y.setRequestHeader(it,Z[it]);var at=function(xt,Xt,Zt,ye){var he,Ue=Xt+" (event type: "+xt.type+")";!((he=I==null?void 0:I.xhr)===null||he===void 0)&&he.statusText&&(Ue+=", current statusText is "+I.xhr.statusText),R.default.logAction(R.default.LOG_ERROR,"Request.on"+xt.type+"()",Ue),I.complete(new b.PartialErrorInfo(Ue,Zt,ye))};Y.onerror=function(xt){at(xt,"XHR error occurred",null,400)},Y.onabort=function(xt){I.timedOut?at(xt,"Request aborted due to request timeout expiring",null,408):at(xt,"Request cancelled",null,400)},Y.ontimeout=function(xt){at(xt,"Request timed out",null,408)};var X,J,$,tt=0,ut=!1,Tt=function(){if(clearTimeout(P),$=J<400,J==204){I.complete(null,null,null,null,J);return}X=I.requestMode==E.default.REQ_RECV_STREAM&&$&&T(Y)},gt=function(){var xt;try{var Xt=A(Y,"content-type"),Zt=Xt?Xt.indexOf("application/json")>=0:Y.responseType=="text";if(Zt){var ye=Y.responseType==="arraybuffer"?D.default.BufferUtils.utf8Decode(Y.response):String(Y.responseText);ye.length?xt=JSON.parse(ye):xt=ye,ut=!0}else xt=Y.response;xt.response!==void 0?(J=xt.statusCode,$=J<400,Z=xt.headers,xt=xt.response):Z=y(Y)}catch(Ue){I.complete(new b.PartialErrorInfo("Malformed response body from server: "+Ue.message,null,400));return}if($||g.isArray(xt)){I.complete(null,xt,Z,ut,J);return}var he=G(xt,Z);he||(he=new b.PartialErrorInfo("Error response received from server: "+J+" body was: "+D.default.Config.inspect(xt),null,J)),I.complete(he,xt,Z,ut,J)};function Mt(){for(var xt=Y.responseText,Xt=xt.length-1,Zt,ye;tt<Xt&&(Zt=xt.indexOf(`
`,tt))>-1;)ye=xt.slice(tt,Zt),tt=Zt+1,Rt(ye)}var Rt=function(xt){try{xt=JSON.parse(xt)}catch(Xt){I.complete(new b.PartialErrorInfo("Malformed response body from server: "+Xt.message,null,400));return}I.emit("data",xt)},Ot=function(){Mt(),I.streamComplete=!0,D.default.Config.nextTick(function(){I.complete()})};Y.onreadystatechange=function(){var xt=Y.readyState;xt<3||Y.status!==0&&(J===void 0&&(J=Y.status,J===1223&&(J=204),Tt()),xt==3&&X?Mt():xt==4&&(X?Ot():gt()))},Y.send(W)},q.prototype.dispose=function(){var I=this.xhr;if(I){I.onreadystatechange=I.onerror=I.onabort=I.ontimeout=w,this.xhr=null;var Z=this.timer;Z&&(clearTimeout(Z),this.timer=null),this.requestComplete||I.abort()}delete U[this.id]},q})(p.default);r.default=B}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=h.__importStar(o(1)),p=h.__importDefault(o(24)),b=h.__importDefault(o(4)),R=h.__importDefault(o(45)),O=o(11),E=h.__importDefault(o(19)),D=h.__importDefault(o(14)),S=h.__importDefault(o(3)),G=h.__importDefault(o(15)),w=Math.pow(2,17);function j(){}function U(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function z(K){return!!K.connection}function L(K){return g.isErrorInfoOrPartialErrorInfo(K)?(K.code||(K.statusCode===403?K.code=40300:(K.code=40170,K.statusCode=401)),K):new b.default(g.inspectError(K),K.code||40170,K.statusCode||401)}var M=function(K,P){if(S.default.Config.createHmac){var x=S.default.Config.createHmac("SHA256",P);return x.update(K),x.digest("base64")}return(0,O.stringify)((0,R.default)(K,P))};function A(K){if(!K)return"";typeof K=="string"&&(K=JSON.parse(K));var P=Object.create(null),x=g.keysArray(K,!0);if(!x)return"";x.sort();for(var Y=0;Y<x.length;Y++)P[x[Y]]=K[x[Y]].sort();return JSON.stringify(P)}function T(K){if(K.authCallback)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(K.authUrl)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(K.key)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(K.tokenDetails)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with supplied token only");else{var P="authOptions must include valid authentication parameters";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",P),new Error(P)}}function y(K){return"useTokenAuth"in K&&!K.useTokenAuth}function B(K){return K.useTokenAuth||!y(K)&&(K.authCallback||K.authUrl||K.token||K.tokenDetails)}function N(K){return!K.key&&!K.authCallback&&!K.authUrl}var q=0;function I(){return q++}var Z=(function(){function K(P,x){if(this.authOptions={},this.client=P,this.tokenParams=x.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,B(x)){if(x.key&&!M){var Y="client-side token request signing not supported";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",Y),new Error(Y)}N(x)&&c.default.logAction(c.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(x.defaultTokenParams,x),T(this.authOptions)}else{if(!x.key){var Y="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",Y),new b.default(Y,40160,401)}c.default.logAction(c.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(x)}}return K.prototype.authorize=function(P,x,Y){var Q=this,W;if(typeof P=="function"&&!Y?(Y=P,W=P=null):typeof x=="function"&&!Y?(Y=x,W=null):W=x,!Y&&this.client.options.promises)return g.promisify(this,"authorize",arguments);if(W&&W.key&&this.authOptions.key!==W.key)throw new b.default("Unable to update auth options with incompatible key",40102,401);W&&"force"in W&&(c.default.deprecated("The `force` auth option","If you’re using this option to force `authorize()` to fetch a new token even if the current token has not expired, this is no longer necessary, as `authorize()` now always fetches a new token. Update your code to no longer pass the `force` auth option. Note that, in general, passing an auth options argument to `authorize()` will overwrite the library’s stored auth options, which may not be what you want. The library currently contains a special case behavior where passing an auth options object which only contains `{ force: true }` will _not_ overwrite the stored options. This special case behavior will be removed alongside support for the `force` option, so if you’re currently passing `authorize()` an auth options object which only contains `{ force: true }`, you should stop passing it an auth options object entirely."),g.isOnlyPropIn(W,"force")&&(W=null)),this._forceNewToken(P,W,function(nt,F){if(nt){Q.client.connection&&nt.statusCode===D.default.Forbidden&&Q.client.connection.connectionManager.actOnErrorFromAuthorize(nt),Y==null||Y(nt);return}z(Q.client)?Q.client.connection.connectionManager.onAuthUpdated(F,Y||j):Y==null||Y(null,F)})},K.prototype.authorise=function(P,x,Y){c.default.renamedMethod("Auth","authorise","authorize"),this.authorize(P,x,Y)},K.prototype._forceNewToken=function(P,x,Y){var Q=this;this.tokenDetails=null,this._saveTokenOptions(P,x),T(this.authOptions),this._ensureValidAuthCredentials(!0,function(W,nt){delete Q.tokenParams.timestamp,delete Q.authOptions.queryTime,Y(W,nt)})},K.prototype.requestToken=function(P,x,Y){var Q=this;if(typeof P=="function"&&!Y?(Y=P,x=P=null):typeof x=="function"&&!Y&&(Y=x,x=null),!Y&&this.client.options.promises)return g.promisify(this,"requestToken",arguments);x=x||this.authOptions,P=P||g.copy(this.tokenParams);var W=Y||j,nt,F=this.client;if(x.authCallback)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),nt=x.authCallback;else if(x.authUrl)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),nt=function(tt,ut){var Tt=g.mixin({accept:"application/json, text/plain"},x.authHeaders),gt=x.authMethod&&x.authMethod.toLowerCase()==="post",Mt,Rt=x.authUrl.indexOf("?");Rt>-1&&(Mt=g.parseQueryString(x.authUrl.slice(Rt)),x.authUrl=x.authUrl.slice(0,Rt),gt||(x.authParams=g.mixin(Mt,x.authParams)));var Ot=g.mixin({},x.authParams||{},tt),xt=function(ye,he,Ue,_n){var Ge;if(ye?c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+g.inspectError(ye)):(Ge=Ue["content-type"],c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Ge+"; body: "+g.inspectBody(he))),ye||_n)return ut(ye,he);if(S.default.BufferUtils.isBuffer(he)&&(he=he.toString()),!Ge){ut(new b.default("authUrl response is missing a content-type header",40170,401));return}var Be=Ge.indexOf("application/json")>-1,Sa=Ge.indexOf("text/plain")>-1||Ge.indexOf("application/jwt")>-1;if(!Be&&!Sa){ut(new b.default("authUrl responded with unacceptable content-type "+Ge+", should be either text/plain, application/jwt or application/json",40170,401));return}if(Be){if(he.length>w){ut(new b.default("authUrl response exceeded max permitted length",40170,401));return}try{he=JSON.parse(he)}catch(dn){ut(new b.default("Unexpected error processing authURL response; err = "+dn.message,40170,401));return}}ut(null,he,Ge)};if(c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+x.authUrl+"; Params: "+JSON.stringify(Ot)+"; method: "+(gt?"POST":"GET")),gt){var Xt=Tt||{};Xt["content-type"]="application/x-www-form-urlencoded";var Zt=g.toQueryString(Ot).slice(1);Q.client.http.doUri(E.default.Post,F,x.authUrl,Xt,Zt,Mt,xt)}else Q.client.http.doUri(E.default.Get,F,x.authUrl,Tt||{},null,Ot,xt)};else if(x.key)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),nt=function(tt,ut){Q.createTokenRequest(tt,x,ut)};else{var it="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";c.default.logAction(c.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),W(new b.default(it,40171,403));return}"capability"in P&&(P.capability=A(P.capability));var at=function(tt,ut){var Tt=tt.keyName,gt="/keys/"+Tt+"/requestToken",Mt=function(Ot){return F.baseUri(Ot)+gt},Rt=g.defaultPostHeaders(Q.client.options);x.requestHeaders&&g.mixin(Rt,x.requestHeaders),c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+gt+"; Token params: "+JSON.stringify(tt)),Q.client.http.do(E.default.Post,F,Mt,Rt,JSON.stringify(tt),null,ut)},X=!1,J=this.client.options.timeouts.realtimeRequestTimeout,$=setTimeout(function(){X=!0;var tt="Token request callback timed out after "+J/1e3+" seconds";c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",tt),W(new b.default(tt,40170,401))},J);nt(P,function(tt,ut,Tt){if(!X){if(clearTimeout($),tt){c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+g.inspectError(tt)),W(L(tt));return}if(typeof ut=="string"){ut.length===0?W(new b.default("Token string is empty",40170,401)):ut.length>w?W(new b.default("Token string exceeded max permitted length (was "+ut.length+" bytes)",40170,401)):ut==="undefined"||ut==="null"?W(new b.default("Token string was literal null/undefined",40170,401)):ut[0]==="{"&&!(Tt&&Tt.indexOf("application/jwt")>-1)?W(new b.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):W(null,{token:ut});return}if(typeof ut!="object"){var gt="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof ut;c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",gt),W(new b.default(gt,40170,401));return}var Mt=JSON.stringify(ut).length;if(Mt>w&&!x.suppressMaxLengthCheck){W(new b.default("Token request/details object exceeded max permitted stringified size (was "+Mt+" bytes)",40170,401));return}if("issued"in ut){W(null,ut);return}if(!("keyName"in ut)){var gt="Expected token request callback to call back with a token string, token request object, or token details object";c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",gt),W(new b.default(gt,40170,401));return}at(ut,function(Rt,Ot,xt,Xt){if(Rt){c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+g.inspectError(Rt)),W(L(Rt));return}Xt||(Ot=JSON.parse(Ot)),c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","token received"),W(null,Ot)})}})},K.prototype.createTokenRequest=function(P,x,Y){var Q=this;if(typeof P=="function"&&!Y?(Y=P,x=P=null):typeof x=="function"&&!Y&&(Y=x,x=null),!Y&&this.client.options.promises)return g.promisify(this,"createTokenRequest",arguments);x=x||this.authOptions,P=P||g.copy(this.tokenParams);var W=x.key;if(!W){Y(new b.default("No key specified",40101,403));return}var nt=W.split(":"),F=nt[0],it=nt[1];if(!it){Y(new b.default("Invalid key specified",40101,403));return}if(P.clientId===""){Y(new b.default("clientId can’t be an empty string",40012,400));return}"capability"in P&&(P.capability=A(P.capability));var at=g.mixin({keyName:F},P),X=P.clientId||"",J=P.ttl||"",$=P.capability||"";(function(tt){if(at.timestamp){tt();return}Q.getTimestamp(x&&x.queryTime,function(ut,Tt){if(ut){Y(ut);return}at.timestamp=Tt,tt()})})(function(){var tt=at.nonce||(at.nonce=U()),ut=at.timestamp,Tt=at.keyName+`
`+J+`
`+$+`
`+X+`
`+ut+`
`+tt+`
`;at.mac=at.mac||M(Tt,it),c.default.logAction(c.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),Y(null,at)})},K.prototype.getAuthParams=function(P){this.method=="basic"?P(null,{key:this.key}):this._ensureValidAuthCredentials(!1,function(x,Y){if(x){P(x);return}if(!Y)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");P(null,{access_token:Y.token})})},K.prototype.getAuthHeaders=function(P){this.method=="basic"?P(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,function(x,Y){if(x){P(x);return}if(!Y)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");P(null,{authorization:"Bearer "+g.toBase64(Y.token)})})},K.prototype.getTimestamp=function(P,x){!this.isTimeOffsetSet()&&(P||this.authOptions.queryTime)?this.client.time(x):x(null,this.getTimestampUsingOffset())},K.prototype.getTimestampUsingOffset=function(){return g.now()+(this.client.serverTimeOffset||0)},K.prototype.isTimeOffsetSet=function(){return this.client.serverTimeOffset!==null},K.prototype._saveBasicOptions=function(P){this.method="basic",this.key=P.key,this.basicKey=g.toBase64(P.key),this.authOptions=P||{},"clientId"in P&&this._userSetClientId(P.clientId)},K.prototype._saveTokenOptions=function(P,x){this.method="token",P&&(this.tokenParams=P),x&&(x.token&&(x.tokenDetails=typeof x.token=="string"?{token:x.token}:x.token),x.tokenDetails&&(this.tokenDetails=x.tokenDetails),"clientId"in x&&this._userSetClientId(x.clientId),this.authOptions=x)},K.prototype._ensureValidAuthCredentials=function(P,x){var Y=this,Q=this.tokenDetails;if(Q){if(this._tokenClientIdMismatch(Q.clientId)){x(new b.default("Mismatch between clientId in token ("+Q.clientId+") and current clientId ("+this.clientId+")",40102,403));return}if(!this.isTimeOffsetSet()||!Q.expires||Q.expires>=this.getTimestampUsingOffset()){c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+Q.expires),x(null,Q);return}c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=p.default.create())).push(x),!(this.currentTokenRequestId!==null&&!P)){var W=this.currentTokenRequestId=I();this.requestToken(this.tokenParams,this.authOptions,function(nt,F){if(Y.currentTokenRequestId>W){c.default.logAction(c.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");return}Y.currentTokenRequestId=null;var it=Y.waitingForTokenRequest||j;if(Y.waitingForTokenRequest=null,nt){it(nt);return}it(null,Y.tokenDetails=F)})}},K.prototype._userSetClientId=function(P){if(typeof P=="string"||P===null){if(P==="*")throw new b.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var x=this._uncheckedSetClientId(P);if(x)throw x}else throw new b.default("clientId must be either a string or null",40012,400)},K.prototype._uncheckedSetClientId=function(P){if(this._tokenClientIdMismatch(P)){var x="Unexpected clientId mismatch: client has "+this.clientId+", requested "+P,Y=new b.default(x,40102,401);return c.default.logAction(c.default.LOG_ERROR,"Auth._uncheckedSetClientId()",x),Y}else return this.clientId=this.tokenParams.clientId=P,null},K.prototype._tokenClientIdMismatch=function(P){return!!(this.clientId&&this.clientId!=="*"&&P&&P!=="*"&&this.clientId!==P)},K.isTokenErr=function(P){return P.code&&P.code>=40140&&P.code<40150},K.prototype.revokeTokens=function(P,x,Y){if(B(this.client.options))throw new b.default("Cannot revoke tokens when using token auth",40162,401);var Q=this.client.options.keyName,W;if(typeof x=="function"?(Y=x,W={}):W=x??{},Y===void 0){if(this.client.options.promises)return g.promisify(this,"revokeTokens",[P,W]);Y=j}var nt=Y,F=h.__assign({targets:P.map(function(J){return"".concat(J.type,":").concat(J.value)})},W),it=this.client.options.useBinaryProtocol?g.Format.msgpack:g.Format.json,at=g.defaultPostHeaders(this.client.options,it);this.client.options.headers&&g.mixin(at,this.client.options.headers);var X=g.encodeBody(F,it);G.default.post(this.client,"/keys/".concat(Q,"/revokeTokens"),X,at,{newBatchResponse:"true"},null,function(J,$,tt,ut){if(J){nt(J);return}var Tt=ut?$:g.decodeBody($,it);nt(null,Tt)})},K})();r.default=Z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c.Get="get",c.Delete="delete",c.Post="post",c.Put="put",c.Patch="patch"})(h||(h={})),r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.HttpPaginatedResponse=r.PaginatedResult=void 0;var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(15)),b=h.__importDefault(o(14));function R(w){var j=w.match(/^\.\/(\w+)\?(.*)$/);return j&&j[2]&&c.parseQueryString(j[2])}function O(w){typeof w=="string"&&(w=w.split(","));for(var j={},U=0;U<w.length;U++){var z=w[U].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(z){var L=R(z[1]);L&&(j[z[2]]=L)}}return j}function E(w,j,U){return!(U&&(j||typeof w.code=="number"))}var D=(function(){function w(j,U,z,L,M,A){this.rest=j,this.path=U,this.headers=z,this.envelope=L??null,this.bodyHandler=M,this.useHttpPaginatedResponse=A||!1}return w.prototype.get=function(j,U){var z=this;p.default.get(this.rest,this.path,this.headers,j,this.envelope,function(L,M,A,T,y){z.handlePage(L,M,A,T,y,U)})},w.prototype.delete=function(j,U){var z=this;p.default.delete(this.rest,this.path,this.headers,j,this.envelope,function(L,M,A,T,y){z.handlePage(L,M,A,T,y,U)})},w.prototype.post=function(j,U,z){var L=this;p.default.post(this.rest,this.path,U,this.headers,j,this.envelope,function(M,A,T,y,B){z&&L.handlePage(M,A,T,y,B,z)})},w.prototype.put=function(j,U,z){var L=this;p.default.put(this.rest,this.path,U,this.headers,j,this.envelope,function(M,A,T,y,B){z&&L.handlePage(M,A,T,y,B,z)})},w.prototype.patch=function(j,U,z){var L=this;p.default.patch(this.rest,this.path,U,this.headers,j,this.envelope,function(M,A,T,y,B){z&&L.handlePage(M,A,T,y,B,z)})},w.prototype.handlePage=function(j,U,z,L,M,A){if(j&&E(j,U,this.useHttpPaginatedResponse)){g.default.logAction(g.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+c.inspectError(j)),A==null||A(j);return}var T,y,B;try{T=M==b.default.NoContent?[]:this.bodyHandler(U,z||{},L)}catch(N){A==null||A(j||N);return}z&&(y=z.Link||z.link)&&(B=O(y)),this.useHttpPaginatedResponse?A(null,new G(this,T,z||{},M,B,j)):A(null,new S(this,T,B))},w})(),S=(function(){function w(j,U,z){var L=this;this.resource=j,this.items=U;var M=this;z&&("first"in z&&(this.first=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"first",[]);M.get(z.first,A)}),"current"in z&&(this.current=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"current",[]);M.get(z.current,A)}),this.next=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"next",[]);"next"in z?M.get(z.next,A):A(null,null)},this.hasNext=function(){return"next"in z},this.isLast=function(){var A;return!(!((A=L.hasNext)===null||A===void 0)&&A.call(L))})}return w.prototype.get=function(j,U){var z=this.resource;p.default.get(z.rest,z.path,z.headers,j,z.envelope,function(L,M,A,T,y){z.handlePage(L,M,A,T,y,U)})},w})();r.PaginatedResult=S;var G=(function(w){h.__extends(j,w);function j(U,z,L,M,A,T){var y=w.call(this,U,z,A)||this;return y.statusCode=M,y.success=M<300&&M>=200,y.headers=L,y.errorCode=T&&T.code,y.errorMessage=T&&T.message,y}return j.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},j})(S);r.HttpPaginatedResponse=G,r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isRetriable=void 0;var h=o(0),c=h.__importDefault(o(4)),g={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},p={disconnected:function(){return c.default.fromValues({statusCode:400,code:g.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return c.default.fromValues({statusCode:400,code:g.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return c.default.fromValues({statusCode:400,code:g.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return c.default.fromValues({statusCode:400,code:g.CLOSING,message:"Connection closing"})},closed:function(){return c.default.fromValues({statusCode:400,code:g.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return c.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return c.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};function b(R){return!R.statusCode||!R.code||R.statusCode>=500?!0:Object.values(g).includes(R.code)}r.isRetriable=b,r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c[c.REQ_SEND=0]="REQ_SEND",c[c.REQ_RECV=1]="REQ_RECV",c[c.REQ_RECV_POLL=2]="REQ_RECV_POLL",c[c.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"})(h||(h={})),r.default=h}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(5),o(58),o(11),o(40),o(32),o(25),o(27),o(28),o(59),o(60))})(this,function(h){return h})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=(function(){function p(b){this.members=b||[]}return p.prototype.call=function(){for(var b=[],R=0;R<arguments.length;R++)b[R]=arguments[R];for(var O=0,E=this.members;O<E.length;O++){var D=E[O];if(D)try{D.apply(void 0,b)}catch(S){c.default.logAction(c.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+S+"; stack = "+S.stack)}}},p.prototype.push=function(){for(var b,R=[],O=0;O<arguments.length;O++)R[O]=arguments[O];(b=this.members).push.apply(b,R)},p.create=function(b){var R=new p(b);return Object.assign(function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];return R.call.apply(R,O)},{push:function(O){return R.push(O)}})},p})();r.default=g}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){(function(){var c=h,g=c.lib,p=g.Base,b=c.enc,R=b.Utf8,O=c.algo;O.HMAC=p.extend({init:function(E,D){E=this._hasher=new E.init,typeof D=="string"&&(D=R.parse(D));var S=E.blockSize,G=S*4;D.sigBytes>G&&(D=E.finalize(D)),D.clamp();for(var w=this._oKey=D.clone(),j=this._iKey=D.clone(),U=w.words,z=j.words,L=0;L<S;L++)U[L]^=1549556828,z[L]^=909522486;w.sigBytes=j.sigBytes=G,this.reset()},reset:function(){var E=this._hasher;E.reset(),E.update(this._iKey)},update:function(E){return this._hasher.update(E),this},finalize:function(E){var D=this._hasher,S=D.finalize(E);D.reset();var G=D.finalize(this._oKey.clone().concat(S));return G}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(10)),g=h.__importStar(o(1)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),R=h.__importDefault(o(21)),O=h.__importDefault(o(4)),E=h.__importDefault(o(3)),D=c.default.Action,S=c.default.fromValues({action:D.CLOSE}),G=c.default.fromValues({action:D.DISCONNECT}),w=(function(j){h.__extends(U,j);function U(z,L,M,A){var T=j.call(this)||this;return A&&(M.format=void 0,M.heartbeats=!0),T.connectionManager=z,z.registerProposedTransport(T),T.auth=L,T.params=M,T.timeouts=M.options.timeouts,T.format=M.format,T.isConnected=!1,T.isFinished=!1,T.isDisposed=!1,T.maxIdleInterval=null,T.idleTimer=null,T.lastActivity=null,T}return U.prototype.connect=function(){},U.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",R.default.closed())},U.prototype.disconnect=function(z){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",z||R.default.disconnected())},U.prototype.fail=function(z){this.isConnected&&this.requestDisconnect(),this.finish("failed",z||R.default.failed())},U.prototype.finish=function(z,L){var M;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((M=this.idleTimer)!==null&&M!==void 0?M:void 0),this.idleTimer=null,this.emit(z,L),this.dispose())},U.prototype.onProtocolMessage=function(z){switch(b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+c.default.stringify(z)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),z.action){case D.HEARTBEAT:b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",z.id);break;case D.CONNECTED:this.onConnect(z),this.emit("connected",z.error,z.connectionId,z.connectionDetails,z);break;case D.CLOSED:this.onClose(z);break;case D.DISCONNECTED:this.onDisconnect(z);break;case D.ACK:this.emit("ack",z.msgSerial,z.count);break;case D.NACK:this.emit("nack",z.msgSerial,z.count,z.error);break;case D.SYNC:this.connectionManager.onChannelMessage(z,this);break;case D.ACTIVATE:break;case D.AUTH:this.auth.authorize(function(L){L&&b.default.logAction(b.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+g.inspectError(L))});break;case D.ERROR:if(b.default.logAction(b.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+E.default.Config.inspect(z.error)+(z.channel?", channel: "+z.channel:"")),z.channel===void 0){this.onFatalError(z);break}this.connectionManager.onChannelMessage(z,this);break;default:this.connectionManager.onChannelMessage(z,this)}},U.prototype.onConnect=function(z){if(this.isConnected=!0,!z.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var L=z.connectionDetails.maxIdleInterval;L&&(this.maxIdleInterval=L+this.timeouts.realtimeRequestTimeout,this.onActivity())},U.prototype.onDisconnect=function(z){var L=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onDisconnect()","err = "+g.inspectError(L)),this.finish("disconnected",L)},U.prototype.onFatalError=function(z){var L=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onFatalError()","err = "+g.inspectError(L)),this.finish("failed",L)},U.prototype.onClose=function(z){var L=z&&z.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onClose()","err = "+g.inspectError(L)),this.finish("closed",L)},U.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestClose()",""),this.send(S)},U.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(G)},U.prototype.ping=function(z){var L={action:c.default.Action.HEARTBEAT};z&&(L.id=z),this.send(c.default.fromValues(L))},U.prototype.dispose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},U.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=g.now(),this.setIdleTimer(this.maxIdleInterval+100))},U.prototype.setIdleTimer=function(z){var L=this;this.idleTimer||(this.idleTimer=setTimeout(function(){L.onIdleTimerExpire()},z))},U.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var z=g.now()-this.lastActivity,L=this.maxIdleInterval-z;if(L<=0){var M="No activity seen from realtime in "+z+"ms; assuming connection has dropped";b.default.logAction(b.default.LOG_ERROR,"Transport.onIdleTimerExpire()",M),this.disconnect(new O.default(M,80003,408))}else this.setIdleTimer(L+100)},U.tryConnect=function(z,L,M,A,T){var y=new z(L,M,A),B,N=function(I){clearTimeout(B),T({event:this.event,error:I})},q=L.options.timeouts.realtimeRequestTimeout;B=setTimeout(function(){y.off(["preconnect","disconnected","failed"]),y.dispose(),N.call({event:"disconnected"},new O.default("Timeout waiting for transport to indicate itself viable",5e4,500))},q),y.on(["failed","disconnected"],N),y.on("preconnect",function(){b.default.logAction(b.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+y),clearTimeout(B),y.off(["failed","disconnected"],N),T(null,y)}),y.connect()},U})(p.default);r.default=w}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(40),o(25))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.Base,b=g.WordArray,R=c.algo,O=R.MD5,E=R.EvpKDF=p.extend({cfg:p.extend({keySize:128/32,hasher:O,iterations:1}),init:function(D){this.cfg=this.cfg.extend(D)},compute:function(D,S){for(var G,w=this.cfg,j=w.hasher.create(),U=b.create(),z=U.words,L=w.keySize,M=w.iterations;z.length<L;){G&&j.update(G),G=j.update(D).finalize(S),j.reset();for(var A=1;A<M;A++)G=j.finalize(G),j.reset();U.concat(G)}return U.sigBytes=L*4,U}});c.EvpKDF=function(D,S,G){return E.create(G).compute(D,S)}})(),h.EvpKDF})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(27))})(this,function(h){h.lib.Cipher||(function(c){var g=h,p=g.lib,b=p.Base,R=p.WordArray,O=p.BufferedBlockAlgorithm,E=g.enc;E.Utf8;var D=E.Base64,S=g.algo,G=S.EvpKDF,w=p.Cipher=O.extend({cfg:b.extend(),createEncryptor:function(Z,K){return this.create(this._ENC_XFORM_MODE,Z,K)},createDecryptor:function(Z,K){return this.create(this._DEC_XFORM_MODE,Z,K)},init:function(Z,K,P){this.cfg=this.cfg.extend(P),this._xformMode=Z,this._key=K,this.reset()},reset:function(){O.reset.call(this),this._doReset()},process:function(Z){return this._append(Z),this._process()},finalize:function(Z){Z&&this._append(Z);var K=this._doFinalize();return K},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function Z(K){return typeof K=="string"?I:B}return function(K){return{encrypt:function(P,x,Y){return Z(x).encrypt(K,P,x,Y)},decrypt:function(P,x,Y){return Z(x).decrypt(K,P,x,Y)}}}})()});p.StreamCipher=w.extend({_doFinalize:function(){var Z=this._process(!0);return Z},blockSize:1});var j=g.mode={},U=p.BlockCipherMode=b.extend({createEncryptor:function(Z,K){return this.Encryptor.create(Z,K)},createDecryptor:function(Z,K){return this.Decryptor.create(Z,K)},init:function(Z,K){this._cipher=Z,this._iv=K}}),z=j.CBC=(function(){var Z=U.extend();Z.Encryptor=Z.extend({processBlock:function(P,x){var Y=this._cipher,Q=Y.blockSize;K.call(this,P,x,Q),Y.encryptBlock(P,x),this._prevBlock=P.slice(x,x+Q)}}),Z.Decryptor=Z.extend({processBlock:function(P,x){var Y=this._cipher,Q=Y.blockSize,W=P.slice(x,x+Q);Y.decryptBlock(P,x),K.call(this,P,x,Q),this._prevBlock=W}});function K(P,x,Y){var Q,W=this._iv;W?(Q=W,this._iv=c):Q=this._prevBlock;for(var nt=0;nt<Y;nt++)P[x+nt]^=Q[nt]}return Z})(),L=g.pad={},M=L.Pkcs7={pad:function(Z,K){for(var P=K*4,x=P-Z.sigBytes%P,Y=x<<24|x<<16|x<<8|x,Q=[],W=0;W<x;W+=4)Q.push(Y);var nt=R.create(Q,x);Z.concat(nt)},unpad:function(Z){var K=Z.words[Z.sigBytes-1>>>2]&255;Z.sigBytes-=K}};p.BlockCipher=w.extend({cfg:w.cfg.extend({mode:z,padding:M}),reset:function(){var Z;w.reset.call(this);var K=this.cfg,P=K.iv,x=K.mode;this._xformMode==this._ENC_XFORM_MODE?Z=x.createEncryptor:(Z=x.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Z?this._mode.init(this,P&&P.words):(this._mode=Z.call(x,this,P&&P.words),this._mode.__creator=Z)},_doProcessBlock:function(Z,K){this._mode.processBlock(Z,K)},_doFinalize:function(){var Z,K=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(K.pad(this._data,this.blockSize),Z=this._process(!0)):(Z=this._process(!0),K.unpad(Z)),Z},blockSize:128/32});var A=p.CipherParams=b.extend({init:function(Z){this.mixIn(Z)},toString:function(Z){return(Z||this.formatter).stringify(this)}}),T=g.format={},y=T.OpenSSL={stringify:function(Z){var K,P=Z.ciphertext,x=Z.salt;return x?K=R.create([1398893684,1701076831]).concat(x).concat(P):K=P,K.toString(D)},parse:function(Z){var K,P=D.parse(Z),x=P.words;return x[0]==1398893684&&x[1]==1701076831&&(K=R.create(x.slice(2,4)),x.splice(0,4),P.sigBytes-=16),A.create({ciphertext:P,salt:K})}},B=p.SerializableCipher=b.extend({cfg:b.extend({format:y}),encrypt:function(Z,K,P,x){x=this.cfg.extend(x);var Y=Z.createEncryptor(P,x),Q=Y.finalize(K),W=Y.cfg;return A.create({ciphertext:Q,key:P,iv:W.iv,algorithm:Z,mode:W.mode,padding:W.padding,blockSize:Z.blockSize,formatter:x.format})},decrypt:function(Z,K,P,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var Y=Z.createDecryptor(P,x).finalize(K.ciphertext);return Y},_parse:function(Z,K){return typeof Z=="string"?K.parse(Z,this):Z}}),N=g.kdf={},q=N.OpenSSL={execute:function(Z,K,P,x){x||(x=R.random(64/8));var Y=G.create({keySize:K+P}).compute(Z,x),Q=R.create(Y.words.slice(K),P*4);return Y.sigBytes=K*4,A.create({key:Y,iv:Q,salt:x})}},I=p.PasswordBasedCipher=B.extend({cfg:B.cfg.extend({kdf:q}),encrypt:function(Z,K,P,x){x=this.cfg.extend(x);var Y=x.kdf.execute(P,Z.keySize,Z.ivSize);x.iv=Y.iv;var Q=B.encrypt.call(this,Z,K,Y.key,x);return Q.mixIn(Y),Q},decrypt:function(Z,K,P,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var Y=x.kdf.execute(P,Z.keySize,Z.ivSize,K.salt);x.iv=Y.iv;var Q=B.decrypt.call(this,Z,K,Y.key,x);return Q}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.Request=r.createRequest=void 0;var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(12)),p=h.__importDefault(o(3)),b=h.__importDefault(o(7)),R=o(4),O=h.__importDefault(o(8)),E=h.__importDefault(o(2)),D=h.__importDefault(o(22)),S=c.getGlobalObject(),G=function(){},w=S._ablyjs_jsonp={};w._=function(T){return w["_"+T]||G};var j=1,U="jsonp";function z(T,y,B,N,q,I,Z){return I=I||O.default.TIMEOUTS,new M(void 0,T,y,c.copy(B),N,q,I,Z)}r.createRequest=z;var L=(function(T){h.__extends(y,T);function y(B,N,q){var I=T.call(this,B,N,q)||this;return I.shortName=U,q.stream=!1,I}return y.isAvailable=function(){return p.default.Config.jsonpSupported&&p.default.Config.allowComet},y.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},y.prototype.createRequest=function(B,N,q,I,Z,K,P){return K=(this===null||this===void 0?void 0:this.timeouts)||K||O.default.TIMEOUTS,z(B,N,q,I,Z,K,P)},y})(g.default),M=(function(T){h.__extends(y,T);function y(B,N,q,I,Z,K,P,x){var Y=T.call(this)||this;return B===void 0&&(B=j++),Y.id=B,Y.uri=N,Y.params=I||{},Y.params.rnd=c.cheapRandStr(),q&&(q["X-Ably-Version"]&&(Y.params.v=q["X-Ably-Version"]),q["X-Ably-Lib"]&&(Y.params.lib=q["X-Ably-Lib"])),Y.body=Z,Y.method=x,Y.requestMode=K,Y.timeouts=P,Y.requestComplete=!1,Y}return y.prototype.exec=function(){var B=this,N=this.id,q=this.body,I=this.method,Z=this.uri,K=this.params;K.callback="_ablyjs_jsonp._("+N+")",K.envelope="jsonp",q&&(K.body=q),I&&I!=="get"&&(K.method=I);var P=this.script=document.createElement("script"),x=Z+c.toQueryString(K);P.src=x,P.src.split("/").slice(-1)[0]!==x.split("/").slice(-1)[0]&&E.default.logAction(E.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),P.async=!0,P.type="text/javascript",P.charset="UTF-8",P.onerror=function(W){B.complete(new R.PartialErrorInfo("JSONP script error (event: "+p.default.Config.inspect(W)+")",null,400))},w["_"+N]=function(W){if(W.statusCode){var nt=W.response;if(W.statusCode==204)B.complete(null,null,null,W.statusCode);else if(!nt)B.complete(new R.PartialErrorInfo("Invalid server response: no envelope detected",null,500));else if(W.statusCode<400||c.isArray(nt))B.complete(null,nt,W.headers,W.statusCode);else{var F=nt.error||new R.PartialErrorInfo("Error response received from server",null,W.statusCode);B.complete(F)}}else B.complete(null,W)};var Y=this.requestMode==D.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),Y);var Q=document.getElementsByTagName("head")[0];Q.insertBefore(P,Q.firstChild)},y.prototype.complete=function(B,N,q,I){if(q=q||{},!this.requestComplete){this.requestComplete=!0;var Z=void 0;N&&(Z=typeof N=="string"?"text/plain":"application/json",q["content-type"]=Z,this.emit("data",N)),this.emit("complete",B,N,q,!0,I),this.dispose()}},y.prototype.abort=function(){this.dispose()},y.prototype.dispose=function(){var B=this.timer;B&&(clearTimeout(B),this.timer=null);var N=this.script;N.parentNode&&N.parentNode.removeChild(N),delete w[this.id],this.emit("disposed")},y})(b.default);r.Request=M;function A(T){return S.JSONPTransport=L,L.isAvailable()&&(T.supportedTransports[U]=L),L}r.default=A}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(8)),b=h.__importDefault(o(18)),R=h.__importDefault(o(46)),O=h.__importDefault(o(20)),E=h.__importDefault(o(33)),D=h.__importDefault(o(4)),S=h.__importDefault(o(49)),G=h.__importDefault(o(19)),w=h.__importDefault(o(3)),j=h.__importDefault(o(9)),U=h.__importDefault(o(16)),z=h.__importDefault(o(15)),L=function(){},M=(function(){function T(y){if(!y){var B="no options provided";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",B),new Error(B)}var N=p.default.objectifyOptions(y);N.log?(g.default.setLog(N.log.level,N.log.handler),g.default.deprecated("The `log` client option","Equivalent functionality is provided by the `logLevel` and `logHandler` client options. Update your client options code of the form `{ log: { level: logLevel, handler: logHandler } }` to instead be `{ logLevel, logHandler }`.")):g.default.setLog(N.logLevel,N.logHandler),g.default.logAction(g.default.LOG_MICRO,"Rest()","initialized with clientOptions "+w.default.Config.inspect(y));var q=this.options=p.default.normaliseOptions(N);if(q.key){var I=q.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!I){var B="invalid key parameter";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",B),new D.default(B,40400,404)}q.keyName=I[1],q.keySecret=I[2]}if("clientId"in q)if(typeof q.clientId=="string"||q.clientId===null){if(q.clientId==="*")throw new D.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new D.default("clientId must be either a string or null",40012,400);g.default.logAction(g.default.LOG_MINOR,"Rest()","started; version = "+p.default.version),this.baseUri=this.authority=function(Z){return p.default.getHttpScheme(q)+Z+":"+p.default.getPort(q,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new w.default.Http(q),this.auth=new b.default(this,q),this.channels=new A(this),this.push=new R.default(this)}return T.prototype.stats=function(y,B){if(B===void 0)if(typeof y=="function")B=y,y=null;else{if(this.options.promises)return c.promisify(this,"stats",[y]);B=L}var N=c.defaultGetHeaders(this.options),q=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,I=this.http.supportsLinkHeaders?void 0:q;this.options.headers&&c.mixin(N,this.options.headers),new O.default(this,"/stats",N,I,function(Z,K,P){for(var x=P?Z:JSON.parse(Z),Y=0;Y<x.length;Y++)x[Y]=S.default.fromValues(x[Y]);return x}).get(y,B)},T.prototype.time=function(y,B){var N=this;if(B===void 0){if(typeof y=="function")B=y,y=null;else if(this.options.promises)return c.promisify(this,"time",[y])}var q=B||L,I=c.defaultGetHeaders(this.options);this.options.headers&&c.mixin(I,this.options.headers);var Z=function(K){return N.authority(K)+"/time"};this.http.do(G.default.Get,this,Z,I,null,y,function(K,P,x,Y){if(K){q(K);return}Y||(P=JSON.parse(P));var Q=P[0];if(!Q){q(new D.default("Internal error (unexpected result type from GET /time)",5e4,500));return}N.serverTimeOffset=Q-c.now(),q(null,Q)})},T.prototype.request=function(y,B,N,q,I,Z){var K=this.options.useBinaryProtocol,P=K?w.default.Config.msgpack.encode:JSON.stringify,x=K?w.default.Config.msgpack.decode:JSON.parse,Y=K?c.Format.msgpack:c.Format.json,Q=this.http.supportsLinkHeaders?void 0:Y;N=N||{};var W=y.toLowerCase(),nt=W=="get"?c.defaultGetHeaders(this.options,Y):c.defaultPostHeaders(this.options,Y);if(Z===void 0){if(this.options.promises)return c.promisify(this,"request",[y,B,N,q,I]);Z=L}typeof q!="string"&&(q=P(q)),this.options.headers&&c.mixin(nt,this.options.headers),I&&c.mixin(nt,I);var F=new O.default(this,B,nt,Q,function(it,at,X){return c.ensureArray(X?it:x(it))},!0);if(!c.arrIn(w.default.Http.methods,W))throw new D.default("Unsupported method "+W,40500,405);c.arrIn(w.default.Http.methodsWithBody,W)?F[W](N,q,Z):F[W](N,Z)},T.prototype.batchPublish=function(y,B){if(B===void 0){if(this.options.promises)return c.promisify(this,"batchPublish",[y]);B=L}var N=B,q,I;c.isArray(y)?(q=y,I=!1):(q=[y],I=!0);var Z=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,K=c.defaultPostHeaders(this.options,Z);this.options.headers&&c.mixin(K,this.options.headers);var P=c.encodeBody(q,Z);z.default.post(this,"/messages",P,K,{newBatchResponse:"true"},null,function(x,Y,Q,W){if(x){N(x);return}var nt=W?Y:c.decodeBody(Y,Z);I?N(null,nt[0]):N(null,nt)})},T.prototype.batchPresence=function(y,B){if(B===void 0){if(this.options.promises)return c.promisify(this,"batchPresence",[y]);B=L}var N=B,q=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,I=c.defaultPostHeaders(this.options,q);this.options.headers&&c.mixin(I,this.options.headers);var Z=y.join(",");z.default.get(this,"/presence",I,{newBatchResponse:"true",channels:Z},null,function(K,P,x,Y){if(K){N(K);return}var Q=Y?P:c.decodeBody(P,q);N(null,Q)})},T.prototype.setLog=function(y){g.default.setLog(y.level,y.handler)},T.Promise=function(y){return y=p.default.objectifyOptions(y),y.promises=!0,new T(y)},T.Callbacks=T,T.Platform=w.default,T.Message=j.default,T.PresenceMessage=U.default,T})(),A=(function(){function T(y){this.rest=y,this.all=Object.create(null)}return T.prototype.get=function(y,B){y=String(y);var N=this.all[y];return N?B&&N.setOptions(B):this.all[y]=N=new E.default(this.rest,y,B),N},T.prototype.release=function(y){delete this.all[String(y)]},T})();r.default=M}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return h.enc.Utf8})}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.WordArray,R=p.Hasher,O=g.algo,E=[],D=[];(function(){function w(L){for(var M=c.sqrt(L),A=2;A<=M;A++)if(!(L%A))return!1;return!0}function j(L){return(L-(L|0))*4294967296|0}for(var U=2,z=0;z<64;)w(U)&&(z<8&&(E[z]=j(c.pow(U,1/2))),D[z]=j(c.pow(U,1/3)),z++),U++})();var S=[],G=O.SHA256=R.extend({_doReset:function(){this._hash=new b.init(E.slice(0))},_doProcessBlock:function(w,j){for(var U=this._hash.words,z=U[0],L=U[1],M=U[2],A=U[3],T=U[4],y=U[5],B=U[6],N=U[7],q=0;q<64;q++){if(q<16)S[q]=w[j+q]|0;else{var I=S[q-15],Z=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,K=S[q-2],P=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;S[q]=Z+S[q-7]+P+S[q-16]}var x=T&y^~T&B,Y=z&L^z&M^L&M,Q=(z<<30|z>>>2)^(z<<19|z>>>13)^(z<<10|z>>>22),W=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),nt=N+W+x+D[q]+S[q],F=Q+Y;N=B,B=y,y=T,T=A+nt|0,A=M,M=L,L=z,z=nt+F|0}U[0]=U[0]+z|0,U[1]=U[1]+L|0,U[2]=U[2]+M|0,U[3]=U[3]+A|0,U[4]=U[4]+T|0,U[5]=U[5]+y|0,U[6]=U[6]+B|0,U[7]=U[7]+N|0},_doFinalize:function(){var w=this._data,j=w.words,U=this._nDataBytes*8,z=w.sigBytes*8;return j[z>>>5]|=128<<24-z%32,j[(z+64>>>9<<4)+14]=c.floor(U/4294967296),j[(z+64>>>9<<4)+15]=U,w.sigBytes=j.length*4,this._process(),this._hash},clone:function(){var w=R.clone.call(this);return w._hash=this._hash.clone(),w}});g.SHA256=R._createHelper(G),g.HmacSHA256=R._createHmacHelper(G)})(Math),h.SHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(2)),b=h.__importDefault(o(34)),R=h.__importDefault(o(9)),O=h.__importDefault(o(4)),E=h.__importDefault(o(20)),D=h.__importDefault(o(15)),S=h.__importDefault(o(3));function G(){}var w=9;function j(L){return c.arrEvery(L,function(M){return!M.id})}function U(L){var M=L||{};if(M.cipher){if(!S.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var A=S.default.Crypto.getCipher(M.cipher);M.cipher=A.cipherParams,M.channelCipher=A.cipher}else"cipher"in M&&(M.cipher=void 0,M.channelCipher=null);return M}var z=(function(L){h.__extends(M,L);function M(A,T,y){var B=L.call(this)||this;return p.default.logAction(p.default.LOG_MINOR,"Channel()","started; name = "+T),B.rest=A,B.name=T,B.basePath="/channels/"+encodeURIComponent(T),B.presence=new b.default(B),B.channelOptions=U(y),B}return M.prototype.setOptions=function(A){this.channelOptions=U(A)},M.prototype.history=function(A,T){if(p.default.logAction(p.default.LOG_MICRO,"Channel.history()","channel = "+this.name),T===void 0)if(typeof A=="function")T=A,A=null;else{if(this.rest.options.promises)return c.promisify(this,"history",arguments);T=G}this._history(A,T)},M.prototype._history=function(A,T){var y=this.rest,B=y.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,N=this.rest.http.supportsLinkHeaders?void 0:B,q=c.defaultGetHeaders(y.options,B);y.options.headers&&c.mixin(q,y.options.headers);var I=this.channelOptions;new E.default(y,this.basePath+"/messages",q,N,function(Z,K,P){return R.default.fromResponseBody(Z,I,P?void 0:B)}).get(A,T)},M.prototype.publish=function(){var A=this,T=arguments.length,y=arguments[0],B=arguments[1],N=arguments[T-1],q,I;if(typeof N!="function"){if(this.rest.options.promises)return c.promisify(this,"publish",arguments);N=G}if(typeof y=="string"||y===null)q=[R.default.fromValues({name:y,data:B})],I=arguments[2];else if(c.isObject(y))q=[R.default.fromValues(y)],I=arguments[1];else if(c.isArray(y))q=R.default.fromValuesArray(y),I=arguments[1];else throw new O.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);(typeof I!="object"||!I)&&(I={});var Z=this.rest,K=Z.options,P=K.useBinaryProtocol?c.Format.msgpack:c.Format.json,x=Z.options.idempotentRestPublishing,Y=c.defaultPostHeaders(Z.options,P);if(K.headers&&c.mixin(Y,K.headers),x&&j(q)){var Q=c.randomString(w);c.arrForEach(q,function(W,nt){W.id=Q+":"+nt.toString()})}R.default.encodeArray(q,this.channelOptions,function(W){if(W){N(W);return}var nt=R.default.getMessagesSize(q),F=K.maxMessageSize;if(nt>F){N(new O.default("Maximum size of messages that can be published at once exceeded ( was "+nt+" bytes; limit is "+F+" bytes)",40009,400));return}A._publish(R.default.serialize(q,P),Y,I,N)})},M.prototype._publish=function(A,T,y,B){D.default.post(this.rest,this.basePath+"/messages",A,T,y,null,B)},M.prototype.status=function(A){if(typeof A!="function"&&this.rest.options.promises)return c.promisify(this,"status",[]);var T=this.rest.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,y=c.defaultPostHeaders(this.rest.options,T);D.default.get(this.rest,this.basePath,y,{},T,A||G)},M})(g.default);r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(2)),b=h.__importDefault(o(20)),R=h.__importDefault(o(16));function O(){}var E=(function(D){h.__extends(S,D);function S(G){var w=D.call(this)||this;return w.channel=G,w.basePath=G.basePath+"/presence",w}return S.prototype.get=function(G,w){if(p.default.logAction(p.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),w===void 0)if(typeof G=="function")w=G,G=null;else{if(this.channel.rest.options.promises)return c.promisify(this,"get",arguments);w=O}var j=this.channel.rest,U=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,z=this.channel.rest.http.supportsLinkHeaders?void 0:U,L=c.defaultGetHeaders(j.options,U);j.options.headers&&c.mixin(L,j.options.headers);var M=this.channel.channelOptions;new b.default(j,this.basePath,L,z,function(A,T,y){return R.default.fromResponseBody(A,M,y?void 0:U)}).get(G,w)},S.prototype.history=function(G,w){return p.default.logAction(p.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(G,w)},S.prototype._history=function(G,w){if(w===void 0)if(typeof G=="function")w=G,G=null;else{if(this.channel.rest.options.promises)return c.promisify(this,"_history",[G]);w=O}var j=this.channel.rest,U=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,z=this.channel.rest.http.supportsLinkHeaders?void 0:U,L=c.defaultGetHeaders(j.options,U);j.options.headers&&c.mixin(L,j.options.headers);var M=this.channel.channelOptions;new b.default(j,this.basePath+"/history",L,z,function(A,T,y){return R.default.fromResponseBody(A,M,y?void 0:U)}).get(G,w)},S})(g.default);r.default=E}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0}),r.TransportParams=void 0;var c=o(0),g=c.__importDefault(o(10)),p=c.__importStar(o(1)),b=c.__importStar(o(52)),R=c.__importStar(o(8)),O=c.__importDefault(o(3)),E=c.__importDefault(o(7)),D=c.__importDefault(o(36)),S=c.__importDefault(o(2)),G=c.__importDefault(o(37)),w=c.__importStar(o(21)),j=c.__importStar(o(4)),U=c.__importDefault(o(18)),z=c.__importDefault(o(9)),L=c.__importDefault(o(24)),M=c.__importDefault(o(53)),A=c.__importDefault(o(26)),T=c.__importDefault(o(14)),y=function(){var it;return typeof O.default.WebStorage<"u"&&((it=O.default.WebStorage)===null||it===void 0?void 0:it.localSupported)},B=function(){var it;return typeof O.default.WebStorage<"u"&&((it=O.default.WebStorage)===null||it===void 0?void 0:it.sessionSupported)},N=g.default.Action,q=function(){},I="ably-transport-preference",Z="ably-connection-recovery";function K(){var it,at;return B()&&((at=(it=O.default.WebStorage)===null||it===void 0?void 0:it.getSession)===null||at===void 0?void 0:at.call(it,Z))}function P(it){var at,X;return B()&&((X=(at=O.default.WebStorage)===null||at===void 0?void 0:at.setSession)===null||X===void 0?void 0:X.call(at,Z,it))}function x(){var it,at;return B()&&((at=(it=O.default.WebStorage)===null||it===void 0?void 0:it.removeSession)===null||at===void 0?void 0:at.call(it,Z))}function Y(it,at){return p.arrIndexOf(O.default.Defaults.transportPreferenceOrder,it.shortName)>p.arrIndexOf(O.default.Defaults.transportPreferenceOrder,at.shortName)}function Q(it,at,X){var J;if(it.channel!==at.channel||(J=it.action)!==N.PRESENCE&&J!==N.MESSAGE||J!==at.action)return!1;var $=J===N.PRESENCE?"presence":"messages",tt=it[$].concat(at[$]),ut=z.default.getMessagesSize(tt);return ut>X||!p.allSame(tt,"clientId")||!p.arrEvery(tt,function(Tt){return!Tt.id})?!1:(it[$]=tt,!0)}function W(it){try{return JSON.parse(it)}catch{return null}}var nt=(function(){function it(at,X,J,$){this.options=at,this.host=X,this.mode=J,this.connectionKey=$,this.format=at.useBinaryProtocol?p.Format.msgpack:p.Format.json}return it.prototype.getConnectParams=function(at){var X=at?p.copy(at):{},J=this.options;switch(this.mode){case"upgrade":X.upgrade=this.connectionKey;break;case"resume":X.resume=this.connectionKey;break;case"recover":{var $=W(J.recover);$&&(X.recover=$.connectionKey);break}}return J.clientId!==void 0&&(X.clientId=J.clientId),J.echoMessages===!1&&(X.echo="false"),this.format!==void 0&&(X.format=this.format),this.stream!==void 0&&(X.stream=this.stream),this.heartbeats!==void 0&&(X.heartbeats=this.heartbeats),X.v=R.default.protocolVersion,X.agent=(0,R.getAgentString)(this.options),J.transportParams!==void 0&&p.mixin(X,J.transportParams),X},it.prototype.toString=function(){var at="[mode="+this.mode;return this.host&&(at+=",host="+this.host),this.connectionKey&&(at+=",connectionKey="+this.connectionKey),this.format&&(at+=",format="+this.format),at+="]",at},it})();r.TransportParams=nt;var F=(function(it){c.__extends(at,it);function at(X,J){var $=it.call(this)||this;$.disconnectedRetryCount=0,at.initTransports(),$.realtime=X,$.options=J;var tt=J.timeouts,ut=tt.preferenceConnectTimeout+tt.realtimeRequestTimeout;if($.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:ut,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:tt.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:tt.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:tt.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},$.state=$.states.initialized,$.errorReason=null,$.queuedMessages=new D.default,$.msgSerial=0,$.connectionDetails=void 0,$.connectionId=void 0,$.connectionKey=void 0,$.connectionStateTtl=tt.connectionStateTtl,$.maxIdleInterval=null,$.transports=p.intersect(J.transports||R.default.defaultTransports,at.supportedTransports),$.baseTransport=p.intersect(R.default.baseTransportOrder,$.transports)[0],$.upgradeTransports=p.intersect($.transports,R.default.upgradeTransports),$.transportPreference=null,$.httpHosts=R.default.getHosts(J),$.activeProtocol=null,$.proposedTransports=[],$.pendingTransports=[],$.host=null,$.lastAutoReconnectAttempt=null,$.lastActivity=null,$.forceFallbackHost=!1,$.connectCounter=0,S.default.logAction(S.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(J.transports||R.default.defaultTransports)+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+$.transports+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+$.httpHosts+"]"),!$.transports.length){var Tt="no requested transports available";throw S.default.logAction(S.default.LOG_ERROR,"realtime.ConnectionManager()",Tt),new Error(Tt)}var gt=O.default.Config.addEventListener;return gt&&(B()&&typeof J.recover=="function"&&gt("beforeunload",$.persistConnection.bind($)),J.closeOnUnload===!0&&gt("beforeunload",function(){S.default.logAction(S.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),$.requestState({state:"closing"})}),gt("online",function(){$.state==$.states.disconnected||$.state==$.states.suspended?(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),$.requestState({state:"connecting"})):$.state==$.states.connecting&&($.pendingTransports.forEach(function(Mt){Mt.off()}),$.disconnectAllTransports(),$.startConnect())}),gt("offline",function(){$.state==$.states.connected&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),$.disconnectAllTransports())})),$}return at.initTransports=function(){(0,M.default)(at),p.arrForEach(O.default.Transports,function(X){X(at)})},at.prototype.createTransportParams=function(X,J){return new nt(this.options,X,J,this.connectionKey)},at.prototype.getTransportParams=function(X){var J=this,$=function(tt){if(J.connectionKey){tt("resume");return}if(typeof J.options.recover=="string"){tt("recover");return}var ut=J.options.recover,Tt=K();if(Tt&&typeof ut=="function"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),ut(Tt,function(gt){gt?(J.options.recover=Tt.recoveryKey,tt("recover")):tt("clean")});return}tt("clean")};$(function(tt){var ut=J.createTransportParams(null,tt);if(tt==="recover"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+J.options.recover);var Tt=W(J.options.recover);Tt&&(J.msgSerial=Tt.msgSerial)}else S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+ut.toString());X(ut)})},at.prototype.tryATransport=function(X,J,$){var tt=this;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+J),A.default.tryConnect(at.supportedTransports[J],this,this.realtime.auth,X,function(ut,Tt){var gt=tt.state;if(gt==tt.states.closing||gt==tt.states.closed||gt==tt.states.failed){Tt&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+gt.state+" while we were attempting the transport; closing "+Tt),Tt.close()),$(!0);return}if(ut){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+J+" "+ut.event+", err: "+ut.error.toString()),U.default.isTokenErr(ut.error)&&!(tt.errorReason&&U.default.isTokenErr(tt.errorReason))?(tt.errorReason=ut.error,tt.realtime.auth._forceNewToken(null,null,function(Mt){if(Mt){tt.actOnErrorFromAuthorize(Mt);return}tt.tryATransport(X,J,$)})):ut.event==="failed"?(tt.notifyState({state:"failed",error:ut.error}),$(!0)):ut.event==="disconnected"&&((0,w.isRetriable)(ut.error)?$(!1):(tt.notifyState({state:tt.states.connecting.failState,error:ut.error}),$(!0)));return}S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+J+"; setting pending"),tt.setTransportPending(Tt,X),$(null,Tt)})},at.prototype.setTransportPending=function(X,J){var $=this,tt=J.mode;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+X+"; mode = "+tt),p.arrDeleteValue(this.proposedTransports,X),this.pendingTransports.push(X);var ut=O.default.Defaults.transportPreferenceOrder[O.default.Defaults.transportPreferenceOrder.length-1];X.once("connected",function(gt,Mt,Rt){tt=="upgrade"&&$.activeProtocol?X.shortName!==ut&&p.arrIn($.getUpgradePossibilities(),ut)&&$.activeProtocol?setTimeout(function(){$.scheduleTransportActivation(gt,X,Mt,Rt)},$.options.timeouts.parallelUpgradeDelay):$.scheduleTransportActivation(gt,X,Mt,Rt):($.activateTransport(gt,X,Mt,Rt),O.default.Config.nextTick(function(){$.connectImpl(J)})),tt==="recover"&&$.options.recover&&($.options.recover=null,$.unpersistConnection())});var Tt=this;X.on(["disconnected","closed","failed"],function(gt){Tt.deactivateTransport(X,this.event,gt)}),this.emit("transport.pending",X)},at.prototype.scheduleTransportActivation=function(X,J,$,tt){var ut=this,Tt=this.activeProtocol&&this.activeProtocol.getTransport(),gt=function(){J.disconnect(),p.arrDeleteValue(ut.pendingTransports,J)};if(this.state!==this.states.connected&&this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),gt();return}if(Tt&&!Y(J,Tt)){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+" is no better than current active transport "+Tt.shortName+" - abandoning upgrade"),gt();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+J);var Mt=null;if(!J.isConnected){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+"is no longer connected; abandoning upgrade"),gt();return}if(this.state===this.states.connected)S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,Mt=this.activeProtocol;else if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),gt();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+J);var Rt=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+J),J.send(g.default.fromValues({action:N.ACTIVATE})),ut.activateTransport(X,J,$,tt),ut.state===ut.states.synchronizing?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+J),ut.state=ut.states.connected):S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+ut.state.state+", so leaving unchanged"),ut.state.sendEvents&&ut.sendQueuedMessages()};Mt?Mt.onceIdle(Rt):Rt()},at.prototype.activateTransport=function(X,J,$,tt){var ut=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+J),X&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+X),$&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+$),tt&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(tt)),this.persistTransportPreference(J);var Tt=this.state,gt=this.states.connected.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+Tt.state),Tt.state==this.states.closing.state||Tt.state==this.states.closed.state||Tt.state==this.states.failed.state)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),J.disconnect(),!1;if(p.arrDeleteValue(this.pendingTransports,J),!J.isConnected)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+J+" since it appears to no longer be connected"),!1;var Mt=this.activeProtocol;this.activeProtocol=new b.default(J),this.host=J.params.host;var Rt=tt.connectionKey;if(Rt&&this.connectionKey!=Rt&&this.setConnection($,tt,!!X),this.onConnectionDetailsUpdate(tt,J),O.default.Config.nextTick(function(){J.on("connected",function(xt,Xt,Zt){ut.onConnectionDetailsUpdate(Zt,J),ut.emit("update",new G.default(gt,gt,null,xt))})}),Tt.state===this.states.connected.state?X&&(this.errorReason=this.realtime.connection.errorReason=X,this.emit("update",new G.default(gt,gt,null,X))):(this.notifyState({state:"connected",error:X}),this.errorReason=this.realtime.connection.errorReason=X||null),this.emit("transport.active",J),Mt)if(Mt.messageQueue.count()>0&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+Mt.transport.shortName+", new one is "+J.shortName+") finishing with "+Mt.messageQueue.count()+" messages still pending"),Mt.transport===J){var Ot="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",Ot)}else Mt.finish();return p.safeArrForEach(this.pendingTransports,function(xt){if(xt===J){var Xt="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",Xt),p.arrDeleteValue(ut.pendingTransports,J)}else xt.disconnect()}),p.safeArrForEach(this.proposedTransports,function(xt){xt===J?(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+J.shortName+"; stack = "+new Error().stack),p.arrDeleteValue(ut.proposedTransports,J)):xt.dispose()}),!0},at.prototype.deactivateTransport=function(X,J,$){var tt=this.activeProtocol,ut=tt&&tt.getTransport()===X,Tt=p.arrDeleteValue(this.pendingTransports,X),gt=p.arrDeleteValue(this.proposedTransports,X),Mt=this.noTransportsScheduledForActivation();if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+X),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+J+(ut?"; was active":Tt?"; was pending":gt?"; was proposed":"")+(Mt?"":"; another transport is scheduled for activation")),$&&$.message&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+$.message),ut&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(tt.getPendingMessages()),O.default.Config.nextTick(function(){tt.clearPendingMessages()}),this.activeProtocol=this.host=null),this.emit("transport.inactive",X),ut&&Mt||ut&&J==="failed"||J==="closed"||tt===null&&Tt&&this.pendingTransports.length===0){if(J==="disconnected"&&$&&$.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:J,error:$,retryImmediately:!0});return}var Rt=J==="failed"&&U.default.isTokenErr($)?"disconnected":J;this.notifyState({state:Rt,error:$});return}ut&&J==="disconnected"&&this.state!==this.states.synchronizing&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:$}))},at.prototype.noTransportsScheduledForActivation=function(){return p.isEmpty(this.pendingTransports)||this.pendingTransports.every(function(X){return!X.isConnected})},at.prototype.setConnection=function(X,J,$){var tt=this.connectionId,ut=tt&&tt!==X,Tt=!tt&&$;(ut||Tt)&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==X&&S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=X,this.realtime.connection.key=this.connectionKey=J.connectionKey},at.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},at.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},at.prototype.checkConnectionStateFreshness=function(){if(!(!this.lastActivity||!this.connectionId)){var X=p.now()-this.lastActivity;X>this.connectionStateTtl+this.maxIdleInterval&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+X+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},at.prototype.persistConnection=function(){if(B()){var X=this.createRecoveryKey();X&&P({recoveryKey:X,disconnectedAt:p.now(),location:h.location,clientId:this.realtime.auth.clientId})}},at.prototype.unpersistConnection=function(){x()},at.prototype.getError=function(){return this.errorReason||this.getStateError()},at.prototype.getStateError=function(){var X,J;return(J=(X=w.default)[this.state.state])===null||J===void 0?void 0:J.call(X)},at.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},at.prototype.enactStateChange=function(X){var J=X.current==="failed"?S.default.LOG_ERROR:S.default.LOG_MAJOR;S.default.logAction(J,"Connection state",X.current+(X.reason?"; reason: "+X.reason:"")),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+X.current+"; reason = "+(X.reason&&X.reason.message));var $=this.state=this.states[X.current];X.reason&&(this.errorReason=X.reason,this.realtime.connection.errorReason=X.reason),($.terminal||$.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",X)},at.prototype.startTransitionTimer=function(X){var J=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+X.state),this.transitionTimer&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(function(){J.transitionTimer&&(J.transitionTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager "+X.state+" timer expired","requesting new state: "+X.failState),J.notifyState({state:X.failState}))},X.retryDelay)},at.prototype.cancelTransitionTimer=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},at.prototype.startSuspendTimer=function(){var X=this;this.suspendTimer||(this.suspendTimer=setTimeout(function(){X.suspendTimer&&(X.suspendTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),X.states.connecting.failState="suspended",X.notifyState({state:"suspended"}))},this.connectionStateTtl))},at.prototype.checkSuspendTimer=function(X){X!=="disconnected"&&X!=="suspended"&&X!=="connecting"&&this.cancelSuspendTimer()},at.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},at.prototype.startRetryTimer=function(X){var J=this;this.retryTimer=setTimeout(function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),J.retryTimer=null,J.requestState({state:"connecting"})},X)},at.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},at.prototype.notifyState=function(X){var J=this,$,tt,ut=X.state,Tt=ut==="disconnected"&&(this.state===this.states.connected||this.state===this.states.synchronizing||X.retryImmediately||this.state===this.states.connecting&&X.error&&U.default.isTokenErr(X.error)&&!(this.errorReason&&U.default.isTokenErr(this.errorReason)));if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+ut+(Tt?"; will retry connection immediately":"")),ut!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(X.state),(ut==="suspended"||ut==="connected")&&(this.disconnectedRetryCount=0),!this.state.terminal)){var gt=this.states[X.state],Mt=gt.retryDelay;gt.state==="disconnected"&&(this.disconnectedRetryCount++,Mt=p.getRetryTime(gt.retryDelay,this.disconnectedRetryCount));var Rt=new G.default(this.state.state,gt.state,Mt,X.error||((tt=($=w.default)[gt.state])===null||tt===void 0?void 0:tt.call($)));if(Tt){var Ot=function(){J.state===J.states.disconnected&&(J.lastAutoReconnectAttempt=p.now(),J.requestState({state:"connecting"}))},xt=this.lastAutoReconnectAttempt&&p.now()-this.lastAutoReconnectAttempt+1;xt&&xt<1e3?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+xt+"ms ago, waiting another "+(1e3-xt)+"ms before trying again"),setTimeout(Ot,1e3-xt)):O.default.Config.nextTick(Ot)}else(ut==="disconnected"||ut==="suspended")&&this.startRetryTimer(Mt);(ut==="disconnected"&&!Tt||ut==="suspended"||gt.terminal)&&O.default.Config.nextTick(function(){J.disconnectAllTransports()}),ut=="connected"&&!this.activeProtocol&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(Rt),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(ut,Rt.reason),this.failQueuedMessages(Rt.reason))}},at.prototype.requestState=function(X){var J=this,$,tt,ut=X.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+ut+"; current state: "+this.state.state),ut!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(ut),!(ut=="connecting"&&this.state.state=="connected")&&!(ut=="closing"&&this.state.state=="closed"))){var Tt=this.states[ut],gt=new G.default(this.state.state,Tt.state,null,X.error||((tt=($=w.default)[Tt.state])===null||tt===void 0?void 0:tt.call($)));this.enactStateChange(gt),ut=="connecting"&&O.default.Config.nextTick(function(){J.startConnect()}),ut=="closing"&&this.closeImpl()}},at.prototype.startConnect=function(){var X=this;if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}var J=this.realtime.auth,$=++this.connectCounter,tt=function(){X.checkConnectionStateFreshness(),X.getTransportParams(function(Tt){if(Tt.mode==="recover"&&Tt.options.recover){var gt=W(Tt.options.recover);gt&&X.realtime.channels.recoverChannels(gt.channelSerials)}$===X.connectCounter&&X.connectImpl(Tt,$)})};if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),J.method==="basic")tt();else{var ut=function(Tt){$===X.connectCounter&&(Tt?X.actOnErrorFromAuthorize(Tt):tt())};this.errorReason&&U.default.isTokenErr(this.errorReason)?J._forceNewToken(null,null,ut):J._ensureValidAuthCredentials(!1,ut)}},at.prototype.connectImpl=function(X,J){var $=this.state.state;$!==this.states.connecting.state&&$!==this.states.connected.state?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+$):this.pendingTransports.length?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):$==this.states.connected.state?this.upgradeIfNeeded(X):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(X,J):this.connectBase(X,J)},at.prototype.connectPreference=function(X,J){var $=this,tt=this.getTransportPreference(),ut=!1;p.arrIn(this.transports,tt)||(this.unpersistTransportPreference(),this.connectImpl(X,J)),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+tt);var Tt=setTimeout(function(){ut=!0,$.state.state!==$.states.connected.state&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+tt+" failed; clearing preference and trying from scratch"),$.disconnectAllTransports(),$.unpersistTransportPreference()),$.connectImpl(X,J)},this.options.timeouts.preferenceConnectTimeout);X.host=this.httpHosts[0],this.tryATransport(X,tt,function(gt,Mt){clearTimeout(Tt),ut&&Mt?(Mt.off(),Mt.disconnect(),p.arrDeleteValue($.pendingTransports,Mt)):!Mt&&!gt&&($.unpersistTransportPreference(),$.connectImpl(X,J))})},at.prototype.connectBase=function(X,J){var $=this,tt=function(Rt){$.notifyState({state:$.states.connecting.failState,error:Rt})},ut=this.httpHosts.slice(),Tt=function(Rt,Ot){J===$.connectCounter&&!Ot&&!Rt&&Mt()};S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var gt=ut.shift();if(!gt){tt(new j.default("Unable to connect (no available host)",80003,404));return}X.host=gt;var Mt=function(){if(!ut.length){tt(new j.default("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!$.realtime.http.checkConnectivity){tt(new j.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500));return}$.realtime.http.checkConnectivity(function(Rt,Ot){if(J===$.connectCounter){if(Rt){tt(Rt);return}if(!Ot){tt(new j.default("Unable to connect (network unreachable)",80003,404));return}X.host=p.arrPopRandomElement(ut),$.tryATransport(X,$.baseTransport,Tt)}})};if(this.forceFallbackHost&&ut.length){this.forceFallbackHost=!1,Mt();return}this.tryATransport(X,this.baseTransport,Tt)},at.prototype.getUpgradePossibilities=function(){var X=this.activeProtocol.getTransport().shortName,J=p.arrIndexOf(this.upgradeTransports,X);return this.upgradeTransports.slice(J+1)},at.prototype.upgradeIfNeeded=function(X){var J=this,$=this.getUpgradePossibilities();S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+O.default.Config.inspect($)),$.length&&p.arrForEach($,function(tt){var ut=J.createTransportParams(X.host,"upgrade");J.tryATransport(ut,tt,q)})},at.prototype.closeImpl=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),p.safeArrForEach(this.pendingTransports,function(X){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+X),X&&X.close()}),p.safeArrForEach(this.proposedTransports,function(X){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+X),X&&X.dispose()}),this.activeProtocol&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},at.prototype.onAuthUpdated=function(X,J){var $=this,tt;switch(this.state.state){case"connected":{if(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var ut=this.activeProtocol.getTransport().params;O.default.Config.nextTick(function(){$.state.state==="connected"&&$.upgradeIfNeeded(ut)})}var Tt=(tt=this.activeProtocol)===null||tt===void 0?void 0:tt.getTransport();Tt&&Tt.onAuthUpdated&&Tt.onAuthUpdated(X);var gt=g.default.fromValues({action:N.AUTH,auth:{accessToken:X.token}});this.send(gt);var Mt=function(){$.off(Rt),J(null,X)},Rt=function(xt){xt.current==="failed"&&($.off(Mt),$.off(Rt),J(xt.reason||$.getStateError()))};this.once("connectiondetails",Mt),this.on("connectionstate",Rt);break}case"connecting":S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var Ot=function(xt){switch(xt.current){case"connected":$.off(Ot),J(null,X);break;case"failed":case"closed":case"suspended":$.off(Ot),J(xt.reason||$.getStateError());break}};this.on("connectionstate",Ot),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}},at.prototype.disconnectAllTransports=function(X){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(X?" except the active transport":"")),this.connectCounter++,p.safeArrForEach(this.pendingTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+J),J&&J.disconnect()}),this.pendingTransports=[],p.safeArrForEach(this.proposedTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+J),J&&J.dispose()}),this.proposedTransports=[],this.activeProtocol&&!X&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},at.prototype.send=function(X,J,$){$=$||q;var tt=this.state;if(tt.sendEvents){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new b.PendingMessage(X,$));return}var ut=J&&tt.queueEvents||tt.forceQueueEvents;if(!ut){var Tt="rejecting event, queueEvent was "+J+", state was "+tt.state;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()",Tt),$(this.errorReason||new j.default(Tt,9e4,400));return}S.default.shouldLog(S.default.LOG_MICRO)&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+g.default.stringify(X)),this.queue(X,$)},at.prototype.sendImpl=function(X){var J=X.message;X.ackRequired&&!X.sendAttempted&&(J.msgSerial=this.msgSerial++);try{this.activeProtocol.send(X)}catch($){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+$.stack)}},at.prototype.queue=function(X,J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var $=this.queuedMessages.last(),tt=this.options.maxMessageSize;$&&!$.sendAttempted&&Q($.message,X,tt)?($.merged||($.callback=L.default.create([$.callback]),$.merged=!0),$.callback.push(J)):this.queuedMessages.push(new b.PendingMessage(X,J))},at.prototype.sendQueuedMessages=function(){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");for(var X;X=this.queuedMessages.shift();)this.sendImpl(X)},at.prototype.queuePendingMessages=function(X){X&&X.length&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+X.length+" pending messages"),this.queuedMessages.prepend(X))},at.prototype.failQueuedMessages=function(X){var J=this.queuedMessages.count();J>0&&(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+J+" queued messages, err = "+p.inspectError(X)),this.queuedMessages.completeAllMessages(X))},at.prototype.onChannelMessage=function(X,J){var $=this.activeProtocol&&J===this.activeProtocol.getTransport(),tt=p.arrIn(this.pendingTransports,J)&&this.state==this.states.synchronizing;$||tt?this.realtime.channels.onChannelMessage(X):p.arrIndexOf([N.ACK,N.NACK,N.ERROR],X.action)>-1?this.realtime.channels.onChannelMessage(X):S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(X)+"on defunct transport; discarding")},at.prototype.ping=function(X,J){var $=this;if(X){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+X);var tt=function(){X.off("heartbeat",gt),J(new j.default("Timeout waiting for heartbeat response",5e4,500))},ut=p.now(),Tt=p.cheapRandStr(),gt=function(Xt){if(Xt===Tt){X.off("heartbeat",gt),clearTimeout(Mt);var Zt=p.now()-ut;J(null,Zt)}},Mt=setTimeout(tt,this.options.timeouts.realtimeRequestTimeout);X.on("heartbeat",gt),X.ping(Tt);return}if(this.state.state!=="connected"){J(new j.default("Unable to ping service; not connected",4e4,400));return}var Rt=!1,Ot=function(Xt,Zt){$.off("transport.active",xt),Rt||(Rt=!0,J(Xt,Zt))},xt=function(){Rt||(Rt=!0,O.default.Config.nextTick(function(){$.ping(null,J)}))};this.on("transport.active",xt),this.ping(this.activeProtocol.getTransport(),Ot)},at.prototype.abort=function(X){this.activeProtocol.getTransport().fail(X)},at.prototype.registerProposedTransport=function(X){this.proposedTransports.push(X)},at.prototype.getTransportPreference=function(){var X,J;return this.transportPreference||y()&&((J=(X=O.default.WebStorage)===null||X===void 0?void 0:X.get)===null||J===void 0?void 0:J.call(X,I))},at.prototype.persistTransportPreference=function(X){var J,$;p.arrIn(R.default.upgradeTransports,X.shortName)&&(this.transportPreference=X.shortName,y()&&(($=(J=O.default.WebStorage)===null||J===void 0?void 0:J.set)===null||$===void 0||$.call(J,I,X.shortName)))},at.prototype.unpersistTransportPreference=function(){var X,J;this.transportPreference=null,y()&&((J=(X=O.default.WebStorage)===null||X===void 0?void 0:X.remove)===null||J===void 0||J.call(X,I))},at.prototype.actOnErrorFromAuthorize=function(X){if(X.code===40171)this.notifyState({state:"failed",error:X});else if(X.code===40102)this.notifyState({state:"failed",error:X});else if(X.statusCode===T.default.Forbidden){var J="Client configured authentication provider returned 403; failing the connection";S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",J),this.notifyState({state:"failed",error:new j.default(J,80019,403,X)})}else{var J="Client configured authentication provider request failed";S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",J),this.notifyState({state:this.state.failState,error:new j.default(J,80019,401,X)})}},at.prototype.onConnectionDetailsUpdate=function(X,J){if(X){this.connectionDetails=X,X.maxMessageSize&&(this.options.maxMessageSize=X.maxMessageSize);var $=X.clientId;if($){var tt=this.realtime.auth._uncheckedSetClientId($);if(tt){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",tt.message),J.fail(tt);return}}var ut=X.connectionStateTtl;ut&&(this.connectionStateTtl=ut),this.maxIdleInterval=X.maxIdleInterval,this.emit("connectiondetails",X)}},at.supportedTransports={},at})(E.default);r.default=F}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(7)),g=h.__importDefault(o(2)),p=(function(b){h.__extends(R,b);function R(){var O=b.call(this)||this;return O.messages=[],O}return R.prototype.count=function(){return this.messages.length},R.prototype.push=function(O){this.messages.push(O)},R.prototype.shift=function(){return this.messages.shift()},R.prototype.last=function(){return this.messages[this.messages.length-1]},R.prototype.copyAll=function(){return this.messages.slice()},R.prototype.append=function(O){this.messages.push.apply(this.messages,O)},R.prototype.prepend=function(O){this.messages.unshift.apply(this.messages,O)},R.prototype.completeMessages=function(O,E,D){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+O+"; count = "+E),D=D||null;var S=this.messages;if(S.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var G=S[0];if(G){var w=G.message.msgSerial,j=O+E;if(j>w)for(var U=S.splice(0,j-w),z=0,L=U;z<L.length;z++){var M=L[z];M.callback(D)}S.length==0&&this.emit("idle")}},R.prototype.completeAllMessages=function(O){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,O)},R.prototype.resetSendAttempted=function(){for(var O=0,E=this.messages;O<E.length;O++){var D=E[O];D.sendAttempted=!1}},R.prototype.clear=function(){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},R})(c.default);r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(g,p,b,R){this.previous=g,this.current=p,b&&(this.retryIn=b),R&&(this.reason=R)}return c})();r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(10)),g=h.__importDefault(o(7)),p=h.__importStar(o(1)),b=h.__importDefault(o(33)),R=h.__importDefault(o(2)),O=h.__importDefault(o(54)),E=h.__importDefault(o(9)),D=h.__importDefault(o(39)),S=h.__importStar(o(4)),G=h.__importDefault(o(16)),w=h.__importDefault(o(21)),j=c.default.Action,U=function(){};function z(A){if(A&&"params"in A&&!p.isObject(A.params))return new S.default("options.params must be an object",4e4,400);if(A&&"modes"in A){if(!p.isArray(A.modes))return new S.default("options.modes must be an array",4e4,400);for(var T=0;T<A.modes.length;T++){var y=A.modes[T];if(!y||typeof y!="string"||!p.arrIn(c.default.channelModes,String.prototype.toUpperCase.call(y)))return new S.default("Invalid channel mode: "+y,4e4,400)}}}var L=(function(A){h.__extends(T,A);function T(y,B,N){var q=A.call(this,y,B,N)||this;return q.retryCount=0,q.history=function(I,Z){if(R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),Z===void 0)if(typeof I=="function")Z=I,I=null;else{if(this.rest.options.promises)return p.promisify(this,"history",arguments);Z=U}if(I&&I.untilAttach){if(this.state!=="attached"){Z(new S.default("option untilAttach requires the channel to be attached",4e4,400));return}if(!this.properties.attachSerial){Z(new S.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));return}delete I.untilAttach,I.from_serial=this.properties.attachSerial}b.default.prototype._history.call(this,I,Z)},q.whenState=(function(I,Z){return g.default.prototype.whenState.call(q,I,q.state,Z)}),R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel()","started; name = "+B),q.realtime=y,q.presence=new O.default(q),q.connectionManager=y.connection.connectionManager,q.state="initialized",q.subscriptions=new g.default,q.syncChannelSerial=void 0,q.properties={attachSerial:void 0,channelSerial:void 0},q.setOptions(N),q.errorReason=null,q._requestedFlags=null,q._mode=null,q._attachResume=!1,q._decodingContext={channelOptions:q.channelOptions,plugins:y.options.plugins||{},baseEncodedPreviousPayload:void 0},q._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},q._allChannelChanges=new g.default,q}return T.prototype.invalidStateError=function(){return new S.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},T.processListenerArgs=function(y){return y=Array.prototype.slice.call(y),typeof y[0]=="function"&&y.unshift(null),y[y.length-1]==null&&y.pop(),y},T.prototype.setOptions=function(y,B){var N=this.channelOptions;if(!B&&this.rest.options.promises)return p.promisify(this,"setOptions",arguments);var q=B||function(Z){Z&&R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+Z.toString())},I=z(y);if(I){q(I);return}b.default.prototype.setOptions.call(this,y),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(y,N)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],function(Z){switch(this.event){case"update":case"attached":q==null||q(null);return;default:q==null||q(Z.reason);return}})):q()},T.prototype._shouldReattachToSetOptions=function(y,B){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(y!=null&&y.params){var N=M(y.params),q=M(B.params);if(Object.keys(N).length!==Object.keys(q).length||!p.shallowEquals(q,N))return!0}return!!(y!=null&&y.modes&&(!B.modes||!p.arrEquals(y.modes,B.modes)))},T.prototype.publish=function(){for(var y=this,B=[],N=0;N<arguments.length;N++)B[N]=arguments[N];var q=B[0],I=B.length,Z=B[I-1];if(typeof Z!="function"){if(this.realtime.options.promises)return p.promisify(this,"publish",arguments);Z=U,++I}if(!this.connectionManager.activeState()){Z(this.connectionManager.getError());return}if(I==2)if(p.isObject(q))q=[E.default.fromValues(q)];else if(p.isArray(q))q=E.default.fromValuesArray(q);else throw new S.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else q=[E.default.fromValues({name:B[0],data:B[1]})];var K=this.realtime.options.maxMessageSize;E.default.encodeArray(q,this.channelOptions,function(P){if(P){Z(P);return}var x=E.default.getMessagesSize(q);if(x>K){Z(new S.default("Maximum size of messages that can be published at once exceeded ( was "+x+" bytes; limit is "+K+" bytes)",40009,400));return}y.__publish(q,Z)})},T.prototype.__publish=function(y,B){R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+y.length);var N=this.state;switch(N){case"failed":case"suspended":B(S.default.fromValues(this.invalidStateError()));break;default:{R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+N);var q=new c.default;q.action=j.MESSAGE,q.channel=this.name,q.messages=y,this.sendMessage(q,B);break}}},T.prototype.onEvent=function(y){R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var B=this.subscriptions,N=0;N<y.length;N++){var q=y[N];B.emit(q.name,q)}},T.prototype.attach=function(y,B){var N;if(typeof y=="function"?(B=y,N=null):N=y,!B){if(this.realtime.options.promises)return p.promisify(this,"attach",arguments);B=function(q){q&&R.default.logAction(R.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+q.toString())}}if(N)R.default.deprecated("The ability to pass an array of channel mode flags as the first argument of `RealtimeChannel.attach()`","To set channel mode flags, populate the `modes` property of the channel options object that you pass to `Channels.get()` or `RealtimeChannel.setOptions()`."),this._requestedFlags=N;else if(this.state==="attached"){B(null,null);return}this._attach(!1,null,B)},T.prototype._attach=function(y,B,N){N||(N=function(I){I&&R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+I.toString())});var q=this.connectionManager;if(!q.activeState()){N(q.getError());return}(this.state!=="attaching"||y)&&this.requestState("attaching",B),this.once(function(I){switch(this.event){case"attached":N==null||N(null,I);break;case"detached":case"suspended":case"failed":N==null||N(I.reason||q.getError()||new S.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":N==null||N(new S.default("Attach request superseded by a subsequent detach request",9e4,409));break}})},T.prototype.attachImpl=function(){R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var y=c.default.fromValues({action:j.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?y.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&y.encodeModesToFlags(p.allToUpperCase(this.channelOptions.modes)),this._attachResume&&y.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(y.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(y,U)},T.prototype.detach=function(y){if(!y){if(this.realtime.options.promises)return p.promisify(this,"detach",arguments);y=U}var B=this.connectionManager;if(!B.activeState()){y(B.getError());return}switch(this.state){case"suspended":this.notifyState("detached"),y();break;case"detached":y();break;case"failed":y(new S.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once(function(N){switch(this.event){case"detached":y();break;case"attached":case"suspended":case"failed":y(N.reason||B.getError()||new S.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":y(new S.default("Detach request superseded by a subsequent attach request",9e4,409));break}})}},T.prototype.detachImpl=function(y){R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var B=c.default.fromValues({action:j.DETACH,channel:this.name});this.sendMessage(B,y||U)},T.prototype.subscribe=function(){for(var y=[],B=0;B<arguments.length;B++)y[B]=arguments[B];var N=T.processListenerArgs(y),q=N[0],I=N[1],Z=N[2];if(!Z&&this.realtime.options.promises)return p.promisify(this,"subscribe",[q,I]);if(this.state==="failed"){Z==null||Z(S.default.fromValues(this.invalidStateError()));return}return q&&typeof q=="object"&&!Array.isArray(q)?this._subscribeFilter(q,I):this.subscriptions.on(q,I),this.attach(Z||U)},T.prototype._subscribeFilter=function(y,B){var N=function(q){var I,Z,K,P,x,Y,Q={name:q.name,refTimeserial:(Z=(I=q.extras)===null||I===void 0?void 0:I.ref)===null||Z===void 0?void 0:Z.timeserial,refType:(P=(K=q.extras)===null||K===void 0?void 0:K.ref)===null||P===void 0?void 0:P.type,isRef:!!(!((Y=(x=q.extras)===null||x===void 0?void 0:x.ref)===null||Y===void 0)&&Y.timeserial),clientId:q.clientId};Object.entries(y).find(function(W){var nt=W[0],F=W[1];return F!==void 0?Q[nt]!==F:!1})||B(q)};this._addFilteredSubscription(y,B,N),this.subscriptions.on(N)},T.prototype._addFilteredSubscription=function(y,B,N){var q;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(B)){var I=this.filteredSubscriptions.get(B);I.set(y,((q=I==null?void 0:I.get(y))===null||q===void 0?void 0:q.concat(N))||[N])}else this.filteredSubscriptions.set(B,new Map([[y,[N]]]))},T.prototype._getAndDeleteFilteredSubscriptions=function(y,B){var N=this;if(!this.filteredSubscriptions)return[];if(!B&&y)return Array.from(this.filteredSubscriptions.entries()).map(function(K){var P,x=K[0],Y=K[1],Q=Y.get(y);return Y.delete(y),Y.size===0&&((P=N.filteredSubscriptions)===null||P===void 0||P.delete(x)),Q}).reduce(function(K,P){var x;return P?(x=K).concat.apply(x,P):K},[]);if(!B||!this.filteredSubscriptions.has(B))return[];var q=this.filteredSubscriptions.get(B);if(!y){var I=Array.from(q.values()).reduce(function(K,P){return K.concat.apply(K,P)},[]);return this.filteredSubscriptions.delete(B),I}var Z=q.get(y);return q.delete(y),Z||[]},T.prototype.unsubscribe=function(){for(var y=this,B,N=[],q=0;q<arguments.length;q++)N[q]=arguments[q];var I=T.processListenerArgs(N),Z=I[0],K=I[1];if(typeof Z=="object"&&!K||!((B=this.filteredSubscriptions)===null||B===void 0)&&B.has(K)){this._getAndDeleteFilteredSubscriptions(Z,K).forEach(function(P){return y.subscriptions.off(P)});return}this.subscriptions.off(Z,K)},T.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new S.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var y=this.connectionManager;if(!y.activeState())throw y.getError();var B=c.default.fromValues({action:j.SYNC,channel:this.name});this.syncChannelSerial&&(B.channelSerial=this.syncChannelSerial),y.send(B)},T.prototype.sendMessage=function(y,B){this.connectionManager.send(y,this.realtime.options.queueMessages,B)},T.prototype.sendPresence=function(y,B){var N=c.default.fromValues({action:j.PRESENCE,channel:this.name,presence:p.isArray(y)?G.default.fromValuesArray(y):[G.default.fromValues(y)]});this.sendMessage(N,B)},T.prototype.onMessage=function(y){(y.action===j.ATTACHED||y.action===j.MESSAGE||y.action===j.PRESENCE)&&this.setChannelSerial(y.channelSerial);var B,N=!1;switch(y.action){case j.ATTACHED:{this.properties.attachSerial=y.channelSerial,this._mode=y.getMode(),this.params=y.params||{};var q=y.decodeModesFromFlags();this.modes=q&&p.allToLowerCase(q)||void 0;var I=y.hasFlag("RESUMED"),Z=y.hasFlag("HAS_PRESENCE"),K=y.hasFlag("HAS_BACKLOG");if(this.state==="attached"){I||this.presence.onAttached(Z);var P=new D.default(this.state,this.state,I,K,y.error);this._allChannelChanges.emit("update",P),(!I||this.channelOptions.updateOnAttached)&&this.emit("update",P)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",y.error,I,Z,K);break}case j.DETACHED:{var x=y.error?S.default.fromValues(y.error):new S.default("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",x):this.state==="attaching"?this.notifyState("suspended",x):this.requestState("attaching",x);break}case j.SYNC:if(N=!0,B=this.syncChannelSerial=y.channelSerial,!y.presence)break;case j.PRESENCE:{for(var Y=y.presence,Q=y.id,W=y.connectionId,nt=y.timestamp,F=this.channelOptions,it=void 0,at=0;at<Y.length;at++)try{it=Y[at],G.default.decode(it,F),it.connectionId||(it.connectionId=W),it.timestamp||(it.timestamp=nt),it.id||(it.id=Q+":"+at)}catch(Tt){R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel.onMessage()",Tt.toString())}this.presence.setPresence(Y,N,B);break}case j.MESSAGE:{if(this.state!=="attached"){R.default.logAction(R.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+y.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}var X=y.messages,J=X[0],$=X[X.length-1],Q=y.id,W=y.connectionId,nt=y.timestamp;if(J.extras&&J.extras.delta&&J.extras.delta.from!==this._lastPayload.messageId){var tt='Delta message decode failure - previous message not available for message "'+y.id+'" on this channel "'+this.name+'".';R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel.onMessage()",tt),this._startDecodeFailureRecovery(new S.default(tt,40018,400));break}for(var at=0;at<X.length;at++){var tt=X[at];try{E.default.decode(tt,this._decodingContext)}catch(xt){switch(R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel.onMessage()",xt.toString()),xt.code){case 40018:this._startDecodeFailureRecovery(xt);return;case 40019:case 40021:this.notifyState("failed",xt);return}}tt.connectionId||(tt.connectionId=W),tt.timestamp||(tt.timestamp=nt),tt.id||(tt.id=Q+":"+at)}this._lastPayload.messageId=$.id,this._lastPayload.protocolMessageChannelSerial=y.channelSerial,this.onEvent(X);break}case j.ERROR:{var ut=y.error;ut&&ut.code==80016?this.checkPendingState():this.notifyState("failed",S.default.fromValues(ut));break}default:R.default.logAction(R.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+y.action+")"),this.connectionManager.abort(w.default.unknownChannelErr())}},T.prototype._startDecodeFailureRecovery=function(y){var B=this;this._lastPayload.decodeFailureRecoveryInProgress||(R.default.logAction(R.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,y,function(){B._lastPayload.decodeFailureRecoveryInProgress=!1}))},T.prototype.onAttached=function(){R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},T.prototype.notifyState=function(y,B,N,q,I){if(R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+y),this.clearStateTimer(),p.arrIn(["detached","suspended","failed"],y)&&(this.properties.channelSerial=null),y!==this.state){this.presence.actOnChannelState(y,q,B),y==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),B&&(this.errorReason=B);var Z=new D.default(this.state,y,N,I,B),K=y==="failed"?R.default.LOG_ERROR:R.default.LOG_MAJOR;R.default.logAction(K,'Channel state for channel "'+this.name+'"',y+(B?"; reason: "+B:"")),y!=="attaching"&&y!=="suspended"&&(this.retryCount=0),y==="attached"&&this.onAttached(),y==="attached"?this._attachResume=!0:(y==="detaching"||y==="failed")&&(this._attachResume=!1),this.state=y,this._allChannelChanges.emit(y,Z),this.emit(y,Z)}},T.prototype.requestState=function(y,B){R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+y),this.notifyState(y,B),this.checkPendingState()},T.prototype.checkPendingState=function(){var y=this.connectionManager.state;if(!(y.sendEvents||y.forceQueueEvents)){R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}},T.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":{var y=new S.default("Channel attach timed out",90007,408);this.notifyState("suspended",y);break}case"detaching":{var y=new S.default("Channel detach timed out",90007,408);this.notifyState("attached",y);break}default:this.checkPendingState();break}},T.prototype.startStateTimerIfNotRunning=function(){var y=this;this.stateTimer||(this.stateTimer=setTimeout(function(){R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),y.stateTimer=null,y.timeoutPendingState()},this.realtime.options.timeouts.realtimeRequestTimeout))},T.prototype.clearStateTimer=function(){var y=this.stateTimer;y&&(clearTimeout(y),this.stateTimer=null)},T.prototype.startRetryTimer=function(){var y=this;if(!this.retryTimer){this.retryCount++;var B=p.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(function(){y.state==="suspended"&&y.connectionManager.state.sendEvents&&(y.retryTimer=null,R.default.logAction(R.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),y.requestState("attaching"))},B)}},T.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},T.prototype.getReleaseErr=function(){var y=this.state;return y==="initialized"||y==="detached"||y==="failed"?null:new S.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+y,90001,400)},T.prototype.setChannelSerial=function(y){R.default.logAction(R.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+y+"; previous = "+this.properties.channelSerial),y&&(this.properties.channelSerial=y)},T})(b.default);function M(A){var T=A||{};T.agent;var y=h.__rest(T,["agent"]);return y}r.default=L}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(g,p,b,R,O){this.previous=g,this.current=p,p==="attached"&&(this.resumed=b,this.hasBacklog=R),O&&(this.reason=O)}return c})();r.default=h}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=g.Hasher,R=c.algo,O=[],E=R.SHA1=b.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,S){for(var G=this._hash.words,w=G[0],j=G[1],U=G[2],z=G[3],L=G[4],M=0;M<80;M++){if(M<16)O[M]=D[S+M]|0;else{var A=O[M-3]^O[M-8]^O[M-14]^O[M-16];O[M]=A<<1|A>>>31}var T=(w<<5|w>>>27)+L+O[M];M<20?T+=(j&U|~j&z)+1518500249:M<40?T+=(j^U^z)+1859775393:M<60?T+=(j&U|j&z|U&z)-1894007588:T+=(j^U^z)-899497514,L=z,z=U,U=j<<30|j>>>2,j=w,w=T}G[0]=G[0]+w|0,G[1]=G[1]+j|0,G[2]=G[2]+U|0,G[3]=G[3]+z|0,G[4]=G[4]+L|0},_doFinalize:function(){var D=this._data,S=D.words,G=this._nDataBytes*8,w=D.sigBytes*8;return S[w>>>5]|=128<<24-w%32,S[(w+64>>>9<<4)+14]=Math.floor(G/4294967296),S[(w+64>>>9<<4)+15]=G,D.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var D=b.clone.call(this);return D._hash=this._hash.clone(),D}});c.SHA1=b._createHelper(E),c.HmacSHA1=b._createHmacHelper(E)})(),h.SHA1})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});function h(M){if(M===void 0)return"undefined";var A,T;if(M instanceof ArrayBuffer?(T="ArrayBuffer",A=new DataView(M)):M instanceof DataView&&(T="DataView",A=M),!A)return JSON.stringify(M);for(var y=[],B=0;B<M.byteLength;B++){if(B>20){y.push("...");break}var N=A.getUint8(B).toString(16);N.length===1&&(N="0"+N),y.push(N)}return"<"+T+" "+y.join(" ")+">"}function c(M,A,T){for(var y=0,B=T.length;y<B;y++){var N=T.charCodeAt(y);if(N<128){M.setUint8(A++,N>>>0&127|0);continue}if(N<2048){M.setUint8(A++,N>>>6&31|192),M.setUint8(A++,N>>>0&63|128);continue}if(N<65536){M.setUint8(A++,N>>>12&15|224),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}if(N<1114112){M.setUint8(A++,N>>>18&7|240),M.setUint8(A++,N>>>12&63|128),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}throw new Error("bad codepoint "+N)}}function g(M,A,T){for(var y="",B=A,N=A+T;B<N;B++){var q=M.getUint8(B);if((q&128)===0){y+=String.fromCharCode(q);continue}if((q&224)===192){y+=String.fromCharCode((q&15)<<6|M.getUint8(++B)&63);continue}if((q&240)===224){y+=String.fromCharCode((q&15)<<12|(M.getUint8(++B)&63)<<6|(M.getUint8(++B)&63)<<0);continue}if((q&248)===240){y+=String.fromCharCode((q&7)<<18|(M.getUint8(++B)&63)<<12|(M.getUint8(++B)&63)<<6|(M.getUint8(++B)&63)<<0);continue}throw new Error("Invalid byte "+q.toString(16))}return y}function p(M){for(var A=0,T=0,y=M.length;T<y;T++){var B=M.charCodeAt(T);if(B<128){A+=1;continue}if(B<2048){A+=2;continue}if(B<65536){A+=3;continue}if(B<1114112){A+=4;continue}throw new Error("bad codepoint "+B)}return A}function b(M,A){var T=L(M,A);if(T!==0){var y=new ArrayBuffer(T),B=new DataView(y);return z(M,B,0,A),y}}var R=65536*65536,O=1/R;function E(M,A){return A=A||0,M.getInt32(A)*R+M.getUint32(A+4)}function D(M,A){return A=A||0,M.getUint32(A)*R+M.getUint32(A+4)}function S(M,A,T){T<9223372036854776e3?(M.setInt32(A,Math.floor(T*O)),M.setInt32(A+4,T&-1)):(M.setUint32(A,2147483647),M.setUint32(A+4,2147483647))}function G(M,A,T){T<18446744073709552e3?(M.setUint32(A,Math.floor(T*O)),M.setInt32(A+4,T&-1)):(M.setUint32(A,4294967295),M.setUint32(A+4,4294967295))}var w=(function(){function M(A,T){var y=this;this.map=function(B){for(var N={},q=0;q<B;q++){var I=y.parse();N[I]=y.parse()}return N},this.bin=function(B){var N=new ArrayBuffer(B);return new Uint8Array(N).set(new Uint8Array(y.view.buffer,y.offset,B),0),y.offset+=B,N},this.buf=this.bin,this.str=function(B){var N=g(y.view,y.offset,B);return y.offset+=B,N},this.array=function(B){for(var N=new Array(B),q=0;q<B;q++)N[q]=y.parse();return N},this.ext=function(B){return y.offset+=B,{type:y.view.getInt8(y.offset),data:y.buf(B)}},this.parse=function(){var B=y.view.getUint8(y.offset),N,q;if((B&128)===0)return y.offset++,B;if((B&240)===128)return q=B&15,y.offset++,y.map(q);if((B&240)===144)return q=B&15,y.offset++,y.array(q);if((B&224)===160)return q=B&31,y.offset++,y.str(q);if((B&224)===224)return N=y.view.getInt8(y.offset),y.offset++,N;switch(B){case 192:return y.offset++,null;case 193:y.offset++;return;case 194:return y.offset++,!1;case 195:return y.offset++,!0;case 196:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.bin(q);case 197:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.bin(q);case 198:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.bin(q);case 199:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.ext(q);case 200:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.ext(q);case 201:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.ext(q);case 202:return N=y.view.getFloat32(y.offset+1),y.offset+=5,N;case 203:return N=y.view.getFloat64(y.offset+1),y.offset+=9,N;case 204:return N=y.view.getUint8(y.offset+1),y.offset+=2,N;case 205:return N=y.view.getUint16(y.offset+1),y.offset+=3,N;case 206:return N=y.view.getUint32(y.offset+1),y.offset+=5,N;case 207:return N=D(y.view,y.offset+1),y.offset+=9,N;case 208:return N=y.view.getInt8(y.offset+1),y.offset+=2,N;case 209:return N=y.view.getInt16(y.offset+1),y.offset+=3,N;case 210:return N=y.view.getInt32(y.offset+1),y.offset+=5,N;case 211:return N=E(y.view,y.offset+1),y.offset+=9,N;case 212:return q=1,y.offset++,y.ext(q);case 213:return q=2,y.offset++,y.ext(q);case 214:return q=4,y.offset++,y.ext(q);case 215:return q=8,y.offset++,y.ext(q);case 216:return q=16,y.offset++,y.ext(q);case 217:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.str(q);case 218:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.str(q);case 219:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.str(q);case 220:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.array(q);case 221:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.array(q);case 222:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.map(q);case 223:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.map(q)}throw new Error("Unknown type 0x"+B.toString(16))},this.offset=T||0,this.view=A}return M})();function j(M){var A=new DataView(M),T=new w(A),y=T.parse();if(T.offset!==M.byteLength)throw new Error(M.byteLength-T.offset+" trailing bytes");return y}function U(M,A){return Object.keys(M).filter(function(T){var y=M[T],B=typeof y;return(!A||y!=null)&&(B!=="function"||!!y.toJSON)})}function z(M,A,T,y){var B=typeof M;if(typeof M=="string"){var N=p(M);if(N<32)return A.setUint8(T,N|160),c(A,T+1,M),1+N;if(N<256)return A.setUint8(T,217),A.setUint8(T+1,N),c(A,T+2,M),2+N;if(N<65536)return A.setUint8(T,218),A.setUint16(T+1,N),c(A,T+3,M),3+N;if(N<4294967296)return A.setUint8(T,219),A.setUint32(T+1,N),c(A,T+5,M),5+N}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var q=M.byteLength;if(q<256)return A.setUint8(T,196),A.setUint8(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+2),2+q;if(q<65536)return A.setUint8(T,197),A.setUint16(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+3),3+q;if(q<4294967296)return A.setUint8(T,198),A.setUint32(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+5),5+q}if(typeof M=="number"){if(Math.floor(M)!==M)return A.setUint8(T,203),A.setFloat64(T+1,M),9;if(M>=0){if(M<128)return A.setUint8(T,M),1;if(M<256)return A.setUint8(T,204),A.setUint8(T+1,M),2;if(M<65536)return A.setUint8(T,205),A.setUint16(T+1,M),3;if(M<4294967296)return A.setUint8(T,206),A.setUint32(T+1,M),5;if(M<18446744073709552e3)return A.setUint8(T,207),G(A,T+1,M),9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return A.setInt8(T,M),1;if(M>=-128)return A.setUint8(T,208),A.setInt8(T+1,M),2;if(M>=-32768)return A.setUint8(T,209),A.setInt16(T+1,M),3;if(M>=-2147483648)return A.setUint8(T,210),A.setInt32(T+1,M),5;if(M>=-9223372036854776e3)return A.setUint8(T,211),S(A,T+1,M),9;throw new Error("Number too small -0x"+(-M).toString(16).substr(1))}if(B==="undefined")return y?0:(A.setUint8(T,212),A.setUint8(T+1,0),A.setUint8(T+2,0),3);if(M===null)return y?0:(A.setUint8(T,192),1);if(B==="boolean")return A.setUint8(T,M?195:194),1;if(typeof M.toJSON=="function")return z(M.toJSON(),A,T,y);if(B==="object"){var I,Z=0,K=void 0,P=Array.isArray(M);if(P?I=M.length:(K=U(M,y),I=K.length),I<16?(A.setUint8(T,I|(P?144:128)),Z=1):I<65536?(A.setUint8(T,P?220:222),A.setUint16(T+1,I),Z=3):I<4294967296&&(A.setUint8(T,P?221:223),A.setUint32(T+1,I),Z=5),P)for(var x=0;x<I;x++)Z+=z(M[x],A,T+Z,y);else if(K)for(var x=0;x<I;x++){var Y=K[x];Z+=z(Y,A,T+Z),Z+=z(M[Y],A,T+Z,y)}return Z}if(B==="function")return 0;throw new Error("Unknown type "+B)}function L(M,A){var T=typeof M;if(T==="string"){var y=p(M);if(y<32)return 1+y;if(y<256)return 2+y;if(y<65536)return 3+y;if(y<4294967296)return 5+y}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var B=M.byteLength;if(B<256)return 2+B;if(B<65536)return 3+B;if(B<4294967296)return 5+B}if(typeof M=="number"){if(Math.floor(M)!==M)return 9;if(M>=0){if(M<128)return 1;if(M<256)return 2;if(M<65536)return 3;if(M<4294967296)return 5;if(M<18446744073709552e3)return 9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return 1;if(M>=-128)return 2;if(M>=-32768)return 3;if(M>=-2147483648)return 5;if(M>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+M.toString(16).substr(1))}if(T==="boolean")return 1;if(M===null)return A?0:1;if(M===void 0)return A?0:3;if(typeof M.toJSON=="function")return L(M.toJSON(),A);if(T==="object"){var N,q=0;if(Array.isArray(M)){N=M.length;for(var I=0;I<N;I++)q+=L(M[I],A)}else{var Z=U(M,A);N=Z.length;for(var I=0;I<N;I++){var K=Z[I];q+=L(K)+L(M[K],A)}}if(N<16)return 1+q;if(N<65536)return 3+q;if(N<4294967296)return 5+q;throw new Error("Array or object too long 0x"+N.toString(16))}if(T==="function")return 0;throw new Error("Unknown type "+T)}r.default={encode:b,decode:j,inspect:h,utf8Write:c,utf8Read:g,utf8ByteCount:p}}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(30)),g=h.__importDefault(o(50)),p=h.__importDefault(o(3)),b=h.__importDefault(o(4)),R=h.__importDefault(o(55)),O=h.__importDefault(o(57)),E=h.__importDefault(o(62)),D=h.__importDefault(o(64)),S=h.__importDefault(o(68)),G=h.__importDefault(o(2)),w=o(8),j=h.__importDefault(o(65)),U=h.__importDefault(o(66)),z=h.__importDefault(o(41)),L=(0,O.default)(D.default,R.default);p.default.Crypto=L,p.default.BufferUtils=R.default,p.default.Http=E.default,p.default.Config=D.default,p.default.Transports=S.default,p.default.WebStorage=j.default,c.default.Crypto=L,g.default.Crypto=L,G.default.initLogHandlers(),p.default.Defaults=(0,w.getDefaults)(U.default),p.default.Config.agent&&(p.default.Defaults.agent+=" "+p.default.Config.agent),p.default.Config.noUpgrade&&(p.default.Defaults.upgradeTransports=[]),r.default={ErrorInfo:b.default,Rest:c.default,Realtime:g.default,msgpack:z.default}}),(function(s){s.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.50","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**","src/**","react/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^8.14.2"},"peerDependencies":{"react":">=16.8.0","react-dom":">=16.8.0"},"peerDependenciesMeta":{"react":{"optional":true},"react-dom":{"optional":true}},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@arethetypeswrong/cli":"^0.13.1","@babel/preset-env":"^7.23.6","@testing-library/react":"^13.3.0","@types/crypto-js":"^4.0.1","@types/jmespath":"^0.15.2","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","@vitejs/plugin-react":"^1.3.2","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","babel-loader":"^8.3.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-import":"^2.28.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-react":"^7.32.2","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","jmespath":"^0.16.0","jsdom":"^20.0.0","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","mocha-junit-reporter":"^2.2.1","null-loader":"^4.0.1","playwright":"^1.39.0","prettier":"^2.5.1","react":">=18.1.0","react-dom":">=18.1.0","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","vite":"^4.4.9","vitest":"^0.18.0","webpack":"^4.44.2","webpack-cli":"^4.2.0","webpack-node-externals":"^3.0.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"start:react":"npx vite serve","grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","test:react":"vitest run","concat":"grunt concat","build":"grunt build:all && npm run build:react","build:node":"grunt build:node","build:browser":"grunt build:browser","build:react":"npm run build:react:mjs && npm run build:react:cjs && cp src/platform/react-hooks/res/package.react.json react/package.json","build:react:mjs":"tsc --project src/platform/react-hooks/tsconfig.mjs.json && cp src/platform/react-hooks/res/package.mjs.json react/mjs/package.json","build:react:cjs":"tsc --project src/platform/react-hooks/tsconfig.cjs.json && cp src/platform/react-hooks/res/package.cjs.json react/cjs/package.json","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')}),(function(s,r){}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(32),o(25))})(this,function(h){return h.HmacSHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(47)),p=h.__importDefault(o(15)),b=h.__importDefault(o(20)),R=h.__importDefault(o(4)),O=h.__importDefault(o(48)),E=function(){},D=(function(){function j(U){this.rest=U,this.admin=new S(U)}return j})(),S=(function(){function j(U){this.rest=U,this.deviceRegistrations=new G(U),this.channelSubscriptions=new w(U)}return j.prototype.publish=function(U,z,L){var M=this.rest,A=M.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(M.options,A),y={},B=c.mixin({recipient:U},z);if(typeof L!="function"){if(this.rest.options.promises)return c.promisify(this,"publish",arguments);L=E}M.options.headers&&c.mixin(T,M.options.headers),M.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var N=c.encodeBody(B,A);p.default.post(M,"/push/publish",N,T,y,null,function(q){return L(q)})},j})(),G=(function(){function j(U){this.rest=U}return j.prototype.save=function(U,z){var L=this.rest,M=g.default.fromValues(U),A=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(L.options,A),y={};if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"save",arguments);z=E}L.options.headers&&c.mixin(T,L.options.headers),L.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var B=c.encodeBody(M,A);p.default.put(L,"/push/deviceRegistrations/"+encodeURIComponent(U.id),B,T,y,null,function(N,q,I,Z){z(N,N?void 0:g.default.fromResponseBody(q,Z?void 0:A))})},j.prototype.get=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(L.options,M),T=U.id||U;if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"get",arguments);z=E}if(typeof T!="string"||!T.length){z(new R.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400));return}L.options.headers&&c.mixin(A,L.options.headers),p.default.get(L,"/push/deviceRegistrations/"+encodeURIComponent(T),A,{},null,function(y,B,N,q){z(y,y?void 0:g.default.fromResponseBody(B,q?void 0:M))})},j.prototype.list=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(L.options,M);if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"list",arguments);z=E}L.options.headers&&c.mixin(T,L.options.headers),new b.default(L,"/push/deviceRegistrations",T,A,function(y,B,N){return g.default.fromResponseBody(y,N?void 0:M)}).get(U,z)},j.prototype.remove=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(L.options,M),T={},y=U.id||U;if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"remove",arguments);z=E}if(typeof y!="string"||!y.length){z(new R.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400));return}L.options.headers&&c.mixin(A,L.options.headers),L.options.pushFullWait&&c.mixin(T,{fullWait:"true"}),p.default.delete(L,"/push/deviceRegistrations/"+encodeURIComponent(y),A,T,null,function(B){return z(B)})},j.prototype.removeWhere=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(L.options,M);if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"removeWhere",arguments);z=E}L.options.headers&&c.mixin(A,L.options.headers),L.options.pushFullWait&&c.mixin(U,{fullWait:"true"}),p.default.delete(L,"/push/deviceRegistrations",A,U,null,function(T){return z(T)})},j})(),w=(function(){function j(U){this.remove=j.prototype.removeWhere,this.rest=U}return j.prototype.save=function(U,z){var L=this.rest,M=O.default.fromValues(U),A=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(L.options,A),y={};if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"save",arguments);z=E}L.options.headers&&c.mixin(T,L.options.headers),L.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var B=c.encodeBody(M,A);p.default.post(L,"/push/channelSubscriptions",B,T,y,null,function(N,q,I,Z){z(N,!N&&O.default.fromResponseBody(q,Z?void 0:A))})},j.prototype.list=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(L.options,M);if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"list",arguments);z=E}L.options.headers&&c.mixin(T,L.options.headers),new b.default(L,"/push/channelSubscriptions",T,A,function(y,B,N){return O.default.fromResponseBody(y,N?void 0:M)}).get(U,z)},j.prototype.removeWhere=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(L.options,M);if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"removeWhere",arguments);z=E}L.options.headers&&c.mixin(A,L.options.headers),L.options.pushFullWait&&c.mixin(U,{fullWait:"true"}),p.default.delete(L,"/push/channelSubscriptions",A,U,null,function(T){return z(T)})},j.prototype.listChannels=function(U,z){var L=this.rest,M=L.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(L.options,M);if(typeof z!="function"){if(this.rest.options.promises)return c.promisify(this,"listChannels",arguments);z=E}L.options.headers&&c.mixin(T,L.options.headers),L.options.pushFullWait&&c.mixin(U,{fullWait:"true"}),new b.default(L,"/push/channels",T,A,function(y,B,N){for(var q=!N&&M?c.decodeBody(y,M):y,I=0;I<q.length;I++)q[I]=String(q[I]);return q}).get(U,z)},j})();r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(4)),p;(function(O){O.Phone="phone",O.Tablet="tablet",O.Desktop="desktop",O.TV="tv",O.Watch="watch",O.Car="car",O.Embedded="embedded",O.Other="other"})(p||(p={}));var b;(function(O){O.Android="android",O.IOS="ios",O.Browser="browser"})(b||(b={}));var R=(function(){function O(){}return O.prototype.toJSON=function(){var E,D,S;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(E=this.push)===null||E===void 0?void 0:E.recipient,state:(D=this.push)===null||D===void 0?void 0:D.state,error:(S=this.push)===null||S===void 0?void 0:S.error}}},O.prototype.toString=function(){var E,D,S,G,w="[DeviceDetails";return this.id&&(w+="; id="+this.id),this.platform&&(w+="; platform="+this.platform),this.formFactor&&(w+="; formFactor="+this.formFactor),this.clientId&&(w+="; clientId="+this.clientId),this.metadata&&(w+="; metadata="+this.metadata),this.deviceIdentityToken&&(w+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),!((E=this.push)===null||E===void 0)&&E.recipient&&(w+="; push.recipient="+JSON.stringify(this.push.recipient)),!((D=this.push)===null||D===void 0)&&D.state&&(w+="; push.state="+this.push.state),!((S=this.push)===null||S===void 0)&&S.error&&(w+="; push.error="+JSON.stringify(this.push.error)),!((G=this.push)===null||G===void 0)&&G.metadata&&(w+="; push.metadata="+this.push.metadata),w+="]",w},O.fromResponseBody=function(E,D){return D&&(E=c.decodeBody(E,D)),c.isArray(E)?O.fromValuesArray(E):O.fromValues(E)},O.fromValues=function(E){return E.error=E.error&&g.default.fromValues(E.error),Object.assign(new O,E)},O.fromValuesArray=function(E){for(var D=E.length,S=new Array(D),G=0;G<D;G++)S[G]=O.fromValues(E[G]);return S},O.toRequestBody=c.encodeBody,O})();r.default=R}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=(function(){function p(){}return p.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},p.prototype.toString=function(){var b="[PushChannelSubscription";return this.channel&&(b+="; channel="+this.channel),this.deviceId&&(b+="; deviceId="+this.deviceId),this.clientId&&(b+="; clientId="+this.clientId),b+="]",b},p.fromResponseBody=function(b,R){return R&&(b=c.decodeBody(b,R)),c.isArray(b)?p.fromValuesArray(b):p.fromValues(b)},p.fromValues=function(b){return Object.assign(new p,b)},p.fromValuesArray=function(b){for(var R=b.length,O=new Array(R),E=0;E<R;E++)O[E]=p.fromValues(b[E]);return O},p.toRequestBody=c.encodeBody,p})();r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=(function(){function L(M){this.count=M&&M.count||0,this.data=M&&M.data||0,this.uncompressedData=M&&M.uncompressedData||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return L})(),p=(function(L){h.__extends(M,L);function M(A){var T=L.call(this,A)||this;return A&&A.category&&(T.category={},c.forInOwnNonNullProperties(A.category,function(y){T.category[y]=new g(A.category[y])})),T}return M})(g),b=(function(){function L(M){this.peak=M&&M.peak||0,this.min=M&&M.min||0,this.mean=M&&M.mean||0,this.opened=M&&M.opened||0,this.refused=M&&M.refused||0}return L})(),R=(function(){function L(M){this.succeeded=M&&M.succeeded||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return L})(),O=(function(){function L(M){this.plain=new b(M&&M.plain),this.tls=new b(M&&M.tls),this.all=new b(M&&M.all)}return L})(),E=(function(){function L(M){this.messages=new p(M&&M.messages),this.presence=new p(M&&M.presence),this.all=new p(M&&M.all)}return L})(),D=(function(){function L(M){this.realtime=new E(M&&M.realtime),this.rest=new E(M&&M.rest),this.webhook=new E(M&&M.webhook),this.sharedQueue=new E(M&&M.sharedQueue),this.externalQueue=new E(M&&M.externalQueue),this.httpEvent=new E(M&&M.httpEvent),this.push=new E(M&&M.push),this.all=new E(M&&M.all)}return L})(),S=(function(){function L(M){this.all=new E(M&&M.all),this.inbound=new D(M&&M.inbound),this.outbound=new D(M&&M.outbound)}return L})(),G=(function(){function L(M){this.all=new E(M&&M.all),this.producerPaid=new S(M&&M.producerPaid),this.consumerPaid=new S(M&&M.consumerPaid)}return L})(),w=(function(){function L(M){this.messages=M&&M.messages||0;var A=M&&M.notifications;this.notifications={invalid:A&&A.invalid||0,attempted:A&&A.attempted||0,successful:A&&A.successful||0,failed:A&&A.failed||0},this.directPublishes=M&&M.directPublishes||0}return L})(),j=(function(){function L(M){this.succeeded=M&&M.succeeded||0,this.skipped=M&&M.skipped||0,this.failed=M&&M.failed||0}return L})(),U=(function(){function L(M){var A=this;this.delta=void 0,M&&M.delta&&(this.delta={},c.forInOwnNonNullProperties(M.delta,function(T){A.delta[T]=new j(M.delta[T])}))}return L})(),z=(function(L){h.__extends(M,L);function M(A){var T=L.call(this,A)||this;return T.persisted=new E(A&&A.persisted),T.connections=new O(A&&A.connections),T.channels=new b(A&&A.channels),T.apiRequests=new R(A&&A.apiRequests),T.tokenRequests=new R(A&&A.tokenRequests),T.xchgProducer=new G(A&&A.xchgProducer),T.xchgConsumer=new G(A&&A.xchgConsumer),T.push=new w(A&&A.pushStats),T.processed=new U(A&&A.processed),T.inProgress=A&&A.inProgress||void 0,T.unit=A&&A.unit||void 0,T.intervalId=A&&A.intervalId||void 0,T}return M.fromValues=function(A){return new M(A)},M})(S);r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(30)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),R=h.__importDefault(o(51)),O=h.__importDefault(o(38)),E=h.__importDefault(o(8)),D=h.__importDefault(o(4)),S=h.__importDefault(o(10)),G=h.__importDefault(o(35)),w=h.__importDefault(o(3)),j=h.__importDefault(o(9)),U=(function(L){h.__extends(M,L);function M(A){var T=L.call(this,A)||this;return b.default.logAction(b.default.LOG_MINOR,"Realtime()",""),T.connection=new R.default(T,T.options),T.channels=new z(T),A.autoConnect!==!1&&T.connect(),T}return M.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},M.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},M.Promise=function(A){return A=E.default.objectifyOptions(A),A.promises=!0,new M(A)},M.Callbacks=M,M.Utils=c,M.ConnectionManager=G.default,M.Platform=w.default,M.ProtocolMessage=S.default,M.Message=j.default,M})(g.default),z=(function(L){h.__extends(M,L);function M(A){var T=L.call(this)||this;return T.realtime=A,T.all=Object.create(null),A.connection.connectionManager.on("transport.active",function(){T.onTransportActive()}),T}return M.prototype.channelSerials=function(){for(var A={},T=0,y=c.keysArray(this.all,!0);T<y.length;T++){var B=y[T],N=this.all[B];N.properties.channelSerial&&(A[B]=N.properties.channelSerial)}return A},M.prototype.recoverChannels=function(A){for(var T=0,y=c.keysArray(A,!0);T<y.length;T++){var B=y[T],N=this.get(B);N.properties.channelSerial=A[B]}},M.prototype.onChannelMessage=function(A){var T=A.channel;if(T===void 0){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+A.action);return}var y=this.all[T];if(!y){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+T);return}y.onMessage(A)},M.prototype.onTransportActive=function(){for(var A in this.all){var T=this.all[A];T.state==="attaching"||T.state==="detaching"?T.checkPendingState():T.state==="suspended"?T._attach(!1,null):T.state==="attached"&&T.requestState("attaching")}},M.prototype.propogateConnectionInterruption=function(A,T){var y={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},B=["attaching","attached","detaching","suspended"],N=y[A];for(var q in this.all){var I=this.all[q];c.arrIn(B,I.state)&&I.notifyState(N,T)}},M.prototype.get=function(A,T){A=String(A);var y=this.all[A];if(!y)y=this.all[A]=new O.default(this.realtime,A,T);else if(T){if(y._shouldReattachToSetOptions(T,y.channelOptions))throw new D.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);y.setOptions(T)}return y},M.prototype.getDerived=function(A,T,y){if(T.filter){var B=c.toBase64(T.filter),N=c.matchDerivedChannel(A);A="[filter=".concat(B).concat(N.qualifierParam,"]").concat(N.channelName)}return this.get(A,y)},M.prototype.release=function(A){A=String(A);var T=this.all[A];if(T){var y=T.getReleaseErr();if(y)throw y;delete this.all[A]}},M})(p.default);r.default=U}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(35)),b=h.__importDefault(o(2)),R=h.__importDefault(o(37)),O=h.__importDefault(o(3));function E(){}var D=(function(S){h.__extends(G,S);function G(w,j){var U=S.call(this)||this;return U.whenState=(function(z,L){return g.default.prototype.whenState.call(U,z,U.state,L,new R.default(void 0,z))}),U.ably=w,U.connectionManager=new p.default(w,j),U.state=U.connectionManager.state.state,U.key=void 0,U.id=void 0,U.errorReason=null,U.connectionManager.on("connectionstate",function(z){var L=U.state=z.current;O.default.Config.nextTick(function(){U.emit(L,z)})}),U.connectionManager.on("update",function(z){O.default.Config.nextTick(function(){U.emit("update",z)})}),U}return G.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},G.prototype.ping=function(w){if(b.default.logAction(b.default.LOG_MINOR,"Connection.ping()",""),!w){if(this.ably.options.promises)return c.promisify(this,"ping",arguments);w=E}this.connectionManager.ping(null,w)},G.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(G.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),G.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},G})(g.default);r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PendingMessage=void 0;var h=o(0),c=h.__importDefault(o(10)),g=h.__importStar(o(1)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),R=h.__importDefault(o(36)),O=h.__importDefault(o(4)),E=c.default.Action,D=(function(){function G(w,j){this.message=w,this.callback=j,this.merged=!1;var U=w.action;this.sendAttempted=!1,this.ackRequired=U==E.MESSAGE||U==E.PRESENCE}return G})();r.PendingMessage=D;var S=(function(G){h.__extends(w,G);function w(j){var U=G.call(this)||this;return U.transport=j,U.messageQueue=new R.default,j.on("ack",function(z,L){U.onAck(z,L)}),j.on("nack",function(z,L,M){U.onNack(z,L,M)}),U}return w.prototype.onAck=function(j,U){b.default.logAction(b.default.LOG_MICRO,"Protocol.onAck()","serial = "+j+"; count = "+U),this.messageQueue.completeMessages(j,U)},w.prototype.onNack=function(j,U,z){b.default.logAction(b.default.LOG_ERROR,"Protocol.onNack()","serial = "+j+"; count = "+U+"; err = "+g.inspectError(z)),z||(z=new O.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(j,U,z)},w.prototype.onceIdle=function(j){var U=this.messageQueue;if(U.count()===0){j();return}U.once("idle",j)},w.prototype.send=function(j){j.ackRequired&&this.messageQueue.push(j),b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Protocol.send()","sending msg; "+c.default.stringify(j.message)),j.sendAttempted=!0,this.transport.send(j.message)},w.prototype.getTransport=function(){return this.transport},w.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},w.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},w.prototype.finish=function(){var j=this.transport;this.onceIdle(function(){j.disconnect()})},w})(p.default);r.default=S}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(26)),b=h.__importDefault(o(8)),R=h.__importDefault(o(2)),O=h.__importDefault(o(10)),E=h.__importDefault(o(4)),D="web_socket";function S(j){return!!j.on}var G=(function(j){h.__extends(U,j);function U(z,L,M){var A=j.call(this,z,L,M)||this;return A.shortName=D,M.heartbeats=c.default.Config.useProtocolHeartbeats,A.wsHost=b.default.getHost(M.options,M.host,!0),A}return U.isAvailable=function(){return!!c.default.Config.WebSocket},U.prototype.createWebSocket=function(z,L){return this.uri=z+g.toQueryString(L),new c.default.Config.WebSocket(this.uri)},U.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},U.prototype.connect=function(){R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),p.default.prototype.connect.call(this);var z=this,L=this.params,M=L.options,A=M.tls?"wss://":"ws://",T=A+this.wsHost+":"+b.default.getPort(M)+"/";R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+T),this.auth.getAuthParams(function(y,B){if(!z.isDisposed){var N="";for(var q in B)N+=" "+q+": "+B[q]+";";if(R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+N+" err: "+y),y){z.disconnect(y);return}var I=L.getConnectParams(B);try{var Z=z.wsConnection=z.createWebSocket(T,I);Z.binaryType=c.default.Config.binaryType,Z.onopen=function(){z.onWsOpen()},Z.onclose=function(K){z.onWsClose(K)},Z.onmessage=function(K){z.onWsData(K.data)},Z.onerror=function(K){z.onWsError(K)},S(Z)&&Z.on("ping",function(){z.onActivity()})}catch(K){R.default.logAction(R.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(K.stack||K.message)),z.disconnect(K)}}})},U.prototype.send=function(z){var L=this.wsConnection;if(!L){R.default.logAction(R.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{L.send(O.default.serialize(z,this.params.format))}catch(A){var M="Exception from ws connection when trying to send: "+g.inspectError(A);R.default.logAction(R.default.LOG_ERROR,"WebSocketTransport.send()",M),this.finish("disconnected",new E.default(M,5e4,500))}},U.prototype.onWsData=function(z){R.default.logAction(R.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+z.length+"; type = "+typeof z);try{this.onProtocolMessage(O.default.deserialize(z,this.format))}catch(L){R.default.logAction(R.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+L.stack)}},U.prototype.onWsOpen=function(){R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},U.prototype.onWsClose=function(z){var L,M;if(typeof z=="object"?(M=z.code,L=z.wasClean||M===1e3):(M=z,L=M==1e3),delete this.wsConnection,L){R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var A=new E.default("Websocket closed",80003,400);this.finish("disconnected",A)}else{var T="Unclean disconnection of WebSocket ; code = "+M,A=new E.default(T,80003,400);R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.onWsClose()",T),this.finish("disconnected",A)}this.emit("disposed")},U.prototype.onWsError=function(z){var L=this;R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+z.message),c.default.Config.nextTick(function(){L.disconnect(Error(z.message))})},U.prototype.dispose=function(){R.default.logAction(R.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var z=this.wsConnection;z&&(z.onmessage=function(){},delete this.wsConnection,c.default.Config.nextTick(function(){if(R.default.logAction(R.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!z)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");z.close()}))},U})(p.default);function w(j){return G.isAvailable()&&(j.supportedTransports[D]=G),G}r.default=w}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(34)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),R=h.__importDefault(o(16)),O=h.__importStar(o(4)),E=h.__importDefault(o(38)),D=h.__importDefault(o(24)),S=h.__importDefault(o(39)),G=function(){};function w(A){return A.channel.realtime.auth.clientId}function j(A){var T=A.channel.realtime,y=T.auth.clientId;return(!y||y==="*")&&T.connection.state==="connected"}function U(A,T,y){switch(A.state){case"attached":case"suspended":y();break;case"initialized":case"detached":case"detaching":case"attaching":A.attach(function(B){B?T(B):y()});break;default:T(O.default.fromValues(A.invalidStateError()))}}function z(A,T){if(A.isSynthesized()||T.isSynthesized())return A.timestamp>=T.timestamp;var y=A.parseId(),B=T.parseId();return y.msgSerial===B.msgSerial?y.index>B.index:y.msgSerial>B.msgSerial}var L=(function(A){h.__extends(T,A);function T(y){var B=A.call(this,y)||this;return B.channel=y,B.syncComplete=!1,B.members=new M(B,function(N){return N.clientId+":"+N.connectionId}),B._myMembers=new M(B,function(N){return N.clientId}),B.subscriptions=new p.default,B.pendingPresence=[],B}return T.prototype.enter=function(y,B){if(j(this))throw new O.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"enter",B)},T.prototype.update=function(y,B){if(j(this))throw new O.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"update",B)},T.prototype.enterClient=function(y,B,N){return this._enterOrUpdateClient(void 0,y,B,"enter",N)},T.prototype.updateClient=function(y,B,N){return this._enterOrUpdateClient(void 0,y,B,"update",N)},T.prototype._enterOrUpdateClient=function(y,B,N,q,I){var Z=this;if(!I)if(typeof N=="function")I=N,N=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"_enterOrUpdateClient",[y,B,N,q]);I=G}var K=this.channel;if(!K.connectionManager.activeState()){I(K.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence."+q+"Client()","channel = "+K.name+", id = "+y+", client = "+(B||"(implicit) "+w(this)));var P=R.default.fromData(N);P.action=q,y&&(P.id=y),B&&(P.clientId=B),R.default.encode(P,K.channelOptions,function(x){if(x){I(x);return}switch(K.state){case"attached":K.sendPresence(P,I);break;case"initialized":case"detached":K.attach();case"attaching":Z.pendingPresence.push({presence:P,callback:I});break;default:x=new O.PartialErrorInfo("Unable to "+q+" presence channel while in "+K.state+" state",90001),x.code=90001,I(x)}})},T.prototype.leave=function(y,B){if(j(this))throw new O.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,y,B)},T.prototype.leaveClient=function(y,B,N){if(!N)if(typeof B=="function")N=B,B=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"leaveClient",[y,B]);N=G}var q=this.channel;if(!q.connectionManager.activeState()){N==null||N(q.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+y);var I=R.default.fromData(B);switch(I.action="leave",y&&(I.clientId=y),q.state){case"attached":q.sendPresence(I,N);break;case"attaching":this.pendingPresence.push({presence:I,callback:N});break;case"initialized":case"failed":{var Z=new O.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);N==null||N(Z);break}default:N==null||N(q.invalidStateError())}},T.prototype.get=function(y,B){var N=this,q=Array.prototype.slice.call(arguments);q.length==1&&typeof q[0]=="function"&&q.unshift(null),y=q[0],B=q[1];var I=!y||("waitForSync"in y?y.waitForSync:!0);if(!B){if(this.channel.realtime.options.promises)return c.promisify(this,"get",q);B=G}function Z(K){B(null,y?K.list(y):K.values())}if(this.channel.state==="suspended"){I?B(O.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):Z(this.members);return}U(this.channel,B,function(){var K=N.members;I?K.waitSync(function(){Z(K)}):Z(K)})},T.prototype.history=function(y,B){if(b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),B===void 0)if(typeof y=="function")B=y,y=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"history",arguments);B=G}y&&y.untilAttach&&(this.channel.state==="attached"?(delete y.untilAttach,y.from_serial=this.channel.properties.attachSerial):B(new O.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),g.default.prototype._history.call(this,y,B)},T.prototype.setPresence=function(y,B,N){b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+y.length+" participants; syncChannelSerial = "+N);var q,I,Z=this.members,K=this._myMembers,P=[],x=this.channel.connectionManager.connectionId;B&&(this.members.startSync(),N&&(I=N.match(/^[\w-]+:(.*)$/))&&(q=I[1]));for(var Y=0;Y<y.length;Y++){var Q=R.default.fromValues(y[Y]);switch(Q.action){case"leave":Z.remove(Q)&&P.push(Q),Q.connectionId===x&&!Q.isSynthesized()&&K.remove(Q);break;case"enter":case"present":case"update":Z.put(Q)&&P.push(Q),Q.connectionId===x&&K.put(Q);break}}B&&!q&&(Z.endSync(),this.channel.syncChannelSerial=null);for(var Y=0;Y<P.length;Y++){var Q=P[Y];this.subscriptions.emit(Q.action,Q)}},T.prototype.onAttached=function(y){b.default.logAction(b.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+y),y?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var B=this.pendingPresence,N=B.length;if(N){this.pendingPresence=[];var q=[],I=D.default.create();b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+N+" queued presence messages");for(var Z=0;Z<N;Z++){var K=B[Z];q.push(K.presence),I.push(K.callback)}this.channel.sendPresence(q,I)}},T.prototype.actOnChannelState=function(y,B,N){switch(y){case"attached":this.onAttached(B);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(N);break}},T.prototype.failPendingPresence=function(y){if(this.pendingPresence.length){b.default.logAction(b.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+c.inspectError(y));for(var B=0;B<this.pendingPresence.length;B++)try{this.pendingPresence[B].callback(y)}catch{}this.pendingPresence=[]}},T.prototype._clearMyMembers=function(){this._myMembers.clear()},T.prototype._ensureMyMembersPresent=function(){var y=this,B=this._myMembers,N=function(Z){if(Z){var K="Presence auto-re-enter failed: "+Z.toString(),P=new O.default(K,91004,400);b.default.logAction(b.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",K);var x=new S.default(y.channel.state,y.channel.state,!0,!1,P);y.channel.emit("update",x)}};for(var q in B.map){var I=B.map[q];b.default.logAction(b.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+I.clientId+'" into the presence set'),this._enterOrUpdateClient(I.id,I.clientId,I.data,"enter",N)}},T.prototype._synthesizeLeaves=function(y){var B=this.subscriptions;c.arrForEach(y,function(N){var q=R.default.fromValues({action:"leave",connectionId:N.connectionId,clientId:N.clientId,data:N.data,encoding:N.encoding,timestamp:c.now()});B.emit("leave",q)})},T.prototype.on=function(){for(var y=[],B=0;B<arguments.length;B++)y[B]=arguments[B];b.default.renamedMethod("RealtimePresence","on","subscribe"),this.subscribe.apply(this,y)},T.prototype.off=function(){for(var y=[],B=0;B<arguments.length;B++)y[B]=arguments[B];b.default.renamedMethod("RealtimePresence","off","unsubscribe"),this.unsubscribe.apply(this,y)},T.prototype.subscribe=function(){for(var y=[],B=0;B<arguments.length;B++)y[B]=arguments[B];var N=E.default.processListenerArgs(y),q=N[0],I=N[1],Z=N[2],K=this.channel;if(!Z){if(this.channel.realtime.options.promises)return c.promisify(this,"subscribe",[q,I]);Z=G}if(K.state==="failed"){Z(O.default.fromValues(K.invalidStateError()));return}this.subscriptions.on(q,I),K.attach(Z)},T.prototype.unsubscribe=function(){for(var y=[],B=0;B<arguments.length;B++)y[B]=arguments[B];var N=E.default.processListenerArgs(y),q=N[0],I=N[1];this.subscriptions.off(q,I)},T})(g.default),M=(function(A){h.__extends(T,A);function T(y,B){var N=A.call(this)||this;return N.presence=y,N.map=Object.create(null),N.syncInProgress=!1,N.residualMembers=null,N.memberKey=B,N}return T.prototype.get=function(y){return this.map[y]},T.prototype.getClient=function(y){var B=this.map,N=[];for(var q in B){var I=B[q];I.clientId==y&&I.action!="absent"&&N.push(I)}return N},T.prototype.list=function(y){var B=this.map,N=y&&y.clientId,q=y&&y.connectionId,I=[];for(var Z in B){var K=B[Z];K.action!=="absent"&&(N&&N!=K.clientId||q&&q!=K.connectionId||I.push(K))}return I},T.prototype.put=function(y){(y.action==="enter"||y.action==="update")&&(y=R.default.fromValues(y),y.action="present");var B=this.map,N=this.memberKey(y);this.residualMembers&&delete this.residualMembers[N];var q=B[N];return q&&!z(y,q)?!1:(B[N]=y,!0)},T.prototype.values=function(){var y=this.map,B=[];for(var N in y){var q=y[N];q.action!="absent"&&B.push(q)}return B},T.prototype.remove=function(y){var B=this.map,N=this.memberKey(y),q=B[N];return q&&!z(y,q)?!1:(this.syncInProgress?(y=R.default.fromValues(y),y.action="absent",B[N]=y):delete B[N],!0)},T.prototype.startSync=function(){var y=this.map,B=this.syncInProgress;b.default.logAction(b.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+B),this.syncInProgress||(this.residualMembers=c.copy(y),this.setInProgress(!0))},T.prototype.endSync=function(){var y=this.map,B=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+B),B){for(var N in y){var q=y[N];q.action==="absent"&&delete y[N]}this.presence._synthesizeLeaves(c.valuesArray(this.residualMembers));for(var N in this.residualMembers)delete y[N];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},T.prototype.waitSync=function(y){var B=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+B),!B){y();return}this.once("sync",y)},T.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},T.prototype.setInProgress=function(y){b.default.logAction(b.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+y),this.syncInProgress=y,this.presence.syncComplete=!y},T})(p.default);r.default=L}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=o(56),g=o(31),p=o(11),b=h.__importDefault(o(5)),R=h.__importDefault(o(3)),O=(function(){function E(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return E.prototype.isWordArray=function(D){return D!=null&&D.sigBytes!==void 0},E.prototype.isArrayBuffer=function(D){return D!=null&&D.constructor===ArrayBuffer},E.prototype.isTypedArray=function(D){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(D)},E.prototype.uint8ViewToBase64=function(D){for(var S="",G=this.base64CharSet,w=D.byteLength,j=w%3,U=w-j,z,L,M,A,T,y=0;y<U;y=y+3)T=D[y]<<16|D[y+1]<<8|D[y+2],z=(T&16515072)>>18,L=(T&258048)>>12,M=(T&4032)>>6,A=T&63,S+=G[z]+G[L]+G[M]+G[A];return j==1?(T=D[U],z=(T&252)>>2,L=(T&3)<<4,S+=G[z]+G[L]+"=="):j==2&&(T=D[U]<<8|D[U+1],z=(T&64512)>>10,L=(T&1008)>>4,M=(T&15)<<2,S+=G[z]+G[L]+G[M]+"="),S},E.prototype.base64ToArrayBuffer=function(D){for(var S=atob==null?void 0:atob(D),G=S.length,w=new Uint8Array(G),j=0;j<G;j++){var U=S.charCodeAt(j);w[j]=U}return w.buffer},E.prototype.isBuffer=function(D){return this.isArrayBuffer(D)||this.isWordArray(D)||this.isTypedArray(D)},E.prototype.toBuffer=function(D){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(D))return new Uint8Array(D);if(this.isTypedArray(D))return new Uint8Array(D.buffer);if(this.isWordArray(D)){for(var S=new ArrayBuffer(D.sigBytes),G=new Uint8Array(S),w=0;w<D.sigBytes;w++)G[w]=D.words[w>>>2]>>>24-w%4*8&255;return G}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},E.prototype.toArrayBuffer=function(D){return this.isArrayBuffer(D)?D:this.toBuffer(D).buffer},E.prototype.toWordArray=function(D){return this.isTypedArray(D)&&(D=D.buffer),this.isWordArray(D)?D:b.default.create(D)},E.prototype.base64Encode=function(D){return this.isWordArray(D)?(0,p.stringify)(D):this.uint8ViewToBase64(this.toBuffer(D))},E.prototype.base64Decode=function(D){return ArrayBuffer&&R.default.Config.atob?this.base64ToArrayBuffer(D):(0,p.parse)(D)},E.prototype.hexEncode=function(D){return(0,c.stringify)(this.toWordArray(D))},E.prototype.hexDecode=function(D){var S=(0,c.parse)(D);return ArrayBuffer?this.toArrayBuffer(S):S},E.prototype.utf8Encode=function(D){return R.default.Config.TextEncoder?new R.default.Config.TextEncoder().encode(D).buffer:(0,g.parse)(D)},E.prototype.utf8Decode=function(D){if(!this.isBuffer(D))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(D)?new TextDecoder().decode(D):(D=this.toWordArray(D),(0,g.stringify)(D))},E.prototype.bufferCompare=function(D,S){if(!D)return-1;if(!S)return 1;var G=this.toWordArray(D),w=this.toWordArray(S);G.clamp(),w.clamp();var j=G.sigBytes-w.sigBytes;if(j!=0)return j;for(var U=G.words,z=w.words,L=0;L<U.length;L++)if(j=U[L]-z[L],j!=0)return j;return 0},E.prototype.byteLength=function(D){return this.isArrayBuffer(D)||this.isTypedArray(D)?D.byteLength:this.isWordArray(D)?D.sigBytes:-1},E.prototype.typedArrayToBuffer=function(D){return D.buffer},E})();r.default=new O}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return h.enc.Hex})}),(function(s,r,o){o.r(r);var h=o(5),c=o.n(h),g=o(11),p=o(23),b=o.n(p),R=o(2),O=o.n(R),E=o(4),D=o.n(E),S=function(G,w){var j="aes",U=256,z="cbc",L=16,M=4,A=4294967296,T=2147483648,y;if(G.getRandomWordArray)y=G.getRandomWordArray;else if(typeof Uint32Array<"u"&&G.getRandomValues){var B=new Uint32Array(M);y=function(Y,Q){var W=Y/4,nt=W==M?B:new Uint32Array(W);G.getRandomValues(nt,function(F){typeof Q<"u"&&Q(F,w.toWordArray(nt))})}}else y=function(Y,Q){O.a.logAction(O.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var W=Y/4,nt=new Array(W),F=0;F<W;F++)nt[F]=Math.floor(Math.random()*A)-T;Q(null,c.a.create(nt))};function N(Y){return Y+L&-L}function q(Y){if(Y.algorithm==="aes"&&Y.mode==="cbc"){if(Y.keyLength===128||Y.keyLength===256)return;throw new Error("Unsupported key length "+Y.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function I(Y){return Y.replace("_","/").replace("-","+")}var Z=[c.a.create([269488144,269488144,269488144,269488144],16),c.a.create([16777216],1),c.a.create([33685504],2),c.a.create([50529024],3),c.a.create([67372036],4),c.a.create([84215045,83886080],5),c.a.create([101058054,101056512],6),c.a.create([117901063,117901056],7),c.a.create([134744072,134744072],8),c.a.create([151587081,151587081,150994944],9),c.a.create([168430090,168430090,168427520],10),c.a.create([185273099,185273099,185273088],11),c.a.create([202116108,202116108,202116108],12),c.a.create([218959117,218959117,218959117,218103808],13),c.a.create([235802126,235802126,235802126,235798528],14),c.a.create([252645135,252645135,252645135,252645135],15),c.a.create([269488144,269488144,269488144,269488144],16)];function K(){}function P(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}K.CipherParams=P,K.getDefaultParams=function(Y){var Q;if(typeof Y=="function"||typeof Y=="string"){if(O.a.deprecated("The ability to pass a callback to `Crypto.getDefaultParams()`","This method now directly returns its result, instead of returning it asynchronously via a callback. Please update your code so that it uses the return value of this method instead of passing a callback."),typeof Y=="function")O.a.deprecated("The ability to call `Crypto.getDefaultParams()` without specifying an encryption key","Please update your code so that it instead passes an object whose `key` property contains an encryption key. That is, replace `Crypto.getDefaultParams()` with `Crypto.getDefaultParams({ key })`, where `key` is an encryption key that you have generated (for example from the `Crypto.generateRandomKey()` method)."),K.generateRandomKey(function(nt){Y(null,K.getDefaultParams({key:nt}))});else if(typeof arguments[1]=="function")O.a.deprecated("The ability to pass the encryption key as the first argument of `Crypto.getDefaultParams()`","Please update your code so that it instead passes an object whose `key` property contains the key. That is, replace `Crypto.getDefaultParams(key)` with `Crypto.getDefaultParams({ key })`."),arguments[1](null,K.getDefaultParams({key:Y}));else throw new Error("Invalid arguments for Crypto.getDefaultParams");return}if(!Y.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof Y.key=="string"?Q=Object(g.parse)(I(Y.key)):Q=w.toWordArray(Y.key);var W=new P;if(W.key=Q,W.algorithm=Y.algorithm||j,W.keyLength=Q.words.length*32,W.mode=Y.mode||z,Y.keyLength&&Y.keyLength!==W.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+Y.keyLength+" was specified, but the key actually has length "+W.keyLength);return q(W),W},K.generateRandomKey=function(Y,Q){arguments.length==1&&typeof Y=="function"&&(Q=Y,Y=void 0),y((Y||U)/8,function(W,nt){Q!==void 0&&Q(W?D.a.fromValues(W):null,nt)})},K.getCipher=function(Y){var Q=Y instanceof P?Y:K.getDefaultParams(Y);return{cipherParams:Q,cipher:new x(Q,M,Y.iv)}};function x(Y,Q,W){this.algorithm=Y.algorithm+"-"+String(Y.keyLength)+"-"+Y.mode,this.cjsAlgorithm=Y.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=w.toWordArray(Y.key),W&&(this.iv=w.toWordArray(W).clone()),this.blockLengthWords=Q}return x.prototype.encrypt=function(Y,Q){O.a.logAction(O.a.LOG_MICRO,"CBCCipher.encrypt()",""),Y=w.toWordArray(Y);var W=Y.sigBytes,nt=N(W),F=this,it=function(){F.getIv(function(at,X){if(at){Q(at);return}var J=F.encryptCipher.process(Y.concat(Z[nt-W])),$=X.concat(J);Q(null,$)})};this.encryptCipher?it():this.iv?(this.encryptCipher=b.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),it()):y(L,function(at,X){if(at){Q(at);return}F.encryptCipher=b.a.algo[F.cjsAlgorithm].createEncryptor(F.key,{iv:X}),F.iv=X,it()})},x.prototype.decrypt=function(Y){O.a.logAction(O.a.LOG_MICRO,"CBCCipher.decrypt()",""),Y=w.toWordArray(Y);var Q=this.blockLengthWords,W=Y.words,nt=c.a.create(W.slice(0,Q)),F=c.a.create(W.slice(Q)),it=b.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:nt}),at=it.process(F),X=it.finalize();return it.reset(),X&&X.sigBytes&&at.concat(X),at},x.prototype.getIv=function(Y){if(this.iv){var Q=this.iv;this.iv=null,Y(null,Q);return}var W=this;y(L,function(nt,F){if(nt){Y(nt);return}Y(null,W.encryptCipher.process(F))})},K};r.default=S}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=c.enc;b.Utf16=b.Utf16BE={stringify:function(O){for(var E=O.words,D=O.sigBytes,S=[],G=0;G<D;G+=2){var w=E[G>>>2]>>>16-G%4*8&65535;S.push(String.fromCharCode(w))}return S.join("")},parse:function(O){for(var E=O.length,D=[],S=0;S<E;S++)D[S>>>1]|=O.charCodeAt(S)<<16-S%2*16;return p.create(D,E*2)}},b.Utf16LE={stringify:function(O){for(var E=O.words,D=O.sigBytes,S=[],G=0;G<D;G+=2){var w=R(E[G>>>2]>>>16-G%4*8&65535);S.push(String.fromCharCode(w))}return S.join("")},parse:function(O){for(var E=O.length,D=[],S=0;S<E;S++)D[S>>>1]|=R(O.charCodeAt(S)<<16-S%2*16);return p.create(D,E*2)}};function R(O){return O<<8&4278255360|O>>>8&16711935}})(),h.enc.Utf16})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(28))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.CipherParams,R=g.enc,O=R.Hex,E=g.format;E.Hex={stringify:function(D){return D.ciphertext.toString(O)},parse:function(D){var S=O.parse(D);return b.create({ciphertext:S})}}})(),h.format.Hex})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(11),o(61),o(27),o(28))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.BlockCipher,b=c.algo,R=[],O=[],E=[],D=[],S=[],G=[],w=[],j=[],U=[],z=[];(function(){for(var A=[],T=0;T<256;T++)T<128?A[T]=T<<1:A[T]=T<<1^283;for(var y=0,B=0,T=0;T<256;T++){var N=B^B<<1^B<<2^B<<3^B<<4;N=N>>>8^N&255^99,R[y]=N,O[N]=y;var q=A[y],I=A[q],Z=A[I],K=A[N]*257^N*16843008;E[y]=K<<24|K>>>8,D[y]=K<<16|K>>>16,S[y]=K<<8|K>>>24,G[y]=K;var K=Z*16843009^I*65537^q*257^y*16843008;w[N]=K<<24|K>>>8,j[N]=K<<16|K>>>16,U[N]=K<<8|K>>>24,z[N]=K,y?(y=q^A[A[A[Z^q]]],B^=A[A[B]]):y=B=1}})();var L=[0,1,2,4,8,16,32,64,128,27,54],M=b.AES=p.extend({_doReset:function(){var A;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,y=T.words,B=T.sigBytes/4,N=this._nRounds=B+6,q=(N+1)*4,I=this._keySchedule=[],Z=0;Z<q;Z++)Z<B?I[Z]=y[Z]:(A=I[Z-1],Z%B?B>6&&Z%B==4&&(A=R[A>>>24]<<24|R[A>>>16&255]<<16|R[A>>>8&255]<<8|R[A&255]):(A=A<<8|A>>>24,A=R[A>>>24]<<24|R[A>>>16&255]<<16|R[A>>>8&255]<<8|R[A&255],A^=L[Z/B|0]<<24),I[Z]=I[Z-B]^A);for(var K=this._invKeySchedule=[],P=0;P<q;P++){var Z=q-P;if(P%4)var A=I[Z];else var A=I[Z-4];P<4||Z<=4?K[P]=A:K[P]=w[R[A>>>24]]^j[R[A>>>16&255]]^U[R[A>>>8&255]]^z[R[A&255]]}}},encryptBlock:function(A,T){this._doCryptBlock(A,T,this._keySchedule,E,D,S,G,R)},decryptBlock:function(A,T){var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y,this._doCryptBlock(A,T,this._invKeySchedule,w,j,U,z,O);var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y},_doCryptBlock:function(A,T,y,B,N,q,I,Z){for(var K=this._nRounds,P=A[T]^y[0],x=A[T+1]^y[1],Y=A[T+2]^y[2],Q=A[T+3]^y[3],W=4,nt=1;nt<K;nt++){var F=B[P>>>24]^N[x>>>16&255]^q[Y>>>8&255]^I[Q&255]^y[W++],it=B[x>>>24]^N[Y>>>16&255]^q[Q>>>8&255]^I[P&255]^y[W++],at=B[Y>>>24]^N[Q>>>16&255]^q[P>>>8&255]^I[x&255]^y[W++],X=B[Q>>>24]^N[P>>>16&255]^q[x>>>8&255]^I[Y&255]^y[W++];P=F,x=it,Y=at,Q=X}var F=(Z[P>>>24]<<24|Z[x>>>16&255]<<16|Z[Y>>>8&255]<<8|Z[Q&255])^y[W++],it=(Z[x>>>24]<<24|Z[Y>>>16&255]<<16|Z[Q>>>8&255]<<8|Z[P&255])^y[W++],at=(Z[Y>>>24]<<24|Z[Q>>>16&255]<<16|Z[P>>>8&255]<<8|Z[x&255])^y[W++],X=(Z[Q>>>24]<<24|Z[P>>>16&255]<<16|Z[x>>>8&255]<<8|Z[Y&255])^y[W++];A[T]=F,A[T+1]=it,A[T+2]=at,A[T+3]=X},keySize:256/32});c.AES=p._createHelper(M)})(),h.AES})}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.WordArray,R=p.Hasher,O=g.algo,E=[];(function(){for(var U=0;U<64;U++)E[U]=c.abs(c.sin(U+1))*4294967296|0})();var D=O.MD5=R.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(U,z){for(var L=0;L<16;L++){var M=z+L,A=U[M];U[M]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var T=this._hash.words,y=U[z+0],B=U[z+1],N=U[z+2],q=U[z+3],I=U[z+4],Z=U[z+5],K=U[z+6],P=U[z+7],x=U[z+8],Y=U[z+9],Q=U[z+10],W=U[z+11],nt=U[z+12],F=U[z+13],it=U[z+14],at=U[z+15],X=T[0],J=T[1],$=T[2],tt=T[3];X=S(X,J,$,tt,y,7,E[0]),tt=S(tt,X,J,$,B,12,E[1]),$=S($,tt,X,J,N,17,E[2]),J=S(J,$,tt,X,q,22,E[3]),X=S(X,J,$,tt,I,7,E[4]),tt=S(tt,X,J,$,Z,12,E[5]),$=S($,tt,X,J,K,17,E[6]),J=S(J,$,tt,X,P,22,E[7]),X=S(X,J,$,tt,x,7,E[8]),tt=S(tt,X,J,$,Y,12,E[9]),$=S($,tt,X,J,Q,17,E[10]),J=S(J,$,tt,X,W,22,E[11]),X=S(X,J,$,tt,nt,7,E[12]),tt=S(tt,X,J,$,F,12,E[13]),$=S($,tt,X,J,it,17,E[14]),J=S(J,$,tt,X,at,22,E[15]),X=G(X,J,$,tt,B,5,E[16]),tt=G(tt,X,J,$,K,9,E[17]),$=G($,tt,X,J,W,14,E[18]),J=G(J,$,tt,X,y,20,E[19]),X=G(X,J,$,tt,Z,5,E[20]),tt=G(tt,X,J,$,Q,9,E[21]),$=G($,tt,X,J,at,14,E[22]),J=G(J,$,tt,X,I,20,E[23]),X=G(X,J,$,tt,Y,5,E[24]),tt=G(tt,X,J,$,it,9,E[25]),$=G($,tt,X,J,q,14,E[26]),J=G(J,$,tt,X,x,20,E[27]),X=G(X,J,$,tt,F,5,E[28]),tt=G(tt,X,J,$,N,9,E[29]),$=G($,tt,X,J,P,14,E[30]),J=G(J,$,tt,X,nt,20,E[31]),X=w(X,J,$,tt,Z,4,E[32]),tt=w(tt,X,J,$,x,11,E[33]),$=w($,tt,X,J,W,16,E[34]),J=w(J,$,tt,X,it,23,E[35]),X=w(X,J,$,tt,B,4,E[36]),tt=w(tt,X,J,$,I,11,E[37]),$=w($,tt,X,J,P,16,E[38]),J=w(J,$,tt,X,Q,23,E[39]),X=w(X,J,$,tt,F,4,E[40]),tt=w(tt,X,J,$,y,11,E[41]),$=w($,tt,X,J,q,16,E[42]),J=w(J,$,tt,X,K,23,E[43]),X=w(X,J,$,tt,Y,4,E[44]),tt=w(tt,X,J,$,nt,11,E[45]),$=w($,tt,X,J,at,16,E[46]),J=w(J,$,tt,X,N,23,E[47]),X=j(X,J,$,tt,y,6,E[48]),tt=j(tt,X,J,$,P,10,E[49]),$=j($,tt,X,J,it,15,E[50]),J=j(J,$,tt,X,Z,21,E[51]),X=j(X,J,$,tt,nt,6,E[52]),tt=j(tt,X,J,$,q,10,E[53]),$=j($,tt,X,J,Q,15,E[54]),J=j(J,$,tt,X,B,21,E[55]),X=j(X,J,$,tt,x,6,E[56]),tt=j(tt,X,J,$,at,10,E[57]),$=j($,tt,X,J,K,15,E[58]),J=j(J,$,tt,X,F,21,E[59]),X=j(X,J,$,tt,I,6,E[60]),tt=j(tt,X,J,$,W,10,E[61]),$=j($,tt,X,J,N,15,E[62]),J=j(J,$,tt,X,Y,21,E[63]),T[0]=T[0]+X|0,T[1]=T[1]+J|0,T[2]=T[2]+$|0,T[3]=T[3]+tt|0},_doFinalize:function(){var U=this._data,z=U.words,L=this._nDataBytes*8,M=U.sigBytes*8;z[M>>>5]|=128<<24-M%32;var A=c.floor(L/4294967296),T=L;z[(M+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,z[(M+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,U.sigBytes=(z.length+1)*4,this._process();for(var y=this._hash,B=y.words,N=0;N<4;N++){var q=B[N];B[N]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return y},clone:function(){var U=R.clone.call(this);return U._hash=this._hash.clone(),U}});function S(U,z,L,M,A,T,y){var B=U+(z&L|~z&M)+A+y;return(B<<T|B>>>32-T)+z}function G(U,z,L,M,A,T,y){var B=U+(z&M|L&~M)+A+y;return(B<<T|B>>>32-T)+z}function w(U,z,L,M,A,T,y){var B=U+(z^L^M)+A+y;return(B<<T|B>>>32-T)+z}function j(U,z,L,M,A,T,y){var B=U+(L^(z|~M))+A+y;return(B<<T|B>>>32-T)+z}g.MD5=R._createHelper(D),g.HmacMD5=R._createHmacHelper(D)})(Math),h.MD5})}),(function(s,r,o){var h;Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importDefault(o(3)),p=c.__importStar(o(1)),b=c.__importDefault(o(8)),R=o(4),O=c.__importDefault(o(19)),E=c.__importDefault(o(17)),D=c.__importDefault(o(22)),S=c.__importDefault(o(2)),G=o(29),w=c.__importDefault(o(63)),j=o(14);function U(M){var A=M.statusCode;return A===408&&!M.code||A===400&&!M.code||A>=500&&A<=504}function z(M){var A=M.connection,T=A&&A.connectionManager.host;return T?[T].concat(b.default.getFallbackHosts(M.options)):b.default.getHosts(M.options)}var L=(h=(function(){function M(A){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=z,this.options=A||{};var T=this.options.connectivityCheckUrl||b.default.connectivityCheckUrl,y=this.options.connectivityCheckParams,B=!this.options.connectivityCheckUrl;g.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(N,q,I,Z,K,P,x){var Y=E.default.createRequest(I,Z,K,P,D.default.REQ_SEND,q&&q.options.timeouts,N);return Y.once("complete",x),Y.exec(),Y},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+T),this.doUri(O.default.Get,null,T,null,null,y,function(q,I,Z,K,P){var x=!1;B?x=!q&&(I==null?void 0:I.replace(/\n/,""))=="yes":x=!q&&(0,j.isSuccessCode)(P),S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+x),N(null,x)})}):g.default.Config.jsonpSupported?(this.Request=function(N,q,I,Z,K,P,x){var Y=(0,G.createRequest)(I,Z,K,P,D.default.REQ_SEND,q&&q.options.timeouts,N);return Y.once("complete",x),g.default.Config.nextTick(function(){Y.exec()}),Y},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){var q=this,I=b.default.jsonpInternetUpUrl;if(this.checksInProgress){this.checksInProgress.push(N);return}this.checksInProgress=[N],S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+I);var Z=new G.Request("isTheInternetUp",I,null,null,null,D.default.REQ_SEND,b.default.TIMEOUTS);Z.once("complete",function(K,P){var x=!K&&P;S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+x);for(var Y=0;Y<q.checksInProgress.length;Y++)q.checksInProgress[Y](null,x);q.checksInProgress=null}),g.default.Config.nextTick(function(){Z.exec()})}):g.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=w.default,this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+T),this.doUri(O.default.Get,null,T,null,null,null,function(q,I){var Z=!q&&(I==null?void 0:I.replace(/\n/,""))=="yes";S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+Z),N(null,Z)})}):this.Request=function(N,q,I,Z,K,P,x){x(new R.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return M.prototype.do=function(A,T,y,B,N,q,I){var Z=this,K=typeof y=="function"?y:function(Q){return T.baseUri(Q)+y},P=T._currentFallback;if(P)if(P.validUntil>p.now()){if(!this.Request){I==null||I(new R.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,K(P.host),B,q,N,function(Q){for(var W=[],nt=1;nt<arguments.length;nt++)W[nt-1]=arguments[nt];if(Q&&U(Q)){T._currentFallback=null,Z.do(A,T,y,B,N,q,I);return}I==null||I.apply(void 0,c.__spreadArray([Q],W,!1))});return}else T._currentFallback=null;var x=z(T);if(x.length===1){this.doUri(A,T,K(x[0]),B,N,q,I);return}var Y=function(Q,W){var nt=Q.shift();Z.doUri(A,T,K(nt),B,N,q,function(F){for(var it=[],at=1;at<arguments.length;at++)it[at-1]=arguments[at];if(F&&U(F)&&Q.length){Y(Q,!0);return}W&&(T._currentFallback={host:nt,validUntil:p.now()+T.options.timeouts.fallbackRetryTimeout}),I==null||I.apply(void 0,c.__spreadArray([F],it,!1))})};Y(x)},M.prototype.doUri=function(A,T,y,B,N,q,I){if(!this.Request){I(new R.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,y,B,q,N,I)},M})(),h.methods=[O.default.Get,O.default.Delete,O.default.Post,O.default.Put,O.default.Patch],h.methodsWithoutBody=[O.default.Get,O.default.Delete],h.methodsWithBody=[O.default.Post,O.default.Put,O.default.Patch],h);r.default=L}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(4)),g=h.__importDefault(o(3)),p=h.__importDefault(o(8)),b=h.__importStar(o(1)),R=o(1);function O(S,G){return!!G.get("x-ably-errorcode")}function E(S,G){if(O(S,G))return S.error&&c.default.fromValues(S.error)}function D(S,G,w,j,U,z,L){var M=new Headers(j||{}),A=S?S.toUpperCase():b.isEmptyArg(z)?"GET":"POST",T=new AbortController,y=setTimeout(function(){T.abort(),L(new c.PartialErrorInfo("Request timed out",null,408))},G?G.options.timeouts.httpRequestTimeout:p.default.TIMEOUTS.httpRequestTimeout),B={method:A,headers:M,body:z};g.default.Config.isWebworker||(B.credentials=M.has("authorization")?"include":"same-origin"),(0,R.getGlobalObject)().fetch(w+"?"+new URLSearchParams(U||{}),B).then(function(N){clearTimeout(y);var q=N.headers.get("Content-Type"),I;q&&q.indexOf("application/x-msgpack")>-1?I=N.arrayBuffer():q&&q.indexOf("application/json")>-1?I=N.json():I=N.text(),I.then(function(Z){var K=!!q&&q.indexOf("application/x-msgpack")===-1;if(N.ok)L(null,Z,N.headers,K,N.status);else{var P=E(Z,N.headers)||new c.PartialErrorInfo("Error response received from server: "+N.status+" body was: "+g.default.Config.inspect(Z),null,N.status);L(P,Z,N.headers,K,N.status)}})}).catch(function(N){clearTimeout(y),L(N)})}r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(41)),g=h.__importStar(o(1)),p=g.getGlobalObject();typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function b(){var D=p.location;return!p.WebSocket||!D||!D.origin||D.origin.indexOf("http")>-1}var R=p.navigator&&p.navigator.userAgent.toString(),O=p.location&&p.location.href,E={agent:"browser",logTimestamps:!0,userAgent:R,currentUrl:O,noUpgrade:R&&!!R.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:p.WebSocket,fetchSupported:!!p.fetch,xhrSupported:p.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:typeof document<"u",allowComet:b(),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:c.default,supportsBinary:!!p.TextDecoder,preferBinary:!1,ArrayBuffer:p.ArrayBuffer,atob:p.atob,nextTick:typeof p.setImmediate<"u"?p.setImmediate.bind(p):function(D){setTimeout(D,0)},addEventListener:p.addEventListener,inspect:JSON.stringify,stringByteSize:function(D){return p.TextDecoder&&new p.TextEncoder().encode(D).length||D.length},TextEncoder:p.TextEncoder,TextDecoder:p.TextDecoder,Promise:p.Promise,getRandomValues:(function(D){if(D!==void 0)return function(S,G){D.getRandomValues(S),G&&G(null)}})(p.crypto||msCrypto)};r.default=E}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importStar(o(1)),p="ablyjs-storage-test",b=(function(){function R(){try{h.sessionStorage.setItem(p,p),h.sessionStorage.removeItem(p),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{h.localStorage.setItem(p,p),h.localStorage.removeItem(p),this.localSupported=!0}catch{this.localSupported=!1}}return R.prototype.get=function(O){return this._get(O,!1)},R.prototype.getSession=function(O){return this._get(O,!0)},R.prototype.remove=function(O){return this._remove(O,!1)},R.prototype.removeSession=function(O){return this._remove(O,!0)},R.prototype.set=function(O,E,D){return this._set(O,E,D,!1)},R.prototype.setSession=function(O,E,D){return this._set(O,E,D,!0)},R.prototype._set=function(O,E,D,S){var G={value:E};return D&&(G.expires=g.now()+D),this.storageInterface(S).setItem(O,JSON.stringify(G))},R.prototype._get=function(O,E){if(E&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!E&&!this.localSupported)throw new Error("Local Storage not supported");var D=this.storageInterface(E).getItem(O);if(!D)return null;var S=JSON.parse(D);return S.expires&&S.expires<g.now()?(this.storageInterface(E).removeItem(O),null):S.value},R.prototype._remove=function(O,E){return this.storageInterface(E).removeItem(O)},R.prototype.storageInterface=function(O){return O?h.sessionStorage:h.localStorage},R})();r.default=new b}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(67)),g={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[c.default.XhrPolling,c.default.XhrStreaming,c.default.JsonP,c.default.WebSocket],baseTransportOrder:[c.default.XhrPolling,c.default.XhrStreaming,c.default.JsonP,c.default.WebSocket],transportPreferenceOrder:[c.default.JsonP,c.default.XhrPolling,c.default.XhrStreaming,c.default.WebSocket],upgradeTransports:[c.default.XhrStreaming,c.default.WebSocket]};r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c.WebSocket="web_socket",c.Comet="comet",c.XhrStreaming="xhr_streaming",c.XhrPolling="xhr_polling",c.JsonP="jsonp"})(h||(h={})),r.default=h}),(function(s,r,o){o.r(r);var h=o(29),c=o.n(h),g=o(1),p=o(3),b=o.n(p),R=o(12),O=o.n(R),E=o(17),D=o.n(E),S=function(U){var z="xhr_polling";function L(M,A,T){T.stream=!1,O.a.call(this,M,A,T),this.shortName=z}return g.inherits(L,O.a),L.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.allowComet},L.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},L.prototype.createRequest=function(M,A,T,y,B){return D.a.createRequest(M,A,T,y,B,this.timeouts)},typeof U<"u"&&L.isAvailable()&&(U.supportedTransports[z]=L),L},G=S,w=function(U){var z="xhr_streaming";function L(M,A,T){O.a.call(this,M,A,T),this.shortName=z}return g.inherits(L,O.a),L.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.streamingSupported&&b.a.Config.allowComet},L.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},L.prototype.createRequest=function(M,A,T,y,B){return D.a.createRequest(M,A,T,y,B,this.timeouts)},typeof U<"u"&&L.isAvailable()&&(U.supportedTransports[z]=L),L},j=w;r.default=[c.a,G,j]})]).default})})(mp)),mp.exports}var O5=jm();const Gr={width:800,height:600},R5=.65,M5=2.2,Hg="studentCanvasPrefs";function x5(){const[d]=$g(),n=d.get("room")||"demo",[s,r]=At.useState(null),[o]=At.useState(`student-${Math.random().toString(36).substr(2,9)}`),[h,c]=At.useState(!1),[g,p]=At.useState([]),[b,R]=At.useState([]),[O,E]=At.useState(null),[D,S]=At.useState("pen"),[G,w]=At.useState("black"),[j,U]=At.useState(3),[z,L]=At.useState(!1),[M,A]=At.useState("stylus-only"),[T,y]=At.useState("left");At.useEffect(()=>{if(!(typeof window>"u"))try{const Rt=localStorage.getItem(Hg);if(Rt){const Ot=JSON.parse(Rt);Ot.color&&w(Ot.color),typeof Ot.brushSize=="number"&&U(Ot.brushSize),Ot.inputMode&&A(Ot.inputMode),Ot.toolbarPosition&&y(Ot.toolbarPosition)}}catch(Rt){console.warn("Failed to load student prefs",Rt)}},[]),At.useEffect(()=>{if(typeof window>"u")return;const Rt={color:G,brushSize:j,inputMode:M,toolbarPosition:T};localStorage.setItem(Hg,JSON.stringify(Rt))},[G,j,M,T]);const B=At.useRef([]),N=At.useRef([]),q=At.useRef(!1),I=At.useRef(!1),Z=At.useRef(null),[K,P]=At.useState(Gr),x=At.useMemo(()=>Gr.width?K.width/Gr.width:1,[K.width]);At.useEffect(()=>{(async()=>{try{const Ot=new O5.Realtime({authUrl:"/api/token",authParams:{clientId:o}});Ot.connection.on("connected",()=>{console.log("Connected to Ably"),c(!0)}),Ot.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),c(!1)});const xt=Ot.channels.get(`room-${n}`);return xt.subscribe("student-layer",Xt=>{Xt.clientId===o&&(q.current=!0,p(Xt.data.lines||[]),setTimeout(()=>{q.current=!1},100))}),xt.subscribe("teacher-annotation",Xt=>{Xt.data.targetStudentId===o&&(q.current=!0,R(Xt.data.annotations||[]),setTimeout(()=>{q.current=!1},100))}),xt.subscribe("teacher-image",Xt=>{var Zt,ye,he,Ue;E({dataUrl:(Zt=Xt.data)==null?void 0:Zt.dataUrl,width:(ye=Xt.data)==null?void 0:ye.width,height:(he=Xt.data)==null?void 0:he.height,timestamp:(Ue=Xt.data)==null?void 0:Ue.timestamp})}),r(xt),()=>{Ot.close()}}catch(Ot){console.error("Failed to initialize Ably:",Ot)}})()},[o,n]),At.useEffect(()=>{const Rt=Z.current;if(!Rt)return;const Ot=()=>{if(!Z.current)return;const Xt=Z.current.getBoundingClientRect(),Zt=48,ye=Math.max(320,Xt.width-Zt),he=Math.max(240,Xt.height-Zt),Ue=ye/Gr.width,_n=he/Gr.height,Ge=Math.min(Ue,_n),Be=Math.max(R5,Math.min(M5,Ge)),Sa=Math.round(Be*20)/20;P({width:Math.round(Gr.width*Sa),height:Math.round(Gr.height*Sa)})};Ot(),window.addEventListener("resize",Ot);let xt;return window.ResizeObserver&&(xt=new ResizeObserver(()=>Ot()),xt.observe(Rt)),()=>{window.removeEventListener("resize",Ot),xt&&xt.disconnect()}},[T]),At.useEffect(()=>{if(!q.current&&s){const Rt=setTimeout(()=>{s.publish("student-layer",{lines:g,clientId:o,meta:{base:Gr,display:K,scale:x}}),console.log("Published student layer:",g.length,"lines")},150);return()=>clearTimeout(Rt)}},[g,s,o,K,x]);const Y=Rt=>M!=="stylus-only"?!0:(Rt==null?void 0:Rt.pointerType)==="pen",Q=Rt=>{const Ot=Rt.evt;if(!Y(Ot)){Ot!=null&&Ot.preventDefault&&Ot.preventDefault();return}if(D==="pen"){L(!0);const xt=Rt.target.getStage().getPointerPosition(),Xt=xt.x/x,Zt=xt.y/x,ye={tool:D,points:[Xt,Zt],color:G,strokeWidth:j/x};B.current.push([...g]),N.current=[],p([...g,ye])}else D==="eraser"&&(L(!0),I.current=!1);Ot.preventDefault&&Ot.preventDefault()},W=Rt=>{if(!z)return;const Ot=Rt.evt;if(!Y(Ot)){Ot!=null&&Ot.preventDefault&&Ot.preventDefault();return}const Xt=Rt.target.getStage().getPointerPosition();if(D==="pen"){const Zt=g[g.length-1];if(Zt){const ye=Xt.x/x,he=Xt.y/x,Ue={...Zt,points:[...Zt.points,ye,he]};p([...g.slice(0,-1),Ue])}}else if(D==="eraser"){const Zt=g.length,ye=Xt.x,he=Xt.y,Ue=20,_n=g.filter(Ge=>{for(let Be=0;Be<Ge.points.length;Be+=2){const Sa=Ge.points[Be]*x,dn=Ge.points[Be+1]*x;if(Math.sqrt(Math.pow(Sa-ye,2)+Math.pow(dn-he,2))<Ue)return!1}return!0});_n.length<Zt&&!I.current&&(B.current.push([...g]),N.current=[],I.current=!0),p(_n)}Ot!=null&&Ot.preventDefault&&Ot.preventDefault()},nt=Rt=>{const Ot=Rt==null?void 0:Rt.evt;if(!Y(Ot)){Ot!=null&&Ot.preventDefault&&Ot.preventDefault();return}L(!1)},F=()=>{if(B.current.length>0){const Rt=B.current.pop();N.current.push([...g]),p(Rt)}},it=()=>{if(N.current.length>0){const Rt=N.current.pop();B.current.push([...g]),p(Rt)}},at=async()=>{B.current.push([...g]),N.current=[],p([]),s&&(await s.publish("student-layer",{lines:[],clientId:o,meta:{base:Gr,display:K,scale:x}}),console.log("Published student clear"))},X=()=>{var Rt;return((Rt=o.split("-")[1])==null?void 0:Rt.substring(0,3))||o},J=()=>{A(Rt=>Rt==="stylus-only"?"all":"stylus-only")},$=()=>{y(Rt=>Rt==="left"?"right":"left")},tt=()=>`Connected as ${X()}`,ut=h?"Connected":"Reconnecting…",Tt=h?"online":"offline",gt=Rt=>Rt.map((Ot,xt)=>Ot*x),Mt=Rt=>(Rt.strokeWidth||3)*x;return ot.jsx("div",{className:"student-canvas-page",children:ot.jsxs("div",{className:"student-canvas-container",children:[ot.jsxs("div",{className:"student-status-bar",children:[ot.jsxs("div",{className:"student-status-text",children:[ot.jsx("h1",{children:"Student Canvas"}),ot.jsx("p",{children:tt()})]}),ot.jsxs("div",{className:"student-status-actions",children:[ot.jsxs("div",{className:`connection-pill ${Tt}`,"aria-live":"polite",children:[ot.jsx("span",{className:"connection-indicator-dot"}),ot.jsx("span",{children:ut})]}),ot.jsxs("button",{className:"move-toolbar-btn",onClick:$,children:["Move toolbar to ",T==="left"?"right":"left"]})]})]}),ot.jsxs("div",{className:`student-workspace ${T==="right"?"toolbar-right":""}`,children:[ot.jsxs("div",{className:"student-sidebar",children:[ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"COLORS"}),ot.jsxs("div",{className:"color-buttons",children:[ot.jsx("button",{onClick:()=>w("black"),className:`color-button ${G==="black"?"active":""}`,style:{background:"black"},"aria-label":"Black"}),ot.jsx("button",{onClick:()=>w("#0066FF"),className:`color-button ${G==="#0066FF"?"active":""}`,style:{background:"#0066FF"},"aria-label":"Blue"}),ot.jsx("button",{onClick:()=>w("#00AA00"),className:`color-button ${G==="#00AA00"?"active":""}`,style:{background:"#00AA00"},"aria-label":"Green"})]})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),ot.jsxs("div",{className:"tool-buttons",children:[ot.jsx("button",{onClick:()=>S("pen"),className:`tool-button ${D==="pen"?"active":""}`,children:"Pen"}),ot.jsx("button",{onClick:()=>S("eraser"),className:`tool-button ${D==="eraser"?"active":""}`,children:"Eraser"})]})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),ot.jsx("div",{className:"brush-size-control",children:ot.jsxs("div",{className:"brush-slider-container",children:[ot.jsx("input",{type:"range",min:"1",max:"10",value:j,onChange:Rt=>U(parseInt(Rt.target.value)),className:"brush-slider"}),ot.jsx("span",{className:"brush-value",children:j})]})})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),ot.jsx("button",{className:`input-mode-toggle ${M==="all"?"all-inputs":""}`,onClick:J,children:M==="stylus-only"?"Stylus mode (pen only)":"All inputs"})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),ot.jsxs("div",{className:"history-buttons",children:[ot.jsx("button",{onClick:F,className:"history-button",disabled:B.current.length===0,children:"Undo"}),ot.jsx("button",{onClick:it,className:"history-button",disabled:N.current.length===0,children:"Redo"}),ot.jsx("button",{onClick:at,className:"history-button danger",children:"Clear"})]})]})]}),ot.jsxs("div",{className:"student-canvas-panel",ref:Z,children:[O&&ot.jsxs("div",{className:"student-shared-image",children:[ot.jsxs("div",{className:"shared-image-meta",children:[ot.jsx("span",{children:"Teacher shared image"}),ot.jsxs("span",{children:[O.width,"×",O.height]})]}),ot.jsx("img",{src:O.dataUrl,alt:"Teacher shared"})]}),ot.jsx("div",{className:"student-canvas-frame",children:ot.jsx("div",{className:"student-canvas-surface",style:{width:`${K.width}px`,height:`${K.height}px`},children:ot.jsxs(Vp,{width:K.width,height:K.height,onPointerDown:Q,onPointerMove:W,onPointerUp:nt,onPointerLeave:nt,className:"canvas-stage",style:{touchAction:"none"},children:[ot.jsx(hc,{children:g.map((Rt,Ot)=>ot.jsx(dc,{points:gt(Rt.points),stroke:Rt.color,strokeWidth:Mt(Rt),tension:.5,lineCap:"round",lineJoin:"round"},`student-${Ot}`))}),ot.jsx(hc,{listening:!1,children:b.map((Rt,Ot)=>ot.jsx(dc,{points:gt(Rt.points),stroke:Rt.color,strokeWidth:Mt(Rt),tension:.5,lineCap:"round",lineJoin:"round"},`teacher-${Ot}`))})]})})})]})]})]})})}var vp,jg;function N5(){if(jg)return vp;jg=1;function d(h){return typeof h=="string"&&(h=h.indexOf(":")==-1?{token:h}:{key:h}),h.promises=!0,h}var n=jm(),s=function(h,c,g,p){return new n.ErrorInfo(h,c,g,p)},r=function(h){return new n.Rest(d(h))};Object.assign(r,n.Rest);var o=function(h){return new n.Realtime(d(h))};return Object.assign(o,n.Realtime),vp={ErrorInfo:s,Rest:r,Realtime:o},vp}var D5=N5();const z5=$d(D5),Lm=({active:d=!1,size:n=20})=>{const s=d?"#ff4d4f":"#b8c1cc",r=d?"#ff4d4f":"transparent";return ot.jsxs("svg",{width:n,height:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[ot.jsx("path",{d:"M5 2.5V17.5",stroke:s,strokeWidth:"1.6",strokeLinecap:"round"}),ot.jsx("path",{d:"M5 3h10l-2 3 2 3H5V3Z",fill:r,stroke:s,strokeWidth:"1.4",strokeLinejoin:"round"})]})},U5=({student:d,onClick:n,onToggleFlag:s,teacherAnnotations:r=[]})=>{var D,S,G,w;const o=At.useRef(null),h=()=>{if(d.name)return d.name;const j=d.clientId.match(/student-(\d+)/);return j?`Student ${j[1]}`:d.clientId},c=()=>{if(!d.lastUpdate)return"Just joined";const j=Math.floor((Date.now()-d.lastUpdate)/1e3);return j<5?"Just now":j<60?`${j}s ago`:`${Math.floor(j/60)}m ago`},g=((S=(D=d.meta)==null?void 0:D.base)==null?void 0:S.width)||800,p=((w=(G=d.meta)==null?void 0:G.base)==null?void 0:w.height)||600,O=Math.min(220/g,165/p),E=j=>{j.stopPropagation(),s&&s(d.clientId)};return ot.jsxs("div",{className:`student-card ${d.isActive?"active":"inactive"}`,onClick:()=>n(d),children:[ot.jsxs("div",{className:"student-card-header",children:[ot.jsxs("div",{className:"student-name",children:[ot.jsx("span",{className:"student-icon",children:"👤"}),h()]}),ot.jsxs("div",{className:"student-header-actions",children:[ot.jsx("button",{className:`flag-button ${d.isFlagged?"active":""}`,onClick:E,"aria-label":d.isFlagged?"Remove flag":"Flag student",title:d.isFlagged?"Remove flag":"Flag student",children:ot.jsx(Lm,{active:d.isFlagged,size:18})}),ot.jsx("div",{className:"student-status",children:ot.jsx("span",{className:`status-dot ${d.isActive?"online":"offline"}`})})]})]}),ot.jsxs("div",{className:"student-card-canvas",children:[ot.jsx("div",{style:{width:`${g*O}px`,height:`${p*O}px`,overflow:"hidden",position:"relative"},children:ot.jsxs(Vp,{ref:o,width:g,height:p,scaleX:O,scaleY:O,style:{transformOrigin:"top left"},children:[ot.jsx(hc,{children:d.lines&&d.lines.map((j,U)=>ot.jsx(dc,{points:j.points,stroke:j.color||"black",strokeWidth:j.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`preview-${d.clientId}-${U}`))}),ot.jsx(hc,{children:r.map((j,U)=>ot.jsx(dc,{points:j.points,stroke:j.color||"#FF0000",strokeWidth:j.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${d.clientId}-${U}`))})]})}),(!d.lines||d.lines.length===0)&&ot.jsxs("div",{className:"no-drawing",children:[ot.jsx("span",{children:"✏️"}),ot.jsx("p",{children:"No drawing yet"})]}),d.lines&&d.lines.length>0&&ot.jsxs("div",{className:"stroke-count",children:[d.lines.length," stroke",d.lines.length!==1?"s":""]})]}),ot.jsxs("div",{className:"student-card-footer",children:[ot.jsx("span",{className:"last-update",children:c()}),ot.jsx("span",{className:"click-hint",children:"Click to annotate →"})]})]})},Lg={width:800,height:600},wg="teacherAnnotationPrefs",Yg=[{label:"Red",value:"#FF3B30"},{label:"Purple",value:"#7C3AED"},{label:"Teal",value:"#0EA5E9"}],G5=({student:d,isOpen:n,onClose:s,onAnnotate:r,existingAnnotations:o=[],isFlagged:h=!1,onToggleFlag:c})=>{const[g,p]=At.useState("pen"),[b,R]=At.useState(Yg[0].value),[O,E]=At.useState(3),[D,S]=At.useState(!1),[G,w]=At.useState([]),[j,U]=At.useState("stylus-only"),[z,L]=At.useState("left"),M=At.useRef([]),A=At.useRef([]),T=At.useRef(!1),y=At.useRef(null),B=At.useRef(null),N=At.useRef(null),[q,I]=At.useState({width:960,height:720}),Z=At.useMemo(()=>({x:q.width/Lg.width,y:q.height/Lg.height}),[q]);if(At.useEffect(()=>{if(!(typeof window>"u"))try{const gt=localStorage.getItem(wg);if(gt){const Mt=JSON.parse(gt);Mt.color&&R(Mt.color),typeof Mt.brushSize=="number"&&E(Mt.brushSize),Mt.inputMode&&U(Mt.inputMode),Mt.toolbarPosition&&L(Mt.toolbarPosition)}}catch(gt){console.warn("Failed to load teacher annotation prefs",gt)}},[]),At.useEffect(()=>{if(typeof window>"u")return;const gt={color:b,brushSize:O,inputMode:j,toolbarPosition:z};localStorage.setItem(wg,JSON.stringify(gt))},[b,O,j,z]),At.useEffect(()=>{n&&d&&d.clientId!==y.current&&(y.current=d.clientId,w(o),M.current=[],A.current=[])},[n,d,o]),At.useEffect(()=>{if(!n)return;const gt=()=>{if(!B.current)return;const Mt=B.current.getBoundingClientRect(),Rt=32,Ot=Math.max(320,Mt.width-Rt),xt=Math.max(240,Mt.height-Rt),Xt=Math.min(Ot,xt*4/3),Zt=Xt*3/4;I({width:Math.floor(Xt),height:Math.floor(Zt)})};return gt(),window.addEventListener("resize",gt),()=>window.removeEventListener("resize",gt)},[z,n]),!n||!d)return null;const K=()=>{if(d.name)return d.name;const gt=d.clientId.match(/student-(\d+)/)||d.clientId.match(/load-test-student-(\d+)/);return gt?`Student ${gt[1]}`:d.clientId},P=gt=>j!=="stylus-only"?!0:(gt==null?void 0:gt.pointerType)==="pen",x=(gt=[])=>gt.map((Mt,Rt)=>Rt%2===0?Mt*Z.x:Mt*Z.y),Y=gt=>({x:gt.x/Z.x,y:gt.y/Z.y}),Q=gt=>(gt.strokeWidth||3)*Z.x,W=gt=>{const Mt=gt.evt;if(!P(Mt)){Mt!=null&&Mt.preventDefault&&Mt.preventDefault();return}if(g==="pen"){S(!0);const Rt=gt.target.getStage().getPointerPosition(),{x:Ot,y:xt}=Y(Rt),Xt={tool:"pen",points:[Ot,xt],color:b,strokeWidth:O};M.current.push([...G]),A.current=[],w([...G,Xt])}else g==="eraser"&&(S(!0),T.current=!1);Mt.preventDefault&&Mt.preventDefault()},nt=gt=>{if(!D)return;const Mt=gt.evt;if(!P(Mt)){Mt!=null&&Mt.preventDefault&&Mt.preventDefault();return}const Ot=gt.target.getStage().getPointerPosition();if(g==="pen"){const xt=G[G.length-1];if(xt){const{x:Xt,y:Zt}=Y(Ot);xt.points=xt.points.concat([Xt,Zt]),w([...G.slice(0,-1),xt])}}else if(g==="eraser"){const xt=G.length,Xt=20,Zt=G.filter(ye=>{for(let he=0;he<ye.points.length;he+=2){const Ue=ye.points[he]*Z.x,_n=ye.points[he+1]*Z.y;if(Math.sqrt(Math.pow(Ue-Ot.x,2)+Math.pow(_n-Ot.y,2))<Xt)return!1}return!0});Zt.length<xt&&!T.current&&(M.current.push([...G]),A.current=[],T.current=!0),w(Zt)}Mt!=null&&Mt.preventDefault&&Mt.preventDefault()},F=gt=>{const Mt=gt==null?void 0:gt.evt;if(!P(Mt)){Mt!=null&&Mt.preventDefault&&Mt.preventDefault();return}S(!1),r(G)},it=()=>{if(M.current.length>0){const gt=M.current.pop();A.current.push([...G]),w(gt),r(gt)}},at=()=>{if(A.current.length>0){const gt=A.current.pop();M.current.push([...G]),w(gt),r(gt)}},X=()=>{M.current.push([...G]),A.current=[];const gt=[];w(gt),r(gt)},J=()=>{c&&c(d.clientId)},$=()=>{S(!1),s()},tt=gt=>{gt.target.classList.contains("annotation-modal-overlay")&&$()},ut=()=>{U(gt=>gt==="stylus-only"?"all":"stylus-only")},Tt=()=>{L(gt=>gt==="left"?"right":"left")};return ot.jsx("div",{className:"annotation-modal-overlay",onClick:tt,children:ot.jsx("div",{className:"annotation-modal student-console",onClick:gt=>gt.stopPropagation(),children:ot.jsxs("div",{className:"annotation-console",children:[ot.jsxs("div",{className:"annotation-status-bar",children:[ot.jsxs("div",{className:"annotation-status-text",children:[ot.jsx("h1",{children:"Annotate Student"}),ot.jsx("p",{children:K()})]}),ot.jsxs("div",{className:"annotation-status-actions",children:[ot.jsxs("button",{className:`flag-pill ${h?"active":""}`,onClick:J,children:[ot.jsx(Lm,{active:h,size:16}),h?"Flagged":"Flag"]}),ot.jsxs("button",{className:"status-badge",onClick:Tt,children:["Move toolbar to ",z==="left"?"right":"left"]}),ot.jsx("button",{className:"status-badge danger",onClick:$,children:"✕ Close"})]})]}),ot.jsxs("div",{className:`annotation-workspace ${z==="right"?"toolbar-right":""}`,children:[ot.jsxs("div",{className:"annotation-sidebar",children:[ot.jsxs("div",{className:"sidebar-header",children:[ot.jsx("h2",{children:"Annotation Console"}),ot.jsx("p",{children:"Mirror of student workspace"})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"COLORS"}),ot.jsx("div",{className:"color-row",children:Yg.map(gt=>ot.jsx("button",{className:`color-button ${b===gt.value?"active":""}`,style:{background:gt.value},onClick:()=>R(gt.value),"aria-label":gt.label},gt.value))})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),ot.jsxs("div",{className:"tool-buttons",children:[ot.jsx("button",{onClick:()=>p("pen"),className:`tool-button ${g==="pen"?"active":""}`,children:"Pen"}),ot.jsx("button",{onClick:()=>p("eraser"),className:`tool-button ${g==="eraser"?"active":""}`,children:"Eraser"})]})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),ot.jsxs("div",{className:"brush-size-control",children:[ot.jsx("input",{type:"range",min:"1",max:"10",value:O,onChange:gt=>E(parseInt(gt.target.value)),className:"brush-slider"}),ot.jsx("span",{className:"brush-value",children:O})]})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),ot.jsxs("div",{className:"history-buttons",children:[ot.jsx("button",{onClick:it,className:"history-button",disabled:M.current.length===0,children:"Undo"}),ot.jsx("button",{onClick:at,className:"history-button",disabled:A.current.length===0,children:"Redo"}),ot.jsx("button",{onClick:X,className:"history-button danger",children:"Clear"})]})]}),ot.jsxs("div",{className:"sidebar-section",children:[ot.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),ot.jsx("button",{className:`input-mode-toggle ${j==="all"?"all":""}`,onClick:ut,children:j==="stylus-only"?"Stylus only":"All inputs"})]})]}),ot.jsx("div",{className:"annotation-canvas-panel",children:ot.jsx("div",{className:"annotation-canvas-frame",ref:B,children:ot.jsxs(Vp,{ref:N,width:q.width,height:q.height,onPointerDown:W,onPointerMove:nt,onPointerUp:F,onPointerLeave:F,className:"annotation-stage",children:[ot.jsx(hc,{listening:!1,children:d.lines&&d.lines.map((gt,Mt)=>ot.jsx(dc,{points:x(gt.points),stroke:gt.color||"black",strokeWidth:(gt.strokeWidth||3)*Z.x,tension:.5,lineCap:"round",lineJoin:"round"},`student-${Mt}`))}),ot.jsx(hc,{children:G.map((gt,Mt)=>ot.jsx(dc,{points:x(gt.points),stroke:gt.color,strokeWidth:Q(gt),tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${Mt}`))})]})})})]})]})})})},B5=async(d,n=800,s=600,r=.7)=>{const o=await createImageBitmap(d),h=Math.min(n/o.width,s/o.height,1),c=Math.round(o.width*h),g=Math.round(o.height*h),p=document.createElement("canvas");p.width=c,p.height=g,p.getContext("2d").drawImage(o,0,0,c,g);const R=await new Promise((E,D)=>{p.toBlob(S=>{S?E(S):D(new Error("Failed to compress image"))},"image/jpeg",r)}),O=await new Promise((E,D)=>{const S=new FileReader;S.onload=()=>E(S.result),S.onerror=D,S.readAsDataURL(R)});return{blob:R,dataUrl:O,width:c,height:g,size:R.size}},H5=()=>{const[d,n]=$g(),s=Gp(),r=()=>{const tt="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let ut="";for(let Tt=0;Tt<6;Tt++)ut+=tt.charAt(Math.floor(Math.random()*tt.length));return ut},o=()=>{const tt=d.get("room");if(tt)return tt;const ut=r();return n({room:ut}),ut},[h]=Sn.useState(o),[c,g]=At.useState(null),[p,b]=At.useState(null),[R,O]=At.useState(!1),[E]=At.useState(`teacher-${Math.random().toString(36).substring(7)}`),[D,S]=At.useState(()=>{const tt={};for(let ut=1;ut<=8;ut++){const Tt=`student-demo${ut}`;tt[Tt]={clientId:Tt,name:`Student ${ut}`,lines:[],lastUpdate:Date.now()-ut*1e4,isActive:ut<=5,isFlagged:!1}}return tt}),[G,w]=At.useState(null),[j,U]=At.useState({}),[z,L]=At.useState(""),[M,A]=At.useState("all"),[T,y]=At.useState(""),[B,N]=At.useState(!1),q=At.useRef(null),I=At.useRef(!1);At.useEffect(()=>((async()=>{try{const ut=`/api/token?clientId=${E}`,gt=await(await fetch(ut)).json(),Mt=new z5.Realtime({authCallback:async(Ot,xt)=>{xt(null,gt)},clientId:E});Mt.connection.on("connected",()=>{console.log("Connected to Ably"),O(!0)}),Mt.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),O(!1)}),g(Mt);const Rt=Mt.channels.get(`room-${h}`);Rt.subscribe("student-layer",Ot=>{console.log("📥 Teacher received student layer from",Ot.clientId),I.current=!0,S(xt=>{var Xt,Zt;return{...xt,[Ot.clientId]:{...xt[Ot.clientId]||{},clientId:Ot.clientId,name:Z(Ot.clientId),lines:Ot.data.lines||[],meta:Ot.data.meta||((Xt=xt[Ot.clientId])==null?void 0:Xt.meta)||null,lastUpdate:Date.now(),isActive:!0,isFlagged:((Zt=xt[Ot.clientId])==null?void 0:Zt.isFlagged)||!1}}}),setTimeout(()=>{I.current=!1},100)}),Rt.presence.subscribe("enter",Ot=>{Ot.clientId!==E&&Ot.clientId.includes("student")&&(console.log("👋 Student joined:",Ot.clientId),S(xt=>{var Xt;return{...xt,[Ot.clientId]:{...xt[Ot.clientId]||{},clientId:Ot.clientId,name:Z(Ot.clientId),isActive:!0,lastUpdate:Date.now(),isFlagged:((Xt=xt[Ot.clientId])==null?void 0:Xt.isFlagged)||!1}}}))}),Rt.presence.subscribe("leave",Ot=>{Ot.clientId!==E&&Ot.clientId.includes("student")&&(console.log("👋 Student left:",Ot.clientId),S(xt=>{var Xt;return{...xt,[Ot.clientId]:{...xt[Ot.clientId]||{},isActive:!1,isFlagged:((Xt=xt[Ot.clientId])==null?void 0:Xt.isFlagged)||!1}}}))}),Rt.presence.enter(),b(Rt)}catch(ut){console.error("Failed to connect to Ably:",ut)}})(),()=>{c&&c.close()}),[h,E]);const Z=tt=>{const ut=tt.match(/student-(\d+)/)||tt.match(/student-([\w]+)/);return ut?`Student ${ut[1]}`:tt},K=tt=>{w(D[tt.clientId]||tt)},P=()=>{w(null)},x=tt=>{if(!G||!p)return;const ut=G.clientId;U(Tt=>({...Tt,[ut]:tt})),p.publish("teacher-annotation",{targetStudentId:ut,annotations:tt,teacherId:E,timestamp:Date.now()}),console.log("📤 Published annotations for",ut)},Y=tt=>{S(ut=>{const Tt=ut[tt];return Tt?{...ut,[tt]:{...Tt,isFlagged:!Tt.isFlagged}}:ut}),w(ut=>ut&&ut.clientId===tt?{...ut,isFlagged:!ut.isFlagged}:ut)},Q=()=>{q.current&&(q.current.value="",q.current.click())},W=async tt=>{var Tt;const ut=(Tt=tt.target.files)==null?void 0:Tt[0];if(!ut||!p){y("Unable to upload image right now.");return}N(!0),y("");try{const{dataUrl:gt,width:Mt,height:Rt}=await B5(ut),Ot={dataUrl:gt,width:Mt,height:Rt,filename:ut.name,timestamp:Date.now()};await p.publish("teacher-image",Ot),y("Image shared with students.")}catch(gt){console.error("Failed to upload image from dashboard:",gt),y("Upload failed. Please try again.")}finally{N(!1)}},nt=()=>{c&&c.close(),s("/")},F=()=>Object.values(D).sort((tt,ut)=>tt.isActive&&!ut.isActive?-1:!tt.isActive&&ut.isActive?1:(ut.lastUpdate||0)-(tt.lastUpdate||0)),it=()=>{const tt=F(),ut=z.trim().toLowerCase();return tt.filter(Tt=>{const gt=ut?(Tt.name||Tt.clientId).toLowerCase().includes(ut):!0,Mt=M==="all"||M==="flagged"&&Tt.isFlagged;return gt&&Mt})},at=F(),X=it(),J=at.filter(tt=>tt.isActive).length,$=G?D[G.clientId]||G:null;return ot.jsxs("div",{className:"teacher-dashboard",children:[ot.jsxs("div",{className:"dashboard-header",children:[ot.jsxs("div",{className:"header-left",children:[ot.jsx("button",{className:"back-btn",onClick:nt,children:"← Back"}),ot.jsx("h1",{children:"Teacher Dashboard"})]}),ot.jsx("div",{className:"header-center",children:ot.jsxs("div",{className:"room-code-display",children:[ot.jsx("div",{className:"room-code-label",children:"Room Code"}),ot.jsx("div",{className:"room-code-value",children:h}),ot.jsx("div",{className:"room-code-hint",children:"Share this code with students"})]})}),ot.jsxs("div",{className:"header-right",children:[ot.jsxs("div",{className:"connection-status",children:[ot.jsx("span",{className:`status-dot ${R?"online":"offline"}`}),R?"Connected":"Disconnected"]}),ot.jsxs("div",{className:"student-count",children:[ot.jsx("span",{className:"count-number",children:J}),ot.jsxs("span",{className:"count-label",children:["Active Student",J!==1?"s":""]})]}),ot.jsxs("div",{className:"image-share-wrapper",children:[ot.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:W,style:{display:"none"}}),ot.jsx("button",{className:"share-image-btn",onClick:Q,disabled:B,children:B?"Uploading…":"Share Image"}),T&&ot.jsx("span",{className:"image-share-message",children:T})]})]})]}),ot.jsx("div",{className:"dashboard-content",children:at.length===0?ot.jsxs("div",{className:"no-students",children:[ot.jsx("div",{className:"no-students-icon",children:"👥"}),ot.jsx("h2",{children:"Waiting for Students..."}),ot.jsxs("p",{children:['Students will appear here when they join room "',h,'"']}),ot.jsx("p",{className:"hint",children:"💡 Students can join by entering this room code on the landing page"})]}):ot.jsxs(ot.Fragment,{children:[ot.jsx("div",{className:"filter-section",children:ot.jsxs("div",{className:"filter-bar",children:[ot.jsxs("div",{className:"search-input-wrapper",children:[ot.jsx("span",{className:"search-icon",children:"🔍"}),ot.jsx("input",{type:"text",placeholder:"Search students by name or ID...",value:z,onChange:tt=>L(tt.target.value),className:"search-input"}),z&&ot.jsx("button",{className:"clear-search-btn",onClick:()=>L(""),title:"Clear search",children:"✕"})]}),ot.jsxs("div",{className:"filter-results",children:["Showing ",X.length," of ",at.length," student",at.length!==1?"s":"",z&&ot.jsx("span",{className:"filter-active",children:" (filtered)"})]}),ot.jsxs("div",{className:"flag-filter",children:[ot.jsx("span",{className:"flag-filter-label",children:"Flag:"}),ot.jsx("button",{type:"button",className:`flag-toggle-pill ${M==="flagged"?"active":""}`,onClick:()=>A(tt=>tt==="flagged"?"all":"flagged"),children:M==="flagged"?"Flagged":"All"})]})]})}),X.length===0?ot.jsxs("div",{className:"no-results",children:[ot.jsx("div",{className:"no-results-icon",children:"🔍"}),ot.jsx("h3",{children:"No students found"}),ot.jsxs("p",{children:['No students match "',z,'"']}),ot.jsx("button",{className:"clear-filter-btn",onClick:()=>L(""),children:"Clear filter"})]}):ot.jsx("div",{className:"students-grid",children:X.map(tt=>ot.jsx(U5,{student:tt,onClick:K,onToggleFlag:Y,teacherAnnotations:j[tt.clientId]||[]},tt.clientId))})]})}),ot.jsx(G5,{student:$,isOpen:!!$,isFlagged:$==null?void 0:$.isFlagged,onToggleFlag:Y,onClose:P,onAnnotate:x,existingAnnotations:$?j[$.clientId]||[]:[]}),ot.jsx("div",{className:"dashboard-footer",children:ot.jsxs("p",{children:["💡 ",ot.jsx("strong",{children:"Tip:"})," Click on any student card to view their work and add annotations"]})})]})};function j5(){return ot.jsx(z2,{children:ot.jsxs(M2,{children:[ot.jsx(Zd,{path:"/",element:ot.jsx(U2,{})}),ot.jsx(Zd,{path:"/student",element:ot.jsx(x5,{})}),ot.jsx(Zd,{path:"/teacher",element:ot.jsx(H5,{})})]})})}Hv.createRoot(document.getElementById("root")).render(ot.jsx(Sn.StrictMode,{children:ot.jsx(j5,{})}));
