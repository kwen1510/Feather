function xv(d,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in d)){const h=Object.getOwnPropertyDescriptor(r,o);h&&Object.defineProperty(d,o,h.get?h:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(o){if(o.ep)return;o.ep=!0;const h=s(o);fetch(o.href,h)}})();function n0(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var J0={exports:{}},Kf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function Nv(){if(Lg)return Kf;Lg=1;var d=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(r,o,h){var c=null;if(h!==void 0&&(c=""+h),o.key!==void 0&&(c=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:d,type:r,key:c,ref:o!==void 0?o:null,props:h}}return Kf.Fragment=n,Kf.jsx=s,Kf.jsxs=s,Kf}var wg;function Dv(){return wg||(wg=1,J0.exports=Nv()),J0.exports}var lt=Dv(),F0={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function zv(){if(Yg)return de;Yg=1;var d=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),c=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),E=Symbol.iterator;function z(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,w={};function Y(F,it,at){this.props=F,this.context=it,this.refs=w,this.updater=at||S}Y.prototype.isReactComponent={},Y.prototype.setState=function(F,it){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,it,"setState")},Y.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function G(){}G.prototype=Y.prototype;function D(F,it,at){this.props=F,this.context=it,this.refs=w,this.updater=at||S}var j=D.prototype=new G;j.constructor=D,H(j,Y.prototype),j.isPureReactComponent=!0;var M=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},y=Object.prototype.hasOwnProperty;function U(F,it,at){var P=at.ref;return{$$typeof:d,type:F,key:it,ref:P!==void 0?P:null,props:at}}function N(F,it){return U(F.type,it,F.props)}function q(F){return typeof F=="object"&&F!==null&&F.$$typeof===d}function I(F){var it={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(at){return it[at]})}var Z=/\/+/g;function K(F,it){return typeof F=="object"&&F!==null&&F.key!=null?I(""+F.key):it.toString(36)}function X(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(A,A):(F.status="pending",F.then(function(it){F.status==="pending"&&(F.status="fulfilled",F.value=it)},function(it){F.status==="pending"&&(F.status="rejected",F.reason=it)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function x(F,it,at,P,J){var $=typeof F;($==="undefined"||$==="boolean")&&(F=null);var et=!1;if(F===null)et=!0;else switch($){case"bigint":case"string":case"number":et=!0;break;case"object":switch(F.$$typeof){case d:case n:et=!0;break;case O:return et=F._init,x(et(F._payload),it,at,P,J)}}if(et)return J=J(F),et=P===""?"."+K(F,0):P,M(J)?(at="",et!=null&&(at=et.replace(Z,"$&/")+"/"),x(J,it,at,"",function(Lt){return Lt})):J!=null&&(q(J)&&(J=N(J,at+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(Z,"$&/")+"/")+et)),it.push(J)),1;et=0;var gt=P===""?".":P+":";if(M(F))for(var Ot=0;Ot<F.length;Ot++)P=F[Ot],$=gt+K(P,Ot),et+=x(P,it,at,$,J);else if(Ot=z(F),typeof Ot=="function")for(F=Ot.call(F),Ot=0;!(P=F.next()).done;)P=P.value,$=gt+K(P,Ot++),et+=x(P,it,at,$,J);else if($==="object"){if(typeof F.then=="function")return x(X(F),it,at,P,J);throw it=String(F),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return et}function L(F,it,at){if(F==null)return F;var P=[],J=0;return x(F,P,"","",function($){return it.call(at,$,J++)}),P}function Q(F){if(F._status===-1){var it=F._result;it=it(),it.then(function(at){(F._status===0||F._status===-1)&&(F._status=1,F._result=at)},function(at){(F._status===0||F._status===-1)&&(F._status=2,F._result=at)}),F._status===-1&&(F._status=0,F._result=it)}if(F._status===1)return F._result.default;throw F._result}var k=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},nt={map:L,forEach:function(F,it,at){L(F,function(){it.apply(this,arguments)},at)},count:function(F){var it=0;return L(F,function(){it++}),it},toArray:function(F){return L(F,function(it){return it})||[]},only:function(F){if(!q(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return de.Activity=R,de.Children=nt,de.Component=Y,de.Fragment=s,de.Profiler=o,de.PureComponent=D,de.StrictMode=r,de.Suspense=p,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,de.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},de.cache=function(F){return function(){return F.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(F,it,at){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var P=H({},F.props),J=F.key;if(it!=null)for($ in it.key!==void 0&&(J=""+it.key),it)!y.call(it,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&it.ref===void 0||(P[$]=it[$]);var $=arguments.length-2;if($===1)P.children=at;else if(1<$){for(var et=Array($),gt=0;gt<$;gt++)et[gt]=arguments[gt+2];P.children=et}return U(F.type,J,P)},de.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:h,_context:F},F},de.createElement=function(F,it,at){var P,J={},$=null;if(it!=null)for(P in it.key!==void 0&&($=""+it.key),it)y.call(it,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(J[P]=it[P]);var et=arguments.length-2;if(et===1)J.children=at;else if(1<et){for(var gt=Array(et),Ot=0;Ot<et;Ot++)gt[Ot]=arguments[Ot+2];J.children=gt}if(F&&F.defaultProps)for(P in et=F.defaultProps,et)J[P]===void 0&&(J[P]=et[P]);return U(F,$,J)},de.createRef=function(){return{current:null}},de.forwardRef=function(F){return{$$typeof:g,render:F}},de.isValidElement=q,de.lazy=function(F){return{$$typeof:O,_payload:{_status:-1,_result:F},_init:Q}},de.memo=function(F,it){return{$$typeof:b,type:F,compare:it===void 0?null:it}},de.startTransition=function(F){var it=T.T,at={};T.T=at;try{var P=F(),J=T.S;J!==null&&J(at,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(A,k)}catch($){k($)}finally{it!==null&&at.types!==null&&(it.types=at.types),T.T=it}},de.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},de.use=function(F){return T.H.use(F)},de.useActionState=function(F,it,at){return T.H.useActionState(F,it,at)},de.useCallback=function(F,it){return T.H.useCallback(F,it)},de.useContext=function(F){return T.H.useContext(F)},de.useDebugValue=function(){},de.useDeferredValue=function(F,it){return T.H.useDeferredValue(F,it)},de.useEffect=function(F,it){return T.H.useEffect(F,it)},de.useEffectEvent=function(F){return T.H.useEffectEvent(F)},de.useId=function(){return T.H.useId()},de.useImperativeHandle=function(F,it,at){return T.H.useImperativeHandle(F,it,at)},de.useInsertionEffect=function(F,it){return T.H.useInsertionEffect(F,it)},de.useLayoutEffect=function(F,it){return T.H.useLayoutEffect(F,it)},de.useMemo=function(F,it){return T.H.useMemo(F,it)},de.useOptimistic=function(F,it){return T.H.useOptimistic(F,it)},de.useReducer=function(F,it,at){return T.H.useReducer(F,it,at)},de.useRef=function(F){return T.H.useRef(F)},de.useState=function(F){return T.H.useState(F)},de.useSyncExternalStore=function(F,it,at){return T.H.useSyncExternalStore(F,it,at)},de.useTransition=function(){return T.H.useTransition()},de.version="19.2.0",de}var qg;function a0(){return qg||(qg=1,F0.exports=zv()),F0.exports}var Ct=a0();const An=n0(Ct),Uv=xv({__proto__:null,default:An},[Ct]);var k0={exports:{}},If={},W0={exports:{}},$0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Gv(){return Vg||(Vg=1,(function(d){function n(x,L){var Q=x.length;x.push(L);t:for(;0<Q;){var k=Q-1>>>1,nt=x[k];if(0<o(nt,L))x[k]=L,x[Q]=nt,Q=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var L=x[0],Q=x.pop();if(Q!==L){x[0]=Q;t:for(var k=0,nt=x.length,F=nt>>>1;k<F;){var it=2*(k+1)-1,at=x[it],P=it+1,J=x[P];if(0>o(at,Q))P<nt&&0>o(J,at)?(x[k]=J,x[P]=Q,k=P):(x[k]=at,x[it]=Q,k=it);else if(P<nt&&0>o(J,Q))x[k]=J,x[P]=Q,k=P;else break t}}return L}function o(x,L){var Q=x.sortIndex-L.sortIndex;return Q!==0?Q:x.id-L.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],O=1,R=null,E=3,z=!1,S=!1,H=!1,w=!1,Y=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function j(x){for(var L=s(b);L!==null;){if(L.callback===null)r(b);else if(L.startTime<=x)r(b),L.sortIndex=L.expirationTime,n(p,L);else break;L=s(b)}}function M(x){if(H=!1,j(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var L=s(b);L!==null&&X(M,L.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return w?!0:!(d.unstable_now()-U<y)}function q(){if(w=!1,A){var x=d.unstable_now();U=x;var L=!0;try{t:{S=!1,H&&(H=!1,G(T),T=-1),z=!0;var Q=E;try{e:{for(j(x),R=s(p);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var nt=k(R.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){R.callback=nt,j(x),L=!0;break e}R===s(p)&&r(p),j(x)}else r(p);R=s(p)}if(R!==null)L=!0;else{var F=s(b);F!==null&&X(M,F.startTime-x),L=!1}}break t}finally{R=null,E=Q,z=!1}L=void 0}}finally{L?I():A=!1}}}var I;if(typeof D=="function")I=function(){D(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){Y(q,0)};function X(x,L){T=Y(function(){x(d.unstable_now())},L)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var L=3;break;default:L=E}var Q=E;E=L;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,L){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return L()}finally{E=Q}},d.unstable_scheduleCallback=function(x,L,Q){var k=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?k+Q:k):Q=k,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:O++,callback:L,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>k?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(H?(G(T),T=-1):H=!0,X(M,Q-k))):(x.sortIndex=nt,n(p,x),S||z||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var L=E;return function(){var Q=E;E=L;try{return x.apply(this,arguments)}finally{E=Q}}}})($0)),$0}var Pg;function Bv(){return Pg||(Pg=1,W0.exports=Gv()),W0.exports}var tp={exports:{}},Ea={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function Hv(){if(Xg)return Ea;Xg=1;var d=a0();function n(p){var b="https://react.dev/errors/"+p;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)b+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(p,b,O){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:p,containerInfo:b,implementation:O}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,b){if(p==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ea.createPortal=function(p,b){var O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return h(p,b,null,O)},Ea.flushSync=function(p){var b=c.T,O=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=b,r.p=O,r.d.f()}},Ea.preconnect=function(p,b){typeof p=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,r.d.C(p,b))},Ea.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Ea.preinit=function(p,b){if(typeof p=="string"&&b&&typeof b.as=="string"){var O=b.as,R=g(O,b.crossOrigin),E=typeof b.integrity=="string"?b.integrity:void 0,z=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;O==="style"?r.d.S(p,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:R,integrity:E,fetchPriority:z}):O==="script"&&r.d.X(p,{crossOrigin:R,integrity:E,fetchPriority:z,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Ea.preinitModule=function(p,b){if(typeof p=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var O=g(b.as,b.crossOrigin);r.d.M(p,{crossOrigin:O,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&r.d.M(p)},Ea.preload=function(p,b){if(typeof p=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var O=b.as,R=g(O,b.crossOrigin);r.d.L(p,O,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Ea.preloadModule=function(p,b){if(typeof p=="string")if(b){var O=g(b.as,b.crossOrigin);r.d.m(p,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:O,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else r.d.m(p)},Ea.requestFormReset=function(p){r.d.r(p)},Ea.unstable_batchedUpdates=function(p,b){return p(b)},Ea.useFormState=function(p,b,O){return c.H.useFormState(p,b,O)},Ea.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ea.version="19.2.0",Ea}var Qg;function X1(){if(Qg)return tp.exports;Qg=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(n){console.error(n)}}return d(),tp.exports=Hv(),tp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function jv(){if(Kg)return If;Kg=1;var d=Bv(),n=a0(),s=X1();function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)e+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var e=t,l=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(l=e.return),t=e.return;while(t)}return e.tag===3?l:null}function c(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p(t){if(h(t)!==t)throw Error(r(188))}function b(t){var e=t.alternate;if(!e){if(e=h(t),e===null)throw Error(r(188));return e!==t?null:t}for(var l=t,u=e;;){var v=l.return;if(v===null)break;var C=v.alternate;if(C===null){if(u=v.return,u!==null){l=u;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===l)return p(v),t;if(C===u)return p(v),e;C=C.sibling}throw Error(r(188))}if(l.return!==u.return)l=v,u=C;else{for(var V=!1,W=v.child;W;){if(W===l){V=!0,l=v,u=C;break}if(W===u){V=!0,u=v,l=C;break}W=W.sibling}if(!V){for(W=C.child;W;){if(W===l){V=!0,l=C,u=v;break}if(W===u){V=!0,u=C,l=v;break}W=W.sibling}if(!V)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:e}function O(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=O(t),e!==null)return e;t=t.sibling}return null}var R=Object.assign,E=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function K(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Y:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList";case U:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case S:return"Portal";case D:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case j:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return e=t.displayName||null,e!==null?e:K(t.type)||"Memo";case y:e=t._payload,t=t._init;try{return K(t(e))}catch{}}return null}var X=Array.isArray,x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},k=[],nt=-1;function F(t){return{current:t}}function it(t){0>nt||(t.current=k[nt],k[nt]=null,nt--)}function at(t,e){nt++,k[nt]=t.current,t.current=e}var P=F(null),J=F(null),$=F(null),et=F(null);function gt(t,e){switch(at($,e),at(J,t),at(P,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?sg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=sg(e),t=og(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(P),at(P,t)}function Ot(){it(P),it(J),it($)}function Lt(t){t.memoizedState!==null&&at(et,t);var e=P.current,l=og(e,t.type);e!==l&&(at(J,t),at(P,l))}function Xt(t){J.current===t&&(it(P),it(J)),et.current===t&&(it(et),Vf._currentValue=Q)}var Ft,ce;function At(t){if(Ft===void 0)try{throw Error()}catch(l){var e=l.stack.trim().match(/\n( *(at )?)/);Ft=e&&e[1]||"",ce=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+t+ce}var Gt=!1;function kt(t,e){if(!t||Gt)return"";Gt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(e){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(Tt){var bt=Tt}Reflect.construct(t,[],xt)}else{try{xt.call()}catch(Tt){bt=Tt}t.call(xt.prototype)}}else{try{throw Error()}catch(Tt){bt=Tt}(xt=t())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(Tt){if(Tt&&bt&&typeof Tt.stack=="string")return[Tt.stack,bt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=u.DetermineComponentFrameRoot(),V=C[0],W=C[1];if(V&&W){var st=V.split(`
`),vt=W.split(`
`);for(v=u=0;u<st.length&&!st[u].includes("DetermineComponentFrameRoot");)u++;for(;v<vt.length&&!vt[v].includes("DetermineComponentFrameRoot");)v++;if(u===st.length||v===vt.length)for(u=st.length-1,v=vt.length-1;1<=u&&0<=v&&st[u]!==vt[v];)v--;for(;1<=u&&0<=v;u--,v--)if(st[u]!==vt[v]){if(u!==1||v!==1)do if(u--,v--,0>v||st[u]!==vt[v]){var _t=`
`+st[u].replace(" at new "," at ");return t.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",t.displayName)),_t}while(1<=u&&0<=v);break}}}finally{Gt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?At(l):""}function Ut(t,e){switch(t.tag){case 26:case 27:case 5:return At(t.type);case 16:return At("Lazy");case 13:return t.child!==e&&e!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return kt(t.type,!1);case 11:return kt(t.type.render,!1);case 1:return kt(t.type,!0);case 31:return At("Activity");default:return""}}function pt(t){try{var e="",l=null;do e+=Ut(t,l),l=t,t=t.return;while(t);return e}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Nt=Object.prototype.hasOwnProperty,oe=d.unstable_scheduleCallback,Wt=d.unstable_cancelCallback,ne=d.unstable_shouldYield,Zt=d.unstable_requestPaint,re=d.unstable_now,Ue=d.unstable_getCurrentPriorityLevel,rn=d.unstable_ImmediatePriority,Je=d.unstable_UserBlockingPriority,ct=d.unstable_NormalPriority,Mt=d.unstable_LowPriority,Dt=d.unstable_IdlePriority,Kt=d.log,ve=d.unstable_setDisableYieldValue,hn=null,_n=null;function ri(t){if(typeof Kt=="function"&&ve(t),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(hn,t)}catch{}}var Ta=Math.clz32?Math.clz32:yc,ch=Math.log,h0=Math.LN2;function yc(t){return t>>>=0,t===0?32:31-(ch(t)/h0|0)|0}var wl=256,js=262144,Yl=4194304;function sl(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ql(t,e,l){var u=t.pendingLanes;if(u===0)return 0;var v=0,C=t.suspendedLanes,V=t.pingedLanes;t=t.warmLanes;var W=u&134217727;return W!==0?(u=W&~C,u!==0?v=sl(u):(V&=W,V!==0?v=sl(V):l||(l=W&~t,l!==0&&(v=sl(l))))):(W=u&~C,W!==0?v=sl(W):V!==0?v=sl(V):l||(l=u&~t,l!==0&&(v=sl(l)))),v===0?0:e!==0&&e!==v&&(e&C)===0&&(C=v&-v,l=e&-e,C>=l||C===32&&(l&4194048)!==0)?e:v}function qr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function fh(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sc(){var t=Yl;return Yl<<=1,(Yl&62914560)===0&&(Yl=4194304),t}function Vr(t){for(var e=[],l=0;31>l;l++)e.push(t);return e}function ol(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bc(t,e,l,u,v,C){var V=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var W=t.entanglements,st=t.expirationTimes,vt=t.hiddenUpdates;for(l=V&~l;0<l;){var _t=31-Ta(l),xt=1<<_t;W[_t]=0,st[_t]=-1;var bt=vt[_t];if(bt!==null)for(vt[_t]=null,_t=0;_t<bt.length;_t++){var Tt=bt[_t];Tt!==null&&(Tt.lane&=-536870913)}l&=~xt}u!==0&&Vl(t,u,0),C!==0&&v===0&&t.tag!==0&&(t.suspendedLanes|=C&~(V&~e))}function Vl(t,e,l){t.pendingLanes|=e,t.suspendedLanes&=~e;var u=31-Ta(e);t.entangledLanes|=e,t.entanglements[u]=t.entanglements[u]|1073741824|l&261930}function Cc(t,e){var l=t.entangledLanes|=e;for(t=t.entanglements;l;){var u=31-Ta(l),v=1<<u;v&e|t[u]&e&&(t[u]|=e),l&=~v}}function Ls(t,e){var l=e&-e;return l=(l&42)!==0?1:ws(l),(l&(t.suspendedLanes|e))!==0?0:l}function ws(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ys(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gi(){var t=L.p;return t!==0?t:(t=window.event,t===void 0?32:Dg(t.type))}function Bi(t,e){var l=L.p;try{return L.p=t,e()}finally{L.p=l}}var ja=Math.random().toString(36).slice(2),On="__reactFiber$"+ja,Nn="__reactProps$"+ja,si="__reactContainer$"+ja,Lo="__reactEvents$"+ja,hh="__reactListeners$"+ja,dh="__reactHandles$"+ja,wo="__reactResources$"+ja,Pl="__reactMarker$"+ja;function sn(t){delete t[On],delete t[Nn],delete t[Lo],delete t[hh],delete t[dh]}function ul(t){var e=t[On];if(e)return e;for(var l=t.parentNode;l;){if(e=l[si]||l[On]){if(l=e.alternate,e.child!==null||l!==null&&l.child!==null)for(t=gg(t);t!==null;){if(l=t[On])return l;t=gg(t)}return e}t=l,l=t.parentNode}return null}function cl(t){if(t=t[On]||t[si]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Pr(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(r(33))}function Xl(t){var e=t[wo];return e||(e=t[wo]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Dn(t){t[Pl]=!0}var Yo=new Set,qo={};function Hi(t,e){Rn(t,e),Rn(t+"Capture",e)}function Rn(t,e){for(qo[t]=e,t=0;t<e.length;t++)Yo.add(e[t])}var Sn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Xr={};function Po(t){return Nt.call(Xr,t)?!0:Nt.call(Vo,t)?!1:Sn.test(t)?Xr[t]=!0:(Vo[t]=!0,!1)}function Qr(t,e,l){if(Po(e))if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var u=e.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+l)}}function La(t,e,l){if(l===null)t.removeAttribute(e);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+l)}}function wa(t,e,l,u){if(u===null)t.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(e,l,""+u)}}function fa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ph(t,e,l){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,C=u.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return v.call(this)},set:function(V){l=""+V,C.call(this,V)}}),Object.defineProperty(t,e,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(V){l=""+V},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qo(t){if(!t._valueTracker){var e=Xo(t)?"checked":"value";t._valueTracker=ph(t,e,""+t[e])}}function Ec(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var l=e.getValue(),u="";return t&&(u=Xo(t)?t.checked?"true":"false":t.value),t=u,t!==l?(e.setValue(t),!0):!1}function qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gh=/[\n"\\]/g;function Aa(t){return t.replace(gh,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Vs(t,e,l,u,v,C,V,W){t.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?t.type=V:t.removeAttribute("type"),e!=null?V==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+fa(e)):t.value!==""+fa(e)&&(t.value=""+fa(e)):V!=="submit"&&V!=="reset"||t.removeAttribute("value"),e!=null?Ac(t,V,fa(e)):l!=null?Ac(t,V,fa(l)):u!=null&&t.removeAttribute("value"),v==null&&C!=null&&(t.defaultChecked=!!C),v!=null&&(t.checked=v&&typeof v!="function"&&typeof v!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?t.name=""+fa(W):t.removeAttribute("name")}function Tc(t,e,l,u,v,C,V,W){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.type=C),e!=null||l!=null){if(!(C!=="submit"&&C!=="reset"||e!=null)){Qo(t);return}l=l!=null?""+fa(l):"",e=e!=null?""+fa(e):l,W||e===t.value||(t.value=e),t.defaultValue=e}u=u??v,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=W?t.checked:!!u,t.defaultChecked=!!u,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(t.name=V),Qo(t)}function Ac(t,e,l){e==="number"&&qs(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Ql(t,e,l,u){if(t=t.options,e){e={};for(var v=0;v<l.length;v++)e["$"+l[v]]=!0;for(l=0;l<t.length;l++)v=e.hasOwnProperty("$"+t[l].value),t[l].selected!==v&&(t[l].selected=v),v&&u&&(t[l].defaultSelected=!0)}else{for(l=""+fa(l),e=null,v=0;v<t.length;v++){if(t[v].value===l){t[v].selected=!0,u&&(t[v].defaultSelected=!0);return}e!==null||t[v].disabled||(e=t[v])}e!==null&&(e.selected=!0)}}function _c(t,e,l){if(e!=null&&(e=""+fa(e),e!==t.value&&(t.value=e),l==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=l!=null?""+fa(l):""}function Oc(t,e,l,u){if(e==null){if(u!=null){if(l!=null)throw Error(r(92));if(X(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),e=l}l=fa(e),t.defaultValue=l,u=t.textContent,u===l&&u!==""&&u!==null&&(t.value=u),Qo(t)}function fl(t,e){if(e){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=e;return}}t.textContent=e}var mh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rc(t,e,l){var u=e.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":u?t.setProperty(e,l):typeof l!="number"||l===0||mh.has(e)?e==="float"?t.cssFloat=l:t[e]=(""+l).trim():t[e]=l+"px"}function Mc(t,e,l){if(e!=null&&typeof e!="object")throw Error(r(62));if(t=t.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||e!=null&&e.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var v in e)u=e[v],e.hasOwnProperty(v)&&l[v]!==u&&Rc(t,v,u)}else for(var C in e)e.hasOwnProperty(C)&&Rc(t,C,e[C])}function Ko(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ps(t){return d0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ha(){}var Kr=null;function Io(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,oi=null;function xc(t){var e=cl(t);if(e&&(t=e.stateNode)){var l=t[Nn]||null;t:switch(t=e.stateNode,e.type){case"input":if(Vs(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),e=l.name,l.type==="radio"&&e!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Aa(""+e)+'"][type="radio"]'),e=0;e<l.length;e++){var u=l[e];if(u!==t&&u.form===t.form){var v=u[Nn]||null;if(!v)throw Error(r(90));Vs(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(e=0;e<l.length;e++)u=l[e],u.form===t.form&&Ec(u)}break t;case"textarea":_c(t,l.value,l.defaultValue);break t;case"select":e=l.value,e!=null&&Ql(t,!!l.multiple,e,!1)}}}var Zo=!1;function Nc(t,e,l){if(Zo)return t(e,l);Zo=!0;try{var u=t(e);return u}finally{if(Zo=!1,(ji!==null||oi!==null)&&(Ss(),ji&&(e=ji,t=oi,oi=ji=null,xc(e),t)))for(e=0;e<t.length;e++)xc(t[e])}}function Ir(t,e){var l=t.stateNode;if(l===null)return null;var u=l[Nn]||null;if(u===null)return null;l=u[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break t;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,e,typeof l));return l}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(ui)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Jo=!1}var Li=null,Fo=null,Zr=null;function Dc(){if(Zr)return Zr;var t,e=Fo,l=e.length,u,v="value"in Li?Li.value:Li.textContent,C=v.length;for(t=0;t<l&&e[t]===v[t];t++);var V=l-t;for(u=1;u<=V&&e[l-u]===v[C-u];u++);return Zr=v.slice(t,1<u?1-u:void 0)}function Xs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qs(){return!0}function ko(){return!1}function ta(t){function e(l,u,v,C,V){this._reactName=l,this._targetInst=v,this.type=u,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var W in t)t.hasOwnProperty(W)&&(l=t[W],this[W]=l?l(C):C[W]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Qs:ko,this.isPropagationStopped=ko,this}return R(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),e}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=ta(hl),Ks=R({},hl,{view:0,detail:0}),yh=ta(Ks),Il,Is,dl,Zs=R({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dl&&(dl&&t.type==="mousemove"?(Il=t.screenX-dl.screenX,Is=t.screenY-dl.screenY):Is=Il=0,dl=t),Il)},movementY:function(t){return"movementY"in t?t.movementY:Is}}),zc=ta(Zs),$o=R({},Zs,{dataTransfer:0}),Js=ta($o),tu=R({},Ks,{relatedTarget:0}),eu=ta(tu),Sh=R({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=ta(Sh),bh=R({},hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gl=ta(bh),wi=R({},hl,{data:0}),Fs=ta(wi),Uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Eh[t])?!!e[t]:!1}function Jr(){return Zl}var Th=R({},Ks,{key:function(t){if(t.key){var e=Uc[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ch[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(t){return t.type==="keypress"?Xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gc=ta(Th),Ah=R({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=ta(Ah),p0=R({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),jn=ta(p0),_h=R({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oh=ta(_h),Rh=R({},Zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mh=ta(Rh),xh=R({},hl,{newState:0,oldState:0}),nu=ta(xh),Hc=[9,13,27,32],au=ui&&"CompositionEvent"in window,Fr=null;ui&&"documentMode"in document&&(Fr=document.documentMode);var Nh=ui&&"TextEvent"in window&&!Fr,iu=ui&&(!au||Fr&&8<Fr&&11>=Fr),lu=" ",jc=!1;function ru(t,e){switch(t){case"keyup":return Hc.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ks(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function Dh(t,e){switch(t){case"compositionend":return ks(e);case"keypress":return e.which!==32?null:(jc=!0,lu);case"textInput":return t=e.data,t===lu&&jc?null:t;default:return null}}function Lc(t,e){if(ml)return t==="compositionend"||!au&&ru(t,e)?(t=Dc(),Zr=Fo=Li=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iu&&e.locale!=="ko"?null:e.data;default:return null}}var zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zh[t.type]:e==="textarea"}function su(t,e,l,u){ji?oi?oi.push(u):oi=[u]:ji=u,e=Td(e,"onChange"),0<e.length&&(l=new Wo("onChange","change",null,l,u),t.push({event:l,listeners:e}))}var Ws=null,kr=null;function _a(t){eg(t,0)}function $s(t){var e=Pr(t);if(Ec(e))return t}function ou(t,e){if(t==="change")return e}var wc=!1;if(ui){var uu;if(ui){var to="oninput"in document;if(!to){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),to=typeof cu.oninput=="function"}uu=to}else uu=!1;wc=uu&&(!document.documentMode||9<document.documentMode)}function Yc(){Ws&&(Ws.detachEvent("onpropertychange",eo),kr=Ws=null)}function eo(t){if(t.propertyName==="value"&&$s(kr)){var e=[];su(e,kr,t,Io(t)),Nc(_a,e)}}function no(t,e,l){t==="focusin"?(Yc(),Ws=e,kr=l,Ws.attachEvent("onpropertychange",eo)):t==="focusout"&&Yc()}function on(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $s(kr)}function g0(t,e){if(t==="click")return $s(e)}function m0(t,e){if(t==="input"||t==="change")return $s(e)}function Uh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:Uh;function Ya(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var l=Object.keys(t),u=Object.keys(e);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var v=l[u];if(!Nt.call(e,v)||!Ln(t[v],e[v]))return!1}return!0}function qc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vc(t,e){var l=qc(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=e&&u>=e)return{node:l,offset:e-t};t=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=qc(l)}}function Wr(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wr(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ia(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=qs(t.document);e instanceof t.HTMLIFrameElement;){try{var l=typeof e.contentWindow.location.href=="string"}catch{l=!1}if(l)t=e.contentWindow;else break;e=qs(t.document)}return e}function fu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Pc=ui&&"documentMode"in document&&11>=document.documentMode,Jl=null,ao=null,Fl=null,$r=!1;function Xc(t,e,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$r||Jl==null||Jl!==qs(u)||(u=Jl,"selectionStart"in u&&fu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&Ya(Fl,u)||(Fl=u,u=Td(ao,"onSelect"),0<u.length&&(e=new Wo("onSelect","select",null,e,l),t.push({event:e,listeners:u}),e.target=Jl)))}function vl(t,e){var l={};return l[t.toLowerCase()]=e.toLowerCase(),l["Webkit"+t]="webkit"+e,l["Moz"+t]="moz"+e,l}var ts={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionrun:vl("Transition","TransitionRun"),transitionstart:vl("Transition","TransitionStart"),transitioncancel:vl("Transition","TransitionCancel"),transitionend:vl("Transition","TransitionEnd")},hu={},Qc={};ui&&(Qc=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function wn(t){if(hu[t])return hu[t];if(!ts[t])return t;var e=ts[t],l;for(l in e)if(e.hasOwnProperty(l)&&l in Qc)return hu[t]=e[l];return t}var du=wn("animationend"),Kc=wn("animationiteration"),Gh=wn("animationstart"),Ic=wn("transitionrun"),ea=wn("transitionstart"),Bh=wn("transitioncancel"),na=wn("transitionend"),Zc=new Map,fi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fi.push("scrollEnd");function Yn(t,e){Zc.set(t,e),Hi(e,[t])}var Za=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},da=[],yl=0,qa=0;function io(){for(var t=yl,e=qa=yl=0;e<t;){var l=da[e];da[e++]=null;var u=da[e];da[e++]=null;var v=da[e];da[e++]=null;var C=da[e];if(da[e++]=null,u!==null&&v!==null){var V=u.pending;V===null?v.next=v:(v.next=V.next,V.next=v),u.pending=v}C!==0&&Jc(l,v,C)}}function Yi(t,e,l,u){da[yl++]=t,da[yl++]=e,da[yl++]=l,da[yl++]=u,qa|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function kl(t,e,l,u){return Yi(t,e,l,u),lo(t)}function Oa(t,e){return Yi(t,null,null,e),lo(t)}function Jc(t,e,l){t.lanes|=l;var u=t.alternate;u!==null&&(u.lanes|=l);for(var v=!1,C=t.return;C!==null;)C.childLanes|=l,u=C.alternate,u!==null&&(u.childLanes|=l),C.tag===22&&(t=C.stateNode,t===null||t._visibility&1||(v=!0)),t=C,C=C.return;return t.tag===3?(C=t.stateNode,v&&e!==null&&(v=31-Ta(l),t=C.hiddenUpdates,u=t[v],u===null?t[v]=[e]:u.push(e),e.lane=l|536870912),C):null}function lo(t){if(50<Nr)throw Nr=0,Dr=null,Error(r(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var hi={};function Hh(t,e,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,l,u){return new Hh(t,e,l,u)}function pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ja(t,e){var l=t.alternate;return l===null?(l=Jn(t.tag,e,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=e,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,e=t.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function gu(t,e){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,e=l.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function es(t,e,l,u,v,C){var V=0;if(u=t,typeof t=="function")pu(t)&&(V=1);else if(typeof t=="string")V=vv(t,l,P.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case U:return t=Jn(31,l,e,v),t.elementType=U,t.lanes=C,t;case H:return Sl(l.children,v,C,e);case w:V=8,v|=24;break;case Y:return t=Jn(12,l,e,v|2),t.elementType=Y,t.lanes=C,t;case M:return t=Jn(13,l,e,v),t.elementType=M,t.lanes=C,t;case A:return t=Jn(19,l,e,v),t.elementType=A,t.lanes=C,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:V=10;break t;case G:V=9;break t;case j:V=11;break t;case T:V=14;break t;case y:V=16,u=null;break t}V=29,l=Error(r(130,t===null?"null":typeof t,"")),u=null}return e=Jn(V,l,e,v),e.elementType=t,e.type=u,e.lanes=C,e}function Sl(t,e,l,u){return t=Jn(7,t,u,e),t.lanes=l,t}function ro(t,e,l){return t=Jn(6,t,null,e),t.lanes=l,t}function pa(t){var e=Jn(18,null,null,0);return e.stateNode=t,e}function mu(t,e,l){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=l,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ga=new WeakMap;function Ra(t,e){if(typeof t=="object"&&t!==null){var l=ga.get(t);return l!==void 0?l:(e={value:t,source:e,stack:pt(e)},ga.set(t,e),e)}return{value:t,source:e,stack:pt(e)}}var Wl=[],ns=0,Fa=null,as=0,ma=[],qn=0,qi=null,ka=1,Wa="";function di(t,e){Wl[ns++]=as,Wl[ns++]=Fa,Fa=t,as=e}function vu(t,e,l){ma[qn++]=ka,ma[qn++]=Wa,ma[qn++]=qi,qi=t;var u=ka;t=Wa;var v=32-Ta(u)-1;u&=~(1<<v),l+=1;var C=32-Ta(e)+v;if(30<C){var V=v-v%5;C=(u&(1<<V)-1).toString(32),u>>=V,v-=V,ka=1<<32-Ta(e)+v|l<<v|u,Wa=C+t}else ka=1<<C|l<<v|u,Wa=t}function so(t){t.return!==null&&(di(t,1),vu(t,1,0))}function Fc(t){for(;t===Fa;)Fa=Wl[--ns],Wl[ns]=null,as=Wl[--ns],Wl[ns]=null;for(;t===qi;)qi=ma[--qn],ma[qn]=null,Wa=ma[--qn],ma[qn]=null,ka=ma[--qn],ma[qn]=null}function jh(t,e){ma[qn++]=ka,ma[qn++]=Wa,ma[qn++]=qi,ka=e.id,Wa=e.overflow,qi=t}var Vn=null,Pe=null,Ce=!1,Ma=null,aa=!1,yu=Error(r(519));function Vi(t){var e=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw is(Ra(e,t)),yu}function kc(t){var e=t.stateNode,l=t.type,u=t.memoizedProps;switch(e[On]=t,e[Nn]=u,l){case"dialog":Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":case"embed":Ae("load",e);break;case"video":case"audio":for(l=0;l<jf.length;l++)Ae(jf[l],e);break;case"source":Ae("error",e);break;case"img":case"image":case"link":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"input":Ae("invalid",e),Tc(e,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ae("invalid",e);break;case"textarea":Ae("invalid",e),Oc(e,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||e.textContent===""+l||u.suppressHydrationWarning===!0||lg(e.textContent,l)?(u.popover!=null&&(Ae("beforetoggle",e),Ae("toggle",e)),u.onScroll!=null&&Ae("scroll",e),u.onScrollEnd!=null&&Ae("scrollend",e),u.onClick!=null&&(e.onclick=ha),e=!0):e=!1,e||Vi(t,!0)}function Wc(t){for(Vn=t.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:Vn=Vn.return}}function $l(t){if(t!==Vn)return!1;if(!Ce)return Wc(t),Ce=!0,!1;var e=t.tag,l;if((l=e!==3&&e!==27)&&((l=e===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||G0(t.type,t.memoizedProps)),l=!l),l&&Pe&&Vi(t),Wc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Pe=pg(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Pe=pg(t)}else e===27?(e=Pe,Es(t.type)?(t=w0,w0=null,Pe=t):Pe=e):Pe=Vn?Di(t.stateNode.nextSibling):null;return!0}function bl(){Pe=Vn=null,Ce=!1}function tr(){var t=Ma;return t!==null&&(Ke===null?Ke=t:Ke.push.apply(Ke,t),Ma=null),t}function is(t){Ma===null?Ma=[t]:Ma.push(t)}var Su=F(null),Te=null,$a=null;function Cl(t,e,l){at(Su,e._currentValue),e._currentValue=l}function pi(t){t._currentValue=Su.current,it(Su)}function $c(t,e,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,u!==null&&(u.childLanes|=e)):u!==null&&(u.childLanes&e)!==e&&(u.childLanes|=e),t===l)break;t=t.return}}function tf(t,e,l,u){var v=t.child;for(v!==null&&(v.return=t);v!==null;){var C=v.dependencies;if(C!==null){var V=v.child;C=C.firstContext;t:for(;C!==null;){var W=C;C=v;for(var st=0;st<e.length;st++)if(W.context===e[st]){C.lanes|=l,W=C.alternate,W!==null&&(W.lanes|=l),$c(C.return,l,t),u||(V=null);break t}C=W.next}}else if(v.tag===18){if(V=v.return,V===null)throw Error(r(341));V.lanes|=l,C=V.alternate,C!==null&&(C.lanes|=l),$c(V,l,t),V=null}else V=v.child;if(V!==null)V.return=v;else for(V=v;V!==null;){if(V===t){V=null;break}if(v=V.sibling,v!==null){v.return=V.return,V=v;break}V=V.return}v=V}}function ls(t,e,l,u){t=null;for(var v=e,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var V=v.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var W=v.type;Ln(v.pendingProps.value,V.value)||(t!==null?t.push(W):t=[W])}}else if(v===et.current){if(V=v.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(t!==null?t.push(Vf):t=[Vf])}v=v.return}t!==null&&tf(e,t,l,u),e.flags|=262144}function bu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pi(t){Te=t,$a=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Fe(t){return uo(Te,t)}function oo(t,e){return Te===null&&Pi(t),uo(t,e)}function uo(t,e){var l=e._currentValue;if(e={context:e,memoizedValue:l,next:null},$a===null){if(t===null)throw Error(r(308));$a=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else $a=$a.next=e;return l}var er=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(l,u){t.push(u)}};this.abort=function(){e.aborted=!0,t.forEach(function(l){return l()})}},ef=d.unstable_scheduleCallback,nf=d.unstable_NormalPriority,bn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cu(){return{controller:new er,data:new Map,refCount:0}}function rs(t){t.refCount--,t.refCount===0&&ef(nf,function(){t.controller.abort()})}var ss=null,Eu=0,nr=0,El=null;function be(t,e){if(ss===null){var l=ss=[];Eu=0,nr=_0(),El={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Eu++,e.then(Lh,Lh),e}function Lh(){if(--Eu===0&&ss!==null){El!==null&&(El.status="fulfilled");var t=ss;ss=null,nr=0,El=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function xa(t,e){var l=[],u={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return t.then(function(){u.status="fulfilled",u.value=e;for(var v=0;v<l.length;v++)(0,l[v])(e)},function(v){for(u.status="rejected",u.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),u}var Tu=x.S;x.S=function(t,e){Fu=re(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&be(t,e),Tu!==null&&Tu(t,e)};var ar=F(null);function os(){var t=ar.current;return t!==null?t:me.pooledCache}function Xi(t,e){e===null?at(ar,ar.current):at(ar,e.pool)}function ir(){var t=os();return t===null?null:{parent:bn._currentValue,pool:t}}var lr=Error(r(460)),co=Error(r(474)),Au=Error(r(542)),fo={then:function(){}};function Qi(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(t,e,l){switch(l=t[l],l===void 0?t.push(e):l!==e&&(e.then(ha,ha),e=l),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Zi(t),t;default:if(typeof e.status=="string")e.then(ha,ha);else{if(t=me,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=e,t.status="pending",t.then(function(u){if(e.status==="pending"){var v=e;v.status="fulfilled",v.value=u}},function(u){if(e.status==="pending"){var v=e;v.status="rejected",v.reason=u}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Zi(t),t}throw Ii=e,lr}}function Ki(t){try{var e=t._init;return e(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ii=l,lr):l}}var Ii=null;function Ou(){if(Ii===null)throw Error(r(459));var t=Ii;return Ii=null,t}function Zi(t){if(t===lr||t===Au)throw Error(r(483))}var Tl=null,ho=0;function po(t){var e=ho;return ho+=1,Tl===null&&(Tl=[]),_u(Tl,t,e)}function go(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function rr(t,e){throw e.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(e),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function te(t){function e(ht,ut){if(t){var mt=ht.deletions;mt===null?(ht.deletions=[ut],ht.flags|=16):mt.push(ut)}}function l(ht,ut){if(!t)return null;for(;ut!==null;)e(ht,ut),ut=ut.sibling;return null}function u(ht){for(var ut=new Map;ht!==null;)ht.key!==null?ut.set(ht.key,ht):ut.set(ht.index,ht),ht=ht.sibling;return ut}function v(ht,ut){return ht=Ja(ht,ut),ht.index=0,ht.sibling=null,ht}function C(ht,ut,mt){return ht.index=mt,t?(mt=ht.alternate,mt!==null?(mt=mt.index,mt<ut?(ht.flags|=67108866,ut):mt):(ht.flags|=67108866,ut)):(ht.flags|=1048576,ut)}function V(ht){return t&&ht.alternate===null&&(ht.flags|=67108866),ht}function W(ht,ut,mt,Rt){return ut===null||ut.tag!==6?(ut=ro(mt,ht.mode,Rt),ut.return=ht,ut):(ut=v(ut,mt),ut.return=ht,ut)}function st(ht,ut,mt,Rt){var $t=mt.type;return $t===H?_t(ht,ut,mt.props.children,Rt,mt.key):ut!==null&&(ut.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===y&&Ki($t)===ut.type)?(ut=v(ut,mt.props),go(ut,mt),ut.return=ht,ut):(ut=es(mt.type,mt.key,mt.props,null,ht.mode,Rt),go(ut,mt),ut.return=ht,ut)}function vt(ht,ut,mt,Rt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==mt.containerInfo||ut.stateNode.implementation!==mt.implementation?(ut=mu(mt,ht.mode,Rt),ut.return=ht,ut):(ut=v(ut,mt.children||[]),ut.return=ht,ut)}function _t(ht,ut,mt,Rt,$t){return ut===null||ut.tag!==7?(ut=Sl(mt,ht.mode,Rt,$t),ut.return=ht,ut):(ut=v(ut,mt),ut.return=ht,ut)}function xt(ht,ut,mt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ut=ro(""+ut,ht.mode,mt),ut.return=ht,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case z:return mt=es(ut.type,ut.key,ut.props,null,ht.mode,mt),go(mt,ut),mt.return=ht,mt;case S:return ut=mu(ut,ht.mode,mt),ut.return=ht,ut;case y:return ut=Ki(ut),xt(ht,ut,mt)}if(X(ut)||I(ut))return ut=Sl(ut,ht.mode,mt,null),ut.return=ht,ut;if(typeof ut.then=="function")return xt(ht,po(ut),mt);if(ut.$$typeof===D)return xt(ht,oo(ht,ut),mt);rr(ht,ut)}return null}function bt(ht,ut,mt,Rt){var $t=ut!==null?ut.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return $t!==null?null:W(ht,ut,""+mt,Rt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case z:return mt.key===$t?st(ht,ut,mt,Rt):null;case S:return mt.key===$t?vt(ht,ut,mt,Rt):null;case y:return mt=Ki(mt),bt(ht,ut,mt,Rt)}if(X(mt)||I(mt))return $t!==null?null:_t(ht,ut,mt,Rt,null);if(typeof mt.then=="function")return bt(ht,ut,po(mt),Rt);if(mt.$$typeof===D)return bt(ht,ut,oo(ht,mt),Rt);rr(ht,mt)}return null}function Tt(ht,ut,mt,Rt,$t){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return ht=ht.get(mt)||null,W(ut,ht,""+Rt,$t);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case z:return ht=ht.get(Rt.key===null?mt:Rt.key)||null,st(ut,ht,Rt,$t);case S:return ht=ht.get(Rt.key===null?mt:Rt.key)||null,vt(ut,ht,Rt,$t);case y:return Rt=Ki(Rt),Tt(ht,ut,mt,Rt,$t)}if(X(Rt)||I(Rt))return ht=ht.get(mt)||null,_t(ut,ht,Rt,$t,null);if(typeof Rt.then=="function")return Tt(ht,ut,mt,po(Rt),$t);if(Rt.$$typeof===D)return Tt(ht,ut,mt,oo(ut,Rt),$t);rr(ut,Rt)}return null}function It(ht,ut,mt,Rt){for(var $t=null,Be=null,Jt=ut,Se=ut=0,_e=null;Jt!==null&&Se<mt.length;Se++){Jt.index>Se?(_e=Jt,Jt=null):_e=Jt.sibling;var He=bt(ht,Jt,mt[Se],Rt);if(He===null){Jt===null&&(Jt=_e);break}t&&Jt&&He.alternate===null&&e(ht,Jt),ut=C(He,ut,Se),Be===null?$t=He:Be.sibling=He,Be=He,Jt=_e}if(Se===mt.length)return l(ht,Jt),Ce&&di(ht,Se),$t;if(Jt===null){for(;Se<mt.length;Se++)Jt=xt(ht,mt[Se],Rt),Jt!==null&&(ut=C(Jt,ut,Se),Be===null?$t=Jt:Be.sibling=Jt,Be=Jt);return Ce&&di(ht,Se),$t}for(Jt=u(Jt);Se<mt.length;Se++)_e=Tt(Jt,ht,Se,mt[Se],Rt),_e!==null&&(t&&_e.alternate!==null&&Jt.delete(_e.key===null?Se:_e.key),ut=C(_e,ut,Se),Be===null?$t=_e:Be.sibling=_e,Be=_e);return t&&Jt.forEach(function(Rs){return e(ht,Rs)}),Ce&&di(ht,Se),$t}function le(ht,ut,mt,Rt){if(mt==null)throw Error(r(151));for(var $t=null,Be=null,Jt=ut,Se=ut=0,_e=null,He=mt.next();Jt!==null&&!He.done;Se++,He=mt.next()){Jt.index>Se?(_e=Jt,Jt=null):_e=Jt.sibling;var Rs=bt(ht,Jt,He.value,Rt);if(Rs===null){Jt===null&&(Jt=_e);break}t&&Jt&&Rs.alternate===null&&e(ht,Jt),ut=C(Rs,ut,Se),Be===null?$t=Rs:Be.sibling=Rs,Be=Rs,Jt=_e}if(He.done)return l(ht,Jt),Ce&&di(ht,Se),$t;if(Jt===null){for(;!He.done;Se++,He=mt.next())He=xt(ht,He.value,Rt),He!==null&&(ut=C(He,ut,Se),Be===null?$t=He:Be.sibling=He,Be=He);return Ce&&di(ht,Se),$t}for(Jt=u(Jt);!He.done;Se++,He=mt.next())He=Tt(Jt,ht,Se,He.value,Rt),He!==null&&(t&&He.alternate!==null&&Jt.delete(He.key===null?Se:He.key),ut=C(He,ut,Se),Be===null?$t=He:Be.sibling=He,Be=He);return t&&Jt.forEach(function(Mv){return e(ht,Mv)}),Ce&&di(ht,Se),$t}function Ze(ht,ut,mt,Rt){if(typeof mt=="object"&&mt!==null&&mt.type===H&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case z:t:{for(var $t=mt.key;ut!==null;){if(ut.key===$t){if($t=mt.type,$t===H){if(ut.tag===7){l(ht,ut.sibling),Rt=v(ut,mt.props.children),Rt.return=ht,ht=Rt;break t}}else if(ut.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===y&&Ki($t)===ut.type){l(ht,ut.sibling),Rt=v(ut,mt.props),go(Rt,mt),Rt.return=ht,ht=Rt;break t}l(ht,ut);break}else e(ht,ut);ut=ut.sibling}mt.type===H?(Rt=Sl(mt.props.children,ht.mode,Rt,mt.key),Rt.return=ht,ht=Rt):(Rt=es(mt.type,mt.key,mt.props,null,ht.mode,Rt),go(Rt,mt),Rt.return=ht,ht=Rt)}return V(ht);case S:t:{for($t=mt.key;ut!==null;){if(ut.key===$t)if(ut.tag===4&&ut.stateNode.containerInfo===mt.containerInfo&&ut.stateNode.implementation===mt.implementation){l(ht,ut.sibling),Rt=v(ut,mt.children||[]),Rt.return=ht,ht=Rt;break t}else{l(ht,ut);break}else e(ht,ut);ut=ut.sibling}Rt=mu(mt,ht.mode,Rt),Rt.return=ht,ht=Rt}return V(ht);case y:return mt=Ki(mt),Ze(ht,ut,mt,Rt)}if(X(mt))return It(ht,ut,mt,Rt);if(I(mt)){if($t=I(mt),typeof $t!="function")throw Error(r(150));return mt=$t.call(mt),le(ht,ut,mt,Rt)}if(typeof mt.then=="function")return Ze(ht,ut,po(mt),Rt);if(mt.$$typeof===D)return Ze(ht,ut,oo(ht,mt),Rt);rr(ht,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,ut!==null&&ut.tag===6?(l(ht,ut.sibling),Rt=v(ut,mt),Rt.return=ht,ht=Rt):(l(ht,ut),Rt=ro(mt,ht.mode,Rt),Rt.return=ht,ht=Rt),V(ht)):l(ht,ut)}return function(ht,ut,mt,Rt){try{ho=0;var $t=Ze(ht,ut,mt,Rt);return Tl=null,$t}catch(Jt){if(Jt===lr||Jt===Au)throw Jt;var Be=Jn(29,Jt,null,ht.mode);return Be.lanes=Rt,Be.return=ht,Be}finally{}}}var sr=te(!0),wh=te(!1),Ji=!1;function or(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Al(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function _l(t,e,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(ae&2)!==0){var v=u.pending;return v===null?e.next=e:(e.next=v.next,v.next=e),u.pending=e,e=lo(t),Jc(t,null,l),e}return Yi(t,u,e,l),lo(t)}function mo(t,e,l){if(e=e.updateQueue,e!==null&&(e=e.shared,(l&4194048)!==0)){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,Cc(t,l)}}function lf(t,e){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var v=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var V={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};C===null?v=C=V:C=C.next=V,l=l.next}while(l!==null);C===null?v=C=e:C=C.next=e}else v=C=e;l={baseState:u.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:u.shared,callbacks:u.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=e:t.next=e,l.lastBaseUpdate=e}var vo=!1;function us(){if(vo){var t=El;if(t!==null)throw t}}function Ol(t,e,l,u){vo=!1;var v=t.updateQueue;Ji=!1;var C=v.firstBaseUpdate,V=v.lastBaseUpdate,W=v.shared.pending;if(W!==null){v.shared.pending=null;var st=W,vt=st.next;st.next=null,V===null?C=vt:V.next=vt,V=st;var _t=t.alternate;_t!==null&&(_t=_t.updateQueue,W=_t.lastBaseUpdate,W!==V&&(W===null?_t.firstBaseUpdate=vt:W.next=vt,_t.lastBaseUpdate=st))}if(C!==null){var xt=v.baseState;V=0,_t=vt=st=null,W=C;do{var bt=W.lane&-536870913,Tt=bt!==W.lane;if(Tt?(pe&bt)===bt:(u&bt)===bt){bt!==0&&bt===nr&&(vo=!0),_t!==null&&(_t=_t.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});t:{var It=t,le=W;bt=e;var Ze=l;switch(le.tag){case 1:if(It=le.payload,typeof It=="function"){xt=It.call(Ze,xt,bt);break t}xt=It;break t;case 3:It.flags=It.flags&-65537|128;case 0:if(It=le.payload,bt=typeof It=="function"?It.call(Ze,xt,bt):It,bt==null)break t;xt=R({},xt,bt);break t;case 2:Ji=!0}}bt=W.callback,bt!==null&&(t.flags|=64,Tt&&(t.flags|=8192),Tt=v.callbacks,Tt===null?v.callbacks=[bt]:Tt.push(bt))}else Tt={lane:bt,tag:W.tag,payload:W.payload,callback:W.callback,next:null},_t===null?(vt=_t=Tt,st=xt):_t=_t.next=Tt,V|=bt;if(W=W.next,W===null){if(W=v.shared.pending,W===null)break;Tt=W,W=Tt.next,Tt.next=null,v.lastBaseUpdate=Tt,v.shared.pending=null}}while(!0);_t===null&&(st=xt),v.baseState=st,v.firstBaseUpdate=vt,v.lastBaseUpdate=_t,C===null&&(v.shared.lanes=0),Gl|=V,t.lanes=V,t.memoizedState=xt}}function rf(t,e){if(typeof t!="function")throw Error(r(191,t));t.call(e)}function Yh(t,e){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)rf(l[t],e)}var cs=F(null),gi=F(0);function mi(t,e){t=Qa,at(gi,t),at(cs,e),Qa=t|e.baseLanes}function zn(){at(gi,Qa),at(cs,cs.current)}function vi(){Qa=gi.current,it(cs),it(gi)}var en=F(null),Va=null;function Rl(t){var e=t.alternate;at(dn,dn.current&1),at(en,t),Va===null&&(e===null||cs.current!==null||e.memoizedState!==null)&&(Va=t)}function Cn(t){at(dn,dn.current),at(en,t),Va===null&&(Va=t)}function yi(t){t.tag===22?(at(dn,dn.current),at(en,t),Va===null&&(Va=t)):Ml()}function Ml(){at(dn,dn.current),at(en,en.current)}function Na(t){it(en),Va===t&&(Va=null),it(dn)}var dn=F(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var l=e.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||j0(l)||L0(l)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Si=0,fe=null,je=null,En=null,Fi=!1,Pa=!1,ur=!1,Mu=0,yo=0,bi=null,v0=0;function fn(){throw Error(r(321))}function sf(t,e){if(e===null)return!1;for(var l=0;l<e.length&&l<t.length;l++)if(!Ln(t[l],e[l]))return!1;return!0}function cr(t,e,l,u,v,C){return Si=C,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,x.H=t===null||t.memoizedState===null?fr:Eo,ur=!1,C=l(u,v),ur=!1,Pa&&(C=Vh(e,l,u,v)),qh(t),C}function qh(t){x.H=hs;var e=je!==null&&je.next!==null;if(Si=0,En=je=fe=null,Fi=!1,yo=0,bi=null,e)throw Error(r(300));t===null||Tn||(t=t.dependencies,t!==null&&bu(t)&&(Tn=!0))}function Vh(t,e,l,u){fe=t;var v=0;do{if(Pa&&(bi=null),yo=0,Pa=!1,25<=v)throw Error(r(301));if(v+=1,En=je=null,t.updateQueue!=null){var C=t.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}x.H=hr,C=e(l,u)}while(Pa);return C}function y0(){var t=x.H,e=t.useState()[0];return e=typeof e.then=="function"?So(e):e,t=t.useState()[0],(je!==null?je.memoizedState:null)!==t&&(fe.flags|=1024),e}function of(){var t=Mu!==0;return Mu=0,t}function uf(t,e,l){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l}function cf(t){if(Fi){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Fi=!1}Si=0,En=je=fe=null,Pa=!1,yo=Mu=0,bi=null}function ia(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?fe.memoizedState=En=t:En=En.next=t,En}function pn(){if(je===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=En===null?fe.memoizedState:En.next;if(e!==null)En=e,je=t;else{if(t===null)throw fe.alternate===null?Error(r(467)):Error(r(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},En===null?fe.memoizedState=En=t:En=En.next=t}return En}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(t){var e=yo;return yo+=1,bi===null&&(bi=[]),t=_u(bi,t,e),e=fe,(En===null?e.memoizedState:En.next)===null&&(e=e.alternate,x.H=e===null||e.memoizedState===null?fr:Eo),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return So(t);if(t.$$typeof===D)return Fe(t)}throw Error(r(438,String(t)))}function ff(t){var e=null,l=fe.updateQueue;if(l!==null&&(e=l.memoCache),e==null){var u=fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(e={data:u.data.map(function(v){return v.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),l===null&&(l=xu(),fe.updateQueue=l),l.memoCache=e,l=e.data[e.index],l===void 0)for(l=e.data[e.index]=Array(t),u=0;u<t;u++)l[u]=N;return e.index++,l}function Ci(t,e){return typeof e=="function"?e(t):e}function Du(t){var e=pn();return hf(e,je,t)}function hf(t,e,l){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var v=t.baseQueue,C=u.pending;if(C!==null){if(v!==null){var V=v.next;v.next=C.next,C.next=V}e.baseQueue=v=C,u.pending=null}if(C=t.baseState,v===null)t.memoizedState=C;else{e=v.next;var W=V=null,st=null,vt=e,_t=!1;do{var xt=vt.lane&-536870913;if(xt!==vt.lane?(pe&xt)===xt:(Si&xt)===xt){var bt=vt.revertLane;if(bt===0)st!==null&&(st=st.next={lane:0,revertLane:0,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),xt===nr&&(_t=!0);else if((Si&bt)===bt){vt=vt.next,bt===nr&&(_t=!0);continue}else xt={lane:0,revertLane:vt.revertLane,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},st===null?(W=st=xt,V=C):st=st.next=xt,fe.lanes|=bt,Gl|=bt;xt=vt.action,ur&&l(C,xt),C=vt.hasEagerState?vt.eagerState:l(C,xt)}else bt={lane:xt,revertLane:vt.revertLane,gesture:vt.gesture,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},st===null?(W=st=bt,V=C):st=st.next=bt,fe.lanes|=xt,Gl|=xt;vt=vt.next}while(vt!==null&&vt!==e);if(st===null?V=C:st.next=W,!Ln(C,t.memoizedState)&&(Tn=!0,_t&&(l=El,l!==null)))throw l;t.memoizedState=C,t.baseState=V,t.baseQueue=st,u.lastRenderedState=C}return v===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function df(t){var e=pn(),l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var u=l.dispatch,v=l.pending,C=e.memoizedState;if(v!==null){l.pending=null;var V=v=v.next;do C=t(C,V.action),V=V.next;while(V!==v);Ln(C,e.memoizedState)||(Tn=!0),e.memoizedState=C,e.baseQueue===null&&(e.baseState=C),l.lastRenderedState=C}return[C,u]}function Ph(t,e,l){var u=fe,v=pn(),C=Ce;if(C){if(l===void 0)throw Error(r(407));l=l()}else l=e();var V=!Ln((je||v).memoizedState,l);if(V&&(v.memoizedState=l,Tn=!0),v=v.queue,Sf(pf.bind(null,u,v,t),[t]),v.getSnapshot!==e||V||En!==null&&En.memoizedState.tag&1){if(u.flags|=2048,fs(9,{destroy:void 0},Qh.bind(null,u,v,l,e),null),me===null)throw Error(r(349));C||(Si&127)!==0||Xh(u,e,l)}return l}function Xh(t,e,l){t.flags|=16384,t={getSnapshot:e,value:l},e=fe.updateQueue,e===null?(e=xu(),fe.updateQueue=e,e.stores=[t]):(l=e.stores,l===null?e.stores=[t]:l.push(t))}function Qh(t,e,l,u){e.value=l,e.getSnapshot=u,gf(e)&&Kh(t)}function pf(t,e,l){return l(function(){gf(e)&&Kh(t)})}function gf(t){var e=t.getSnapshot;t=t.value;try{var l=e();return!Ln(t,l)}catch{return!0}}function Kh(t){var e=Oa(t,2);e!==null&&Ge(e,t,2)}function zu(t){var e=ia();if(typeof t=="function"){var l=t;if(t=l(),ur){ri(!0);try{l()}finally{ri(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},e}function mf(t,e,l,u){return t.baseState=l,hf(t,je,typeof u=="function"?u:Ci)}function Ih(t,e,l,u,v){if(Co(t))throw Error(r(485));if(t=e.action,t!==null){var C={payload:v,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){C.listeners.push(V)}};x.T!==null?l(!0):C.isTransition=!1,u(C),l=e.pending,l===null?(C.next=e.pending=C,Uu(e,C)):(C.next=l.next,e.pending=l.next=C)}}function Uu(t,e){var l=e.action,u=e.payload,v=t.state;if(e.isTransition){var C=x.T,V={};x.T=V;try{var W=l(v,u),st=x.S;st!==null&&st(V,W),Gu(t,e,W)}catch(vt){vf(t,e,vt)}finally{C!==null&&V.types!==null&&(C.types=V.types),x.T=C}}else try{C=l(v,u),Gu(t,e,C)}catch(vt){vf(t,e,vt)}}function Gu(t,e,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Zh(t,e,u)},function(u){return vf(t,e,u)}):Zh(t,e,l)}function Zh(t,e,l){e.status="fulfilled",e.value=l,Jh(e),t.state=l,e=t.pending,e!==null&&(l=e.next,l===e?t.pending=null:(l=l.next,e.next=l,Uu(t,l)))}function vf(t,e,l){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do e.status="rejected",e.reason=l,Jh(e),e=e.next;while(e!==u)}t.action=null}function Jh(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Fh(t,e){return e}function yf(t,e){if(Ce){var l=me.formState;if(l!==null){t:{var u=fe;if(Ce){if(Pe){e:{for(var v=Pe,C=aa;v.nodeType!==8;){if(!C){v=null;break e}if(v=Di(v.nextSibling),v===null){v=null;break e}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){Pe=Di(v.nextSibling),u=v.data==="F!";break t}}Vi(u)}u=!1}u&&(e=l[0])}}return l=ia(),l.memoizedState=l.baseState=e,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fh,lastRenderedState:e},l.queue=u,l=Tf.bind(null,fe,u),u.dispatch=l,u=zu(!1),C=gn.bind(null,fe,!1,u.queue),u=ia(),v={state:e,dispatch:null,action:t,pending:null},u.queue=v,l=Ih.bind(null,fe,v,C,l),v.dispatch=l,u.memoizedState=t,[e,l,!1]}function kh(t){var e=pn();return Wh(e,je,t)}function Wh(t,e,l){if(e=hf(t,e,Fh)[0],t=Du(Ci)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var u=So(e)}catch(V){throw V===lr?Au:V}else u=e;e=pn();var v=e.queue,C=v.dispatch;return l!==e.memoizedState&&(fe.flags|=2048,fs(9,{destroy:void 0},S0.bind(null,v,l),null)),[u,C,t]}function S0(t,e){t.action=e}function $h(t){var e=pn(),l=je;if(l!==null)return Wh(e,l,t);pn(),e=e.memoizedState,l=pn();var u=l.queue.dispatch;return l.memoizedState=t,[e,u,!1]}function fs(t,e,l,u){return t={tag:t,create:l,deps:u,inst:e,next:null},e=fe.updateQueue,e===null&&(e=xu(),fe.updateQueue=e),l=e.lastEffect,l===null?e.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,e.lastEffect=t),t}function td(){return pn().memoizedState}function Bu(t,e,l,u){var v=ia();fe.flags|=t,v.memoizedState=fs(1|e,{destroy:void 0},l,u===void 0?null:u)}function Hu(t,e,l,u){var v=pn();u=u===void 0?null:u;var C=v.memoizedState.inst;je!==null&&u!==null&&sf(u,je.memoizedState.deps)?v.memoizedState=fs(e,C,l,u):(fe.flags|=t,v.memoizedState=fs(1|e,C,l,u))}function ed(t,e){Bu(8390656,8,t,e)}function Sf(t,e){Hu(2048,8,t,e)}function b0(t){fe.flags|=4;var e=fe.updateQueue;if(e===null)e=xu(),fe.updateQueue=e,e.events=[t];else{var l=e.events;l===null?e.events=[t]:l.push(t)}}function nd(t){var e=pn().memoizedState;return b0({ref:e,nextImpl:t}),function(){if((ae&2)!==0)throw Error(r(440));return e.impl.apply(void 0,arguments)}}function ad(t,e){return Hu(4,2,t,e)}function id(t,e){return Hu(4,4,t,e)}function ld(t,e){if(typeof e=="function"){t=t();var l=e(t);return function(){typeof l=="function"?l():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rd(t,e,l){l=l!=null?l.concat([t]):null,Hu(4,4,ld.bind(null,e,t),l)}function ju(){}function sd(t,e){var l=pn();e=e===void 0?null:e;var u=l.memoizedState;return e!==null&&sf(e,u[1])?u[0]:(l.memoizedState=[t,e],t)}function od(t,e){var l=pn();e=e===void 0?null:e;var u=l.memoizedState;if(e!==null&&sf(e,u[1]))return u[0];if(u=t(),ur){ri(!0);try{t()}finally{ri(!1)}}return l.memoizedState=[u,e],u}function Da(t,e,l){return l===void 0||(Si&1073741824)!==0&&(pe&261930)===0?t.memoizedState=e:(t.memoizedState=l,t=al(),fe.lanes|=t,Gl|=t,l)}function bf(t,e,l,u){return Ln(l,e)?l:cs.current!==null?(t=Da(t,l,u),Ln(t,e)||(Tn=!0),t):(Si&42)===0||(Si&1073741824)!==0&&(pe&261930)===0?(Tn=!0,t.memoizedState=l):(t=al(),fe.lanes|=t,Gl|=t,e)}function Lu(t,e,l,u,v){var C=L.p;L.p=C!==0&&8>C?C:8;var V=x.T,W={};x.T=W,gn(t,!1,e,l);try{var st=v(),vt=x.S;if(vt!==null&&vt(W,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var _t=xa(st,u);bo(t,e,_t,$n(t))}else bo(t,e,u,$n(t))}catch(xt){bo(t,e,{then:function(){},status:"rejected",reason:xt},$n())}finally{L.p=C,V!==null&&W.types!==null&&(V.types=W.types),x.T=V}}function ud(){}function wu(t,e,l,u){if(t.tag!==5)throw Error(r(476));var v=Cf(t).queue;Lu(t,v,e,Q,l===null?ud:function(){return cd(t),l(u)})}function Cf(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:Q},next:null};var l={};return e.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:l},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function cd(t){var e=Cf(t);e.next===null&&(e=t.alternate.memoizedState),bo(t,e.next.queue,{},$n())}function Yu(){return Fe(Vf)}function Ef(){return pn().memoizedState}function fd(){return pn().memoizedState}function C0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var l=$n();t=Al(l);var u=_l(e,t,l);u!==null&&(Ge(u,e,l),mo(u,e,l)),e={cache:Cu()},t.payload=e;return}e=e.return}}function E0(t,e,l){var u=$n();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Co(t)?hd(e,l):(l=kl(t,e,l,u),l!==null&&(Ge(l,t,u),Af(l,e,u)))}function Tf(t,e,l){var u=$n();bo(t,e,l,u)}function bo(t,e,l,u){var v={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Co(t))hd(e,v);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=e.lastRenderedReducer,C!==null))try{var V=e.lastRenderedState,W=C(V,l);if(v.hasEagerState=!0,v.eagerState=W,Ln(W,V))return Yi(t,e,v,0),me===null&&io(),!1}catch{}finally{}if(l=kl(t,e,v,u),l!==null)return Ge(l,t,u),Af(l,e,u),!0}return!1}function gn(t,e,l,u){if(u={lane:2,revertLane:_0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Co(t)){if(e)throw Error(r(479))}else e=kl(t,l,u,2),e!==null&&Ge(e,t,2)}function Co(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function hd(t,e){Pa=Fi=!0;var l=t.pending;l===null?e.next=e:(e.next=l.next,l.next=e),t.pending=e}function Af(t,e,l){if((l&4194048)!==0){var u=e.lanes;u&=t.pendingLanes,l|=u,e.lanes=l,Cc(t,l)}}var hs={readContext:Fe,use:Nu,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};hs.useEffectEvent=fn;var fr={readContext:Fe,use:Nu,useCallback:function(t,e){return ia().memoizedState=[t,e===void 0?null:e],t},useContext:Fe,useEffect:ed,useImperativeHandle:function(t,e,l){l=l!=null?l.concat([t]):null,Bu(4194308,4,ld.bind(null,e,t),l)},useLayoutEffect:function(t,e){return Bu(4194308,4,t,e)},useInsertionEffect:function(t,e){Bu(4,2,t,e)},useMemo:function(t,e){var l=ia();e=e===void 0?null:e;var u=t();if(ur){ri(!0);try{t()}finally{ri(!1)}}return l.memoizedState=[u,e],u},useReducer:function(t,e,l){var u=ia();if(l!==void 0){var v=l(e);if(ur){ri(!0);try{l(e)}finally{ri(!1)}}}else v=e;return u.memoizedState=u.baseState=v,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:v},u.queue=t,t=t.dispatch=E0.bind(null,fe,t),[u.memoizedState,t]},useRef:function(t){var e=ia();return t={current:t},e.memoizedState=t},useState:function(t){t=zu(t);var e=t.queue,l=Tf.bind(null,fe,e);return e.dispatch=l,[t.memoizedState,l]},useDebugValue:ju,useDeferredValue:function(t,e){var l=ia();return Da(l,t,e)},useTransition:function(){var t=zu(!1);return t=Lu.bind(null,fe,t.queue,!0,!1),ia().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,l){var u=fe,v=ia();if(Ce){if(l===void 0)throw Error(r(407));l=l()}else{if(l=e(),me===null)throw Error(r(349));(pe&127)!==0||Xh(u,e,l)}v.memoizedState=l;var C={value:l,getSnapshot:e};return v.queue=C,ed(pf.bind(null,u,C,t),[t]),u.flags|=2048,fs(9,{destroy:void 0},Qh.bind(null,u,C,l,e),null),l},useId:function(){var t=ia(),e=me.identifierPrefix;if(Ce){var l=Wa,u=ka;l=(u&~(1<<32-Ta(u)-1)).toString(32)+l,e="_"+e+"R_"+l,l=Mu++,0<l&&(e+="H"+l.toString(32)),e+="_"}else l=v0++,e="_"+e+"r_"+l.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Yu,useFormState:yf,useActionState:yf,useOptimistic:function(t){var e=ia();e.memoizedState=e.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=l,e=gn.bind(null,fe,!0,l),l.dispatch=e,[t,e]},useMemoCache:ff,useCacheRefresh:function(){return ia().memoizedState=C0.bind(null,fe)},useEffectEvent:function(t){var e=ia(),l={impl:t};return e.memoizedState=l,function(){if((ae&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Eo={readContext:Fe,use:Nu,useCallback:sd,useContext:Fe,useEffect:Sf,useImperativeHandle:rd,useInsertionEffect:ad,useLayoutEffect:id,useMemo:od,useReducer:Du,useRef:td,useState:function(){return Du(Ci)},useDebugValue:ju,useDeferredValue:function(t,e){var l=pn();return bf(l,je.memoizedState,t,e)},useTransition:function(){var t=Du(Ci)[0],e=pn().memoizedState;return[typeof t=="boolean"?t:So(t),e]},useSyncExternalStore:Ph,useId:Ef,useHostTransitionStatus:Yu,useFormState:kh,useActionState:kh,useOptimistic:function(t,e){var l=pn();return mf(l,je,t,e)},useMemoCache:ff,useCacheRefresh:fd};Eo.useEffectEvent=nd;var hr={readContext:Fe,use:Nu,useCallback:sd,useContext:Fe,useEffect:Sf,useImperativeHandle:rd,useInsertionEffect:ad,useLayoutEffect:id,useMemo:od,useReducer:df,useRef:td,useState:function(){return df(Ci)},useDebugValue:ju,useDeferredValue:function(t,e){var l=pn();return je===null?Da(l,t,e):bf(l,je.memoizedState,t,e)},useTransition:function(){var t=df(Ci)[0],e=pn().memoizedState;return[typeof t=="boolean"?t:So(t),e]},useSyncExternalStore:Ph,useId:Ef,useHostTransitionStatus:Yu,useFormState:$h,useActionState:$h,useOptimistic:function(t,e){var l=pn();return je!==null?mf(l,je,t,e):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:ff,useCacheRefresh:fd};hr.useEffectEvent=nd;function xl(t,e,l,u){e=t.memoizedState,l=l(u,e),l=l==null?e:R({},e,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var la={enqueueSetState:function(t,e,l){t=t._reactInternals;var u=$n(),v=Al(u);v.payload=e,l!=null&&(v.callback=l),e=_l(t,v,u),e!==null&&(Ge(e,t,u),mo(e,t,u))},enqueueReplaceState:function(t,e,l){t=t._reactInternals;var u=$n(),v=Al(u);v.tag=1,v.payload=e,l!=null&&(v.callback=l),e=_l(t,v,u),e!==null&&(Ge(e,t,u),mo(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var l=$n(),u=Al(l);u.tag=2,e!=null&&(u.callback=e),e=_l(t,u,l),e!==null&&(Ge(e,t,l),mo(e,t,l))}};function dd(t,e,l,u,v,C,V){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,C,V):e.prototype&&e.prototype.isPureReactComponent?!Ya(l,u)||!Ya(v,C):!0}function pd(t,e,l,u){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(l,u),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(l,u),e.state!==t&&la.enqueueReplaceState(e,e.state,null)}function Ei(t,e){var l=e;if("ref"in e){l={};for(var u in e)u!=="ref"&&(l[u]=e[u])}if(t=t.defaultProps){l===e&&(l=R({},l));for(var v in t)l[v]===void 0&&(l[v]=t[v])}return l}function To(t){Za(t)}function Ao(t){console.error(t)}function qu(t){Za(t)}function Vu(t,e){try{var l=t.onUncaughtError;l(e.value,{componentStack:e.stack})}catch(u){setTimeout(function(){throw u})}}function gd(t,e,l){try{var u=t.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function za(t,e,l){return l=Al(l),l.tag=3,l.payload={element:null},l.callback=function(){Vu(t,e)},l}function _f(t){return t=Al(t),t.tag=3,t}function md(t,e,l,u){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var C=u.value;t.payload=function(){return v(C)},t.callback=function(){gd(e,l,u)}}var V=l.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(t.callback=function(){gd(e,l,u),typeof v!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var W=u.stack;this.componentDidCatch(u.value,{componentStack:W!==null?W:""})})}function Of(t,e,l,u,v){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(e=l.alternate,e!==null&&ls(e,l,v,!0),l=en.current,l!==null){switch(l.tag){case 31:case 13:return Va===null?m():l.alternate===null&&Qe===0&&(Qe=3),l.flags&=-257,l.flags|=65536,l.lanes=v,u===fo?l.flags|=16384:(e=l.updateQueue,e===null?l.updateQueue=new Set([u]):e.add(u),Ve(t,u,v)),!1;case 22:return l.flags|=65536,u===fo?l.flags|=16384:(e=l.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=e):(l=e.retryQueue,l===null?e.retryQueue=new Set([u]):l.add(u)),Ve(t,u,v)),!1}throw Error(r(435,l.tag))}return Ve(t,u,v),m(),!1}if(Ce)return e=en.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=v,u!==yu&&(t=Error(r(422),{cause:u}),is(Ra(t,l)))):(u!==yu&&(e=Error(r(423),{cause:u}),is(Ra(e,l))),t=t.current.alternate,t.flags|=65536,v&=-v,t.lanes|=v,u=Ra(u,l),v=za(t.stateNode,u,v),lf(t,v),Qe!==4&&(Qe=2)),!1;var C=Error(r(520),{cause:u});if(C=Ra(C,l),Oe===null?Oe=[C]:Oe.push(C),Qe!==4&&(Qe=2),e===null)return!0;u=Ra(u,l),l=e;do{switch(l.tag){case 3:return l.flags|=65536,t=v&-v,l.lanes|=t,t=za(l.stateNode,u,t),lf(l,t),!1;case 1:if(e=l.type,C=l.stateNode,(l.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ua===null||!ua.has(C))))return l.flags|=65536,v&=-v,l.lanes|=v,v=_f(v),md(v,t,l,u),lf(l,v),!1}l=l.return}while(l!==null);return!1}var Rf=Error(r(461)),Tn=!1;function Pn(t,e,l,u){e.child=t===null?wh(e,null,l,u):sr(e,t.child,l,u)}function ds(t,e,l,u,v){l=l.render;var C=e.ref;if("ref"in u){var V={};for(var W in u)W!=="ref"&&(V[W]=u[W])}else V=u;return Pi(e),u=cr(t,e,l,V,C,v),W=of(),t!==null&&!Tn?(uf(t,e,v),ni(t,e,v)):(Ce&&W&&so(e),e.flags|=1,Pn(t,e,u,v),e.child)}function va(t,e,l,u,v){if(t===null){var C=l.type;return typeof C=="function"&&!pu(C)&&C.defaultProps===void 0&&l.compare===null?(e.tag=15,e.type=C,Pu(t,e,C,u,v)):(t=es(l.type,null,u,e,e.mode,v),t.ref=e.ref,t.return=e,e.child=t)}if(C=t.child,!ra(t,v)){var V=C.memoizedProps;if(l=l.compare,l=l!==null?l:Ya,l(V,u)&&t.ref===e.ref)return ni(t,e,v)}return e.flags|=1,t=Ja(C,u),t.ref=e.ref,t.return=e,e.child=t}function Pu(t,e,l,u,v){if(t!==null){var C=t.memoizedProps;if(Ya(C,u)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=u=C,ra(t,v))(t.flags&131072)!==0&&(Tn=!0);else return e.lanes=t.lanes,ni(t,e,v)}return ya(t,e,l,u,v)}function Mf(t,e,l,u){var v=u.children,C=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((e.flags&128)!==0){if(C=C!==null?C.baseLanes|l:l,t!==null){for(u=e.child=t.child,v=0;u!==null;)v=v|u.lanes|u.childLanes,u=u.sibling;u=v&~C}else u=0,e.child=null;return xf(t,e,C,l,u)}if((l&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xi(e,C!==null?C.cachePool:null),C!==null?mi(e,C):zn(),yi(e);else return u=e.lanes=536870912,xf(t,e,C!==null?C.baseLanes|l:l,l,u)}else C!==null?(Xi(e,C.cachePool),mi(e,C),Ml(),e.memoizedState=null):(t!==null&&Xi(e,null),zn(),Ml());return Pn(t,e,v,l),e.child}function dr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function xf(t,e,l,u,v){var C=os();return C=C===null?null:{parent:bn._currentValue,pool:C},e.memoizedState={baseLanes:l,cachePool:C},t!==null&&Xi(e,null),zn(),yi(e),t!==null&&ls(t,e,u,!0),e.childLanes=v,null}function ki(t,e){return e=Un({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function pr(t,e,l){return sr(e,t.child,null,l),t=ki(e,e.pendingProps),t.flags|=2,Na(e),e.memoizedState=null,t}function Xu(t,e,l){var u=e.pendingProps,v=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ce){if(u.mode==="hidden")return t=ki(e,u),e.lanes=536870912,dr(null,t);if(Cn(e),(t=Pe)?(t=dg(t,aa),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:qi!==null?{id:ka,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},l=pa(t),l.return=e,e.child=l,Vn=e,Pe=null)):t=null,t===null)throw Vi(e);return e.lanes=536870912,null}return ki(e,u)}var C=t.memoizedState;if(C!==null){var V=C.dehydrated;if(Cn(e),v)if(e.flags&256)e.flags&=-257,e=pr(t,e,l);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(r(558));else if(Tn||ls(t,e,l,!1),v=(l&t.childLanes)!==0,Tn||v){if(u=me,u!==null&&(V=Ls(u,l),V!==0&&V!==C.retryLane))throw C.retryLane=V,Oa(t,V),Ge(u,t,V),Rf;m(),e=pr(t,e,l)}else t=C.treeContext,Pe=Di(V.nextSibling),Vn=e,Ce=!0,Ma=null,aa=!1,t!==null&&jh(e,t),e=ki(e,u),e.flags|=4096;return e}return t=Ja(t.child,{mode:u.mode,children:u.children}),t.ref=e.ref,e.child=t,t.return=e,t}function gr(t,e){var l=e.ref;if(l===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(t===null||t.ref!==l)&&(e.flags|=4194816)}}function ya(t,e,l,u,v){return Pi(e),l=cr(t,e,l,u,void 0,v),u=of(),t!==null&&!Tn?(uf(t,e,v),ni(t,e,v)):(Ce&&u&&so(e),e.flags|=1,Pn(t,e,l,v),e.child)}function Ua(t,e,l,u,v,C){return Pi(e),e.updateQueue=null,l=Vh(e,u,l,v),qh(t),u=of(),t!==null&&!Tn?(uf(t,e,C),ni(t,e,C)):(Ce&&u&&so(e),e.flags|=1,Pn(t,e,l,C),e.child)}function Nl(t,e,l,u,v){if(Pi(e),e.stateNode===null){var C=hi,V=l.contextType;typeof V=="object"&&V!==null&&(C=Fe(V)),C=new l(u,C),e.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=la,e.stateNode=C,C._reactInternals=e,C=e.stateNode,C.props=u,C.state=e.memoizedState,C.refs={},or(e),V=l.contextType,C.context=typeof V=="object"&&V!==null?Fe(V):hi,C.state=e.memoizedState,V=l.getDerivedStateFromProps,typeof V=="function"&&(xl(e,l,V,u),C.state=e.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(V=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),V!==C.state&&la.enqueueReplaceState(C,C.state,null),Ol(e,u,C,v),us(),C.state=e.memoizedState),typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!0}else if(t===null){C=e.stateNode;var W=e.memoizedProps,st=Ei(l,W);C.props=st;var vt=C.context,_t=l.contextType;V=hi,typeof _t=="object"&&_t!==null&&(V=Fe(_t));var xt=l.getDerivedStateFromProps;_t=typeof xt=="function"||typeof C.getSnapshotBeforeUpdate=="function",W=e.pendingProps!==W,_t||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(W||vt!==V)&&pd(e,C,u,V),Ji=!1;var bt=e.memoizedState;C.state=bt,Ol(e,u,C,v),us(),vt=e.memoizedState,W||bt!==vt||Ji?(typeof xt=="function"&&(xl(e,l,xt,u),vt=e.memoizedState),(st=Ji||dd(e,l,st,u,bt,vt,V))?(_t||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(e.flags|=4194308)):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=u,e.memoizedState=vt),C.props=u,C.state=vt,C.context=V,u=st):(typeof C.componentDidMount=="function"&&(e.flags|=4194308),u=!1)}else{C=e.stateNode,af(t,e),V=e.memoizedProps,_t=Ei(l,V),C.props=_t,xt=e.pendingProps,bt=C.context,vt=l.contextType,st=hi,typeof vt=="object"&&vt!==null&&(st=Fe(vt)),W=l.getDerivedStateFromProps,(vt=typeof W=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==xt||bt!==st)&&pd(e,C,u,st),Ji=!1,bt=e.memoizedState,C.state=bt,Ol(e,u,C,v),us();var Tt=e.memoizedState;V!==xt||bt!==Tt||Ji||t!==null&&t.dependencies!==null&&bu(t.dependencies)?(typeof W=="function"&&(xl(e,l,W,u),Tt=e.memoizedState),(_t=Ji||dd(e,l,_t,u,bt,Tt,st)||t!==null&&t.dependencies!==null&&bu(t.dependencies))?(vt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(u,Tt,st),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(u,Tt,st)),typeof C.componentDidUpdate=="function"&&(e.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=1024),e.memoizedProps=u,e.memoizedState=Tt),C.props=u,C.state=Tt,C.context=st,u=_t):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&bt===t.memoizedState||(e.flags|=1024),u=!1)}return C=u,gr(t,e),u=(e.flags&128)!==0,C||u?(C=e.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:C.render(),e.flags|=1,t!==null&&u?(e.child=sr(e,t.child,null,v),e.child=sr(e,null,l,v)):Pn(t,e,l,v),e.memoizedState=C.state,t=e.child):t=ni(t,e,v),t}function Ti(t,e,l,u){return bl(),e.flags|=256,Pn(t,e,l,u),e.child}var ti={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mn(t){return{baseLanes:t,cachePool:ir()}}function mr(t,e,l){return t=t!==null?t.childLanes&~l:0,e&&(t|=ie),t}function Wi(t,e,l){var u=e.pendingProps,v=!1,C=(e.flags&128)!==0,V;if((V=C)||(V=t!==null&&t.memoizedState===null?!1:(dn.current&2)!==0),V&&(v=!0,e.flags&=-129),V=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ce){if(v?Rl(e):Ml(),(t=Pe)?(t=dg(t,aa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:qi!==null?{id:ka,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},l=pa(t),l.return=e,e.child=l,Vn=e,Pe=null)):t=null,t===null)throw Vi(e);return L0(t)?e.lanes=32:e.lanes=536870912,null}var W=u.children;return u=u.fallback,v?(Ml(),v=e.mode,W=Un({mode:"hidden",children:W},v),u=Sl(u,v,l,null),W.return=e,u.return=e,W.sibling=u,e.child=W,u=e.child,u.memoizedState=Mn(l),u.childLanes=mr(t,V,l),e.memoizedState=ti,dr(null,u)):(Rl(e),ps(e,W))}var st=t.memoizedState;if(st!==null&&(W=st.dehydrated,W!==null)){if(C)e.flags&256?(Rl(e),e.flags&=-257,e=mn(t,e,l)):e.memoizedState!==null?(Ml(),e.child=t.child,e.flags|=128,e=null):(Ml(),W=u.fallback,v=e.mode,u=Un({mode:"visible",children:u.children},v),W=Sl(W,v,l,null),W.flags|=2,u.return=e,W.return=e,u.sibling=W,e.child=u,sr(e,t.child,null,l),u=e.child,u.memoizedState=Mn(l),u.childLanes=mr(t,V,l),e.memoizedState=ti,e=dr(null,u));else if(Rl(e),L0(W)){if(V=W.nextSibling&&W.nextSibling.dataset,V)var vt=V.dgst;V=vt,u=Error(r(419)),u.stack="",u.digest=V,is({value:u,source:null,stack:null}),e=mn(t,e,l)}else if(Tn||ls(t,e,l,!1),V=(l&t.childLanes)!==0,Tn||V){if(V=me,V!==null&&(u=Ls(V,l),u!==0&&u!==st.retryLane))throw st.retryLane=u,Oa(t,u),Ge(V,t,u),Rf;j0(W)||m(),e=mn(t,e,l)}else j0(W)?(e.flags|=192,e.child=t.child,e=null):(t=st.treeContext,Pe=Di(W.nextSibling),Vn=e,Ce=!0,Ma=null,aa=!1,t!==null&&jh(e,t),e=ps(e,u.children),e.flags|=4096);return e}return v?(Ml(),W=u.fallback,v=e.mode,st=t.child,vt=st.sibling,u=Ja(st,{mode:"hidden",children:u.children}),u.subtreeFlags=st.subtreeFlags&65011712,vt!==null?W=Ja(vt,W):(W=Sl(W,v,l,null),W.flags|=2),W.return=e,u.return=e,u.sibling=W,e.child=u,dr(null,u),u=e.child,W=t.child.memoizedState,W===null?W=Mn(l):(v=W.cachePool,v!==null?(st=bn._currentValue,v=v.parent!==st?{parent:st,pool:st}:v):v=ir(),W={baseLanes:W.baseLanes|l,cachePool:v}),u.memoizedState=W,u.childLanes=mr(t,V,l),e.memoizedState=ti,dr(t.child,u)):(Rl(e),l=t.child,t=l.sibling,l=Ja(l,{mode:"visible",children:u.children}),l.return=e,l.sibling=null,t!==null&&(V=e.deletions,V===null?(e.deletions=[t],e.flags|=16):V.push(t)),e.child=l,e.memoizedState=null,l)}function ps(t,e){return e=Un({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Un(t,e){return t=Jn(22,t,null,e),t.lanes=0,t}function mn(t,e,l){return sr(e,t.child,null,l),t=ps(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xe(t,e,l){t.lanes|=e;var u=t.alternate;u!==null&&(u.lanes|=e),$c(t.return,e,l)}function $i(t,e,l,u,v,C){var V=t.memoizedState;V===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:v,treeForkCount:C}:(V.isBackwards=e,V.rendering=null,V.renderingStartTime=0,V.last=u,V.tail=l,V.tailMode=v,V.treeForkCount=C)}function ei(t,e,l){var u=e.pendingProps,v=u.revealOrder,C=u.tail;u=u.children;var V=dn.current,W=(V&2)!==0;if(W?(V=V&1|2,e.flags|=128):V&=1,at(dn,V),Pn(t,e,u,l),u=Ce?as:0,!W&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xe(t,l,e);else if(t.tag===19)xe(t,l,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(v){case"forwards":for(l=e.child,v=null;l!==null;)t=l.alternate,t!==null&&Ru(t)===null&&(v=l),l=l.sibling;l=v,l===null?(v=e.child,e.child=null):(v=l.sibling,l.sibling=null),$i(e,!1,v,l,C,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=e.child,e.child=null;v!==null;){if(t=v.alternate,t!==null&&Ru(t)===null){e.child=v;break}t=v.sibling,v.sibling=l,l=v,v=t}$i(e,!0,l,null,C,u);break;case"together":$i(e,!1,null,null,void 0,u);break;default:e.memoizedState=null}return e.child}function ni(t,e,l){if(t!==null&&(e.dependencies=t.dependencies),Gl|=e.lanes,(l&e.childLanes)===0)if(t!==null){if(ls(t,e,l,!1),(l&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(r(153));if(e.child!==null){for(t=e.child,l=Ja(t,t.pendingProps),e.child=l,l.return=e;t.sibling!==null;)t=t.sibling,l=l.sibling=Ja(t,t.pendingProps),l.return=e;l.sibling=null}return e.child}function ra(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&bu(t)))}function Qu(t,e,l){switch(e.tag){case 3:gt(e,e.stateNode.containerInfo),Cl(e,bn,t.memoizedState.cache),bl();break;case 27:case 5:Lt(e);break;case 4:gt(e,e.stateNode.containerInfo);break;case 10:Cl(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Cn(e),null;break;case 13:var u=e.memoizedState;if(u!==null)return u.dehydrated!==null?(Rl(e),e.flags|=128,null):(l&e.child.childLanes)!==0?Wi(t,e,l):(Rl(e),t=ni(t,e,l),t!==null?t.sibling:null);Rl(e);break;case 19:var v=(t.flags&128)!==0;if(u=(l&e.childLanes)!==0,u||(ls(t,e,l,!1),u=(l&e.childLanes)!==0),v){if(u)return ei(t,e,l);e.flags|=128}if(v=e.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),at(dn,dn.current),u)break;return null;case 22:return e.lanes=0,Mf(t,e,l,e.pendingProps);case 24:Cl(e,bn,t.memoizedState.cache)}return ni(t,e,l)}function Dl(t,e,l){if(t!==null)if(t.memoizedProps!==e.pendingProps)Tn=!0;else{if(!ra(t,l)&&(e.flags&128)===0)return Tn=!1,Qu(t,e,l);Tn=(t.flags&131072)!==0}else Tn=!1,Ce&&(e.flags&1048576)!==0&&vu(e,as,e.index);switch(e.lanes=0,e.tag){case 16:t:{var u=e.pendingProps;if(t=Ki(e.elementType),e.type=t,typeof t=="function")pu(t)?(u=Ei(t,u),e.tag=1,e=Nl(null,e,t,u,l)):(e.tag=0,e=ya(null,e,t,u,l));else{if(t!=null){var v=t.$$typeof;if(v===j){e.tag=11,e=ds(null,e,t,u,l);break t}else if(v===T){e.tag=14,e=va(null,e,t,u,l);break t}}throw e=K(t)||t,Error(r(306,e,""))}}return e;case 0:return ya(t,e,e.type,e.pendingProps,l);case 1:return u=e.type,v=Ei(u,e.pendingProps),Nl(t,e,u,v,l);case 3:t:{if(gt(e,e.stateNode.containerInfo),t===null)throw Error(r(387));u=e.pendingProps;var C=e.memoizedState;v=C.element,af(t,e),Ol(e,u,null,l);var V=e.memoizedState;if(u=V.cache,Cl(e,bn,u),u!==C.cache&&tf(e,[bn],l,!0),us(),u=V.element,C.isDehydrated)if(C={element:u,isDehydrated:!1,cache:V.cache},e.updateQueue.baseState=C,e.memoizedState=C,e.flags&256){e=Ti(t,e,u,l);break t}else if(u!==v){v=Ra(Error(r(424)),e),is(v),e=Ti(t,e,u,l);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Pe=Di(t.firstChild),Vn=e,Ce=!0,Ma=null,aa=!0,l=wh(e,null,u,l),e.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(bl(),u===v){e=ni(t,e,l);break t}Pn(t,e,u,l)}e=e.child}return e;case 26:return gr(t,e),t===null?(l=Sg(e.type,null,e.pendingProps,null))?e.memoizedState=l:Ce||(l=e.type,t=e.pendingProps,u=Ad($.current).createElement(l),u[On]=e,u[Nn]=t,ca(u,l,t),Dn(u),e.stateNode=u):e.memoizedState=Sg(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Lt(e),t===null&&Ce&&(u=e.stateNode=mg(e.type,e.pendingProps,$.current),Vn=e,aa=!0,v=Pe,Es(e.type)?(w0=v,Pe=Di(u.firstChild)):Pe=v),Pn(t,e,e.pendingProps.children,l),gr(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ce&&((v=u=Pe)&&(u=iv(u,e.type,e.pendingProps,aa),u!==null?(e.stateNode=u,Vn=e,Pe=Di(u.firstChild),aa=!1,v=!0):v=!1),v||Vi(e)),Lt(e),v=e.type,C=e.pendingProps,V=t!==null?t.memoizedProps:null,u=C.children,G0(v,C)?u=null:V!==null&&G0(v,V)&&(e.flags|=32),e.memoizedState!==null&&(v=cr(t,e,y0,null,null,l),Vf._currentValue=v),gr(t,e),Pn(t,e,u,l),e.child;case 6:return t===null&&Ce&&((t=l=Pe)&&(l=lv(l,e.pendingProps,aa),l!==null?(e.stateNode=l,Vn=e,Pe=null,t=!0):t=!1),t||Vi(e)),null;case 13:return Wi(t,e,l);case 4:return gt(e,e.stateNode.containerInfo),u=e.pendingProps,t===null?e.child=sr(e,null,u,l):Pn(t,e,u,l),e.child;case 11:return ds(t,e,e.type,e.pendingProps,l);case 7:return Pn(t,e,e.pendingProps,l),e.child;case 8:return Pn(t,e,e.pendingProps.children,l),e.child;case 12:return Pn(t,e,e.pendingProps.children,l),e.child;case 10:return u=e.pendingProps,Cl(e,e.type,u.value),Pn(t,e,u.children,l),e.child;case 9:return v=e.type._context,u=e.pendingProps.children,Pi(e),v=Fe(v),u=u(v),e.flags|=1,Pn(t,e,u,l),e.child;case 14:return va(t,e,e.type,e.pendingProps,l);case 15:return Pu(t,e,e.type,e.pendingProps,l);case 19:return ei(t,e,l);case 31:return Xu(t,e,l);case 22:return Mf(t,e,l,e.pendingProps);case 24:return Pi(e),u=Fe(bn),t===null?(v=os(),v===null&&(v=me,C=Cu(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=l),v=C),e.memoizedState={parent:u,cache:v},or(e),Cl(e,bn,v)):((t.lanes&l)!==0&&(af(t,e),Ol(e,null,null,l),us()),v=t.memoizedState,C=e.memoizedState,v.parent!==u?(v={parent:u,cache:u},e.memoizedState=v,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=v),Cl(e,bn,u)):(u=C.cache,Cl(e,bn,u),u!==v.cache&&tf(e,[bn],l,!0))),Pn(t,e,e.pendingProps.children,l),e.child;case 29:throw e.pendingProps}throw Error(r(156,e.tag))}function Xn(t){t.flags|=4}function Nf(t,e,l,u,v){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(v&335544128)===v)if(t.stateNode.complete)t.flags|=8192;else if(a())t.flags|=8192;else throw Ii=fo,co}else t.flags&=-16777217}function vd(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ag(e))if(a())t.flags|=8192;else throw Ii=fo,co}function Ku(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Sc():536870912,t.lanes|=e,ye|=e)}function Xe(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var l=null;e!==null;)e.alternate!==null&&(l=e),e=e.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(e)for(var v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags&65011712,u|=v.flags&65011712,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags,u|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=u,t.childLanes=l,e}function gs(t,e,l){var u=e.pendingProps;switch(Fc(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return Ye(e),null;case 3:return l=e.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),e.memoizedState.cache!==u&&(e.flags|=2048),pi(bn),Ot(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&($l(e)?Xn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,tr())),Ye(e),null;case 26:var v=e.type,C=e.memoizedState;return t===null?(Xn(e),C!==null?(Ye(e),vd(e,C)):(Ye(e),Nf(e,v,null,u,l))):C?C!==t.memoizedState?(Xn(e),Ye(e),vd(e,C)):(Ye(e),e.flags&=-16777217):(t=t.memoizedProps,t!==u&&Xn(e),Ye(e),Nf(e,v,t,u,l)),null;case 27:if(Xt(e),l=$.current,v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Xn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return Ye(e),null}t=P.current,$l(e)?kc(e):(t=mg(v,u,l),e.stateNode=t,Xn(e))}return Ye(e),null;case 5:if(Xt(e),v=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&Xn(e);else{if(!u){if(e.stateNode===null)throw Error(r(166));return Ye(e),null}if(C=P.current,$l(e))kc(e);else{var V=Ad($.current);switch(C){case 1:C=V.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:C=V.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":C=V.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":C=V.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":C=V.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof u.is=="string"?V.createElement("select",{is:u.is}):V.createElement("select"),u.multiple?C.multiple=!0:u.size&&(C.size=u.size);break;default:C=typeof u.is=="string"?V.createElement(v,{is:u.is}):V.createElement(v)}}C[On]=e,C[Nn]=u;t:for(V=e.child;V!==null;){if(V.tag===5||V.tag===6)C.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break t;for(;V.sibling===null;){if(V.return===null||V.return===e)break t;V=V.return}V.sibling.return=V.return,V=V.sibling}e.stateNode=C;t:switch(ca(C,v,u),v){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Xn(e)}}return Ye(e),Nf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,l),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==u&&Xn(e);else{if(typeof u!="string"&&e.stateNode===null)throw Error(r(166));if(t=$.current,$l(e)){if(t=e.stateNode,l=e.memoizedProps,u=null,v=Vn,v!==null)switch(v.tag){case 27:case 5:u=v.memoizedProps}t[On]=e,t=!!(t.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||lg(t.nodeValue,l)),t||Vi(e,!0)}else t=Ad(t).createTextNode(u),t[On]=e,e.stateNode=t}return Ye(e),null;case 31:if(l=e.memoizedState,t===null||t.memoizedState!==null){if(u=$l(e),l!==null){if(t===null){if(!u)throw Error(r(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[On]=e}else bl(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ye(e),t=!1}else l=tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return e.flags&256?(Na(e),e):(Na(e),null);if((e.flags&128)!==0)throw Error(r(558))}return Ye(e),null;case 13:if(u=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(v=$l(e),u!==null&&u.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=e.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[On]=e}else bl(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ye(e),v=!1}else v=tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=v),v=!0;if(!v)return e.flags&256?(Na(e),e):(Na(e),null)}return Na(e),(e.flags&128)!==0?(e.lanes=l,e):(l=u!==null,t=t!==null&&t.memoizedState!==null,l&&(u=e.child,v=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(v=u.alternate.memoizedState.cachePool.pool),C=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),C!==v&&(u.flags|=2048)),l!==t&&l&&(e.child.flags|=8192),Ku(e,e.updateQueue),Ye(e),null);case 4:return Ot(),t===null&&x0(e.stateNode.containerInfo),Ye(e),null;case 10:return pi(e.type),Ye(e),null;case 19:if(it(dn),u=e.memoizedState,u===null)return Ye(e),null;if(v=(e.flags&128)!==0,C=u.rendering,C===null)if(v)Xe(u,!1);else{if(Qe!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(C=Ru(t),C!==null){for(e.flags|=128,Xe(u,!1),t=C.updateQueue,e.updateQueue=t,Ku(e,t),e.subtreeFlags=0,t=l,l=e.child;l!==null;)gu(l,t),l=l.sibling;return at(dn,dn.current&1|2),Ce&&di(e,u.treeForkCount),e.child}t=t.sibling}u.tail!==null&&re()>Ka&&(e.flags|=128,v=!0,Xe(u,!1),e.lanes=4194304)}else{if(!v)if(t=Ru(C),t!==null){if(e.flags|=128,v=!0,t=t.updateQueue,e.updateQueue=t,Ku(e,t),Xe(u,!0),u.tail===null&&u.tailMode==="hidden"&&!C.alternate&&!Ce)return Ye(e),null}else 2*re()-u.renderingStartTime>Ka&&l!==536870912&&(e.flags|=128,v=!0,Xe(u,!1),e.lanes=4194304);u.isBackwards?(C.sibling=e.child,e.child=C):(t=u.last,t!==null?t.sibling=C:e.child=C,u.last=C)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=re(),t.sibling=null,l=dn.current,at(dn,v?l&1|2:l&1),Ce&&di(e,u.treeForkCount),t):(Ye(e),null);case 22:case 23:return Na(e),vi(),u=e.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(e.flags|=8192):u&&(e.flags|=8192),u?(l&536870912)!==0&&(e.flags&128)===0&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),l=e.updateQueue,l!==null&&Ku(e,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),u=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),u!==l&&(e.flags|=2048),t!==null&&it(ar),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),e.memoizedState.cache!==l&&(e.flags|=2048),pi(bn),Ye(e),null;case 25:return null;case 30:return null}throw Error(r(156,e.tag))}function Df(t,e){switch(Fc(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(bn),Ot(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Xt(e),null;case 31:if(e.memoizedState!==null){if(Na(e),e.alternate===null)throw Error(r(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Na(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(r(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(dn),null;case 4:return Ot(),null;case 10:return pi(e.type),null;case 22:case 23:return Na(e),vi(),t!==null&&it(ar),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return pi(bn),null;case 25:return null;default:return null}}function _o(t,e){switch(Fc(e),e.tag){case 3:pi(bn),Ot();break;case 26:case 27:case 5:Xt(e);break;case 4:Ot();break;case 31:e.memoizedState!==null&&Na(e);break;case 13:Na(e);break;case 19:it(dn);break;case 10:pi(e.type);break;case 22:case 23:Na(e),vi(),t!==null&&it(ar);break;case 24:pi(bn)}}function vr(t,e){try{var l=e.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var v=u.next;l=v;do{if((l.tag&t)===t){u=void 0;var C=l.create,V=l.inst;u=C(),V.destroy=u}l=l.next}while(l!==v)}}catch(W){qt(e,e.return,W)}}function Ga(t,e,l){try{var u=e.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var C=v.next;u=C;do{if((u.tag&t)===t){var V=u.inst,W=V.destroy;if(W!==void 0){V.destroy=void 0,v=e;var st=l,vt=W;try{vt()}catch(_t){qt(v,st,_t)}}}u=u.next}while(u!==C)}}catch(_t){qt(e,e.return,_t)}}function ms(t){var e=t.updateQueue;if(e!==null){var l=t.stateNode;try{Yh(e,l)}catch(u){qt(t,t.return,u)}}}function Iu(t,e,l){l.props=Ei(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(u){qt(t,e,u)}}function Ai(t,e){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof l=="function"?t.refCleanup=l(u):l.current=u}}catch(v){qt(t,e,v)}}function sa(t,e){var l=t.ref,u=t.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(v){qt(t,e,v)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){qt(t,e,v)}else l.current=null}function zf(t){var e=t.type,l=t.memoizedProps,u=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(v){qt(t,t.return,v)}}function tl(t,e,l){try{var u=t.stateNode;Wm(u,t.type,l,e),u[Nn]=e}catch(v){qt(t,t.return,v)}}function yd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Es(t.type)||t.tag===4}function yr(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||yd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Es(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oo(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,e):(e=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,e.appendChild(t),l=l._reactRootContainer,l!=null||e.onclick!==null||(e.onclick=ha));else if(u!==4&&(u===27&&Es(t.type)&&(l=t.stateNode,e=null),t=t.child,t!==null))for(Oo(t,e,l),t=t.sibling;t!==null;)Oo(t,e,l),t=t.sibling}function Sr(t,e,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?l.insertBefore(t,e):l.appendChild(t);else if(u!==4&&(u===27&&Es(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Sr(t,e,l),t=t.sibling;t!==null;)Sr(t,e,l),t=t.sibling}function Ro(t){var e=t.stateNode,l=t.memoizedProps;try{for(var u=t.type,v=e.attributes;v.length;)e.removeAttributeNode(v[0]);ca(e,u,l),e[On]=t,e[Nn]=l}catch(C){qt(t,t.return,C)}}var Sa=!1,De=!1,zl=!1,Zu=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Uf(t,e){if(t=t.containerInfo,z0=Dd,t=Ia(t),fu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else t:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var v=u.anchorOffset,C=u.focusNode;u=u.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break t}var V=0,W=-1,st=-1,vt=0,_t=0,xt=t,bt=null;e:for(;;){for(var Tt;xt!==l||v!==0&&xt.nodeType!==3||(W=V+v),xt!==C||u!==0&&xt.nodeType!==3||(st=V+u),xt.nodeType===3&&(V+=xt.nodeValue.length),(Tt=xt.firstChild)!==null;)bt=xt,xt=Tt;for(;;){if(xt===t)break e;if(bt===l&&++vt===v&&(W=V),bt===C&&++_t===u&&(st=V),(Tt=xt.nextSibling)!==null)break;xt=bt,bt=xt.parentNode}xt=Tt}l=W===-1||st===-1?null:{start:W,end:st}}else l=null}l=l||{start:0,end:0}}else l=null;for(U0={focusedElem:t,selectionRange:l},Dd=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){switch(e=ke,C=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)v=t[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&C!==null){t=void 0,l=e,v=C.memoizedProps,C=C.memoizedState,u=l.stateNode;try{var It=Ei(l.type,v);t=u.getSnapshotBeforeUpdate(It,C),u.__reactInternalSnapshotBeforeUpdate=t}catch(le){qt(l,l.return,le)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,l=t.nodeType,l===9)H0(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":H0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}}function br(t,e,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:_i(t,l),u&4&&vr(5,l);break;case 1:if(_i(t,l),u&4)if(t=l.stateNode,e===null)try{t.componentDidMount()}catch(V){qt(l,l.return,V)}else{var v=Ei(l.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(v,e,t.__reactInternalSnapshotBeforeUpdate)}catch(V){qt(l,l.return,V)}}u&64&&ms(l),u&512&&Ai(l,l.return);break;case 3:if(_i(t,l),u&64&&(t=l.updateQueue,t!==null)){if(e=null,l.child!==null)switch(l.child.tag){case 27:case 5:e=l.child.stateNode;break;case 1:e=l.child.stateNode}try{Yh(t,e)}catch(V){qt(l,l.return,V)}}break;case 27:e===null&&u&4&&Ro(l);case 26:case 5:_i(t,l),e===null&&u&4&&zf(l),u&512&&Ai(l,l.return);break;case 12:_i(t,l);break;case 31:_i(t,l),u&4&&xo(t,l);break;case 13:_i(t,l),u&4&&Cr(t,l),u&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=Hn.bind(null,l),rv(t,l))));break;case 22:if(u=l.memoizedState!==null||Sa,!u){e=e!==null&&e.memoizedState!==null||De,v=Sa;var C=De;Sa=u,(De=e)&&!C?ba(t,l,(l.subtreeFlags&8772)!==0):_i(t,l),Sa=v,De=C}break;case 30:break;default:_i(t,l)}}function Mo(t){var e=t.alternate;e!==null&&(t.alternate=null,Mo(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&sn(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ze=null,ee=!1;function Ee(t,e,l){for(l=l.child;l!==null;)vn(t,e,l),l=l.sibling}function vn(t,e,l){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(hn,l)}catch{}switch(l.tag){case 26:De||sa(l,e),Ee(t,e,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:De||sa(l,e);var u=ze,v=ee;Es(l.type)&&(ze=l.stateNode,ee=!1),Ee(t,e,l),wf(l.stateNode),ze=u,ee=v;break;case 5:De||sa(l,e);case 6:if(u=ze,v=ee,ze=null,Ee(t,e,l),ze=u,ee=v,ze!==null)if(ee)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(l.stateNode)}catch(C){qt(l,e,C)}else try{ze.removeChild(l.stateNode)}catch(C){qt(l,e,C)}break;case 18:ze!==null&&(ee?(t=ze,fg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),lc(t)):fg(ze,l.stateNode));break;case 4:u=ze,v=ee,ze=l.stateNode.containerInfo,ee=!0,Ee(t,e,l),ze=u,ee=v;break;case 0:case 11:case 14:case 15:Ga(2,l,e),De||Ga(4,l,e),Ee(t,e,l);break;case 1:De||(sa(l,e),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Iu(l,e,u)),Ee(t,e,l);break;case 21:Ee(t,e,l);break;case 22:De=(u=De)||l.memoizedState!==null,Ee(t,e,l),De=u;break;default:Ee(t,e,l)}}function xo(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{lc(t)}catch(l){qt(e,e.return,l)}}}function Cr(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lc(t)}catch(l){qt(e,e.return,l)}}function Er(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Zu),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Zu),e;default:throw Error(r(435,t.tag))}}function Tr(t,e){var l=Er(t);e.forEach(function(u){if(!l.has(u)){l.add(u);var v=Ne.bind(null,t,u);u.then(v,v)}})}function Gn(t,e){var l=e.deletions;if(l!==null)for(var u=0;u<l.length;u++){var v=l[u],C=t,V=e,W=V;t:for(;W!==null;){switch(W.tag){case 27:if(Es(W.type)){ze=W.stateNode,ee=!1;break t}break;case 5:ze=W.stateNode,ee=!1;break t;case 3:case 4:ze=W.stateNode.containerInfo,ee=!0;break t}W=W.return}if(ze===null)throw Error(r(160));vn(C,V,v),ze=null,ee=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Sd(e,t),e=e.sibling}var Fn=null;function Sd(t,e){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gn(e,t),Qn(t),u&4&&(Ga(3,t,t.return),vr(3,t),Ga(5,t,t.return));break;case 1:Gn(e,t),Qn(t),u&512&&(De||l===null||sa(l,l.return)),u&64&&Sa&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var v=Fn;if(Gn(e,t),Qn(t),u&512&&(De||l===null||sa(l,l.return)),u&4){var C=l!==null?l.memoizedState:null;if(u=t.memoizedState,l===null)if(u===null)if(t.stateNode===null){t:{u=t.type,l=t.memoizedProps,v=v.ownerDocument||v;e:switch(u){case"title":C=v.getElementsByTagName("title")[0],(!C||C[Pl]||C[On]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(u),v.head.insertBefore(C,v.querySelector("head > title"))),ca(C,u,l),C[On]=t,Dn(C),u=C;break t;case"link":var V=Eg("link","href",v).get(u+(l.href||""));if(V){for(var W=0;W<V.length;W++)if(C=V[W],C.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&C.getAttribute("rel")===(l.rel==null?null:l.rel)&&C.getAttribute("title")===(l.title==null?null:l.title)&&C.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){V.splice(W,1);break e}}C=v.createElement(u),ca(C,u,l),v.head.appendChild(C);break;case"meta":if(V=Eg("meta","content",v).get(u+(l.content||""))){for(W=0;W<V.length;W++)if(C=V[W],C.getAttribute("content")===(l.content==null?null:""+l.content)&&C.getAttribute("name")===(l.name==null?null:l.name)&&C.getAttribute("property")===(l.property==null?null:l.property)&&C.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&C.getAttribute("charset")===(l.charSet==null?null:l.charSet)){V.splice(W,1);break e}}C=v.createElement(u),ca(C,u,l),v.head.appendChild(C);break;default:throw Error(r(468,u))}C[On]=t,Dn(C),u=C}t.stateNode=u}else Tg(v,t.type,t.stateNode);else t.stateNode=Cg(v,u,t.memoizedProps);else C!==u?(C===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):C.count--,u===null?Tg(v,t.type,t.stateNode):Cg(v,u,t.memoizedProps)):u===null&&t.stateNode!==null&&tl(t,t.memoizedProps,l.memoizedProps)}break;case 27:Gn(e,t),Qn(t),u&512&&(De||l===null||sa(l,l.return)),l!==null&&u&4&&tl(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Gn(e,t),Qn(t),u&512&&(De||l===null||sa(l,l.return)),t.flags&32){v=t.stateNode;try{fl(v,"")}catch(It){qt(t,t.return,It)}}u&4&&t.stateNode!=null&&(v=t.memoizedProps,tl(t,v,l!==null?l.memoizedProps:v)),u&1024&&(zl=!0);break;case 6:if(Gn(e,t),Qn(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,l=t.stateNode;try{l.nodeValue=u}catch(It){qt(t,t.return,It)}}break;case 3:if(Rd=null,v=Fn,Fn=_d(e.containerInfo),Gn(e,t),Fn=v,Qn(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{lc(e.containerInfo)}catch(It){qt(t,t.return,It)}zl&&(zl=!1,Gf(t));break;case 4:u=Fn,Fn=_d(t.stateNode.containerInfo),Gn(e,t),Qn(t),Fn=u;break;case 12:Gn(e,t),Qn(t);break;case 31:Gn(e,t),Qn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Tr(t,u)));break;case 13:Gn(e,t),Qn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(nl=re()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Tr(t,u)));break;case 22:v=t.memoizedState!==null;var st=l!==null&&l.memoizedState!==null,vt=Sa,_t=De;if(Sa=vt||v,De=_t||st,Gn(e,t),De=_t,Sa=vt,Qn(t),u&8192)t:for(e=t.stateNode,e._visibility=v?e._visibility&-2:e._visibility|1,v&&(l===null||st||Sa||De||Ar(t)),l=null,e=t;;){if(e.tag===5||e.tag===26){if(l===null){st=l=e;try{if(C=st.stateNode,v)V=C.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{W=st.stateNode;var xt=st.memoizedProps.style,bt=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;W.style.display=bt==null||typeof bt=="boolean"?"":(""+bt).trim()}}catch(It){qt(st,st.return,It)}}}else if(e.tag===6){if(l===null){st=e;try{st.stateNode.nodeValue=v?"":st.memoizedProps}catch(It){qt(st,st.return,It)}}}else if(e.tag===18){if(l===null){st=e;try{var Tt=st.stateNode;v?hg(Tt,!0):hg(st.stateNode,!1)}catch(It){qt(st,st.return,It)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;l===e&&(l=null),e=e.return}l===e&&(l=null),e.sibling.return=e.return,e=e.sibling}u&4&&(u=t.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Tr(t,l))));break;case 19:Gn(e,t),Qn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Tr(t,u)));break;case 30:break;case 21:break;default:Gn(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{for(var l,u=t.return;u!==null;){if(yd(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,C=yr(t);Sr(t,C,v);break;case 5:var V=l.stateNode;l.flags&32&&(fl(V,""),l.flags&=-33);var W=yr(t);Sr(t,W,V);break;case 3:case 4:var st=l.stateNode.containerInfo,vt=yr(t);Oo(t,vt,st);break;default:throw Error(r(161))}}catch(_t){qt(t,t.return,_t)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Gf(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function _i(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)br(t,e.alternate,e),e=e.sibling}function Ar(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ga(4,e,e.return),Ar(e);break;case 1:sa(e,e.return);var l=e.stateNode;typeof l.componentWillUnmount=="function"&&Iu(e,e.return,l),Ar(e);break;case 27:wf(e.stateNode);case 26:case 5:sa(e,e.return),Ar(e);break;case 22:e.memoizedState===null&&Ar(e);break;case 30:Ar(e);break;default:Ar(e)}t=t.sibling}}function ba(t,e,l){for(l=l&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var u=e.alternate,v=t,C=e,V=C.flags;switch(C.tag){case 0:case 11:case 15:ba(v,C,l),vr(4,C);break;case 1:if(ba(v,C,l),u=C,v=u.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(vt){qt(u,u.return,vt)}if(u=C,v=u.updateQueue,v!==null){var W=u.stateNode;try{var st=v.shared.hiddenCallbacks;if(st!==null)for(v.shared.hiddenCallbacks=null,v=0;v<st.length;v++)rf(st[v],W)}catch(vt){qt(u,u.return,vt)}}l&&V&64&&ms(C),Ai(C,C.return);break;case 27:Ro(C);case 26:case 5:ba(v,C,l),l&&u===null&&V&4&&zf(C),Ai(C,C.return);break;case 12:ba(v,C,l);break;case 31:ba(v,C,l),l&&V&4&&xo(v,C);break;case 13:ba(v,C,l),l&&V&4&&Cr(v,C);break;case 22:C.memoizedState===null&&ba(v,C,l),Ai(C,C.return);break;case 30:break;default:ba(v,C,l)}e=e.sibling}}function _r(t,e){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&rs(l))}function Ul(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&rs(t))}function Xa(t,e,l,u){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ba(t,e,l,u),e=e.sibling}function Ba(t,e,l,u){var v=e.flags;switch(e.tag){case 0:case 11:case 15:Xa(t,e,l,u),v&2048&&vr(9,e);break;case 1:Xa(t,e,l,u);break;case 3:Xa(t,e,l,u),v&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&rs(t)));break;case 12:if(v&2048){Xa(t,e,l,u),t=e.stateNode;try{var C=e.memoizedProps,V=C.id,W=C.onPostCommit;typeof W=="function"&&W(V,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(st){qt(e,e.return,st)}}else Xa(t,e,l,u);break;case 31:Xa(t,e,l,u);break;case 13:Xa(t,e,l,u);break;case 23:break;case 22:C=e.stateNode,V=e.alternate,e.memoizedState!==null?C._visibility&2?Xa(t,e,l,u):un(t,e):C._visibility&2?Xa(t,e,l,u):(C._visibility|=2,oa(t,e,l,u,(e.subtreeFlags&10256)!==0||!1)),v&2048&&_r(V,e);break;case 24:Xa(t,e,l,u),v&2048&&Ul(e.alternate,e);break;default:Xa(t,e,l,u)}}function oa(t,e,l,u,v){for(v=v&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var C=t,V=e,W=l,st=u,vt=V.flags;switch(V.tag){case 0:case 11:case 15:oa(C,V,W,st,v),vr(8,V);break;case 23:break;case 22:var _t=V.stateNode;V.memoizedState!==null?_t._visibility&2?oa(C,V,W,st,v):un(C,V):(_t._visibility|=2,oa(C,V,W,st,v)),v&&vt&2048&&_r(V.alternate,V);break;case 24:oa(C,V,W,st,v),v&&vt&2048&&Ul(V.alternate,V);break;default:oa(C,V,W,st,v)}e=e.sibling}}function un(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var l=t,u=e,v=u.flags;switch(u.tag){case 22:un(l,u),v&2048&&_r(u.alternate,u);break;case 24:un(l,u),v&2048&&Ul(u.alternate,u);break;default:un(l,u)}e=e.sibling}}var Or=8192;function Rr(t,e,l){if(t.subtreeFlags&Or)for(t=t.child;t!==null;)Bf(t,e,l),t=t.sibling}function Bf(t,e,l){switch(t.tag){case 26:Rr(t,e,l),t.flags&Or&&t.memoizedState!==null&&yv(l,Fn,t.memoizedState,t.memoizedProps);break;case 5:Rr(t,e,l);break;case 3:case 4:var u=Fn;Fn=_d(t.stateNode.containerInfo),Rr(t,e,l),Fn=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Or,Or=16777216,Rr(t,e,l),Or=u):Rr(t,e,l));break;default:Rr(t,e,l)}}function xn(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Mr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];ke=u,Ju(u,t)}xn(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oi(t),t=t.sibling}function Oi(t){switch(t.tag){case 0:case 11:case 15:Mr(t),t.flags&2048&&Ga(9,t,t.return);break;case 3:Mr(t);break;case 12:Mr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,nn(t)):Mr(t);break;default:Mr(t)}}function nn(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var l=0;l<e.length;l++){var u=e[l];ke=u,Ju(u,t)}xn(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ga(8,e,e.return),nn(e);break;case 22:l=e.stateNode,l._visibility&2&&(l._visibility&=-3,nn(e));break;default:nn(e)}t=t.sibling}}function Ju(t,e){for(;ke!==null;){var l=ke;switch(l.tag){case 0:case 11:case 15:Ga(8,l,e);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:rs(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ke=u;else t:for(l=t;ke!==null;){u=ke;var v=u.sibling,C=u.return;if(Mo(u),u===l){ke=null;break t}if(v!==null){v.return=C,ke=v;break t}ke=C}}}var bd={getCacheForType:function(t){var e=Fe(bn),l=e.data.get(t);return l===void 0&&(l=t(),e.data.set(t,l)),l},cacheSignal:function(){return Fe(bn).controller.signal}},Bn=typeof WeakMap=="function"?WeakMap:Map,ae=0,me=null,ue=null,pe=0,Le=0,kn=null,ai=!1,el=!1,vs=!1,Qa=0,Qe=0,Gl=0,ge=0,qe=0,ie=0,ye=0,Oe=null,Ke=null,Ri=!1,nl=0,Fu=0,Ka=1/0,We=null,ua=null,$e=0,Mi=null,Kn=null,Ca=0,xr=0,Wn=null,ku=null,Nr=0,Dr=null;function $n(){return(ae&2)!==0&&pe!==0?pe&-pe:x.T!==null?_0():Gi()}function al(){if(ie===0)if((pe&536870912)===0||Ce){var t=js;js<<=1,(js&3932160)===0&&(js=262144),ie=t}else ie=536870912;return t=en.current,t!==null&&(t.flags|=32),ie}function Ge(t,e,l){(t===me&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(Ni(t,0),xi(t,pe,ie,!1)),ol(t,l),((ae&2)===0||t!==me)&&(t===me&&((ae&2)===0&&(ge|=l),Qe===4&&xi(t,pe,ie,!1)),jl(t))}function il(t,e,l){if((ae&6)!==0)throw Error(r(327));var u=!l&&(e&127)===0&&(e&t.expiredLanes)===0||qr(t,e),v=u?tt(t,e):_(t,e,!0),C=u;do{if(v===0){el&&!u&&xi(t,e,0,!1);break}else{if(l=t.current.alternate,C&&!ys(l)){v=_(t,e,!1),C=!1;continue}if(v===2){if(C=e,t.errorRecoveryDisabledLanes&C)var V=0;else V=t.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){e=V;t:{var W=t;v=Oe;var st=W.current.memoizedState.isDehydrated;if(st&&(Ni(W,V).flags|=256),V=_(W,V,!1),V!==2){if(vs&&!st){W.errorRecoveryDisabledLanes|=C,ge|=C,v=4;break t}C=Ke,Ke=v,C!==null&&(Ke===null?Ke=C:Ke.push.apply(Ke,C))}v=V}if(C=!1,v!==2)continue}}if(v===1){Ni(t,0),xi(t,e,0,!0);break}t:{switch(u=t,C=v,C){case 0:case 1:throw Error(r(345));case 4:if((e&4194048)!==e)break;case 6:xi(u,e,ie,!ai);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(r(329))}if((e&62914560)===e&&(v=nl+300-re(),10<v)){if(xi(u,e,ie,!ai),ql(u,0,!0)!==0)break t;Ca=e,u.timeoutHandle=ug(zr.bind(null,u,l,Ke,We,Ri,e,ie,ge,ye,ai,C,"Throttled",-0,0),v);break t}zr(u,l,Ke,We,Ri,e,ie,ge,ye,ai,C,null,-0,0)}}break}while(!0);jl(t)}function zr(t,e,l,u,v,C,V,W,st,vt,_t,xt,bt,Tt){if(t.timeoutHandle=-1,xt=e.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},Bf(e,C,xt);var It=(C&62914560)===C?nl-re():(C&4194048)===C?Fu-re():0;if(It=Sv(xt,It),It!==null){Ca=C,t.cancelPendingCommit=It(he.bind(null,t,e,C,l,u,v,V,W,st,_t,xt,null,bt,Tt)),xi(t,C,V,!vt);return}}he(t,e,C,l,u,v,V,W,st)}function ys(t){for(var e=t;;){var l=e.tag;if((l===0||l===11||l===15)&&e.flags&16384&&(l=e.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var v=l[u],C=v.getSnapshot;v=v.value;try{if(!Ln(C(),v))return!1}catch{return!1}}if(l=e.child,e.subtreeFlags&16384&&l!==null)l.return=e,e=l;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e,l,u){e&=~qe,e&=~ge,t.suspendedLanes|=e,t.pingedLanes&=~e,u&&(t.warmLanes|=e),u=t.expirationTimes;for(var v=e;0<v;){var C=31-Ta(v),V=1<<C;u[C]=-1,v&=~V}l!==0&&Vl(t,l,e)}function Ss(){return(ae&6)===0?(Hf(0),!1):!0}function Wu(){if(ue!==null){if(Le===0)var t=ue.return;else t=ue,$a=Te=null,cf(t),Tl=null,ho=0,t=ue;for(;t!==null;)_o(t.alternate,t),t=t.return;ue=null}}function Ni(t,e){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,ev(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ca=0,Wu(),me=t,ue=l=Ja(t.current,null),pe=e,Le=0,kn=null,ai=!1,el=qr(t,e),vs=!1,ye=ie=qe=ge=Gl=Qe=0,Ke=Oe=null,Ri=!1,(e&8)!==0&&(e|=e&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=e;0<u;){var v=31-Ta(u),C=1<<v;e|=t[v],u&=~C}return Qa=e,io(),l}function $u(t,e){fe=null,x.H=hs,e===lr||e===Au?(e=Ou(),Le=3):e===co?(e=Ou(),Le=4):Le=e===Rf?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,kn=e,ue===null&&(Qe=1,Vu(t,Ra(e,t.current)))}function a(){var t=en.current;return t===null?!0:(pe&4194048)===pe?Va===null:(pe&62914560)===pe||(pe&536870912)!==0?t===Va:!1}function i(){var t=x.H;return x.H=hs,t===null?hs:t}function f(){var t=x.A;return x.A=bd,t}function m(){Qe=4,ai||(pe&4194048)!==pe&&en.current!==null||(el=!0),(Gl&134217727)===0&&(ge&134217727)===0||me===null||xi(me,pe,ie,!1)}function _(t,e,l){var u=ae;ae|=2;var v=i(),C=f();(me!==t||pe!==e)&&(We=null,Ni(t,e)),e=!1;var V=Qe;t:do try{if(Le!==0&&ue!==null){var W=ue,st=kn;switch(Le){case 8:Wu(),V=6;break t;case 3:case 2:case 9:case 6:en.current===null&&(e=!0);var vt=Le;if(Le=0,kn=null,Ht(t,W,st,vt),l&&el){V=0;break t}break;default:vt=Le,Le=0,kn=null,Ht(t,W,st,vt)}}B(),V=Qe;break}catch(_t){$u(t,_t)}while(!0);return e&&t.shellSuspendCounter++,$a=Te=null,ae=u,x.H=v,x.A=C,ue===null&&(me=null,pe=0,io()),V}function B(){for(;ue!==null;)St(ue)}function tt(t,e){var l=ae;ae|=2;var u=i(),v=f();me!==t||pe!==e?(We=null,Ka=re()+500,Ni(t,e)):el=qr(t,e);t:do try{if(Le!==0&&ue!==null){e=ue;var C=kn;e:switch(Le){case 1:Le=0,kn=null,Ht(t,e,C,1);break;case 2:case 9:if(Qi(C)){Le=0,kn=null,zt(e);break}e=function(){Le!==2&&Le!==9||me!==t||(Le=7),jl(t)},C.then(e,e);break t;case 3:Le=7;break t;case 4:Le=5;break t;case 7:Qi(C)?(Le=0,kn=null,zt(e)):(Le=0,kn=null,Ht(t,e,C,7));break;case 5:var V=null;switch(ue.tag){case 26:V=ue.memoizedState;case 5:case 27:var W=ue;if(V?Ag(V):W.stateNode.complete){Le=0,kn=null;var st=W.sibling;if(st!==null)ue=st;else{var vt=W.return;vt!==null?(ue=vt,Pt(vt)):ue=null}break e}}Le=0,kn=null,Ht(t,e,C,5);break;case 6:Le=0,kn=null,Ht(t,e,C,6);break;case 8:Wu(),Qe=6;break t;default:throw Error(r(462))}}ot();break}catch(_t){$u(t,_t)}while(!0);return $a=Te=null,x.H=u,x.A=v,ae=l,ue!==null?0:(me=null,pe=0,io(),Qe)}function ot(){for(;ue!==null&&!ne();)St(ue)}function St(t){var e=Dl(t.alternate,t,Qa);t.memoizedProps=t.pendingProps,e===null?Pt(t):ue=e}function zt(t){var e=t,l=e.alternate;switch(e.tag){case 15:case 0:e=Ua(l,e,e.pendingProps,e.type,void 0,pe);break;case 11:e=Ua(l,e,e.pendingProps,e.type.render,e.ref,pe);break;case 5:cf(e);default:_o(l,e),e=ue=gu(e,Qa),e=Dl(l,e,Qa)}t.memoizedProps=t.pendingProps,e===null?Pt(t):ue=e}function Ht(t,e,l,u){$a=Te=null,cf(e),Tl=null,ho=0;var v=e.return;try{if(Of(t,v,e,l,pe)){Qe=1,Vu(t,Ra(l,t.current)),ue=null;return}}catch(C){if(v!==null)throw ue=v,C;Qe=1,Vu(t,Ra(l,t.current)),ue=null;return}e.flags&32768?(Ce||u===1?t=!0:el||(pe&536870912)!==0?t=!1:(ai=t=!0,(u===2||u===9||u===3||u===6)&&(u=en.current,u!==null&&u.tag===13&&(u.flags|=16384))),Qt(e,t)):Pt(e)}function Pt(t){var e=t;do{if((e.flags&32768)!==0){Qt(e,ai);return}t=e.return;var l=gs(e.alternate,e,Qa);if(l!==null){ue=l;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);Qe===0&&(Qe=5)}function Qt(t,e){do{var l=Df(t.alternate,t);if(l!==null){l.flags&=32767,ue=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!e&&(t=t.sibling,t!==null)){ue=t;return}ue=t=l}while(t!==null);Qe=6,ue=null}function he(t,e,l,u,v,C,V,W,st){t.cancelPendingCommit=null;do ft();while($e!==0);if((ae&6)!==0)throw Error(r(327));if(e!==null){if(e===t.current)throw Error(r(177));if(C=e.lanes|e.childLanes,C|=qa,bc(t,l,C,V,W,st),t===me&&(ue=me=null,pe=0),Kn=e,Mi=t,Ca=l,xr=C,Wn=v,ku=u,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Hl(ct,function(){return Et(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||u){u=x.T,x.T=null,v=L.p,L.p=2,V=ae,ae|=4;try{Uf(t,e,l)}finally{ae=V,L.p=v,x.T=u}}$e=1,Ha(),bs(),Bl()}}function Ha(){if($e===1){$e=0;var t=Mi,e=Kn,l=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||l){l=x.T,x.T=null;var u=L.p;L.p=2;var v=ae;ae|=4;try{Sd(e,t);var C=U0,V=Ia(t.containerInfo),W=C.focusedElem,st=C.selectionRange;if(V!==W&&W&&W.ownerDocument&&Wr(W.ownerDocument.documentElement,W)){if(st!==null&&fu(W)){var vt=st.start,_t=st.end;if(_t===void 0&&(_t=vt),"selectionStart"in W)W.selectionStart=vt,W.selectionEnd=Math.min(_t,W.value.length);else{var xt=W.ownerDocument||document,bt=xt&&xt.defaultView||window;if(bt.getSelection){var Tt=bt.getSelection(),It=W.textContent.length,le=Math.min(st.start,It),Ze=st.end===void 0?le:Math.min(st.end,It);!Tt.extend&&le>Ze&&(V=Ze,Ze=le,le=V);var ht=Vc(W,le),ut=Vc(W,Ze);if(ht&&ut&&(Tt.rangeCount!==1||Tt.anchorNode!==ht.node||Tt.anchorOffset!==ht.offset||Tt.focusNode!==ut.node||Tt.focusOffset!==ut.offset)){var mt=xt.createRange();mt.setStart(ht.node,ht.offset),Tt.removeAllRanges(),le>Ze?(Tt.addRange(mt),Tt.extend(ut.node,ut.offset)):(mt.setEnd(ut.node,ut.offset),Tt.addRange(mt))}}}}for(xt=[],Tt=W;Tt=Tt.parentNode;)Tt.nodeType===1&&xt.push({element:Tt,left:Tt.scrollLeft,top:Tt.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<xt.length;W++){var Rt=xt[W];Rt.element.scrollLeft=Rt.left,Rt.element.scrollTop=Rt.top}}Dd=!!z0,U0=z0=null}finally{ae=v,L.p=u,x.T=l}}t.current=e,$e=2}}function bs(){if($e===2){$e=0;var t=Mi,e=Kn,l=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||l){l=x.T,x.T=null;var u=L.p;L.p=2;var v=ae;ae|=4;try{br(t,e.alternate,e)}finally{ae=v,L.p=u,x.T=l}}$e=3}}function Bl(){if($e===4||$e===3){$e=0,Zt();var t=Mi,e=Kn,l=Ca,u=ku;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?$e=5:($e=0,Kn=Mi=null,yt(t,t.pendingLanes));var v=t.pendingLanes;if(v===0&&(ua=null),Ys(l),e=e.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(hn,e,void 0,(e.current.flags&128)===128)}catch{}if(u!==null){e=x.T,v=L.p,L.p=2,x.T=null;try{for(var C=t.onRecoverableError,V=0;V<u.length;V++){var W=u[V];C(W.value,{componentStack:W.stack})}}finally{x.T=e,L.p=v}}(Ca&3)!==0&&ft(),jl(t),v=t.pendingLanes,(l&261930)!==0&&(v&42)!==0?t===Dr?Nr++:(Nr=0,Dr=t):Nr=0,Hf(0)}}function yt(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,rs(e)))}function ft(){return Ha(),bs(),Bl(),Et()}function Et(){if($e!==5)return!1;var t=Mi,e=xr;xr=0;var l=Ys(Ca),u=x.T,v=L.p;try{L.p=32>l?32:l,x.T=null,l=Wn,Wn=null;var C=Mi,V=Ca;if($e=0,Kn=Mi=null,Ca=0,(ae&6)!==0)throw Error(r(331));var W=ae;if(ae|=4,Oi(C.current),Ba(C,C.current,V,l),ae=W,Hf(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(hn,C)}catch{}return!0}finally{L.p=v,x.T=u,yt(t,e)}}function jt(t,e,l){e=Ra(l,e),e=za(t.stateNode,e,2),t=_l(t,e,2),t!==null&&(ol(t,2),jl(t))}function qt(t,e,l){if(t.tag===3)jt(t,t,l);else for(;e!==null;){if(e.tag===3){jt(e,t,l);break}else if(e.tag===1){var u=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ua===null||!ua.has(u))){t=Ra(l,t),l=_f(2),u=_l(e,l,2),u!==null&&(md(l,u,e,t),ol(u,2),jl(u));break}}e=e.return}}function Ve(t,e,l){var u=t.pingCache;if(u===null){u=t.pingCache=new Bn;var v=new Set;u.set(e,v)}else v=u.get(e),v===void 0&&(v=new Set,u.set(e,v));v.has(l)||(vs=!0,v.add(l),t=se.bind(null,t,e,l),e.then(t,t))}function se(t,e,l){var u=t.pingCache;u!==null&&u.delete(e),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,me===t&&(pe&l)===l&&(Qe===4||Qe===3&&(pe&62914560)===pe&&300>re()-nl?(ae&2)===0&&Ni(t,0):qe|=l,ye===pe&&(ye=0)),jl(t)}function Re(t,e){e===0&&(e=Sc()),t=Oa(t,e),t!==null&&(ol(t,e),jl(t))}function Hn(t){var e=t.memoizedState,l=0;e!==null&&(l=e.retryLane),Re(t,l)}function Ne(t,e){var l=0;switch(t.tag){case 31:case 13:var u=t.stateNode,v=t.memoizedState;v!==null&&(l=v.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(e),Re(t,l)}function Hl(t,e){return oe(t,e)}var tc=null,ec=null,T0=!1,Cd=!1,A0=!1,Cs=0;function jl(t){t!==ec&&t.next===null&&(ec===null?tc=ec=t:ec=ec.next=t),Cd=!0,T0||(T0=!0,Xm())}function Hf(t,e){if(!A0&&Cd){A0=!0;do for(var l=!1,u=tc;u!==null;){if(t!==0){var v=u.pendingLanes;if(v===0)var C=0;else{var V=u.suspendedLanes,W=u.pingedLanes;C=(1<<31-Ta(42|t)+1)-1,C&=v&~(V&~W),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(l=!0,Wp(u,C))}else C=pe,C=ql(u,u===me?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(C&3)===0||qr(u,C)||(l=!0,Wp(u,C));u=u.next}while(l);A0=!1}}function Pm(){Jp()}function Jp(){Cd=T0=!1;var t=0;Cs!==0&&tv()&&(t=Cs);for(var e=re(),l=null,u=tc;u!==null;){var v=u.next,C=Fp(u,e);C===0?(u.next=null,l===null?tc=v:l.next=v,v===null&&(ec=l)):(l=u,(t!==0||(C&3)!==0)&&(Cd=!0)),u=v}$e!==0&&$e!==5||Hf(t),Cs!==0&&(Cs=0)}function Fp(t,e){for(var l=t.suspendedLanes,u=t.pingedLanes,v=t.expirationTimes,C=t.pendingLanes&-62914561;0<C;){var V=31-Ta(C),W=1<<V,st=v[V];st===-1?((W&l)===0||(W&u)!==0)&&(v[V]=fh(W,e)):st<=e&&(t.expiredLanes|=W),C&=~W}if(e=me,l=pe,l=ql(t,t===e?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,l===0||t===e&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Wt(u),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||qr(t,l)){if(e=l&-l,e===t.callbackPriority)return e;switch(u!==null&&Wt(u),Ys(l)){case 2:case 8:l=Je;break;case 32:l=ct;break;case 268435456:l=Dt;break;default:l=ct}return u=kp.bind(null,t),l=oe(l,u),t.callbackPriority=e,t.callbackNode=l,e}return u!==null&&u!==null&&Wt(u),t.callbackPriority=2,t.callbackNode=null,2}function kp(t,e){if($e!==0&&$e!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(ft()&&t.callbackNode!==l)return null;var u=pe;return u=ql(t,t===me?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(il(t,u,e),Fp(t,re()),t.callbackNode!=null&&t.callbackNode===l?kp.bind(null,t):null)}function Wp(t,e){if(ft())return null;il(t,e,!0)}function Xm(){nv(function(){(ae&6)!==0?oe(rn,Pm):Jp()})}function _0(){if(Cs===0){var t=nr;t===0&&(t=wl,wl<<=1,(wl&261888)===0&&(wl=256)),Cs=t}return Cs}function $p(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ps(""+t)}function tg(t,e){var l=e.ownerDocument.createElement("input");return l.name=e.name,l.value=e.value,t.id&&l.setAttribute("form",t.id),e.parentNode.insertBefore(l,e),t=new FormData(t),l.parentNode.removeChild(l),t}function Qm(t,e,l,u,v){if(e==="submit"&&l&&l.stateNode===v){var C=$p((v[Nn]||null).action),V=u.submitter;V&&(e=(e=V[Nn]||null)?$p(e.formAction):V.getAttribute("formAction"),e!==null&&(C=e,V=null));var W=new Wo("action","action",null,u,v);t.push({event:W,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Cs!==0){var st=V?tg(v,V):new FormData(v);wu(l,{pending:!0,data:st,method:v.method,action:C},null,st)}}else typeof C=="function"&&(W.preventDefault(),st=V?tg(v,V):new FormData(v),wu(l,{pending:!0,data:st,method:v.method,action:C},C,st))},currentTarget:v}]})}}for(var O0=0;O0<fi.length;O0++){var R0=fi[O0],Km=R0.toLowerCase(),Im=R0[0].toUpperCase()+R0.slice(1);Yn(Km,"on"+Im)}Yn(du,"onAnimationEnd"),Yn(Kc,"onAnimationIteration"),Yn(Gh,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Ic,"onTransitionRun"),Yn(ea,"onTransitionStart"),Yn(Bh,"onTransitionCancel"),Yn(na,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jf));function eg(t,e){e=(e&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],v=u.event;u=u.listeners;t:{var C=void 0;if(e)for(var V=u.length-1;0<=V;V--){var W=u[V],st=W.instance,vt=W.currentTarget;if(W=W.listener,st!==C&&v.isPropagationStopped())break t;C=W,v.currentTarget=vt;try{C(v)}catch(_t){Za(_t)}v.currentTarget=null,C=st}else for(V=0;V<u.length;V++){if(W=u[V],st=W.instance,vt=W.currentTarget,W=W.listener,st!==C&&v.isPropagationStopped())break t;C=W,v.currentTarget=vt;try{C(v)}catch(_t){Za(_t)}v.currentTarget=null,C=st}}}}function Ae(t,e){var l=e[Lo];l===void 0&&(l=e[Lo]=new Set);var u=t+"__bubble";l.has(u)||(ng(e,t,2,!1),l.add(u))}function M0(t,e,l){var u=0;e&&(u|=4),ng(l,t,u,e)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function x0(t){if(!t[Ed]){t[Ed]=!0,Yo.forEach(function(l){l!=="selectionchange"&&(Zm.has(l)||M0(l,!1,t),M0(l,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ed]||(e[Ed]=!0,M0("selectionchange",!1,e))}}function ng(t,e,l,u){switch(Dg(e)){case 2:var v=Ev;break;case 8:v=Tv;break;default:v=X0}l=v.bind(null,e,l,t),v=void 0,!Jo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(v=!0),u?v!==void 0?t.addEventListener(e,l,{capture:!0,passive:v}):t.addEventListener(e,l,!0):v!==void 0?t.addEventListener(e,l,{passive:v}):t.addEventListener(e,l,!1)}function N0(t,e,l,u,v){var C=u;if((e&1)===0&&(e&2)===0&&u!==null)t:for(;;){if(u===null)return;var V=u.tag;if(V===3||V===4){var W=u.stateNode.containerInfo;if(W===v)break;if(V===4)for(V=u.return;V!==null;){var st=V.tag;if((st===3||st===4)&&V.stateNode.containerInfo===v)return;V=V.return}for(;W!==null;){if(V=ul(W),V===null)return;if(st=V.tag,st===5||st===6||st===26||st===27){u=C=V;continue t}W=W.parentNode}}u=u.return}Nc(function(){var vt=C,_t=Io(l),xt=[];t:{var bt=Zc.get(t);if(bt!==void 0){var Tt=Wo,It=t;switch(t){case"keypress":if(Xs(l)===0)break t;case"keydown":case"keyup":Tt=Gc;break;case"focusin":It="focus",Tt=eu;break;case"focusout":It="blur",Tt=eu;break;case"beforeblur":case"afterblur":Tt=eu;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=jn;break;case du:case Kc:case Gh:Tt=pl;break;case na:Tt=Oh;break;case"scroll":case"scrollend":Tt=yh;break;case"wheel":Tt=Mh;break;case"copy":case"cut":case"paste":Tt=gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Bc;break;case"toggle":case"beforetoggle":Tt=nu}var le=(e&4)!==0,Ze=!le&&(t==="scroll"||t==="scrollend"),ht=le?bt!==null?bt+"Capture":null:bt;le=[];for(var ut=vt,mt;ut!==null;){var Rt=ut;if(mt=Rt.stateNode,Rt=Rt.tag,Rt!==5&&Rt!==26&&Rt!==27||mt===null||ht===null||(Rt=Ir(ut,ht),Rt!=null&&le.push(Lf(ut,Rt,mt))),Ze)break;ut=ut.return}0<le.length&&(bt=new Tt(bt,It,null,l,_t),xt.push({event:bt,listeners:le}))}}if((e&7)===0){t:{if(bt=t==="mouseover"||t==="pointerover",Tt=t==="mouseout"||t==="pointerout",bt&&l!==Kr&&(It=l.relatedTarget||l.fromElement)&&(ul(It)||It[si]))break t;if((Tt||bt)&&(bt=_t.window===_t?_t:(bt=_t.ownerDocument)?bt.defaultView||bt.parentWindow:window,Tt?(It=l.relatedTarget||l.toElement,Tt=vt,It=It?ul(It):null,It!==null&&(Ze=h(It),le=It.tag,It!==Ze||le!==5&&le!==27&&le!==6)&&(It=null)):(Tt=null,It=vt),Tt!==It)){if(le=zc,Rt="onMouseLeave",ht="onMouseEnter",ut="mouse",(t==="pointerout"||t==="pointerover")&&(le=Bc,Rt="onPointerLeave",ht="onPointerEnter",ut="pointer"),Ze=Tt==null?bt:Pr(Tt),mt=It==null?bt:Pr(It),bt=new le(Rt,ut+"leave",Tt,l,_t),bt.target=Ze,bt.relatedTarget=mt,Rt=null,ul(_t)===vt&&(le=new le(ht,ut+"enter",It,l,_t),le.target=mt,le.relatedTarget=Ze,Rt=le),Ze=Rt,Tt&&It)e:{for(le=Jm,ht=Tt,ut=It,mt=0,Rt=ht;Rt;Rt=le(Rt))mt++;Rt=0;for(var $t=ut;$t;$t=le($t))Rt++;for(;0<mt-Rt;)ht=le(ht),mt--;for(;0<Rt-mt;)ut=le(ut),Rt--;for(;mt--;){if(ht===ut||ut!==null&&ht===ut.alternate){le=ht;break e}ht=le(ht),ut=le(ut)}le=null}else le=null;Tt!==null&&ag(xt,bt,Tt,le,!1),It!==null&&Ze!==null&&ag(xt,Ze,It,le,!0)}}t:{if(bt=vt?Pr(vt):window,Tt=bt.nodeName&&bt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&bt.type==="file")var Be=ou;else if(ci(bt))if(wc)Be=m0;else{Be=on;var Jt=no}else Tt=bt.nodeName,!Tt||Tt.toLowerCase()!=="input"||bt.type!=="checkbox"&&bt.type!=="radio"?vt&&Ko(vt.elementType)&&(Be=ou):Be=g0;if(Be&&(Be=Be(t,vt))){su(xt,Be,l,_t);break t}Jt&&Jt(t,bt,vt),t==="focusout"&&vt&&bt.type==="number"&&vt.memoizedProps.value!=null&&Ac(bt,"number",bt.value)}switch(Jt=vt?Pr(vt):window,t){case"focusin":(ci(Jt)||Jt.contentEditable==="true")&&(Jl=Jt,ao=vt,Fl=null);break;case"focusout":Fl=ao=Jl=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":$r=!1,Xc(xt,l,_t);break;case"selectionchange":if(Pc)break;case"keydown":case"keyup":Xc(xt,l,_t)}var Se;if(au)t:{switch(t){case"compositionstart":var _e="onCompositionStart";break t;case"compositionend":_e="onCompositionEnd";break t;case"compositionupdate":_e="onCompositionUpdate";break t}_e=void 0}else ml?ru(t,l)&&(_e="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(_e="onCompositionStart");_e&&(iu&&l.locale!=="ko"&&(ml||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ml&&(Se=Dc()):(Li=_t,Fo="value"in Li?Li.value:Li.textContent,ml=!0)),Jt=Td(vt,_e),0<Jt.length&&(_e=new Fs(_e,t,null,l,_t),xt.push({event:_e,listeners:Jt}),Se?_e.data=Se:(Se=ks(l),Se!==null&&(_e.data=Se)))),(Se=Nh?Dh(t,l):Lc(t,l))&&(_e=Td(vt,"onBeforeInput"),0<_e.length&&(Jt=new Fs("onBeforeInput","beforeinput",null,l,_t),xt.push({event:Jt,listeners:_e}),Jt.data=Se)),Qm(xt,t,vt,l,_t)}eg(xt,e)})}function Lf(t,e,l){return{instance:t,listener:e,currentTarget:l}}function Td(t,e){for(var l=e+"Capture",u=[];t!==null;){var v=t,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=Ir(t,l),v!=null&&u.unshift(Lf(t,v,C)),v=Ir(t,e),v!=null&&u.push(Lf(t,v,C))),t.tag===3)return u;t=t.return}return[]}function Jm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ag(t,e,l,u,v){for(var C=e._reactName,V=[];l!==null&&l!==u;){var W=l,st=W.alternate,vt=W.stateNode;if(W=W.tag,st!==null&&st===u)break;W!==5&&W!==26&&W!==27||vt===null||(st=vt,v?(vt=Ir(l,C),vt!=null&&V.unshift(Lf(l,vt,st))):v||(vt=Ir(l,C),vt!=null&&V.push(Lf(l,vt,st)))),l=l.return}V.length!==0&&t.push({event:e,listeners:V})}var Fm=/\r\n?/g,km=/\u0000|\uFFFD/g;function ig(t){return(typeof t=="string"?t:""+t).replace(Fm,`
`).replace(km,"")}function lg(t,e){return e=ig(e),ig(t)===e}function Ie(t,e,l,u,v,C){switch(l){case"children":typeof u=="string"?e==="body"||e==="textarea"&&u===""||fl(t,u):(typeof u=="number"||typeof u=="bigint")&&e!=="body"&&fl(t,""+u);break;case"className":La(t,"class",u);break;case"tabIndex":La(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":La(t,l,u);break;case"style":Mc(t,u,C);break;case"data":if(e!=="object"){La(t,"data",u);break}case"src":case"href":if(u===""&&(e!=="a"||l!=="href")){t.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Ps(""+u),t.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(l==="formAction"?(e!=="input"&&Ie(t,e,"name",v.name,v,null),Ie(t,e,"formEncType",v.formEncType,v,null),Ie(t,e,"formMethod",v.formMethod,v,null),Ie(t,e,"formTarget",v.formTarget,v,null)):(Ie(t,e,"encType",v.encType,v,null),Ie(t,e,"method",v.method,v,null),Ie(t,e,"target",v.target,v,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Ps(""+u),t.setAttribute(l,u);break;case"onClick":u!=null&&(t.onclick=ha);break;case"onScroll":u!=null&&Ae("scroll",t);break;case"onScrollEnd":u!=null&&Ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}l=Ps(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""+u):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":u===!0?t.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,u):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(l,u):t.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(l):t.setAttribute(l,u);break;case"popover":Ae("beforetoggle",t),Ae("toggle",t),Qr(t,"popover",u);break;case"xlinkActuate":wa(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":wa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":wa(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":wa(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":wa(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":wa(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":wa(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":wa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":wa(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vh.get(l)||l,Qr(t,l,u))}}function D0(t,e,l,u,v,C){switch(l){case"style":Mc(t,u,C);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"children":typeof u=="string"?fl(t,u):(typeof u=="number"||typeof u=="bigint")&&fl(t,""+u);break;case"onScroll":u!=null&&Ae("scroll",t);break;case"onScrollEnd":u!=null&&Ae("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),e=l.slice(2,v?l.length-7:void 0),C=t[Nn]||null,C=C!=null?C[l]:null,typeof C=="function"&&t.removeEventListener(e,C,v),typeof u=="function")){typeof C!="function"&&C!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(e,u,v);break t}l in t?t[l]=u:u===!0?t.setAttribute(l,""):Qr(t,l,u)}}}function ca(t,e,l){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",t),Ae("load",t);var u=!1,v=!1,C;for(C in l)if(l.hasOwnProperty(C)){var V=l[C];if(V!=null)switch(C){case"src":u=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Ie(t,e,C,V,l,null)}}v&&Ie(t,e,"srcSet",l.srcSet,l,null),u&&Ie(t,e,"src",l.src,l,null);return;case"input":Ae("invalid",t);var W=C=V=v=null,st=null,vt=null;for(u in l)if(l.hasOwnProperty(u)){var _t=l[u];if(_t!=null)switch(u){case"name":v=_t;break;case"type":V=_t;break;case"checked":st=_t;break;case"defaultChecked":vt=_t;break;case"value":C=_t;break;case"defaultValue":W=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,e));break;default:Ie(t,e,u,_t,l,null)}}Tc(t,C,W,st,vt,V,v,!1);return;case"select":Ae("invalid",t),u=V=C=null;for(v in l)if(l.hasOwnProperty(v)&&(W=l[v],W!=null))switch(v){case"value":C=W;break;case"defaultValue":V=W;break;case"multiple":u=W;default:Ie(t,e,v,W,l,null)}e=C,l=V,t.multiple=!!u,e!=null?Ql(t,!!u,e,!1):l!=null&&Ql(t,!!u,l,!0);return;case"textarea":Ae("invalid",t),C=v=u=null;for(V in l)if(l.hasOwnProperty(V)&&(W=l[V],W!=null))switch(V){case"value":u=W;break;case"defaultValue":v=W;break;case"children":C=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:Ie(t,e,V,W,l,null)}Oc(t,u,v,C);return;case"option":for(st in l)if(l.hasOwnProperty(st)&&(u=l[st],u!=null))switch(st){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ie(t,e,st,u,l,null)}return;case"dialog":Ae("beforetoggle",t),Ae("toggle",t),Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":Ae("load",t);break;case"video":case"audio":for(u=0;u<jf.length;u++)Ae(jf[u],t);break;case"image":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"embed":case"source":case"link":Ae("error",t),Ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(vt in l)if(l.hasOwnProperty(vt)&&(u=l[vt],u!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:Ie(t,e,vt,u,l,null)}return;default:if(Ko(e)){for(_t in l)l.hasOwnProperty(_t)&&(u=l[_t],u!==void 0&&D0(t,e,_t,u,l,void 0));return}}for(W in l)l.hasOwnProperty(W)&&(u=l[W],u!=null&&Ie(t,e,W,u,l,null))}function Wm(t,e,l,u){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,V=null,W=null,st=null,vt=null,_t=null;for(Tt in l){var xt=l[Tt];if(l.hasOwnProperty(Tt)&&xt!=null)switch(Tt){case"checked":break;case"value":break;case"defaultValue":st=xt;default:u.hasOwnProperty(Tt)||Ie(t,e,Tt,null,u,xt)}}for(var bt in u){var Tt=u[bt];if(xt=l[bt],u.hasOwnProperty(bt)&&(Tt!=null||xt!=null))switch(bt){case"type":C=Tt;break;case"name":v=Tt;break;case"checked":vt=Tt;break;case"defaultChecked":_t=Tt;break;case"value":V=Tt;break;case"defaultValue":W=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(r(137,e));break;default:Tt!==xt&&Ie(t,e,bt,Tt,u,xt)}}Vs(t,V,W,st,vt,_t,C,v);return;case"select":Tt=V=W=bt=null;for(C in l)if(st=l[C],l.hasOwnProperty(C)&&st!=null)switch(C){case"value":break;case"multiple":Tt=st;default:u.hasOwnProperty(C)||Ie(t,e,C,null,u,st)}for(v in u)if(C=u[v],st=l[v],u.hasOwnProperty(v)&&(C!=null||st!=null))switch(v){case"value":bt=C;break;case"defaultValue":W=C;break;case"multiple":V=C;default:C!==st&&Ie(t,e,v,C,u,st)}e=W,l=V,u=Tt,bt!=null?Ql(t,!!l,bt,!1):!!u!=!!l&&(e!=null?Ql(t,!!l,e,!0):Ql(t,!!l,l?[]:"",!1));return;case"textarea":Tt=bt=null;for(W in l)if(v=l[W],l.hasOwnProperty(W)&&v!=null&&!u.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Ie(t,e,W,null,u,v)}for(V in u)if(v=u[V],C=l[V],u.hasOwnProperty(V)&&(v!=null||C!=null))switch(V){case"value":bt=v;break;case"defaultValue":Tt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==C&&Ie(t,e,V,v,u,C)}_c(t,bt,Tt);return;case"option":for(var It in l)if(bt=l[It],l.hasOwnProperty(It)&&bt!=null&&!u.hasOwnProperty(It))switch(It){case"selected":t.selected=!1;break;default:Ie(t,e,It,null,u,bt)}for(st in u)if(bt=u[st],Tt=l[st],u.hasOwnProperty(st)&&bt!==Tt&&(bt!=null||Tt!=null))switch(st){case"selected":t.selected=bt&&typeof bt!="function"&&typeof bt!="symbol";break;default:Ie(t,e,st,bt,u,Tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in l)bt=l[le],l.hasOwnProperty(le)&&bt!=null&&!u.hasOwnProperty(le)&&Ie(t,e,le,null,u,bt);for(vt in u)if(bt=u[vt],Tt=l[vt],u.hasOwnProperty(vt)&&bt!==Tt&&(bt!=null||Tt!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,e));break;default:Ie(t,e,vt,bt,u,Tt)}return;default:if(Ko(e)){for(var Ze in l)bt=l[Ze],l.hasOwnProperty(Ze)&&bt!==void 0&&!u.hasOwnProperty(Ze)&&D0(t,e,Ze,void 0,u,bt);for(_t in u)bt=u[_t],Tt=l[_t],!u.hasOwnProperty(_t)||bt===Tt||bt===void 0&&Tt===void 0||D0(t,e,_t,bt,u,Tt);return}}for(var ht in l)bt=l[ht],l.hasOwnProperty(ht)&&bt!=null&&!u.hasOwnProperty(ht)&&Ie(t,e,ht,null,u,bt);for(xt in u)bt=u[xt],Tt=l[xt],!u.hasOwnProperty(xt)||bt===Tt||bt==null&&Tt==null||Ie(t,e,xt,bt,u,Tt)}function rg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $m(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var v=l[u],C=v.transferSize,V=v.initiatorType,W=v.duration;if(C&&W&&rg(V)){for(V=0,W=v.responseEnd,u+=1;u<l.length;u++){var st=l[u],vt=st.startTime;if(vt>W)break;var _t=st.transferSize,xt=st.initiatorType;_t&&rg(xt)&&(st=st.responseEnd,V+=_t*(st<W?1:(W-vt)/(st-vt)))}if(--u,e+=8*(C+V)/(v.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var z0=null,U0=null;function Ad(t){return t.nodeType===9?t:t.ownerDocument}function sg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function og(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function G0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var B0=null;function tv(){var t=window.event;return t&&t.type==="popstate"?t===B0?!1:(B0=t,!0):(B0=null,!1)}var ug=typeof setTimeout=="function"?setTimeout:void 0,ev=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,nv=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(t){return cg.resolve(null).then(t).catch(av)}:ug;function av(t){setTimeout(function(){throw t})}function Es(t){return t==="head"}function fg(t,e){var l=e,u=0;do{var v=l.nextSibling;if(t.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(u===0){t.removeChild(v),lc(e);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")wf(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,wf(l);for(var C=l.firstChild;C;){var V=C.nextSibling,W=C.nodeName;C[Pl]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=V}}else l==="body"&&wf(t.ownerDocument.body);l=v}while(l);lc(e)}function hg(t,e){var l=t;t=0;do{var u=l.nextSibling;if(l.nodeType===1?e?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(e?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=u}while(l)}function H0(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var l=e;switch(e=e.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":H0(l),sn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function iv(t,e,l,u){for(;t.nodeType===1;){var v=l;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Pl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(C=t.getAttribute("rel"),C==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(C!==v.rel||t.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||t.getAttribute("title")!==(v.title==null?null:v.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(C=t.getAttribute("src"),(C!==(v.src==null?null:v.src)||t.getAttribute("type")!==(v.type==null?null:v.type)||t.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&t.getAttribute("name")===C)return t}else return t;if(t=Di(t.nextSibling),t===null)break}return null}function lv(t,e,l){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Di(t.nextSibling),t===null))return null;return t}function dg(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Di(t.nextSibling),t===null))return null;return t}function j0(t){return t.data==="$?"||t.data==="$~"}function L0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rv(t,e){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||l.readyState!=="loading")e();else{var u=function(){e(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var w0=null;function pg(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(e===0)return Di(t.nextSibling);e--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||e++}t=t.nextSibling}return null}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(e===0)return t;e--}else l!=="/$"&&l!=="/&"||e++}t=t.previousSibling}return null}function mg(t,e,l){switch(e=Ad(l),t){case"html":if(t=e.documentElement,!t)throw Error(r(452));return t;case"head":if(t=e.head,!t)throw Error(r(453));return t;case"body":if(t=e.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function wf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);sn(t)}var zi=new Map,vg=new Set;function _d(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ur=L.d;L.d={f:sv,r:ov,D:uv,C:cv,L:fv,m:hv,X:pv,S:dv,M:gv};function sv(){var t=Ur.f(),e=Ss();return t||e}function ov(t){var e=cl(t);e!==null&&e.tag===5&&e.type==="form"?cd(e):Ur.r(t)}var nc=typeof document>"u"?null:document;function yg(t,e,l){var u=nc;if(u&&typeof e=="string"&&e){var v=Aa(e);v='link[rel="'+t+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),vg.has(v)||(vg.add(v),t={rel:t,crossOrigin:l,href:e},u.querySelector(v)===null&&(e=u.createElement("link"),ca(e,"link",t),Dn(e),u.head.appendChild(e)))}}function uv(t){Ur.D(t),yg("dns-prefetch",t,null)}function cv(t,e){Ur.C(t,e),yg("preconnect",t,e)}function fv(t,e,l){Ur.L(t,e,l);var u=nc;if(u&&t&&e){var v='link[rel="preload"][as="'+Aa(e)+'"]';e==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Aa(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Aa(l.imageSizes)+'"]')):v+='[href="'+Aa(t)+'"]';var C=v;switch(e){case"style":C=ac(t);break;case"script":C=ic(t)}zi.has(C)||(t=R({rel:"preload",href:e==="image"&&l&&l.imageSrcSet?void 0:t,as:e},l),zi.set(C,t),u.querySelector(v)!==null||e==="style"&&u.querySelector(Yf(C))||e==="script"&&u.querySelector(qf(C))||(e=u.createElement("link"),ca(e,"link",t),Dn(e),u.head.appendChild(e)))}}function hv(t,e){Ur.m(t,e);var l=nc;if(l&&t){var u=e&&typeof e.as=="string"?e.as:"script",v='link[rel="modulepreload"][as="'+Aa(u)+'"][href="'+Aa(t)+'"]',C=v;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ic(t)}if(!zi.has(C)&&(t=R({rel:"modulepreload",href:t},e),zi.set(C,t),l.querySelector(v)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(qf(C)))return}u=l.createElement("link"),ca(u,"link",t),Dn(u),l.head.appendChild(u)}}}function dv(t,e,l){Ur.S(t,e,l);var u=nc;if(u&&t){var v=Xl(u).hoistableStyles,C=ac(t);e=e||"default";var V=v.get(C);if(!V){var W={loading:0,preload:null};if(V=u.querySelector(Yf(C)))W.loading=5;else{t=R({rel:"stylesheet",href:t,"data-precedence":e},l),(l=zi.get(C))&&Y0(t,l);var st=V=u.createElement("link");Dn(st),ca(st,"link",t),st._p=new Promise(function(vt,_t){st.onload=vt,st.onerror=_t}),st.addEventListener("load",function(){W.loading|=1}),st.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Od(V,e,u)}V={type:"stylesheet",instance:V,count:1,state:W},v.set(C,V)}}}function pv(t,e){Ur.X(t,e);var l=nc;if(l&&t){var u=Xl(l).hoistableScripts,v=ic(t),C=u.get(v);C||(C=l.querySelector(qf(v)),C||(t=R({src:t,async:!0},e),(e=zi.get(v))&&q0(t,e),C=l.createElement("script"),Dn(C),ca(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function gv(t,e){Ur.M(t,e);var l=nc;if(l&&t){var u=Xl(l).hoistableScripts,v=ic(t),C=u.get(v);C||(C=l.querySelector(qf(v)),C||(t=R({src:t,async:!0,type:"module"},e),(e=zi.get(v))&&q0(t,e),C=l.createElement("script"),Dn(C),ca(C,"link",t),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},u.set(v,C))}}function Sg(t,e,l,u){var v=(v=$.current)?_d(v):null;if(!v)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(e=ac(l.href),l=Xl(v).hoistableStyles,u=l.get(e),u||(u={type:"style",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=ac(l.href);var C=Xl(v).hoistableStyles,V=C.get(t);if(V||(v=v.ownerDocument||v,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(t,V),(C=v.querySelector(Yf(t)))&&!C._p&&(V.instance=C,V.state.loading=5),zi.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},zi.set(t,l),C||mv(v,t,l,V.state))),e&&u===null)throw Error(r(528,""));return V}if(e&&u!==null)throw Error(r(529,""));return null;case"script":return e=l.async,l=l.src,typeof l=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ic(l),l=Xl(v).hoistableScripts,u=l.get(e),u||(u={type:"script",instance:null,count:0,state:null},l.set(e,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ac(t){return'href="'+Aa(t)+'"'}function Yf(t){return'link[rel="stylesheet"]['+t+"]"}function bg(t){return R({},t,{"data-precedence":t.precedence,precedence:null})}function mv(t,e,l,u){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?u.loading=1:(e=t.createElement("link"),u.preload=e,e.addEventListener("load",function(){return u.loading|=1}),e.addEventListener("error",function(){return u.loading|=2}),ca(e,"link",l),Dn(e),t.head.appendChild(e))}function ic(t){return'[src="'+Aa(t)+'"]'}function qf(t){return"script[async]"+t}function Cg(t,e,l){if(e.count++,e.instance===null)switch(e.type){case"style":var u=t.querySelector('style[data-href~="'+Aa(l.href)+'"]');if(u)return e.instance=u,Dn(u),u;var v=R({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Dn(u),ca(u,"style",v),Od(u,l.precedence,t),e.instance=u;case"stylesheet":v=ac(l.href);var C=t.querySelector(Yf(v));if(C)return e.state.loading|=4,e.instance=C,Dn(C),C;u=bg(l),(v=zi.get(v))&&Y0(u,v),C=(t.ownerDocument||t).createElement("link"),Dn(C);var V=C;return V._p=new Promise(function(W,st){V.onload=W,V.onerror=st}),ca(C,"link",u),e.state.loading|=4,Od(C,l.precedence,t),e.instance=C;case"script":return C=ic(l.src),(v=t.querySelector(qf(C)))?(e.instance=v,Dn(v),v):(u=l,(v=zi.get(C))&&(u=R({},l),q0(u,v)),t=t.ownerDocument||t,v=t.createElement("script"),Dn(v),ca(v,"link",u),t.head.appendChild(v),e.instance=v);case"void":return null;default:throw Error(r(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(u=e.instance,e.state.loading|=4,Od(u,l.precedence,t));return e.instance}function Od(t,e,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=u.length?u[u.length-1]:null,C=v,V=0;V<u.length;V++){var W=u[V];if(W.dataset.precedence===e)C=W;else if(C!==v)break}C?C.parentNode.insertBefore(t,C.nextSibling):(e=l.nodeType===9?l.head:l,e.insertBefore(t,e.firstChild))}function Y0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function q0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Rd=null;function Eg(t,e,l){if(Rd===null){var u=new Map,v=Rd=new Map;v.set(l,u)}else v=Rd,u=v.get(l),u||(u=new Map,v.set(l,u));if(u.has(t))return u;for(u.set(t,null),l=l.getElementsByTagName(t),v=0;v<l.length;v++){var C=l[v];if(!(C[Pl]||C[On]||t==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var V=C.getAttribute(e)||"";V=t+V;var W=u.get(V);W?W.push(C):u.set(V,[C])}}return u}function Tg(t,e,l){t=t.ownerDocument||t,t.head.insertBefore(l,e==="title"?t.querySelector("head > title"):null)}function vv(t,e,l){if(l===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Ag(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function yv(t,e,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=ac(u.href),C=e.querySelector(Yf(v));if(C){e=C._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Md.bind(t),e.then(t,t)),l.state.loading|=4,l.instance=C,Dn(C);return}C=e.ownerDocument||e,u=bg(u),(v=zi.get(v))&&Y0(u,v),C=C.createElement("link"),Dn(C);var V=C;V._p=new Promise(function(W,st){V.onload=W,V.onerror=st}),ca(C,"link",u),l.instance=C}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,e),(e=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Md.bind(t),e.addEventListener("load",l),e.addEventListener("error",l))}}var V0=0;function Sv(t,e){return t.stylesheets&&t.count===0&&Nd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var u=setTimeout(function(){if(t.stylesheets&&Nd(t,t.stylesheets),t.unsuspend){var C=t.unsuspend;t.unsuspend=null,C()}},6e4+e);0<t.imgBytes&&V0===0&&(V0=62500*$m());var v=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nd(t,t.stylesheets),t.unsuspend)){var C=t.unsuspend;t.unsuspend=null,C()}},(t.imgBytes>V0?50:800)+e);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(v)}}:null}function Md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xd=null;function Nd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xd=new Map,e.forEach(bv,t),xd=null,Md.call(t))}function bv(t,e){if(!(e.state.loading&4)){var l=xd.get(t);if(l)var u=l.get(null);else{l=new Map,xd.set(t,l);for(var v=t.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var V=v[C];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(l.set(V.dataset.precedence,V),u=V)}u&&l.set(null,u)}v=e.instance,V=v.getAttribute("data-precedence"),C=l.get(V)||u,C===u&&l.set(null,v),l.set(V,v),this.count++,u=Md.bind(this),v.addEventListener("load",u),v.addEventListener("error",u),C?C.parentNode.insertBefore(v,C.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(v,t.firstChild)),e.state.loading|=4}}var Vf={$$typeof:D,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Cv(t,e,l,u,v,C,V,W,st){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=u,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function _g(t,e,l,u,v,C,V,W,st,vt,_t,xt){return t=new Cv(t,e,l,V,st,vt,_t,xt,W),e=1,C===!0&&(e|=24),C=Jn(3,null,null,e),t.current=C,C.stateNode=t,e=Cu(),e.refCount++,t.pooledCache=e,e.refCount++,C.memoizedState={element:u,isDehydrated:l,cache:e},or(C),t}function Og(t){return t?(t=hi,t):hi}function Rg(t,e,l,u,v,C){v=Og(v),u.context===null?u.context=v:u.pendingContext=v,u=Al(e),u.payload={element:l},C=C===void 0?null:C,C!==null&&(u.callback=C),l=_l(t,u,e),l!==null&&(Ge(l,t,e),mo(l,t,e))}function Mg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<e?l:e}}function P0(t,e){Mg(t,e),(t=t.alternate)&&Mg(t,e)}function xg(t){if(t.tag===13||t.tag===31){var e=Oa(t,67108864);e!==null&&Ge(e,t,67108864),P0(t,67108864)}}function Ng(t){if(t.tag===13||t.tag===31){var e=$n();e=ws(e);var l=Oa(t,e);l!==null&&Ge(l,t,e),P0(t,e)}}var Dd=!0;function Ev(t,e,l,u){var v=x.T;x.T=null;var C=L.p;try{L.p=2,X0(t,e,l,u)}finally{L.p=C,x.T=v}}function Tv(t,e,l,u){var v=x.T;x.T=null;var C=L.p;try{L.p=8,X0(t,e,l,u)}finally{L.p=C,x.T=v}}function X0(t,e,l,u){if(Dd){var v=Q0(u);if(v===null)N0(t,e,u,zd,l),zg(t,u);else if(_v(v,t,e,l,u))u.stopPropagation();else if(zg(t,u),e&4&&-1<Av.indexOf(t)){for(;v!==null;){var C=cl(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var V=sl(C.pendingLanes);if(V!==0){var W=C;for(W.pendingLanes|=2,W.entangledLanes|=2;V;){var st=1<<31-Ta(V);W.entanglements[1]|=st,V&=~st}jl(C),(ae&6)===0&&(Ka=re()+500,Hf(0))}}break;case 31:case 13:W=Oa(C,2),W!==null&&Ge(W,C,2),Ss(),P0(C,2)}if(C=Q0(u),C===null&&N0(t,e,u,zd,l),C===v)break;v=C}v!==null&&u.stopPropagation()}else N0(t,e,u,null,l)}}function Q0(t){return t=Io(t),K0(t)}var zd=null;function K0(t){if(zd=null,t=ul(t),t!==null){var e=h(t);if(e===null)t=null;else{var l=e.tag;if(l===13){if(t=c(e),t!==null)return t;t=null}else if(l===31){if(t=g(e),t!==null)return t;t=null}else if(l===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return zd=t,null}function Dg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case rn:return 2;case Je:return 8;case ct:case Mt:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var I0=!1,Ts=null,As=null,_s=null,Pf=new Map,Xf=new Map,Os=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(t,e){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Pf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Qf(t,e,l,u,v,C){return t===null||t.nativeEvent!==C?(t={blockedOn:e,domEventName:l,eventSystemFlags:u,nativeEvent:C,targetContainers:[v]},e!==null&&(e=cl(e),e!==null&&xg(e)),t):(t.eventSystemFlags|=u,e=t.targetContainers,v!==null&&e.indexOf(v)===-1&&e.push(v),t)}function _v(t,e,l,u,v){switch(e){case"focusin":return Ts=Qf(Ts,t,e,l,u,v),!0;case"dragenter":return As=Qf(As,t,e,l,u,v),!0;case"mouseover":return _s=Qf(_s,t,e,l,u,v),!0;case"pointerover":var C=v.pointerId;return Pf.set(C,Qf(Pf.get(C)||null,t,e,l,u,v)),!0;case"gotpointercapture":return C=v.pointerId,Xf.set(C,Qf(Xf.get(C)||null,t,e,l,u,v)),!0}return!1}function Ug(t){var e=ul(t.target);if(e!==null){var l=h(e);if(l!==null){if(e=l.tag,e===13){if(e=c(l),e!==null){t.blockedOn=e,Bi(t.priority,function(){Ng(l)});return}}else if(e===31){if(e=g(l),e!==null){t.blockedOn=e,Bi(t.priority,function(){Ng(l)});return}}else if(e===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ud(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var l=Q0(t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Kr=u,l.target.dispatchEvent(u),Kr=null}else return e=cl(l),e!==null&&xg(e),t.blockedOn=l,!1;e.shift()}return!0}function Gg(t,e,l){Ud(t)&&l.delete(e)}function Ov(){I0=!1,Ts!==null&&Ud(Ts)&&(Ts=null),As!==null&&Ud(As)&&(As=null),_s!==null&&Ud(_s)&&(_s=null),Pf.forEach(Gg),Xf.forEach(Gg)}function Gd(t,e){t.blockedOn===e&&(t.blockedOn=null,I0||(I0=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Ov)))}var Bd=null;function Bg(t){Bd!==t&&(Bd=t,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Bd===t&&(Bd=null);for(var e=0;e<t.length;e+=3){var l=t[e],u=t[e+1],v=t[e+2];if(typeof u!="function"){if(K0(u||l)===null)continue;break}var C=cl(l);C!==null&&(t.splice(e,3),e-=3,wu(C,{pending:!0,data:v,method:l.method,action:u},u,v))}}))}function lc(t){function e(st){return Gd(st,t)}Ts!==null&&Gd(Ts,t),As!==null&&Gd(As,t),_s!==null&&Gd(_s,t),Pf.forEach(e),Xf.forEach(e);for(var l=0;l<Os.length;l++){var u=Os[l];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Os.length&&(l=Os[0],l.blockedOn===null);)Ug(l),l.blockedOn===null&&Os.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var v=l[u],C=l[u+1],V=v[Nn]||null;if(typeof C=="function")V||Bg(l);else if(V){var W=null;if(C&&C.hasAttribute("formAction")){if(v=C,V=C[Nn]||null)W=V.formAction;else if(K0(v)!==null)continue}else W=V.action;typeof W=="function"?l[u+1]=W:(l.splice(u,3),u-=3),Bg(l)}}}function Hg(){function t(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(V){return v=V})},focusReset:"manual",scroll:"manual"})}function e(){v!==null&&(v(),v=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,v=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),v!==null&&(v(),v=null)}}}function Z0(t){this._internalRoot=t}Hd.prototype.render=Z0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(r(409));var l=e.current,u=$n();Rg(l,u,t,e,null,null)},Hd.prototype.unmount=Z0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rg(t.current,2,null,t,null,null),Ss(),e[si]=null}};function Hd(t){this._internalRoot=t}Hd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gi();t={blockedOn:null,target:t,priority:e};for(var l=0;l<Os.length&&e!==0&&e<Os[l].priority;l++);Os.splice(l,0,t),l===0&&Ug(t)}};var jg=n.version;if(jg!=="19.2.0")throw Error(r(527,jg,"19.2.0"));L.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=b(e),t=t!==null?O(t):null,t=t===null?null:t.stateNode,t};var Rv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{hn=jd.inject(Rv),_n=jd}catch{}}return If.createRoot=function(t,e){if(!o(t))throw Error(r(299));var l=!1,u="",v=To,C=Ao,V=qu;return e!=null&&(e.unstable_strictMode===!0&&(l=!0),e.identifierPrefix!==void 0&&(u=e.identifierPrefix),e.onUncaughtError!==void 0&&(v=e.onUncaughtError),e.onCaughtError!==void 0&&(C=e.onCaughtError),e.onRecoverableError!==void 0&&(V=e.onRecoverableError)),e=_g(t,1,!1,null,null,l,u,null,v,C,V,Hg),t[si]=e.current,x0(t),new Z0(e)},If.hydrateRoot=function(t,e,l){if(!o(t))throw Error(r(299));var u=!1,v="",C=To,V=Ao,W=qu,st=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(V=l.onCaughtError),l.onRecoverableError!==void 0&&(W=l.onRecoverableError),l.formState!==void 0&&(st=l.formState)),e=_g(t,1,!0,e,l??null,u,v,st,C,V,W,Hg),e.context=Og(null),l=e.current,u=$n(),u=ws(u),v=Al(u),v.callback=null,_l(l,v,u),l=u,e.current.lanes=l,ol(e,l),jl(e),t[si]=e.current,x0(t),new Hd(e)},If.version="19.2.0",If}var Ig;function Lv(){if(Ig)return k0.exports;Ig=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(n){console.error(n)}}return d(),k0.exports=jv(),k0.exports}var wv=Lv();const Yv=n0(wv);X1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(d){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(d[r]=s[r])}return d},rh.apply(this,arguments)}var Ds;(function(d){d.Pop="POP",d.Push="PUSH",d.Replace="REPLACE"})(Ds||(Ds={}));const Zg="popstate";function qv(d){d===void 0&&(d={});function n(r,o){let{pathname:h,search:c,hash:g}=r.location;return Tp("",{pathname:h,search:c,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(r,o){return typeof o=="string"?o:K1(o)}return Pv(n,s,null,d)}function In(d,n){if(d===!1||d===null||typeof d>"u")throw new Error(n)}function Q1(d,n){if(!d){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Vv(){return Math.random().toString(36).substr(2,8)}function Jg(d,n){return{usr:d.state,key:d.key,idx:n}}function Tp(d,n,s,r){return s===void 0&&(s=null),rh({pathname:typeof d=="string"?d:d.pathname,search:"",hash:""},typeof n=="string"?gc(n):n,{state:s,key:n&&n.key||r||Vv()})}function K1(d){let{pathname:n="/",search:s="",hash:r=""}=d;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function gc(d){let n={};if(d){let s=d.indexOf("#");s>=0&&(n.hash=d.substr(s),d=d.substr(0,s));let r=d.indexOf("?");r>=0&&(n.search=d.substr(r),d=d.substr(0,r)),d&&(n.pathname=d)}return n}function Pv(d,n,s,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:h=!1}=r,c=o.history,g=Ds.Pop,p=null,b=O();b==null&&(b=0,c.replaceState(rh({},c.state,{idx:b}),""));function O(){return(c.state||{idx:null}).idx}function R(){g=Ds.Pop;let w=O(),Y=w==null?null:w-b;b=w,p&&p({action:g,location:H.location,delta:Y})}function E(w,Y){g=Ds.Push;let G=Tp(H.location,w,Y);b=O()+1;let D=Jg(G,b),j=H.createHref(G);try{c.pushState(D,"",j)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(j)}h&&p&&p({action:g,location:H.location,delta:1})}function z(w,Y){g=Ds.Replace;let G=Tp(H.location,w,Y);b=O();let D=Jg(G,b),j=H.createHref(G);c.replaceState(D,"",j),h&&p&&p({action:g,location:H.location,delta:0})}function S(w){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,G=typeof w=="string"?w:K1(w);return G=G.replace(/ $/,"%20"),In(Y,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,Y)}let H={get action(){return g},get location(){return d(o,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Zg,R),p=w,()=>{o.removeEventListener(Zg,R),p=null}},createHref(w){return n(o,w)},createURL:S,encodeLocation(w){let Y=S(w);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:E,replace:z,go(w){return c.go(w)}};return H}var Fg;(function(d){d.data="data",d.deferred="deferred",d.redirect="redirect",d.error="error"})(Fg||(Fg={}));function Xv(d,n,s){return s===void 0&&(s="/"),Qv(d,n,s)}function Qv(d,n,s,r){let o=typeof n=="string"?gc(n):n,h=J1(o.pathname||"/",s);if(h==null)return null;let c=I1(d);Kv(c);let g=null;for(let p=0;g==null&&p<c.length;++p){let b=i2(h);g=e2(c[p],b)}return g}function I1(d,n,s,r){n===void 0&&(n=[]),s===void 0&&(s=[]),r===void 0&&(r="");let o=(h,c,g)=>{let p={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:c,route:h};p.relativePath.startsWith("/")&&(In(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let b=zo([r,p.relativePath]),O=s.concat(p);h.children&&h.children.length>0&&(In(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),I1(h.children,n,O,b)),!(h.path==null&&!h.index)&&n.push({path:b,score:$v(b,h.index),routesMeta:O})};return d.forEach((h,c)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))o(h,c);else for(let p of Z1(h.path))o(h,c,p)}),n}function Z1(d){let n=d.split("/");if(n.length===0)return[];let[s,...r]=n,o=s.endsWith("?"),h=s.replace(/\?$/,"");if(r.length===0)return o?[h,""]:[h];let c=Z1(r.join("/")),g=[];return g.push(...c.map(p=>p===""?h:[h,p].join("/"))),o&&g.push(...c),g.map(p=>d.startsWith("/")&&p===""?"/":p)}function Kv(d){d.sort((n,s)=>n.score!==s.score?s.score-n.score:t2(n.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const Iv=/^:[\w-]+$/,Zv=3,Jv=2,Fv=1,kv=10,Wv=-2,kg=d=>d==="*";function $v(d,n){let s=d.split("/"),r=s.length;return s.some(kg)&&(r+=Wv),n&&(r+=Jv),s.filter(o=>!kg(o)).reduce((o,h)=>o+(Iv.test(h)?Zv:h===""?Fv:kv),r)}function t2(d,n){return d.length===n.length&&d.slice(0,-1).every((r,o)=>r===n[o])?d[d.length-1]-n[n.length-1]:0}function e2(d,n,s){let{routesMeta:r}=d,o={},h="/",c=[];for(let g=0;g<r.length;++g){let p=r[g],b=g===r.length-1,O=h==="/"?n:n.slice(h.length)||"/",R=n2({path:p.relativePath,caseSensitive:p.caseSensitive,end:b},O),E=p.route;if(!R)return null;Object.assign(o,R.params),c.push({params:o,pathname:zo([h,R.pathname]),pathnameBase:c2(zo([h,R.pathnameBase])),route:E}),R.pathnameBase!=="/"&&(h=zo([h,R.pathnameBase]))}return c}function n2(d,n){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[s,r]=a2(d.path,d.caseSensitive,d.end),o=n.match(s);if(!o)return null;let h=o[0],c=h.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((b,O,R)=>{let{paramName:E,isOptional:z}=O;if(E==="*"){let H=g[R]||"";c=h.slice(0,h.length-H.length).replace(/(.)\/+$/,"$1")}const S=g[R];return z&&!S?b[E]=void 0:b[E]=(S||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:c,pattern:d}}function a2(d,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Q1(d==="*"||!d.endsWith("*")||d.endsWith("/*"),'Route path "'+d+'" will be treated as if it were '+('"'+d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+d.replace(/\*$/,"/*")+'".'));let r=[],o="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,g,p)=>(r.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(r.push({paramName:"*"}),o+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":d!==""&&d!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),r]}function i2(d){try{return d.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Q1(!1,'The URL path "'+d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),d}}function J1(d,n){if(n==="/")return d;if(!d.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,r=d.charAt(s);return r&&r!=="/"?null:d.slice(s)||"/"}function l2(d,n){n===void 0&&(n="/");let{pathname:s,search:r="",hash:o=""}=typeof d=="string"?gc(d):d;return{pathname:s?s.startsWith("/")?s:r2(s,n):n,search:f2(r),hash:h2(o)}}function r2(d,n){let s=n.replace(/\/+$/,"").split("/");return d.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function ep(d,n,s,r){return"Cannot include a '"+d+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s2(d){return d.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function o2(d,n){let s=s2(d);return n?s.map((r,o)=>o===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function u2(d,n,s,r){r===void 0&&(r=!1);let o;typeof d=="string"?o=gc(d):(o=rh({},d),In(!o.pathname||!o.pathname.includes("?"),ep("?","pathname","search",o)),In(!o.pathname||!o.pathname.includes("#"),ep("#","pathname","hash",o)),In(!o.search||!o.search.includes("#"),ep("#","search","hash",o)));let h=d===""||o.pathname==="",c=h?"/":o.pathname,g;if(c==null)g=s;else{let R=n.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),R-=1;o.pathname=E.join("/")}g=R>=0?n[R]:"/"}let p=l2(o,g),b=c&&c!=="/"&&c.endsWith("/"),O=(h||c===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(b||O)&&(p.pathname+="/"),p}const zo=d=>d.join("/").replace(/\/\/+/g,"/"),c2=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),f2=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,h2=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function d2(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}const F1=["post","put","patch","delete"];new Set(F1);const p2=["get",...F1];new Set(p2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sh(){return sh=Object.assign?Object.assign.bind():function(d){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(d[r]=s[r])}return d},sh.apply(this,arguments)}const jp=Ct.createContext(null),g2=Ct.createContext(null),i0=Ct.createContext(null),l0=Ct.createContext(null),mc=Ct.createContext({outlet:null,matches:[],isDataRoute:!1}),k1=Ct.createContext(null);function r0(){return Ct.useContext(l0)!=null}function Lp(){return r0()||In(!1),Ct.useContext(l0).location}function W1(d){Ct.useContext(i0).static||Ct.useLayoutEffect(d)}function wp(){let{isDataRoute:d}=Ct.useContext(mc);return d?M2():m2()}function m2(){r0()||In(!1);let d=Ct.useContext(jp),{basename:n,future:s,navigator:r}=Ct.useContext(i0),{matches:o}=Ct.useContext(mc),{pathname:h}=Lp(),c=JSON.stringify(o2(o,s.v7_relativeSplatPath)),g=Ct.useRef(!1);return W1(()=>{g.current=!0}),Ct.useCallback(function(b,O){if(O===void 0&&(O={}),!g.current)return;if(typeof b=="number"){r.go(b);return}let R=u2(b,JSON.parse(c),h,O.relative==="path");d==null&&n!=="/"&&(R.pathname=R.pathname==="/"?n:zo([n,R.pathname])),(O.replace?r.replace:r.push)(R,O.state,O)},[n,r,c,h,d])}function v2(d,n){return y2(d,n)}function y2(d,n,s,r){r0()||In(!1);let{navigator:o}=Ct.useContext(i0),{matches:h}=Ct.useContext(mc),c=h[h.length-1],g=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let b=Lp(),O;if(n){var R;let w=typeof n=="string"?gc(n):n;p==="/"||(R=w.pathname)!=null&&R.startsWith(p)||In(!1),O=w}else O=b;let E=O.pathname||"/",z=E;if(p!=="/"){let w=p.replace(/^\//,"").split("/");z="/"+E.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=Xv(d,{pathname:z}),H=T2(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},g,w.params),pathname:zo([p,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?p:zo([p,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),h,s,r);return n&&H?Ct.createElement(l0.Provider,{value:{location:sh({pathname:"/",search:"",hash:"",state:null,key:"default"},O),navigationType:Ds.Pop}},H):H}function S2(){let d=R2(),n=d2(d)?d.status+" "+d.statusText:d instanceof Error?d.message:JSON.stringify(d),s=d instanceof Error?d.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ct.createElement(Ct.Fragment,null,Ct.createElement("h2",null,"Unexpected Application Error!"),Ct.createElement("h3",{style:{fontStyle:"italic"}},n),s?Ct.createElement("pre",{style:o},s):null,null)}const b2=Ct.createElement(S2,null);class C2 extends Ct.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?Ct.createElement(mc.Provider,{value:this.props.routeContext},Ct.createElement(k1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E2(d){let{routeContext:n,match:s,children:r}=d,o=Ct.useContext(jp);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),Ct.createElement(mc.Provider,{value:n},r)}function T2(d,n,s,r){var o;if(n===void 0&&(n=[]),s===void 0&&(s=null),r===void 0&&(r=null),d==null){var h;if(!s)return null;if(s.errors)d=s.matches;else if((h=r)!=null&&h.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)d=s.matches;else return null}let c=d,g=(o=s)==null?void 0:o.errors;if(g!=null){let O=c.findIndex(R=>R.route.id&&(g==null?void 0:g[R.route.id])!==void 0);O>=0||In(!1),c=c.slice(0,Math.min(c.length,O+1))}let p=!1,b=-1;if(s&&r&&r.v7_partialHydration)for(let O=0;O<c.length;O++){let R=c[O];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(b=O),R.route.id){let{loaderData:E,errors:z}=s,S=R.route.loader&&E[R.route.id]===void 0&&(!z||z[R.route.id]===void 0);if(R.route.lazy||S){p=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((O,R,E)=>{let z,S=!1,H=null,w=null;s&&(z=g&&R.route.id?g[R.route.id]:void 0,H=R.route.errorElement||b2,p&&(b<0&&E===0?(x2("route-fallback"),S=!0,w=null):b===E&&(S=!0,w=R.route.hydrateFallbackElement||null)));let Y=n.concat(c.slice(0,E+1)),G=()=>{let D;return z?D=H:S?D=w:R.route.Component?D=Ct.createElement(R.route.Component,null):R.route.element?D=R.route.element:D=O,Ct.createElement(E2,{match:R,routeContext:{outlet:O,matches:Y,isDataRoute:s!=null},children:D})};return s&&(R.route.ErrorBoundary||R.route.errorElement||E===0)?Ct.createElement(C2,{location:s.location,revalidation:s.revalidation,component:H,error:z,children:G(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):G()},null)}var $1=(function(d){return d.UseBlocker="useBlocker",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d})($1||{}),tm=(function(d){return d.UseBlocker="useBlocker",d.UseLoaderData="useLoaderData",d.UseActionData="useActionData",d.UseRouteError="useRouteError",d.UseNavigation="useNavigation",d.UseRouteLoaderData="useRouteLoaderData",d.UseMatches="useMatches",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d.UseRouteId="useRouteId",d})(tm||{});function A2(d){let n=Ct.useContext(jp);return n||In(!1),n}function _2(d){let n=Ct.useContext(g2);return n||In(!1),n}function O2(d){let n=Ct.useContext(mc);return n||In(!1),n}function em(d){let n=O2(),s=n.matches[n.matches.length-1];return s.route.id||In(!1),s.route.id}function R2(){var d;let n=Ct.useContext(k1),s=_2(),r=em();return n!==void 0?n:(d=s.errors)==null?void 0:d[r]}function M2(){let{router:d}=A2($1.UseNavigateStable),n=em(tm.UseNavigateStable),s=Ct.useRef(!1);return W1(()=>{s.current=!0}),Ct.useCallback(function(o,h){h===void 0&&(h={}),s.current&&(typeof o=="number"?d.navigate(o):d.navigate(o,sh({fromRouteId:n},h)))},[d,n])}const Wg={};function x2(d,n,s){Wg[d]||(Wg[d]=!0)}function N2(d,n){d==null||d.v7_startTransition,d==null||d.v7_relativeSplatPath}function kd(d){In(!1)}function D2(d){let{basename:n="/",children:s=null,location:r,navigationType:o=Ds.Pop,navigator:h,static:c=!1,future:g}=d;r0()&&In(!1);let p=n.replace(/^\/*/,"/"),b=Ct.useMemo(()=>({basename:p,navigator:h,static:c,future:sh({v7_relativeSplatPath:!1},g)}),[p,g,h,c]);typeof r=="string"&&(r=gc(r));let{pathname:O="/",search:R="",hash:E="",state:z=null,key:S="default"}=r,H=Ct.useMemo(()=>{let w=J1(O,p);return w==null?null:{location:{pathname:w,search:R,hash:E,state:z,key:S},navigationType:o}},[p,O,R,E,z,S,o]);return H==null?null:Ct.createElement(i0.Provider,{value:b},Ct.createElement(l0.Provider,{children:s,value:H}))}function z2(d){let{children:n,location:s}=d;return v2(Ap(n),s)}new Promise(()=>{});function Ap(d,n){n===void 0&&(n=[]);let s=[];return Ct.Children.forEach(d,(r,o)=>{if(!Ct.isValidElement(r))return;let h=[...n,o];if(r.type===Ct.Fragment){s.push.apply(s,Ap(r.props.children,h));return}r.type!==kd&&In(!1),!r.props.index||!r.props.children||In(!1);let c={id:r.props.id||h.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ap(r.props.children,h)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(d){return d===void 0&&(d=""),new URLSearchParams(typeof d=="string"||Array.isArray(d)||d instanceof URLSearchParams?d:Object.keys(d).reduce((n,s)=>{let r=d[s];return n.concat(Array.isArray(r)?r.map(o=>[s,o]):[[s,r]])},[]))}function U2(d,n){let s=_p(d);return n&&n.forEach((r,o)=>{s.has(o)||n.getAll(o).forEach(h=>{s.append(o,h)})}),s}const G2="6";try{window.__reactRouterVersion=G2}catch{}const B2="startTransition",$g=Uv[B2];function H2(d){let{basename:n,children:s,future:r,window:o}=d,h=Ct.useRef();h.current==null&&(h.current=qv({window:o,v5Compat:!0}));let c=h.current,[g,p]=Ct.useState({action:c.action,location:c.location}),{v7_startTransition:b}=r||{},O=Ct.useCallback(R=>{b&&$g?$g(()=>p(R)):p(R)},[p,b]);return Ct.useLayoutEffect(()=>c.listen(O),[c,O]),Ct.useEffect(()=>N2(r),[r]),Ct.createElement(D2,{basename:n,children:s,location:g.location,navigationType:g.action,navigator:c,future:r})}var t1;(function(d){d.UseScrollRestoration="useScrollRestoration",d.UseSubmit="useSubmit",d.UseSubmitFetcher="useSubmitFetcher",d.UseFetcher="useFetcher",d.useViewTransitionState="useViewTransitionState"})(t1||(t1={}));var e1;(function(d){d.UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration"})(e1||(e1={}));function nm(d){let n=Ct.useRef(_p(d)),s=Ct.useRef(!1),r=Lp(),o=Ct.useMemo(()=>U2(r.search,s.current?null:n.current),[r.search]),h=wp(),c=Ct.useCallback((g,p)=>{const b=_p(typeof g=="function"?g(o):g);s.current=!0,h("?"+b,p)},[h,o]);return[o,c]}function j2(){const d=wp(),[n,s]=Ct.useState(!1),[r,o]=Ct.useState(""),[h,c]=Ct.useState("demo"),g=p=>{p.preventDefault(),r.trim()&&h.trim()&&d(`/student?room=${h}&name=${encodeURIComponent(r.trim())}`)};return n?lt.jsxs("div",{className:"landing-page",children:[lt.jsxs("div",{className:"background-decorations",children:[lt.jsx("div",{className:"bg-blob bg-blob-1"}),lt.jsx("div",{className:"bg-blob bg-blob-2"}),lt.jsx("div",{className:"bg-gradient-overlay"})]}),lt.jsx("main",{className:"landing-main",children:lt.jsx("div",{className:"glass-surface landing-container",style:{maxWidth:"500px"},children:lt.jsxs("div",{className:"landing-content",children:[lt.jsx("span",{className:"glass-pill landing-badge",children:lt.jsx("span",{children:"FEATHER"})}),lt.jsxs("div",{className:"landing-header",children:[lt.jsx("h1",{className:"landing-title",style:{fontSize:"2rem"},children:"Join as Student"}),lt.jsx("p",{className:"landing-description",children:"Enter your name and room code to start drawing"})]}),lt.jsxs("form",{onSubmit:g,style:{width:"100%",marginTop:"2rem"},children:[lt.jsxs("div",{style:{marginBottom:"1.5rem"},children:[lt.jsx("label",{htmlFor:"studentName",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Your Name"}),lt.jsx("input",{id:"studentName",type:"text",value:r,onChange:p=>o(p.target.value),placeholder:"Enter your name",autoFocus:!0,required:!0,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"8px",outline:"none",transition:"border-color 0.2s"},onFocus:p=>p.target.style.borderColor="#667eea",onBlur:p=>p.target.style.borderColor="#ddd"})]}),lt.jsxs("div",{style:{marginBottom:"1.5rem"},children:[lt.jsx("label",{htmlFor:"roomCode",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Room Code"}),lt.jsx("input",{id:"roomCode",type:"text",value:h,onChange:p=>c(p.target.value.toUpperCase()),placeholder:"Enter room code",required:!0,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"8px",outline:"none",transition:"border-color 0.2s",fontFamily:"monospace",letterSpacing:"2px"},onFocus:p=>p.target.style.borderColor="#667eea",onBlur:p=>p.target.style.borderColor="#ddd"})]}),lt.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[lt.jsx("button",{type:"button",onClick:()=>s(!1),style:{flex:1,padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",border:"2px solid #ddd",borderRadius:"8px",background:"white",cursor:"pointer",transition:"all 0.2s"},children:" Back"}),lt.jsx("button",{type:"submit",style:{flex:2,padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",cursor:"pointer",transition:"transform 0.2s"},onMouseOver:p=>p.target.style.transform="translateY(-2px)",onMouseOut:p=>p.target.style.transform="translateY(0)",children:"Join Room "})]})]})]})})})]}):lt.jsxs("div",{className:"landing-page",children:[lt.jsxs("div",{className:"background-decorations",children:[lt.jsx("div",{className:"bg-blob bg-blob-1"}),lt.jsx("div",{className:"bg-blob bg-blob-2"}),lt.jsx("div",{className:"bg-gradient-overlay"})]}),lt.jsx("main",{className:"landing-main",children:lt.jsxs("div",{className:"glass-surface landing-container",children:[lt.jsxs("div",{className:"landing-content",children:[lt.jsx("span",{className:"glass-pill landing-badge",children:lt.jsx("span",{children:"FEATHER"})}),lt.jsxs("div",{className:"landing-header",children:[lt.jsx("h1",{className:"landing-title",children:"Teach visually. Collaborate instantly."}),lt.jsx("p",{className:"landing-description",children:"Feather streams pencil-perfect strokes between teachers and students in real time. Instant sync, buttery smooth annotation tools, and delightful classroom-ready controls built for iPad and stylus workflows."})]}),lt.jsxs("dl",{className:"features",children:[lt.jsxs("div",{className:"feature-card",children:[lt.jsx("dt",{className:"feature-title",children:"Palm rejection"}),lt.jsx("dd",{className:"feature-subtitle",children:"Silky palm drawing"})]}),lt.jsxs("div",{className:"feature-card",children:[lt.jsx("dt",{className:"feature-title",children:"Frameless logos"}),lt.jsx("dd",{className:"feature-subtitle",children:"Delightful annotations"})]}),lt.jsxs("div",{className:"feature-card",children:[lt.jsx("dt",{className:"feature-title",children:"Realtime sync"}),lt.jsx("dd",{className:"feature-subtitle",children:"Sub-second latency"})]})]})]}),lt.jsxs("div",{className:"workspace-section",children:[lt.jsx("p",{className:"workspace-label",children:"PICK YOUR WORKSPACE"}),lt.jsxs("div",{className:"workspace-cards",children:[lt.jsxs("a",{onClick:()=>d("/teacher?room=demo"),className:"glass-button teacher-card",children:[lt.jsxs("div",{children:[lt.jsx("p",{className:"workspace-title",children:"Teacher dashboard"}),lt.jsx("p",{className:"workspace-description",children:"Monitor your students, sync views, and annotate the board. Assign templates/images, and manage the class."})]}),lt.jsx("span",{className:"workspace-emoji",children:""})]}),lt.jsxs("a",{onClick:()=>s(!0),className:"glass-button student-card",children:[lt.jsxs("div",{children:[lt.jsx("p",{className:"workspace-title",children:"Student workspace"}),lt.jsx("p",{className:"workspace-description",children:"Sketch on a public or draw alongside the class, with undo/redo, templates, and stylus-first controls."})]}),lt.jsx("span",{className:"workspace-emoji",children:""})]})]})]})]})})]})}const L2=Math.PI/180;function w2(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Do=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:Do,version:"10.0.7",isBrowser:w2(),isUnminified:/param/.test((function(d){}).toString()),dblClickWindow:400,getAngle(d){return Vt.angleDeg?d*L2:d},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var d,n;return(n=(d=Vt.Transformer)===null||d===void 0?void 0:d.isTransforming())!==null&&n!==void 0?n:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:Do.document,_injectGlobal(d){typeof Do.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Do.Konva=d}},yn=d=>{Vt[d.prototype.getClassName()]=d};Vt._injectGlobal(Vt);const Y2=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,n1=()=>{if(typeof document>"u")throw new Error(Y2)};class ii{constructor(n=[1,0,0,1,0,0]){this.dirty=!1,this.m=n&&n.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ii(this.m)}copyInto(n){n.m[0]=this.m[0],n.m[1]=this.m[1],n.m[2]=this.m[2],n.m[3]=this.m[3],n.m[4]=this.m[4],n.m[5]=this.m[5]}point(n){const s=this.m;return{x:s[0]*n.x+s[2]*n.y+s[4],y:s[1]*n.x+s[3]*n.y+s[5]}}translate(n,s){return this.m[4]+=this.m[0]*n+this.m[2]*s,this.m[5]+=this.m[1]*n+this.m[3]*s,this}scale(n,s){return this.m[0]*=n,this.m[1]*=n,this.m[2]*=s,this.m[3]*=s,this}rotate(n){const s=Math.cos(n),r=Math.sin(n),o=this.m[0]*s+this.m[2]*r,h=this.m[1]*s+this.m[3]*r,c=this.m[0]*-r+this.m[2]*s,g=this.m[1]*-r+this.m[3]*s;return this.m[0]=o,this.m[1]=h,this.m[2]=c,this.m[3]=g,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(n,s){const r=this.m[0]+this.m[2]*s,o=this.m[1]+this.m[3]*s,h=this.m[2]+this.m[0]*n,c=this.m[3]+this.m[1]*n;return this.m[0]=r,this.m[1]=o,this.m[2]=h,this.m[3]=c,this}multiply(n){const s=this.m[0]*n.m[0]+this.m[2]*n.m[1],r=this.m[1]*n.m[0]+this.m[3]*n.m[1],o=this.m[0]*n.m[2]+this.m[2]*n.m[3],h=this.m[1]*n.m[2]+this.m[3]*n.m[3],c=this.m[0]*n.m[4]+this.m[2]*n.m[5]+this.m[4],g=this.m[1]*n.m[4]+this.m[3]*n.m[5]+this.m[5];return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=h,this.m[4]=c,this.m[5]=g,this}invert(){const n=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),s=this.m[3]*n,r=-this.m[1]*n,o=-this.m[2]*n,h=this.m[0]*n,c=n*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=n*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=h,this.m[4]=c,this.m[5]=g,this}getMatrix(){return this.m}decompose(){const n=this.m[0],s=this.m[1],r=this.m[2],o=this.m[3],h=this.m[4],c=this.m[5],g=n*o-s*r,p={x:h,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(n!=0||s!=0){const b=Math.sqrt(n*n+s*s);p.rotation=s>0?Math.acos(n/b):-Math.acos(n/b),p.scaleX=b,p.scaleY=g/b,p.skewX=(n*r+s*o)/g,p.skewY=0}else if(r!=0||o!=0){const b=Math.sqrt(r*r+o*o);p.rotation=Math.PI/2-(o>0?Math.acos(-r/b):-Math.acos(r/b)),p.scaleX=g/b,p.scaleY=b,p.skewX=0,p.skewY=(n*r+s*o)/g}return p.rotation=dt._getRotation(p.rotation),p}}const q2="[object Array]",V2="[object Number]",P2="[object String]",X2="[object Boolean]",Q2=Math.PI/180,K2=180/Math.PI,np="#",I2="",Z2="0",J2="Konva warning: ",a1="Konva error: ",F2="rgb(",ap={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k2=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Ld=[];const W2=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)},dt={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===q2},_isNumber(d){return Object.prototype.toString.call(d)===V2&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===P2},_isBoolean(d){return Object.prototype.toString.call(d)===X2},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const n=d[0];return n==="#"||n==="."||n===n.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){Ld.push(d),Ld.length===1&&W2(function(){const n=Ld;Ld=[],n.forEach(function(s){s()})})},createCanvasElement(){n1();const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return n1(),document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,n){const s=dt.createImageElement();s.onload=function(){n(s)},s.src=d},_rgbToHex(d,n,s){return((1<<24)+(d<<16)+(n<<8)+s).toString(16).slice(1)},_hexToRgb(d){d=d.replace(np,I2);const n=parseInt(d,16);return{r:n>>16&255,g:n>>8&255,b:n&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=Z2+d;return np+d},getRGB(d){let n;return d in ap?(n=ap[d],{r:n[0],g:n[1],b:n[2]}):d[0]===np?this._hexToRgb(d.substring(1)):d.substr(0,4)===F2?(n=k2.exec(d.replace(/ /g,"")),{r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",dt._namedColorToRBA(d)||dt._hex3ColorToRGBA(d)||dt._hex4ColorToRGBA(d)||dt._hex6ColorToRGBA(d)||dt._hex8ColorToRGBA(d)||dt._rgbColorToRGBA(d)||dt._rgbaColorToRGBA(d)||dt._hslColorToRGBA(d)},_namedColorToRBA(d){const n=ap[d.toLowerCase()];return n?{r:n[0],g:n[1],b:n[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const n=d.split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const n=d.split(/ *, */).map((s,r)=>s.slice(-1)==="%"?r===3?parseInt(s)/100:parseInt(s)/100*255:Number(s));return{r:n[0],g:n[1],b:n[2],a:n[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[n,...s]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),r=Number(s[0])/360,o=Number(s[1])/100,h=Number(s[2])/100;let c,g,p;if(o===0)return p=h*255,{r:Math.round(p),g:Math.round(p),b:Math.round(p),a:1};h<.5?c=h*(1+o):c=h+o-h*o;const b=2*h-c,O=[0,0,0];for(let R=0;R<3;R++)g=r+1/3*-(R-1),g<0&&g++,g>1&&g--,6*g<1?p=b+(c-b)*6*g:2*g<1?p=c:3*g<2?p=b+(c-b)*(2/3-g)*6:p=b,O[R]=p*255;return{r:Math.round(O[0]),g:Math.round(O[1]),b:Math.round(O[2]),a:1}}},haveIntersection(d,n){return!(n.x>d.x+d.width||n.x+n.width<d.x||n.y>d.y+d.height||n.y+n.height<d.y)},cloneObject(d){const n={};for(const s in d)this._isPlainObject(d[s])?n[s]=this.cloneObject(d[s]):this._isArray(d[s])?n[s]=this.cloneArray(d[s]):n[s]=d[s];return n},cloneArray(d){return d.slice(0)},degToRad(d){return d*Q2},radToDeg(d){return d*K2},_degToRad(d){return dt.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),dt.degToRad(d)},_radToDeg(d){return dt.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),dt.radToDeg(d)},_getRotation(d){return Vt.angleDeg?dt.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(a1+d)},error(d){console.error(a1+d)},warn(d){Vt.showWarnings&&console.warn(J2+d)},each(d,n){for(const s in d)n(s,d[s])},_inRange(d,n,s){return n<=d&&d<s},_getProjectionToSegment(d,n,s,r,o,h){let c,g,p;const b=(d-s)*(d-s)+(n-r)*(n-r);if(b==0)c=d,g=n,p=(o-s)*(o-s)+(h-r)*(h-r);else{const O=((o-d)*(s-d)+(h-n)*(r-n))/b;O<0?(c=d,g=n,p=(d-o)*(d-o)+(n-h)*(n-h)):O>1?(c=s,g=r,p=(s-o)*(s-o)+(r-h)*(r-h)):(c=d+O*(s-d),g=n+O*(r-n),p=(c-o)*(c-o)+(g-h)*(g-h))}return[c,g,p]},_getProjectionToLine(d,n,s){const r=dt.cloneObject(d);let o=Number.MAX_VALUE;return n.forEach(function(h,c){if(!s&&c===n.length-1)return;const g=n[(c+1)%n.length],p=dt._getProjectionToSegment(h.x,h.y,g.x,g.y,d.x,d.y),b=p[0],O=p[1],R=p[2];R<o&&(r.x=b,r.y=O,o=R)}),r},_prepareArrayForTween(d,n,s){const r=[],o=[];if(d.length>n.length){const c=n;n=d,d=c}for(let c=0;c<d.length;c+=2)r.push({x:d[c],y:d[c+1]});for(let c=0;c<n.length;c+=2)o.push({x:n[c],y:n[c+1]});const h=[];return o.forEach(function(c){const g=dt._getProjectionToLine(c,r,s);h.push(g.x),h.push(g.y)}),h},_prepareToStringify(d){let n;d.visitedByCircularReferenceRemoval=!0;for(const s in d)if(d.hasOwnProperty(s)&&d[s]&&typeof d[s]=="object"){if(n=Object.getOwnPropertyDescriptor(d,s),d[s].visitedByCircularReferenceRemoval||dt._isElement(d[s]))if(n.configurable)delete d[s];else return null;else if(dt._prepareToStringify(d[s])===null)if(n.configurable)delete d[s];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,n){for(const s in n)d[s]=n[s];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){Vt.releaseCanvasOnDestroy&&d.forEach(n=>{n.width=0,n.height=0})},drawRoundedRectPath(d,n,s,r){let o=n<0?n:0,h=s<0?s:0;n=Math.abs(n),s=Math.abs(s);let c=0,g=0,p=0,b=0;typeof r=="number"?c=g=p=b=Math.min(r,n/2,s/2):(c=Math.min(r[0]||0,n/2,s/2),g=Math.min(r[1]||0,n/2,s/2),b=Math.min(r[2]||0,n/2,s/2),p=Math.min(r[3]||0,n/2,s/2)),d.moveTo(o+c,h),d.lineTo(o+n-g,h),d.arc(o+n-g,h+g,g,Math.PI*3/2,0,!1),d.lineTo(o+n,h+s-b),d.arc(o+n-b,h+s-b,b,0,Math.PI/2,!1),d.lineTo(o+p,h+s),d.arc(o+p,h+s-p,p,Math.PI/2,Math.PI,!1),d.lineTo(o,h+c),d.arc(o+c,h+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(d,n,s,r,o){r=Math.abs(r);for(let h=0;h<s;h++){const c=n[(h-1+s)%s],g=n[h],p=n[(h+1)%s],b={x:g.x-c.x,y:g.y-c.y},O={x:p.x-g.x,y:p.y-g.y},R=Math.hypot(b.x,b.y),E=Math.hypot(O.x,O.y);let z;typeof o=="number"?z=o:z=h<o.length?o[h]:0,z=r*Math.cos(Math.PI/s)*Math.min(1,z/r*2);const H={x:b.x/R,y:b.y/R},w={x:O.x/E,y:O.y/E},Y={x:g.x-H.x*z,y:g.y-H.y*z},G={x:g.x+w.x*z,y:g.y+w.y*z};h===0?d.moveTo(Y.x,Y.y):d.lineTo(Y.x,Y.y),d.arcTo(g.x,g.y,G.x,G.y,z)}}};function $2(d){const n=[],s=d.length,r=dt;for(let o=0;o<s;o++){let h=d[o];r._isNumber(h)?h=Math.round(h*1e3)/1e3:r._isString(h)||(h=h+""),n.push(h)}return n}const i1=",",ty="(",ey=")",ny="([",ay="])",iy=";",ly="()",ry="=",l1=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],sy=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],oy=100;let wd=null;function r1(){if(wd!==null)return wd;try{const n=dt.createCanvasElement().getContext("2d");return n?!!n&&"filter"in n:(wd=!1,!1)}catch{return wd=!1,!1}}class s0{constructor(n){this.canvas=n,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(n){n.fillEnabled()&&this._fill(n)}_fill(n){}strokeShape(n){n.hasStroke()&&this._stroke(n)}_stroke(n){}fillStrokeShape(n){n.attrs.fillAfterStrokeEnabled?(this.strokeShape(n),this.fillShape(n)):(this.fillShape(n),this.strokeShape(n))}getTrace(n,s){let r=this.traceArr,o=r.length,h="",c,g,p,b;for(c=0;c<o;c++)g=r[c],p=g.method,p?(b=g.args,h+=p,n?h+=ly:dt._isArray(b[0])?h+=ny+b.join(i1)+ay:(s&&(b=b.map(O=>typeof O=="number"?Math.floor(O):O)),h+=ty+b.join(i1)+ey)):(h+=g.property,n||(h+=ry+g.val)),h+=iy;return h}clearTrace(){this.traceArr=[]}_trace(n){let s=this.traceArr,r;s.push(n),r=s.length,r>=oy&&s.shift()}reset(){const n=this.getCanvas().getPixelRatio();this.setTransform(1*n,0,0,1*n,0,0)}getCanvas(){return this.canvas}clear(n){const s=this.getCanvas();n?this.clearRect(n.x||0,n.y||0,n.width||0,n.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(n){const s=n.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(n){const s=n.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(n){const s=n.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}_applyMiterLimit(n){const s=n.attrs.miterLimit;s!=null&&this.setAttr("miterLimit",s)}setAttr(n,s){this._context[n]=s}arc(n,s,r,o,h,c){this._context.arc(n,s,r,o,h,c)}arcTo(n,s,r,o,h){this._context.arcTo(n,s,r,o,h)}beginPath(){this._context.beginPath()}bezierCurveTo(n,s,r,o,h,c){this._context.bezierCurveTo(n,s,r,o,h,c)}clearRect(n,s,r,o){this._context.clearRect(n,s,r,o)}clip(...n){this._context.clip.apply(this._context,n)}closePath(){this._context.closePath()}createImageData(n,s){const r=arguments;if(r.length===2)return this._context.createImageData(n,s);if(r.length===1)return this._context.createImageData(n)}createLinearGradient(n,s,r,o){return this._context.createLinearGradient(n,s,r,o)}createPattern(n,s){return this._context.createPattern(n,s)}createRadialGradient(n,s,r,o,h,c){return this._context.createRadialGradient(n,s,r,o,h,c)}drawImage(n,s,r,o,h,c,g,p,b){const O=arguments,R=this._context;O.length===3?R.drawImage(n,s,r):O.length===5?R.drawImage(n,s,r,o,h):O.length===9&&R.drawImage(n,s,r,o,h,c,g,p,b)}ellipse(n,s,r,o,h,c,g,p){this._context.ellipse(n,s,r,o,h,c,g,p)}isPointInPath(n,s,r,o){return r?this._context.isPointInPath(r,n,s,o):this._context.isPointInPath(n,s,o)}fill(...n){this._context.fill.apply(this._context,n)}fillRect(n,s,r,o){this._context.fillRect(n,s,r,o)}strokeRect(n,s,r,o){this._context.strokeRect(n,s,r,o)}fillText(n,s,r,o){o?this._context.fillText(n,s,r,o):this._context.fillText(n,s,r)}measureText(n){return this._context.measureText(n)}getImageData(n,s,r,o){return this._context.getImageData(n,s,r,o)}lineTo(n,s){this._context.lineTo(n,s)}moveTo(n,s){this._context.moveTo(n,s)}rect(n,s,r,o){this._context.rect(n,s,r,o)}roundRect(n,s,r,o,h){this._context.roundRect(n,s,r,o,h)}putImageData(n,s,r){this._context.putImageData(n,s,r)}quadraticCurveTo(n,s,r,o){this._context.quadraticCurveTo(n,s,r,o)}restore(){this._context.restore()}rotate(n){this._context.rotate(n)}save(){this._context.save()}scale(n,s){this._context.scale(n,s)}setLineDash(n){this._context.setLineDash?this._context.setLineDash(n):"mozDash"in this._context?this._context.mozDash=n:"webkitLineDash"in this._context&&(this._context.webkitLineDash=n)}getLineDash(){return this._context.getLineDash()}setTransform(n,s,r,o,h,c){this._context.setTransform(n,s,r,o,h,c)}stroke(n){n?this._context.stroke(n):this._context.stroke()}strokeText(n,s,r,o){this._context.strokeText(n,s,r,o)}transform(n,s,r,o,h,c){this._context.transform(n,s,r,o,h,c)}translate(n,s){this._context.translate(n,s)}_enableTrace(){let n=this,s=l1.length,r=this.setAttr,o,h;const c=function(g){let p=n[g],b;n[g]=function(){return h=$2(Array.prototype.slice.call(arguments,0)),b=p.apply(n,arguments),n._trace({method:g,args:h}),b}};for(o=0;o<s;o++)c(l1[o]);n.setAttr=function(){r.apply(n,arguments);const g=arguments[0];let p=arguments[1];(g==="shadowOffsetX"||g==="shadowOffsetY"||g==="shadowBlur")&&(p=p/this.canvas.getPixelRatio()),n._trace({property:g,val:p})}}_applyGlobalCompositeOperation(n){const s=n.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}}sy.forEach(function(d){Object.defineProperty(s0.prototype,d,{get(){return this._context[d]},set(n){this._context[d]=n}})});class uy extends s0{constructor(n,{willReadFrequently:s=!1}={}){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(n){const s=n.fill();this.setAttr("fillStyle",s),n._fillFunc(this)}_fillPattern(n){this.setAttr("fillStyle",n._getFillPattern()),n._fillFunc(this)}_fillLinearGradient(n){const s=n._getLinearGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fillRadialGradient(n){const s=n._getRadialGradient();s&&(this.setAttr("fillStyle",s),n._fillFunc(this))}_fill(n){const s=n.fill(),r=n.getFillPriority();if(s&&r==="color"){this._fillColor(n);return}const o=n.getFillPatternImage();if(o&&r==="pattern"){this._fillPattern(n);return}const h=n.getFillLinearGradientColorStops();if(h&&r==="linear-gradient"){this._fillLinearGradient(n);return}const c=n.getFillRadialGradientColorStops();if(c&&r==="radial-gradient"){this._fillRadialGradient(n);return}s?this._fillColor(n):o?this._fillPattern(n):h?this._fillLinearGradient(n):c&&this._fillRadialGradient(n)}_strokeLinearGradient(n){const s=n.getStrokeLinearGradientStartPoint(),r=n.getStrokeLinearGradientEndPoint(),o=n.getStrokeLinearGradientColorStops(),h=this.createLinearGradient(s.x,s.y,r.x,r.y);if(o){for(let c=0;c<o.length;c+=2)h.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",h)}}_stroke(n){const s=n.dash(),r=n.getStrokeScaleEnabled();if(n.hasStroke()){if(!r){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(n),s&&n.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",n.dashOffset())),this.setAttr("lineWidth",n.strokeWidth()),n.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),n.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(n):this.setAttr("strokeStyle",n.stroke()),n._strokeFunc(this),r||this.restore()}}_applyShadow(n){var s,r,o;const h=(s=n.getShadowRGBA())!==null&&s!==void 0?s:"black",c=(r=n.getShadowBlur())!==null&&r!==void 0?r:5,g=(o=n.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},p=n.getAbsoluteScale(),b=this.canvas.getPixelRatio(),O=p.x*b,R=p.y*b;this.setAttr("shadowColor",h),this.setAttr("shadowBlur",c*Math.min(Math.abs(O),Math.abs(R))),this.setAttr("shadowOffsetX",g.x*O),this.setAttr("shadowOffsetY",g.y*R)}}class cy extends s0{constructor(n){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:!0})}_fill(n){this.save(),this.setAttr("fillStyle",n.colorKey),n._fillFuncHit(this),this.restore()}strokeShape(n){n.hasHitStroke()&&this._stroke(n)}_stroke(n){if(n.hasHitStroke()){const s=n.getStrokeScaleEnabled();if(!s){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(n);const r=n.hitStrokeWidth(),o=r==="auto"?n.strokeWidth():r;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",n.colorKey),n._strokeFuncHit(this),s||this.restore()}}}let Yd;function fy(){if(Yd)return Yd;const d=dt.createCanvasElement(),n=d.getContext("2d");return Yd=(function(){const s=Vt._global.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;return s/r})(),dt.releaseCanvas(d),Yd}class Yp{constructor(n){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(n||{}).pixelRatio||Vt.pixelRatio||fy();this.pixelRatio=r,this._canvas=dt.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(n){const s=this.pixelRatio;this.pixelRatio=n,this.setSize(this.getWidth()/s,this.getHeight()/s)}setWidth(n){this.width=this._canvas.width=n*this.pixelRatio,this._canvas.style.width=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}setHeight(n){this.height=this._canvas.height=n*this.pixelRatio,this._canvas.style.height=n+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}getWidth(){return this.width}getHeight(){return this.height}setSize(n,s){this.setWidth(n||0),this.setHeight(s||0)}toDataURL(n,s){try{return this._canvas.toDataURL(n,s)}catch{try{return this._canvas.toDataURL()}catch(o){return dt.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Ns extends Yp{constructor(n={width:0,height:0,willReadFrequently:!1}){super(n),this.context=new uy(this,{willReadFrequently:n.willReadFrequently}),this.setSize(n.width,n.height)}}function s1(){const d=dt.createCanvasElement();d.width=1,d.height=1;const n=d.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,1,1),n.fillStyle="rgba(255,0,255,1)",n.fillRect(0,0,1,1);const s=n.getImageData(0,0,1,1).data;return!(s[0]===255&&s[1]===0&&s[2]===255&&s[3]===255)}function o1(){var d,n;return typeof navigator>"u"?!1:(n=(d=navigator.brave)===null||d===void 0?void 0:d.isBrave())!==null&&n!==void 0?n:!1}let u1=!1;function hy(){return o1()&&s1()&&!u1&&(u1=!0,dt.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),o1()&&s1()}class qp extends Yp{constructor(n={width:0,height:0}){super(n),this.hitCanvas=!0,this.context=new cy(this),this.setSize(n.width,n.height),hy()}}const we={get isDragging(){let d=!1;return we._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(d=!0)}),d},justDragged:!1,get node(){let d;return we._dragElements.forEach(n=>{d=n.node}),d},_dragElements:new Map,_drag(d){const n=[];we._dragElements.forEach((s,r)=>{const{node:o}=s,h=o.getStage();h.setPointersPositions(d),s.pointerId===void 0&&(s.pointerId=dt._getFirstPointerId(d));const c=h._changedPointerPositions.find(g=>g.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){const g=o.dragDistance();if(Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y))<g||(o.startDrag({evt:d}),!o.isDragging()))return}o._setDragPosition(d,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:d},!0)})},_endDragBefore(d){const n=[];we._dragElements.forEach(s=>{const{node:r}=s,o=r.getStage();if(d&&o.setPointersPositions(d),!o._changedPointerPositions.find(g=>g.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(we.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,s.dragStatus="stopped");const c=s.node.getLayer()||s.node instanceof Vt.Stage&&s.node;c&&n.indexOf(c)===-1&&n.push(c)}),n.forEach(s=>{s.draw()})},_endDragAfter(d){we._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:d},!0),n.dragStatus!=="dragging"&&we._dragElements.delete(s)})}};Vt.isBrowser&&(window.addEventListener("mouseup",we._endDragBefore,!0),window.addEventListener("touchend",we._endDragBefore,!0),window.addEventListener("touchcancel",we._endDragBefore,!0),window.addEventListener("mousemove",we._drag),window.addEventListener("touchmove",we._drag),window.addEventListener("mouseup",we._endDragAfter,!1),window.addEventListener("touchend",we._endDragAfter,!1),window.addEventListener("touchcancel",we._endDragAfter,!1));function zs(d){return dt._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||dt._isBoolean(d)?d:Object.prototype.toString.call(d)}function am(d){return d>255?255:d<0?0:Math.round(d)}function Yt(){if(Vt.isUnminified)return function(d,n){return dt._isNumber(d)||dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a number.'),d}}function o0(d){if(Vt.isUnminified)return function(n,s){let r=dt._isNumber(n),o=dt._isArray(n)&&n.length==d;return!r&&!o&&dt.warn(zs(n)+' is a not valid value for "'+s+'" attribute. The value should be a number or Array<number>('+d+")"),n}}function Vp(){if(Vt.isUnminified)return function(d,n){return dt._isNumber(d)||d==="auto"||dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a number or "auto".'),d}}function Uo(){if(Vt.isUnminified)return function(d,n){return dt._isString(d)||dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a string.'),d}}function im(){if(Vt.isUnminified)return function(d,n){const s=dt._isString(d),r=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return s||r||dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a string or a native gradient.'),d}}function dy(){if(Vt.isUnminified)return function(d,n){const s=Int8Array?Object.getPrototypeOf(Int8Array):null;return s&&d instanceof s||(dt._isArray(d)?d.forEach(function(r){dt._isNumber(r)||dt.warn('"'+n+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a array of numbers.')),d}}function ll(){if(Vt.isUnminified)return function(d,n){return d===!0||d===!1||dt.warn(zs(d)+' is a not valid value for "'+n+'" attribute. The value should be a boolean.'),d}}function py(d){if(Vt.isUnminified)return function(n,s){return n==null||dt.isObject(n)||dt.warn(zs(n)+' is a not valid value for "'+s+'" attribute. The value should be an object with properties '+d),n}}const Zf="get",Jf="set",rt={addGetterSetter(d,n,s,r,o){rt.addGetter(d,n,s),rt.addSetter(d,n,r,o),rt.addOverloadedGetterSetter(d,n)},addGetter(d,n,s){const r=Zf+dt._capitalize(n);d.prototype[r]=d.prototype[r]||function(){const o=this.attrs[n];return o===void 0?s:o}},addSetter(d,n,s,r){const o=Jf+dt._capitalize(n);d.prototype[o]||rt.overWriteSetter(d,n,s,r)},overWriteSetter(d,n,s,r){const o=Jf+dt._capitalize(n);d.prototype[o]=function(h){return s&&h!==void 0&&h!==null&&(h=s.call(this,h,n)),this._setAttr(n,h),r&&r.call(this),this}},addComponentsGetterSetter(d,n,s,r,o){const h=s.length,c=dt._capitalize,g=Zf+c(n),p=Jf+c(n);d.prototype[g]=function(){const O={};for(let R=0;R<h;R++){const E=s[R];O[E]=this.getAttr(n+c(E))}return O};const b=py(s);d.prototype[p]=function(O){const R=this.attrs[n];r&&(O=r.call(this,O,n)),b&&b.call(this,O,n);for(const E in O)O.hasOwnProperty(E)&&this._setAttr(n+c(E),O[E]);return O||s.forEach(E=>{this._setAttr(n+c(E),void 0)}),this._fireChangeEvent(n,R,O),o&&o.call(this),this},rt.addOverloadedGetterSetter(d,n)},addOverloadedGetterSetter(d,n){const s=dt._capitalize(n),r=Jf+s,o=Zf+s;d.prototype[n]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(d,n,s,r){dt.error("Adding deprecated "+n);const o=Zf+dt._capitalize(n),h=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";d.prototype[o]=function(){dt.error(h);const c=this.attrs[n];return c===void 0?s:c},rt.addSetter(d,n,r,function(){dt.error(h)}),rt.addOverloadedGetterSetter(d,n)},backCompat(d,n){dt.each(n,function(s,r){const o=d.prototype[r],h=Zf+dt._capitalize(s),c=Jf+dt._capitalize(s);function g(){o.apply(this,arguments),dt.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}d.prototype[s]=g,d.prototype[h]=g,d.prototype[c]=g})},afterSetFilter(){this._filterUpToDate=!1}};function gy(d){const n=/(\w+)\(([^)]+)\)/g;let s;for(;(s=n.exec(d))!==null;){const[,r,o]=s;switch(r){case"blur":{const h=parseFloat(o.replace("px",""));return function(c){this.blurRadius(h*.5);const g=Vt.Filters;g&&g.Blur&&g.Blur.call(this,c)}}case"brightness":{const h=o.includes("%")?parseFloat(o)/100:parseFloat(o);return function(c){this.brightness(h);const g=Vt.Filters;g&&g.Brightness&&g.Brightness.call(this,c)}}case"contrast":{const h=parseFloat(o);return function(c){const g=100*(Math.sqrt(h)-1);this.contrast(g);const p=Vt.Filters;p&&p.Contrast&&p.Contrast.call(this,c)}}case"grayscale":return function(h){const c=Vt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,h)};case"sepia":return function(h){const c=Vt.Filters;c&&c.Sepia&&c.Sepia.call(this,h)};case"invert":return function(h){const c=Vt.Filters;c&&c.Invert&&c.Invert.call(this,h)};default:dt.warn(`CSS filter "${r}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Wd="absoluteOpacity",qd="allEventListeners",Hr="absoluteTransform",c1="absoluteScale",No="canvas",my="Change",vy="children",yy="konva",Op="listening",Sy="mouseenter",by="mouseleave",Cy="pointerenter",Ey="pointerleave",Ty="touchenter",Ay="touchleave",f1="set",h1="Shape",$d=" ",d1="stage",Ms="transform",_y="Stage",Rp="visible",Oy=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join($d);let Ry=1;class wt{constructor(n){this._id=Ry++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(n),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(n){(n===Ms||n===Hr)&&this._cache.get(n)?this._cache.get(n).dirty=!0:n?this._cache.delete(n):this._cache.clear()}_getCache(n,s){let r=this._cache.get(n);return(r===void 0||(n===Ms||n===Hr)&&r.dirty===!0)&&(r=s.call(this),this._cache.set(n,r)),r}_calculate(n,s,r){if(!this._attachedDepsListeners.get(n)){const o=s.map(h=>h+"Change.konva").join($d);this.on(o,()=>{this._clearCache(n)}),this._attachedDepsListeners.set(n,!0)}return this._getCache(n,r)}_getCanvasCache(){return this._cache.get(No)}_clearSelfAndDescendantCache(n){this._clearCache(n),n===Hr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(No)){const{scene:n,filter:s,hit:r,buffer:o}=this._cache.get(No);dt.releaseCanvas(n,s,r,o),this._cache.delete(No)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(n){const s=n||{};let r={};(s.x===void 0||s.y===void 0||s.width===void 0||s.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(s.width||r.width),h=Math.ceil(s.height||r.height),c=s.pixelRatio,g=s.x===void 0?Math.floor(r.x):s.x,p=s.y===void 0?Math.floor(r.y):s.y,b=s.offset||0,O=s.drawBorder||!1,R=s.hitCanvasPixelRatio||1;if(!o||!h){dt.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const E=Math.abs(Math.round(r.x)-g)>.5?1:0,z=Math.abs(Math.round(r.y)-p)>.5?1:0;o+=b*2+E,h+=b*2+z,g-=b,p-=b;const S=new Ns({pixelRatio:c,width:o,height:h}),H=new Ns({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),w=new qp({pixelRatio:R,width:o,height:h}),Y=S.getContext(),G=w.getContext(),D=new Ns({width:S.width/S.pixelRatio+Math.abs(g),height:S.height/S.pixelRatio+Math.abs(p),pixelRatio:S.pixelRatio}),j=D.getContext();return w.isCache=!0,S.isCache=!0,this._cache.delete(No),this._filterUpToDate=!1,s.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,H.getContext()._context.imageSmoothingEnabled=!1),Y.save(),G.save(),j.save(),Y.translate(-g,-p),G.translate(-g,-p),j.translate(-g,-p),D.x=g,D.y=p,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Wd),this._clearSelfAndDescendantCache(c1),this.drawScene(S,this,D),this.drawHit(w,this),this._isUnderCache=!1,Y.restore(),G.restore(),O&&(Y.save(),Y.beginPath(),Y.rect(0,0,o,h),Y.closePath(),Y.setAttr("strokeStyle","red"),Y.setAttr("lineWidth",5),Y.stroke(),Y.restore()),this._cache.set(No,{scene:S,filter:H,hit:w,buffer:D,x:g,y:p}),this._requestDraw(),this}isCached(){return this._cache.has(No)}getClientRect(n){throw new Error('abstract "getClientRect" method call')}_transformedRect(n,s){const r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}];let o=1/0,h=1/0,c=-1/0,g=-1/0;const p=this.getAbsoluteTransform(s);return r.forEach(function(b){const O=p.point(b);o===void 0&&(o=c=O.x,h=g=O.y),o=Math.min(o,O.x),h=Math.min(h,O.y),c=Math.max(c,O.x),g=Math.max(g,O.y)}),{x:o,y:h,width:c-o,height:g-h}}_drawCachedSceneCanvas(n){n.save(),n._applyOpacity(this),n._applyGlobalCompositeOperation(this);const s=this._getCanvasCache();n.translate(s.x,s.y);const r=this._getCachedSceneCanvas(),o=r.pixelRatio;n.drawImage(r._canvas,0,0,r.width/o,r.height/o),n.restore()}_drawCachedHitCanvas(n){const s=this._getCanvasCache(),r=s.hit;n.save(),n.translate(s.x,s.y),n.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),n.restore()}_getCachedSceneCanvas(){let n=this.filters(),s=this._getCanvasCache(),r=s.scene,o=s.filter,h=o.getContext(),c,g,p,b;if(!n||n.length===0)return r;if(this._filterUpToDate)return o;let O=!0;for(let E=0;E<n.length;E++)if(typeof n[E]=="string"&&r1(),typeof n[E]!="string"||!r1()){O=!1;break}const R=r.pixelRatio;if(o.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio),O){const E=n.join(" ");return h.save(),h.setAttr("filter",E),h.drawImage(r._canvas,0,0,r.getWidth()/R,r.getHeight()/R),h.restore(),this._filterUpToDate=!0,o}try{for(c=n.length,h.clear(),h.drawImage(r._canvas,0,0,r.getWidth()/R,r.getHeight()/R),g=h.getImageData(0,0,o.getWidth(),o.getHeight()),p=0;p<c;p++)b=n[p],typeof b=="string"&&(b=gy(b)),b.call(this,g),h.putImageData(g,0,0)}catch(E){dt.error("Unable to apply filter. "+E.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,o}on(n,s){if(this._cache&&this._cache.delete(qd),arguments.length===3)return this._delegate.apply(this,arguments);const r=n.split($d);for(let o=0;o<r.length;o++){const c=r[o].split("."),g=c[0],p=c[1]||"";this.eventListeners[g]||(this.eventListeners[g]=[]),this.eventListeners[g].push({name:p,handler:s})}return this}off(n,s){let r=(n||"").split($d),o=r.length,h,c,g,p,b,O;if(this._cache&&this._cache.delete(qd),!n)for(c in this.eventListeners)this._off(c);for(h=0;h<o;h++)if(g=r[h],p=g.split("."),b=p[0],O=p[1],b)this.eventListeners[b]&&this._off(b,O,s);else for(c in this.eventListeners)this._off(c,O,s);return this}dispatchEvent(n){const s={target:this,type:n.type,evt:n};return this.fire(n.type,s),this}addEventListener(n,s){return this.on(n,function(r){s.call(this,r.evt)}),this}removeEventListener(n){return this.off(n),this}_delegate(n,s,r){const o=this;this.on(n,function(h){const c=h.target.findAncestors(s,!0,o);for(let g=0;g<c.length;g++)h=dt.cloneObject(h),h.currentTarget=c[g],r.call(c[g],h)})}remove(){return this.isDragging()&&this.stopDrag(),we._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Hr),this._clearSelfAndDescendantCache(Wd),this._clearSelfAndDescendantCache(c1),this._clearSelfAndDescendantCache(d1),this._clearSelfAndDescendantCache(Rp),this._clearSelfAndDescendantCache(Op)}_remove(){this._clearCaches();const n=this.getParent();n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(n){const s="get"+dt._capitalize(n);return dt._isFunction(this[s])?this[s]():this.attrs[n]}getAncestors(){let n=this.getParent(),s=[];for(;n;)s.push(n),n=n.getParent();return s}getAttrs(){return this.attrs||{}}setAttrs(n){return this._batchTransformChanges(()=>{let s,r;if(!n)return this;for(s in n)s!==vy&&(r=f1+dt._capitalize(s),dt._isFunction(this[r])?this[r](n[s]):this._setAttr(s,n[s]))}),this}isListening(){return this._getCache(Op,this._isListening)}_isListening(n){if(!this.listening())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isListening(n):!0}isVisible(){return this._getCache(Rp,this._isVisible)}_isVisible(n){if(!this.visible())return!1;const r=this.getParent();return r&&r!==n&&this!==n?r._isVisible(n):!0}shouldDrawHit(n,s=!1){if(n)return this._isVisible(n)&&this._isListening(n);const r=this.getLayer();let o=!1;we._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===r)&&(o=!0)});const h=!s&&!Vt.hitOnDragEnabled&&(o||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!h}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let n=this.getDepth(),s=this,r=0,o,h,c,g;function p(O){for(o=[],h=O.length,c=0;c<h;c++)g=O[c],r++,g.nodeType!==h1&&(o=o.concat(g.getChildren().slice())),g._id===s._id&&(c=h);o.length>0&&o[0].getDepth()<=n&&p(o)}const b=this.getStage();return s.nodeType!==_y&&b&&p(b.getChildren()),r}getDepth(){let n=0,s=this.parent;for(;s;)n++,s=s.parent;return n}_batchTransformChanges(n){this._batchingTransformChange=!0,n(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ms),this._clearSelfAndDescendantCache(Hr)),this._needClearTransformCache=!1}setPosition(n){return this._batchTransformChanges(()=>{this.x(n.x),this.y(n.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const n=this.getStage();if(!n)return null;const s=n.getPointerPosition();if(!s)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(s)}getAbsolutePosition(n){let s=!1,r=this.parent;for(;r;){if(r.isCached()){s=!0;break}r=r.parent}s&&!n&&(n=!0);const o=this.getAbsoluteTransform(n).getMatrix(),h=new ii,c=this.offset();return h.m=o.slice(),h.translate(c.x,c.y),h.getTranslation()}setAbsolutePosition(n){const{x:s,y:r,...o}=this._clearTransform();this.attrs.x=s,this.attrs.y=r,this._clearCache(Ms);const h=this._getAbsoluteTransform().copy();return h.invert(),h.translate(n.x,n.y),n={x:this.attrs.x+h.getTranslation().x,y:this.attrs.y+h.getTranslation().y},this._setTransform(o),this.setPosition({x:n.x,y:n.y}),this._clearCache(Ms),this._clearSelfAndDescendantCache(Hr),this}_setTransform(n){let s;for(s in n)this.attrs[s]=n[s]}_clearTransform(){const n={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,n}move(n){let s=n.x,r=n.y,o=this.x(),h=this.y();return s!==void 0&&(o+=s),r!==void 0&&(h+=r),this.setPosition({x:o,y:h}),this}_eachAncestorReverse(n,s){let r=[],o=this.getParent(),h,c;if(!(s&&s._id===this._id)){for(r.unshift(this);o&&(!s||o._id!==s._id);)r.unshift(o),o=o.parent;for(h=r.length,c=0;c<h;c++)n(r[c])}}rotate(n){return this.rotation(this.rotation()+n),this}moveToTop(){if(!this.parent)return dt.warn("Node has no parent. moveToTop function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return dt.warn("Node has no parent. moveUp function is ignored."),!1;const n=this.index,s=this.parent.getChildren().length;return n<s-1?(this.parent.children.splice(n,1),this.parent.children.splice(n+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return dt.warn("Node has no parent. moveDown function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.splice(n-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return dt.warn("Node has no parent. moveToBottom function is ignored."),!1;const n=this.index;return n>0?(this.parent.children.splice(n,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(n){if(!this.parent)return dt.warn("Node has no parent. zIndex parameter is ignored."),this;(n<0||n>=this.parent.children.length)&&dt.warn("Unexpected value "+n+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const s=this.index;return this.parent.children.splice(s,1),this.parent.children.splice(n,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Wd,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let n=this.opacity();const s=this.getParent();return s&&!s._isUnderCache&&(n*=s.getAbsoluteOpacity()),n}moveTo(n){return this.getParent()!==n&&(this._remove(),n.add(this)),this}toObject(){let n=this.getAttrs(),s,r,o,h,c;const g={attrs:{},className:this.getClassName()};for(s in n)r=n[s],c=dt.isObject(r)&&!dt._isPlainObject(r)&&!dt._isArray(r),!c&&(o=typeof this[s]=="function"&&this[s],delete n[s],h=o?o.call(this):null,n[s]=r,h!==r&&(g.attrs[s]=r));return dt._prepareToStringify(g)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(n,s,r){const o=[];s&&this._isMatch(n)&&o.push(this);let h=this.parent;for(;h;){if(h===r)return o;h._isMatch(n)&&o.push(h),h=h.parent}return o}isAncestorOf(n){return!1}findAncestor(n,s,r){return this.findAncestors(n,s,r)[0]}_isMatch(n){if(!n)return!1;if(typeof n=="function")return n(this);let s=n.replace(/ /g,"").split(","),r=s.length,o,h;for(o=0;o<r;o++)if(h=s[o],dt.isValidSelector(h)||(dt.warn('Selector "'+h+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),dt.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),dt.warn("Konva is awesome, right?")),h.charAt(0)==="#"){if(this.id()===h.slice(1))return!0}else if(h.charAt(0)==="."){if(this.hasName(h.slice(1)))return!0}else if(this.className===h||this.nodeType===h)return!0;return!1}getLayer(){const n=this.getParent();return n?n.getLayer():null}getStage(){return this._getCache(d1,this._getStage)}_getStage(){const n=this.getParent();return n?n.getStage():null}fire(n,s={},r){return s.target=s.target||this,r?this._fireAndBubble(n,s):this._fire(n,s),this}getAbsoluteTransform(n){return n?this._getAbsoluteTransform(n):this._getCache(Hr,this._getAbsoluteTransform)}_getAbsoluteTransform(n){let s;if(n)return s=new ii,this._eachAncestorReverse(function(r){const o=r.transformsEnabled();o==="all"?s.multiply(r.getTransform()):o==="position"&&s.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},n),s;{s=this._cache.get(Hr)||new ii,this.parent?this.parent.getAbsoluteTransform().copyInto(s):s.reset();const r=this.transformsEnabled();if(r==="all")s.multiply(this.getTransform());else if(r==="position"){const o=this.attrs.x||0,h=this.attrs.y||0,c=this.attrs.offsetX||0,g=this.attrs.offsetY||0;s.translate(o-c,h-g)}return s.dirty=!1,s}}getAbsoluteScale(n){let s=this;for(;s;)s._isUnderCache&&(n=s),s=s.getParent();const o=this.getAbsoluteTransform(n).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ms,this._getTransform)}_getTransform(){var n,s;const r=this._cache.get(Ms)||new ii;r.reset();const o=this.x(),h=this.y(),c=Vt.getAngle(this.rotation()),g=(n=this.attrs.scaleX)!==null&&n!==void 0?n:1,p=(s=this.attrs.scaleY)!==null&&s!==void 0?s:1,b=this.attrs.skewX||0,O=this.attrs.skewY||0,R=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(o!==0||h!==0)&&r.translate(o,h),c!==0&&r.rotate(c),(b!==0||O!==0)&&r.skew(b,O),(g!==1||p!==1)&&r.scale(g,p),(R!==0||E!==0)&&r.translate(-1*R,-1*E),r.dirty=!1,r}clone(n){let s=dt.cloneObject(this.attrs),r,o,h,c,g;for(r in n)s[r]=n[r];const p=new this.constructor(s);for(r in this.eventListeners)for(o=this.eventListeners[r],h=o.length,c=0;c<h;c++)g=o[c],g.name.indexOf(yy)<0&&(p.eventListeners[r]||(p.eventListeners[r]=[]),p.eventListeners[r].push(g));return p}_toKonvaCanvas(n){n=n||{};const s=this.getClientRect(),r=this.getStage(),o=n.x!==void 0?n.x:Math.floor(s.x),h=n.y!==void 0?n.y:Math.floor(s.y),c=n.pixelRatio||1,g=new Ns({width:n.width||Math.ceil(s.width)||(r?r.width():0),height:n.height||Math.ceil(s.height)||(r?r.height():0),pixelRatio:c}),p=g.getContext(),b=new Ns({width:g.width/g.pixelRatio+Math.abs(o),height:g.height/g.pixelRatio+Math.abs(h),pixelRatio:g.pixelRatio});return n.imageSmoothingEnabled===!1&&(p._context.imageSmoothingEnabled=!1),p.save(),(o||h)&&p.translate(-1*o,-1*h),this.drawScene(g,void 0,b),p.restore(),g}toCanvas(n){return this._toKonvaCanvas(n)._canvas}toDataURL(n){n=n||{};const s=n.mimeType||null,r=n.quality||null,o=this._toKonvaCanvas(n).toDataURL(s,r);return n.callback&&n.callback(o),o}toImage(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,dt._urlToImage(this.toDataURL(n),function(h){s(h),o==null||o(h)})}catch(o){r(o)}})}toBlob(n){return new Promise((s,r)=>{try{const o=n==null?void 0:n.callback;o&&delete n.callback,this.toCanvas(n).toBlob(h=>{s(h),o==null||o(h)},n==null?void 0:n.mimeType,n==null?void 0:n.quality)}catch(o){r(o)}})}setSize(n){return this.width(n.width),this.height(n.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(n,s,r){let o=this.eventListeners[n],h,c,g;for(h=0;h<o.length;h++)if(c=o[h].name,g=o[h].handler,(c!=="konva"||s==="konva")&&(!s||c===s)&&(!r||r===g)){if(o.splice(h,1),o.length===0){delete this.eventListeners[n];break}h--}}_fireChangeEvent(n,s,r){this._fire(n+my,{oldVal:s,newVal:r})}addName(n){if(!this.hasName(n)){const s=this.name(),r=s?s+" "+n:n;this.name(r)}return this}hasName(n){if(!n)return!1;const s=this.name();return s?(s||"").split(/\s/g).indexOf(n)!==-1:!1}removeName(n){const s=(this.name()||"").split(/\s/g),r=s.indexOf(n);return r!==-1&&(s.splice(r,1),this.name(s.join(" "))),this}setAttr(n,s){const r=this[f1+dt._capitalize(n)];return dt._isFunction(r)?r.call(this,s):this._setAttr(n,s),this}_requestDraw(){if(Vt.autoDrawEnabled){const n=this.getLayer()||this.getStage();n==null||n.batchDraw()}}_setAttr(n,s){const r=this.attrs[n];r===s&&!dt.isObject(s)||(s==null?delete this.attrs[n]:this.attrs[n]=s,this._shouldFireChangeEvents&&this._fireChangeEvent(n,r,s),this._requestDraw())}_setComponentAttr(n,s,r){let o;r!==void 0&&(o=this.attrs[n],o||(this.attrs[n]=this.getAttr(n)),this.attrs[n][s]=r,this._fireChangeEvent(n,o,r))}_fireAndBubble(n,s,r){s&&this.nodeType===h1&&(s.target=this);const o=[Sy,by,Cy,Ey,Ty,Ay];if(!(o.indexOf(n)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(n,s);const c=o.indexOf(n)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(s&&!s.cancelBubble||!s)&&this.parent&&this.parent.isListening()&&!c&&(r&&r.parent?this._fireAndBubble.call(this.parent,n,s,r):this._fireAndBubble.call(this.parent,n,s))}}_getProtoListeners(n){var s,r,o;const h=(s=this._cache.get(qd))!==null&&s!==void 0?s:{};let c=h==null?void 0:h[n];if(c===void 0){c=[];let g=Object.getPrototypeOf(this);for(;g;){const p=(o=(r=g.eventListeners)===null||r===void 0?void 0:r[n])!==null&&o!==void 0?o:[];c.push(...p),g=Object.getPrototypeOf(g)}h[n]=c,this._cache.set(qd,h)}return c}_fire(n,s){s=s||{},s.currentTarget=this,s.type=n;const r=this._getProtoListeners(n);if(r)for(let h=0;h<r.length;h++)r[h].handler.call(this,s);const o=this.eventListeners[n];if(o)for(let h=0;h<o.length;h++)o[h].handler.call(this,s)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(n){const s=n?n.pointerId:void 0,r=this.getStage(),o=this.getAbsolutePosition();if(!r)return;const h=r._getPointerById(s)||r._changedPointerPositions[0]||o;we._dragElements.set(this._id,{node:this,startPointerPos:h,offset:{x:h.x-o.x,y:h.y-o.y},dragStatus:"ready",pointerId:s})}startDrag(n,s=!0){we._dragElements.has(this._id)||this._createDragElement(n);const r=we._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:n&&n.evt},s)}_setDragPosition(n,s){const r=this.getStage()._getPointerById(s.pointerId);if(!r)return;let o={x:r.x-s.offset.x,y:r.y-s.offset.y};const h=this.dragBoundFunc();if(h!==void 0){const c=h.call(this,o,n);c?o=c:dt.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(n){const s=we._dragElements.get(this._id);s&&(s.dragStatus="stopped"),we._endDragBefore(n),we._endDragAfter(n)}setDraggable(n){this._setAttr("draggable",n),this._dragChange()}isDragging(){const n=we._dragElements.get(this._id);return n?n.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(n){if(!(!(n.evt.button!==void 0)||Vt.dragButtons.indexOf(n.evt.button)>=0)||this.isDragging())return;let o=!1;we._dragElements.forEach(h=>{this.isAncestorOf(h.node)&&(o=!0)}),o||this._createDragElement(n)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const s=we._dragElements.get(this._id),r=s&&s.dragStatus==="dragging",o=s&&s.dragStatus==="ready";r?this.stopDrag():o&&we._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(n={x:0,y:0}){const s=this.getStage();if(!s)return!1;const r={x:-n.x,y:-n.y,width:s.width()+2*n.x,height:s.height()+2*n.y};return dt.haveIntersection(r,this.getClientRect())}static create(n,s){return dt._isString(n)&&(n=JSON.parse(n)),this._createNode(n,s)}static _createNode(n,s){let r=wt.prototype.getClassName.call(n),o=n.children,h,c,g;s&&(n.attrs.container=s),Vt[r]||(dt.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const p=Vt[r];if(h=new p(n.attrs),o)for(c=o.length,g=0;g<c;g++)h.add(wt._createNode(o[g]));return h}}wt.prototype.nodeType="Node";wt.prototype._attrsAffectingSize=[];wt.prototype.eventListeners={};wt.prototype.on.call(wt.prototype,Oy,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ms),this._clearSelfAndDescendantCache(Hr)});wt.prototype.on.call(wt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Rp)});wt.prototype.on.call(wt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Op)});wt.prototype.on.call(wt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Wd)});const tn=rt.addGetterSetter;tn(wt,"zIndex");tn(wt,"absolutePosition");tn(wt,"position");tn(wt,"x",0,Yt());tn(wt,"y",0,Yt());tn(wt,"globalCompositeOperation","source-over",Uo());tn(wt,"opacity",1,Yt());tn(wt,"name","",Uo());tn(wt,"id","",Uo());tn(wt,"rotation",0,Yt());rt.addComponentsGetterSetter(wt,"scale",["x","y"]);tn(wt,"scaleX",1,Yt());tn(wt,"scaleY",1,Yt());rt.addComponentsGetterSetter(wt,"skew",["x","y"]);tn(wt,"skewX",0,Yt());tn(wt,"skewY",0,Yt());rt.addComponentsGetterSetter(wt,"offset",["x","y"]);tn(wt,"offsetX",0,Yt());tn(wt,"offsetY",0,Yt());tn(wt,"dragDistance",void 0,Yt());tn(wt,"width",0,Yt());tn(wt,"height",0,Yt());tn(wt,"listening",!0,ll());tn(wt,"preventDefault",!0,ll());tn(wt,"filters",void 0,function(d){return this._filterUpToDate=!1,d});tn(wt,"visible",!0,ll());tn(wt,"transformsEnabled","all",Uo());tn(wt,"size");tn(wt,"dragBoundFunc");tn(wt,"draggable",!1,ll());rt.backCompat(wt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class li extends wt{constructor(){super(...arguments),this.children=[]}getChildren(n){const s=this.children||[];return n?s.filter(n):s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let r=0;r<n.length;r++)this.add(n[r]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const r=[];return this._descendants(o=>{const h=o._isMatch(n);return h&&r.push(o),!!(h&&s)}),r}_descendants(n){let s=!1;const r=this.getChildren();for(const o of r){if(s=n(o),s)return!0;if(o.hasChildren()&&(s=o._descendants(n),s))return!0}return!1}toObject(){const n=wt.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=wt.prototype.clone.call(this,n);return this.getChildren().forEach(function(r){s.add(r.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(n)&&s.push(r)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(r){r._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,r){s.index=r}),this._requestDraw()}drawScene(n,s,r){const o=this.getLayer(),h=n||o&&o.getCanvas(),c=h&&h.getContext(),g=this._getCanvasCache(),p=g&&g.scene,b=h&&h.isCache;if(!this.isVisible()&&!b)return this;if(p){c.save();const O=this.getAbsoluteTransform(s).getMatrix();c.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",h,s,r);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const r=this.getLayer(),o=n||r&&r.hitCanvas,h=o&&o.getContext(),c=this._getCanvasCache();if(c&&c.hit){h.save();const p=this.getAbsoluteTransform(s).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",o,s);return this}_drawChildren(n,s,r,o){var h;const c=s&&s.getContext(),g=this.clipWidth(),p=this.clipHeight(),b=this.clipFunc(),O=typeof g=="number"&&typeof p=="number"||b,R=r===this;if(O){c.save();const z=this.getAbsoluteTransform(r);let S=z.getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.beginPath();let H;if(b)H=b.call(this,c,this);else{const w=this.clipX(),Y=this.clipY();c.rect(w||0,Y||0,g,p)}c.clip.apply(c,H),S=z.copy().invert().getMatrix(),c.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const E=!R&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";E&&(c.save(),c._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(z){z[n](s,r,o)}),E&&c.restore(),O&&c.restore()}getClientRect(n={}){var s;const r=n.skipTransform,o=n.relativeTo;let h,c,g,p,b={x:1/0,y:1/0,width:0,height:0};const O=this;(s=this.children)===null||s===void 0||s.forEach(function(z){if(!z.visible())return;const S=z.getClientRect({relativeTo:O,skipShadow:n.skipShadow,skipStroke:n.skipStroke});S.width===0&&S.height===0||(h===void 0?(h=S.x,c=S.y,g=S.x+S.width,p=S.y+S.height):(h=Math.min(h,S.x),c=Math.min(c,S.y),g=Math.max(g,S.x+S.width),p=Math.max(p,S.y+S.height)))});const R=this.find("Shape");let E=!1;for(let z=0;z<R.length;z++)if(R[z]._isVisible(this)){E=!0;break}return E&&h!==void 0?b={x:h,y:c,width:g-h,height:p-c}:b={x:0,y:0,width:0,height:0},r?b:this._transformedRect(b,o)}}rt.addComponentsGetterSetter(li,"clip",["x","y","width","height"]);rt.addGetterSetter(li,"clipX",void 0,Yt());rt.addGetterSetter(li,"clipY",void 0,Yt());rt.addGetterSetter(li,"clipWidth",void 0,Yt());rt.addGetterSetter(li,"clipHeight",void 0,Yt());rt.addGetterSetter(li,"clipFunc");const oh=new Map,lm=Vt._global.PointerEvent!==void 0;function ip(d){return oh.get(d)}function Pp(d){return{evt:d,pointerId:d.pointerId}}function rm(d,n){return oh.get(d)===n}function sm(d,n){nh(d),n.getStage()&&(oh.set(d,n),lm&&n._fire("gotpointercapture",Pp(new PointerEvent("gotpointercapture"))))}function nh(d,n){const s=oh.get(d);if(!s)return;const r=s.getStage();r&&r.content,oh.delete(d),lm&&s._fire("lostpointercapture",Pp(new PointerEvent("lostpointercapture")))}const My="Stage",xy="string",p1="px",Ny="mouseout",om="mouseleave",um="mouseover",cm="mouseenter",fm="mousemove",hm="mousedown",dm="mouseup",kf="pointermove",Wf="pointerdown",fc="pointerup",$f="pointercancel",Dy="lostpointercapture",Vd="pointerout",th="pointerleave",Pd="pointerover",Xd="pointerenter",Mp="contextmenu",pm="touchstart",gm="touchend",mm="touchmove",vm="touchcancel",xp="wheel",zy=5,Uy=[[cm,"_pointerenter"],[hm,"_pointerdown"],[fm,"_pointermove"],[dm,"_pointerup"],[om,"_pointerleave"],[pm,"_pointerdown"],[mm,"_pointermove"],[gm,"_pointerup"],[vm,"_pointercancel"],[um,"_pointerover"],[xp,"_wheel"],[Mp,"_contextmenu"],[Wf,"_pointerdown"],[kf,"_pointermove"],[fc,"_pointerup"],[$f,"_pointercancel"],[th,"_pointerleave"],[Dy,"_lostpointercapture"]],lp={mouse:{[Vd]:Ny,[th]:om,[Pd]:um,[Xd]:cm,[kf]:fm,[Wf]:hm,[fc]:dm,[$f]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Vd]:"touchout",[th]:"touchleave",[Pd]:"touchover",[Xd]:"touchenter",[kf]:mm,[Wf]:pm,[fc]:gm,[$f]:vm,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Vd]:Vd,[th]:th,[Pd]:Pd,[Xd]:Xd,[kf]:kf,[Wf]:Wf,[fc]:fc,[$f]:$f,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},eh=d=>d.indexOf("pointer")>=0?"pointer":d.indexOf("touch")>=0?"touch":"mouse",rc=d=>{const n=eh(d);if(n==="pointer")return Vt.pointerEventsEnabled&&lp.pointer;if(n==="touch")return lp.touch;if(n==="mouse")return lp.mouse};function g1(d={}){return(d.clipFunc||d.clipWidth||d.clipHeight)&&dt.warn("Stage does not support clipping. Please use clip for Layers or Groups."),d}const Gy="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",ah=[];let u0=class extends li{constructor(n){super(g1(n)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),ah.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{g1(this.attrs)}),this._checkVisibility()}_validateAdd(n){const s=n.getType()==="Layer",r=n.getType()==="FastLayer";s||r||dt.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const n=this.visible()?"":"none";this.content.style.display=n}setContainer(n){if(typeof n===xy){let s;if(n.charAt(0)==="."){const r=n.slice(1);n=document.getElementsByClassName(r)[0]}else n.charAt(0)!=="#"?s=n:s=n.slice(1),n=document.getElementById(s);if(!n)throw"Can not find container in document with id "+s}return this._setAttr("container",n),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),n.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const n=this.children,s=n.length;for(let r=0;r<s;r++)n[r].clear();return this}clone(n){return n||(n={}),n.container=typeof document<"u"&&document.createElement("div"),li.prototype.clone.call(this,n)}destroy(){super.destroy();const n=this.content;n&&dt._isInDocument(n)&&this.container().removeChild(n);const s=ah.indexOf(this);return s>-1&&ah.splice(s,1),dt.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const n=this._pointerPositions[0]||this._changedPointerPositions[0];return n?{x:n.x,y:n.y}:(dt.warn(Gy),null)}_getPointerById(n){return this._pointerPositions.find(s=>s.id===n)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(n){n={...n},n.x=n.x||0,n.y=n.y||0,n.width=n.width||this.width(),n.height=n.height||this.height();const s=new Ns({width:n.width,height:n.height,pixelRatio:n.pixelRatio||1}),r=s.getContext()._context,o=this.children;return(n.x||n.y)&&r.translate(-1*n.x,-1*n.y),o.forEach(function(h){if(!h.isVisible())return;const c=h._toKonvaCanvas(n);r.drawImage(c._canvas,n.x,n.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),s}getIntersection(n){if(!n)return null;const s=this.children,r=s.length,o=r-1;for(let h=o;h>=0;h--){const c=s[h].getIntersection(n);if(c)return c}return null}_resizeDOM(){const n=this.width(),s=this.height();this.content&&(this.content.style.width=n+p1,this.content.style.height=s+p1),this.bufferCanvas.setSize(n,s),this.bufferHitCanvas.setSize(n,s),this.children.forEach(r=>{r.setSize({width:n,height:s}),r.draw()})}add(n,...s){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(n);const r=this.children.length;return r>zy&&dt.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),n.setSize({width:this.width(),height:this.height()}),n.draw(),Vt.isBrowser&&this.content.appendChild(n.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(n){return rm(n,this)}setPointerCapture(n){sm(n,this)}releaseCapture(n){nh(n)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&Uy.forEach(([n,s])=>{this.content.addEventListener(n,r=>{this[s](r)},{passive:!1})})}_pointerenter(n){this.setPointersPositions(n);const s=rc(n.type);s&&this._fire(s.pointerenter,{evt:n,target:this,currentTarget:this})}_pointerover(n){this.setPointersPositions(n);const s=rc(n.type);s&&this._fire(s.pointerover,{evt:n,target:this,currentTarget:this})}_getTargetShape(n){let s=this[n+"targetShape"];return s&&!s.getStage()&&(s=null),s}_pointerleave(n){const s=rc(n.type),r=eh(n.type);if(!s)return;this.setPointersPositions(n);const o=this._getTargetShape(r),h=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;o&&h?(o._fireAndBubble(s.pointerout,{evt:n}),o._fireAndBubble(s.pointerleave,{evt:n}),this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this[r+"targetShape"]=null):h&&(this._fire(s.pointerleave,{evt:n,target:this,currentTarget:this}),this._fire(s.pointerout,{evt:n,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(n){const s=rc(n.type),r=eh(n.type);if(!s)return;this.setPointersPositions(n);let o=!1;this._changedPointerPositions.forEach(h=>{const c=this.getIntersection(h);if(we.justDragged=!1,Vt["_"+r+"ListenClick"]=!0,!c||!c.isListening()){this[r+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&c.setPointerCapture(h.id),this[r+"ClickStartShape"]=c,c._fireAndBubble(s.pointerdown,{evt:n,pointerId:h.id}),o=!0;const g=n.type.indexOf("touch")>=0;c.preventDefault()&&n.cancelable&&g&&n.preventDefault()}),o||this._fire(s.pointerdown,{evt:n,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(n){const s=rc(n.type),r=eh(n.type);if(!s)return;const o=n.type.indexOf("touch")>=0||n.pointerType==="touch";if(Vt.isDragging()&&we.node.preventDefault()&&n.cancelable&&o&&n.preventDefault(),this.setPointersPositions(n),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const c={};let g=!1;const p=this._getTargetShape(r);this._changedPointerPositions.forEach(b=>{const O=ip(b.id)||this.getIntersection(b),R=b.id,E={evt:n,pointerId:R},z=p!==O;if(z&&p&&(p._fireAndBubble(s.pointerout,{...E},O),p._fireAndBubble(s.pointerleave,{...E},O)),O){if(c[O._id])return;c[O._id]=!0}O&&O.isListening()?(g=!0,z&&(O._fireAndBubble(s.pointerover,{...E},p),O._fireAndBubble(s.pointerenter,{...E},p),this[r+"targetShape"]=O),O._fireAndBubble(s.pointermove,{...E})):p&&(this._fire(s.pointerover,{evt:n,target:this,currentTarget:this,pointerId:R}),this[r+"targetShape"]=null)}),g||this._fire(s.pointermove,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(n){const s=rc(n.type),r=eh(n.type);if(!s)return;this.setPointersPositions(n);const o=this[r+"ClickStartShape"],h=this[r+"ClickEndShape"],c={};let g=!1;this._changedPointerPositions.forEach(p=>{const b=ip(p.id)||this.getIntersection(p);if(b){if(b.releaseCapture(p.id),c[b._id])return;c[b._id]=!0}const O=p.id,R={evt:n,pointerId:O};let E=!1;Vt["_"+r+"InDblClickWindow"]?(E=!0,clearTimeout(this[r+"DblTimeout"])):we.justDragged||(Vt["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){Vt["_"+r+"InDblClickWindow"]=!1},Vt.dblClickWindow),b&&b.isListening()?(g=!0,this[r+"ClickEndShape"]=b,b._fireAndBubble(s.pointerup,{...R}),Vt["_"+r+"ListenClick"]&&o&&o===b&&(b._fireAndBubble(s.pointerclick,{...R}),E&&h&&h===b&&b._fireAndBubble(s.pointerdblclick,{...R}))):(this[r+"ClickEndShape"]=null,g||(this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),g=!0),Vt["_"+r+"ListenClick"]&&this._fire(s.pointerclick,{evt:n,target:this,currentTarget:this,pointerId:O}),E&&this._fire(s.pointerdblclick,{evt:n,target:this,currentTarget:this,pointerId:O}))}),g||this._fire(s.pointerup,{evt:n,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+r+"ListenClick"]=!1,n.cancelable&&r!=="touch"&&r!=="pointer"&&n.preventDefault()}_contextmenu(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(Mp,{evt:n}):this._fire(Mp,{evt:n,target:this,currentTarget:this})}_wheel(n){this.setPointersPositions(n);const s=this.getIntersection(this.getPointerPosition());s&&s.isListening()?s._fireAndBubble(xp,{evt:n}):this._fire(xp,{evt:n,target:this,currentTarget:this})}_pointercancel(n){this.setPointersPositions(n);const s=ip(n.pointerId)||this.getIntersection(this.getPointerPosition());s&&s._fireAndBubble(fc,Pp(n)),nh(n.pointerId)}_lostpointercapture(n){nh(n.pointerId)}setPointersPositions(n){const s=this._getContentPosition();let r=null,o=null;n=n||window.event,n.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(n.touches,h=>{this._pointerPositions.push({id:h.identifier,x:(h.clientX-s.left)/s.scaleX,y:(h.clientY-s.top)/s.scaleY})}),Array.prototype.forEach.call(n.changedTouches||n.touches,h=>{this._changedPointerPositions.push({id:h.identifier,x:(h.clientX-s.left)/s.scaleX,y:(h.clientY-s.top)/s.scaleY})})):(r=(n.clientX-s.left)/s.scaleX,o=(n.clientY-s.top)/s.scaleY,this.pointerPos={x:r,y:o},this._pointerPositions=[{x:r,y:o,id:dt._getFirstPointerId(n)}],this._changedPointerPositions=[{x:r,y:o,id:dt._getFirstPointerId(n)}])}_setPointerPosition(n){dt.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(n)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const n=this.content.getBoundingClientRect();return{top:n.top,left:n.left,scaleX:n.width/this.content.clientWidth||1,scaleY:n.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Ns({width:this.width(),height:this.height()}),this.bufferHitCanvas=new qp({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const n=this.container();if(!n)throw"Stage has no container. A container is required.";n.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),n.appendChild(this.content),this._resizeDOM()}cache(){return dt.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(n){n.batchDraw()}),this}};u0.prototype.nodeType=My;yn(u0);rt.addGetterSetter(u0,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{ah.forEach(d=>{d.batchDraw()})});const ym="hasShadow",Sm="shadowRGBA",bm="patternImage",Cm="linearGradient",Em="radialGradient";let Qd;function rp(){return Qd||(Qd=dt.createCanvasElement().getContext("2d"),Qd)}const ih={};function By(d){const n=this.attrs.fillRule;n?d.fill(n):d.fill()}function Hy(d){d.stroke()}function jy(d){const n=this.attrs.fillRule;n?d.fill(n):d.fill()}function Ly(d){d.stroke()}function wy(){this._clearCache(ym)}function Yy(){this._clearCache(Sm)}function qy(){this._clearCache(bm)}function Vy(){this._clearCache(Cm)}function Py(){this._clearCache(Em)}class Bt extends wt{constructor(n){super(n);let s;for(;s=dt.getRandomColor(),!(s&&!(s in ih)););this.colorKey=s,ih[s]=this}getContext(){return dt.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return dt.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ym,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(bm,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const s=rp().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(s&&s.setTransform){const r=new ii;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(Vt.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=r.getMatrix(),h=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);s.setTransform(h)}return s}}_getLinearGradient(){return this._getCache(Cm,this.__getLinearGradient)}__getLinearGradient(){const n=this.fillLinearGradientColorStops();if(n){const s=rp(),r=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),h=s.createLinearGradient(r.x,r.y,o.x,o.y);for(let c=0;c<n.length;c+=2)h.addColorStop(n[c],n[c+1]);return h}}_getRadialGradient(){return this._getCache(Em,this.__getRadialGradient)}__getRadialGradient(){const n=this.fillRadialGradientColorStops();if(n){const s=rp(),r=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),h=s.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let c=0;c<n.length;c+=2)h.addColorStop(n[c],n[c+1]);return h}}getShadowRGBA(){return this._getCache(Sm,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const n=dt.colorToRGBA(this.shadowColor());if(n)return"rgba("+n.r+","+n.g+","+n.b+","+n.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const n=this.hitStrokeWidth();return n==="auto"?this.hasStroke():this.strokeEnabled()&&!!n}intersects(n){const s=this.getStage();if(!s)return!1;const r=s.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(n.x),Math.round(n.y),1,1).data[3]>0}destroy(){return wt.prototype.destroy.call(this),delete ih[this.colorKey],delete this.colorKey,this}_useBufferCanvas(n){var s;if(!((s=this.attrs.perfectDrawEnabled)!==null&&s!==void 0?s:!0))return!1;const o=n||this.hasFill(),h=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(o&&h&&c)return!0;const g=this.hasShadow(),p=this.shadowForStrokeEnabled();return!!(o&&h&&g&&p)}setStrokeHitEnabled(n){dt.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),n?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const n=this.size();return{x:this._centroid?-n.width/2:0,y:this._centroid?-n.height/2:0,width:n.width,height:n.height}}getClientRect(n={}){let s=!1,r=this.getParent();for(;r;){if(r.isCached()){s=!0;break}r=r.getParent()}const o=n.skipTransform,h=n.relativeTo||s&&this.getStage()||void 0,c=this.getSelfRect(),p=!n.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,b=c.width+p,O=c.height+p,R=!n.skipShadow&&this.hasShadow(),E=R?this.shadowOffsetX():0,z=R?this.shadowOffsetY():0,S=b+Math.abs(E),H=O+Math.abs(z),w=R&&this.shadowBlur()||0,Y=S+w*2,G=H+w*2,D={width:Y,height:G,x:-(p/2+w)+Math.min(E,0)+c.x,y:-(p/2+w)+Math.min(z,0)+c.y};return o?D:this._transformedRect(D,h)}drawScene(n,s,r){const o=this.getLayer(),h=n||o.getCanvas(),c=h.getContext(),g=this._getCanvasCache(),p=this.getSceneFunc(),b=this.hasShadow();let O;const R=s===this;if(!this.isVisible()&&!R)return this;if(g){c.save();const E=this.getAbsoluteTransform(s).getMatrix();return c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!p)return this;if(c.save(),this._useBufferCanvas()){O=this.getStage();const E=r||O.bufferCanvas,z=E.getContext();z.clear(),z.save(),z._applyLineJoin(this),z._applyMiterLimit(this);const S=this.getAbsoluteTransform(s).getMatrix();z.transform(S[0],S[1],S[2],S[3],S[4],S[5]),p.call(this,z,this),z.restore();const H=E.pixelRatio;b&&c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(E._canvas,E.x||0,E.y||0,E.width/H,E.height/H)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!R){const E=this.getAbsoluteTransform(s).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}b&&c._applyShadow(this),p.call(this,c,this)}return c.restore(),this}drawHit(n,s,r=!1){if(!this.shouldDrawHit(s,r))return this;const o=this.getLayer(),h=n||o.hitCanvas,c=h&&h.getContext(),g=this.hitFunc()||this.sceneFunc(),p=this._getCanvasCache(),b=p&&p.hit;if(this.colorKey||dt.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),b){c.save();const R=this.getAbsoluteTransform(s).getMatrix();return c.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!g)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===s)){const R=this.getAbsoluteTransform(s).getMatrix();c.transform(R[0],R[1],R[2],R[3],R[4],R[5])}return g.call(this,c,this),c.restore(),this}drawHitFromCache(n=0){const s=this._getCanvasCache(),r=this._getCachedSceneCanvas(),o=s.hit,h=o.getContext(),c=o.getWidth(),g=o.getHeight();h.clear(),h.drawImage(r._canvas,0,0,c,g);try{const p=h.getImageData(0,0,c,g),b=p.data,O=b.length,R=dt._hexToRgb(this.colorKey);for(let E=0;E<O;E+=4)b[E+3]>n?(b[E]=R.r,b[E+1]=R.g,b[E+2]=R.b,b[E+3]=255):b[E+3]=0;h.putImageData(p,0,0)}catch(p){dt.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this}hasPointerCapture(n){return rm(n,this)}setPointerCapture(n){sm(n,this)}releaseCapture(n){nh(n)}}Bt.prototype._fillFunc=By;Bt.prototype._strokeFunc=Hy;Bt.prototype._fillFuncHit=jy;Bt.prototype._strokeFuncHit=Ly;Bt.prototype._centroid=!1;Bt.prototype.nodeType="Shape";yn(Bt);Bt.prototype.eventListeners={};Bt.prototype.on.call(Bt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",wy);Bt.prototype.on.call(Bt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Yy);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",qy);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Vy);Bt.prototype.on.call(Bt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Py);rt.addGetterSetter(Bt,"stroke",void 0,im());rt.addGetterSetter(Bt,"strokeWidth",2,Yt());rt.addGetterSetter(Bt,"fillAfterStrokeEnabled",!1);rt.addGetterSetter(Bt,"hitStrokeWidth","auto",Vp());rt.addGetterSetter(Bt,"strokeHitEnabled",!0,ll());rt.addGetterSetter(Bt,"perfectDrawEnabled",!0,ll());rt.addGetterSetter(Bt,"shadowForStrokeEnabled",!0,ll());rt.addGetterSetter(Bt,"lineJoin");rt.addGetterSetter(Bt,"lineCap");rt.addGetterSetter(Bt,"miterLimit");rt.addGetterSetter(Bt,"sceneFunc");rt.addGetterSetter(Bt,"hitFunc");rt.addGetterSetter(Bt,"dash");rt.addGetterSetter(Bt,"dashOffset",0,Yt());rt.addGetterSetter(Bt,"shadowColor",void 0,Uo());rt.addGetterSetter(Bt,"shadowBlur",0,Yt());rt.addGetterSetter(Bt,"shadowOpacity",1,Yt());rt.addComponentsGetterSetter(Bt,"shadowOffset",["x","y"]);rt.addGetterSetter(Bt,"shadowOffsetX",0,Yt());rt.addGetterSetter(Bt,"shadowOffsetY",0,Yt());rt.addGetterSetter(Bt,"fillPatternImage");rt.addGetterSetter(Bt,"fill",void 0,im());rt.addGetterSetter(Bt,"fillPatternX",0,Yt());rt.addGetterSetter(Bt,"fillPatternY",0,Yt());rt.addGetterSetter(Bt,"fillLinearGradientColorStops");rt.addGetterSetter(Bt,"strokeLinearGradientColorStops");rt.addGetterSetter(Bt,"fillRadialGradientStartRadius",0);rt.addGetterSetter(Bt,"fillRadialGradientEndRadius",0);rt.addGetterSetter(Bt,"fillRadialGradientColorStops");rt.addGetterSetter(Bt,"fillPatternRepeat","repeat");rt.addGetterSetter(Bt,"fillEnabled",!0);rt.addGetterSetter(Bt,"strokeEnabled",!0);rt.addGetterSetter(Bt,"shadowEnabled",!0);rt.addGetterSetter(Bt,"dashEnabled",!0);rt.addGetterSetter(Bt,"strokeScaleEnabled",!0);rt.addGetterSetter(Bt,"fillPriority","color");rt.addComponentsGetterSetter(Bt,"fillPatternOffset",["x","y"]);rt.addGetterSetter(Bt,"fillPatternOffsetX",0,Yt());rt.addGetterSetter(Bt,"fillPatternOffsetY",0,Yt());rt.addComponentsGetterSetter(Bt,"fillPatternScale",["x","y"]);rt.addGetterSetter(Bt,"fillPatternScaleX",1,Yt());rt.addGetterSetter(Bt,"fillPatternScaleY",1,Yt());rt.addComponentsGetterSetter(Bt,"fillLinearGradientStartPoint",["x","y"]);rt.addComponentsGetterSetter(Bt,"strokeLinearGradientStartPoint",["x","y"]);rt.addGetterSetter(Bt,"fillLinearGradientStartPointX",0);rt.addGetterSetter(Bt,"strokeLinearGradientStartPointX",0);rt.addGetterSetter(Bt,"fillLinearGradientStartPointY",0);rt.addGetterSetter(Bt,"strokeLinearGradientStartPointY",0);rt.addComponentsGetterSetter(Bt,"fillLinearGradientEndPoint",["x","y"]);rt.addComponentsGetterSetter(Bt,"strokeLinearGradientEndPoint",["x","y"]);rt.addGetterSetter(Bt,"fillLinearGradientEndPointX",0);rt.addGetterSetter(Bt,"strokeLinearGradientEndPointX",0);rt.addGetterSetter(Bt,"fillLinearGradientEndPointY",0);rt.addGetterSetter(Bt,"strokeLinearGradientEndPointY",0);rt.addComponentsGetterSetter(Bt,"fillRadialGradientStartPoint",["x","y"]);rt.addGetterSetter(Bt,"fillRadialGradientStartPointX",0);rt.addGetterSetter(Bt,"fillRadialGradientStartPointY",0);rt.addComponentsGetterSetter(Bt,"fillRadialGradientEndPoint",["x","y"]);rt.addGetterSetter(Bt,"fillRadialGradientEndPointX",0);rt.addGetterSetter(Bt,"fillRadialGradientEndPointY",0);rt.addGetterSetter(Bt,"fillPatternRotation",0);rt.addGetterSetter(Bt,"fillRule",void 0,Uo());rt.backCompat(Bt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Xy="#",Qy="beforeDraw",Ky="draw",Tm=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Iy=Tm.length;let Go=class extends li{constructor(n){super(n),this.canvas=new Ns,this.hitCanvas=new qp({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(n){return this.getContext().clear(n),this.getHitCanvas().getContext().clear(n),this}setZIndex(n){super.setZIndex(n);const s=this.getStage();return s&&s.content&&(s.content.removeChild(this.getNativeCanvasElement()),n<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[n+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){wt.prototype.moveToTop.call(this);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!wt.prototype.moveUp.call(this))return!1;const s=this.getStage();return!s||!s.content?!1:(s.content.removeChild(this.getNativeCanvasElement()),this.index<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[this.index+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(wt.prototype.moveDown.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(wt.prototype.moveToBottom.call(this)){const n=this.getStage();if(n){const s=n.children;n.content&&(n.content.removeChild(this.getNativeCanvasElement()),n.content.insertBefore(this.getNativeCanvasElement(),s[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const n=this.getNativeCanvasElement();return wt.prototype.remove.call(this),n&&n.parentNode&&dt._isInDocument(n)&&n.parentNode.removeChild(n),this}getStage(){return this.parent}setSize({width:n,height:s}){return this.canvas.setSize(n,s),this.hitCanvas.setSize(n,s),this._setSmoothEnabled(),this}_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&dt.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(n){return n={...n},n.width=n.width||this.getWidth(),n.height=n.height||this.getHeight(),n.x=n.x!==void 0?n.x:this.x(),n.y=n.y!==void 0?n.y:this.y(),wt.prototype._toKonvaCanvas.call(this,n)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){dt.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){dt.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,dt.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(n){if(!this.isListening()||!this.isVisible())return null;let s=1,r=!1;for(;;){for(let o=0;o<Iy;o++){const h=Tm[o],c=this._getIntersection({x:n.x+h.x*s,y:n.y+h.y*s}),g=c.shape;if(g)return g;if(r=!!c.antialiased,!c.antialiased)break}if(r)s+=1;else return null}}_getIntersection(n){const s=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(n.x*s),Math.round(n.y*s),1,1).data,o=r[3];if(o===255){const h=dt._rgbToHex(r[0],r[1],r[2]),c=ih[Xy+h];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(n,s,r){const o=this.getLayer(),h=n||o&&o.getCanvas();return this._fire(Qy,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),li.prototype.drawScene.call(this,h,s,r),this._fire(Ky,{node:this}),this}drawHit(n,s){const r=this.getLayer(),o=n||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),li.prototype.drawHit.call(this,o,s),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(n){dt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(n)}getHitGraphEnabled(n){return dt.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const n=this.parent;!!this.hitCanvas._canvas.parentNode?n.content.removeChild(this.hitCanvas._canvas):n.content.appendChild(this.hitCanvas._canvas)}destroy(){return dt.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Go.prototype.nodeType="Layer";yn(Go);rt.addGetterSetter(Go,"imageSmoothingEnabled",!0);rt.addGetterSetter(Go,"clearBeforeDraw",!0);rt.addGetterSetter(Go,"hitGraphEnabled",!0,ll());class Xp extends Go{constructor(n){super(n),this.listening(!1),dt.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Xp.prototype.nodeType="FastLayer";yn(Xp);class hc extends li{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&dt.throw("You may only add groups and shapes to groups.")}}hc.prototype.nodeType="Group";yn(hc);const sp=(function(){return Do.performance&&Do.performance.now?function(){return Do.performance.now()}:function(){return new Date().getTime()}})();class Ui{constructor(n,s){this.id=Ui.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:sp(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,r=s.length;for(let o=0;o<r;o++)if(s[o]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=Ui.animations,r=s.length;for(let o=0;o<r;o++)if(s[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=sp(),Ui._addAnimation(this),this}stop(){return Ui._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,r=this.animations,o=r.length;for(let h=0;h<o;h++)if(r[h].id===s){this.animations.splice(h,1);break}}static _runFrames(){const n={},s=this.animations;for(let r=0;r<s.length;r++){const o=s[r],h=o.layers,c=o.func;o._updateFrameObject(sp());const g=h.length;let p;if(c?p=c.call(o,o.frame)!==!1:p=!0,!!p)for(let b=0;b<g;b++){const O=h[b];O._id!==void 0&&(n[O._id]=O)}}for(const r in n)n.hasOwnProperty(r)&&n[r].batchDraw()}static _animationLoop(){const n=Ui;n.animations.length?(n._runFrames(),dt.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,dt.requestAnimFrame(this._animationLoop))}}Ui.animations=[];Ui.animIdCounter=0;Ui.animRunning=!1;const Zy={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Jy=1,m1=2,v1=3,y1=["fill","stroke","shadowColor"];let Fy=0;class ky{constructor(n,s,r,o,h,c,g){this.prop=n,this.propFunc=s,this.begin=o,this._pos=o,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=h-this.begin,this.pause()}fire(n){const s=this[n];s&&s()}setTime(n){n>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():n<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=n,this.update())}getTime(){return this._time}setPosition(n){this.prevPos=this._pos,this.propFunc(n),this._pos=n}getPosition(n){return n===void 0&&(n=this._time),this.func(n,this.begin,this._change,this.duration)}play(){this.state=m1,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=v1,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(n){this.pause(),this._time=n,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const n=this.getTimer()-this._startTime;this.state===m1?this.setTime(n):this.state===v1&&this.setTime(this.duration-n)}pause(){this.state=Jy,this.fire("onPause")}getTimer(){return new Date().getTime()}}class an{constructor(n){const s=this,r=n.node,o=r._id,h=n.easing||lh.Linear,c=!!n.yoyo;let g,p;typeof n.duration>"u"?g=.3:n.duration===0?g=.001:g=n.duration,this.node=r,this._id=Fy++;const b=r.getLayer()||(r instanceof Vt.Stage?r.getLayers():null);b||dt.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ui(function(){s.tween.onEnterFrame()},b),this.tween=new ky(p,function(O){s._tweenFunc(O)},h,0,1,g*1e3,c),this._addListeners(),an.attrs[o]||(an.attrs[o]={}),an.attrs[o][this._id]||(an.attrs[o][this._id]={}),an.tweens[o]||(an.tweens[o]={});for(p in n)Zy[p]===void 0&&this._addAttr(p,n[p]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}_addAttr(n,s){const r=this.node,o=r._id;let h,c,g,p,b;const O=an.tweens[o][n];O&&delete an.attrs[o][O][n];let R=r.getAttr(n);if(dt._isArray(s))if(h=[],c=Math.max(s.length,R.length),n==="points"&&s.length!==R.length&&(s.length>R.length?(p=R,R=dt._prepareArrayForTween(R,s,r.closed())):(g=s,s=dt._prepareArrayForTween(s,R,r.closed()))),n.indexOf("fill")===0)for(let E=0;E<c;E++)if(E%2===0)h.push(s[E]-R[E]);else{const z=dt.colorToRGBA(R[E]);b=dt.colorToRGBA(s[E]),R[E]=z,h.push({r:b.r-z.r,g:b.g-z.g,b:b.b-z.b,a:b.a-z.a})}else for(let E=0;E<c;E++)h.push(s[E]-R[E]);else y1.indexOf(n)!==-1?(R=dt.colorToRGBA(R),b=dt.colorToRGBA(s),h={r:b.r-R.r,g:b.g-R.g,b:b.b-R.b,a:b.a-R.a}):h=s-R;an.attrs[o][this._id][n]={start:R,diff:h,end:s,trueEnd:g,trueStart:p},an.tweens[o][n]=this._id}_tweenFunc(n){const s=this.node,r=an.attrs[s._id][this._id];let o,h,c,g,p,b,O,R;for(o in r){if(h=r[o],c=h.start,g=h.diff,R=h.end,dt._isArray(c))if(p=[],O=Math.max(c.length,R.length),o.indexOf("fill")===0)for(b=0;b<O;b++)b%2===0?p.push((c[b]||0)+g[b]*n):p.push("rgba("+Math.round(c[b].r+g[b].r*n)+","+Math.round(c[b].g+g[b].g*n)+","+Math.round(c[b].b+g[b].b*n)+","+(c[b].a+g[b].a*n)+")");else for(b=0;b<O;b++)p.push((c[b]||0)+g[b]*n);else y1.indexOf(o)!==-1?p="rgba("+Math.round(c.r+g.r*n)+","+Math.round(c.g+g.g*n)+","+Math.round(c.b+g.b*n)+","+(c.a+g.a*n)+")":p=c+g*n;s.setAttr(o,p)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const n=this.node,s=an.attrs[n._id][this._id];s.points&&s.points.trueEnd&&n.setAttr("points",s.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const n=this.node,s=an.attrs[n._id][this._id];s.points&&s.points.trueStart&&n.points(s.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(n){return this.tween.seek(n*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const n=this.node._id,s=this._id,r=an.tweens[n];this.pause(),this.anim&&this.anim.stop();for(const o in r)delete an.tweens[n][o];delete an.attrs[n][s],an.tweens[n]&&(Object.keys(an.tweens[n]).length===0&&delete an.tweens[n],Object.keys(an.attrs[n]).length===0&&delete an.attrs[n])}}an.attrs={};an.tweens={};wt.prototype.to=function(d){const n=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),n&&n()},new an(d).play()};const lh={BackEaseIn(d,n,s,r){return s*(d/=r)*d*((1.70158+1)*d-1.70158)+n},BackEaseOut(d,n,s,r){return s*((d=d/r-1)*d*((1.70158+1)*d+1.70158)+1)+n},BackEaseInOut(d,n,s,r){let o=1.70158;return(d/=r/2)<1?s/2*(d*d*(((o*=1.525)+1)*d-o))+n:s/2*((d-=2)*d*(((o*=1.525)+1)*d+o)+2)+n},ElasticEaseIn(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r)===1?n+s:(h||(h=r*.3),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),-(o*Math.pow(2,10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h))+n)},ElasticEaseOut(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r)===1?n+s:(h||(h=r*.3),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*d)*Math.sin((d*r-c)*(2*Math.PI)/h)+s+n)},ElasticEaseInOut(d,n,s,r,o,h){let c=0;return d===0?n:(d/=r/2)===2?n+s:(h||(h=r*(.3*1.5)),!o||o<Math.abs(s)?(o=s,c=h/4):c=h/(2*Math.PI)*Math.asin(s/o),d<1?-.5*(o*Math.pow(2,10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h))+n:o*Math.pow(2,-10*(d-=1))*Math.sin((d*r-c)*(2*Math.PI)/h)*.5+s+n)},BounceEaseOut(d,n,s,r){return(d/=r)<1/2.75?s*(7.5625*d*d)+n:d<2/2.75?s*(7.5625*(d-=1.5/2.75)*d+.75)+n:d<2.5/2.75?s*(7.5625*(d-=2.25/2.75)*d+.9375)+n:s*(7.5625*(d-=2.625/2.75)*d+.984375)+n},BounceEaseIn(d,n,s,r){return s-lh.BounceEaseOut(r-d,0,s,r)+n},BounceEaseInOut(d,n,s,r){return d<r/2?lh.BounceEaseIn(d*2,0,s,r)*.5+n:lh.BounceEaseOut(d*2-r,0,s,r)*.5+s*.5+n},EaseIn(d,n,s,r){return s*(d/=r)*d+n},EaseOut(d,n,s,r){return-s*(d/=r)*(d-2)+n},EaseInOut(d,n,s,r){return(d/=r/2)<1?s/2*d*d+n:-s/2*(--d*(d-2)-1)+n},StrongEaseIn(d,n,s,r){return s*(d/=r)*d*d*d*d+n},StrongEaseOut(d,n,s,r){return s*((d=d/r-1)*d*d*d*d+1)+n},StrongEaseInOut(d,n,s,r){return(d/=r/2)<1?s/2*d*d*d*d*d+n:s/2*((d-=2)*d*d*d*d+2)+n},Linear(d,n,s,r){return s*d/r+n}},dc=dt._assign(Vt,{Util:dt,Transform:ii,Node:wt,Container:li,Stage:u0,stages:ah,Layer:Go,FastLayer:Xp,Group:hc,DD:we,Shape:Bt,shapes:ih,Animation:Ui,Tween:an,Easings:lh,Context:s0,Canvas:Yp});class Lr extends Bt{_sceneFunc(n){const s=Vt.getAngle(this.angle()),r=this.clockwise();n.beginPath(),n.arc(0,0,this.outerRadius(),0,s,r),n.arc(0,0,this.innerRadius(),s,0,!r),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}getSelfRect(){const n=this.innerRadius(),s=this.outerRadius(),r=this.clockwise(),o=Vt.getAngle(r?360-this.angle():this.angle()),h=Math.cos(Math.min(o,Math.PI)),c=1,g=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),p=Math.sin(Math.min(o,Math.PI/2)),b=h*(h>0?n:s),O=c*s,R=g*(g>0?n:s),E=p*(p>0?s:n);return{x:b,y:r?-1*E:R,width:O-b,height:E-R}}}Lr.prototype._centroid=!0;Lr.prototype.className="Arc";Lr.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];yn(Lr);rt.addGetterSetter(Lr,"innerRadius",0,Yt());rt.addGetterSetter(Lr,"outerRadius",0,Yt());rt.addGetterSetter(Lr,"angle",0,Yt());rt.addGetterSetter(Lr,"clockwise",!1,ll());function Np(d,n,s,r,o,h,c){const g=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-n,2)),p=Math.sqrt(Math.pow(o-s,2)+Math.pow(h-r,2)),b=c*g/(g+p),O=c*p/(g+p),R=s-b*(o-d),E=r-b*(h-n),z=s+O*(o-d),S=r+O*(h-n);return[R,E,z,S]}function S1(d,n){const s=d.length,r=[];for(let o=2;o<s-2;o+=2){const h=Np(d[o-2],d[o-1],d[o],d[o+1],d[o+2],d[o+3],n);isNaN(h[0])||(r.push(h[0]),r.push(h[1]),r.push(d[o]),r.push(d[o+1]),r.push(h[2]),r.push(h[3]))}return r}let wr=class extends Bt{constructor(n){super(n),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(n){const s=this.points(),r=s.length,o=this.tension(),h=this.closed(),c=this.bezier();if(!r)return;let g=0;if(n.beginPath(),n.moveTo(s[0],s[1]),o!==0&&r>4){const p=this.getTensionPoints(),b=p.length;for(g=h?0:4,h||n.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<b-2;)n.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);h||n.quadraticCurveTo(p[b-2],p[b-1],s[r-2],s[r-1])}else if(c)for(g=2;g<r;)n.bezierCurveTo(s[g++],s[g++],s[g++],s[g++],s[g++],s[g++]);else for(g=2;g<r;g+=2)n.lineTo(s[g],s[g+1]);h?(n.closePath(),n.fillStrokeShape(this)):n.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():S1(this.points(),this.tension())}_getTensionPointsClosed(){const n=this.points(),s=n.length,r=this.tension(),o=Np(n[s-2],n[s-1],n[0],n[1],n[2],n[3],r),h=Np(n[s-4],n[s-3],n[s-2],n[s-1],n[0],n[1],r),c=S1(n,r);return[o[2],o[3]].concat(c).concat([h[0],h[1],n[s-2],n[s-1],h[2],h[3],o[0],o[1],n[0],n[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let n=this.points();if(n.length<4)return{x:n[0]||0,y:n[1]||0,width:0,height:0};this.tension()!==0?n=[n[0],n[1],...this._getTensionPoints(),n[n.length-2],n[n.length-1]]:n=this.points();let s=n[0],r=n[0],o=n[1],h=n[1],c,g;for(let p=0;p<n.length/2;p++)c=n[p*2],g=n[p*2+1],s=Math.min(s,c),r=Math.max(r,c),o=Math.min(o,g),h=Math.max(h,g);return{x:s,y:o,width:r-s,height:h-o}}};wr.prototype.className="Line";wr.prototype._attrsAffectingSize=["points","bezier","tension"];yn(wr);rt.addGetterSetter(wr,"closed",!1);rt.addGetterSetter(wr,"bezier",!1);rt.addGetterSetter(wr,"tension",0,Yt());rt.addGetterSetter(wr,"points",[],dy());const Wy=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],$y=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t4=[[1],[1,1],[1,2,1],[1,3,3,1]],b1=(d,n,s)=>{let r,o;const c=s/2;r=0;for(let g=0;g<20;g++)o=c*Wy[20][g]+c,r+=$y[20][g]*e4(d,n,o);return c*r},C1=(d,n,s)=>{s===void 0&&(s=1);const r=d[0]-2*d[1]+d[2],o=n[0]-2*n[1]+n[2],h=2*d[1]-2*d[0],c=2*n[1]-2*n[0],g=4*(r*r+o*o),p=4*(r*h+o*c),b=h*h+c*c;if(g===0)return s*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(n[2]-n[0],2));const O=p/(2*g),R=b/g,E=s+O,z=R-O*O,S=E*E+z>0?Math.sqrt(E*E+z):0,H=O*O+z>0?Math.sqrt(O*O+z):0,w=O+Math.sqrt(O*O+z)!==0?z*Math.log(Math.abs((E+S)/(O+H))):0;return Math.sqrt(g)/2*(E*S-O*H+w)};function e4(d,n,s){const r=Dp(1,s,d),o=Dp(1,s,n),h=r*r+o*o;return Math.sqrt(h)}const Dp=(d,n,s)=>{const r=s.length-1;let o,h;if(r===0)return 0;if(d===0){h=0;for(let c=0;c<=r;c++)h+=t4[r][c]*Math.pow(1-n,r-c)*Math.pow(n,c)*s[c];return h}else{o=new Array(r);for(let c=0;c<r;c++)o[c]=r*(s[c+1]-s[c]);return Dp(d-1,n,o)}},E1=(d,n,s)=>{let r=1,o=d/n,h=(d-s(o))/n,c=0;for(;r>.001;){const g=s(o+h),p=Math.abs(d-g)/n;if(p<r)r=p,o+=h;else{const b=s(o-h),O=Math.abs(d-b)/n;O<r?(r=O,o-=h):h/=2}if(c++,c>500)break}return o};class ln extends Bt{constructor(n){super(n),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ln.parsePathData(this.data()),this.pathLength=ln.getPathLength(this.dataArray)}_sceneFunc(n){const s=this.dataArray;n.beginPath();let r=!1;for(let o=0;o<s.length;o++){const h=s[o].command,c=s[o].points;switch(h){case"L":n.lineTo(c[0],c[1]);break;case"M":n.moveTo(c[0],c[1]);break;case"C":n.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":n.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const g=c[0],p=c[1],b=c[2],O=c[3],R=c[4],E=c[5],z=c[6],S=c[7],H=b>O?b:O,w=b>O?1:b/O,Y=b>O?O/b:1;n.translate(g,p),n.rotate(z),n.scale(w,Y),n.arc(0,0,H,R,R+E,1-S),n.scale(1/w,1/Y),n.rotate(-z),n.translate(-g,-p);break;case"z":r=!0,n.closePath();break}}!r&&!this.hasFill()?n.strokeShape(this):n.fillStrokeShape(this)}getSelfRect(){let n=[];this.dataArray.forEach(function(p){if(p.command==="A"){const b=p.points[4],O=p.points[5],R=p.points[4]+O;let E=Math.PI/180;if(Math.abs(b-R)<E&&(E=Math.abs(b-R)),O<0)for(let z=b-E;z>R;z-=E){const S=ln.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],z,0);n.push(S.x,S.y)}else for(let z=b+E;z<R;z+=E){const S=ln.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],z,0);n.push(S.x,S.y)}}else if(p.command==="C")for(let b=0;b<=1;b+=.01){const O=ln.getPointOnCubicBezier(b,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);n.push(O.x,O.y)}else n=n.concat(p.points)});let s=n[0],r=n[0],o=n[1],h=n[1],c,g;for(let p=0;p<n.length/2;p++)c=n[p*2],g=n[p*2+1],isNaN(c)||(s=Math.min(s,c),r=Math.max(r,c)),isNaN(g)||(o=Math.min(o,g),h=Math.max(h,g));return{x:s,y:o,width:r-s,height:h-o}}getLength(){return this.pathLength}getPointAtLength(n){return ln.getPointAtLengthOfDataArray(n,this.dataArray)}static getLineLength(n,s,r,o){return Math.sqrt((r-n)*(r-n)+(o-s)*(o-s))}static getPathLength(n){let s=0;for(let r=0;r<n.length;++r)s+=n[r].pathLength;return s}static getPointAtLengthOfDataArray(n,s){let r,o=0,h=s.length;if(!h)return null;for(;o<h&&n>s[o].pathLength;)n-=s[o].pathLength,++o;if(o===h)return r=s[o-1].points.slice(-2),{x:r[0],y:r[1]};if(n<.01)return s[o].command==="M"?(r=s[o].points.slice(0,2),{x:r[0],y:r[1]}):{x:s[o].start.x,y:s[o].start.y};const c=s[o],g=c.points;switch(c.command){case"L":return ln.getPointOnLine(n,c.start.x,c.start.y,g[0],g[1]);case"C":return ln.getPointOnCubicBezier(E1(n,ln.getPathLength(s),H=>b1([c.start.x,g[0],g[2],g[4]],[c.start.y,g[1],g[3],g[5]],H)),c.start.x,c.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return ln.getPointOnQuadraticBezier(E1(n,ln.getPathLength(s),H=>C1([c.start.x,g[0],g[2]],[c.start.y,g[1],g[3]],H)),c.start.x,c.start.y,g[0],g[1],g[2],g[3]);case"A":const p=g[0],b=g[1],O=g[2],R=g[3],E=g[5],z=g[6];let S=g[4];return S+=E*n/c.pathLength,ln.getPointOnEllipticalArc(p,b,O,R,S,z)}return null}static getPointOnLine(n,s,r,o,h,c,g){c=c??s,g=g??r;const p=this.getLineLength(s,r,o,h);if(p<1e-10)return{x:s,y:r};if(o===s)return{x:c,y:g+(h>r?n:-n)};const b=(h-r)/(o-s),O=Math.sqrt(n*n/(1+b*b))*(o<s?-1:1),R=b*O;if(Math.abs(g-r-b*(c-s))<1e-10)return{x:c+O,y:g+R};const E=((c-s)*(o-s)+(g-r)*(h-r))/(p*p),z=s+E*(o-s),S=r+E*(h-r),H=this.getLineLength(c,g,z,S),w=Math.sqrt(n*n-H*H),Y=Math.sqrt(w*w/(1+b*b))*(o<s?-1:1),G=b*Y;return{x:z+Y,y:S+G}}static getPointOnCubicBezier(n,s,r,o,h,c,g,p,b){function O(w){return w*w*w}function R(w){return 3*w*w*(1-w)}function E(w){return 3*w*(1-w)*(1-w)}function z(w){return(1-w)*(1-w)*(1-w)}const S=p*O(n)+c*R(n)+o*E(n)+s*z(n),H=b*O(n)+g*R(n)+h*E(n)+r*z(n);return{x:S,y:H}}static getPointOnQuadraticBezier(n,s,r,o,h,c,g){function p(z){return z*z}function b(z){return 2*z*(1-z)}function O(z){return(1-z)*(1-z)}const R=c*p(n)+o*b(n)+s*O(n),E=g*p(n)+h*b(n)+r*O(n);return{x:R,y:E}}static getPointOnEllipticalArc(n,s,r,o,h,c){const g=Math.cos(c),p=Math.sin(c),b={x:r*Math.cos(h),y:o*Math.sin(h)};return{x:n+(b.x*g-b.y*p),y:s+(b.x*p+b.y*g)}}static parsePathData(n){if(!n)return[];let s=n;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(let R=0;R<r.length;R++)s=s.replace(new RegExp(r[R],"g"),"|"+r[R]);const o=s.split("|"),h=[],c=[];let g=0,p=0;const b=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let O;for(let R=1;R<o.length;R++){let E=o[R],z=E.charAt(0);for(E=E.slice(1),c.length=0;O=b.exec(E);)c.push(O[0]);let S=[],H=z==="A"||z==="a"?0:-1;for(let w=0,Y=c.length;w<Y;w++){const G=c[w];if(G==="00"){S.push(0,0),H>=0&&(H+=2,H>=7&&(H-=7));continue}if(H>=0){if(H===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(G)){S.push(parseInt(G[0],10)),S.push(parseInt(G[1],10)),S.push(parseFloat(G.slice(2))),H+=3,H>=7&&(H-=7);continue}if(G==="11"||G==="10"||G==="01"){S.push(parseInt(G[0],10)),S.push(parseInt(G[1],10)),H+=2,H>=7&&(H-=7);continue}if(G==="0"||G==="1"){S.push(parseInt(G,10)),H+=1,H>=7&&(H-=7);continue}}else if(H===4){if(/^[01]\d+(?:\.\d+)?$/.test(G)){S.push(parseInt(G[0],10)),S.push(parseFloat(G.slice(1))),H+=2,H>=7&&(H-=7);continue}if(G==="0"||G==="1"){S.push(parseInt(G,10)),H+=1,H>=7&&(H-=7);continue}}const D=parseFloat(G);isNaN(D)?S.push(0):S.push(D),H+=1,H>=7&&(H-=7)}else{const D=parseFloat(G);isNaN(D)?S.push(0):S.push(D)}}for(;S.length>0&&!isNaN(S[0]);){let w="",Y=[];const G=g,D=p;let j,M,A,T,y,U,N,q,I,Z;switch(z){case"l":g+=S.shift(),p+=S.shift(),w="L",Y.push(g,p);break;case"L":g=S.shift(),p=S.shift(),Y.push(g,p);break;case"m":const K=S.shift(),X=S.shift();if(g+=K,p+=X,w="M",h.length>2&&h[h.length-1].command==="z"){for(let x=h.length-2;x>=0;x--)if(h[x].command==="M"){g=h[x].points[0]+K,p=h[x].points[1]+X;break}}Y.push(g,p),z="l";break;case"M":g=S.shift(),p=S.shift(),w="M",Y.push(g,p),z="L";break;case"h":g+=S.shift(),w="L",Y.push(g,p);break;case"H":g=S.shift(),w="L",Y.push(g,p);break;case"v":p+=S.shift(),w="L",Y.push(g,p);break;case"V":p=S.shift(),w="L",Y.push(g,p);break;case"C":Y.push(S.shift(),S.shift(),S.shift(),S.shift()),g=S.shift(),p=S.shift(),Y.push(g,p);break;case"c":Y.push(g+S.shift(),p+S.shift(),g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="C",Y.push(g,p);break;case"S":M=g,A=p,j=h[h.length-1],j.command==="C"&&(M=g+(g-j.points[2]),A=p+(p-j.points[3])),Y.push(M,A,S.shift(),S.shift()),g=S.shift(),p=S.shift(),w="C",Y.push(g,p);break;case"s":M=g,A=p,j=h[h.length-1],j.command==="C"&&(M=g+(g-j.points[2]),A=p+(p-j.points[3])),Y.push(M,A,g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="C",Y.push(g,p);break;case"Q":Y.push(S.shift(),S.shift()),g=S.shift(),p=S.shift(),Y.push(g,p);break;case"q":Y.push(g+S.shift(),p+S.shift()),g+=S.shift(),p+=S.shift(),w="Q",Y.push(g,p);break;case"T":M=g,A=p,j=h[h.length-1],j.command==="Q"&&(M=g+(g-j.points[0]),A=p+(p-j.points[1])),g=S.shift(),p=S.shift(),w="Q",Y.push(M,A,g,p);break;case"t":M=g,A=p,j=h[h.length-1],j.command==="Q"&&(M=g+(g-j.points[0]),A=p+(p-j.points[1])),g+=S.shift(),p+=S.shift(),w="Q",Y.push(M,A,g,p);break;case"A":T=S.shift(),y=S.shift(),U=S.shift(),N=S.shift(),q=S.shift(),I=g,Z=p,g=S.shift(),p=S.shift(),w="A",Y=this.convertEndpointToCenterParameterization(I,Z,g,p,N,q,T,y,U);break;case"a":T=S.shift(),y=S.shift(),U=S.shift(),N=S.shift(),q=S.shift(),I=g,Z=p,g+=S.shift(),p+=S.shift(),w="A",Y=this.convertEndpointToCenterParameterization(I,Z,g,p,N,q,T,y,U);break}h.push({command:w||z,points:Y,start:{x:G,y:D},pathLength:this.calcLength(G,D,w||z,Y)})}(z==="z"||z==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(n,s,r,o){let h,c,g,p;const b=ln;switch(r){case"L":return b.getLineLength(n,s,o[0],o[1]);case"C":return b1([n,o[0],o[2],o[4]],[s,o[1],o[3],o[5]],1);case"Q":return C1([n,o[0],o[2]],[s,o[1],o[3]],1);case"A":h=0;const O=o[4],R=o[5],E=o[4]+R;let z=Math.PI/180;if(Math.abs(O-E)<z&&(z=Math.abs(O-E)),c=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],O,0),R<0)for(p=O-z;p>E;p-=z)g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],p,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),c=g;else for(p=O+z;p<E;p+=z)g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],p,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),c=g;return g=b.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],E,0),h+=b.getLineLength(c.x,c.y,g.x,g.y),h}return 0}static convertEndpointToCenterParameterization(n,s,r,o,h,c,g,p,b){const O=b*(Math.PI/180),R=Math.cos(O)*(n-r)/2+Math.sin(O)*(s-o)/2,E=-1*Math.sin(O)*(n-r)/2+Math.cos(O)*(s-o)/2,z=R*R/(g*g)+E*E/(p*p);z>1&&(g*=Math.sqrt(z),p*=Math.sqrt(z));let S=Math.sqrt((g*g*(p*p)-g*g*(E*E)-p*p*(R*R))/(g*g*(E*E)+p*p*(R*R)));h===c&&(S*=-1),isNaN(S)&&(S=0);const H=S*g*E/p,w=S*-p*R/g,Y=(n+r)/2+Math.cos(O)*H-Math.sin(O)*w,G=(s+o)/2+Math.sin(O)*H+Math.cos(O)*w,D=function(N){return Math.sqrt(N[0]*N[0]+N[1]*N[1])},j=function(N,q){return(N[0]*q[0]+N[1]*q[1])/(D(N)*D(q))},M=function(N,q){return(N[0]*q[1]<N[1]*q[0]?-1:1)*Math.acos(j(N,q))},A=M([1,0],[(R-H)/g,(E-w)/p]),T=[(R-H)/g,(E-w)/p],y=[(-1*R-H)/g,(-1*E-w)/p];let U=M(T,y);return j(T,y)<=-1&&(U=Math.PI),j(T,y)>=1&&(U=0),c===0&&U>0&&(U=U-2*Math.PI),c===1&&U<0&&(U=U+2*Math.PI),[Y,G,g,p,A,U,O,c]}}ln.prototype.className="Path";ln.prototype._attrsAffectingSize=["data"];yn(ln);rt.addGetterSetter(ln,"data");class Bo extends wr{_sceneFunc(n){super._sceneFunc(n);const s=Math.PI*2,r=this.points();let o=r;const h=this.tension()!==0&&r.length>4;h&&(o=this.getTensionPoints());const c=this.pointerLength(),g=r.length;let p,b;if(h){const E=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],r[g-2],r[g-1]],z=ln.calcLength(o[o.length-4],o[o.length-3],"C",E),S=ln.getPointOnQuadraticBezier(Math.min(1,1-c/z),E[0],E[1],E[2],E[3],E[4],E[5]);p=r[g-2]-S.x,b=r[g-1]-S.y}else p=r[g-2]-r[g-4],b=r[g-1]-r[g-3];const O=(Math.atan2(b,p)+s)%s,R=this.pointerWidth();this.pointerAtEnding()&&(n.save(),n.beginPath(),n.translate(r[g-2],r[g-1]),n.rotate(O),n.moveTo(0,0),n.lineTo(-c,R/2),n.lineTo(-c,-R/2),n.closePath(),n.restore(),this.__fillStroke(n)),this.pointerAtBeginning()&&(n.save(),n.beginPath(),n.translate(r[0],r[1]),h?(p=(o[0]+o[2])/2-r[0],b=(o[1]+o[3])/2-r[1]):(p=r[2]-r[0],b=r[3]-r[1]),n.rotate((Math.atan2(-b,-p)+s)%s),n.moveTo(0,0),n.lineTo(-c,R/2),n.lineTo(-c,-R/2),n.closePath(),n.restore(),this.__fillStroke(n))}__fillStroke(n){const s=this.dashEnabled();s&&(this.attrs.dashEnabled=!1,n.setLineDash([])),n.fillStrokeShape(this),s&&(this.attrs.dashEnabled=!0)}getSelfRect(){const n=super.getSelfRect(),s=this.pointerWidth()/2;return{x:n.x,y:n.y-s,width:n.width,height:n.height+s*2}}}Bo.prototype.className="Arrow";yn(Bo);rt.addGetterSetter(Bo,"pointerLength",10,Yt());rt.addGetterSetter(Bo,"pointerWidth",10,Yt());rt.addGetterSetter(Bo,"pointerAtBeginning",!1);rt.addGetterSetter(Bo,"pointerAtEnding",!0);class vc extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius()!==n/2&&this.radius(n/2)}setHeight(n){this.radius()!==n/2&&this.radius(n/2)}}vc.prototype._centroid=!0;vc.prototype.className="Circle";vc.prototype._attrsAffectingSize=["radius"];yn(vc);rt.addGetterSetter(vc,"radius",0,Yt());class Us extends Bt{_sceneFunc(n){const s=this.radiusX(),r=this.radiusY();n.beginPath(),n.save(),s!==r&&n.scale(1,r/s),n.arc(0,0,s,0,Math.PI*2,!1),n.restore(),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(n){this.radiusX(n/2)}setHeight(n){this.radiusY(n/2)}}Us.prototype.className="Ellipse";Us.prototype._centroid=!0;Us.prototype._attrsAffectingSize=["radiusX","radiusY"];yn(Us);rt.addComponentsGetterSetter(Us,"radius",["x","y"]);rt.addGetterSetter(Us,"radiusX",0,Yt());rt.addGetterSetter(Us,"radiusY",0,Yt());let rl=class Am extends Bt{constructor(n){super(n),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",s=>{this._removeImageLoad(s.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const n=this.image();n&&n.complete||n&&n.readyState===4||n&&n.addEventListener&&n.addEventListener("load",this._loadListener)}_removeImageLoad(n){n&&n.removeEventListener&&n.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const n=!!this.cornerRadius(),s=this.hasShadow();return n&&s?!0:super._useBufferCanvas(!0)}_sceneFunc(n){const s=this.getWidth(),r=this.getHeight(),o=this.cornerRadius(),h=this.attrs.image;let c;if(h){const g=this.attrs.cropWidth,p=this.attrs.cropHeight;g&&p?c=[h,this.cropX(),this.cropY(),g,p,0,0,s,r]:c=[h,0,0,s,r]}(this.hasFill()||this.hasStroke()||o)&&(n.beginPath(),o?dt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)),h&&(o&&n.clip(),n.drawImage.apply(n,c))}_hitFunc(n){const s=this.width(),r=this.height(),o=this.cornerRadius();n.beginPath(),o?dt.drawRoundedRectPath(n,s,r,o):n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}getWidth(){var n,s,r;return(r=(n=this.attrs.width)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.width)!==null&&r!==void 0?r:0}getHeight(){var n,s,r;return(r=(n=this.attrs.height)!==null&&n!==void 0?n:(s=this.image())===null||s===void 0?void 0:s.height)!==null&&r!==void 0?r:0}static fromURL(n,s,r=null){const o=dt.createImageElement();o.onload=function(){const h=new Am({image:o});s(h)},o.onerror=r,o.crossOrigin="Anonymous",o.src=n}};rl.prototype.className="Image";rl.prototype._attrsAffectingSize=["image"];yn(rl);rt.addGetterSetter(rl,"cornerRadius",0,o0(4));rt.addGetterSetter(rl,"image");rt.addComponentsGetterSetter(rl,"crop",["x","y","width","height"]);rt.addGetterSetter(rl,"cropX",0,Yt());rt.addGetterSetter(rl,"cropY",0,Yt());rt.addGetterSetter(rl,"cropWidth",0,Yt());rt.addGetterSetter(rl,"cropHeight",0,Yt());const _m=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],n4="Change.konva",a4="none",zp="up",Up="right",Gp="down",Bp="left",i4=_m.length;class Qp extends hc{constructor(n){super(n),this.on("add.konva",function(s){this._addListeners(s.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(n){let s=this,r;const o=function(){s._sync()};for(r=0;r<i4;r++)n.on(_m[r]+n4,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let n=this.getText(),s=this.getTag(),r,o,h,c,g,p,b;if(n&&s){switch(r=n.width(),o=n.height(),h=s.pointerDirection(),c=s.pointerWidth(),b=s.pointerHeight(),g=0,p=0,h){case zp:g=r/2,p=-1*b;break;case Up:g=r+c,p=o/2;break;case Gp:g=r/2,p=o+b;break;case Bp:g=-1*c,p=o/2;break}s.setAttrs({x:-1*g,y:-1*p,width:r,height:o}),n.setAttrs({x:-1*g,y:-1*p})}}}Qp.prototype.className="Label";yn(Qp);class Ho extends Bt{_sceneFunc(n){const s=this.width(),r=this.height(),o=this.pointerDirection(),h=this.pointerWidth(),c=this.pointerHeight(),g=this.cornerRadius();let p=0,b=0,O=0,R=0;typeof g=="number"?p=b=O=R=Math.min(g,s/2,r/2):(p=Math.min(g[0]||0,s/2,r/2),b=Math.min(g[1]||0,s/2,r/2),R=Math.min(g[2]||0,s/2,r/2),O=Math.min(g[3]||0,s/2,r/2)),n.beginPath(),n.moveTo(p,0),o===zp&&(n.lineTo((s-h)/2,0),n.lineTo(s/2,-1*c),n.lineTo((s+h)/2,0)),n.lineTo(s-b,0),n.arc(s-b,b,b,Math.PI*3/2,0,!1),o===Up&&(n.lineTo(s,(r-c)/2),n.lineTo(s+h,r/2),n.lineTo(s,(r+c)/2)),n.lineTo(s,r-R),n.arc(s-R,r-R,R,0,Math.PI/2,!1),o===Gp&&(n.lineTo((s+h)/2,r),n.lineTo(s/2,r+c),n.lineTo((s-h)/2,r)),n.lineTo(O,r),n.arc(O,r-O,O,Math.PI/2,Math.PI,!1),o===Bp&&(n.lineTo(0,(r+c)/2),n.lineTo(-1*h,r/2),n.lineTo(0,(r-c)/2)),n.lineTo(0,p),n.arc(p,p,p,Math.PI,Math.PI*3/2,!1),n.closePath(),n.fillStrokeShape(this)}getSelfRect(){let n=0,s=0,r=this.pointerWidth(),o=this.pointerHeight(),h=this.pointerDirection(),c=this.width(),g=this.height();return h===zp?(s-=o,g+=o):h===Gp?g+=o:h===Bp?(n-=r*1.5,c+=r):h===Up&&(c+=r*1.5),{x:n,y:s,width:c,height:g}}}Ho.prototype.className="Tag";yn(Ho);rt.addGetterSetter(Ho,"pointerDirection",a4);rt.addGetterSetter(Ho,"pointerWidth",0,Yt());rt.addGetterSetter(Ho,"pointerHeight",0,Yt());rt.addGetterSetter(Ho,"cornerRadius",0,o0(4));class uh extends Bt{_sceneFunc(n){const s=this.cornerRadius(),r=this.width(),o=this.height();n.beginPath(),s?dt.drawRoundedRectPath(n,r,o,s):n.rect(0,0,r,o),n.closePath(),n.fillStrokeShape(this)}}uh.prototype.className="Rect";yn(uh);rt.addGetterSetter(uh,"cornerRadius",0,o0(4));class Gs extends Bt{_sceneFunc(n){const s=this._getPoints(),r=this.radius(),o=this.sides(),h=this.cornerRadius();if(n.beginPath(),h)dt.drawRoundedPolygonPath(n,s,o,r,h);else{n.moveTo(s[0].x,s[0].y);for(let c=1;c<s.length;c++)n.lineTo(s[c].x,s[c].y)}n.closePath(),n.fillStrokeShape(this)}_getPoints(){const n=this.attrs.sides,s=this.attrs.radius||0,r=[];for(let o=0;o<n;o++)r.push({x:s*Math.sin(o*2*Math.PI/n),y:-1*s*Math.cos(o*2*Math.PI/n)});return r}getSelfRect(){const n=this._getPoints();let s=n[0].x,r=n[0].y,o=n[0].x,h=n[0].y;return n.forEach(c=>{s=Math.min(s,c.x),r=Math.max(r,c.x),o=Math.min(o,c.y),h=Math.max(h,c.y)}),{x:s,y:o,width:r-s,height:h-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Gs.prototype.className="RegularPolygon";Gs.prototype._centroid=!0;Gs.prototype._attrsAffectingSize=["radius"];yn(Gs);rt.addGetterSetter(Gs,"radius",0,Yt());rt.addGetterSetter(Gs,"sides",0,Yt());rt.addGetterSetter(Gs,"cornerRadius",0,o0(4));const T1=Math.PI*2;class jo extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.innerRadius(),0,T1,!1),n.moveTo(this.outerRadius(),0),n.arc(0,0,this.outerRadius(),T1,0,!0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}jo.prototype.className="Ring";jo.prototype._centroid=!0;jo.prototype._attrsAffectingSize=["innerRadius","outerRadius"];yn(jo);rt.addGetterSetter(jo,"innerRadius",0,Yt());rt.addGetterSetter(jo,"outerRadius",0,Yt());class Ll extends Bt{constructor(n){super(n),this._updated=!0,this.anim=new Ui(()=>{const s=this._updated;return this._updated=!1,s}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,h=this.animations()[s],c=this.frameOffsets(),g=h[o+0],p=h[o+1],b=h[o+2],O=h[o+3],R=this.image();if((this.hasFill()||this.hasStroke())&&(n.beginPath(),n.rect(0,0,b,O),n.closePath(),n.fillStrokeShape(this)),R)if(c){const E=c[s],z=r*2;n.drawImage(R,g,p,b,O,E[z+0],E[z+1],b,O)}else n.drawImage(R,g,p,b,O,0,0,b,O)}_hitFunc(n){const s=this.animation(),r=this.frameIndex(),o=r*4,h=this.animations()[s],c=this.frameOffsets(),g=h[o+2],p=h[o+3];if(n.beginPath(),c){const b=c[s],O=r*2;n.rect(b[O+0],b[O+1],g,p)}else n.rect(0,0,g,p);n.closePath(),n.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const n=this;this.interval=setInterval(function(){n._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const n=this.getLayer();this.anim.setLayers(n),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const n=this.frameIndex(),s=this.animation(),r=this.animations(),o=r[s],h=o.length/4;n<h-1?this.frameIndex(n+1):this.frameIndex(0)}}Ll.prototype.className="Sprite";yn(Ll);rt.addGetterSetter(Ll,"animation");rt.addGetterSetter(Ll,"animations");rt.addGetterSetter(Ll,"frameOffsets");rt.addGetterSetter(Ll,"image");rt.addGetterSetter(Ll,"frameIndex",0,Yt());rt.addGetterSetter(Ll,"frameRate",17,Yt());rt.backCompat(Ll,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Bs extends Bt{_sceneFunc(n){const s=this.innerRadius(),r=this.outerRadius(),o=this.numPoints();n.beginPath(),n.moveTo(0,0-r);for(let h=1;h<o*2;h++){const c=h%2===0?r:s,g=c*Math.sin(h*Math.PI/o),p=-1*c*Math.cos(h*Math.PI/o);n.lineTo(g,p)}n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(n){this.outerRadius(n/2)}setHeight(n){this.outerRadius(n/2)}}Bs.prototype.className="Star";Bs.prototype._centroid=!0;Bs.prototype._attrsAffectingSize=["innerRadius","outerRadius"];yn(Bs);rt.addGetterSetter(Bs,"numPoints",5,Yt());rt.addGetterSetter(Bs,"innerRadius",0,Yt());rt.addGetterSetter(Bs,"outerRadius",0,Yt());function xs(d){return[...d].reduce((n,s,r,o)=>{if(new RegExp("\\p{Emoji}","u").test(s)){const h=o[r+1];h&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(h)?(n.push(s+h),o[r+1]=""):n.push(s)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(s+(o[r+1]||""))?n.push(s+o[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(s)?n[n.length-1]+=s:s&&n.push(s);return n},[])}const sc="auto",l4="center",Om="inherit",oc="justify",r4="Change.konva",s4="2d",A1="-",Rm="left",o4="text",u4="Text",c4="top",f4="bottom",_1="middle",Mm="normal",h4="px ",Kd=" ",d4="right",O1="rtl",p4="word",g4="char",R1="none",op="",xm=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],m4=xm.length;function v4(d){return d.split(",").map(n=>{n=n.trim();const s=n.indexOf(" ")>=0,r=n.indexOf('"')>=0||n.indexOf("'")>=0;return s&&!r&&(n=`"${n}"`),n}).join(", ")}let Id;function up(){return Id||(Id=dt.createCanvasElement().getContext(s4),Id)}function y4(d){d.fillText(this._partialText,this._partialTextX,this._partialTextY)}function S4(d){d.setAttr("miterLimit",2),d.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function b4(d){return d=d||{},!d.fillLinearGradientColorStops&&!d.fillRadialGradientColorStops&&!d.fillPatternImage&&(d.fill=d.fill||"black"),d}class cn extends Bt{constructor(n){super(b4(n)),this._partialTextX=0,this._partialTextY=0;for(let s=0;s<m4;s++)this.on(xm[s]+r4,this._setTextData);this._setTextData()}_sceneFunc(n){var s,r;const o=this.textArr,h=o.length;if(!this.text())return;let c=this.padding(),g=this.fontSize(),p=this.lineHeight()*g,b=this.verticalAlign(),O=this.direction(),R=0,E=this.align(),z=this.getWidth(),S=this.letterSpacing(),H=this.charRenderFunc(),w=this.fill(),Y=this.textDecoration(),G=Y.indexOf("underline")!==-1,D=Y.indexOf("line-through")!==-1,j;O=O===Om?n.direction:O;let M=p/2,A=_1;if(!Vt.legacyTextRendering){const T=this.measureSize("M");A="alphabetic";const y=(s=T.fontBoundingBoxAscent)!==null&&s!==void 0?s:T.actualBoundingBoxAscent,U=(r=T.fontBoundingBoxDescent)!==null&&r!==void 0?r:T.actualBoundingBoxDescent;M=(y-U)/2+p/2}for(O===O1&&n.setAttr("direction",O),n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",A),n.setAttr("textAlign",Rm),b===_1?R=(this.getHeight()-h*p-c*2)/2:b===f4&&(R=this.getHeight()-h*p-c*2),n.translate(c,R+c),j=0;j<h;j++){let T=0,y=0;const U=o[j],N=U.text,q=U.width,I=U.lastInParagraph;if(n.save(),E===d4?T+=z-q-c*2:E===l4&&(T+=(z-q-c*2)/2),G){n.save(),n.beginPath();const Z=Vt.legacyTextRendering?Math.round(g/2):Math.round(g/4),K=T,X=M+y+Z;n.moveTo(K,X);const x=E===oc&&!I?z-c*2:q;n.lineTo(K+Math.round(x),X),n.lineWidth=g/15;const L=this._getLinearGradient();n.strokeStyle=L||w,n.stroke(),n.restore()}if(O!==O1&&(S!==0||E===oc||H)){const Z=N.split(" ").length-1,K=xs(N);for(let X=0;X<K.length;X++){const x=K[X];if(x===" "&&!I&&E===oc&&(T+=(z-c*2-q)/Z),this._partialTextX=T,this._partialTextY=M+y,this._partialText=x,H){n.save();const Q=o.slice(0,j).reduce((nt,F)=>nt+xs(F.text).length,0),k=X+Q;H({char:x,index:k,x:T,y:M+y,lineIndex:j,column:X,isLastInLine:I,width:this.measureSize(x).width,context:n})}n.fillStrokeShape(this),H&&n.restore(),T+=this.measureSize(x).width+S}}else S!==0&&n.setAttr("letterSpacing",`${S}px`),this._partialTextX=T,this._partialTextY=M+y,this._partialText=N,n.fillStrokeShape(this);if(D){n.save(),n.beginPath();const Z=Vt.legacyTextRendering?0:-Math.round(g/4),K=E===oc?0:T;n.moveTo(K,M+y+Z);const X=E===oc&&!I?z-c*2:q;n.lineTo(K+Math.round(X),M+y+Z),n.lineWidth=g/15;const x=this._getLinearGradient();n.strokeStyle=x||w,n.stroke(),n.restore()}n.restore(),h>1&&(M+=p)}}_hitFunc(n){const s=this.getWidth(),r=this.getHeight();n.beginPath(),n.rect(0,0,s,r),n.closePath(),n.fillStrokeShape(this)}setText(n){const s=dt._isString(n)?n:n==null?"":n+"";return this._setAttr(o4,s),this}getWidth(){return this.attrs.width===sc||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===sc||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return dt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(n){var s,r,o,h,c,g,p,b,O,R,E;let z=up(),S=this.fontSize(),H;z.save(),z.font=this._getContextFont(),H=z.measureText(n),z.restore();const w=S/100;return{actualBoundingBoxAscent:(s=H.actualBoundingBoxAscent)!==null&&s!==void 0?s:71.58203125*w,actualBoundingBoxDescent:(r=H.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(o=H.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*w,actualBoundingBoxRight:(h=H.actualBoundingBoxRight)!==null&&h!==void 0?h:75.732421875*w,alphabeticBaseline:(c=H.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(g=H.emHeightAscent)!==null&&g!==void 0?g:100*w,emHeightDescent:(p=H.emHeightDescent)!==null&&p!==void 0?p:-20*w,fontBoundingBoxAscent:(b=H.fontBoundingBoxAscent)!==null&&b!==void 0?b:91*w,fontBoundingBoxDescent:(O=H.fontBoundingBoxDescent)!==null&&O!==void 0?O:21*w,hangingBaseline:(R=H.hangingBaseline)!==null&&R!==void 0?R:72.80000305175781*w,ideographicBaseline:(E=H.ideographicBaseline)!==null&&E!==void 0?E:-21*w,width:H.width,height:S}}_getContextFont(){return this.fontStyle()+Kd+this.fontVariant()+Kd+(this.fontSize()+h4)+v4(this.fontFamily())}_addTextLine(n){this.align()===oc&&(n=n.trim());const r=this._getTextWidth(n);return this.textArr.push({text:n,width:r,lastInParagraph:!1})}_getTextWidth(n){const s=this.letterSpacing(),r=n.length;return up().measureText(n).width+s*r}_setTextData(){let n=this.text().split(`
`),s=+this.fontSize(),r=0,o=this.lineHeight()*s,h=this.attrs.width,c=this.attrs.height,g=h!==sc&&h!==void 0,p=c!==sc&&c!==void 0,b=this.padding(),O=h-b*2,R=c-b*2,E=0,z=this.wrap(),S=z!==R1,H=z!==g4&&S,w=this.ellipsis();this.textArr=[],up().font=this._getContextFont();const Y=w?this._getTextWidth(op):0;for(let G=0,D=n.length;G<D;++G){let j=n[G],M=this._getTextWidth(j);if(g&&M>O)for(;j.length>0;){let A=0,T=xs(j).length,y="",U=0;for(;A<T;){const N=A+T>>>1,q=xs(j),I=q.slice(0,N+1).join(""),Z=this._getTextWidth(I);(w&&p&&E+o>R?Z+Y:Z)<=O?(A=N+1,y=I,U=Z):T=N}if(y){if(H){const I=xs(j),Z=xs(y),K=I[Z.length],X=K===Kd||K===A1;let x;if(X&&U<=O)x=Z.length;else{const L=Z.lastIndexOf(Kd),Q=Z.lastIndexOf(A1);x=Math.max(L,Q)+1}x>0&&(A=x,y=I.slice(0,A).join(""),U=this._getTextWidth(y))}if(y=y.trimRight(),this._addTextLine(y),r=Math.max(r,U),E+=o,this._shouldHandleEllipsis(E)){this._tryToAddEllipsisToLastLine();break}if(j=xs(j).slice(A).join("").trimLeft(),j.length>0&&(M=this._getTextWidth(j),M<=O)){this._addTextLine(j),E+=o,r=Math.max(r,M);break}}else break}else this._addTextLine(j),E+=o,r=Math.max(r,M),this._shouldHandleEllipsis(E)&&G<D-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),p&&E+o>R)break}this.textHeight=s,this.textWidth=r}_shouldHandleEllipsis(n){const s=+this.fontSize(),r=this.lineHeight()*s,o=this.attrs.height,h=o!==sc&&o!==void 0,c=this.padding(),g=o-c*2;return!(this.wrap()!==R1)||h&&n+r>g}_tryToAddEllipsisToLastLine(){const n=this.attrs.width,s=n!==sc&&n!==void 0,r=this.padding(),o=n-r*2,h=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!h||(s&&(this._getTextWidth(c.text+op)<o||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+op))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const n=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,s=this.hasShadow();return n&&s?!0:super._useBufferCanvas()}}cn.prototype._fillFunc=y4;cn.prototype._strokeFunc=S4;cn.prototype.className=u4;cn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];yn(cn);rt.overWriteSetter(cn,"width",Vp());rt.overWriteSetter(cn,"height",Vp());rt.addGetterSetter(cn,"direction",Om);rt.addGetterSetter(cn,"fontFamily","Arial");rt.addGetterSetter(cn,"fontSize",12,Yt());rt.addGetterSetter(cn,"fontStyle",Mm);rt.addGetterSetter(cn,"fontVariant",Mm);rt.addGetterSetter(cn,"padding",0,Yt());rt.addGetterSetter(cn,"align",Rm);rt.addGetterSetter(cn,"verticalAlign",c4);rt.addGetterSetter(cn,"lineHeight",1,Yt());rt.addGetterSetter(cn,"wrap",p4);rt.addGetterSetter(cn,"ellipsis",!1,ll());rt.addGetterSetter(cn,"letterSpacing",0,Yt());rt.addGetterSetter(cn,"text","",Uo());rt.addGetterSetter(cn,"textDecoration","");rt.addGetterSetter(cn,"charRenderFunc",void 0);const C4="",Nm="normal";function Dm(d){d.fillText(this.partialText,0,0)}function zm(d){d.strokeText(this.partialText,0,0)}class Zn extends Bt{constructor(n){super(n),this.dummyCanvas=dt.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ln.getPathLength(this.dataArray)}_getPointAtLength(n){if(!this.attrs.data)return null;const s=this.pathLength;return n>s?null:ln.getPointAtLengthOfDataArray(n,this.dataArray)}_readDataAttribute(){this.dataArray=ln.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(n){n.setAttr("font",this._getContextFont()),n.setAttr("textBaseline",this.textBaseline()),n.setAttr("textAlign","left"),n.save();const s=this.textDecoration(),r=this.fill(),o=this.fontSize(),h=this.glyphInfo,c=s.indexOf("underline")!==-1,g=s.indexOf("line-through")!==-1;c&&n.beginPath();for(let p=0;p<h.length;p++){n.save();const b=h[p].p0;n.translate(b.x,b.y),n.rotate(h[p].rotation),this.partialText=h[p].text,n.fillStrokeShape(this),c&&(p===0&&n.moveTo(0,o/2+1),n.lineTo(h[p].width,o/2+1)),n.restore()}if(c&&(n.strokeStyle=r,n.lineWidth=o/20,n.stroke()),g){n.beginPath();for(let p=0;p<h.length;p++){n.save();const b=h[p].p0;n.translate(b.x,b.y),n.rotate(h[p].rotation),p===0&&n.moveTo(0,0),n.lineTo(h[p].width,0),n.restore()}n.strokeStyle=r,n.lineWidth=o/20,n.stroke()}n.restore()}_hitFunc(n){n.beginPath();const s=this.glyphInfo;if(s.length>=1){const r=s[0].p0;n.moveTo(r.x,r.y)}for(let r=0;r<s.length;r++){const o=s[r].p1;n.lineTo(o.x,o.y)}n.setAttr("lineWidth",this.fontSize()),n.setAttr("strokeStyle",this.colorKey),n.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return dt.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(n){return cn.prototype.setText.call(this,n)}_getContextFont(){return cn.prototype._getContextFont.call(this)}_getTextSize(n){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const o=r.measureText(n);return r.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const n=xs(this.text()),s=[];let r=0;for(let R=0;R<n.length;R++)s.push({char:n[R],width:this._getTextSize(n[R]).width}),r+=s[R].width;const{height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=r,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const h=this.letterSpacing(),c=this.align(),g=this.kerningFunc(),p=Math.max(this.textWidth+((this.attrs.text||"").length-1)*h,0);let b=0;c==="center"&&(b=Math.max(0,this.pathLength/2-p/2)),c==="right"&&(b=Math.max(0,this.pathLength-p));let O=b;for(let R=0;R<s.length;R++){const E=this._getPointAtLength(O);if(!E)return;const z=s[R].char;let S=s[R].width+h;if(z===" "&&c==="justify"){const j=this.text().split(" ").length-1;S+=(this.pathLength-p)/j}const H=this._getPointAtLength(O+S);if(!H)return;const w=ln.getLineLength(E.x,E.y,H.x,H.y);let Y=0;if(g)try{Y=g(s[R-1].char,z)*this.fontSize()}catch{Y=0}E.x+=Y,H.x+=Y,this.textWidth+=Y;const G=ln.getPointOnLine(Y+w/2,E.x,E.y,H.x,H.y),D=Math.atan2(H.y-E.y,H.x-E.x);this.glyphInfo.push({transposeX:G.x,transposeY:G.y,text:n[R],rotation:D,p0:E,p1:H,width:w}),O+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const n=[];this.glyphInfo.forEach(function(b){n.push(b.p0.x),n.push(b.p0.y),n.push(b.p1.x),n.push(b.p1.y)});let s=n[0]||0,r=n[0]||0,o=n[1]||0,h=n[1]||0,c,g;for(let b=0;b<n.length/2;b++)c=n[b*2],g=n[b*2+1],s=Math.min(s,c),r=Math.max(r,c),o=Math.min(o,g),h=Math.max(h,g);const p=this.fontSize();return{x:s-p/2,y:o-p/2,width:r-s+p,height:h-o+p}}destroy(){return dt.releaseCanvas(this.dummyCanvas),super.destroy()}}Zn.prototype._fillFunc=Dm;Zn.prototype._strokeFunc=zm;Zn.prototype._fillFuncHit=Dm;Zn.prototype._strokeFuncHit=zm;Zn.prototype.className="TextPath";Zn.prototype._attrsAffectingSize=["text","fontSize","data"];yn(Zn);rt.addGetterSetter(Zn,"data");rt.addGetterSetter(Zn,"fontFamily","Arial");rt.addGetterSetter(Zn,"fontSize",12,Yt());rt.addGetterSetter(Zn,"fontStyle",Nm);rt.addGetterSetter(Zn,"align","left");rt.addGetterSetter(Zn,"letterSpacing",0,Yt());rt.addGetterSetter(Zn,"textBaseline","middle");rt.addGetterSetter(Zn,"fontVariant",Nm);rt.addGetterSetter(Zn,"text",C4);rt.addGetterSetter(Zn,"textDecoration","");rt.addGetterSetter(Zn,"kerningFunc",void 0);const Um="tr-konva",E4=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(d=>d+`.${Um}`).join(" "),M1="nodesRect",T4=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],A4={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},_4="ontouchstart"in Vt._global;function O4(d,n,s){if(d==="rotater")return s;n+=dt.degToRad(A4[d]||0);const r=(dt.radToDeg(n)%360+360)%360;return dt._inRange(r,315+22.5,360)||dt._inRange(r,0,22.5)?"ns-resize":dt._inRange(r,45-22.5,45+22.5)?"nesw-resize":dt._inRange(r,90-22.5,90+22.5)?"ew-resize":dt._inRange(r,135-22.5,135+22.5)?"nwse-resize":dt._inRange(r,180-22.5,180+22.5)?"ns-resize":dt._inRange(r,225-22.5,225+22.5)?"nesw-resize":dt._inRange(r,270-22.5,270+22.5)?"ew-resize":dt._inRange(r,315-22.5,315+22.5)?"nwse-resize":(dt.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const t0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function R4(d){return{x:d.x+d.width/2*Math.cos(d.rotation)+d.height/2*Math.sin(-d.rotation),y:d.y+d.height/2*Math.cos(d.rotation)+d.width/2*Math.sin(d.rotation)}}function Gm(d,n,s){const r=s.x+(d.x-s.x)*Math.cos(n)-(d.y-s.y)*Math.sin(n),o=s.y+(d.x-s.x)*Math.sin(n)+(d.y-s.y)*Math.cos(n);return{...d,rotation:d.rotation+n,x:r,y:o}}function M4(d,n){const s=R4(d);return Gm(d,n,s)}function x4(d,n,s){let r=n;for(let o=0;o<d.length;o++){const h=Vt.getAngle(d[o]),c=Math.abs(h-n)%(Math.PI*2);Math.min(c,Math.PI*2-c)<s&&(r=h)}return r}let Hp=0;class Me extends hc{constructor(n){super(n),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(E4,this.update),this.getNode()&&this.update()}attachTo(n){return this.setNode(n),this}setNode(n){return dt.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([n])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Um+this._id}setNodes(n=[]){this._nodes&&this._nodes.length&&this.detach();const s=n.filter(o=>o.isAncestorOf(this)?(dt.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=n=s,n.length===1&&this.useSingleNodeRotation()?this.rotation(n[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const h=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(o._attrsAffectingSize.length){const c=o._attrsAffectingSize.map(g=>g+"Change."+this._getEventNamespace()).join(" ");o.on(c,h)}o.on(T4.map(c=>c+`.${this._getEventNamespace()}`).join(" "),h),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(n){let s;n.on(`dragstart.${this._getEventNamespace()}`,r=>{s=n.getAbsolutePosition(),!this.isDragging()&&n!==this.findOne(".back")&&this.startDrag(r,!1)}),n.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!s)return;const o=n.getAbsolutePosition(),h=o.x-s.x,c=o.y-s.y;this.nodes().forEach(g=>{if(g===n||g.isDragging())return;const p=g.getAbsolutePosition();g.setAbsolutePosition({x:p.x+h,y:p.y+c}),g.startDrag(r)}),s=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(n=>{n.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(M1),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(M1,this.__getNodeRect)}__getNodeShape(n,s=this.rotation(),r){const o=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=n.getAbsoluteScale(r),c=n.getAbsolutePosition(r),g=o.x*h.x-n.offsetX()*h.x,p=o.y*h.y-n.offsetY()*h.y,b=(Vt.getAngle(n.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),O={x:c.x+g*Math.cos(b)+p*Math.sin(-b),y:c.y+p*Math.cos(b)+g*Math.sin(b),width:o.width*h.x,height:o.height*h.y,rotation:b};return Gm(O,-Vt.getAngle(s),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const s=[];this.nodes().map(b=>{const O=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),R=[{x:O.x,y:O.y},{x:O.x+O.width,y:O.y},{x:O.x+O.width,y:O.y+O.height},{x:O.x,y:O.y+O.height}],E=b.getAbsoluteTransform();R.forEach(function(z){const S=E.point(z);s.push(S)})});const r=new ii;r.rotate(-Vt.getAngle(this.rotation()));let o=1/0,h=1/0,c=-1/0,g=-1/0;s.forEach(function(b){const O=r.point(b);o===void 0&&(o=c=O.x,h=g=O.y),o=Math.min(o,O.x),h=Math.min(h,O.y),c=Math.max(c,O.x),g=Math.max(g,O.y)}),r.invert();const p=r.point({x:o,y:h});return{x:p.x,y:p.y,width:c-o,height:g-h,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),t0.forEach(n=>{this._createAnchor(n)}),this._createAnchor("rotater")}_createAnchor(n){const s=new uh({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:n+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:_4?10:"auto"}),r=this;s.on("mousedown touchstart",function(o){r._handleMouseDown(o)}),s.on("dragstart",o=>{s.stopDrag(),o.cancelBubble=!0}),s.on("dragend",o=>{o.cancelBubble=!0}),s.on("mouseenter",()=>{const o=Vt.getAngle(this.rotation()),h=this.rotateAnchorCursor(),c=O4(n,o,h);s.getStage().content&&(s.getStage().content.style.cursor=c),this._cursorChange=!0}),s.on("mouseout",()=>{s.getStage().content&&(s.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(s)}_createBack(){const n=new Bt({name:"back",width:0,height:0,sceneFunc(s,r){const o=r.getParent(),h=o.padding();s.beginPath(),s.rect(-h,-h,r.width()+h*2,r.height()+h*2),s.moveTo(r.width()/2,-h),o.rotateEnabled()&&o.rotateLineVisible()&&s.lineTo(r.width()/2,-o.rotateAnchorOffset()*dt._sign(r.height())-h),s.fillStrokeShape(r)},hitFunc:(s,r)=>{if(!this.shouldOverdrawWholeArea())return;const o=this.padding();s.beginPath(),s.rect(-o,-o,r.width()+o*2,r.height()+o*2),s.fillStrokeShape(r)}});this.add(n),this._proxyDrag(n),n.on("dragstart",s=>{s.cancelBubble=!0}),n.on("dragmove",s=>{s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),this.on("dragmove",s=>{this.update()})}_handleMouseDown(n){if(this._transforming)return;this._movingAnchorName=n.target.name().split(" ")[0];const s=this._getNodeRect(),r=s.width,o=s.height,h=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));this.sin=Math.abs(o/h),this.cos=Math.abs(r/h),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=n.target.getAbsolutePosition(),g=n.target.getStage().getPointerPosition();this._anchorDragOffset={x:g.x-c.x,y:g.y-c.y},Hp++,this._fire("transformstart",{evt:n.evt,target:this.getNode()}),this._nodes.forEach(p=>{p._fire("transformstart",{evt:n.evt,target:p})})}_handleMouseMove(n){let s,r,o;const h=this.findOne("."+this._movingAnchorName),c=h.getStage();c.setPointersPositions(n);const g=c.getPointerPosition();let p={x:g.x-this._anchorDragOffset.x,y:g.y-this._anchorDragOffset.y};const b=h.getAbsolutePosition();this.anchorDragBoundFunc()&&(p=this.anchorDragBoundFunc()(b,p,n)),h.setAbsolutePosition(p);const O=h.getAbsolutePosition();if(b.x===O.x&&b.y===O.y)return;if(this._movingAnchorName==="rotater"){const G=this._getNodeRect();s=h.x()-G.width/2,r=-h.y()+G.height/2;let D=Math.atan2(-r,s)+Math.PI/2;G.height<0&&(D-=Math.PI);const M=Vt.getAngle(this.rotation())+D,A=Vt.getAngle(this.rotationSnapTolerance()),y=x4(this.rotationSnaps(),M,A)-G.rotation,U=M4(G,y);this._fitNodesInto(U,n);return}const R=this.shiftBehavior();let E;R==="inverted"?E=this.keepRatio()&&!n.shiftKey:R==="none"?E=this.keepRatio():E=this.keepRatio()||n.shiftKey;let z=this.centeredScaling()||n.altKey;if(this._movingAnchorName==="top-left"){if(E){const G=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(G.x-h.x(),2)+Math.pow(G.y-h.y(),2));const D=this.findOne(".top-left").x()>G.x?-1:1,j=this.findOne(".top-left").y()>G.y?-1:1;s=o*this.cos*D,r=o*this.sin*j,this.findOne(".top-left").x(G.x-s),this.findOne(".top-left").y(G.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(h.y());else if(this._movingAnchorName==="top-right"){if(E){const G=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(h.x()-G.x,2)+Math.pow(G.y-h.y(),2));const D=this.findOne(".top-right").x()<G.x?-1:1,j=this.findOne(".top-right").y()>G.y?-1:1;s=o*this.cos*D,r=o*this.sin*j,this.findOne(".top-right").x(G.x+s),this.findOne(".top-right").y(G.y-r)}var S=h.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(h.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(h.x());else if(this._movingAnchorName==="bottom-left"){if(E){const G=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(G.x-h.x(),2)+Math.pow(h.y()-G.y,2));const D=G.x<h.x()?-1:1,j=h.y()<G.y?-1:1;s=o*this.cos*D,r=o*this.sin*j,h.x(G.x-s),h.y(G.y+r)}S=h.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(h.y());else if(this._movingAnchorName==="bottom-right"){if(E){const G=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(h.x()-G.x,2)+Math.pow(h.y()-G.y,2));const D=this.findOne(".bottom-right").x()<G.x?-1:1,j=this.findOne(".bottom-right").y()<G.y?-1:1;s=o*this.cos*D,r=o*this.sin*j,this.findOne(".bottom-right").x(G.x+s),this.findOne(".bottom-right").y(G.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(z=this.centeredScaling()||n.altKey,z){const G=this.findOne(".top-left"),D=this.findOne(".bottom-right"),j=G.x(),M=G.y(),A=this.getWidth()-D.x(),T=this.getHeight()-D.y();D.move({x:-j,y:-M}),G.move({x:A,y:T})}const H=this.findOne(".top-left").getAbsolutePosition();s=H.x,r=H.y;const w=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Y=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:s,y:r,width:w,height:Y,rotation:Vt.getAngle(this.rotation())},n)}_handleMouseUp(n){this._removeEvents(n)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(n){var s;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();Hp--,this._fire("transformend",{evt:n,target:r}),(s=this.getLayer())===null||s===void 0||s.batchDraw(),r&&this._nodes.forEach(o=>{var h;o._fire("transformend",{evt:n,target:o}),(h=o.getLayer())===null||h===void 0||h.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(n,s){const r=this._getNodeRect(),o=1;if(dt._inRange(n.width,-this.padding()*2-o,o)){this.update();return}if(dt._inRange(n.height,-this.padding()*2-o,o)){this.update();return}const h=new ii;if(h.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("left")>=0){const E=h.point({x:-this.padding()*2,y:0});n.x+=E.x,n.y+=E.y,n.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y}else if(this._movingAnchorName&&n.width<0&&this._movingAnchorName.indexOf("right")>=0){const E=h.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.width+=this.padding()*2}if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("top")>=0){const E=h.point({x:0,y:-this.padding()*2});n.x+=E.x,n.y+=E.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}else if(this._movingAnchorName&&n.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const E=h.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,n.height+=this.padding()*2}if(this.boundBoxFunc()){const E=this.boundBoxFunc()(r,n);E?n=E:dt.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,g=new ii;g.translate(r.x,r.y),g.rotate(r.rotation),g.scale(r.width/c,r.height/c);const p=new ii,b=n.width/c,O=n.height/c;this.flipEnabled()===!1?(p.translate(n.x,n.y),p.rotate(n.rotation),p.translate(n.width<0?n.width:0,n.height<0?n.height:0),p.scale(Math.abs(b),Math.abs(O))):(p.translate(n.x,n.y),p.rotate(n.rotation),p.scale(b,O));const R=p.multiply(g.invert());this._nodes.forEach(E=>{var z;if(!E.getStage())return;const S=E.getParent().getAbsoluteTransform(),H=E.getTransform().copy();H.translate(E.offsetX(),E.offsetY());const w=new ii;w.multiply(S.copy().invert()).multiply(R).multiply(S).multiply(H);const Y=w.decompose();E.setAttrs(Y),(z=E.getLayer())===null||z===void 0||z.batchDraw()}),this.rotation(dt._getRotation(n.rotation)),this._nodes.forEach(E=>{this._fire("transform",{evt:s,target:E}),E._fire("transform",{evt:s,target:E})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(n,s){this.findOne(n).setAttrs(s)}update(){var n;const s=this._getNodeRect();this.rotation(dt._getRotation(s.rotation));const r=s.width,o=s.height,h=this.enabledAnchors(),c=this.resizeEnabled(),g=this.padding(),p=this.anchorSize(),b=this.find("._anchor");b.forEach(R=>{R.setAttrs({width:p,height:p,offsetX:p/2,offsetY:p/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:p/2+g,offsetY:p/2+g,visible:c&&h.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:p/2+g,visible:c&&h.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:p/2-g,offsetY:p/2+g,visible:c&&h.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:p/2+g,visible:c&&h.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:o/2,offsetX:p/2-g,visible:c&&h.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:p/2+g,offsetY:p/2-g,visible:c&&h.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:o,offsetY:p/2-g,visible:c&&h.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:o,offsetX:p/2-g,offsetY:p/2-g,visible:c&&h.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*dt._sign(o)-g,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(R=>R.draggable()),x:0,y:0});const O=this.anchorStyleFunc();O&&b.forEach(R=>{O(R)}),(n=this.getLayer())===null||n===void 0||n.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const n=this.findOne("."+this._movingAnchorName);n&&n.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),hc.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return wt.prototype.toObject.call(this)}clone(n){return wt.prototype.clone.call(this,n)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Me.isTransforming=()=>Hp>0;function N4(d){return d instanceof Array||dt.warn("enabledAnchors value should be an array"),d instanceof Array&&d.forEach(function(n){t0.indexOf(n)===-1&&dt.warn("Unknown anchor name: "+n+". Available names are: "+t0.join(", "))}),d||[]}Me.prototype.className="Transformer";yn(Me);rt.addGetterSetter(Me,"enabledAnchors",t0,N4);rt.addGetterSetter(Me,"flipEnabled",!0,ll());rt.addGetterSetter(Me,"resizeEnabled",!0);rt.addGetterSetter(Me,"anchorSize",10,Yt());rt.addGetterSetter(Me,"rotateEnabled",!0);rt.addGetterSetter(Me,"rotateLineVisible",!0);rt.addGetterSetter(Me,"rotationSnaps",[]);rt.addGetterSetter(Me,"rotateAnchorOffset",50,Yt());rt.addGetterSetter(Me,"rotateAnchorCursor","crosshair");rt.addGetterSetter(Me,"rotationSnapTolerance",5,Yt());rt.addGetterSetter(Me,"borderEnabled",!0);rt.addGetterSetter(Me,"anchorStroke","rgb(0, 161, 255)");rt.addGetterSetter(Me,"anchorStrokeWidth",1,Yt());rt.addGetterSetter(Me,"anchorFill","white");rt.addGetterSetter(Me,"anchorCornerRadius",0,Yt());rt.addGetterSetter(Me,"borderStroke","rgb(0, 161, 255)");rt.addGetterSetter(Me,"borderStrokeWidth",1,Yt());rt.addGetterSetter(Me,"borderDash");rt.addGetterSetter(Me,"keepRatio",!0);rt.addGetterSetter(Me,"shiftBehavior","default");rt.addGetterSetter(Me,"centeredScaling",!1);rt.addGetterSetter(Me,"ignoreStroke",!1);rt.addGetterSetter(Me,"padding",0,Yt());rt.addGetterSetter(Me,"nodes");rt.addGetterSetter(Me,"node");rt.addGetterSetter(Me,"boundBoxFunc");rt.addGetterSetter(Me,"anchorDragBoundFunc");rt.addGetterSetter(Me,"anchorStyleFunc");rt.addGetterSetter(Me,"shouldOverdrawWholeArea",!1);rt.addGetterSetter(Me,"useSingleNodeRotation",!0);rt.backCompat(Me,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Yr extends Bt{_sceneFunc(n){n.beginPath(),n.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),n.lineTo(0,0),n.closePath(),n.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(n){this.radius(n/2)}setHeight(n){this.radius(n/2)}}Yr.prototype.className="Wedge";Yr.prototype._centroid=!0;Yr.prototype._attrsAffectingSize=["radius"];yn(Yr);rt.addGetterSetter(Yr,"radius",0,Yt());rt.addGetterSetter(Yr,"angle",0,Yt());rt.addGetterSetter(Yr,"clockwise",!1);rt.backCompat(Yr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function x1(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const D4=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],z4=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function U4(d,n){const s=d.data,r=d.width,o=d.height;let h,c,g,p,b,O,R,E,z,S,H,w,Y,G,D,j,M,A,T,y;const U=n+n+1,N=r-1,q=o-1,I=n+1,Z=I*(I+1)/2,K=new x1,X=D4[n],x=z4[n];let L=null,Q=K,k=null,nt=null;for(let F=1;F<U;F++)Q=Q.next=new x1,F===I&&(L=Q);Q.next=K,g=c=0;for(let F=0;F<o;F++){w=Y=G=D=p=b=O=R=0,E=I*(j=s[c]),z=I*(M=s[c+1]),S=I*(A=s[c+2]),H=I*(T=s[c+3]),p+=Z*j,b+=Z*M,O+=Z*A,R+=Z*T,Q=K;for(let it=0;it<I;it++)Q.r=j,Q.g=M,Q.b=A,Q.a=T,Q=Q.next;for(let it=1;it<I;it++)h=c+((N<it?N:it)<<2),p+=(Q.r=j=s[h])*(y=I-it),b+=(Q.g=M=s[h+1])*y,O+=(Q.b=A=s[h+2])*y,R+=(Q.a=T=s[h+3])*y,w+=j,Y+=M,G+=A,D+=T,Q=Q.next;k=K,nt=L;for(let it=0;it<r;it++)s[c+3]=T=R*X>>x,T!==0?(T=255/T,s[c]=(p*X>>x)*T,s[c+1]=(b*X>>x)*T,s[c+2]=(O*X>>x)*T):s[c]=s[c+1]=s[c+2]=0,p-=E,b-=z,O-=S,R-=H,E-=k.r,z-=k.g,S-=k.b,H-=k.a,h=g+((h=it+n+1)<N?h:N)<<2,w+=k.r=s[h],Y+=k.g=s[h+1],G+=k.b=s[h+2],D+=k.a=s[h+3],p+=w,b+=Y,O+=G,R+=D,k=k.next,E+=j=nt.r,z+=M=nt.g,S+=A=nt.b,H+=T=nt.a,w-=j,Y-=M,G-=A,D-=T,nt=nt.next,c+=4;g+=r}for(let F=0;F<r;F++){Y=G=D=w=b=O=R=p=0,c=F<<2,E=I*(j=s[c]),z=I*(M=s[c+1]),S=I*(A=s[c+2]),H=I*(T=s[c+3]),p+=Z*j,b+=Z*M,O+=Z*A,R+=Z*T,Q=K;for(let at=0;at<I;at++)Q.r=j,Q.g=M,Q.b=A,Q.a=T,Q=Q.next;let it=r;for(let at=1;at<=n;at++)c=it+F<<2,p+=(Q.r=j=s[c])*(y=I-at),b+=(Q.g=M=s[c+1])*y,O+=(Q.b=A=s[c+2])*y,R+=(Q.a=T=s[c+3])*y,w+=j,Y+=M,G+=A,D+=T,Q=Q.next,at<q&&(it+=r);c=F,k=K,nt=L;for(let at=0;at<o;at++)h=c<<2,s[h+3]=T=R*X>>x,T>0?(T=255/T,s[h]=(p*X>>x)*T,s[h+1]=(b*X>>x)*T,s[h+2]=(O*X>>x)*T):s[h]=s[h+1]=s[h+2]=0,p-=E,b-=z,O-=S,R-=H,E-=k.r,z-=k.g,S-=k.b,H-=k.a,h=F+((h=at+I)<q?h:q)*r<<2,p+=w+=k.r=s[h],b+=Y+=k.g=s[h+1],O+=G+=k.b=s[h+2],R+=D+=k.a=s[h+3],k=k.next,E+=j=nt.r,z+=M=nt.g,S+=A=nt.b,H+=T=nt.a,w-=j,Y-=M,G-=A,D-=T,nt=nt.next,c+=r}}const G4=function(n){const s=Math.round(this.blurRadius());s>0&&U4(n,s)};rt.addGetterSetter(wt,"blurRadius",0,Yt(),rt.afterSetFilter);const B4=function(d){const n=this.brightness()*255,s=d.data,r=s.length;for(let o=0;o<r;o+=4)s[o]+=n,s[o+1]+=n,s[o+2]+=n};rt.addGetterSetter(wt,"brightness",0,Yt(),rt.afterSetFilter);const H4=function(d){const n=this.brightness(),s=d.data,r=s.length;for(let o=0;o<r;o+=4)s[o]=Math.min(255,s[o]*n),s[o+1]=Math.min(255,s[o+1]*n),s[o+2]=Math.min(255,s[o+2]*n)},j4=function(d){const n=Math.pow((this.contrast()+100)/100,2),s=d.data,r=s.length;let o=150,h=150,c=150;for(let g=0;g<r;g+=4)o=s[g],h=s[g+1],c=s[g+2],o/=255,o-=.5,o*=n,o+=.5,o*=255,h/=255,h-=.5,h*=n,h+=.5,h*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,o=o<0?0:o>255?255:o,h=h<0?0:h>255?255:h,c=c<0?0:c>255?255:c,s[g]=o,s[g+1]=h,s[g+2]=c};rt.addGetterSetter(wt,"contrast",0,Yt(),rt.afterSetFilter);const L4=function(d){var n,s,r,o,h,c,g,p,b;const O=d.data,R=d.width,E=d.height,z=Math.min(1,Math.max(0,(s=(n=this.embossStrength)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:.5)),S=Math.min(1,Math.max(0,(o=(r=this.embossWhiteLevel)===null||r===void 0?void 0:r.call(this))!==null&&o!==void 0?o:.5)),w=(g={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(h=this.embossDirection)===null||h===void 0?void 0:h.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&g!==void 0?g:315,Y=!!((b=(p=this.embossBlend)===null||p===void 0?void 0:p.call(this))!==null&&b!==void 0&&b),G=z*10,D=S*255,j=w*Math.PI/180,M=Math.cos(j),A=Math.sin(j),T=128/1020*G,y=new Uint8ClampedArray(O),U=new Float32Array(R*E);for(let K=0,X=0;X<O.length;X+=4,K++)U[K]=.2126*y[X]+.7152*y[X+1]+.0722*y[X+2];const N=[-1,0,1,-2,0,2,-1,0,1],q=[-1,-2,-1,0,0,0,1,2,1],I=[-R-1,-R,-R+1,-1,0,1,R-1,R,R+1],Z=K=>K<0?0:K>255?255:K;for(let K=1;K<E-1;K++)for(let X=1;X<R-1;X++){const x=K*R+X;let L=0,Q=0;L+=U[x+I[0]]*N[0],Q+=U[x+I[0]]*q[0],L+=U[x+I[1]]*N[1],Q+=U[x+I[1]]*q[1],L+=U[x+I[2]]*N[2],Q+=U[x+I[2]]*q[2],L+=U[x+I[3]]*N[3],Q+=U[x+I[3]]*q[3],L+=U[x+I[5]]*N[5],Q+=U[x+I[5]]*q[5],L+=U[x+I[6]]*N[6],Q+=U[x+I[6]]*q[6],L+=U[x+I[7]]*N[7],Q+=U[x+I[7]]*q[7],L+=U[x+I[8]]*N[8],Q+=U[x+I[8]]*q[8];const k=M*L+A*Q,nt=Z(D+k*T),F=x*4;if(Y){const it=nt-D;O[F]=Z(y[F]+it),O[F+1]=Z(y[F+1]+it),O[F+2]=Z(y[F+2]+it),O[F+3]=y[F+3]}else O[F]=O[F+1]=O[F+2]=nt,O[F+3]=y[F+3]}for(let K=0;K<R;K++){let X=K*4,x=((E-1)*R+K)*4;O[X]=y[X],O[X+1]=y[X+1],O[X+2]=y[X+2],O[X+3]=y[X+3],O[x]=y[x],O[x+1]=y[x+1],O[x+2]=y[x+2],O[x+3]=y[x+3]}for(let K=1;K<E-1;K++){let X=K*R*4,x=(K*R+(R-1))*4;O[X]=y[X],O[X+1]=y[X+1],O[X+2]=y[X+2],O[X+3]=y[X+3],O[x]=y[x],O[x+1]=y[x+1],O[x+2]=y[x+2],O[x+3]=y[x+3]}return d};rt.addGetterSetter(wt,"embossStrength",.5,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"embossWhiteLevel",.5,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"embossDirection","top-left",void 0,rt.afterSetFilter);rt.addGetterSetter(wt,"embossBlend",!1,void 0,rt.afterSetFilter);function cp(d,n,s,r,o){const h=s-n,c=o-r;if(h===0)return r+c/2;if(c===0)return r;let g=(d-n)/h;return g=c*g+r,g}const w4=function(d){const n=d.data,s=n.length;let r=n[0],o=r,h,c=n[1],g=c,p,b=n[2],O=b,R;const E=this.enhance();if(E===0)return;for(let D=0;D<s;D+=4)h=n[D+0],h<r?r=h:h>o&&(o=h),p=n[D+1],p<c?c=p:p>g&&(g=p),R=n[D+2],R<b?b=R:R>O&&(O=R);o===r&&(o=255,r=0),g===c&&(g=255,c=0),O===b&&(O=255,b=0);let z,S,H,w,Y,G;if(E>0)z=o+E*(255-o),S=r-E*(r-0),H=g+E*(255-g),w=c-E*(c-0),Y=O+E*(255-O),G=b-E*(b-0);else{const D=(o+r)*.5;z=o+E*(o-D),S=r+E*(r-D);const j=(g+c)*.5;H=g+E*(g-j),w=c+E*(c-j);const M=(O+b)*.5;Y=O+E*(O-M),G=b+E*(b-M)}for(let D=0;D<s;D+=4)n[D+0]=cp(n[D+0],r,o,S,z),n[D+1]=cp(n[D+1],c,g,w,H),n[D+2]=cp(n[D+2],b,O,G,Y)};rt.addGetterSetter(wt,"enhance",0,Yt(),rt.afterSetFilter);const Y4=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4){const o=.34*n[r]+.5*n[r+1]+.16*n[r+2];n[r]=o,n[r+1]=o,n[r+2]=o}};rt.addGetterSetter(wt,"hue",0,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"saturation",0,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"luminance",0,Yt(),rt.afterSetFilter);const q4=function(d){const n=d.data,s=n.length,r=1,o=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,c=this.luminance()*127,g=r*o*Math.cos(h*Math.PI/180),p=r*o*Math.sin(h*Math.PI/180),b=.299*r+.701*g+.167*p,O=.587*r-.587*g+.33*p,R=.114*r-.114*g-.497*p,E=.299*r-.299*g-.328*p,z=.587*r+.413*g+.035*p,S=.114*r-.114*g+.293*p,H=.299*r-.3*g+1.25*p,w=.587*r-.586*g-1.05*p,Y=.114*r+.886*g-.2*p;let G,D,j,M;for(let A=0;A<s;A+=4)G=n[A+0],D=n[A+1],j=n[A+2],M=n[A+3],n[A+0]=b*G+O*D+R*j+c,n[A+1]=E*G+z*D+S*j+c,n[A+2]=H*G+w*D+Y*j+c,n[A+3]=M},V4=function(d){const n=d.data,s=n.length,r=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,c=r*o*Math.cos(h*Math.PI/180),g=r*o*Math.sin(h*Math.PI/180),p=.299*r+.701*c+.167*g,b=.587*r-.587*c+.33*g,O=.114*r-.114*c-.497*g,R=.299*r-.299*c-.328*g,E=.587*r+.413*c+.035*g,z=.114*r-.114*c+.293*g,S=.299*r-.3*c+1.25*g,H=.587*r-.586*c-1.05*g,w=.114*r+.886*c-.2*g;for(let Y=0;Y<s;Y+=4){const G=n[Y+0],D=n[Y+1],j=n[Y+2],M=n[Y+3];n[Y+0]=p*G+b*D+O*j,n[Y+1]=R*G+E*D+z*j,n[Y+2]=S*G+H*D+w*j,n[Y+3]=M}};rt.addGetterSetter(wt,"hue",0,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"saturation",0,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"value",0,Yt(),rt.afterSetFilter);const P4=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]},X4=function(d,n,s){const r=d.data,o=n.data,h=d.width,c=d.height,g=s.polarCenterX||h/2,p=s.polarCenterY||c/2;let b=Math.sqrt(g*g+p*p),O=h-g,R=c-p;const E=Math.sqrt(O*O+R*R);b=E>b?E:b;const z=c,S=h,H=360/S*Math.PI/180;for(let w=0;w<S;w+=1){const Y=Math.sin(w*H),G=Math.cos(w*H);for(let D=0;D<z;D+=1){O=Math.floor(g+b*D/z*G),R=Math.floor(p+b*D/z*Y);let j=(R*h+O)*4;const M=r[j+0],A=r[j+1],T=r[j+2],y=r[j+3];j=(w+D*h)*4,o[j+0]=M,o[j+1]=A,o[j+2]=T,o[j+3]=y}}},Q4=function(d,n,s){const r=d.data,o=n.data,h=d.width,c=d.height,g=s.polarCenterX||h/2,p=s.polarCenterY||c/2;let b=Math.sqrt(g*g+p*p),O=h-g,R=c-p;const E=Math.sqrt(O*O+R*R);b=E>b?E:b;const z=c,S=h,H=0;let w,Y;for(O=0;O<h;O+=1)for(R=0;R<c;R+=1){const G=O-g,D=R-p,j=Math.sqrt(G*G+D*D)*z/b;let M=(Math.atan2(D,G)*180/Math.PI+360+H)%360;M=M*S/360,w=Math.floor(M),Y=Math.floor(j);let A=(Y*h+w)*4;const T=r[A+0],y=r[A+1],U=r[A+2],N=r[A+3];A=(R*h+O)*4,o[A+0]=T,o[A+1]=y,o[A+2]=U,o[A+3]=N}},K4=function(d){const n=d.width,s=d.height;let r,o,h,c,g,p,b,O,R,E,z=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),H=Math.floor(n*(S%360)/360);if(z<1)return;const w=dt.createCanvasElement();w.width=n,w.height=s;const Y=w.getContext("2d").getImageData(0,0,n,s);dt.releaseCanvas(w),X4(d,Y,{polarCenterX:n/2,polarCenterY:s/2});let G=n/Math.pow(2,z);for(;G<=8;)G=G*2,z-=1;G=Math.ceil(G);let D=G,j=0,M=D,A=1;for(H+G>n&&(j=D,M=0,A=-1),o=0;o<s;o+=1)for(r=j;r!==M;r+=A)h=Math.round(r+H)%n,R=(n*o+h)*4,g=Y.data[R+0],p=Y.data[R+1],b=Y.data[R+2],O=Y.data[R+3],E=(n*o+r)*4,Y.data[E+0]=g,Y.data[E+1]=p,Y.data[E+2]=b,Y.data[E+3]=O;for(o=0;o<s;o+=1)for(D=Math.floor(G),c=0;c<z;c+=1){for(r=0;r<D+1;r+=1)R=(n*o+r)*4,g=Y.data[R+0],p=Y.data[R+1],b=Y.data[R+2],O=Y.data[R+3],E=(n*o+D*2-r-1)*4,Y.data[E+0]=g,Y.data[E+1]=p,Y.data[E+2]=b,Y.data[E+3]=O;D*=2}Q4(Y,d,{})};rt.addGetterSetter(wt,"kaleidoscopePower",2,Yt(),rt.afterSetFilter);rt.addGetterSetter(wt,"kaleidoscopeAngle",0,Yt(),rt.afterSetFilter);function Zd(d,n,s){let r=(s*d.width+n)*4;const o=[];return o.push(d.data[r++],d.data[r++],d.data[r++],d.data[r++]),o}function Ff(d,n){return Math.sqrt(Math.pow(d[0]-n[0],2)+Math.pow(d[1]-n[1],2)+Math.pow(d[2]-n[2],2))}function I4(d){const n=[0,0,0];for(let s=0;s<d.length;s++)n[0]+=d[s][0],n[1]+=d[s][1],n[2]+=d[s][2];return n[0]/=d.length,n[1]/=d.length,n[2]/=d.length,n}function Z4(d,n){const s=Zd(d,0,0),r=Zd(d,d.width-1,0),o=Zd(d,0,d.height-1),h=Zd(d,d.width-1,d.height-1),c=n||10;if(Ff(s,r)<c&&Ff(r,h)<c&&Ff(h,o)<c&&Ff(o,s)<c){const g=I4([r,s,h,o]),p=[];for(let b=0;b<d.width*d.height;b++){const O=Ff(g,[d.data[b*4],d.data[b*4+1],d.data[b*4+2]]);p[b]=O<c?0:255}return p}}function J4(d,n){for(let s=0;s<d.width*d.height;s++)d.data[4*s+3]=n[s]}function F4(d,n,s){const r=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let O=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const z=g+R-h,S=p+E-h;if(z>=0&&z<s&&S>=0&&S<n){const H=z*n+S,w=r[R*o+E];O+=d[H]*w}}c[b]=O===2040?255:0}return c}function k4(d,n,s){const r=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let O=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const z=g+R-h,S=p+E-h;if(z>=0&&z<s&&S>=0&&S<n){const H=z*n+S,w=r[R*o+E];O+=d[H]*w}}c[b]=O>=1020?255:0}return c}function W4(d,n,s){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(r.length)),h=Math.floor(o/2),c=[];for(let g=0;g<s;g++)for(let p=0;p<n;p++){const b=g*n+p;let O=0;for(let R=0;R<o;R++)for(let E=0;E<o;E++){const z=g+R-h,S=p+E-h;if(z>=0&&z<s&&S>=0&&S<n){const H=z*n+S,w=r[R*o+E];O+=d[H]*w}}c[b]=O}return c}const $4=function(d){const n=this.threshold();let s=Z4(d,n);return s&&(s=F4(s,d.width,d.height),s=k4(s,d.width,d.height),s=W4(s,d.width,d.height),J4(d,s)),d};rt.addGetterSetter(wt,"threshold",0,Yt(),rt.afterSetFilter);const t3=function(d){const n=this.noise()*255,s=d.data,r=s.length,o=n/2;for(let h=0;h<r;h+=4)s[h+0]+=o-2*o*Math.random(),s[h+1]+=o-2*o*Math.random(),s[h+2]+=o-2*o*Math.random()};rt.addGetterSetter(wt,"noise",.2,Yt(),rt.afterSetFilter);const e3=function(d){let n=Math.ceil(this.pixelSize()),s=d.width,r=d.height,o=Math.ceil(s/n),h=Math.ceil(r/n),c=d.data;if(n<=0){dt.error("pixelSize value can not be <= 0");return}for(let g=0;g<o;g+=1)for(let p=0;p<h;p+=1){let b=0,O=0,R=0,E=0;const z=g*n,S=z+n,H=p*n,w=H+n;let Y=0;for(let G=z;G<S;G+=1)if(!(G>=s))for(let D=H;D<w;D+=1){if(D>=r)continue;const j=(s*D+G)*4;b+=c[j+0],O+=c[j+1],R+=c[j+2],E+=c[j+3],Y+=1}b=b/Y,O=O/Y,R=R/Y,E=E/Y;for(let G=z;G<S;G+=1)if(!(G>=s))for(let D=H;D<w;D+=1){if(D>=r)continue;const j=(s*D+G)*4;c[j+0]=b,c[j+1]=O,c[j+2]=R,c[j+3]=E}}};rt.addGetterSetter(wt,"pixelSize",8,Yt(),rt.afterSetFilter);const n3=function(d){const n=Math.round(this.levels()*254)+1,s=d.data,r=s.length,o=255/n;for(let h=0;h<r;h+=1)s[h]=Math.floor(s[h]/o)*o};rt.addGetterSetter(wt,"levels",.5,Yt(),rt.afterSetFilter);const a3=function(d){const n=d.data,s=n.length,r=this.red(),o=this.green(),h=this.blue();for(let c=0;c<s;c+=4){const g=(.34*n[c]+.5*n[c+1]+.16*n[c+2])/255;n[c]=g*r,n[c+1]=g*o,n[c+2]=g*h,n[c+3]=n[c+3]}};rt.addGetterSetter(wt,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});rt.addGetterSetter(wt,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});rt.addGetterSetter(wt,"blue",0,am,rt.afterSetFilter);const i3=function(d){const n=d.data,s=n.length,r=this.red(),o=this.green(),h=this.blue(),c=this.alpha();for(let g=0;g<s;g+=4){const p=1-c;n[g]=r*c+n[g]*p,n[g+1]=o*c+n[g+1]*p,n[g+2]=h*c+n[g+2]*p}};rt.addGetterSetter(wt,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});rt.addGetterSetter(wt,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)});rt.addGetterSetter(wt,"blue",0,am,rt.afterSetFilter);rt.addGetterSetter(wt,"alpha",1,function(d){return this._filterUpToDate=!1,d>1?1:d<0?0:d});const l3=function(d){const n=d.data,s=n.length;for(let r=0;r<s;r+=4){const o=n[r+0],h=n[r+1],c=n[r+2];n[r+0]=Math.min(255,o*.393+h*.769+c*.189),n[r+1]=Math.min(255,o*.349+h*.686+c*.168),n[r+2]=Math.min(255,o*.272+h*.534+c*.131)}},r3=function(d){const s=d.data;for(let r=0;r<s.length;r+=4){const o=s[r],h=s[r+1],c=s[r+2];.2126*o+.7152*h+.0722*c>=128&&(s[r]=255-o,s[r+1]=255-h,s[r+2]=255-c)}return d},s3=function(d){const n=this.threshold()*255,s=d.data,r=s.length;for(let o=0;o<r;o+=1)s[o]=s[o]<n?0:255};rt.addGetterSetter(wt,"threshold",.5,Yt(),rt.afterSetFilter);dc.Util._assign(dc,{Arc:Lr,Arrow:Bo,Circle:vc,Ellipse:Us,Image:rl,Label:Qp,Tag:Ho,Line:wr,Path:ln,Rect:uh,RegularPolygon:Gs,Ring:jo,Sprite:Ll,Star:Bs,Text:cn,TextPath:Zn,Transformer:Me,Wedge:Yr,Filters:{Blur:G4,Brightness:H4,Brighten:B4,Contrast:j4,Emboss:L4,Enhance:w4,Grayscale:Y4,HSL:q4,HSV:V4,Invert:P4,Kaleidoscope:K4,Mask:$4,Noise:t3,Pixelate:e3,Posterize:n3,RGB:a3,RGBA:i3,Sepia:l3,Solarize:r3,Threshold:s3}});var fp={exports:{}},hp={exports:{}},dp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function o3(){return N1||(N1=1,(function(d){function n(x,L){var Q=x.length;x.push(L);t:for(;0<Q;){var k=Q-1>>>1,nt=x[k];if(0<o(nt,L))x[k]=L,x[Q]=nt,Q=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var L=x[0],Q=x.pop();if(Q!==L){x[0]=Q;t:for(var k=0,nt=x.length,F=nt>>>1;k<F;){var it=2*(k+1)-1,at=x[it],P=it+1,J=x[P];if(0>o(at,Q))P<nt&&0>o(J,at)?(x[k]=J,x[P]=Q,k=P):(x[k]=at,x[it]=Q,k=it);else if(P<nt&&0>o(J,Q))x[k]=J,x[P]=Q,k=P;else break t}}return L}function o(x,L){var Q=x.sortIndex-L.sortIndex;return Q!==0?Q:x.id-L.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],O=1,R=null,E=3,z=!1,S=!1,H=!1,w=!1,Y=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function j(x){for(var L=s(b);L!==null;){if(L.callback===null)r(b);else if(L.startTime<=x)r(b),L.sortIndex=L.expirationTime,n(p,L);else break;L=s(b)}}function M(x){if(H=!1,j(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var L=s(b);L!==null&&X(M,L.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return w?!0:!(d.unstable_now()-U<y)}function q(){if(w=!1,A){var x=d.unstable_now();U=x;var L=!0;try{t:{S=!1,H&&(H=!1,G(T),T=-1),z=!0;var Q=E;try{e:{for(j(x),R=s(p);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var nt=k(R.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){R.callback=nt,j(x),L=!0;break e}R===s(p)&&r(p),j(x)}else r(p);R=s(p)}if(R!==null)L=!0;else{var F=s(b);F!==null&&X(M,F.startTime-x),L=!1}}break t}finally{R=null,E=Q,z=!1}L=void 0}}finally{L?I():A=!1}}}var I;if(typeof D=="function")I=function(){D(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){Y(q,0)};function X(x,L){T=Y(function(){x(d.unstable_now())},L)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var L=3;break;default:L=E}var Q=E;E=L;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,L){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return L()}finally{E=Q}},d.unstable_scheduleCallback=function(x,L,Q){var k=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?k+Q:k):Q=k,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:O++,callback:L,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>k?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(H?(G(T),T=-1):H=!0,X(M,Q-k))):(x.sortIndex=nt,n(p,x),S||z||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var L=E;return function(){var Q=E;E=L;try{return x.apply(this,arguments)}finally{E=Q}}}})(pp)),pp}var D1;function u3(){return D1||(D1=1,dp.exports=o3()),dp.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1;function c3(){return z1||(z1=1,(function(d){d.exports=function(n){function s(a,i,f,m){return new bu(a,i,f,m)}function r(){}function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)i+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(a){var i=a,f=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(f=i.return),a=i.return;while(a)}return i.tag===3?f:null}function c(a){if(h(a)!==a)throw Error(o(188))}function g(a){var i=a.alternate;if(!i){if(i=h(a),i===null)throw Error(o(188));return i!==a?null:a}for(var f=a,m=i;;){var _=f.return;if(_===null)break;var B=_.alternate;if(B===null){if(m=_.return,m!==null){f=m;continue}break}if(_.child===B.child){for(B=_.child;B;){if(B===f)return c(_),a;if(B===m)return c(_),i;B=B.sibling}throw Error(o(188))}if(f.return!==m.return)f=_,m=B;else{for(var tt=!1,ot=_.child;ot;){if(ot===f){tt=!0,f=_,m=B;break}if(ot===m){tt=!0,m=_,f=B;break}ot=ot.sibling}if(!tt){for(ot=B.child;ot;){if(ot===f){tt=!0,f=B,m=_;break}if(ot===m){tt=!0,m=B,f=_;break}ot=ot.sibling}if(!tt)throw Error(o(189))}}if(f.alternate!==m)throw Error(o(190))}if(f.tag!==3)throw Error(o(188));return f.stateNode.current===f?a:i}function p(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=p(a),i!==null)return i;a=a.sibling}return null}function b(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(a.tag!==4&&(i=b(a),i!==null))return i;a=a.sibling}return null}function O(a){return a===null||typeof a!="object"?null:(a=po&&a[po]||a["@@iterator"],typeof a=="function"?a:null)}function R(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===go?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ir:return"Fragment";case co:return"Profiler";case lr:return"StrictMode";case Ki:return"Suspense";case Ii:return"SuspenseList";case Tl:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case Xi:return"Portal";case Qi:return(a.displayName||"Context")+".Provider";case fo:return(a._context.displayName||"Context")+".Consumer";case _u:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ou:return i=a.displayName||null,i!==null?i:R(a.type)||"Memo";case Zi:i=a._payload,a=a._init;try{return R(a(i))}catch{}}return null}function E(a){return{current:a}}function z(a){0>hr||(a.current=Eo[hr],Eo[hr]=null,hr--)}function S(a,i){hr++,Eo[hr]=a.current,a.current=i}function H(a){return a>>>=0,a===0?32:31-(dd(a)/pd|0)|0}function w(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Y(a,i,f){var m=a.pendingLanes;if(m===0)return 0;var _=0,B=a.suspendedLanes,tt=a.pingedLanes;a=a.warmLanes;var ot=m&134217727;return ot!==0?(m=ot&~B,m!==0?_=w(m):(tt&=ot,tt!==0?_=w(tt):f||(f=ot&~a,f!==0&&(_=w(f))))):(ot=m&~B,ot!==0?_=w(ot):tt!==0?_=w(tt):f||(f=m&~a,f!==0&&(_=w(f)))),_===0?0:i!==0&&i!==_&&(i&B)===0&&(B=_&-_,f=i&-i,B>=f||B===32&&(f&4194048)!==0)?i:_}function G(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function D(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j(){var a=Ei;return Ei<<=1,(Ei&4194048)===0&&(Ei=256),a}function M(){var a=To;return To<<=1,(To&62914560)===0&&(To=4194304),a}function A(a){for(var i=[],f=0;31>f;f++)i.push(a);return i}function T(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function y(a,i,f,m,_,B){var tt=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var ot=a.entanglements,St=a.expirationTimes,zt=a.hiddenUpdates;for(f=tt&~f;0<f;){var Ht=31-la(f),Pt=1<<Ht;ot[Ht]=0,St[Ht]=-1;var Qt=zt[Ht];if(Qt!==null)for(zt[Ht]=null,Ht=0;Ht<Qt.length;Ht++){var he=Qt[Ht];he!==null&&(he.lane&=-536870913)}f&=~Pt}m!==0&&U(a,m,0),B!==0&&_===0&&a.tag!==0&&(a.suspendedLanes|=B&~(tt&~i))}function U(a,i,f){a.pendingLanes|=i,a.suspendedLanes&=~i;var m=31-la(i);a.entangledLanes|=i,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function N(a,i){var f=a.entangledLanes|=i;for(a=a.entanglements;f;){var m=31-la(f),_=1<<m;_&i|a[m]&i&&(a[m]|=i),f&=~_}}function q(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function I(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Z(a){if(typeof Tn=="function"&&Pn(a),va&&typeof va.setStrictMode=="function")try{va.setStrictMode(ds,a)}catch{}}function K(a){if(Pu===void 0)try{throw Error()}catch(f){var i=f.stack.trim().match(/\n( *(at )?)/);Pu=i&&i[1]||"",Mf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pu+a+Mf}function X(a,i){if(!a||dr)return"";dr=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(he){var Qt=he}Reflect.construct(a,[],Pt)}else{try{Pt.call()}catch(he){Qt=he}a.call(Pt.prototype)}}else{try{throw Error()}catch(he){Qt=he}(Pt=a())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(he){if(he&&Qt&&typeof he.stack=="string")return[he.stack,Qt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=m.DetermineComponentFrameRoot(),tt=B[0],ot=B[1];if(tt&&ot){var St=tt.split(`
`),zt=ot.split(`
`);for(_=m=0;m<St.length&&!St[m].includes("DetermineComponentFrameRoot");)m++;for(;_<zt.length&&!zt[_].includes("DetermineComponentFrameRoot");)_++;if(m===St.length||_===zt.length)for(m=St.length-1,_=zt.length-1;1<=m&&0<=_&&St[m]!==zt[_];)_--;for(;1<=m&&0<=_;m--,_--)if(St[m]!==zt[_]){if(m!==1||_!==1)do if(m--,_--,0>_||St[m]!==zt[_]){var Ht=`
`+St[m].replace(" at new "," at ");return a.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",a.displayName)),Ht}while(1<=m&&0<=_);break}}}finally{dr=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?K(f):""}function x(a){switch(a.tag){case 26:case 27:case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return X(a.type,!1);case 11:return X(a.type.render,!1);case 1:return X(a.type,!0);case 31:return K("Activity");default:return""}}function L(a){try{var i="";do i+=x(a),a=a.return;while(a);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Q(a,i){if(typeof a=="object"&&a!==null){var f=xf.get(a);return f!==void 0?f:(i={value:a,source:i,stack:L(i)},xf.set(a,i),i)}return{value:a,source:i,stack:L(i)}}function k(a,i){ki[pr++]=gr,ki[pr++]=Xu,Xu=a,gr=i}function nt(a,i,f){ya[Ua++]=Ti,ya[Ua++]=ti,ya[Ua++]=Nl,Nl=a;var m=Ti;a=ti;var _=32-la(m)-1;m&=~(1<<_),f+=1;var B=32-la(i)+_;if(30<B){var tt=_-_%5;B=(m&(1<<tt)-1).toString(32),m>>=tt,_-=tt,Ti=1<<32-la(i)+_|f<<_|m,ti=B+a}else Ti=1<<B|f<<_|m,ti=a}function F(a){a.return!==null&&(k(a,1),nt(a,1,0))}function it(a){for(;a===Xu;)Xu=ki[--pr],ki[pr]=null,gr=ki[--pr],ki[pr]=null;for(;a===Nl;)Nl=ya[--Ua],ya[Ua]=null,ti=ya[--Ua],ya[Ua]=null,Ti=ya[--Ua],ya[Ua]=null}function at(a,i){S(Wi,i),S(mr,a),S(Mn,null),a=af(i),z(Mn),S(Mn,a)}function P(){z(Mn),z(mr),z(Wi)}function J(a){a.memoizedState!==null&&S(ps,a);var i=Mn.current,f=Al(i,a.type);i!==f&&(S(mr,a),S(Mn,f))}function $(a){mr.current===a&&(z(Mn),z(mr)),ps.current===a&&(z(ps),mi?Pa._currentValue=Fi:Pa._currentValue2=Fi)}function et(a){var i=Error(o(418,""));throw ce(Q(i,a)),ni}function gt(a,i){if(!en)throw Error(o(175));ed(a.stateNode,a.type,a.memoizedProps,i,a)||et(a)}function Ot(a){for(Un=a.return;Un;)switch(Un.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Un=Un.return}}function Lt(a){if(!en||a!==Un)return!1;if(!xe)return Ot(a),xe=!0,!1;var i=a.tag;if(gn?i!==3&&i!==27&&(i!==5||ju(a.type)&&!Ol(a.type,a.memoizedProps))&&mn&&et(a):i!==3&&(i!==5||ju(a.type)&&!Ol(a.type,a.memoizedProps))&&mn&&et(a),Ot(a),i===13){if(!en)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));mn=nd(a)}else mn=gn&&i===27?kh(a.type,mn):Un?yf(a.stateNode):null;return!0}function Xt(){en&&(mn=Un=null,xe=!1)}function Ft(){var a=$i;return a!==null&&(Wn===null?Wn=a:Wn.push.apply(Wn,a),$i=null),a}function ce(a){$i===null?$i=[a]:$i.push(a)}function At(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}function Gt(a,i,f){mi?(S(Qu,i._currentValue),i._currentValue=f):(S(Qu,i._currentValue2),i._currentValue2=f)}function kt(a){var i=Qu.current;mi?a._currentValue=i:a._currentValue2=i,z(Qu)}function Ut(a,i,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),a===f)break;a=a.return}}function pt(a,i,f,m){var _=a.child;for(_!==null&&(_.return=a);_!==null;){var B=_.dependencies;if(B!==null){var tt=_.child;B=B.firstContext;t:for(;B!==null;){var ot=B;B=_;for(var St=0;St<i.length;St++)if(ot.context===i[St]){B.lanes|=f,ot=B.alternate,ot!==null&&(ot.lanes|=f),Ut(B.return,f,a),m||(tt=null);break t}B=ot.next}}else if(_.tag===18){if(tt=_.return,tt===null)throw Error(o(341));tt.lanes|=f,B=tt.alternate,B!==null&&(B.lanes|=f),Ut(tt,f,a),tt=null}else tt=_.child;if(tt!==null)tt.return=_;else for(tt=_;tt!==null;){if(tt===a){tt=null;break}if(_=tt.sibling,_!==null){_.return=tt.return,tt=_;break}tt=tt.return}_=tt}}function Nt(a,i,f,m){a=null;for(var _=i,B=!1;_!==null;){if(!B){if((_.flags&524288)!==0)B=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var tt=_.alternate;if(tt===null)throw Error(o(387));if(tt=tt.memoizedProps,tt!==null){var ot=_.type;ra(_.pendingProps.value,tt.value)||(a!==null?a.push(ot):a=[ot])}}else if(_===ps.current){if(tt=_.alternate,tt===null)throw Error(o(387));tt.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(a!==null?a.push(Pa):a=[Pa])}_=_.return}a!==null&&pt(i,a,f,m),i.flags|=262144}function oe(a){for(a=a.firstContext;a!==null;){var i=a.context;if(!ra(mi?i._currentValue:i._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function Wt(a){Dl=a,Xn=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ne(a){return re(Dl,a)}function Zt(a,i){return Dl===null&&Wt(a),re(a,i)}function re(a,i){var f=mi?i._currentValue:i._currentValue2;if(i={context:i,memoizedValue:f,next:null},Xn===null){if(a===null)throw Error(o(308));Xn=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Xn=Xn.next=i;return f}function Ue(){return{controller:new Nf,data:new Map,refCount:0}}function rn(a){a.refCount--,a.refCount===0&&vd(Ku,function(){a.controller.abort()})}function Je(a){a!==gs&&a.next===null&&(gs===null?Ye=gs=a:gs=gs.next=a),_o=!0,Df||(Df=!0,_n())}function ct(a,i){if(!vr&&_o){vr=!0;do for(var f=!1,m=Ye;m!==null;){if(a!==0){var _=m.pendingLanes;if(_===0)var B=0;else{var tt=m.suspendedLanes,ot=m.pingedLanes;B=(1<<31-la(42|a)+1)-1,B&=_&~(tt&~ot),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(f=!0,hn(m,B))}else B=ye,B=Y(m,m===qe?B:0,m.cancelPendingCommit!==null||m.timeoutHandle!==gi),(B&3)===0||G(m,B)||(f=!0,hn(m,B));m=m.next}while(f);vr=!1}}function Mt(){Dt()}function Dt(){_o=Df=!1;var a=0;Ga!==0&&(Na()&&(a=Ga),Ga=0);for(var i=za(),f=null,m=Ye;m!==null;){var _=m.next,B=Kt(m,i);B===0?(m.next=null,f===null?Ye=_:f.next=_,_===null&&(gs=f)):(f=m,(a!==0||(B&3)!==0)&&(_o=!0)),m=_}ct(a)}function Kt(a,i){for(var f=a.suspendedLanes,m=a.pingedLanes,_=a.expirationTimes,B=a.pendingLanes&-62914561;0<B;){var tt=31-la(B),ot=1<<tt,St=_[tt];St===-1?((ot&f)===0||(ot&m)!==0)&&(_[tt]=D(ot,i)):St<=i&&(a.expiredLanes|=ot),B&=~ot}if(i=qe,f=ye,f=Y(a,a===i?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==gi),m=a.callbackNode,f===0||a===i&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&qu(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||G(a,f)){if(i=f&-f,i===a.callbackPriority)return i;switch(m!==null&&qu(m),I(f)){case 2:case 8:f=md;break;case 32:f=Of;break;case 268435456:f=Rf;break;default:f=Of}return m=ve.bind(null,a),f=Ao(f,m),a.callbackPriority=i,a.callbackNode=f,i}return m!==null&&m!==null&&qu(m),a.callbackPriority=2,a.callbackNode=null,2}function ve(a,i){if(Ge!==0&&Ge!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(tr()&&a.callbackNode!==f)return null;var m=ye;return m=Y(a,a===qe?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==gi),m===0?null:(Ra(a,m,i),Kt(a,za()),a.callbackNode!=null&&a.callbackNode===f?ve.bind(null,a):null)}function hn(a,i){if(tr())return null;Ra(a,i,!0)}function _n(){Mu?yo(function(){(ge&6)!==0?Ao(_f,Mt):Dt()}):Ao(_f,Mt)}function ri(){return Ga===0&&(Ga=j()),Ga}function Ta(a,i){if(ms===null){var f=ms=[];Iu=0,Ai=ri(),sa={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Iu++,i.then(ch,ch),i}function ch(){if(--Iu===0&&ms!==null){sa!==null&&(sa.status="fulfilled");var a=ms;ms=null,Ai=0,sa=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function h0(a,i){var f=[],m={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return a.then(function(){m.status="fulfilled",m.value=i;for(var _=0;_<f.length;_++)(0,f[_])(i)},function(_){for(m.status="rejected",m.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),m}function yc(){var a=tl.current;return a!==null?a:qe.pooledCache}function wl(a,i){i===null?S(tl,tl.current):S(tl,i.pool)}function js(){var a=yc();return a===null?null:{parent:mi?Xe._currentValue:Xe._currentValue2,pool:a}}function Yl(a,i){if(ra(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var f=Object.keys(a),m=Object.keys(i);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var _=f[m];if(!yd.call(i,_)||!ra(a[_],i[_]))return!1}return!0}function sl(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ql(){}function qr(a,i,f){switch(f=a[f],f===void 0?a.push(i):f!==i&&(i.then(ql,ql),i=f),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Sc(a),a;default:if(typeof i.status=="string")i.then(ql,ql);else{if(a=qe,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(m){if(i.status==="pending"){var _=i;_.status="fulfilled",_.value=m}},function(m){if(i.status==="pending"){var _=i;_.status="rejected",_.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Sc(a),a}throw Sa=i,yr}}function fh(){if(Sa===null)throw Error(o(459));var a=Sa;return Sa=null,a}function Sc(a){if(a===yr||a===Sr)throw Error(o(483))}function Vr(){for(var a=zl,i=Zu=zl=0;i<a;){var f=De[i];De[i++]=null;var m=De[i];De[i++]=null;var _=De[i];De[i++]=null;var B=De[i];if(De[i++]=null,m!==null&&_!==null){var tt=m.pending;tt===null?_.next=_:(_.next=tt.next,tt.next=_),m.pending=_}B!==0&&Cc(f,_,B)}}function ol(a,i,f,m){De[zl++]=a,De[zl++]=i,De[zl++]=f,De[zl++]=m,Zu|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function bc(a,i,f,m){return ol(a,i,f,m),Ls(a)}function Vl(a,i){return ol(a,null,null,i),Ls(a)}function Cc(a,i,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var _=!1,B=a.return;B!==null;)B.childLanes|=f,m=B.alternate,m!==null&&(m.childLanes|=f),B.tag===22&&(a=B.stateNode,a===null||a._visibility&1||(_=!0)),a=B,B=B.return;return a.tag===3?(B=a.stateNode,_&&i!==null&&(_=31-la(f),a=B.hiddenUpdates,m=a[_],m===null?a[_]=[i]:m.push(i),i.lane=f|536870912),B):null}function Ls(a){if(50<Ni)throw Ni=0,$u=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}function ws(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ys(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Gi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Bi(a,i,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(ge&2)!==0){var _=m.pending;return _===null?i.next=i:(i.next=_.next,_.next=i),m.pending=i,i=Ls(a),Cc(a,null,f),i}return ol(a,m,i,f),Ls(a)}function ja(a,i,f){if(i=i.updateQueue,i!==null&&(i=i.shared,(f&4194048)!==0)){var m=i.lanes;m&=a.pendingLanes,f|=m,i.lanes=f,N(a,f)}}function On(a,i){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var _=null,B=null;if(f=f.firstBaseUpdate,f!==null){do{var tt={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};B===null?_=B=tt:B=B.next=tt,f=f.next}while(f!==null);B===null?_=B=i:B=B.next=i}else _=B=i;f={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:B,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=i:a.next=i,f.lastBaseUpdate=i}function Nn(){if(Uf){var a=sa;if(a!==null)throw a}}function si(a,i,f,m){Uf=!1;var _=a.updateQueue;ke=!1;var B=_.firstBaseUpdate,tt=_.lastBaseUpdate,ot=_.shared.pending;if(ot!==null){_.shared.pending=null;var St=ot,zt=St.next;St.next=null,tt===null?B=zt:tt.next=zt,tt=St;var Ht=a.alternate;Ht!==null&&(Ht=Ht.updateQueue,ot=Ht.lastBaseUpdate,ot!==tt&&(ot===null?Ht.firstBaseUpdate=zt:ot.next=zt,Ht.lastBaseUpdate=St))}if(B!==null){var Pt=_.baseState;tt=0,Ht=zt=St=null,ot=B;do{var Qt=ot.lane&-536870913,he=Qt!==ot.lane;if(he?(ye&Qt)===Qt:(m&Qt)===Qt){Qt!==0&&Qt===Ai&&(Uf=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:ot.tag,payload:ot.payload,callback:null,next:null});t:{var Ha=a,bs=ot;Qt=i;var Bl=f;switch(bs.tag){case 1:if(Ha=bs.payload,typeof Ha=="function"){Pt=Ha.call(Bl,Pt,Qt);break t}Pt=Ha;break t;case 3:Ha.flags=Ha.flags&-65537|128;case 0:if(Ha=bs.payload,Qt=typeof Ha=="function"?Ha.call(Bl,Pt,Qt):Ha,Qt==null)break t;Pt=Tu({},Pt,Qt);break t;case 2:ke=!0}}Qt=ot.callback,Qt!==null&&(a.flags|=64,he&&(a.flags|=8192),he=_.callbacks,he===null?_.callbacks=[Qt]:he.push(Qt))}else he={lane:Qt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},Ht===null?(zt=Ht=he,St=Pt):Ht=Ht.next=he,tt|=Qt;if(ot=ot.next,ot===null){if(ot=_.shared.pending,ot===null)break;he=ot,ot=he.next,he.next=null,_.lastBaseUpdate=he,_.shared.pending=null}}while(!0);Ht===null&&(St=Pt),_.baseState=St,_.firstBaseUpdate=zt,_.lastBaseUpdate=Ht,B===null&&(_.shared.lanes=0),ua|=tt,a.lanes=tt,a.memoizedState=Pt}}function Lo(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function hh(a,i){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Lo(f[a],i)}function dh(a,i){a=Ka,S(Mo,a),S(br,i),Ka=a|i.baseLanes}function wo(){S(Mo,Ka),S(br,br.current)}function Pl(){Ka=Mo.current,z(br),z(Mo)}function sn(){throw Error(o(321))}function ul(a,i){if(i===null)return!1;for(var f=0;f<i.length&&f<a.length;f++)if(!ra(a[f],i[f]))return!1;return!0}function cl(a,i,f,m,_,B){return ze=B,ee=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=a===null||a.memoizedState===null?Gf:_i,Er=!1,B=f(m,_),Er=!1,Cr&&(B=Xl(i,f,m,_)),Pr(a),B}function Pr(a){te.H=Qn;var i=Ee!==null&&Ee.next!==null;if(ze=0,vn=Ee=ee=null,xo=!1,Gn=0,Fn=null,i)throw Error(o(300));a===null||xn||(a=a.dependencies,a!==null&&oe(a)&&(xn=!0))}function Xl(a,i,f,m){ee=a;var _=0;do{if(Cr&&(Fn=null),Gn=0,Cr=!1,25<=_)throw Error(o(301));if(_+=1,vn=Ee=null,a.updateQueue!=null){var B=a.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}te.H=Ar,B=i(f,m)}while(Cr);return B}function Dn(){var a=te.H,i=a.useState()[0];return i=typeof i.then=="function"?Xr(i):i,a=a.useState()[0],(Ee!==null?Ee.memoizedState:null)!==a&&(ee.flags|=1024),i}function Yo(){var a=Tr!==0;return Tr=0,a}function qo(a,i,f){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~f}function Hi(a){if(xo){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}xo=!1}ze=0,vn=Ee=ee=null,Cr=!1,Gn=Tr=0,Fn=null}function Rn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?ee.memoizedState=vn=a:vn=vn.next=a,vn}function Sn(){if(Ee===null){var a=ee.alternate;a=a!==null?a.memoizedState:null}else a=Ee.next;var i=vn===null?ee.memoizedState:vn.next;if(i!==null)vn=i,Ee=a;else{if(a===null)throw ee.alternate===null?Error(o(467)):Error(o(310));Ee=a,a={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},vn===null?ee.memoizedState=vn=a:vn=vn.next=a}return vn}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xr(a){var i=Gn;return Gn+=1,Fn===null&&(Fn=[]),a=qr(Fn,a,i),i=ee,(vn===null?i.memoizedState:vn.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?Gf:_i),a}function Po(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Xr(a);if(a.$$typeof===Qi)return ne(a)}throw Error(o(438,String(a)))}function Qr(a){var i=null,f=ee.updateQueue;if(f!==null&&(i=f.memoCache),i==null){var m=ee.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(_){return _.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),f===null&&(f=Vo(),ee.updateQueue=f),f.memoCache=i,f=i.data[i.index],f===void 0)for(f=i.data[i.index]=Array(a),m=0;m<a;m++)f[m]=ho;return i.index++,f}function La(a,i){return typeof i=="function"?i(a):i}function wa(a){var i=Sn();return fa(i,Ee,a)}function fa(a,i,f){var m=a.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=f;var _=a.baseQueue,B=m.pending;if(B!==null){if(_!==null){var tt=_.next;_.next=B.next,B.next=tt}i.baseQueue=_=B,m.pending=null}if(B=a.baseState,_===null)a.memoizedState=B;else{i=_.next;var ot=tt=null,St=null,zt=i,Ht=!1;do{var Pt=zt.lane&-536870913;if(Pt!==zt.lane?(ye&Pt)===Pt:(ze&Pt)===Pt){var Qt=zt.revertLane;if(Qt===0)St!==null&&(St=St.next={lane:0,revertLane:0,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),Pt===Ai&&(Ht=!0);else if((ze&Qt)===Qt){zt=zt.next,Qt===Ai&&(Ht=!0);continue}else Pt={lane:0,revertLane:zt.revertLane,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},St===null?(ot=St=Pt,tt=B):St=St.next=Pt,ee.lanes|=Qt,ua|=Qt;Pt=zt.action,Er&&f(B,Pt),B=zt.hasEagerState?zt.eagerState:f(B,Pt)}else Qt={lane:Pt,revertLane:zt.revertLane,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},St===null?(ot=St=Qt,tt=B):St=St.next=Qt,ee.lanes|=Pt,ua|=Pt;zt=zt.next}while(zt!==null&&zt!==i);if(St===null?tt=B:St.next=ot,!ra(B,a.memoizedState)&&(xn=!0,Ht&&(f=sa,f!==null)))throw f;a.memoizedState=B,a.baseState=tt,a.baseQueue=St,m.lastRenderedState=B}return _===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Xo(a){var i=Sn(),f=i.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=a;var m=f.dispatch,_=f.pending,B=i.memoizedState;if(_!==null){f.pending=null;var tt=_=_.next;do B=a(B,tt.action),tt=tt.next;while(tt!==_);ra(B,i.memoizedState)||(xn=!0),i.memoizedState=B,i.baseQueue===null&&(i.baseState=B),f.lastRenderedState=B}return[B,m]}function ph(a,i,f){var m=ee,_=Sn(),B=xe;if(B){if(f===void 0)throw Error(o(407));f=f()}else f=i();var tt=!ra((Ee||_).memoizedState,f);tt&&(_.memoizedState=f,xn=!0),_=_.queue;var ot=qs.bind(null,m,_,a);if(oi(2048,8,ot,[a]),_.getSnapshot!==i||tt||vn!==null&&vn.memoizedState.tag&1){if(m.flags|=2048,ha(9,Kr(),Ec.bind(null,m,_,f,i),null),qe===null)throw Error(o(349));B||(ze&124)!==0||Qo(m,i,f)}return f}function Qo(a,i,f){a.flags|=16384,a={getSnapshot:i,value:f},i=ee.updateQueue,i===null?(i=Vo(),ee.updateQueue=i,i.stores=[a]):(f=i.stores,f===null?i.stores=[a]:f.push(a))}function Ec(a,i,f,m){i.value=f,i.getSnapshot=m,gh(i)&&Aa(a)}function qs(a,i,f){return f(function(){gh(i)&&Aa(a)})}function gh(a){var i=a.getSnapshot;a=a.value;try{var f=i();return!ra(a,f)}catch{return!0}}function Aa(a){var i=Vl(a,2);i!==null&&ga(i,a,2)}function Vs(a){var i=Rn();if(typeof a=="function"){var f=a;if(a=f(),Er){Z(!0);try{f()}finally{Z(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:a},i}function Tc(a,i,f,m){return a.baseState=f,fa(a,Ee,typeof m=="function"?m:La)}function Ac(a,i,f,m,_){if(dl(a))throw Error(o(485));if(a=i.action,a!==null){var B={payload:_,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(tt){B.listeners.push(tt)}};te.T!==null?f(!0):B.isTransition=!1,m(B),f=i.pending,f===null?(B.next=i.pending=B,Ql(i,B)):(B.next=f.next,i.pending=f.next=B)}}function Ql(a,i){var f=i.action,m=i.payload,_=a.state;if(i.isTransition){var B=te.T,tt={};te.T=tt;try{var ot=f(_,m),St=te.S;St!==null&&St(tt,ot),_c(a,i,ot)}catch(zt){fl(a,i,zt)}finally{te.T=B}}else try{B=f(_,m),_c(a,i,B)}catch(zt){fl(a,i,zt)}}function _c(a,i,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){Oc(a,i,m)},function(m){return fl(a,i,m)}):Oc(a,i,f)}function Oc(a,i,f){i.status="fulfilled",i.value=f,mh(i),a.state=f,i=a.pending,i!==null&&(f=i.next,f===i?a.pending=null:(f=f.next,i.next=f,Ql(a,f)))}function fl(a,i,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=f,mh(i),i=i.next;while(i!==m)}a.action=null}function mh(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function Rc(a,i){return i}function Mc(a,i){if(xe){var f=qe.formState;if(f!==null){t:{var m=ee;if(xe){if(mn){var _=Jh(mn,ei);if(_){mn=yf(_),m=Fh(_);break t}}et(m)}m=!1}m&&(i=f[0])}}f=Rn(),f.memoizedState=f.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rc,lastRenderedState:i},f.queue=m,f=yh.bind(null,ee,m),m.dispatch=f,m=Vs(!1);var B=Is.bind(null,ee,!1,m.queue);return m=Rn(),_={state:i,dispatch:null,action:a,pending:null},m.queue=_,f=Ac.bind(null,ee,_,B,f),_.dispatch=f,m.memoizedState=a,[i,f,!1]}function Ko(a){var i=Sn();return vh(i,Ee,a)}function vh(a,i,f){if(i=fa(a,i,Rc)[0],a=wa(La)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=Xr(i)}catch(tt){throw tt===yr?Sr:tt}else m=i;i=Sn();var _=i.queue,B=_.dispatch;return f!==i.memoizedState&&(ee.flags|=2048,ha(9,Kr(),d0.bind(null,_,f),null)),[m,B,a]}function d0(a,i){a.action=i}function Ps(a){var i=Sn(),f=Ee;if(f!==null)return vh(i,f,a);Sn(),i=i.memoizedState,f=Sn();var m=f.queue.dispatch;return f.memoizedState=a,[i,m,!1]}function ha(a,i,f,m){return a={tag:a,create:f,deps:m,inst:i,next:null},i=ee.updateQueue,i===null&&(i=Vo(),ee.updateQueue=i),f=i.lastEffect,f===null?i.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,i.lastEffect=a),a}function Kr(){return{destroy:void 0,resource:void 0}}function Io(){return Sn().memoizedState}function ji(a,i,f,m){var _=Rn();m=m===void 0?null:m,ee.flags|=a,_.memoizedState=ha(1|i,Kr(),f,m)}function oi(a,i,f,m){var _=Sn();m=m===void 0?null:m;var B=_.memoizedState.inst;Ee!==null&&m!==null&&ul(m,Ee.memoizedState.deps)?_.memoizedState=ha(i,B,f,m):(ee.flags|=a,_.memoizedState=ha(1|i,B,f,m))}function xc(a,i){ji(8390656,8,a,i)}function Zo(a,i){oi(2048,8,a,i)}function Nc(a,i){return oi(4,2,a,i)}function Ir(a,i){return oi(4,4,a,i)}function ui(a,i){if(typeof i=="function"){a=a();var f=i(a);return function(){typeof f=="function"?f():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function Jo(a,i,f){f=f!=null?f.concat([a]):null,oi(4,4,ui.bind(null,i,a),f)}function Kl(){}function Li(a,i){var f=Sn();i=i===void 0?null:i;var m=f.memoizedState;return i!==null&&ul(i,m[1])?m[0]:(f.memoizedState=[a,i],a)}function Fo(a,i){var f=Sn();i=i===void 0?null:i;var m=f.memoizedState;if(i!==null&&ul(i,m[1]))return m[0];if(m=a(),Er){Z(!0);try{a()}finally{Z(!1)}}return f.memoizedState=[m,i],m}function Zr(a,i,f){return f===void 0||(ze&1073741824)!==0?a.memoizedState=i:(a.memoizedState=f,a=mu(),ee.lanes|=a,ua|=a,f)}function Dc(a,i,f,m){return ra(f,i)?f:br.current!==null?(a=Zr(a,f,m),ra(a,i)||(xn=!0),a):(ze&42)===0?(xn=!0,a.memoizedState=f):(a=mu(),ee.lanes|=a,ua|=a,i)}function Xs(a,i,f,m,_){var B=yi();Cn(B!==0&&8>B?B:8);var tt=te.T,ot={};te.T=ot,Is(a,!1,i,f);try{var St=_(),zt=te.S;if(zt!==null&&zt(ot,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var Ht=h0(St,m);Il(a,i,Ht,pa(a))}else Il(a,i,m,pa(a))}catch(Pt){Il(a,i,{then:function(){},status:"rejected",reason:Pt},pa())}finally{Cn(B),te.T=tt}}function Qs(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:Fi,baseState:Fi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:Fi},next:null};var f={};return i.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:f},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function ko(){return ne(Pa)}function ta(){return Sn().memoizedState}function hl(){return Sn().memoizedState}function Wo(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var f=pa();a=Gi(f);var m=Bi(i,a,f);m!==null&&(ga(m,i,f),ja(m,i,f)),i={cache:Ue()},a.payload=i;return}i=i.return}}function Ks(a,i,f){var m=pa();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},dl(a)?Zs(i,f):(f=bc(a,i,f,m),f!==null&&(ga(f,a,m),zc(f,i,m)))}function yh(a,i,f){var m=pa();Il(a,i,f,m)}function Il(a,i,f,m){var _={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(dl(a))Zs(i,_);else{var B=a.alternate;if(a.lanes===0&&(B===null||B.lanes===0)&&(B=i.lastRenderedReducer,B!==null))try{var tt=i.lastRenderedState,ot=B(tt,f);if(_.hasEagerState=!0,_.eagerState=ot,ra(ot,tt))return ol(a,i,_,0),qe===null&&Vr(),!1}catch{}finally{}if(f=bc(a,i,_,m),f!==null)return ga(f,a,m),zc(f,i,m),!0}return!1}function Is(a,i,f,m){if(m={lane:2,revertLane:ri(),action:m,hasEagerState:!1,eagerState:null,next:null},dl(a)){if(i)throw Error(o(479))}else i=bc(a,f,m,2),i!==null&&ga(i,a,2)}function dl(a){var i=a.alternate;return a===ee||i!==null&&i===ee}function Zs(a,i){Cr=xo=!0;var f=a.pending;f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i}function zc(a,i,f){if((f&4194048)!==0){var m=i.lanes;m&=a.pendingLanes,f|=m,i.lanes=f,N(a,f)}}function $o(a){var i=_r;return _r+=1,ba===null&&(ba=[]),qr(ba,a,i)}function Js(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function tu(a,i){throw i.$$typeof===ar?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function eu(a){var i=a._init;return i(a._payload)}function Sh(a){function i(yt,ft){if(a){var Et=yt.deletions;Et===null?(yt.deletions=[ft],yt.flags|=16):Et.push(ft)}}function f(yt,ft){if(!a)return null;for(;ft!==null;)i(yt,ft),ft=ft.sibling;return null}function m(yt){for(var ft=new Map;yt!==null;)yt.key!==null?ft.set(yt.key,yt):ft.set(yt.index,yt),yt=yt.sibling;return ft}function _(yt,ft){return yt=Fe(yt,ft),yt.index=0,yt.sibling=null,yt}function B(yt,ft,Et){return yt.index=Et,a?(Et=yt.alternate,Et!==null?(Et=Et.index,Et<ft?(yt.flags|=67108866,ft):Et):(yt.flags|=67108866,ft)):(yt.flags|=1048576,ft)}function tt(yt){return a&&yt.alternate===null&&(yt.flags|=67108866),yt}function ot(yt,ft,Et,jt){return ft===null||ft.tag!==6?(ft=ef(Et,yt.mode,jt),ft.return=yt,ft):(ft=_(ft,Et),ft.return=yt,ft)}function St(yt,ft,Et,jt){var qt=Et.type;return qt===ir?Ht(yt,ft,Et.props.children,jt,Et.key):ft!==null&&(ft.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Zi&&eu(qt)===ft.type)?(ft=_(ft,Et.props),Js(ft,Et),ft.return=yt,ft):(ft=uo(Et.type,Et.key,Et.props,null,yt.mode,jt),Js(ft,Et),ft.return=yt,ft)}function zt(yt,ft,Et,jt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==Et.containerInfo||ft.stateNode.implementation!==Et.implementation?(ft=nf(Et,yt.mode,jt),ft.return=yt,ft):(ft=_(ft,Et.children||[]),ft.return=yt,ft)}function Ht(yt,ft,Et,jt,qt){return ft===null||ft.tag!==7?(ft=er(Et,yt.mode,jt,qt),ft.return=yt,ft):(ft=_(ft,Et),ft.return=yt,ft)}function Pt(yt,ft,Et){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=ef(""+ft,yt.mode,Et),ft.return=yt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case os:return Et=uo(ft.type,ft.key,ft.props,null,yt.mode,Et),Js(Et,ft),Et.return=yt,Et;case Xi:return ft=nf(ft,yt.mode,Et),ft.return=yt,ft;case Zi:var jt=ft._init;return ft=jt(ft._payload),Pt(yt,ft,Et)}if(rr(ft)||O(ft))return ft=er(ft,yt.mode,Et,null),ft.return=yt,ft;if(typeof ft.then=="function")return Pt(yt,$o(ft),Et);if(ft.$$typeof===Qi)return Pt(yt,Zt(yt,ft),Et);tu(yt,ft)}return null}function Qt(yt,ft,Et,jt){var qt=ft!==null?ft.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return qt!==null?null:ot(yt,ft,""+Et,jt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case os:return Et.key===qt?St(yt,ft,Et,jt):null;case Xi:return Et.key===qt?zt(yt,ft,Et,jt):null;case Zi:return qt=Et._init,Et=qt(Et._payload),Qt(yt,ft,Et,jt)}if(rr(Et)||O(Et))return qt!==null?null:Ht(yt,ft,Et,jt,null);if(typeof Et.then=="function")return Qt(yt,ft,$o(Et),jt);if(Et.$$typeof===Qi)return Qt(yt,ft,Zt(yt,Et),jt);tu(yt,Et)}return null}function he(yt,ft,Et,jt,qt){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return yt=yt.get(Et)||null,ot(ft,yt,""+jt,qt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case os:return yt=yt.get(jt.key===null?Et:jt.key)||null,St(ft,yt,jt,qt);case Xi:return yt=yt.get(jt.key===null?Et:jt.key)||null,zt(ft,yt,jt,qt);case Zi:var Ve=jt._init;return jt=Ve(jt._payload),he(yt,ft,Et,jt,qt)}if(rr(jt)||O(jt))return yt=yt.get(Et)||null,Ht(ft,yt,jt,qt,null);if(typeof jt.then=="function")return he(yt,ft,Et,$o(jt),qt);if(jt.$$typeof===Qi)return he(yt,ft,Et,Zt(ft,jt),qt);tu(ft,jt)}return null}function Ha(yt,ft,Et,jt){for(var qt=null,Ve=null,se=ft,Re=ft=0,Hn=null;se!==null&&Re<Et.length;Re++){se.index>Re?(Hn=se,se=null):Hn=se.sibling;var Ne=Qt(yt,se,Et[Re],jt);if(Ne===null){se===null&&(se=Hn);break}a&&se&&Ne.alternate===null&&i(yt,se),ft=B(Ne,ft,Re),Ve===null?qt=Ne:Ve.sibling=Ne,Ve=Ne,se=Hn}if(Re===Et.length)return f(yt,se),xe&&k(yt,Re),qt;if(se===null){for(;Re<Et.length;Re++)se=Pt(yt,Et[Re],jt),se!==null&&(ft=B(se,ft,Re),Ve===null?qt=se:Ve.sibling=se,Ve=se);return xe&&k(yt,Re),qt}for(se=m(se);Re<Et.length;Re++)Hn=he(se,yt,Re,Et[Re],jt),Hn!==null&&(a&&Hn.alternate!==null&&se.delete(Hn.key===null?Re:Hn.key),ft=B(Hn,ft,Re),Ve===null?qt=Hn:Ve.sibling=Hn,Ve=Hn);return a&&se.forEach(function(Hl){return i(yt,Hl)}),xe&&k(yt,Re),qt}function bs(yt,ft,Et,jt){if(Et==null)throw Error(o(151));for(var qt=null,Ve=null,se=ft,Re=ft=0,Hn=null,Ne=Et.next();se!==null&&!Ne.done;Re++,Ne=Et.next()){se.index>Re?(Hn=se,se=null):Hn=se.sibling;var Hl=Qt(yt,se,Ne.value,jt);if(Hl===null){se===null&&(se=Hn);break}a&&se&&Hl.alternate===null&&i(yt,se),ft=B(Hl,ft,Re),Ve===null?qt=Hl:Ve.sibling=Hl,Ve=Hl,se=Hn}if(Ne.done)return f(yt,se),xe&&k(yt,Re),qt;if(se===null){for(;!Ne.done;Re++,Ne=Et.next())Ne=Pt(yt,Ne.value,jt),Ne!==null&&(ft=B(Ne,ft,Re),Ve===null?qt=Ne:Ve.sibling=Ne,Ve=Ne);return xe&&k(yt,Re),qt}for(se=m(se);!Ne.done;Re++,Ne=Et.next())Ne=he(se,yt,Re,Ne.value,jt),Ne!==null&&(a&&Ne.alternate!==null&&se.delete(Ne.key===null?Re:Ne.key),ft=B(Ne,ft,Re),Ve===null?qt=Ne:Ve.sibling=Ne,Ve=Ne);return a&&se.forEach(function(tc){return i(yt,tc)}),xe&&k(yt,Re),qt}function Bl(yt,ft,Et,jt){if(typeof Et=="object"&&Et!==null&&Et.type===ir&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case os:t:{for(var qt=Et.key;ft!==null;){if(ft.key===qt){if(qt=Et.type,qt===ir){if(ft.tag===7){f(yt,ft.sibling),jt=_(ft,Et.props.children),jt.return=yt,yt=jt;break t}}else if(ft.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Zi&&eu(qt)===ft.type){f(yt,ft.sibling),jt=_(ft,Et.props),Js(jt,Et),jt.return=yt,yt=jt;break t}f(yt,ft);break}else i(yt,ft);ft=ft.sibling}Et.type===ir?(jt=er(Et.props.children,yt.mode,jt,Et.key),jt.return=yt,yt=jt):(jt=uo(Et.type,Et.key,Et.props,null,yt.mode,jt),Js(jt,Et),jt.return=yt,yt=jt)}return tt(yt);case Xi:t:{for(qt=Et.key;ft!==null;){if(ft.key===qt)if(ft.tag===4&&ft.stateNode.containerInfo===Et.containerInfo&&ft.stateNode.implementation===Et.implementation){f(yt,ft.sibling),jt=_(ft,Et.children||[]),jt.return=yt,yt=jt;break t}else{f(yt,ft);break}else i(yt,ft);ft=ft.sibling}jt=nf(Et,yt.mode,jt),jt.return=yt,yt=jt}return tt(yt);case Zi:return qt=Et._init,Et=qt(Et._payload),Bl(yt,ft,Et,jt)}if(rr(Et))return Ha(yt,ft,Et,jt);if(O(Et)){if(qt=O(Et),typeof qt!="function")throw Error(o(150));return Et=qt.call(Et),bs(yt,ft,Et,jt)}if(typeof Et.then=="function")return Bl(yt,ft,$o(Et),jt);if(Et.$$typeof===Qi)return Bl(yt,ft,Zt(yt,Et),jt);tu(yt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,ft!==null&&ft.tag===6?(f(yt,ft.sibling),jt=_(ft,Et),jt.return=yt,yt=jt):(f(yt,ft),jt=ef(Et,yt.mode,jt),jt.return=yt,yt=jt),tt(yt)):f(yt,ft)}return function(yt,ft,Et,jt){try{_r=0;var qt=Bl(yt,ft,Et,jt);return ba=null,qt}catch(se){if(se===yr||se===Sr)throw se;var Ve=s(29,se,null,yt.mode);return Ve.lanes=jt,Ve.return=yt,Ve}finally{}}}function pl(a){var i=a.alternate;S(un,un.current&1),S(Ba,a),oa===null&&(i===null||br.current!==null||i.memoizedState!==null)&&(oa=a)}function bh(a){if(a.tag===22){if(S(un,un.current),S(Ba,a),oa===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(oa=a)}}else gl()}function gl(){S(un,un.current),S(Ba,Ba.current)}function wi(a){z(Ba),oa===a&&(oa=null),z(un)}function Fs(a){for(var i=a;i!==null;){if(i.tag===13){var f=i.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Uu(f)||Gu(f)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Uc(a,i,f,m){i=a.memoizedState,f=f(m,i),f=f==null?i:Tu({},i,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}function Ch(a,i,f,m,_,B,tt){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,B,tt):i.prototype&&i.prototype.isPureReactComponent?!Yl(f,m)||!Yl(_,B):!0}function Eh(a,i,f,m){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(f,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(f,m),i.state!==a&&Or.enqueueReplaceState(i,i.state,null)}function Zl(a,i){var f=i;if("ref"in i){f={};for(var m in i)m!=="ref"&&(f[m]=i[m])}if(a=a.defaultProps){f===i&&(f=Tu({},f));for(var _ in a)f[_]===void 0&&(f[_]=a[_])}return f}function Jr(a,i){try{var f=a.onUncaughtError;f(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function Th(a,i,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Gc(a,i,f){return f=Gi(f),f.tag=3,f.payload={element:null},f.callback=function(){Jr(a,i)},f}function Ah(a){return a=Gi(a),a.tag=3,a}function Bc(a,i,f,m){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var B=m.value;a.payload=function(){return _(B)},a.callback=function(){Th(i,f,m)}}var tt=f.stateNode;tt!==null&&typeof tt.componentDidCatch=="function"&&(a.callback=function(){Th(i,f,m),typeof _!="function"&&(al===null?al=new Set([this]):al.add(this));var ot=m.stack;this.componentDidCatch(m.value,{componentStack:ot!==null?ot:""})})}function p0(a,i,f,m,_){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=f.alternate,i!==null&&Nt(i,f,_,!0),f=Ba.current,f!==null){switch(f.tag){case 13:return oa===null?vu():f.alternate===null&&We===0&&(We=3),f.flags&=-257,f.flags|=65536,f.lanes=_,m===Ro?f.flags|=16384:(i=f.updateQueue,i===null?f.updateQueue=new Set([m]):i.add(m),$a(a,m,_)),!1;case 22:return f.flags|=65536,m===Ro?f.flags|=16384:(i=f.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=i):(f=i.retryQueue,f===null?i.retryQueue=new Set([m]):f.add(m)),$a(a,m,_)),!1}throw Error(o(435,f.tag))}return $a(a,m,_),vu(),!1}if(xe)return i=Ba.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=_,m!==ni&&(a=Error(o(422),{cause:m}),ce(Q(a,f)))):(m!==ni&&(i=Error(o(423),{cause:m}),ce(Q(i,f))),a=a.current.alternate,a.flags|=65536,_&=-_,a.lanes|=_,m=Q(m,f),_=Gc(a.stateNode,m,_),On(a,_),We!==4&&(We=2)),!1;var B=Error(o(520),{cause:m});if(B=Q(B,f),xr===null?xr=[B]:xr.push(B),We!==4&&(We=2),i===null)return!0;m=Q(m,f),f=i;do{switch(f.tag){case 3:return f.flags|=65536,a=_&-_,f.lanes|=a,a=Gc(f.stateNode,m,a),On(f,a),!1;case 1:if(i=f.type,B=f.stateNode,(f.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(al===null||!al.has(B))))return f.flags|=65536,_&=-_,f.lanes|=_,_=Ah(_),Bc(_,a,f,m),On(f,_),!1}f=f.return}while(f!==null);return!1}function jn(a,i,f,m){i.child=a===null?Xa(i,null,f,m):Ul(i,a.child,f,m)}function _h(a,i,f,m,_){f=f.render;var B=i.ref;if("ref"in m){var tt={};for(var ot in m)ot!=="ref"&&(tt[ot]=m[ot])}else tt=m;return Wt(i),m=cl(a,i,f,tt,B,_),ot=Yo(),a!==null&&!xn?(qo(a,i,_),ci(a,i,_)):(xe&&ot&&F(i),i.flags|=1,jn(a,i,m,_),i.child)}function Oh(a,i,f,m,_){if(a===null){var B=f.type;return typeof B=="function"&&!Pi(B)&&B.defaultProps===void 0&&f.compare===null?(i.tag=15,i.type=B,Rh(a,i,B,m,_)):(a=uo(f.type,null,m,i,i.mode,_),a.ref=i.ref,a.return=i,i.child=a)}if(B=a.child,!su(a,_)){var tt=B.memoizedProps;if(f=f.compare,f=f!==null?f:Yl,f(tt,m)&&a.ref===i.ref)return ci(a,i,_)}return i.flags|=1,a=Fe(B,m),a.ref=i.ref,a.return=i,i.child=a}function Rh(a,i,f,m,_){if(a!==null){var B=a.memoizedProps;if(Yl(B,m)&&a.ref===i.ref)if(xn=!1,i.pendingProps=m=B,su(a,_))(a.flags&131072)!==0&&(xn=!0);else return i.lanes=a.lanes,ci(a,i,_)}return Hc(a,i,f,m,_)}function Mh(a,i,f){var m=i.pendingProps,_=m.children,B=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=B!==null?B.baseLanes|f:f,a!==null){for(_=i.child=a.child,B=0;_!==null;)B=B|_.lanes|_.childLanes,_=_.sibling;i.childLanes=B&~m}else i.childLanes=0,i.child=null;return xh(a,i,m,f)}if((f&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&wl(i,B!==null?B.cachePool:null),B!==null?dh(i,B):wo(),bh(i);else return i.lanes=i.childLanes=536870912,xh(a,i,B!==null?B.baseLanes|f:f,f)}else B!==null?(wl(i,B.cachePool),dh(i,B),gl(),i.memoizedState=null):(a!==null&&wl(i,null),wo(),gl());return jn(a,i,_,f),i.child}function xh(a,i,f,m){var _=yc();return _=_===null?null:{parent:mi?Xe._currentValue:Xe._currentValue2,pool:_},i.memoizedState={baseLanes:f,cachePool:_},a!==null&&wl(i,null),wo(),bh(i),a!==null&&Nt(a,i,m,!0),null}function nu(a,i){var f=i.ref;if(f===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(o(284));(a===null||a.ref!==f)&&(i.flags|=4194816)}}function Hc(a,i,f,m,_){return Wt(i),f=cl(a,i,f,m,void 0,_),m=Yo(),a!==null&&!xn?(qo(a,i,_),ci(a,i,_)):(xe&&m&&F(i),i.flags|=1,jn(a,i,f,_),i.child)}function au(a,i,f,m,_,B){return Wt(i),i.updateQueue=null,f=Xl(i,m,f,_),Pr(a),m=Yo(),a!==null&&!xn?(qo(a,i,B),ci(a,i,B)):(xe&&m&&F(i),i.flags|=1,jn(a,i,f,B),i.child)}function Fr(a,i,f,m,_){if(Wt(i),i.stateNode===null){var B=xl,tt=f.contextType;typeof tt=="object"&&tt!==null&&(B=ne(tt)),B=new f(m,B),i.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=Or,i.stateNode=B,B._reactInternals=i,B=i.stateNode,B.props=m,B.state=i.memoizedState,B.refs={},ws(i),tt=f.contextType,B.context=typeof tt=="object"&&tt!==null?ne(tt):xl,B.state=i.memoizedState,tt=f.getDerivedStateFromProps,typeof tt=="function"&&(Uc(i,f,tt,m),B.state=i.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(tt=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),tt!==B.state&&Or.enqueueReplaceState(B,B.state,null),si(i,m,B,_),Nn(),B.state=i.memoizedState),typeof B.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(a===null){B=i.stateNode;var ot=i.memoizedProps,St=Zl(f,ot);B.props=St;var zt=B.context,Ht=f.contextType;tt=xl,typeof Ht=="object"&&Ht!==null&&(tt=ne(Ht));var Pt=f.getDerivedStateFromProps;Ht=typeof Pt=="function"||typeof B.getSnapshotBeforeUpdate=="function",ot=i.pendingProps!==ot,Ht||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ot||zt!==tt)&&Eh(i,B,m,tt),ke=!1;var Qt=i.memoizedState;B.state=Qt,si(i,m,B,_),Nn(),zt=i.memoizedState,ot||Qt!==zt||ke?(typeof Pt=="function"&&(Uc(i,f,Pt,m),zt=i.memoizedState),(St=ke||Ch(i,f,St,m,Qt,zt,tt))?(Ht||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(i.flags|=4194308)):(typeof B.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=zt),B.props=m,B.state=zt,B.context=tt,m=St):(typeof B.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{B=i.stateNode,Ys(a,i),tt=i.memoizedProps,Ht=Zl(f,tt),B.props=Ht,Pt=i.pendingProps,Qt=B.context,zt=f.contextType,St=xl,typeof zt=="object"&&zt!==null&&(St=ne(zt)),ot=f.getDerivedStateFromProps,(zt=typeof ot=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(tt!==Pt||Qt!==St)&&Eh(i,B,m,St),ke=!1,Qt=i.memoizedState,B.state=Qt,si(i,m,B,_),Nn();var he=i.memoizedState;tt!==Pt||Qt!==he||ke||a!==null&&a.dependencies!==null&&oe(a.dependencies)?(typeof ot=="function"&&(Uc(i,f,ot,m),he=i.memoizedState),(Ht=ke||Ch(i,f,Ht,m,Qt,he,St)||a!==null&&a.dependencies!==null&&oe(a.dependencies))?(zt||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(m,he,St),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(m,he,St)),typeof B.componentDidUpdate=="function"&&(i.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof B.componentDidUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=he),B.props=m,B.state=he,B.context=St,m=Ht):(typeof B.componentDidUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||tt===a.memoizedProps&&Qt===a.memoizedState||(i.flags|=1024),m=!1)}return B=m,nu(a,i),m=(i.flags&128)!==0,B||m?(B=i.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:B.render(),i.flags|=1,a!==null&&m?(i.child=Ul(i,a.child,null,_),i.child=Ul(i,null,f,_)):jn(a,i,f,_),i.memoizedState=B.state,a=i.child):a=ci(a,i,_),a}function Nh(a,i,f,m){return Xt(),i.flags|=256,jn(a,i,f,m),i.child}function iu(a){return{baseLanes:a,cachePool:js()}}function lu(a,i,f){return a=a!==null?a.childLanes&~f:0,i&&(a|=Kn),a}function jc(a,i,f){var m=i.pendingProps,_=!1,B=(i.flags&128)!==0,tt;if((tt=B)||(tt=a!==null&&a.memoizedState===null?!1:(un.current&2)!==0),tt&&(_=!0,i.flags&=-129),tt=(i.flags&32)!==0,i.flags&=-33,a===null){if(xe){if(_?pl(i):gl(),xe){var ot=mn,St;(St=ot)&&(ot=Hu(ot,ei),ot!==null?(i.memoizedState={dehydrated:ot,treeContext:Nl!==null?{id:Ti,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},St=s(18,null,null,0),St.stateNode=ot,St.return=i,i.child=St,Un=i,mn=null,St=!0):St=!1),St||et(i)}if(ot=i.memoizedState,ot!==null&&(ot=ot.dehydrated,ot!==null))return Gu(ot)?i.lanes=32:i.lanes=536870912,null;wi(i)}return ot=m.children,m=m.fallback,_?(gl(),_=i.mode,ot=ks({mode:"hidden",children:ot},_),m=er(m,_,f,null),ot.return=i,m.return=i,ot.sibling=m,i.child=ot,_=i.child,_.memoizedState=iu(f),_.childLanes=lu(a,tt,f),i.memoizedState=Mr,m):(pl(i),ru(i,ot))}if(St=a.memoizedState,St!==null&&(ot=St.dehydrated,ot!==null)){if(B)i.flags&256?(pl(i),i.flags&=-257,i=ml(a,i,f)):i.memoizedState!==null?(gl(),i.child=a.child,i.flags|=128,i=null):(gl(),_=m.fallback,ot=i.mode,m=ks({mode:"visible",children:m.children},ot),_=er(_,ot,f,null),_.flags|=2,m.return=i,_.return=i,m.sibling=_,i.child=m,Ul(i,a.child,null,f),m=i.child,m.memoizedState=iu(f),m.childLanes=lu(a,tt,f),i.memoizedState=Mr,i=_);else if(pl(i),Gu(ot))tt=Zh(ot).digest,m=Error(o(419)),m.stack="",m.digest=tt,ce({value:m,source:null,stack:null}),i=ml(a,i,f);else if(xn||Nt(a,i,f,!1),tt=(f&a.childLanes)!==0,xn||tt){if(tt=qe,tt!==null&&(m=f&-f,m=(m&42)!==0?1:q(m),m=(m&(tt.suspendedLanes|f))!==0?0:m,m!==0&&m!==St.retryLane))throw St.retryLane=m,Vl(a,m),ga(tt,a,m),Bf;Uu(ot)||vu(),i=ml(a,i,f)}else Uu(ot)?(i.flags|=192,i.child=a.child,i=null):(a=St.treeContext,en&&(mn=$h(ot),Un=i,xe=!0,$i=null,ei=!1,a!==null&&(ya[Ua++]=Ti,ya[Ua++]=ti,ya[Ua++]=Nl,Ti=a.id,ti=a.overflow,Nl=i)),i=ru(i,m.children),i.flags|=4096);return i}return _?(gl(),_=m.fallback,ot=i.mode,St=a.child,B=St.sibling,m=Fe(St,{mode:"hidden",children:m.children}),m.subtreeFlags=St.subtreeFlags&65011712,B!==null?_=Fe(B,_):(_=er(_,ot,f,null),_.flags|=2),_.return=i,m.return=i,m.sibling=_,i.child=m,m=_,_=i.child,ot=a.child.memoizedState,ot===null?ot=iu(f):(St=ot.cachePool,St!==null?(B=mi?Xe._currentValue:Xe._currentValue2,St=St.parent!==B?{parent:B,pool:B}:St):St=js(),ot={baseLanes:ot.baseLanes|f,cachePool:St}),_.memoizedState=ot,_.childLanes=lu(a,tt,f),i.memoizedState=Mr,m):(pl(i),f=a.child,a=f.sibling,f=Fe(f,{mode:"visible",children:m.children}),f.return=i,f.sibling=null,a!==null&&(tt=i.deletions,tt===null?(i.deletions=[a],i.flags|=16):tt.push(a)),i.child=f,i.memoizedState=null,f)}function ru(a,i){return i=ks({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function ks(a,i){return a=s(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ml(a,i,f){return Ul(i,a.child,null,f),a=ru(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function Dh(a,i,f){a.lanes|=i;var m=a.alternate;m!==null&&(m.lanes|=i),Ut(a.return,i,f)}function Lc(a,i,f,m,_){var B=a.memoizedState;B===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:_}:(B.isBackwards=i,B.rendering=null,B.renderingStartTime=0,B.last=m,B.tail=f,B.tailMode=_)}function zh(a,i,f){var m=i.pendingProps,_=m.revealOrder,B=m.tail;if(jn(a,i,m.children,f),m=un.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Dh(a,f,i);else if(a.tag===19)Dh(a,f,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(S(un,m),_){case"forwards":for(f=i.child,_=null;f!==null;)a=f.alternate,a!==null&&Fs(a)===null&&(_=f),f=f.sibling;f=_,f===null?(_=i.child,i.child=null):(_=f.sibling,f.sibling=null),Lc(i,!1,_,f,B);break;case"backwards":for(f=null,_=i.child,i.child=null;_!==null;){if(a=_.alternate,a!==null&&Fs(a)===null){i.child=_;break}a=_.sibling,_.sibling=f,f=_,_=a}Lc(i,!0,f,null,B);break;case"together":Lc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ci(a,i,f){if(a!==null&&(i.dependencies=a.dependencies),ua|=i.lanes,(f&i.childLanes)===0)if(a!==null){if(Nt(a,i,f,!1),(f&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,f=Fe(a,a.pendingProps),i.child=f,f.return=i;a.sibling!==null;)a=a.sibling,f=f.sibling=Fe(a,a.pendingProps),f.return=i;f.sibling=null}return i.child}function su(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&oe(a)))}function Ws(a,i,f){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Gt(i,Xe,a.memoizedState.cache),Xt();break;case 27:case 5:J(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Gt(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(pl(i),i.flags|=128,null):(f&i.child.childLanes)!==0?jc(a,i,f):(pl(i),a=ci(a,i,f),a!==null?a.sibling:null);pl(i);break;case 19:var _=(a.flags&128)!==0;if(m=(f&i.childLanes)!==0,m||(Nt(a,i,f,!1),m=(f&i.childLanes)!==0),_){if(m)return zh(a,i,f);i.flags|=128}if(_=i.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),S(un,un.current),m)break;return null;case 22:case 23:return i.lanes=0,Mh(a,i,f);case 24:Gt(i,Xe,a.memoizedState.cache)}return ci(a,i,f)}function kr(a,i,f){if(a!==null)if(a.memoizedProps!==i.pendingProps)xn=!0;else{if(!su(a,f)&&(i.flags&128)===0)return xn=!1,Ws(a,i,f);xn=(a.flags&131072)!==0}else xn=!1,xe&&(i.flags&1048576)!==0&&nt(i,gr,i.index);switch(i.lanes=0,i.tag){case 16:t:{a=i.pendingProps;var m=i.elementType,_=m._init;if(m=_(m._payload),i.type=m,typeof m=="function")Pi(m)?(a=Zl(m,a),i.tag=1,i=Fr(null,i,m,a,f)):(i.tag=0,i=Hc(null,i,m,a,f));else{if(m!=null){if(_=m.$$typeof,_===_u){i.tag=11,i=_h(null,i,m,a,f);break t}else if(_===Ou){i.tag=14,i=Oh(null,i,m,a,f);break t}}throw i=R(m)||m,Error(o(306,i,""))}}return i;case 0:return Hc(a,i,i.type,i.pendingProps,f);case 1:return m=i.type,_=Zl(m,i.pendingProps),Fr(a,i,m,_,f);case 3:t:{if(at(i,i.stateNode.containerInfo),a===null)throw Error(o(387));var B=i.pendingProps;_=i.memoizedState,m=_.element,Ys(a,i),si(i,B,null,f);var tt=i.memoizedState;if(B=tt.cache,Gt(i,Xe,B),B!==_.cache&&pt(i,[Xe],f,!0),Nn(),B=tt.element,en&&_.isDehydrated)if(_={element:B,isDehydrated:!1,cache:tt.cache},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){i=Nh(a,i,B,f);break t}else if(B!==m){m=Q(Error(o(424)),i),ce(m),i=Nh(a,i,B,f);break t}else for(en&&(mn=S0(i.stateNode.containerInfo),Un=i,xe=!0,$i=null,ei=!0),f=Xa(i,null,B,f),i.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Xt(),B===m){i=ci(a,i,f);break t}jn(a,i,B,f)}i=i.child}return i;case 26:if(Da)return nu(a,i),a===null?(f=ud(i.type,null,i.pendingProps,null))?i.memoizedState=f:xe||(i.stateNode=fd(i.type,i.pendingProps,Wi.current,i)):i.memoizedState=ud(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:if(gn)return J(i),a===null&&gn&&xe&&(m=i.stateNode=Co(i.type,i.pendingProps,Wi.current,Mn.current,!1),Un=i,ei=!0,mn=fs(i.type,m,mn)),jn(a,i,i.pendingProps.children,f),nu(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&xe&&(sd(i.type,i.pendingProps,Mn.current),(_=m=mn)&&(m=td(m,i.type,i.pendingProps,ei),m!==null?(i.stateNode=m,Un=i,mn=Wh(m),ei=!1,_=!0):_=!1),_||et(i)),J(i),_=i.type,B=i.pendingProps,tt=a!==null?a.memoizedProps:null,m=B.children,Ol(_,B)?m=null:tt!==null&&Ol(_,tt)&&(i.flags|=32),i.memoizedState!==null&&(_=cl(a,i,Dn,null,null,f),mi?Pa._currentValue=_:Pa._currentValue2=_),nu(a,i),jn(a,i,m,f),i.child;case 6:return a===null&&xe&&(od(i.pendingProps,Mn.current),(a=f=mn)&&(f=Bu(f,i.pendingProps,ei),f!==null?(i.stateNode=f,Un=i,mn=null,a=!0):a=!1),a||et(i)),null;case 13:return jc(a,i,f);case 4:return at(i,i.stateNode.containerInfo),m=i.pendingProps,a===null?i.child=Ul(i,null,m,f):jn(a,i,m,f),i.child;case 11:return _h(a,i,i.type,i.pendingProps,f);case 7:return jn(a,i,i.pendingProps,f),i.child;case 8:return jn(a,i,i.pendingProps.children,f),i.child;case 12:return jn(a,i,i.pendingProps.children,f),i.child;case 10:return m=i.pendingProps,Gt(i,i.type,m.value),jn(a,i,m.children,f),i.child;case 9:return _=i.type._context,m=i.pendingProps.children,Wt(i),_=ne(_),m=m(_),i.flags|=1,jn(a,i,m,f),i.child;case 14:return Oh(a,i,i.type,i.pendingProps,f);case 15:return Rh(a,i,i.type,i.pendingProps,f);case 19:return zh(a,i,f);case 31:return m=i.pendingProps,f=i.mode,m={mode:m.mode,children:m.children},a===null?(f=ks(m,f),f.ref=i.ref,i.child=f,f.return=i,i=f):(f=Fe(a.child,m),f.ref=i.ref,i.child=f,f.return=i,i=f),i;case 22:return Mh(a,i,f);case 24:return Wt(i),m=ne(Xe),a===null?(_=yc(),_===null&&(_=qe,B=Ue(),_.pooledCache=B,B.refCount++,B!==null&&(_.pooledCacheLanes|=f),_=B),i.memoizedState={parent:m,cache:_},ws(i),Gt(i,Xe,_)):((a.lanes&f)!==0&&(Ys(a,i),si(i,null,null,f),Nn()),_=a.memoizedState,B=i.memoizedState,_.parent!==m?(_={parent:m,cache:m},i.memoizedState=_,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=_),Gt(i,Xe,m)):(m=B.cache,Gt(i,Xe,m),m!==_.cache&&pt(i,[Xe],f,!0))),jn(a,i,i.pendingProps.children,f),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function _a(a){a.flags|=4}function $s(a,i){if(a!==null&&a.child===i.child)return!1;if((i.flags&16)!==0)return!0;for(a=i.child;a!==null;){if((a.flags&13878)!==0||(a.subtreeFlags&13878)!==0)return!0;a=a.sibling}return!1}function ou(a,i,f,m){if(zn)for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)vo(a,f.stateNode);else if(!(f.tag===4||gn&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break;for(;f.sibling===null;){if(f.return===null||f.return===i)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(vi)for(var _=i.child;_!==null;){if(_.tag===5){var B=_.stateNode;f&&m&&(B=mf(B,_.type,_.memoizedProps)),vo(a,B)}else if(_.tag===6)B=_.stateNode,f&&m&&(B=Ih(B,_.memoizedProps)),vo(a,B);else if(_.tag!==4){if(_.tag===22&&_.memoizedState!==null)B=_.child,B!==null&&(B.return=_),ou(a,_,!0,!0);else if(_.child!==null){_.child.return=_,_=_.child;continue}}if(_===i)break;for(;_.sibling===null;){if(_.return===null||_.return===i)return;_=_.return}_.sibling.return=_.return,_=_.sibling}}function wc(a,i,f,m){var _=!1;if(vi)for(var B=i.child;B!==null;){if(B.tag===5){var tt=B.stateNode;f&&m&&(tt=mf(tt,B.type,B.memoizedProps)),gf(a,tt)}else if(B.tag===6)tt=B.stateNode,f&&m&&(tt=Ih(tt,B.memoizedProps)),gf(a,tt);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)_=B.child,_!==null&&(_.return=B),wc(a,B,!0,!0),_=!0;else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===i)break;for(;B.sibling===null;){if(B.return===null||B.return===i)return _;B=B.return}B.sibling.return=B.return,B=B.sibling}return _}function uu(a,i){if(vi&&$s(a,i)){a=i.stateNode;var f=a.containerInfo,m=pf();wc(m,i,!1,!1),a.pendingChildren=m,_a(i),Kh(f,m)}}function to(a,i,f,m){if(zn)a.memoizedProps!==m&&_a(i);else if(vi){var _=a.stateNode,B=a.memoizedProps;if((a=$s(a,i))||B!==m){var tt=Mn.current;B=Qh(_,f,B,m,!a,null),B===_?i.stateNode=_:(us(B,f,m,tt)&&_a(i),i.stateNode=B,a?ou(B,i,!1,!1):_a(i))}else i.stateNode=_}}function cu(a,i,f){if(Ru(i,f)){if(a.flags|=16777216,!Si(i,f))if(ka())a.flags|=8192;else throw Sa=Ro,Oo}else a.flags&=-16777217}function Yc(a,i){if(E0(i)){if(a.flags|=16777216,!Tf(i))if(ka())a.flags|=8192;else throw Sa=Ro,Oo}else a.flags&=-16777217}function eo(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?M():536870912,a.lanes|=i,Ca|=i)}function no(a,i){if(!xe)switch(a.tailMode){case"hidden":i=a.tail;for(var f=null;i!==null;)i.alternate!==null&&(f=i),i=i.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function on(a){var i=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(i)for(var _=a.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=m,a.childLanes=f,i}function g0(a,i,f){var m=i.pendingProps;switch(it(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(i),null;case 1:return on(i),null;case 3:return f=i.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),kt(Xe),P(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Lt(i)?_a(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ft())),uu(a,i),on(i),null;case 26:if(Da){f=i.type;var _=i.memoizedState;return a===null?(_a(i),_!==null?(on(i),Yc(i,_)):(on(i),cu(i,f,m))):_?_!==a.memoizedState?(_a(i),on(i),Yc(i,_)):(on(i),i.flags&=-16777217):(zn?a.memoizedProps!==m&&_a(i):to(a,i,f,m),on(i),cu(i,f,m)),null}case 27:if(gn){if($(i),f=Wi.current,_=i.type,a!==null&&i.stateNode!=null)zn?a.memoizedProps!==m&&_a(i):to(a,i,_,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return on(i),null}a=Mn.current,Lt(i)?gt(i,a):(a=Co(_,m,f,a,!0),i.stateNode=a,_a(i))}return on(i),null}case 5:if($(i),f=i.type,a!==null&&i.stateNode!=null)to(a,i,f,m);else{if(!m){if(i.stateNode===null)throw Error(o(166));return on(i),null}a=Mn.current,Lt(i)?gt(i,a):(_=lf(f,m,Wi.current,a,i),ou(_,i,!1,!1),i.stateNode=_,us(_,f,m,a)&&_a(i))}return on(i),cu(i,i.type,i.pendingProps),null;case 6:if(a&&i.stateNode!=null)f=a.memoizedProps,zn?f!==m&&_a(i):vi&&(f!==m?(i.stateNode=rf(m,Wi.current,Mn.current,i),_a(i)):i.stateNode=a.stateNode);else{if(typeof m!="string"&&i.stateNode===null)throw Error(o(166));if(a=Wi.current,f=Mn.current,Lt(i)){if(!en)throw Error(o(176));if(a=i.stateNode,f=i.memoizedProps,m=null,_=Un,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}Sf(a,f,i,m)||et(i)}else i.stateNode=rf(m,a,f,i)}return on(i),null;case 13:if(m=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_=Lt(i),m!==null&&m.dehydrated!==null){if(a===null){if(!_)throw Error(o(318));if(!en)throw Error(o(344));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));b0(_,i)}else Xt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),_=!1}else _=Ft(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=_),_=!0;if(!_)return i.flags&256?(wi(i),i):(wi(i),null)}if(wi(i),(i.flags&128)!==0)return i.lanes=f,i;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=i.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var B=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(B=m.memoizedState.cachePool.pool),B!==_&&(m.flags|=2048)}return f!==a&&f&&(i.child.flags|=8192),eo(i,i.updateQueue),on(i),null;case 4:return P(),uu(a,i),a===null&&Rl(i.stateNode.containerInfo),on(i),null;case 10:return kt(i.type),on(i),null;case 19:if(z(un),_=i.memoizedState,_===null)return on(i),null;if(m=(i.flags&128)!==0,B=_.rendering,B===null)if(m)no(_,!1);else{if(We!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(B=Fs(a),B!==null){for(i.flags|=128,no(_,!1),a=B.updateQueue,i.updateQueue=a,eo(i,a),i.subtreeFlags=0,a=f,f=i.child;f!==null;)oo(f,a),f=f.sibling;return S(un,un.current&1|2),i.child}a=a.sibling}_.tail!==null&&za()>Dr&&(i.flags|=128,m=!0,no(_,!1),i.lanes=4194304)}else{if(!m)if(a=Fs(B),a!==null){if(i.flags|=128,m=!0,a=a.updateQueue,i.updateQueue=a,eo(i,a),no(_,!0),_.tail===null&&_.tailMode==="hidden"&&!B.alternate&&!xe)return on(i),null}else 2*za()-_.renderingStartTime>Dr&&f!==536870912&&(i.flags|=128,m=!0,no(_,!1),i.lanes=4194304);_.isBackwards?(B.sibling=i.child,i.child=B):(a=_.last,a!==null?a.sibling=B:i.child=B,_.last=B)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=za(),i.sibling=null,a=un.current,S(un,m?a&1|2:a&1),i):(on(i),null);case 22:case 23:return wi(i),Pl(),m=i.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(f&536870912)!==0&&(i.flags&128)===0&&(on(i),i.subtreeFlags&6&&(i.flags|=8192)):on(i),f=i.updateQueue,f!==null&&eo(i,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==f&&(i.flags|=2048),a!==null&&z(tl),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),kt(Xe),on(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function m0(a,i){switch(it(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return kt(Xe),P(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return $(i),null;case 13:if(wi(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Xt()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return z(un),null;case 4:return P(),null;case 10:return kt(i.type),null;case 22:case 23:return wi(i),Pl(),a!==null&&z(tl),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return kt(Xe),null;case 25:return null;default:return null}}function Uh(a,i){switch(it(i),i.tag){case 3:kt(Xe),P();break;case 26:case 27:case 5:$(i);break;case 4:P();break;case 13:wi(i);break;case 19:z(un);break;case 10:kt(i.type);break;case 22:case 23:wi(i),Pl(),a!==null&&z(tl);break;case 24:kt(Xe)}}function Ln(a,i){try{var f=i.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var _=m.next;f=_;do{if((f.tag&a)===a){m=void 0;var B=f.create,tt=f.inst;m=B(),tt.destroy=m}f=f.next}while(f!==_)}}catch(ot){Te(i,i.return,ot)}}function Ya(a,i,f){try{var m=i.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var B=_.next;m=B;do{if((m.tag&a)===a){var tt=m.inst,ot=tt.destroy;if(ot!==void 0){tt.destroy=void 0,_=i;var St=f,zt=ot;try{zt()}catch(Ht){Te(_,St,Ht)}}}m=m.next}while(m!==B)}}catch(Ht){Te(i,i.return,Ht)}}function qc(a){var i=a.updateQueue;if(i!==null){var f=a.stateNode;try{hh(i,f)}catch(m){Te(a,a.return,m)}}}function Vc(a,i,f){f.props=Zl(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){Te(a,i,m)}}function Wr(a,i){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=or(a.stateNode);break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(_){Te(a,i,_)}}function Ia(a,i){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(_){Te(a,i,_)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Te(a,i,_)}else f.current=null}function fu(a){var i=a.type,f=a.memoizedProps,m=a.stateNode;try{ia(m,i,f,a)}catch(_){Te(a,a.return,_)}}function Pc(a,i,f){try{pn(a.stateNode,a.type,f,i,a)}catch(m){Te(a,a.return,m)}}function Jl(a){return a.tag===5||a.tag===3||(Da?a.tag===26:!1)||(gn?a.tag===27&&fr(a.type):!1)||a.tag===4}function ao(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Jl(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(gn&&a.tag===27&&fr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Fl(a,i,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?So(f,a,i):uf(f,a);else if(m!==4&&(gn&&m===27&&fr(a.type)&&(f=a.stateNode,i=null),a=a.child,a!==null))for(Fl(a,i,f),a=a.sibling;a!==null;)Fl(a,i,f),a=a.sibling}function $r(a,i,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?xu(f,a,i):of(f,a);else if(m!==4&&(gn&&m===27&&fr(a.type)&&(f=a.stateNode),a=a.child,a!==null))for($r(a,i,f),a=a.sibling;a!==null;)$r(a,i,f),a=a.sibling}function Xc(a,i,f){a=a.containerInfo;try{zu(a,f)}catch(m){Te(i,i.return,m)}}function vl(a){var i=a.stateNode,f=a.memoizedProps;try{hd(a.type,f,i,a)}catch(m){Te(a,a.return,m)}}function ts(a,i){for(_l(a.containerInfo),Bn=i;Bn!==null;)if(a=Bn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Bn=i;else for(;Bn!==null;){a=Bn;var f=a.alternate;switch(i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&f!==null){i=void 0;var m=a,_=f.memoizedProps;f=f.memoizedState;var B=m.stateNode;try{var tt=Zl(m.type,_,m.elementType===m.type);i=B.getSnapshotBeforeUpdate(tt,f),B.__reactInternalSnapshotBeforeUpdate=i}catch(ot){Te(m,m.return,ot)}}break;case 3:(i&1024)!==0&&zn&&Xh(a.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=a.sibling,i!==null){i.return=a.return,Bn=i;break}Bn=a.return}}function hu(a,i,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:fi(a,f),m&4&&Ln(5,f);break;case 1:if(fi(a,f),m&4)if(a=f.stateNode,i===null)try{a.componentDidMount()}catch(tt){Te(f,f.return,tt)}else{var _=Zl(f.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(_,i,a.__reactInternalSnapshotBeforeUpdate)}catch(tt){Te(f,f.return,tt)}}m&64&&qc(f),m&512&&Wr(f,f.return);break;case 3:if(fi(a,f),m&64&&(a=f.updateQueue,a!==null)){if(i=null,f.child!==null)switch(f.child.tag){case 27:case 5:i=or(f.child.stateNode);break;case 1:i=f.child.stateNode}try{hh(a,i)}catch(tt){Te(f,f.return,tt)}}break;case 27:gn&&i===null&&m&4&&vl(f);case 26:case 5:fi(a,f),i===null&&m&4&&fu(f),m&512&&Wr(f,f.return);break;case 12:fi(a,f);break;case 13:fi(a,f),m&4&&Kc(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=$c.bind(null,f),vf(a,f))));break;case 22:if(m=f.memoizedState!==null||Oi,!m){i=i!==null&&i.memoizedState!==null||nn,_=Oi;var B=nn;Oi=m,(nn=i)&&!B?Za(a,f,(f.subtreeFlags&8772)!==0):fi(a,f),Oi=_,nn=B}break;case 30:break;default:fi(a,f)}}function Qc(a){var i=a.alternate;i!==null&&(a.alternate=null,Qc(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&dn(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function wn(a,i,f){for(f=f.child;f!==null;)du(a,i,f),f=f.sibling}function du(a,i,f){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(ds,f)}catch{}switch(f.tag){case 26:if(Da){nn||Ia(f,i),wn(a,i,f),f.memoizedState?Cf(f.memoizedState):f.stateNode&&Ef(f.stateNode);break}case 27:if(gn){nn||Ia(f,i);var m=ae,_=me;fr(f.type)&&(ae=f.stateNode,me=!1),wn(a,i,f),Af(f.stateNode),ae=m,me=_;break}case 5:nn||Ia(f,i);case 6:if(zn){if(m=ae,_=me,ae=null,wn(a,i,f),ae=m,me=_,ae!==null)if(me)try{ff(ae,f.stateNode)}catch(B){Te(f,i,B)}else try{Nu(ae,f.stateNode)}catch(B){Te(f,i,B)}}else wn(a,i,f);break;case 18:zn&&ae!==null&&(me?rd(ae,f.stateNode):ld(ae,f.stateNode));break;case 4:zn?(m=ae,_=me,ae=f.stateNode.containerInfo,me=!0,wn(a,i,f),ae=m,me=_):(vi&&Xc(f.stateNode,f,pf()),wn(a,i,f));break;case 0:case 11:case 14:case 15:nn||Ya(2,f,i),nn||Ya(4,f,i),wn(a,i,f);break;case 1:nn||(Ia(f,i),m=f.stateNode,typeof m.componentWillUnmount=="function"&&Vc(f,i,m)),wn(a,i,f);break;case 21:wn(a,i,f);break;case 22:nn=(m=nn)||f.memoizedState!==null,wn(a,i,f),nn=m;break;default:wn(a,i,f)}}function Kc(a,i){if(en&&i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{id(a)}catch(f){Te(i,i.return,f)}}function Gh(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new bd),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new bd),i;default:throw Error(o(435,a.tag))}}function Ic(a,i){var f=Gh(a);i.forEach(function(m){var _=tf.bind(null,a,m);f.has(m)||(f.add(m),m.then(_,_))})}function ea(a,i){var f=i.deletions;if(f!==null)for(var m=0;m<f.length;m++){var _=f[m],B=a,tt=i;if(zn){var ot=tt;t:for(;ot!==null;){switch(ot.tag){case 27:if(gn){if(fr(ot.type)){ae=ot.stateNode,me=!1;break t}break}case 5:ae=ot.stateNode,me=!1;break t;case 3:case 4:ae=ot.stateNode.containerInfo,me=!0;break t}ot=ot.return}if(ae===null)throw Error(o(160));du(B,tt,_),ae=null,me=!1}else du(B,tt,_);B=_.alternate,B!==null&&(B.return=null),_.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Bh(i,a),i=i.sibling}function Bh(a,i){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ea(i,a),na(a),m&4&&(Ya(3,a,a.return),Ln(3,a),Ya(5,a,a.return));break;case 1:ea(i,a),na(a),m&512&&(nn||f===null||Ia(f,f.return)),m&64&&Oi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:if(Da){var _=ue;if(ea(i,a),na(a),m&512&&(nn||f===null||Ia(f,f.return)),m&4){m=f!==null?f.memoizedState:null;var B=a.memoizedState;f===null?B===null?a.stateNode===null?a.stateNode=cd(_,a.type,a.memoizedProps,a):Yu(_,a.type,a.stateNode):a.stateNode=wu(_,B,a.memoizedProps):m!==B?(m===null?f.stateNode!==null&&Ef(f.stateNode):Cf(m),B===null?Yu(_,a.type,a.stateNode):wu(_,B,a.memoizedProps)):B===null&&a.stateNode!==null&&Pc(a,a.memoizedProps,f.memoizedProps)}break}case 27:if(gn){ea(i,a),na(a),m&512&&(nn||f===null||Ia(f,f.return)),f!==null&&m&4&&Pc(a,a.memoizedProps,f.memoizedProps);break}case 5:if(ea(i,a),na(a),m&512&&(nn||f===null||Ia(f,f.return)),zn){if(a.flags&32){_=a.stateNode;try{Ci(_)}catch(Ht){Te(a,a.return,Ht)}}m&4&&a.stateNode!=null&&(_=a.memoizedProps,Pc(a,_,f!==null?f.memoizedProps:_)),m&1024&&(Ju=!0)}break;case 6:if(ea(i,a),na(a),m&4&&zn){if(a.stateNode===null)throw Error(o(162));m=a.memoizedProps,f=f!==null?f.memoizedProps:m,_=a.stateNode;try{cf(_,f,m)}catch(Ht){Te(a,a.return,Ht)}}break;case 3:if(Da?(C0(),_=ue,ue=Lu(i.containerInfo),ea(i,a),ue=_):ea(i,a),na(a),m&4){if(zn&&en&&f!==null&&f.memoizedState.isDehydrated)try{ad(i.containerInfo)}catch(Ht){Te(a,a.return,Ht)}if(vi){m=i.containerInfo,f=i.pendingChildren;try{zu(m,f)}catch(Ht){Te(a,a.return,Ht)}}}Ju&&(Ju=!1,Zc(a));break;case 4:Da?(f=ue,ue=Lu(a.stateNode.containerInfo),ea(i,a),na(a),ue=f):(ea(i,a),na(a)),m&4&&vi&&Xc(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:ea(i,a),na(a);break;case 13:ea(i,a),na(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Nr=za()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Ic(a,m)));break;case 22:_=a.memoizedState!==null;var tt=f!==null&&f.memoizedState!==null,ot=Oi,St=nn;if(Oi=ot||_,nn=St||tt,ea(i,a),nn=St,Oi=ot,na(a),m&8192&&(i=a.stateNode,i._visibility=_?i._visibility&-2:i._visibility|1,_&&(f===null||tt||Oi||nn||Yn(a)),zn)){t:if(f=null,zn)for(i=a;;){if(i.tag===5||Da&&i.tag===26){if(f===null){tt=f=i;try{B=tt.stateNode,_?Du(B):df(tt.stateNode,tt.memoizedProps)}catch(Ht){Te(tt,tt.return,Ht)}}}else if(i.tag===6){if(f===null){tt=i;try{var zt=tt.stateNode;_?hf(zt):Ph(zt,tt.memoizedProps)}catch(Ht){Te(tt,tt.return,Ht)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;f===i&&(f=null),i=i.return}f===i&&(f=null),i.sibling.return=i.return,i=i.sibling}}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Ic(a,f))));break;case 19:ea(i,a),na(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Ic(a,m)));break;case 30:break;case 21:break;default:ea(i,a),na(a)}}function na(a){var i=a.flags;if(i&2){try{if(zn){for(var f,m=a.return;m!==null;){if(Jl(m)){f=m;break}m=m.return}if(f==null)throw Error(o(160));switch(f.tag){case 27:if(gn){var _=f.stateNode,B=ao(a);$r(a,B,_);break}case 5:var tt=f.stateNode;f.flags&32&&(Ci(tt),f.flags&=-33);var ot=ao(a);$r(a,ot,tt);break;case 3:case 4:var St=f.stateNode.containerInfo,zt=ao(a);Fl(a,zt,St);break;default:throw Error(o(161))}}}catch(Ht){Te(a,a.return,Ht)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Zc(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Zc(i),i.tag===5&&i.flags&1024&&ur(i.stateNode),a=a.sibling}}function fi(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hu(a,i.alternate,i),i=i.sibling}function Yn(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Ya(4,i,i.return),Yn(i);break;case 1:Ia(i,i.return);var f=i.stateNode;typeof f.componentWillUnmount=="function"&&Vc(i,i.return,f),Yn(i);break;case 27:gn&&Af(i.stateNode);case 26:case 5:Ia(i,i.return),Yn(i);break;case 22:i.memoizedState===null&&Yn(i);break;case 30:Yn(i);break;default:Yn(i)}a=a.sibling}}function Za(a,i,f){for(f=f&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,_=a,B=i,tt=B.flags;switch(B.tag){case 0:case 11:case 15:Za(_,B,f),Ln(4,B);break;case 1:if(Za(_,B,f),m=B,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(zt){Te(m,m.return,zt)}if(m=B,_=m.updateQueue,_!==null){var ot=m.stateNode;try{var St=_.shared.hiddenCallbacks;if(St!==null)for(_.shared.hiddenCallbacks=null,_=0;_<St.length;_++)Lo(St[_],ot)}catch(zt){Te(m,m.return,zt)}}f&&tt&64&&qc(B),Wr(B,B.return);break;case 27:gn&&vl(B);case 26:case 5:Za(_,B,f),f&&m===null&&tt&4&&fu(B),Wr(B,B.return);break;case 12:Za(_,B,f);break;case 13:Za(_,B,f),f&&tt&4&&Kc(_,B);break;case 22:B.memoizedState===null&&Za(_,B,f),Wr(B,B.return);break;case 30:break;default:Za(_,B,f)}i=i.sibling}}function da(a,i){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&rn(f))}function yl(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&rn(a))}function qa(a,i,f,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)io(a,i,f,m),i=i.sibling}function io(a,i,f,m){var _=i.flags;switch(i.tag){case 0:case 11:case 15:qa(a,i,f,m),_&2048&&Ln(9,i);break;case 1:qa(a,i,f,m);break;case 3:qa(a,i,f,m),_&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&rn(a)));break;case 12:if(_&2048){qa(a,i,f,m),a=i.stateNode;try{var B=i.memoizedProps,tt=B.id,ot=B.onPostCommit;typeof ot=="function"&&ot(tt,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(St){Te(i,i.return,St)}}else qa(a,i,f,m);break;case 13:qa(a,i,f,m);break;case 23:break;case 22:B=i.stateNode,tt=i.alternate,i.memoizedState!==null?B._visibility&2?qa(a,i,f,m):kl(a,i):B._visibility&2?qa(a,i,f,m):(B._visibility|=2,Yi(a,i,f,m,(i.subtreeFlags&10256)!==0)),_&2048&&da(tt,i);break;case 24:qa(a,i,f,m),_&2048&&yl(i.alternate,i);break;default:qa(a,i,f,m)}}function Yi(a,i,f,m,_){for(_=_&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var B=a,tt=i,ot=f,St=m,zt=tt.flags;switch(tt.tag){case 0:case 11:case 15:Yi(B,tt,ot,St,_),Ln(8,tt);break;case 23:break;case 22:var Ht=tt.stateNode;tt.memoizedState!==null?Ht._visibility&2?Yi(B,tt,ot,St,_):kl(B,tt):(Ht._visibility|=2,Yi(B,tt,ot,St,_)),_&&zt&2048&&da(tt.alternate,tt);break;case 24:Yi(B,tt,ot,St,_),_&&zt&2048&&yl(tt.alternate,tt);break;default:Yi(B,tt,ot,St,_)}i=i.sibling}}function kl(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var f=a,m=i,_=m.flags;switch(m.tag){case 22:kl(f,m),_&2048&&da(m.alternate,m);break;case 24:kl(f,m),_&2048&&yl(m.alternate,m);break;default:kl(f,m)}i=i.sibling}}function Oa(a){if(a.subtreeFlags&pe)for(a=a.child;a!==null;)Jc(a),a=a.sibling}function Jc(a){switch(a.tag){case 26:Oa(a),a.flags&pe&&(a.memoizedState!==null?bo(ue,a.memoizedState,a.memoizedProps):je(a.type,a.memoizedProps));break;case 5:Oa(a),a.flags&pe&&je(a.type,a.memoizedProps);break;case 3:case 4:if(Da){var i=ue;ue=Lu(a.stateNode.containerInfo),Oa(a),ue=i}else Oa(a);break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=pe,pe=16777216,Oa(a),pe=i):Oa(a));break;default:Oa(a)}}function lo(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function hi(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var m=i[f];Bn=m,pu(m,a)}lo(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Hh(a),a=a.sibling}function Hh(a){switch(a.tag){case 0:case 11:case 15:hi(a),a.flags&2048&&Ya(9,a,a.return);break;case 3:hi(a);break;case 12:hi(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Jn(a)):hi(a);break;default:hi(a)}}function Jn(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var m=i[f];Bn=m,pu(m,a)}lo(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Ya(8,i,i.return),Jn(i);break;case 22:f=i.stateNode,f._visibility&2&&(f._visibility&=-3,Jn(i));break;default:Jn(i)}a=a.sibling}}function pu(a,i){for(;Bn!==null;){var f=Bn;switch(f.tag){case 0:case 11:case 15:Ya(8,f,i);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:rn(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,Bn=m;else t:for(f=a;Bn!==null;){m=Bn;var _=m.sibling,B=m.return;if(Qc(m),m===f){Bn=null;break t}if(_!==null){_.return=B,Bn=_;break t}Bn=B}}}function Ja(a){var i=Va(a);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(o(364));return i}if(a=v0(a),a===null)throw Error(o(362));return a.stateNode.current}function gu(a,i){var f=a.tag;switch(i.$$typeof){case kn:if(a.type===i.value)return!0;break;case ai:t:{for(i=i.value,a=[a,0],f=0;f<a.length;){var m=a[f++],_=m.tag,B=a[f++],tt=i[B];if(_!==5&&_!==26&&_!==27||!cr(m)){for(;tt!=null&&gu(m,tt);)B++,tt=i[B];if(B===i.length){i=!0;break t}else for(m=m.child;m!==null;)a.push(m,B),m=m.sibling}}i=!1}return i;case el:if((f===5||f===26||f===27)&&qh(a.stateNode,i.value))return!0;break;case Qa:if((f===5||f===6||f===26||f===27)&&(a=sf(a),a!==null&&0<=a.indexOf(i.value)))return!0;break;case vs:if((f===5||f===26||f===27)&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function es(a){switch(a.$$typeof){case kn:return"<"+(R(a.value)||"Unknown")+">";case ai:return":has("+(es(a)||"")+")";case el:return'[role="'+a.value+'"]';case Qa:return'"'+a.value+'"';case vs:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function Sl(a,i){var f=[];a=[a,0];for(var m=0;m<a.length;){var _=a[m++],B=_.tag,tt=a[m++],ot=i[tt];if(B!==5&&B!==26&&B!==27||!cr(_)){for(;ot!=null&&gu(_,ot);)tt++,ot=i[tt];if(tt===i.length)f.push(_);else for(_=_.child;_!==null;)a.push(_,tt),_=_.sibling}}return f}function ro(a,i){if(!bi)throw Error(o(363));a=Ja(a),a=Sl(a,i),i=[],a=Array.from(a);for(var f=0;f<a.length;){var m=a[f++],_=m.tag;if(_===5||_===26||_===27)cr(m)||i.push(m.stateNode);else for(m=m.child;m!==null;)a.push(m),m=m.sibling}return i}function pa(){if((ge&2)!==0&&ye!==0)return ye&-ye;if(te.T!==null){var a=Ai;return a!==0?a:ri()}return Ml()}function mu(){Kn===0&&(Kn=(ye&536870912)===0||xe?j():536870912);var a=Ba.current;return a!==null&&(a.flags|=32),Kn}function ga(a,i,f){(a===qe&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)&&(qn(a,0),Fa(a,ye,Kn,!1)),T(a,f),((ge&2)===0||a!==qe)&&(a===qe&&((ge&2)===0&&($e|=f),We===4&&Fa(a,ye,Kn,!1)),Je(a))}function Ra(a,i,f){if((ge&6)!==0)throw Error(o(327));var m=!f&&(i&124)===0&&(i&a.expiredLanes)===0||G(a,i),_=m?jh(a,i):so(a,i,!0),B=m;do{if(_===0){nl&&!m&&Fa(a,i,0,!1);break}else{if(f=a.current.alternate,B&&!ns(f)){_=so(a,i,!1),B=!1;continue}if(_===2){if(B=i,a.errorRecoveryDisabledLanes&B)var tt=0;else tt=a.pendingLanes&-536870913,tt=tt!==0?tt:tt&536870912?536870912:0;if(tt!==0){i=tt;t:{var ot=a;_=xr;var St=en&&ot.current.memoizedState.isDehydrated;if(St&&(qn(ot,tt).flags|=256),tt=so(ot,tt,!1),tt!==2){if(Fu&&!St){ot.errorRecoveryDisabledLanes|=B,$e|=B,_=4;break t}B=Wn,Wn=_,B!==null&&(Wn===null?Wn=B:Wn.push.apply(Wn,B))}_=tt}if(B=!1,_!==2)continue}}if(_===1){qn(a,0),Fa(a,i,0,!0);break}t:{switch(m=a,B=_,B){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Fa(m,i,Kn,!Ri);break t;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(_=Nr+300-za(),10<_)){if(Fa(m,i,Kn,!Ri),Y(m,0,!0)!==0)break t;m.timeoutHandle=Yh(Wl.bind(null,m,f,Wn,$n,ku,i,Kn,$e,Ca,Ri,B,2,-0,0),_);break t}Wl(m,f,Wn,$n,ku,i,Kn,$e,Ca,Ri,B,0,-0,0)}}break}while(!0);Je(a)}function Wl(a,i,f,m,_,B,tt,ot,St,zt,Ht,Pt,Qt,he){if(a.timeoutHandle=gi,Pt=i.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(fe(),Jc(i),Pt=En(),Pt!==null)){a.cancelPendingCommit=Pt(Vi.bind(null,a,i,B,f,m,_,tt,ot,St,Ht,1,Qt,he)),Fa(a,B,tt,!zt);return}Vi(a,i,B,f,m,_,tt,ot,St)}function ns(a){for(var i=a;;){var f=i.tag;if((f===0||f===11||f===15)&&i.flags&16384&&(f=i.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var _=f[m],B=_.getSnapshot;_=_.value;try{if(!ra(B(),_))return!1}catch{return!1}}if(f=i.child,i.subtreeFlags&16384&&f!==null)f.return=i,i=f;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fa(a,i,f,m){i&=~Mi,i&=~$e,a.suspendedLanes|=i,a.pingedLanes&=~i,m&&(a.warmLanes|=i),m=a.expirationTimes;for(var _=i;0<_;){var B=31-la(_),tt=1<<B;m[B]=-1,_&=~tt}f!==0&&U(a,f,i)}function as(){return(ge&6)===0?(ct(0),!1):!0}function ma(){if(ie!==null){if(Oe===0)var a=ie.return;else a=ie,Xn=Dl=null,Hi(a),ba=null,_r=0,a=ie;for(;a!==null;)Uh(a.alternate,a),a=a.return;ie=null}}function qn(a,i){var f=a.timeoutHandle;f!==gi&&(a.timeoutHandle=gi,cs(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),ma(),qe=a,ie=f=Fe(a.current,null),ye=i,Oe=0,Ke=null,Ri=!1,nl=G(a,i),Fu=!1,Ca=Kn=Mi=$e=ua=We=0,Wn=xr=null,ku=!1,(i&8)!==0&&(i|=i&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=i;0<m;){var _=31-la(m),B=1<<_;i|=a[_],m&=~B}return Ka=i,Vr(),f}function qi(a,i){ee=null,te.H=Qn,i===yr||i===Sr?(i=fh(),Oe=3):i===Oo?(i=fh(),Oe=4):Oe=i===Bf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ke=i,ie===null&&(We=1,Jr(a,Q(i,a.current)))}function ka(){var a=Ba.current;return a===null?!0:(ye&4194048)===ye?oa===null:(ye&62914560)===ye||(ye&536870912)!==0?a===oa:!1}function Wa(){var a=te.H;return te.H=Qn,a===null?Qn:a}function di(){var a=te.A;return te.A=Le,a}function vu(){We=4,Ri||(ye&4194048)!==ye&&Ba.current!==null||(nl=!0),(ua&134217727)===0&&($e&134217727)===0||qe===null||Fa(qe,ye,Kn,!1)}function so(a,i,f){var m=ge;ge|=2;var _=Wa(),B=di();(qe!==a||ye!==i)&&($n=null,qn(a,i)),i=!1;var tt=We;t:do try{if(Oe!==0&&ie!==null){var ot=ie,St=Ke;switch(Oe){case 8:ma(),tt=6;break t;case 3:case 2:case 9:case 6:Ba.current===null&&(i=!0);var zt=Oe;if(Oe=0,Ke=null,Ma(a,ot,St,zt),f&&nl){tt=0;break t}break;default:zt=Oe,Oe=0,Ke=null,Ma(a,ot,St,zt)}}Fc(),tt=We;break}catch(Ht){qi(a,Ht)}while(!0);return i&&a.shellSuspendCounter++,Xn=Dl=null,ge=m,te.H=_,te.A=B,ie===null&&(qe=null,ye=0,Vr()),tt}function Fc(){for(;ie!==null;)Pe(ie)}function jh(a,i){var f=ge;ge|=2;var m=Wa(),_=di();qe!==a||ye!==i?($n=null,Dr=za()+500,qn(a,i)):nl=G(a,i);t:do try{if(Oe!==0&&ie!==null){i=ie;var B=Ke;e:switch(Oe){case 1:Oe=0,Ke=null,Ma(a,i,B,1);break;case 2:case 9:if(sl(B)){Oe=0,Ke=null,Ce(i);break}i=function(){Oe!==2&&Oe!==9||qe!==a||(Oe=7),Je(a)},B.then(i,i);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:sl(B)?(Oe=0,Ke=null,Ce(i)):(Oe=0,Ke=null,Ma(a,i,B,7));break;case 5:var tt=null;switch(ie.tag){case 26:tt=ie.memoizedState;case 5:case 27:var ot=ie,St=ot.type,zt=ot.pendingProps;if(tt?Tf(tt):Si(St,zt)){Oe=0,Ke=null;var Ht=ot.sibling;if(Ht!==null)ie=Ht;else{var Pt=ot.return;Pt!==null?(ie=Pt,aa(Pt)):ie=null}break e}}Oe=0,Ke=null,Ma(a,i,B,5);break;case 6:Oe=0,Ke=null,Ma(a,i,B,6);break;case 8:ma(),We=6;break t;default:throw Error(o(462))}}Vn();break}catch(Qt){qi(a,Qt)}while(!0);return Xn=Dl=null,te.H=m,te.A=_,ge=f,ie!==null?0:(qe=null,ye=0,Vr(),We)}function Vn(){for(;ie!==null&&!Vu();)Pe(ie)}function Pe(a){var i=kr(a.alternate,a,Ka);a.memoizedProps=a.pendingProps,i===null?aa(a):ie=i}function Ce(a){var i=a,f=i.alternate;switch(i.tag){case 15:case 0:i=au(f,i,i.pendingProps,i.type,void 0,ye);break;case 11:i=au(f,i,i.pendingProps,i.type.render,i.ref,ye);break;case 5:Hi(i);default:Uh(f,i),i=ie=oo(i,Ka),i=kr(f,i,Ka)}a.memoizedProps=a.pendingProps,i===null?aa(a):ie=i}function Ma(a,i,f,m){Xn=Dl=null,Hi(i),ba=null,_r=0;var _=i.return;try{if(p0(a,_,i,f,ye)){We=1,Jr(a,Q(f,a.current)),ie=null;return}}catch(B){if(_!==null)throw ie=_,B;We=1,Jr(a,Q(f,a.current)),ie=null;return}i.flags&32768?(xe||m===1?a=!0:nl||(ye&536870912)!==0?a=!1:(Ri=a=!0,(m===2||m===9||m===3||m===6)&&(m=Ba.current,m!==null&&m.tag===13&&(m.flags|=16384))),yu(i,a)):aa(i)}function aa(a){var i=a;do{if((i.flags&32768)!==0){yu(i,Ri);return}a=i.return;var f=g0(i.alternate,i,Ka);if(f!==null){ie=f;return}if(i=i.sibling,i!==null){ie=i;return}ie=i=a}while(i!==null);We===0&&(We=5)}function yu(a,i){do{var f=m0(a.alternate,a);if(f!==null){f.flags&=32767,ie=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!i&&(a=a.sibling,a!==null)){ie=a;return}ie=a=f}while(a!==null);We=6,ie=null}function Vi(a,i,f,m,_,B,tt,ot,St){a.cancelPendingCommit=null;do tr();while(Ge!==0);if((ge&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(B=i.lanes|i.childLanes,B|=Zu,y(a,f,B,tt,ot,St),a===qe&&(ie=qe=null,ye=0),zr=i,il=a,ys=f,xi=B,Ss=_,Wu=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,ls(Of,function(){return is(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=te.T,te.T=null,_=yi(),Cn(2),tt=ge,ge|=4;try{ts(a,i,f)}finally{ge=tt,Cn(_),te.T=m}}Ge=1,kc(),Wc(),$l()}}function kc(){if(Ge===1){Ge=0;var a=il,i=zr,f=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||f){f=te.T,te.T=null;var m=yi();Cn(2);var _=ge;ge|=4;try{Bh(i,a),mo(a.containerInfo)}finally{ge=_,Cn(m),te.T=f}}a.current=i,Ge=2}}function Wc(){if(Ge===2){Ge=0;var a=il,i=zr,f=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||f){f=te.T,te.T=null;var m=yi();Cn(2);var _=ge;ge|=4;try{hu(a,i.alternate,i)}finally{ge=_,Cn(m),te.T=f}}Ge=3}}function $l(){if(Ge===4||Ge===3){Ge=0,gd();var a=il,i=zr,f=ys,m=Wu;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ge=5:(Ge=0,zr=il=null,bl(a,a.pendingLanes));var _=a.pendingLanes;if(_===0&&(al=null),I(f),i=i.stateNode,va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(ds,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=te.T,_=yi(),Cn(2),te.T=null;try{for(var B=a.onRecoverableError,tt=0;tt<m.length;tt++){var ot=m[tt];B(ot.value,{componentStack:ot.stack})}}finally{te.T=i,Cn(_)}}(ys&3)!==0&&tr(),Je(a),_=a.pendingLanes,(f&4194090)!==0&&(_&42)!==0?a===$u?Ni++:(Ni=0,$u=a):Ni=0,ct(0)}}function bl(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,rn(i)))}function tr(a){return kc(),Wc(),$l(),is()}function is(){if(Ge!==5)return!1;var a=il,i=xi;xi=0;var f=I(ys),m=32>f?32:f;f=te.T;var _=yi();try{Cn(m),te.T=null,m=Ss,Ss=null;var B=il,tt=ys;if(Ge=0,zr=il=null,ys=0,(ge&6)!==0)throw Error(o(331));var ot=ge;if(ge|=4,Hh(B.current),io(B,B.current,tt,m),ge=ot,ct(0,!1),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(ds,B)}catch{}return!0}finally{Cn(_),te.T=f,bl(a,i)}}function Su(a,i,f){i=Q(f,i),i=Gc(a.stateNode,i,2),a=Bi(a,i,2),a!==null&&(T(a,2),Je(a))}function Te(a,i,f){if(a.tag===3)Su(a,a,f);else for(;i!==null;){if(i.tag===3){Su(i,a,f);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(al===null||!al.has(m))){a=Q(f,a),f=Ah(2),m=Bi(i,f,2),m!==null&&(Bc(f,m,i,a),T(m,2),Je(m));break}}i=i.return}}function $a(a,i,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Gl;var _=new Set;m.set(i,_)}else _=m.get(i),_===void 0&&(_=new Set,m.set(i,_));_.has(f)||(Fu=!0,_.add(f),a=Cl.bind(null,a,i,f),i.then(a,a))}function Cl(a,i,f){var m=a.pingCache;m!==null&&m.delete(i),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,qe===a&&(ye&f)===f&&(We===4||We===3&&(ye&62914560)===ye&&300>za()-Nr?(ge&2)===0&&qn(a,0):Mi|=f,Ca===ye&&(Ca=0)),Je(a)}function pi(a,i){i===0&&(i=M()),a=Vl(a,i),a!==null&&(T(a,i),Je(a))}function $c(a){var i=a.memoizedState,f=0;i!==null&&(f=i.retryLane),pi(a,f)}function tf(a,i){var f=0;switch(a.tag){case 13:var m=a.stateNode,_=a.memoizedState;_!==null&&(f=_.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(o(314))}m!==null&&m.delete(i),pi(a,f)}function ls(a,i){return Ao(a,i)}function bu(a,i,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Fe(a,i){var f=a.alternate;return f===null?(f=s(a.tag,i,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=i,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,i=a.dependencies,f.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function oo(a,i){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,i=f.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function uo(a,i,f,m,_,B){var tt=0;if(m=a,typeof a=="function")Pi(a)&&(tt=1);else if(typeof a=="string")tt=Da&&gn?bf(a,f,Mn.current)?26:hs(a)?27:5:Da?bf(a,f,Mn.current)?26:5:gn&&hs(a)?27:5;else t:switch(a){case Tl:return a=s(31,f,i,_),a.elementType=Tl,a.lanes=B,a;case ir:return er(f.children,_,B,i);case lr:tt=8,_|=24;break;case co:return a=s(12,f,i,_|2),a.elementType=co,a.lanes=B,a;case Ki:return a=s(13,f,i,_),a.elementType=Ki,a.lanes=B,a;case Ii:return a=s(19,f,i,_),a.elementType=Ii,a.lanes=B,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Au:case Qi:tt=10;break t;case fo:tt=9;break t;case _u:tt=11;break t;case Ou:tt=14;break t;case Zi:tt=16,m=null;break t}tt=29,f=Error(o(130,a===null?"null":typeof a,"")),m=null}return i=s(tt,f,i,_),i.elementType=a,i.type=m,i.lanes=B,i}function er(a,i,f,m){return a=s(7,a,m,i),a.lanes=f,a}function ef(a,i,f){return a=s(6,a,null,i),a.lanes=f,a}function nf(a,i,f){return i=s(4,a.children!==null?a.children:[],a.key,i),i.lanes=f,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}function bn(a,i,f,m,_,B,tt,ot){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gi,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=A(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A(0),this.hiddenUpdates=A(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=B,this.onRecoverableError=tt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function Cu(a,i,f,m,_,B,tt,ot,St,zt,Ht,Pt){return a=new bn(a,i,f,tt,ot,St,zt,Pt),i=1,B===!0&&(i|=24),B=s(3,null,null,i),a.current=B,B.stateNode=a,i=Ue(),i.refCount++,a.pooledCache=i,i.refCount++,B.memoizedState={element:m,isDehydrated:f,cache:i},ws(B),a}function rs(a){return a?(a=xl,a):xl}function ss(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=g(i),a=a!==null?p(a):null,a===null?null:or(a.stateNode)}function Eu(a,i,f,m,_,B){_=rs(_),m.context===null?m.context=_:m.pendingContext=_,m=Gi(i),m.payload={element:f},B=B===void 0?null:B,B!==null&&(m.callback=B),f=Bi(a,m,i),f!==null&&(ga(f,a,i),ja(f,a,i))}function nr(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<i?f:i}}function El(a,i){nr(a,i),(a=a.alternate)&&nr(a,i)}var be={},Lh=a0(),xa=u3(),Tu=Object.assign,ar=Symbol.for("react.element"),os=Symbol.for("react.transitional.element"),Xi=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),lr=Symbol.for("react.strict_mode"),co=Symbol.for("react.profiler"),Au=Symbol.for("react.provider"),fo=Symbol.for("react.consumer"),Qi=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),Ki=Symbol.for("react.suspense"),Ii=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),Tl=Symbol.for("react.activity"),ho=Symbol.for("react.memo_cache_sentinel"),po=Symbol.iterator,go=Symbol.for("react.client.reference"),rr=Array.isArray,te=Lh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sr=n.rendererVersion,wh=n.rendererPackageName,Ji=n.extraDevToolsConfig,or=n.getPublicInstance,af=n.getRootHostContext,Al=n.getChildHostContext,_l=n.prepareForCommit,mo=n.resetAfterCommit,lf=n.createInstance;n.cloneMutableInstance;var vo=n.appendInitialChild,us=n.finalizeInitialChildren,Ol=n.shouldSetTextContent,rf=n.createTextInstance;n.cloneMutableTextInstance;var Yh=n.scheduleTimeout,cs=n.cancelTimeout,gi=n.noTimeout,mi=n.isPrimaryRenderer;n.warnsIfNotActing;var zn=n.supportsMutation,vi=n.supportsPersistence,en=n.supportsHydration,Va=n.getInstanceFromNode;n.beforeActiveInstanceBlur;var Rl=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var Cn=n.setCurrentUpdatePriority,yi=n.getCurrentUpdatePriority,Ml=n.resolveUpdatePriority;n.trackSchedulerEvent,n.resolveEventType,n.resolveEventTimeStamp;var Na=n.shouldAttemptEagerTransition,dn=n.detachDeletedInstance;n.requestPostPaintCallback;var Ru=n.maySuspendCommit,Si=n.preloadInstance,fe=n.startSuspendingCommit,je=n.suspendInstance;n.suspendOnActiveViewTransition;var En=n.waitForCommitToBeReady,Fi=n.NotPendingTransition,Pa=n.HostTransitionContext,ur=n.resetFormInstance;n.bindToConsole;var Mu=n.supportsMicrotasks,yo=n.scheduleMicrotask,bi=n.supportsTestSelectors,v0=n.findFiberRoot,fn=n.getBoundingRect,sf=n.getTextContent,cr=n.isHiddenSubtree,qh=n.matchAccessibilityRole,Vh=n.setFocusIfFocusable,y0=n.setupIntersectionObserver,of=n.appendChild,uf=n.appendChildToContainer,cf=n.commitTextUpdate,ia=n.commitMount,pn=n.commitUpdate,xu=n.insertBefore,So=n.insertInContainerBefore,Nu=n.removeChild,ff=n.removeChildFromContainer,Ci=n.resetTextContent,Du=n.hideInstance,hf=n.hideTextInstance,df=n.unhideInstance,Ph=n.unhideTextInstance;n.cancelViewTransitionName,n.cancelRootViewTransitionName,n.restoreRootViewTransitionName,n.cloneRootViewTransitionContainer,n.removeRootViewTransitionClone,n.measureClonedInstance,n.hasInstanceChanged,n.hasInstanceAffectedParent,n.startViewTransition,n.startGestureTransition,n.stopGestureTransition,n.getCurrentGestureOffset,n.subscribeToGestureDirection,n.createViewTransitionInstance;var Xh=n.clearContainer;n.createFragmentInstance,n.updateFragmentInstanceFiber,n.commitNewChildToFragmentInstance,n.deleteChildFromFragmentInstance;var Qh=n.cloneInstance,pf=n.createContainerChildSet,gf=n.appendChildToContainerChildSet,Kh=n.finalizeContainerChildren,zu=n.replaceContainerChildren,mf=n.cloneHiddenInstance,Ih=n.cloneHiddenTextInstance,Uu=n.isSuspenseInstancePending,Gu=n.isSuspenseInstanceFallback,Zh=n.getSuspenseInstanceFallbackErrorDetails,vf=n.registerSuspenseInstanceRetry,Jh=n.canHydrateFormStateMarker,Fh=n.isFormStateMarkerMatching,yf=n.getNextHydratableSibling,kh=n.getNextHydratableSiblingAfterSingleton,Wh=n.getFirstHydratableChild,S0=n.getFirstHydratableChildWithinContainer,$h=n.getFirstHydratableChildWithinSuspenseInstance,fs=n.getFirstHydratableChildWithinSingleton,td=n.canHydrateInstance,Bu=n.canHydrateTextInstance,Hu=n.canHydrateSuspenseInstance,ed=n.hydrateInstance,Sf=n.hydrateTextInstance,b0=n.hydrateSuspenseInstance,nd=n.getNextHydratableInstanceAfterSuspenseInstance,ad=n.commitHydratedContainer,id=n.commitHydratedSuspenseInstance,ld=n.clearSuspenseBoundary,rd=n.clearSuspenseBoundaryFromContainer,ju=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var sd=n.validateHydratableInstance,od=n.validateHydratableTextInstance,Da=n.supportsResources,bf=n.isHostHoistableType,Lu=n.getHoistableRoot,ud=n.getResource,wu=n.acquireResource,Cf=n.releaseResource,cd=n.hydrateHoistable,Yu=n.mountHoistable,Ef=n.unmountHoistable,fd=n.createHoistableInstance,C0=n.prepareToCommitHoistables,E0=n.mayResourceSuspendCommit,Tf=n.preloadResource,bo=n.suspendResource,gn=n.supportsSingletons,Co=n.resolveSingletonInstance,hd=n.acquireSingletonInstance,Af=n.releaseSingletonInstance,hs=n.isHostSingletonType,fr=n.isSingletonScope,Eo=[],hr=-1,xl={},la=Math.clz32?Math.clz32:H,dd=Math.log,pd=Math.LN2,Ei=256,To=4194304,Ao=xa.unstable_scheduleCallback,qu=xa.unstable_cancelCallback,Vu=xa.unstable_shouldYield,gd=xa.unstable_requestPaint,za=xa.unstable_now,_f=xa.unstable_ImmediatePriority,md=xa.unstable_UserBlockingPriority,Of=xa.unstable_NormalPriority,Rf=xa.unstable_IdlePriority,Tn=xa.log,Pn=xa.unstable_setDisableYieldValue,ds=null,va=null,Pu,Mf,dr=!1,xf=new WeakMap,ki=[],pr=0,Xu=null,gr=0,ya=[],Ua=0,Nl=null,Ti=1,ti="",Mn=E(null),mr=E(null),Wi=E(null),ps=E(null),Un=null,mn=null,xe=!1,$i=null,ei=!1,ni=Error(o(519)),ra=typeof Object.is=="function"?Object.is:At,Qu=E(null),Dl=null,Xn=null,Nf=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){i.aborted=!0,a.forEach(function(f){return f()})}},vd=xa.unstable_scheduleCallback,Ku=xa.unstable_NormalPriority,Xe={$$typeof:Qi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ye=null,gs=null,Df=!1,_o=!1,vr=!1,Ga=0,ms=null,Iu=0,Ai=0,sa=null,zf=te.S;te.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ta(a,i),zf!==null&&zf(a,i)};var tl=E(null),yd=Object.prototype.hasOwnProperty,yr=Error(o(460)),Oo=Error(o(474)),Sr=Error(o(542)),Ro={then:function(){}},Sa=null,De=[],zl=0,Zu=0,ke=!1,Uf=!1,br=E(null),Mo=E(0),ze=0,ee=null,Ee=null,vn=null,xo=!1,Cr=!1,Er=!1,Tr=0,Gn=0,Fn=null,Sd=0,Qn={readContext:ne,use:Po,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn},Gf={readContext:ne,use:Po,useCallback:function(a,i){return Rn().memoizedState=[a,i===void 0?null:i],a},useContext:ne,useEffect:xc,useImperativeHandle:function(a,i,f){f=f!=null?f.concat([a]):null,ji(4194308,4,ui.bind(null,i,a),f)},useLayoutEffect:function(a,i){return ji(4194308,4,a,i)},useInsertionEffect:function(a,i){ji(4,2,a,i)},useMemo:function(a,i){var f=Rn();i=i===void 0?null:i;var m=a();if(Er){Z(!0);try{a()}finally{Z(!1)}}return f.memoizedState=[m,i],m},useReducer:function(a,i,f){var m=Rn();if(f!==void 0){var _=f(i);if(Er){Z(!0);try{f(i)}finally{Z(!1)}}}else _=i;return m.memoizedState=m.baseState=_,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:_},m.queue=a,a=a.dispatch=Ks.bind(null,ee,a),[m.memoizedState,a]},useRef:function(a){var i=Rn();return a={current:a},i.memoizedState=a},useState:function(a){a=Vs(a);var i=a.queue,f=yh.bind(null,ee,i);return i.dispatch=f,[a.memoizedState,f]},useDebugValue:Kl,useDeferredValue:function(a,i){var f=Rn();return Zr(f,a,i)},useTransition:function(){var a=Vs(!1);return a=Xs.bind(null,ee,a.queue,!0,!1),Rn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,f){var m=ee,_=Rn();if(xe){if(f===void 0)throw Error(o(407));f=f()}else{if(f=i(),qe===null)throw Error(o(349));(ye&124)!==0||Qo(m,i,f)}_.memoizedState=f;var B={value:f,getSnapshot:i};return _.queue=B,xc(qs.bind(null,m,B,a),[a]),m.flags|=2048,ha(9,Kr(),Ec.bind(null,m,B,f,i),null),f},useId:function(){var a=Rn(),i=qe.identifierPrefix;if(xe){var f=ti,m=Ti;f=(m&~(1<<32-la(m)-1)).toString(32)+f,i=""+i+"R"+f,f=Tr++,0<f&&(i+="H"+f.toString(32)),i+=""}else f=Sd++,i=""+i+"r"+f.toString(32)+"";return a.memoizedState=i},useHostTransitionStatus:ko,useFormState:Mc,useActionState:Mc,useOptimistic:function(a){var i=Rn();i.memoizedState=i.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=f,i=Is.bind(null,ee,!0,f),f.dispatch=i,[a,i]},useMemoCache:Qr,useCacheRefresh:function(){return Rn().memoizedState=Wo.bind(null,ee)}},_i={readContext:ne,use:Po,useCallback:Li,useContext:ne,useEffect:Zo,useImperativeHandle:Jo,useInsertionEffect:Nc,useLayoutEffect:Ir,useMemo:Fo,useReducer:wa,useRef:Io,useState:function(){return wa(La)},useDebugValue:Kl,useDeferredValue:function(a,i){var f=Sn();return Dc(f,Ee.memoizedState,a,i)},useTransition:function(){var a=wa(La)[0],i=Sn().memoizedState;return[typeof a=="boolean"?a:Xr(a),i]},useSyncExternalStore:ph,useId:ta,useHostTransitionStatus:ko,useFormState:Ko,useActionState:Ko,useOptimistic:function(a,i){var f=Sn();return Tc(f,Ee,a,i)},useMemoCache:Qr,useCacheRefresh:hl},Ar={readContext:ne,use:Po,useCallback:Li,useContext:ne,useEffect:Zo,useImperativeHandle:Jo,useInsertionEffect:Nc,useLayoutEffect:Ir,useMemo:Fo,useReducer:Xo,useRef:Io,useState:function(){return Xo(La)},useDebugValue:Kl,useDeferredValue:function(a,i){var f=Sn();return Ee===null?Zr(f,a,i):Dc(f,Ee.memoizedState,a,i)},useTransition:function(){var a=Xo(La)[0],i=Sn().memoizedState;return[typeof a=="boolean"?a:Xr(a),i]},useSyncExternalStore:ph,useId:ta,useHostTransitionStatus:ko,useFormState:Ps,useActionState:Ps,useOptimistic:function(a,i){var f=Sn();return Ee!==null?Tc(f,Ee,a,i):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Qr,useCacheRefresh:hl},ba=null,_r=0,Ul=Sh(!0),Xa=Sh(!1),Ba=E(null),oa=null,un=E(0),Or={enqueueSetState:function(a,i,f){a=a._reactInternals;var m=pa(),_=Gi(m);_.payload=i,f!=null&&(_.callback=f),i=Bi(a,_,m),i!==null&&(ga(i,a,m),ja(i,a,m))},enqueueReplaceState:function(a,i,f){a=a._reactInternals;var m=pa(),_=Gi(m);_.tag=1,_.payload=i,f!=null&&(_.callback=f),i=Bi(a,_,m),i!==null&&(ga(i,a,m),ja(i,a,m))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var f=pa(),m=Gi(f);m.tag=2,i!=null&&(m.callback=i),i=Bi(a,m,f),i!==null&&(ga(i,a,f),ja(i,a,f))}},Rr=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Bf=Error(o(461)),xn=!1,Mr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Oi=!1,nn=!1,Ju=!1,bd=typeof WeakSet=="function"?WeakSet:Set,Bn=null,ae=null,me=!1,ue=null,pe=8192,Le={getCacheForType:function(a){var i=ne(Xe),f=i.data.get(a);return f===void 0&&(f=a(),i.data.set(a,f)),f}},kn=0,ai=1,el=2,vs=3,Qa=4;if(typeof Symbol=="function"&&Symbol.for){var Qe=Symbol.for;kn=Qe("selector.component"),ai=Qe("selector.has_pseudo_class"),el=Qe("selector.role"),vs=Qe("selector.test_id"),Qa=Qe("selector.text")}var Gl=typeof WeakMap=="function"?WeakMap:Map,ge=0,qe=null,ie=null,ye=0,Oe=0,Ke=null,Ri=!1,nl=!1,Fu=!1,Ka=0,We=0,ua=0,$e=0,Mi=0,Kn=0,Ca=0,xr=null,Wn=null,ku=!1,Nr=0,Dr=1/0,$n=null,al=null,Ge=0,il=null,zr=null,ys=0,xi=0,Ss=null,Wu=null,Ni=0,$u=null;return be.attemptContinuousHydration=function(a){if(a.tag===13){var i=Vl(a,67108864);i!==null&&ga(i,a,67108864),El(a,67108864)}},be.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var i=pa();i=q(i);var f=Vl(a,i);f!==null&&ga(f,a,i),El(a,i)}},be.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var i=w(a.pendingLanes);if(i!==0){for(a.pendingLanes|=2,a.entangledLanes|=2;i;){var f=1<<31-la(i);a.entanglements[1]|=f,i&=~f}Je(a),(ge&6)===0&&(Dr=za()+500,ct(0))}}break;case 13:i=Vl(a,2),i!==null&&ga(i,a,2),as(),El(a,2)}},be.batchedUpdates=function(a,i){return a(i)},be.createComponentSelector=function(a){return{$$typeof:kn,value:a}},be.createContainer=function(a,i,f,m,_,B,tt,ot,St,zt){return Cu(a,i,!1,null,f,m,B,tt,ot,St,zt,null)},be.createHasPseudoClassSelector=function(a){return{$$typeof:ai,value:a}},be.createHydrationContainer=function(a,i,f,m,_,B,tt,ot,St,zt,Ht,Pt,Qt){return a=Cu(f,m,!0,a,_,B,ot,St,zt,Ht,Pt,Qt),a.context=rs(null),f=a.current,m=pa(),m=q(m),_=Gi(m),_.callback=i??null,Bi(f,_,m),i=m,a.current.lanes=i,T(a,i),Je(a),a},be.createPortal=function(a,i,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:m==null?null:""+m,children:a,containerInfo:i,implementation:f}},be.createRoleSelector=function(a){return{$$typeof:el,value:a}},be.createTestNameSelector=function(a){return{$$typeof:vs,value:a}},be.createTextSelector=function(a){return{$$typeof:Qa,value:a}},be.defaultOnCaughtError=function(a){console.error(a)},be.defaultOnRecoverableError=function(a){Rr(a)},be.defaultOnUncaughtError=function(a){Rr(a)},be.deferredUpdates=function(a){var i=te.T,f=yi();try{return Cn(32),te.T=null,a()}finally{Cn(f),te.T=i}},be.discreteUpdates=function(a,i,f,m,_){var B=te.T,tt=yi();try{return Cn(2),te.T=null,a(i,f,m,_)}finally{Cn(tt),te.T=B,ge===0&&(Dr=za()+500)}},be.findAllNodes=ro,be.findBoundingRects=function(a,i){if(!bi)throw Error(o(363));i=ro(a,i),a=[];for(var f=0;f<i.length;f++)a.push(fn(i[f]));for(i=a.length-1;0<i;i--){f=a[i];for(var m=f.x,_=m+f.width,B=f.y,tt=B+f.height,ot=i-1;0<=ot;ot--)if(i!==ot){var St=a[ot],zt=St.x,Ht=zt+St.width,Pt=St.y,Qt=Pt+St.height;if(m>=zt&&B>=Pt&&_<=Ht&&tt<=Qt){a.splice(i,1);break}else if(m!==zt||f.width!==St.width||Qt<B||Pt>tt){if(!(B!==Pt||f.height!==St.height||Ht<m||zt>_)){zt>m&&(St.width+=zt-m,St.x=m),Ht<_&&(St.width=_-zt),a.splice(i,1);break}}else{Pt>B&&(St.height+=Pt-B,St.y=B),Qt<tt&&(St.height=tt-Pt),a.splice(i,1);break}}}return a},be.findHostInstance=ss,be.findHostInstanceWithNoPortals=function(a){return a=g(a),a=a!==null?b(a):null,a===null?null:or(a.stateNode)},be.findHostInstanceWithWarning=function(a){return ss(a)},be.flushPassiveEffects=tr,be.flushSyncFromReconciler=function(a){var i=ge;ge|=1;var f=te.T,m=yi();try{if(Cn(2),te.T=null,a)return a()}finally{Cn(m),te.T=f,ge=i,(ge&6)===0&&ct(0)}},be.flushSyncWork=as,be.focusWithin=function(a,i){if(!bi)throw Error(o(363));for(a=Ja(a),i=Sl(a,i),i=Array.from(i),a=0;a<i.length;){var f=i[a++],m=f.tag;if(!cr(f)){if((m===5||m===26||m===27)&&Vh(f.stateNode))return!0;for(f=f.child;f!==null;)i.push(f),f=f.sibling}}return!1},be.getFindAllNodesFailureDescription=function(a,i){if(!bi)throw Error(o(363));var f=0,m=[];a=[Ja(a),0];for(var _=0;_<a.length;){var B=a[_++],tt=B.tag,ot=a[_++],St=i[ot];if((tt!==5&&tt!==26&&tt!==27||!cr(B))&&(gu(B,St)&&(m.push(es(St)),ot++,ot>f&&(f=ot)),ot<i.length))for(B=B.child;B!==null;)a.push(B,ot),B=B.sibling}if(f<i.length){for(a=[];f<i.length;f++)a.push(es(i[f]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},be.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 27:case 5:return or(a.child.stateNode);default:return a.child.stateNode}},be.injectIntoDevTools=function(){var a={bundleType:0,version:sr,rendererPackageName:wh,currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(Ji!==null&&(a.rendererConfig=Ji),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)a=!0;else{try{ds=i.inject(a),va=i}catch{}a=!!i.checkDCE}}return a},be.isAlreadyRendering=function(){return(ge&6)!==0},be.observeVisibleRects=function(a,i,f,m){if(!bi)throw Error(o(363));a=ro(a,i);var _=y0(a,f,m).disconnect;return{disconnect:function(){_()}}},be.shouldError=function(){return null},be.shouldSuspend=function(){return!1},be.startHostTransition=function(a,i,f,m){if(a.tag!==5)throw Error(o(476));var _=Qs(a).queue;Xs(a,_,i,Fi,f===null?r:function(){var B=Qs(a).next.queue;return Il(a,B,{},pa()),f(m)})},be.updateContainer=function(a,i,f,m){var _=i.current,B=pa();return Eu(_,B,a,i,f,m),B},be.updateContainerSync=function(a,i,f,m){return Eu(i.current,2,a,i,f,m),2},be},d.exports.default=d.exports,Object.defineProperty(d.exports,"__esModule",{value:!0})})(hp)),hp.exports}var U1;function f3(){return U1||(U1=1,fp.exports=c3()),fp.exports}var h3=f3();const d3=n0(h3);var gp={exports:{}},Gr={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function p3(){return G1||(G1=1,Gr.ConcurrentRoot=1,Gr.ContinuousEventPriority=8,Gr.DefaultEventPriority=32,Gr.DiscreteEventPriority=2,Gr.IdleEventPriority=268435456,Gr.LegacyRoot=0,Gr.NoEventPriority=0),Gr}var B1;function g3(){return B1||(B1=1,gp.exports=p3()),gp.exports}var c0=g3();const H1={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let j1=!1,L1=!1;const e0=".react-konva-event",m3=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,v3=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,y3={};function f0(d,n,s=y3){if(!j1&&"zIndex"in n&&(console.warn(v3),j1=!0),!L1&&n.draggable){var r=n.x!==void 0||n.y!==void 0,o=n.onDragEnd||n.onDragMove;r&&!o&&(console.warn(m3),L1=!0)}for(var h in s)if(!H1[h]){var c=h.slice(0,2)==="on",g=s[h]!==n[h];if(c&&g){var p=h.substr(2).toLowerCase();p.substr(0,7)==="content"&&(p="content"+p.substr(7,1).toUpperCase()+p.substr(8)),d.off(p,s[h])}var b=!n.hasOwnProperty(h);b&&d.setAttr(h,void 0)}var O=n._useStrictMode,R={},E=!1;const z={};for(var h in n)if(!H1[h]){var c=h.slice(0,2)==="on",S=s[h]!==n[h];if(c&&S){var p=h.substr(2).toLowerCase();p.substr(0,7)==="content"&&(p="content"+p.substr(7,1).toUpperCase()+p.substr(8)),n[h]&&(z[p]=n[h])}!c&&(n[h]!==s[h]||O&&n[h]!==d.getAttr(h))&&(E=!0,R[h]=n[h])}E&&(d.setAttrs(R),Hs(d));for(var p in z)d.off(p+e0),d.on(p+e0,z[p])}function Hs(d){if(!Vt.autoDrawEnabled){var n=d.getLayer()||d.getStage();n&&n.batchDraw()}}var mp={exports:{}},vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function S3(){return w1||(w1=1,(function(d){function n(x,L){var Q=x.length;x.push(L);t:for(;0<Q;){var k=Q-1>>>1,nt=x[k];if(0<o(nt,L))x[k]=L,x[Q]=nt,Q=k;else break t}}function s(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var L=x[0],Q=x.pop();if(Q!==L){x[0]=Q;t:for(var k=0,nt=x.length,F=nt>>>1;k<F;){var it=2*(k+1)-1,at=x[it],P=it+1,J=x[P];if(0>o(at,Q))P<nt&&0>o(J,at)?(x[k]=J,x[P]=Q,k=P):(x[k]=at,x[it]=Q,k=it);else if(P<nt&&0>o(J,Q))x[k]=J,x[P]=Q,k=P;else break t}}return L}function o(x,L){var Q=x.sortIndex-L.sortIndex;return Q!==0?Q:x.id-L.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var c=Date,g=c.now();d.unstable_now=function(){return c.now()-g}}var p=[],b=[],O=1,R=null,E=3,z=!1,S=!1,H=!1,w=!1,Y=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function j(x){for(var L=s(b);L!==null;){if(L.callback===null)r(b);else if(L.startTime<=x)r(b),L.sortIndex=L.expirationTime,n(p,L);else break;L=s(b)}}function M(x){if(H=!1,j(x),!S)if(s(p)!==null)S=!0,A||(A=!0,I());else{var L=s(b);L!==null&&X(M,L.startTime-x)}}var A=!1,T=-1,y=5,U=-1;function N(){return w?!0:!(d.unstable_now()-U<y)}function q(){if(w=!1,A){var x=d.unstable_now();U=x;var L=!0;try{t:{S=!1,H&&(H=!1,G(T),T=-1),z=!0;var Q=E;try{e:{for(j(x),R=s(p);R!==null&&!(R.expirationTime>x&&N());){var k=R.callback;if(typeof k=="function"){R.callback=null,E=R.priorityLevel;var nt=k(R.expirationTime<=x);if(x=d.unstable_now(),typeof nt=="function"){R.callback=nt,j(x),L=!0;break e}R===s(p)&&r(p),j(x)}else r(p);R=s(p)}if(R!==null)L=!0;else{var F=s(b);F!==null&&X(M,F.startTime-x),L=!1}}break t}finally{R=null,E=Q,z=!1}L=void 0}}finally{L?I():A=!1}}}var I;if(typeof D=="function")I=function(){D(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=q,I=function(){K.postMessage(null)}}else I=function(){Y(q,0)};function X(x,L){T=Y(function(){x(d.unstable_now())},L)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(x){x.callback=null},d.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<x?Math.floor(1e3/x):5},d.unstable_getCurrentPriorityLevel=function(){return E},d.unstable_next=function(x){switch(E){case 1:case 2:case 3:var L=3;break;default:L=E}var Q=E;E=L;try{return x()}finally{E=Q}},d.unstable_requestPaint=function(){w=!0},d.unstable_runWithPriority=function(x,L){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var Q=E;E=x;try{return L()}finally{E=Q}},d.unstable_scheduleCallback=function(x,L,Q){var k=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?k+Q:k):Q=k,x){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Q+nt,x={id:O++,callback:L,priorityLevel:x,startTime:Q,expirationTime:nt,sortIndex:-1},Q>k?(x.sortIndex=Q,n(b,x),s(p)===null&&x===s(b)&&(H?(G(T),T=-1):H=!0,X(M,Q-k))):(x.sortIndex=nt,n(p,x),S||z||(S=!0,A||(A=!0,I()))),x},d.unstable_shouldYield=N,d.unstable_wrapCallback=function(x){var L=E;return function(){var Q=E;E=L;try{return x.apply(this,arguments)}finally{E=Q}}}})(vp)),vp}var Y1;function b3(){return Y1||(Y1=1,mp.exports=S3()),mp.exports}var yp=b3();const Bm={},C3={};dc.Node.prototype._applyProps=f0;let Hm=c0.DefaultEventPriority;function E3(d,n){if(typeof n=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${n}`);return}d.add(n),Hs(d)}function T3(d,n,s){let r=dc[d];r||(console.error(`Konva has no node with the type ${d}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${d}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=dc.Group);const o={},h={};for(var c in n)if(c!=="ref"){var g=c.slice(0,2)==="on";g?h[c]=n[c]:o[c]=n[c]}const p=new r(o);return f0(p,h),p}function A3(d,n,s){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${d}"`)}function _3(d,n,s){return!1}function O3(d){return d}function R3(){return null}function M3(){return null}function x3(d,n,s,r){return C3}function N3(){}function D3(d){}function z3(d,n){return!1}function U3(){return Bm}function G3(){return Bm}const B3=setTimeout,H3=clearTimeout,j3=!0,L3=d=>{d()},w3=-1;function Y3(d,n){return!1}const q3=!1,V3=!1,P3=!0,X3=!1,Q3=!1;function K3(d,n){n.parent===d?n.moveToTop():d.add(n),Hs(d)}function I3(d,n){n.parent===d?n.moveToTop():d.add(n),Hs(d)}function jm(d,n,s){n._remove(),d.add(n),n.setZIndex(s.getZIndex()),Hs(d)}function Z3(d,n,s){jm(d,n,s)}function J3(d,n){n.destroy(),n.off(e0),Hs(d)}function F3(d,n){n.destroy(),n.off(e0),Hs(d)}function k3(d,n,s){console.error(`Text components are not yet supported in ReactKonva. You text is: "${s}"`)}function W3(d,n,s){}function $3(d,n,s,r){f0(d,r,s)}function t5(d){d.hide(),Hs(d)}function e5(d){}function n5(d,n){(n.visible==null||n.visible)&&d.show()}function a5(d,n){}function i5(d){}function l5(){}function r5(){return c0.DefaultEventPriority}function s5(){}function o5(){return null}function u5(d){Hm=d}function c5(){return Hm}function f5(){return c0.DiscreteEventPriority}function h5(){return!1}function d5(){}function p5(){return!1}function g5(){return!0}function m5(){}function v5(){}function y5(){return null}const S5=null;function b5(){}const C5=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:S5,appendChild:K3,appendChildToContainer:I3,appendInitialChild:E3,cancelTimeout:H3,clearContainer:i5,commitMount:W3,commitTextUpdate:k3,commitUpdate:$3,createInstance:T3,createTextInstance:A3,detachDeletedInstance:l5,finalizeInitialChildren:_3,getChildHostContext:G3,getCurrentEventPriority:r5,getCurrentUpdatePriority:c5,getInstanceFromScope:o5,getPublicInstance:O3,getRootHostContext:U3,hideInstance:t5,hideTextInstance:e5,idlePriority:yp.unstable_IdlePriority,insertBefore:jm,insertInContainerBefore:Z3,isPrimaryRenderer:q3,maySuspendCommit:p5,noTimeout:w3,now:yp.unstable_now,preloadInstance:g5,prepareForCommit:R3,preparePortalMount:M3,prepareScopeUpdate:s5,prepareUpdate:x3,removeChild:J3,removeChildFromContainer:F3,requestPostPaintCallback:d5,resetAfterCommit:N3,resetFormInstance:b5,resetTextContent:D3,resolveUpdatePriority:f5,run:yp.unstable_runWithPriority,scheduleMicrotask:L3,scheduleTimeout:B3,setCurrentUpdatePriority:u5,shouldAttemptEagerTransition:h5,shouldDeprioritizeSubtree:z3,shouldSetTextContent:Y3,startSuspendingCommit:m5,supportsHydration:Q3,supportsMicrotasks:j3,supportsMutation:P3,supportsPersistence:X3,suspendInstance:v5,unhideInstance:n5,unhideTextInstance:a5,waitForCommitToBeReady:y5,warnsIfNotActing:V3},Symbol.toStringTag,{value:"Module"}));function Lm(d,n,s){if(!d)return;if(s(d)===!0)return d;let r=d.child;for(;r;){const o=Lm(r,n,s);if(o)return o;r=r.sibling}}function wm(d){try{return Object.defineProperties(d,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return d}}const Kp=wm(Ct.createContext(null));class Ym extends Ct.Component{render(){return Ct.createElement(Kp.Provider,{value:this._reactInternals},this.props.children)}}function E5(){const d=Ct.useContext(Kp);if(d===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=Ct.useId();return Ct.useMemo(()=>{for(const s of[d,d==null?void 0:d.alternate]){if(!s)continue;const r=Lm(s,!1,o=>{let h=o.memoizedState;for(;h;){if(h.memoizedState===n)return!0;h=h.next}});if(r)return r}},[d,n])}const T5=Symbol.for("react.context"),A5=d=>d!==null&&typeof d=="object"&&"$$typeof"in d&&d.$$typeof===T5;function _5(){const d=E5(),[n]=Ct.useState(()=>new Map);n.clear();let s=d;for(;s;){const r=s.type;A5(r)&&r!==Kp&&!n.has(r)&&n.set(r,Ct.use(wm(r))),s=s.return}return n}function O5(){const d=_5();return Ct.useMemo(()=>Array.from(d.keys()).reduce((n,s)=>r=>Ct.createElement(n,null,Ct.createElement(s.Provider,{...r,value:d.get(s)})),n=>Ct.createElement(Ym,{...n})),[d])}if(An.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function R5(d){const n=An.useRef({});return An.useLayoutEffect(()=>{n.current=d}),An.useLayoutEffect(()=>()=>{n.current={}},[]),n.current}const M5=()=>{const d=An.useRef(0);return An.useMemo(()=>{d.current++},[]),d.current>1},x5=d=>{const n=An.useRef(null),s=An.useRef(null),r=An.useRef(null),o=R5(d),h=O5(),c=An.useRef(!1),g=b=>{const{forwardedRef:O}=d;O&&(typeof O=="function"?O(b):O.current=b)},p=M5();return An.useLayoutEffect(()=>c.current&&p?()=>{c.current=!1,g(null),cc.updateContainer(null,r.current,null),s.current.destroy()}:(c.current=!0,s.current=new dc.Stage({width:d.width,height:d.height,container:n.current}),g(s.current),r.current=cc.createContainer(s.current,c0.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),cc.updateContainer(An.createElement(h,{},d.children),r.current,null,()=>{}),()=>{p||(g(null),cc.updateContainer(null,r.current,null),s.current.destroy())}),[]),An.useLayoutEffect(()=>{g(s.current),f0(s.current,d,o),cc.updateContainer(An.createElement(h,{},d.children),r.current,null)}),An.createElement("div",{ref:n,id:d.id,accessKey:d.accessKey,className:d.className,role:d.role,style:d.style,tabIndex:d.tabIndex,title:d.title})},jr="Layer",pc="Line",Ip="Image",cc=d3(C5);cc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:An.version,rendererPackageName:"react-konva"});const Zp=An.forwardRef((d,n)=>An.createElement(Ym,{},An.createElement(x5,{...d,forwardedRef:n})));var Sp={exports:{}};/*!
 * @license Copyright 2015-2022 Ably Real-time Ltd (ably.com)
 * 
 * Ably JavaScript Library v1.2.50
 * https://github.com/ably/ably-js
 * 
 * Released under the Apache Licence v2.0
 */var q1;function qm(){return q1||(q1=1,(function(d,n){(function(r,o){d.exports=o()})(window,function(){return(function(s){var r={};function o(h){if(r[h])return r[h].exports;var c=r[h]={i:h,l:!1,exports:{}};return s[h].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=s,o.c=r,o.d=function(h,c,g){o.o(h,c)||Object.defineProperty(h,c,{enumerable:!0,get:g})},o.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},o.t=function(h,c){if(c&1&&(h=o(h)),c&8||c&4&&typeof h=="object"&&h&&h.__esModule)return h;var g=Object.create(null);if(o.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),c&2&&typeof h!="string")for(var p in h)o.d(g,p,(function(b){return h[b]}).bind(null,p));return g},o.n=function(h){var c=h&&h.__esModule?function(){return h.default}:function(){return h};return o.d(c,"a",c),c},o.o=function(h,c){return Object.prototype.hasOwnProperty.call(h,c)},o.p="",o(o.s=42)})([(function(s,r,o){o.r(r),o.d(r,"__extends",function(){return c}),o.d(r,"__assign",function(){return g}),o.d(r,"__rest",function(){return p}),o.d(r,"__decorate",function(){return b}),o.d(r,"__param",function(){return O}),o.d(r,"__metadata",function(){return R}),o.d(r,"__awaiter",function(){return E}),o.d(r,"__generator",function(){return z}),o.d(r,"__createBinding",function(){return S}),o.d(r,"__exportStar",function(){return H}),o.d(r,"__values",function(){return w}),o.d(r,"__read",function(){return Y}),o.d(r,"__spread",function(){return G}),o.d(r,"__spreadArrays",function(){return D}),o.d(r,"__spreadArray",function(){return j}),o.d(r,"__await",function(){return M}),o.d(r,"__asyncGenerator",function(){return A}),o.d(r,"__asyncDelegator",function(){return T}),o.d(r,"__asyncValues",function(){return y}),o.d(r,"__makeTemplateObject",function(){return U}),o.d(r,"__importStar",function(){return q}),o.d(r,"__importDefault",function(){return I}),o.d(r,"__classPrivateFieldGet",function(){return Z}),o.d(r,"__classPrivateFieldSet",function(){return K});/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var h=function(X,x){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Q){L.__proto__=Q}||function(L,Q){for(var k in Q)Object.prototype.hasOwnProperty.call(Q,k)&&(L[k]=Q[k])},h(X,x)};function c(X,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");h(X,x);function L(){this.constructor=X}X.prototype=x===null?Object.create(x):(L.prototype=x.prototype,new L)}var g=function(){return g=Object.assign||function(x){for(var L,Q=1,k=arguments.length;Q<k;Q++){L=arguments[Q];for(var nt in L)Object.prototype.hasOwnProperty.call(L,nt)&&(x[nt]=L[nt])}return x},g.apply(this,arguments)};function p(X,x){var L={};for(var Q in X)Object.prototype.hasOwnProperty.call(X,Q)&&x.indexOf(Q)<0&&(L[Q]=X[Q]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,Q=Object.getOwnPropertySymbols(X);k<Q.length;k++)x.indexOf(Q[k])<0&&Object.prototype.propertyIsEnumerable.call(X,Q[k])&&(L[Q[k]]=X[Q[k]]);return L}function b(X,x,L,Q){var k=arguments.length,nt=k<3?x:Q===null?Q=Object.getOwnPropertyDescriptor(x,L):Q,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(X,x,L,Q);else for(var it=X.length-1;it>=0;it--)(F=X[it])&&(nt=(k<3?F(nt):k>3?F(x,L,nt):F(x,L))||nt);return k>3&&nt&&Object.defineProperty(x,L,nt),nt}function O(X,x){return function(L,Q){x(L,Q,X)}}function R(X,x){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(X,x)}function E(X,x,L,Q){function k(nt){return nt instanceof L?nt:new L(function(F){F(nt)})}return new(L||(L=Promise))(function(nt,F){function it(J){try{P(Q.next(J))}catch($){F($)}}function at(J){try{P(Q.throw(J))}catch($){F($)}}function P(J){J.done?nt(J.value):k(J.value).then(it,at)}P((Q=Q.apply(X,x||[])).next())})}function z(X,x){var L={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},Q,k,nt,F;return F={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function it(P){return function(J){return at([P,J])}}function at(P){if(Q)throw new TypeError("Generator is already executing.");for(;L;)try{if(Q=1,k&&(nt=P[0]&2?k.return:P[0]?k.throw||((nt=k.return)&&nt.call(k),0):k.next)&&!(nt=nt.call(k,P[1])).done)return nt;switch(k=0,nt&&(P=[P[0]&2,nt.value]),P[0]){case 0:case 1:nt=P;break;case 4:return L.label++,{value:P[1],done:!1};case 5:L.label++,k=P[1],P=[0];continue;case 7:P=L.ops.pop(),L.trys.pop();continue;default:if(nt=L.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(P[0]===6||P[0]===2)){L=0;continue}if(P[0]===3&&(!nt||P[1]>nt[0]&&P[1]<nt[3])){L.label=P[1];break}if(P[0]===6&&L.label<nt[1]){L.label=nt[1],nt=P;break}if(nt&&L.label<nt[2]){L.label=nt[2],L.ops.push(P);break}nt[2]&&L.ops.pop(),L.trys.pop();continue}P=x.call(X,L)}catch(J){P=[6,J],k=0}finally{Q=nt=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}var S=Object.create?(function(X,x,L,Q){Q===void 0&&(Q=L),Object.defineProperty(X,Q,{enumerable:!0,get:function(){return x[L]}})}):(function(X,x,L,Q){Q===void 0&&(Q=L),X[Q]=x[L]});function H(X,x){for(var L in X)L!=="default"&&!Object.prototype.hasOwnProperty.call(x,L)&&S(x,X,L)}function w(X){var x=typeof Symbol=="function"&&Symbol.iterator,L=x&&X[x],Q=0;if(L)return L.call(X);if(X&&typeof X.length=="number")return{next:function(){return X&&Q>=X.length&&(X=void 0),{value:X&&X[Q++],done:!X}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(X,x){var L=typeof Symbol=="function"&&X[Symbol.iterator];if(!L)return X;var Q=L.call(X),k,nt=[],F;try{for(;(x===void 0||x-- >0)&&!(k=Q.next()).done;)nt.push(k.value)}catch(it){F={error:it}}finally{try{k&&!k.done&&(L=Q.return)&&L.call(Q)}finally{if(F)throw F.error}}return nt}function G(){for(var X=[],x=0;x<arguments.length;x++)X=X.concat(Y(arguments[x]));return X}function D(){for(var X=0,x=0,L=arguments.length;x<L;x++)X+=arguments[x].length;for(var Q=Array(X),k=0,x=0;x<L;x++)for(var nt=arguments[x],F=0,it=nt.length;F<it;F++,k++)Q[k]=nt[F];return Q}function j(X,x,L){if(L||arguments.length===2)for(var Q=0,k=x.length,nt;Q<k;Q++)(nt||!(Q in x))&&(nt||(nt=Array.prototype.slice.call(x,0,Q)),nt[Q]=x[Q]);return X.concat(nt||Array.prototype.slice.call(x))}function M(X){return this instanceof M?(this.v=X,this):new M(X)}function A(X,x,L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=L.apply(X,x||[]),k,nt=[];return k={},F("next"),F("throw"),F("return"),k[Symbol.asyncIterator]=function(){return this},k;function F(et){Q[et]&&(k[et]=function(gt){return new Promise(function(Ot,Lt){nt.push([et,gt,Ot,Lt])>1||it(et,gt)})})}function it(et,gt){try{at(Q[et](gt))}catch(Ot){$(nt[0][3],Ot)}}function at(et){et.value instanceof M?Promise.resolve(et.value.v).then(P,J):$(nt[0][2],et)}function P(et){it("next",et)}function J(et){it("throw",et)}function $(et,gt){et(gt),nt.shift(),nt.length&&it(nt[0][0],nt[0][1])}}function T(X){var x,L;return x={},Q("next"),Q("throw",function(k){throw k}),Q("return"),x[Symbol.iterator]=function(){return this},x;function Q(k,nt){x[k]=X[k]?function(F){return(L=!L)?{value:M(X[k](F)),done:k==="return"}:nt?nt(F):F}:nt}}function y(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=X[Symbol.asyncIterator],L;return x?x.call(X):(X=typeof w=="function"?w(X):X[Symbol.iterator](),L={},Q("next"),Q("throw"),Q("return"),L[Symbol.asyncIterator]=function(){return this},L);function Q(nt){L[nt]=X[nt]&&function(F){return new Promise(function(it,at){F=X[nt](F),k(it,at,F.done,F.value)})}}function k(nt,F,it,at){Promise.resolve(at).then(function(P){nt({value:P,done:it})},F)}}function U(X,x){return Object.defineProperty?Object.defineProperty(X,"raw",{value:x}):X.raw=x,X}var N=Object.create?(function(X,x){Object.defineProperty(X,"default",{enumerable:!0,value:x})}):function(X,x){X.default=x};function q(X){if(X&&X.__esModule)return X;var x={};if(X!=null)for(var L in X)L!=="default"&&Object.prototype.hasOwnProperty.call(X,L)&&S(x,X,L);return N(x,X),x}function I(X){return X&&X.__esModule?X:{default:X}}function Z(X,x,L,Q){if(L==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?X!==x||!Q:!x.has(X))throw new TypeError("Cannot read private member from an object whose class did not declare it");return L==="m"?Q:L==="a"?Q.call(X):Q?Q.value:x.get(X)}function K(X,x,L,Q,k){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!k)throw new TypeError("Private accessor was defined without a setter");if(typeof x=="function"?X!==x||!k:!x.has(X))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?k.call(X,L):k?k.value=L:x.set(X,L),L}}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0}),r.allToUpperCase=r.allToLowerCase=r.encodeBody=r.decodeBody=r.Format=r.promisify=r.trim=r.arrChooseN=r.randomHexString=r.randomString=r.cheapRandStr=r.dataSizeBytes=r.inspectBody=r.inspectError=r.isErrorInfoOrPartialErrorInfo=r.now=r.parseQueryString=r.toQueryString=r.arrPopRandomElement=r.defaultPostHeaders=r.defaultGetHeaders=r.allSame=r.arrEvery=r.arrFilter=r.arrMap=r.safeArrForEach=r.arrForEach=r.forInOwnNonNullProperties=r.valuesArray=r.keysArray=r.arrWithoutValue=r.arrDeleteValue=r.arrIn=r.arrIndexOf=r.arrSubtract=r.arrIntersectOb=r.arrIntersect=r.intersect=r.containsValue=r.inherits=r.prototypicalClone=r.shallowClone=r.isEmptyArg=r.isOnlyPropIn=r.isEmpty=r.isObject=r.ensureArray=r.isArray=r.copy=r.mixin=void 0,r.arrEquals=r.toBase64=r.matchDerivedChannel=r.shallowEquals=r.getGlobalObject=r.getRetryTime=r.getJitterCoefficient=r.getBackoffCoefficient=void 0;var c=o(0),g=c.__importDefault(o(3)),p=c.__importStar(o(8)),b=c.__importDefault(o(4)),O=o(11),R=o(31);function E(ct){return Math.floor(Math.random()*ct.length)}function z(ct){for(var Mt=[],Dt=1;Dt<arguments.length;Dt++)Mt[Dt-1]=arguments[Dt];for(var Kt=0;Kt<Mt.length;Kt++){var ve=Mt[Kt];if(!ve)break;var hn=Object.prototype.hasOwnProperty;for(var _n in ve)(!hn||hn.call(ve,_n))&&(ct[_n]=ve[_n])}return ct}r.mixin=z;function S(ct){return z({},ct)}r.copy=S,r.isArray=Array.isArray||function(ct){return Object.prototype.toString.call(ct)=="[object Array]"};function H(ct){return D(ct)?[]:(0,r.isArray)(ct)?ct:[ct]}r.ensureArray=H;function w(ct){return Object.prototype.toString.call(ct)=="[object Object]"}r.isObject=w;function Y(ct){for(var Mt in ct)return!1;return!0}r.isEmpty=Y;function G(ct,Mt){for(var Dt in ct)if(Dt!==Mt)return!1;return!0}r.isOnlyPropIn=G;function D(ct){return ct==null}r.isEmptyArg=D;function j(ct){var Mt=new Object;for(var Dt in ct)Mt[Dt]=ct[Dt];return Mt}r.shallowClone=j;function M(ct,Mt){var Dt=(function(){function ve(){}return ve})();Dt.prototype=ct;var Kt=new Dt;return Mt&&z(Kt,Mt),Kt}r.prototypicalClone=M;var A=function(ct,Mt){if(g.default.Config.inherits){g.default.Config.inherits(ct,Mt);return}ct.super_=Mt,ct.prototype=M(Mt.prototype,{constructor:ct})};r.inherits=A;function T(ct,Mt){for(var Dt in ct)if(ct[Dt]==Mt)return!0;return!1}r.containsValue=T;function y(ct,Mt){return(0,r.isArray)(Mt)?U(ct,Mt):N(ct,Mt)}r.intersect=y;function U(ct,Mt){for(var Dt=[],Kt=0;Kt<ct.length;Kt++){var ve=ct[Kt];(0,r.arrIndexOf)(Mt,ve)!=-1&&Dt.push(ve)}return Dt}r.arrIntersect=U;function N(ct,Mt){for(var Dt=[],Kt=0;Kt<ct.length;Kt++){var ve=ct[Kt];ve in Mt&&Dt.push(ve)}return Dt}r.arrIntersectOb=N;function q(ct,Mt){for(var Dt=[],Kt=0;Kt<ct.length;Kt++){var ve=ct[Kt];(0,r.arrIndexOf)(Mt,ve)==-1&&Dt.push(ve)}return Dt}r.arrSubtract=q,r.arrIndexOf=Array.prototype.indexOf?function(ct,Mt,Dt){return ct.indexOf(Mt,Dt)}:function(ct,Mt,Dt){Dt=Dt||0;for(var Kt=ct.length;Dt<Kt;Dt++)if(ct[Dt]===Mt)return Dt;return-1};function I(ct,Mt){return(0,r.arrIndexOf)(ct,Mt)!==-1}r.arrIn=I;function Z(ct,Mt){var Dt=(0,r.arrIndexOf)(ct,Mt),Kt=Dt!=-1;return Kt&&ct.splice(Dt,1),Kt}r.arrDeleteValue=Z;function K(ct,Mt){var Dt=ct.slice();return Z(Dt,Mt),Dt}r.arrWithoutValue=K;function X(ct,Mt){var Dt=[];for(var Kt in ct)Mt&&!Object.prototype.hasOwnProperty.call(ct,Kt)||Dt.push(Kt);return Dt}r.keysArray=X;function x(ct,Mt){var Dt=[];for(var Kt in ct)Mt&&!Object.prototype.hasOwnProperty.call(ct,Kt)||Dt.push(ct[Kt]);return Dt}r.valuesArray=x;function L(ct,Mt){for(var Dt in ct)Object.prototype.hasOwnProperty.call(ct,Dt)&&ct[Dt]&&Mt(Dt)}r.forInOwnNonNullProperties=L,r.arrForEach=Array.prototype.forEach?function(ct,Mt){ct.forEach(Mt)}:function(ct,Mt){for(var Dt=ct.length,Kt=0;Kt<Dt;Kt++)Mt(ct[Kt],Kt,ct)};function Q(ct,Mt){return(0,r.arrForEach)(ct.slice(),Mt)}r.safeArrForEach=Q,r.arrMap=Array.prototype.map?function(ct,Mt){return ct.map(Mt)}:function(ct,Mt){for(var Dt=[],Kt=ct.length,ve=0;ve<Kt;ve++)Dt.push(Mt(ct[ve],ve,ct));return Dt},r.arrFilter=Array.prototype.filter?function(ct,Mt){return ct.filter(Mt)}:function(ct,Mt){for(var Dt=[],Kt=ct.length,ve=0;ve<Kt;ve++)Mt(ct[ve])&&Dt.push(ct[ve]);return Dt},r.arrEvery=Array.prototype.every?function(ct,Mt){return ct.every(Mt)}:function(ct,Mt){for(var Dt=ct.length,Kt=0;Kt<Dt;Kt++)if(!Mt(ct[Kt],Kt,ct))return!1;return!0};function k(ct,Mt){if(ct.length===0)return!0;var Dt=ct[0][Mt];return(0,r.arrEvery)(ct,function(Kt){return Kt[Mt]===Dt})}r.allSame=k;var nt={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function F(ct,Mt){var Dt=nt[Mt||Gt.json];return{accept:Dt,"X-Ably-Version":p.default.protocolVersion.toString(),"Ably-Agent":(0,p.getAgentString)(ct)}}r.defaultGetHeaders=F;function it(ct,Mt){var Dt,Kt=Dt=nt[Mt||Gt.json];return{accept:Kt,"content-type":Dt,"X-Ably-Version":p.default.protocolVersion.toString(),"Ably-Agent":(0,p.getAgentString)(ct)}}r.defaultPostHeaders=it;function at(ct){return ct.splice(E(ct),1)[0]}r.arrPopRandomElement=at;function P(ct){var Mt=[];if(ct)for(var Dt in ct)Mt.push(encodeURIComponent(Dt)+"="+encodeURIComponent(ct[Dt]));return Mt.length?"?"+Mt.join("&"):""}r.toQueryString=P;function J(ct){for(var Mt,Dt=/([^?&=]+)=?([^&]*)/g,Kt={};Mt=Dt.exec(ct);)Kt[decodeURIComponent(Mt[1])]=decodeURIComponent(Mt[2]);return Kt}r.parseQueryString=J,r.now=Date.now||function(){return new Date().getTime()};function $(ct){return typeof ct=="object"&&ct!==null&&(ct.constructor.name=="ErrorInfo"||ct.constructor.name=="PartialErrorInfo")}r.isErrorInfoOrPartialErrorInfo=$;function et(ct){var Mt,Dt;return ct instanceof Error||((Mt=ct==null?void 0:ct.constructor)===null||Mt===void 0?void 0:Mt.name)==="ErrorInfo"||((Dt=ct==null?void 0:ct.constructor)===null||Dt===void 0?void 0:Dt.name)==="PartialErrorInfo"?ct.toString():g.default.Config.inspect(ct)}r.inspectError=et;function gt(ct){return g.default.BufferUtils.isBuffer(ct)?ct.toString():typeof ct=="string"?ct:g.default.Config.inspect(ct)}r.inspectBody=gt;function Ot(ct){if(g.default.BufferUtils.isBuffer(ct))return g.default.BufferUtils.byteLength(ct);if(typeof ct=="string")return g.default.Config.stringByteSize(ct);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof ct)}r.dataSizeBytes=Ot;function Lt(){return String(Math.random()).substr(2)}r.cheapRandStr=Lt;var Xt=function(ct){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var Mt=new Uint8Array(ct);return g.default.Config.getRandomValues(Mt),g.default.BufferUtils.base64Encode(Mt)}for(var Dt=g.default.BufferUtils.base64CharSet,Kt=Math.round(ct*4/3),ve="",hn=0;hn<Kt;hn++)ve+=Dt[E(Dt)];return ve};r.randomString=Xt;var Ft=function(ct){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var Mt=new Uint8Array(ct);return g.default.Config.getRandomValues(Mt),g.default.BufferUtils.hexEncode(Mt)}for(var Dt=g.default.BufferUtils.hexCharSet,Kt=ct*2,ve="",hn=0;hn<Kt;hn++)ve+=Dt[E(Dt)];return ve};r.randomHexString=Ft;function ce(ct,Mt){for(var Dt=Math.min(Mt,ct.length),Kt=ct.slice(),ve=[],hn=0;hn<Dt;hn++)ve.push(at(Kt));return ve}r.arrChooseN=ce,r.trim=String.prototype.trim?function(ct){return ct.trim()}:function(ct){return ct.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function At(ct,Mt,Dt){return new Promise(function(Kt,ve){ct[Mt].apply(ct,c.__spreadArray(c.__spreadArray([],Dt,!1),[function(hn,_n){hn?ve(hn):Kt(_n)}],!1))})}r.promisify=At;var Gt;(function(ct){ct.msgpack="msgpack",ct.json="json"})(Gt=r.Format||(r.Format={}));function kt(ct,Mt){return Mt=="msgpack"?g.default.Config.msgpack.decode(ct):JSON.parse(String(ct))}r.decodeBody=kt;function Ut(ct,Mt){return Mt=="msgpack"?g.default.Config.msgpack.encode(ct,!0):JSON.stringify(ct)}r.encodeBody=Ut;function pt(ct){return ct.map(function(Mt){return Mt&&Mt.toLowerCase()})}r.allToLowerCase=pt;function Nt(ct){return ct.map(function(Mt){return Mt&&Mt.toUpperCase()})}r.allToUpperCase=Nt;function oe(ct){return Math.min((ct+2)/3,2)}r.getBackoffCoefficient=oe;function Wt(){return 1-Math.random()*.2}r.getJitterCoefficient=Wt;function ne(ct,Mt){return ct*oe(Mt)*Wt()}r.getRetryTime=ne;function Zt(){return h||(typeof window<"u"?window:self)}r.getGlobalObject=Zt;function re(ct,Mt){return Object.keys(ct).every(function(Dt){return ct[Dt]===Mt[Dt]})&&Object.keys(Mt).every(function(Dt){return Mt[Dt]===ct[Dt]})}r.shallowEquals=re;function Ue(ct){var Mt=/^(\[([^?]*)(?:(.*))\])?(.+)$/,Dt=ct.match(Mt);if(!Dt||!Dt.length||Dt.length<5)throw new b.default("regex match failed",400,40010);if(Dt[2])throw new b.default("cannot use a derived option with a ".concat(Dt[2]," channel"),400,40010);return{qualifierParam:Dt[3]||"",channelName:Dt[4]}}r.matchDerivedChannel=Ue;function rn(ct){return g.default.Config.createHmac?Buffer.from(ct,"ascii").toString("base64"):(0,O.stringify)((0,R.parse)(ct))}r.toBase64=rn;function Je(ct,Mt){return ct.length===Mt.length&&(0,r.arrEvery)(ct,function(Dt,Kt){return Dt===Mt[Kt]})}r.arrEquals=Je}).call(this,o(13))}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importDefault(o(3)),p=h||(typeof window<"u"?window:self),b;(function(S){S[S.None=0]="None",S[S.Error=1]="Error",S[S.Major=2]="Major",S[S.Minor=3]="Minor",S[S.Micro=4]="Micro"})(b||(b={}));function O(S,H){return"".concat(S).padStart(H?3:2,"0")}function R(S){return g.default.Config.logTimestamps?function(H){var w=new Date;S(O(w.getHours())+":"+O(w.getMinutes())+":"+O(w.getSeconds())+"."+O(w.getMilliseconds(),1)+" "+H)}:S}var E=function(){var S,H,w,Y;return typeof Window>"u"&&typeof WorkerGlobalScope>"u"||typeof((H=(S=p==null?void 0:p.console)===null||S===void 0?void 0:S.log)===null||H===void 0?void 0:H.apply)=="function"?(w=function(){for(var G=[],D=0;D<arguments.length;D++)G[D]=arguments[D];console.log.apply(console,G)},Y=console.warn?function(){for(var G=[],D=0;D<arguments.length;D++)G[D]=arguments[D];console.warn.apply(console,G)}:w):p!=null&&p.console.log?w=Y=function(){Function.prototype.apply.call(console.log,console,arguments)}:w=Y=function(){},[w,Y].map(R)},z=(function(){function S(){S.logLevel=S.LOG_DEFAULT}return S.initLogHandlers=function(){var H=E(),w=H[0],Y=H[1];this.logHandler=w,this.logErrorHandler=Y},S.renamedClientOption=function(H,w){S.deprecationWarning("The `".concat(H,"` client option has been renamed to `").concat(w,"`. Please update your code to use `").concat(w,"` instead. `").concat(H,"` will be removed in a future version."))},S.renamedMethod=function(H,w,Y){S.deprecationWarning("`".concat(H,"`s `").concat(w,"` method has been renamed to `").concat(Y,"`. Please update your code to use `").concat(Y,"` instead. `").concat(w,"` will be removed in a future version."))},S.deprecationWarning=function(H){S.shouldLog(b.Error)&&S.logErrorHandler("Ably: Deprecation warning - ".concat(H))},S.logLevel=b.Error,S.LOG_NONE=b.None,S.LOG_ERROR=b.Error,S.LOG_MAJOR=b.Major,S.LOG_MINOR=b.Minor,S.LOG_MICRO=b.Micro,S.LOG_DEFAULT=b.Error,S.LOG_DEBUG=b.Micro,S.logAction=function(H,w,Y){S.shouldLog(H)&&(H===b.Error?S.logErrorHandler:S.logHandler)("Ably: "+w+": "+Y)},S.deprecated=function(H,w){S.deprecationWarning("".concat(H," is deprecated and will be removed in a future version. ").concat(w))},S.shouldLog=function(H){return H<=S.logLevel},S.setLog=function(H,w){H!==void 0&&(S.logLevel=H),w!==void 0&&(S.logHandler=S.logErrorHandler=w)},S})();r.default=z}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(){}return c})();r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PartialErrorInfo=void 0;var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1));function p(R){var E="["+R.constructor.name;return R.message&&(E+=": "+R.message),R.statusCode&&(E+="; statusCode="+R.statusCode),R.code&&(E+="; code="+R.code),R.cause&&(E+="; cause="+g.inspectError(R.cause)),R.href&&!(R.message&&R.message.indexOf("help.ably.io")>-1)&&(E+="; see "+R.href+" "),E+="]",E}var b=(function(R){h.__extends(E,R);function E(z,S,H,w){var Y=R.call(this,z)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(Y,E.prototype),Y.code=S,Y.statusCode=H,Y.cause=w,Y}return E.prototype.toString=function(){return p(this)},E.fromValues=function(z){var S=z,H=S.message,w=S.code,Y=S.statusCode;if(typeof H!="string"||typeof w!="number"||typeof Y!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+c.default.Config.inspect(z));var G=Object.assign(new E(H,w,Y),z);return G.code&&!G.href&&(G.href="https://help.ably.io/error/"+G.code),G},E})(Error);r.default=b;var O=(function(R){h.__extends(E,R);function E(z,S,H,w){var Y=R.call(this,z)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(Y,E.prototype),Y.code=S,Y.statusCode=H,Y.cause=w,Y}return E.prototype.toString=function(){return p(this)},E})(Error);r.PartialErrorInfo=O}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){if(typeof ArrayBuffer=="function"){var c=h,g=c.lib,p=g.WordArray,b=p.init,O=p.init=function(R){if(R instanceof ArrayBuffer&&(R=new Uint8Array(R)),(R instanceof Int8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)&&(R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength)),R instanceof Uint8Array){for(var E=R.byteLength,z=[],S=0;S<E;S++)z[S>>>2]|=R[S]<<24-S%4*8;b.call(this,z,E)}else b.apply(this,arguments)};O.prototype=p}})(),h.lib.WordArray})}),(function(s,r,o){(function(h){(function(c,g){s.exports=g()})(this,function(){var c=c||(function(g,p){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&typeof h<"u"&&h.crypto&&(b=h.crypto),!b)try{b=o(44)}catch{}var O=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},R=Object.create||(function(){function A(){}return function(T){var y;return A.prototype=T,y=new A,A.prototype=null,y}})(),E={},z=E.lib={},S=z.Base=(function(){return{extend:function(A){var T=R(this);return A&&T.mixIn(A),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var T in A)A.hasOwnProperty(T)&&(this[T]=A[T]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),H=z.WordArray=S.extend({init:function(A,T){A=this.words=A||[],T!=p?this.sigBytes=T:this.sigBytes=A.length*4},toString:function(A){return(A||Y).stringify(this)},concat:function(A){var T=this.words,y=A.words,U=this.sigBytes,N=A.sigBytes;if(this.clamp(),U%4)for(var q=0;q<N;q++){var I=y[q>>>2]>>>24-q%4*8&255;T[U+q>>>2]|=I<<24-(U+q)%4*8}else for(var q=0;q<N;q+=4)T[U+q>>>2]=y[q>>>2];return this.sigBytes+=N,this},clamp:function(){var A=this.words,T=this.sigBytes;A[T>>>2]&=4294967295<<32-T%4*8,A.length=g.ceil(T/4)},clone:function(){var A=S.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var T=[],y=0;y<A;y+=4)T.push(O());return new H.init(T,A)}}),w=E.enc={},Y=w.Hex={stringify:function(A){for(var T=A.words,y=A.sigBytes,U=[],N=0;N<y;N++){var q=T[N>>>2]>>>24-N%4*8&255;U.push((q>>>4).toString(16)),U.push((q&15).toString(16))}return U.join("")},parse:function(A){for(var T=A.length,y=[],U=0;U<T;U+=2)y[U>>>3]|=parseInt(A.substr(U,2),16)<<24-U%8*4;return new H.init(y,T/2)}},G=w.Latin1={stringify:function(A){for(var T=A.words,y=A.sigBytes,U=[],N=0;N<y;N++){var q=T[N>>>2]>>>24-N%4*8&255;U.push(String.fromCharCode(q))}return U.join("")},parse:function(A){for(var T=A.length,y=[],U=0;U<T;U++)y[U>>>2]|=(A.charCodeAt(U)&255)<<24-U%4*8;return new H.init(y,T)}},D=w.Utf8={stringify:function(A){try{return decodeURIComponent(escape(G.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return G.parse(unescape(encodeURIComponent(A)))}},j=z.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new H.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=D.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var T,y=this._data,U=y.words,N=y.sigBytes,q=this.blockSize,I=q*4,Z=N/I;A?Z=g.ceil(Z):Z=g.max((Z|0)-this._minBufferSize,0);var K=Z*q,X=g.min(K*4,N);if(K){for(var x=0;x<K;x+=q)this._doProcessBlock(U,x);T=U.splice(0,K),y.sigBytes-=X}return new H.init(T,X)},clone:function(){var A=S.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});z.Hasher=j.extend({cfg:S.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(A){return function(T,y){return new A.init(y).finalize(T)}},_createHmacHelper:function(A){return function(T,y){return new M.HMAC.init(A,y).finalize(T)}}});var M=E.algo={};return E})(Math);return c})}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(3));function b(E,z,S){try{z.apply(E,S)}catch(H){g.default.logAction(g.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+H+"; stack = "+(H&&H.stack))}}function O(E,z,S){for(var H,w,Y,G=0;G<E.length;G++)if(H=E[G],S&&(H=H[S]),c.isArray(H)){for(;(w=c.arrIndexOf(H,z))!==-1;)H.splice(w,1);S&&H.length===0&&delete E[G][S]}else if(c.isObject(H))for(Y in H)Object.prototype.hasOwnProperty.call(H,Y)&&c.isArray(H[Y])&&O([H],z,Y)}var R=(function(){function E(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return E.prototype.on=function(){for(var z=this,S=[],H=0;H<arguments.length;H++)S[H]=arguments[H];if(S.length===1){var w=S[0];if(typeof w=="function")this.any.push(w);else throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S))}if(S.length===2){var Y=S[0],G=S[1];if(typeof G!="function")throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S));if(c.isEmptyArg(Y))this.any.push(G);else if(c.isArray(Y))Y.forEach(function(j){z.on(j,G)});else{if(typeof Y!="string")throw new Error("EventListener.on(): Invalid arguments: "+p.default.Config.inspect(S));var D=this.events[Y]||(this.events[Y]=[]);D.push(G)}}},E.prototype.off=function(){for(var z,S=this,H=[],w=0;w<arguments.length;w++)H[w]=arguments[w];if(H.length==0||c.isEmptyArg(H[0])&&c.isEmptyArg(H[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}var Y=H[0],G=H[1],D=null,j=null;if(H.length===1||!G)typeof Y=="function"?D=Y:j=Y;else{if(typeof G!="function")throw new Error("EventEmitter.off(): invalid arguments:"+p.default.Config.inspect(H));z=[Y,G],j=z[0],D=z[1]}if(D&&c.isEmptyArg(j)){O([this.any,this.events,this.anyOnce,this.eventsOnce],D);return}if(c.isArray(j)){j.forEach(function(M){S.off(M,D)});return}if(typeof j!="string")throw new Error("EventEmitter.off(): invalid arguments:"+p.default.Config.inspect(H));D?O([this.events,this.eventsOnce],D,j):(delete this.events[j],delete this.eventsOnce[j])},E.prototype.listeners=function(z){if(z){var S=this.events[z]||[];return this.eventsOnce[z]&&Array.prototype.push.apply(S,this.eventsOnce[z]),S.length?S:null}return this.any.length?this.any:null},E.prototype.emit=function(z){for(var S=[],H=1;H<arguments.length;H++)S[H-1]=arguments[H];var w={event:z},Y=[];this.anyOnce.length&&(Array.prototype.push.apply(Y,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(Y,this.any);var G=this.eventsOnce[z];G&&(Array.prototype.push.apply(Y,G),delete this.eventsOnce[z]);var D=this.events[z];D&&Array.prototype.push.apply(Y,D),c.arrForEach(Y,function(j){b(w,j,S)})},E.prototype.once=function(){for(var z=this,S=[],H=0;H<arguments.length;H++)S[H]=arguments[H];var w=S.length;if((w===0||w===1&&typeof S[0]!="function")&&p.default.Config.Promise){var Y=S[0];return new p.default.Config.Promise(function(T){z.once(Y,T)})}var G=S[0],D=S[1];if(S.length===1&&typeof G=="function")this.anyOnce.push(G);else if(c.isEmptyArg(G)){if(typeof D!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));this.anyOnce.push(D)}else if(c.isArray(G)){var j=this,M=function(){var T=Array.prototype.slice.call(arguments);if(c.arrForEach(G,function(y){j.off(y,M)}),typeof D!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));D.apply(this,T)};c.arrForEach(G,function(T){j.on(T,M)})}else{if(typeof G!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));var A=this.eventsOnce[G]||(this.eventsOnce[G]=[]);if(D){if(typeof D!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+p.default.Config.inspect(S));A.push(D)}}},E.prototype.whenState=function(z,S,H){for(var w=this,Y=[],G=3;G<arguments.length;G++)Y[G-3]=arguments[G];var D={event:z};if(typeof z!="string"||typeof S!="string")throw"whenState requires a valid event String argument";if(typeof H!="function"&&p.default.Config.Promise)return new p.default.Config.Promise(function(j){E.prototype.whenState.apply(w,[z,S,j].concat(Y))});z===S?b(D,H,Y):this.once(z,H)},E})();r.default=R}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaults=r.normaliseOptions=r.objectifyOptions=r.getAgentString=r.getHosts=r.getFallbackHosts=r.environmentFallbackHosts=r.getHttpScheme=r.getPort=r.getHost=void 0;var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(2)),b=h.__importDefault(o(4)),O=o(43),R="ably-js/"+O.version,E={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:O.version,protocolVersion:2,agent:R,getHost:z,getPort:S,getHttpScheme:H,environmentFallbackHosts:w,getFallbackHosts:Y,getHosts:G,checkHost:D,objectifyOptions:T,normaliseOptions:y};function z(N,q,I){return I?q=q==N.restHost&&N.realtimeHost||q||N.realtimeHost:q=q||N.restHost,q}r.getHost=z;function S(N,q){return q||N.tls?N.tlsPort:N.port}r.getPort=S;function H(N){return N.tls?"https://":"http://"}r.getHttpScheme=H;function w(N){return[N+"-a-fallback.ably-realtime.com",N+"-b-fallback.ably-realtime.com",N+"-c-fallback.ably-realtime.com",N+"-d-fallback.ably-realtime.com",N+"-e-fallback.ably-realtime.com"]}r.environmentFallbackHosts=w;function Y(N){var q=N.fallbackHosts,I=typeof N.httpMaxRetryCount<"u"?N.httpMaxRetryCount:E.httpMaxRetryCount;return q?g.arrChooseN(q,I):[]}r.getFallbackHosts=Y;function G(N){return[N.restHost].concat(Y(N))}r.getHosts=G;function D(N){if(typeof N!="string")throw new b.default("host must be a string; was a "+typeof N,4e4,400);if(!N.length)throw new b.default("host must not be zero-length",4e4,400)}function j(N,q,I){return N.realtimeHost?N.realtimeHost:N.restHost?(p.default.logAction(p.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+N.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+N.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),N.restHost):q?E.REALTIME_HOST:I+"-"+E.REALTIME_HOST}function M(N){var q={};for(var I in E.TIMEOUTS)q[I]=N[I]||E.TIMEOUTS[I];return q}function A(N){var q=E.agent;if(N.agents)for(var I in N.agents)q+=" "+I+"/"+N.agents[I];return q}r.getAgentString=A;function T(N){return typeof N=="string"?N.indexOf(":")==-1?{token:N}:{key:N}:N}r.objectifyOptions=T;function y(N){if(N.host&&(p.default.renamedClientOption("host","restHost"),N.restHost=N.host),N.wsHost&&(p.default.renamedClientOption("wsHost","realtimeHost"),N.realtimeHost=N.wsHost),N.queueEvents&&(p.default.renamedClientOption("queueEvents","queueMessages"),N.queueMessages=N.queueEvents),N.headers&&p.default.deprecated("the `headers` client option",""),N.fallbackHostsUseDefault){if(N.fallbackHosts){var q="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions",q),new b.default(q,4e4,400)}if(N.port||N.tlsPort){var q="fallbackHostsUseDefault cannot be set when port or tlsPort are set";throw p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions",q),new b.default(q,4e4,400)}N.environment?p.default.deprecated("The `fallbackHostsUseDefault` client option","If youre using this client option to force the library to make use of fallback hosts even though youve set the `environment` client option, then this is no longer necessary: remove your usage of the `fallbackHostsUseDefault` client option and the library will then automatically choose the correct fallback hosts to use for the specified environment."):p.default.deprecated("The `fallbackHostsUseDefault` client option","If youre using this client option to force the library to make use of fallback hosts even though youre not using the primary Ably environment, then stop using `fallbackHostsUseDefault`, and update your code to either pass the `environment` client option (in which case the library will automatically choose the correct fallback hosts to use for the specified environment), or to pass the `fallbackHosts` client option to specify a custom list of fallback hosts to use (for example, if youre using a custom CNAME, in which case Ably will have provided you with an explicit list of fallback hosts)."),N.fallbackHosts=E.FALLBACK_HOSTS}N.recover===!0&&(p.default.deprecated("The ability to use a boolean value for the `recover` client option","If you wish for the connection to always be recovered, replace `{ recover: true }` with a function that always passes `true` to its callback: `{ recover: function(lastConnectionDetails, cb) { cb(true); } }`"),N.recover=function(at,P){P(!0)}),typeof N.recover=="function"&&N.closeOnUnload===!0&&(p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),N.recover=void 0),"closeOnUnload"in N||(N.closeOnUnload=!N.recover),N.transports&&g.arrIn(N.transports,"xhr")&&(p.default.deprecationWarning('The "xhr" transport has been renamed to "xhr_streaming". Please update your client options code to use `transports: ["xhr_streaming"]` instead. The ability to use `transports: ["xhr"]` will be removed in a future version.'),g.arrDeleteValue(N.transports,"xhr"),N.transports.push("xhr_streaming")),"queueMessages"in N||(N.queueMessages=!0);var I=N.environment&&String(N.environment).toLowerCase()||E.ENVIRONMENT,Z=!I||I==="production";!N.fallbackHosts&&!N.restHost&&!N.realtimeHost&&!N.port&&!N.tlsPort&&(N.fallbackHosts=Z?E.FALLBACK_HOSTS:w(I));var K=N.restHost||(Z?E.REST_HOST:I+"-"+E.REST_HOST),X=j(N,Z,I);g.arrForEach((N.fallbackHosts||[]).concat(K,X),D),N.port=N.port||E.PORT,N.tlsPort=N.tlsPort||E.TLS_PORT,"tls"in N||(N.tls=!0);var x=M(N);if("useBinaryProtocol"in N?N.useBinaryProtocol=c.default.Config.supportsBinary&&N.useBinaryProtocol:N.useBinaryProtocol=c.default.Config.preferBinary,N.clientId){var L=N.headers=N.headers||{};L["X-Ably-ClientId"]=c.default.BufferUtils.base64Encode(c.default.BufferUtils.utf8Encode(N.clientId))}"idempotentRestPublishing"in N||(N.idempotentRestPublishing=!0),N.promises&&!c.default.Config.Promise&&(p.default.logAction(p.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),N.promises=!1);var Q=null,k=N.connectivityCheckUrl;if(N.connectivityCheckUrl){var nt=N.connectivityCheckUrl.split("?"),F=nt[0],it=nt[1];Q=it?g.parseQueryString(it):{},F.indexOf("://")===-1&&(F="https://"+F),k=F}return h.__assign(h.__assign({},N),{useBinaryProtocol:"useBinaryProtocol"in N?c.default.Config.supportsBinary&&N.useBinaryProtocol:c.default.Config.preferBinary,realtimeHost:X,restHost:K,maxMessageSize:N.maxMessageSize||E.maxMessageSize,timeouts:x,connectivityCheckParams:Q,connectivityCheckUrl:k})}r.normaliseOptions=y,r.default=E;function U(N){return Object.assign(E,N)}r.getDefaults=U}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importDefault(o(2)),p=h.__importDefault(o(4)),b=h.__importStar(o(1));function O(S){return!S||!S.channelOptions?{channelOptions:S,plugins:{},baseEncodedPreviousPayload:void 0}:S}function R(S){if(S&&S.cipher){if(!c.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var H=c.default.Crypto.getCipher(S.cipher);return{cipher:H.cipherParams,channelCipher:H.cipher}}return S??{}}function E(S){var H=0;return S.name&&(H+=S.name.length),S.clientId&&(H+=S.clientId.length),S.extras&&(H+=JSON.stringify(S.extras).length),S.data&&(H+=b.dataSizeBytes(S.data)),H}var z=(function(){function S(){}return S.prototype.toJSON=function(){var H=this.encoding,w=this.data;return w&&c.default.BufferUtils.isBuffer(w)&&(arguments.length>0?(H=H?H+"/base64":"base64",w=c.default.BufferUtils.base64Encode(w)):w=c.default.BufferUtils.toBuffer(w)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:H,data:w}},S.prototype.toString=function(){var H="[Message";return this.name&&(H+="; name="+this.name),this.id&&(H+="; id="+this.id),this.timestamp&&(H+="; timestamp="+this.timestamp),this.clientId&&(H+="; clientId="+this.clientId),this.connectionId&&(H+="; connectionId="+this.connectionId),this.encoding&&(H+="; encoding="+this.encoding),this.extras&&(H+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?H+="; data="+this.data:c.default.BufferUtils.isBuffer(this.data)?H+="; data (buffer)="+c.default.BufferUtils.base64Encode(this.data):H+="; data (json)="+JSON.stringify(this.data)),this.extras&&(H+="; extras="+JSON.stringify(this.extras)),H+="]",H},S.encrypt=function(H,w,Y){var G=H.data,D=H.encoding,j=w.channelCipher;D=D?D+"/":"",c.default.BufferUtils.isBuffer(G)||(G=c.default.BufferUtils.utf8Encode(String(G)),D=D+"utf-8/"),j.encrypt(G,function(M,A){if(M){Y(M);return}H.data=A,H.encoding=D+"cipher+"+j.algorithm,Y(null,H)})},S.encode=function(H,w,Y){var G=H.data,D=typeof G=="string"||c.default.BufferUtils.isBuffer(G)||G===null||G===void 0;if(!D)if(b.isObject(G)||b.isArray(G))H.data=JSON.stringify(G),H.encoding=H.encoding?H.encoding+"/json":"json";else throw new p.default("Data type is unsupported",40013,400);w!=null&&w.cipher?S.encrypt(H,w,Y):Y(null,H)},S.encodeArray=function(H,w,Y){for(var G=0,D=0;D<H.length;D++)S.encode(H[D],w,function(j){if(j){Y(j);return}G++,G==H.length&&Y(null,H)})},S.decode=function(H,w){var Y=O(w),G=H.data,D=H.encoding;if(D){var j=D.split("/"),M=void 0,A=j.length,T=H.data,y="";try{for(;(M=A)>0;){var U=j[--A].match(/([-\w]+)(\+([\w-]+))?/);if(!U)break;switch(y=U[1],y){case"base64":T=c.default.BufferUtils.base64Decode(String(T)),M==j.length&&(G=T);continue;case"utf-8":T=c.default.BufferUtils.utf8Decode(T);continue;case"json":T=JSON.parse(T);continue;case"cipher":if(Y.channelOptions!=null&&Y.channelOptions.cipher&&Y.channelOptions.channelCipher){var N=U[3],q=Y.channelOptions.channelCipher;if(N!=q.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");T=q.decrypt(T);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!Y.plugins||!Y.plugins.vcdiff)throw new p.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new p.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var I=Y.baseEncodedPreviousPayload;typeof I=="string"&&(I=c.default.BufferUtils.utf8Encode(I)),I=c.default.BufferUtils.toBuffer(I),T=c.default.BufferUtils.toBuffer(T),T=c.default.BufferUtils.typedArrayToBuffer(Y.plugins.vcdiff.decode(T,I)),G=T}catch(K){throw new p.default("Vcdiff delta decode failed with "+K,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(K){var Z=K;throw new p.default("Error processing the "+y+" encoding, decoder returned "+Z.message+"",Z.code||40013,400)}finally{H.encoding=M<=0?null:j.slice(0,M).join("/"),H.data=T}}Y.baseEncodedPreviousPayload=G},S.fromResponseBody=function(H,w,Y){Y&&(H=b.decodeBody(H,Y));for(var G=0;G<H.length;G++){var D=H[G]=S.fromValues(H[G]);try{S.decode(D,w)}catch(j){g.default.logAction(g.default.LOG_ERROR,"Message.fromResponseBody()",j.toString())}}return H},S.fromValues=function(H){return Object.assign(new S,H)},S.fromValuesArray=function(H){for(var w=H.length,Y=new Array(w),G=0;G<w;G++)Y[G]=S.fromValues(H[G]);return Y},S.fromEncoded=function(H,w){var Y=S.fromValues(H),G=R(w??null);try{S.decode(Y,G)}catch(D){g.default.logAction(g.default.LOG_ERROR,"Message.fromEncoded()",D.toString())}return Y},S.fromEncodedArray=function(H,w){return H.map(function(Y){return S.fromEncoded(Y,w)})},S.getMessagesSize=function(H){for(var w,Y=0,G=0;G<H.length;G++)w=H[G],Y+=w.size||(w.size=E(w));return Y},S.serialize=b.encodeBody,S})();r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(4)),p=h.__importDefault(o(9)),b=h.__importDefault(o(16)),O={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},R=[];Object.keys(O).forEach(function(Y){R[O[Y]]=Y});var E={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},z=Object.keys(E);E.MODE_ALL=E.PRESENCE|E.PUBLISH|E.SUBSCRIBE|E.PRESENCE_SUBSCRIBE;function S(Y){var G=[];if(Y)for(var D=0;D<Y.length;D++)G.push(Y[D].toString());return"[ "+G.join(", ")+" ]"}var H="id channel channelSerial connectionId count msgSerial timestamp".split(" "),w=(function(){function Y(){var G=this;this.hasFlag=function(D){return(G.flags&E[D])>0}}return Y.prototype.setFlag=function(G){return this.flags=this.flags|E[G]},Y.prototype.getMode=function(){return this.flags&&this.flags&E.MODE_ALL},Y.prototype.encodeModesToFlags=function(G){var D=this;G.forEach(function(j){return D.setFlag(j)})},Y.prototype.decodeModesFromFlags=function(){var G=this,D=[];return Y.channelModes.forEach(function(j){G.hasFlag(j)&&D.push(j)}),D.length>0?D:void 0},Y.fromValues=function(G){return Object.assign(new Y,G)},Y.Action=O,Y.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],Y.ActionName=R,Y.serialize=c.encodeBody,Y.deserialize=function(G,D){var j=c.decodeBody(G,D);return Y.fromDeserialized(j)},Y.fromDeserialized=function(G){var D=G.error;D&&(G.error=g.default.fromValues(D));var j=G.messages;if(j)for(var M=0;M<j.length;M++)j[M]=p.default.fromValues(j[M]);var A=G.presence;if(A)for(var M=0;M<A.length;M++)A[M]=b.default.fromValues(A[M],!0);return Object.assign(new Y,G)},Y.stringify=function(G){var D="[ProtocolMessage";G.action!==void 0&&(D+="; action="+Y.ActionName[G.action]||!1);for(var j,M=0;M<H.length;M++)j=H[M],G[j]!==void 0&&(D+="; "+j+"="+G[j]);if(G.messages&&(D+="; messages="+S(p.default.fromValuesArray(G.messages))),G.presence&&(D+="; presence="+S(b.default.fromValuesArray(G.presence))),G.error&&(D+="; error="+g.default.fromValues(G.error).toString()),G.auth&&G.auth.accessToken&&(D+="; token="+G.auth.accessToken),G.flags&&(D+="; flags="+z.filter(G.hasFlag).join(",")),G.params){var A="";c.forInOwnNonNullProperties(G.params,function(T){A.length>0&&(A+="; "),A+=T+"="+G.params[T]}),A.length>0&&(D+="; params=["+A+"]")}return D+="]",D},Y})();r.default=w}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=c.enc;b.Base64={stringify:function(R){var E=R.words,z=R.sigBytes,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";R.clamp();for(var H=[],w=0;w<z;w+=3)for(var Y=E[w>>>2]>>>24-w%4*8&255,G=E[w+1>>>2]>>>24-(w+1)%4*8&255,D=E[w+2>>>2]>>>24-(w+2)%4*8&255,j=Y<<16|G<<8|D,M=0;M<4&&w+M*.75<z;M++)H.push(S.charAt(j>>>6*(3-M)&63));var A=S.charAt(64);if(A)for(;H.length%4;)H.push(A);return H.join("")},parse:function(R){var E=R.length,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var H=0;H<z.length;H++)S[z.charCodeAt(H)]=H}var w=z.charAt(64);if(w){var Y=R.indexOf(w);Y!==-1&&(E=Y)}return O(R,E,S)}};function O(R,E,z){for(var S=[],H=0,w=0;w<E;w++)if(w%4){var Y=z[R.charCodeAt(w-1)]<<w%4*2,G=z[R.charCodeAt(w)]>>>6-w%4*2,D=Y|G;S[H>>>2]|=D<<24-H%4*8,H++}return p.create(S,H)}})(),h.enc.Base64})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(10)),p=h.__importDefault(o(26)),b=h.__importDefault(o(2)),O=h.__importDefault(o(8)),R=h.__importDefault(o(21)),E=h.__importDefault(o(18)),z=h.__importDefault(o(4)),S=h.__importDefault(o(22)),H=h.__importDefault(o(3));function w(D){var j=[80015,80017,80030];return D.code?E.default.isTokenErr(D)?!1:c.arrIn(j,D.code)?!0:D.code>=4e4&&D.code<5e4:!1}function Y(D){return w(D)?[g.default.fromValues({action:g.default.Action.ERROR,error:D})]:[g.default.fromValues({action:g.default.Action.DISCONNECTED,error:D})]}var G=(function(D){h.__extends(j,D);function j(M,A,T){var y=D.call(this,M,A,T,!0)||this;return y.onAuthUpdated=function(U){y.authParams={access_token:U.token}},y.stream="stream"in T?T.stream:!0,y.sendRequest=null,y.recvRequest=null,y.pendingCallback=null,y.pendingItems=null,y}return j.prototype.connect=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","starting"),p.default.prototype.connect.call(this);var A=this.params,T=A.options,y=O.default.getHost(T,A.host),U=O.default.getPort(T),N=T.tls?"https://":"http://";this.baseUri=N+y+":"+U+"/comet/";var q=this.baseUri+"connect";b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","uri: "+q),this.auth.getAuthParams(function(I,Z){if(I){M.disconnect(I);return}if(!M.isDisposed){M.authParams=Z;var K=M.params.getConnectParams(Z);"stream"in K&&(M.stream=K.stream),b.default.logAction(b.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+c.toQueryString(K));var X=!1,x=M.recvRequest=M.createRequest(q,null,K,null,M.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV);x.on("data",function(L){M.recvRequest&&(X||(X=!0,M.emit("preconnect")),M.onData(L))}),x.on("complete",function(L){if(M.recvRequest||(L=L||new z.default("Request cancelled",80003,400)),M.recvRequest=null,!X&&!L&&(X=!0,M.emit("preconnect")),M.onActivity(),L){L.code?M.onData(Y(L)):M.disconnect(L);return}H.default.Config.nextTick(function(){M.recv()})}),x.exec()}})},j.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},j.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},j.prototype._requestCloseOrDisconnect=function(M){var A=this,T=M?this.closeUri:this.disconnectUri;if(T){var y=this.createRequest(T,null,this.authParams,null,S.default.REQ_SEND);y.on("complete",function(U){U&&(b.default.logAction(b.default.LOG_ERROR,"CometTransport.request"+(M?"Close()":"Disconnect()"),"request returned err = "+c.inspectError(U)),A.finish("disconnected",U))}),y.exec()}},j.prototype.dispose=function(){var M=this;b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(b.default.logAction(b.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",R.default.disconnected()),H.default.Config.nextTick(function(){M.emit("disposed")}))},j.prototype.onConnect=function(M){var A;if(!this.isDisposed){var T=(A=M.connectionDetails)===null||A===void 0?void 0:A.connectionKey;p.default.prototype.onConnect.call(this,M);var y=this.baseUri+T;b.default.logAction(b.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+y),this.sendUri=y+"/send",this.recvUri=y+"/recv",this.closeUri=y+"/close",this.disconnectUri=y+"/disconnect"}},j.prototype.send=function(M){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(M);return}var A=this.pendingItems||[];A.push(M),this.pendingItems=null,this.sendItems(A)},j.prototype.sendAnyPending=function(){var M=this.pendingItems;M&&(this.pendingItems=null,this.sendItems(M))},j.prototype.sendItems=function(M){var A=this,T=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(M),S.default.REQ_SEND);T.on("complete",function(y,U){if(y&&b.default.logAction(b.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+c.inspectError(y)),A.sendRequest=null,y){y.code?A.onData(Y(y)):A.disconnect(y);return}U&&A.onData(U),A.pendingItems&&H.default.Config.nextTick(function(){A.sendRequest||A.sendAnyPending()})}),T.exec()},j.prototype.recv=function(){var M=this;if(!this.recvRequest&&this.isConnected){var A=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?S.default.REQ_RECV_STREAM:S.default.REQ_RECV_POLL);A.on("data",function(T){M.onData(T)}),A.on("complete",function(T){if(M.recvRequest=null,M.onActivity(),T){T.code?M.onData(Y(T)):M.disconnect(T);return}H.default.Config.nextTick(function(){M.recv()})}),A.exec()}},j.prototype.onData=function(M){try{var A=this.decodeResponse(M);if(A&&A.length)for(var T=0;T<A.length;T++)this.onProtocolMessage(g.default.fromDeserialized(A[T]))}catch(y){b.default.logAction(b.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+y.stack)}},j.prototype.encodeRequest=function(M){return JSON.stringify(M)},j.prototype.decodeResponse=function(M){return typeof M=="string"?JSON.parse(M):M},j})(p.default);r.default=G}),(function(s,r){var o;o=(function(){return this})();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isSuccessCode=void 0;var h;(function(g){g[g.Success=200]="Success",g[g.NoContent=204]="NoContent",g[g.BadRequest=400]="BadRequest",g[g.Unauthorized=401]="Unauthorized",g[g.Forbidden=403]="Forbidden",g[g.RequestTimeout=408]="RequestTimeout",g[g.InternalServerError=500]="InternalServerError"})(h||(h={}));function c(g){return g>=h.Success&&g<h.BadRequest}r.isSuccessCode=c,r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(2)),b=h.__importDefault(o(18)),O=h.__importDefault(o(19)),R=o(4),E=h.__importDefault(o(14));function z(D,j,M,A,T){D.http.supportsAuthHeaders?D.auth.getAuthHeaders(function(y,U){y?A(y):T(g.mixin(U,j),M)}):D.auth.getAuthParams(function(y,U){y?A(y):T(j,g.mixin(U,M))})}function S(D,j){return function(M,A,T,y,U){if(M&&!A){D(M);return}if(U===E.default.NoContent){D(M,[],T,!0,U);return}if(!y)try{A=g.decodeBody(A,j)}catch(X){g.isErrorInfoOrPartialErrorInfo(X)?D(X):D(new R.PartialErrorInfo(g.inspectError(X),null));return}if(!A){D(new R.PartialErrorInfo("unenvelope(): Response body is missing",null));return}var N=A,q=N.statusCode,I=N.response,Z=N.headers;if(q===void 0){D(M,A,T,!0,U);return}if(q<200||q>=300){var K=I&&I.error||M;K||(K=new Error("Error in unenveloping "+A),K.statusCode=q),D(K,I,Z,!0,q);return}D(M,I,Z,!0,q)}}function H(D){var j=[];if(D)for(var M in D)j.push(M+"="+D[M]);return j.join("&")}function w(D,j){return D+(j?"?":"")+H(j)}function Y(D,j,M,A){return function(T,y,U,N,q){T?p.default.logAction(p.default.LOG_MICRO,"Resource."+j+"()","Received Error; "+w(M,A)+"; Error: "+g.inspectError(T)):p.default.logAction(p.default.LOG_MICRO,"Resource."+j+"()","Received; "+w(M,A)+"; Headers: "+H(U)+"; StatusCode: "+q+"; Body: "+(c.default.BufferUtils.isBuffer(y)?y.toString():y)),D&&D(T,y,U,N,q)}}var G=(function(){function D(){}return D.get=function(j,M,A,T,y,U){D.do(O.default.Get,j,M,null,A,T,y,U)},D.delete=function(j,M,A,T,y,U){D.do(O.default.Delete,j,M,null,A,T,y,U)},D.post=function(j,M,A,T,y,U,N){D.do(O.default.Post,j,M,A,T,y,U,N)},D.patch=function(j,M,A,T,y,U,N){D.do(O.default.Patch,j,M,A,T,y,U,N)},D.put=function(j,M,A,T,y,U,N){D.do(O.default.Put,j,M,A,T,y,U,N)},D.do=function(j,M,A,T,y,U,N,q){p.default.shouldLog(p.default.LOG_MICRO)&&(q=Y(q,j,A,U)),N&&(q=q&&S(q,N),(U=U||{}).envelope=N);function I(Z,K){var X;if(p.default.shouldLog(p.default.LOG_MICRO)&&p.default.logAction(p.default.LOG_MICRO,"Resource."+j+"()","Sending; "+w(A,K)),p.default.shouldLog(p.default.LOG_MICRO)){var x=T;if(((X=Z["content-type"])===null||X===void 0?void 0:X.indexOf("msgpack"))>0)try{x=c.default.Config.msgpack.decode(T)}catch(L){p.default.logAction(p.default.LOG_MICRO,"Resource."+j+"()","Sending MsgPack Decoding Error: "+g.inspectError(L))}p.default.logAction(p.default.LOG_MICRO,"Resource."+j+"()","Sending; "+w(A,K)+"; Body: "+x)}M.http.do(j,M,A,Z,T,K,function(L,Q,k,nt,F){if(L&&b.default.isTokenErr(L)){M.auth.authorize(null,null,function(it){if(it){q(it);return}z(M,Z,K,q,I)});return}q(L,Q,k,nt,F)})}z(M,y,U,q,I)},D})();r.default=G}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=h.__importDefault(o(3)),p=h.__importDefault(o(9)),b=h.__importStar(o(1));function O(E){return R.Actions.indexOf(E)}var R=(function(){function E(){}return E.prototype.isSynthesized=function(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId},E.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var z=this.id.split(":");return{connectionId:z[0],msgSerial:parseInt(z[1],10),index:parseInt(z[2],10)}},E.prototype.toJSON=function(){var z=this.data,S=this.encoding;return z&&g.default.BufferUtils.isBuffer(z)&&(arguments.length>0?(S=S?S+"/base64":"base64",z=g.default.BufferUtils.base64Encode(z)):z=g.default.BufferUtils.toBuffer(z)),{id:this.id,clientId:this.clientId,action:O(this.action),data:z,encoding:S,extras:this.extras}},E.prototype.toString=function(){var z="[PresenceMessage";return z+="; action="+this.action,this.id&&(z+="; id="+this.id),this.timestamp&&(z+="; timestamp="+this.timestamp),this.clientId&&(z+="; clientId="+this.clientId),this.connectionId&&(z+="; connectionId="+this.connectionId),this.encoding&&(z+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?z+="; data="+this.data:g.default.BufferUtils.isBuffer(this.data)?z+="; data (buffer)="+g.default.BufferUtils.base64Encode(this.data):z+="; data (json)="+JSON.stringify(this.data)),this.extras&&(z+="; extras="+JSON.stringify(this.extras)),z+="]",z},E.fromResponseBody=function(z,S,H){var w=[];H&&(z=b.decodeBody(z,H));for(var Y=0;Y<z.length;Y++){var G=w[Y]=E.fromValues(z[Y],!0);try{E.decode(G,S)}catch(D){c.default.logAction(c.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",D.toString())}}return w},E.fromValues=function(z,S){return S&&(z.action=E.Actions[z.action]),Object.assign(new E,z)},E.fromValuesArray=function(z){for(var S=z.length,H=new Array(S),w=0;w<S;w++)H[w]=E.fromValues(z[w]);return H},E.fromEncoded=function(z,S){var H=E.fromValues(z,!0);try{E.decode(H,S??{})}catch(w){c.default.logAction(c.default.LOG_ERROR,"PresenceMessage.fromEncoded()",w.toString())}return H},E.fromEncodedArray=function(z,S){return z.map(function(H){return E.fromEncoded(H,S)})},E.fromData=function(z){return z instanceof E?z:E.fromValues({data:z})},E.Actions=["absent","present","enter","leave","update"],E.encode=p.default.encode,E.decode=p.default.decode,E.getMessagesSize=p.default.getMessagesSize,E})();r.default=R}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importStar(o(1)),p=c.__importDefault(o(7)),b=c.__importStar(o(4)),O=c.__importDefault(o(2)),R=c.__importDefault(o(8)),E=c.__importDefault(o(22)),z=c.__importDefault(o(3));function S(N,q){return g.arrIn(g.allToLowerCase(g.keysArray(q)),"x-ably-errorcode")}function H(N,q){if(S(N,q))return N.error&&b.default.fromValues(N.error)}var w=function(){},Y=0,G={},D=typeof h<"u"&&h.XDomainRequest;function j(){var N=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/);return N&&Number(N[1])}function M(){var N;return D&&(N=j())&&N===10}function A(N,q){return N.getResponseHeader&&N.getResponseHeader(q)}function T(N){return N.getResponseHeader&&(N.getResponseHeader("transfer-encoding")||!N.getResponseHeader("content-length"))}function y(N){for(var q=g.trim(N.getAllResponseHeaders()).split(`\r
`),I={},Z=0;Z<q.length;Z++){var K=q[Z].split(":").map(g.trim);I[K[0].toLowerCase()]=K[1]}return I}var U=(function(N){c.__extends(q,N);function q(I,Z,K,X,x,L,Q){var k=N.call(this)||this;return K=K||{},K.rnd=g.cheapRandStr(),M()&&!K.envelope&&(K.envelope="json"),k.uri=I+g.toQueryString(K),k.headers=Z||{},k.body=X,k.method=Q?Q.toUpperCase():g.isEmptyArg(X)?"GET":"POST",k.requestMode=x,k.timeouts=L,k.timedOut=!1,k.requestComplete=!1,k.id=String(++Y),G[k.id]=k,k}return q.createRequest=function(I,Z,K,X,x,L,Q){var k=L||R.default.TIMEOUTS;return new q(I,Z,g.copy(K),X,x,k,Q)},q.prototype.complete=function(I,Z,K,X,x){this.requestComplete||(this.requestComplete=!0,!I&&Z&&this.emit("data",Z),this.emit("complete",I,Z,K,X,x),this.dispose())},q.prototype.abort=function(){this.dispose()},q.prototype.exec=function(){var I=this,Z=this.headers,K=this.requestMode==E.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,X=this.timer=setTimeout(function(){I.timedOut=!0,L.abort()},K),x=this.method,L=this.xhr=new XMLHttpRequest,Q=Z.accept,k=this.body,nt="text";if(Q?Q.indexOf("application/x-msgpack")===0&&(nt="arraybuffer"):Z.accept="application/json",k){var F=Z["content-type"]||(Z["content-type"]="application/json");F.indexOf("application/json")>-1&&typeof k!="string"&&(k=JSON.stringify(k))}L.open(x,this.uri,!0),L.responseType=nt,"authorization"in Z&&(L.withCredentials=!0);for(var it in Z)L.setRequestHeader(it,Z[it]);var at=function(At,Gt,kt,Ut){var pt,Nt=Gt+" (event type: "+At.type+")";!((pt=I==null?void 0:I.xhr)===null||pt===void 0)&&pt.statusText&&(Nt+=", current statusText is "+I.xhr.statusText),O.default.logAction(O.default.LOG_ERROR,"Request.on"+At.type+"()",Nt),I.complete(new b.PartialErrorInfo(Nt,kt,Ut))};L.onerror=function(At){at(At,"XHR error occurred",null,400)},L.onabort=function(At){I.timedOut?at(At,"Request aborted due to request timeout expiring",null,408):at(At,"Request cancelled",null,400)},L.ontimeout=function(At){at(At,"Request timed out",null,408)};var P,J,$,et=0,gt=!1,Ot=function(){if(clearTimeout(X),$=J<400,J==204){I.complete(null,null,null,null,J);return}P=I.requestMode==E.default.REQ_RECV_STREAM&&$&&T(L)},Lt=function(){var At;try{var Gt=A(L,"content-type"),kt=Gt?Gt.indexOf("application/json")>=0:L.responseType=="text";if(kt){var Ut=L.responseType==="arraybuffer"?z.default.BufferUtils.utf8Decode(L.response):String(L.responseText);Ut.length?At=JSON.parse(Ut):At=Ut,gt=!0}else At=L.response;At.response!==void 0?(J=At.statusCode,$=J<400,Z=At.headers,At=At.response):Z=y(L)}catch(Nt){I.complete(new b.PartialErrorInfo("Malformed response body from server: "+Nt.message,null,400));return}if($||g.isArray(At)){I.complete(null,At,Z,gt,J);return}var pt=H(At,Z);pt||(pt=new b.PartialErrorInfo("Error response received from server: "+J+" body was: "+z.default.Config.inspect(At),null,J)),I.complete(pt,At,Z,gt,J)};function Xt(){for(var At=L.responseText,Gt=At.length-1,kt,Ut;et<Gt&&(kt=At.indexOf(`
`,et))>-1;)Ut=At.slice(et,kt),et=kt+1,Ft(Ut)}var Ft=function(At){try{At=JSON.parse(At)}catch(Gt){I.complete(new b.PartialErrorInfo("Malformed response body from server: "+Gt.message,null,400));return}I.emit("data",At)},ce=function(){Xt(),I.streamComplete=!0,z.default.Config.nextTick(function(){I.complete()})};L.onreadystatechange=function(){var At=L.readyState;At<3||L.status!==0&&(J===void 0&&(J=L.status,J===1223&&(J=204),Ot()),At==3&&P?Xt():At==4&&(P?ce():Lt()))},L.send(k)},q.prototype.dispose=function(){var I=this.xhr;if(I){I.onreadystatechange=I.onerror=I.onabort=I.ontimeout=w,this.xhr=null;var Z=this.timer;Z&&(clearTimeout(Z),this.timer=null),this.requestComplete||I.abort()}delete G[this.id]},q})(p.default);r.default=U}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=h.__importStar(o(1)),p=h.__importDefault(o(24)),b=h.__importDefault(o(4)),O=h.__importDefault(o(45)),R=o(11),E=h.__importDefault(o(19)),z=h.__importDefault(o(14)),S=h.__importDefault(o(3)),H=h.__importDefault(o(15)),w=Math.pow(2,17);function Y(){}function G(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function D(K){return!!K.connection}function j(K){return g.isErrorInfoOrPartialErrorInfo(K)?(K.code||(K.statusCode===403?K.code=40300:(K.code=40170,K.statusCode=401)),K):new b.default(g.inspectError(K),K.code||40170,K.statusCode||401)}var M=function(K,X){if(S.default.Config.createHmac){var x=S.default.Config.createHmac("SHA256",X);return x.update(K),x.digest("base64")}return(0,R.stringify)((0,O.default)(K,X))};function A(K){if(!K)return"";typeof K=="string"&&(K=JSON.parse(K));var X=Object.create(null),x=g.keysArray(K,!0);if(!x)return"";x.sort();for(var L=0;L<x.length;L++)X[x[L]]=K[x[L]].sort();return JSON.stringify(X)}function T(K){if(K.authCallback)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(K.authUrl)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(K.key)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(K.tokenDetails)c.default.logAction(c.default.LOG_MINOR,"Auth()","using token auth with supplied token only");else{var X="authOptions must include valid authentication parameters";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",X),new Error(X)}}function y(K){return"useTokenAuth"in K&&!K.useTokenAuth}function U(K){return K.useTokenAuth||!y(K)&&(K.authCallback||K.authUrl||K.token||K.tokenDetails)}function N(K){return!K.key&&!K.authCallback&&!K.authUrl}var q=0;function I(){return q++}var Z=(function(){function K(X,x){if(this.authOptions={},this.client=X,this.tokenParams=x.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,U(x)){if(x.key&&!M){var L="client-side token request signing not supported";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",L),new Error(L)}N(x)&&c.default.logAction(c.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(x.defaultTokenParams,x),T(this.authOptions)}else{if(!x.key){var L="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw c.default.logAction(c.default.LOG_ERROR,"Auth()",L),new b.default(L,40160,401)}c.default.logAction(c.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(x)}}return K.prototype.authorize=function(X,x,L){var Q=this,k;if(typeof X=="function"&&!L?(L=X,k=X=null):typeof x=="function"&&!L?(L=x,k=null):k=x,!L&&this.client.options.promises)return g.promisify(this,"authorize",arguments);if(k&&k.key&&this.authOptions.key!==k.key)throw new b.default("Unable to update auth options with incompatible key",40102,401);k&&"force"in k&&(c.default.deprecated("The `force` auth option","If youre using this option to force `authorize()` to fetch a new token even if the current token has not expired, this is no longer necessary, as `authorize()` now always fetches a new token. Update your code to no longer pass the `force` auth option. Note that, in general, passing an auth options argument to `authorize()` will overwrite the librarys stored auth options, which may not be what you want. The library currently contains a special case behavior where passing an auth options object which only contains `{ force: true }` will _not_ overwrite the stored options. This special case behavior will be removed alongside support for the `force` option, so if youre currently passing `authorize()` an auth options object which only contains `{ force: true }`, you should stop passing it an auth options object entirely."),g.isOnlyPropIn(k,"force")&&(k=null)),this._forceNewToken(X,k,function(nt,F){if(nt){Q.client.connection&&nt.statusCode===z.default.Forbidden&&Q.client.connection.connectionManager.actOnErrorFromAuthorize(nt),L==null||L(nt);return}D(Q.client)?Q.client.connection.connectionManager.onAuthUpdated(F,L||Y):L==null||L(null,F)})},K.prototype.authorise=function(X,x,L){c.default.renamedMethod("Auth","authorise","authorize"),this.authorize(X,x,L)},K.prototype._forceNewToken=function(X,x,L){var Q=this;this.tokenDetails=null,this._saveTokenOptions(X,x),T(this.authOptions),this._ensureValidAuthCredentials(!0,function(k,nt){delete Q.tokenParams.timestamp,delete Q.authOptions.queryTime,L(k,nt)})},K.prototype.requestToken=function(X,x,L){var Q=this;if(typeof X=="function"&&!L?(L=X,x=X=null):typeof x=="function"&&!L&&(L=x,x=null),!L&&this.client.options.promises)return g.promisify(this,"requestToken",arguments);x=x||this.authOptions,X=X||g.copy(this.tokenParams);var k=L||Y,nt,F=this.client;if(x.authCallback)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),nt=x.authCallback;else if(x.authUrl)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),nt=function(et,gt){var Ot=g.mixin({accept:"application/json, text/plain"},x.authHeaders),Lt=x.authMethod&&x.authMethod.toLowerCase()==="post",Xt,Ft=x.authUrl.indexOf("?");Ft>-1&&(Xt=g.parseQueryString(x.authUrl.slice(Ft)),x.authUrl=x.authUrl.slice(0,Ft),Lt||(x.authParams=g.mixin(Xt,x.authParams)));var ce=g.mixin({},x.authParams||{},et),At=function(Ut,pt,Nt,oe){var Wt;if(Ut?c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+g.inspectError(Ut)):(Wt=Nt["content-type"],c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Wt+"; body: "+g.inspectBody(pt))),Ut||oe)return gt(Ut,pt);if(S.default.BufferUtils.isBuffer(pt)&&(pt=pt.toString()),!Wt){gt(new b.default("authUrl response is missing a content-type header",40170,401));return}var ne=Wt.indexOf("application/json")>-1,Zt=Wt.indexOf("text/plain")>-1||Wt.indexOf("application/jwt")>-1;if(!ne&&!Zt){gt(new b.default("authUrl responded with unacceptable content-type "+Wt+", should be either text/plain, application/jwt or application/json",40170,401));return}if(ne){if(pt.length>w){gt(new b.default("authUrl response exceeded max permitted length",40170,401));return}try{pt=JSON.parse(pt)}catch(re){gt(new b.default("Unexpected error processing authURL response; err = "+re.message,40170,401));return}}gt(null,pt,Wt)};if(c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+x.authUrl+"; Params: "+JSON.stringify(ce)+"; method: "+(Lt?"POST":"GET")),Lt){var Gt=Ot||{};Gt["content-type"]="application/x-www-form-urlencoded";var kt=g.toQueryString(ce).slice(1);Q.client.http.doUri(E.default.Post,F,x.authUrl,Gt,kt,Xt,At)}else Q.client.http.doUri(E.default.Get,F,x.authUrl,Ot||{},null,ce,At)};else if(x.key)c.default.logAction(c.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),nt=function(et,gt){Q.createTokenRequest(et,x,gt)};else{var it="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";c.default.logAction(c.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),k(new b.default(it,40171,403));return}"capability"in X&&(X.capability=A(X.capability));var at=function(et,gt){var Ot=et.keyName,Lt="/keys/"+Ot+"/requestToken",Xt=function(ce){return F.baseUri(ce)+Lt},Ft=g.defaultPostHeaders(Q.client.options);x.requestHeaders&&g.mixin(Ft,x.requestHeaders),c.default.logAction(c.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+Lt+"; Token params: "+JSON.stringify(et)),Q.client.http.do(E.default.Post,F,Xt,Ft,JSON.stringify(et),null,gt)},P=!1,J=this.client.options.timeouts.realtimeRequestTimeout,$=setTimeout(function(){P=!0;var et="Token request callback timed out after "+J/1e3+" seconds";c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",et),k(new b.default(et,40170,401))},J);nt(X,function(et,gt,Ot){if(!P){if(clearTimeout($),et){c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+g.inspectError(et)),k(j(et));return}if(typeof gt=="string"){gt.length===0?k(new b.default("Token string is empty",40170,401)):gt.length>w?k(new b.default("Token string exceeded max permitted length (was "+gt.length+" bytes)",40170,401)):gt==="undefined"||gt==="null"?k(new b.default("Token string was literal null/undefined",40170,401)):gt[0]==="{"&&!(Ot&&Ot.indexOf("application/jwt")>-1)?k(new b.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):k(null,{token:gt});return}if(typeof gt!="object"){var Lt="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof gt;c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",Lt),k(new b.default(Lt,40170,401));return}var Xt=JSON.stringify(gt).length;if(Xt>w&&!x.suppressMaxLengthCheck){k(new b.default("Token request/details object exceeded max permitted stringified size (was "+Xt+" bytes)",40170,401));return}if("issued"in gt){k(null,gt);return}if(!("keyName"in gt)){var Lt="Expected token request callback to call back with a token string, token request object, or token details object";c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()",Lt),k(new b.default(Lt,40170,401));return}at(gt,function(Ft,ce,At,Gt){if(Ft){c.default.logAction(c.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+g.inspectError(Ft)),k(j(Ft));return}Gt||(ce=JSON.parse(ce)),c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","token received"),k(null,ce)})}})},K.prototype.createTokenRequest=function(X,x,L){var Q=this;if(typeof X=="function"&&!L?(L=X,x=X=null):typeof x=="function"&&!L&&(L=x,x=null),!L&&this.client.options.promises)return g.promisify(this,"createTokenRequest",arguments);x=x||this.authOptions,X=X||g.copy(this.tokenParams);var k=x.key;if(!k){L(new b.default("No key specified",40101,403));return}var nt=k.split(":"),F=nt[0],it=nt[1];if(!it){L(new b.default("Invalid key specified",40101,403));return}if(X.clientId===""){L(new b.default("clientId cant be an empty string",40012,400));return}"capability"in X&&(X.capability=A(X.capability));var at=g.mixin({keyName:F},X),P=X.clientId||"",J=X.ttl||"",$=X.capability||"";(function(et){if(at.timestamp){et();return}Q.getTimestamp(x&&x.queryTime,function(gt,Ot){if(gt){L(gt);return}at.timestamp=Ot,et()})})(function(){var et=at.nonce||(at.nonce=G()),gt=at.timestamp,Ot=at.keyName+`
`+J+`
`+$+`
`+P+`
`+gt+`
`+et+`
`;at.mac=at.mac||M(Ot,it),c.default.logAction(c.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),L(null,at)})},K.prototype.getAuthParams=function(X){this.method=="basic"?X(null,{key:this.key}):this._ensureValidAuthCredentials(!1,function(x,L){if(x){X(x);return}if(!L)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");X(null,{access_token:L.token})})},K.prototype.getAuthHeaders=function(X){this.method=="basic"?X(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,function(x,L){if(x){X(x);return}if(!L)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");X(null,{authorization:"Bearer "+g.toBase64(L.token)})})},K.prototype.getTimestamp=function(X,x){!this.isTimeOffsetSet()&&(X||this.authOptions.queryTime)?this.client.time(x):x(null,this.getTimestampUsingOffset())},K.prototype.getTimestampUsingOffset=function(){return g.now()+(this.client.serverTimeOffset||0)},K.prototype.isTimeOffsetSet=function(){return this.client.serverTimeOffset!==null},K.prototype._saveBasicOptions=function(X){this.method="basic",this.key=X.key,this.basicKey=g.toBase64(X.key),this.authOptions=X||{},"clientId"in X&&this._userSetClientId(X.clientId)},K.prototype._saveTokenOptions=function(X,x){this.method="token",X&&(this.tokenParams=X),x&&(x.token&&(x.tokenDetails=typeof x.token=="string"?{token:x.token}:x.token),x.tokenDetails&&(this.tokenDetails=x.tokenDetails),"clientId"in x&&this._userSetClientId(x.clientId),this.authOptions=x)},K.prototype._ensureValidAuthCredentials=function(X,x){var L=this,Q=this.tokenDetails;if(Q){if(this._tokenClientIdMismatch(Q.clientId)){x(new b.default("Mismatch between clientId in token ("+Q.clientId+") and current clientId ("+this.clientId+")",40102,403));return}if(!this.isTimeOffsetSet()||!Q.expires||Q.expires>=this.getTimestampUsingOffset()){c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+Q.expires),x(null,Q);return}c.default.logAction(c.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=p.default.create())).push(x),!(this.currentTokenRequestId!==null&&!X)){var k=this.currentTokenRequestId=I();this.requestToken(this.tokenParams,this.authOptions,function(nt,F){if(L.currentTokenRequestId>k){c.default.logAction(c.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");return}L.currentTokenRequestId=null;var it=L.waitingForTokenRequest||Y;if(L.waitingForTokenRequest=null,nt){it(nt);return}it(null,L.tokenDetails=F)})}},K.prototype._userSetClientId=function(X){if(typeof X=="string"||X===null){if(X==="*")throw new b.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var x=this._uncheckedSetClientId(X);if(x)throw x}else throw new b.default("clientId must be either a string or null",40012,400)},K.prototype._uncheckedSetClientId=function(X){if(this._tokenClientIdMismatch(X)){var x="Unexpected clientId mismatch: client has "+this.clientId+", requested "+X,L=new b.default(x,40102,401);return c.default.logAction(c.default.LOG_ERROR,"Auth._uncheckedSetClientId()",x),L}else return this.clientId=this.tokenParams.clientId=X,null},K.prototype._tokenClientIdMismatch=function(X){return!!(this.clientId&&this.clientId!=="*"&&X&&X!=="*"&&this.clientId!==X)},K.isTokenErr=function(X){return X.code&&X.code>=40140&&X.code<40150},K.prototype.revokeTokens=function(X,x,L){if(U(this.client.options))throw new b.default("Cannot revoke tokens when using token auth",40162,401);var Q=this.client.options.keyName,k;if(typeof x=="function"?(L=x,k={}):k=x??{},L===void 0){if(this.client.options.promises)return g.promisify(this,"revokeTokens",[X,k]);L=Y}var nt=L,F=h.__assign({targets:X.map(function(J){return"".concat(J.type,":").concat(J.value)})},k),it=this.client.options.useBinaryProtocol?g.Format.msgpack:g.Format.json,at=g.defaultPostHeaders(this.client.options,it);this.client.options.headers&&g.mixin(at,this.client.options.headers);var P=g.encodeBody(F,it);H.default.post(this.client,"/keys/".concat(Q,"/revokeTokens"),P,at,{newBatchResponse:"true"},null,function(J,$,et,gt){if(J){nt(J);return}var Ot=gt?$:g.decodeBody($,it);nt(null,Ot)})},K})();r.default=Z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c.Get="get",c.Delete="delete",c.Post="post",c.Put="put",c.Patch="patch"})(h||(h={})),r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.HttpPaginatedResponse=r.PaginatedResult=void 0;var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(15)),b=h.__importDefault(o(14));function O(w){var Y=w.match(/^\.\/(\w+)\?(.*)$/);return Y&&Y[2]&&c.parseQueryString(Y[2])}function R(w){typeof w=="string"&&(w=w.split(","));for(var Y={},G=0;G<w.length;G++){var D=w[G].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(D){var j=O(D[1]);j&&(Y[D[2]]=j)}}return Y}function E(w,Y,G){return!(G&&(Y||typeof w.code=="number"))}var z=(function(){function w(Y,G,D,j,M,A){this.rest=Y,this.path=G,this.headers=D,this.envelope=j??null,this.bodyHandler=M,this.useHttpPaginatedResponse=A||!1}return w.prototype.get=function(Y,G){var D=this;p.default.get(this.rest,this.path,this.headers,Y,this.envelope,function(j,M,A,T,y){D.handlePage(j,M,A,T,y,G)})},w.prototype.delete=function(Y,G){var D=this;p.default.delete(this.rest,this.path,this.headers,Y,this.envelope,function(j,M,A,T,y){D.handlePage(j,M,A,T,y,G)})},w.prototype.post=function(Y,G,D){var j=this;p.default.post(this.rest,this.path,G,this.headers,Y,this.envelope,function(M,A,T,y,U){D&&j.handlePage(M,A,T,y,U,D)})},w.prototype.put=function(Y,G,D){var j=this;p.default.put(this.rest,this.path,G,this.headers,Y,this.envelope,function(M,A,T,y,U){D&&j.handlePage(M,A,T,y,U,D)})},w.prototype.patch=function(Y,G,D){var j=this;p.default.patch(this.rest,this.path,G,this.headers,Y,this.envelope,function(M,A,T,y,U){D&&j.handlePage(M,A,T,y,U,D)})},w.prototype.handlePage=function(Y,G,D,j,M,A){if(Y&&E(Y,G,this.useHttpPaginatedResponse)){g.default.logAction(g.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+c.inspectError(Y)),A==null||A(Y);return}var T,y,U;try{T=M==b.default.NoContent?[]:this.bodyHandler(G,D||{},j)}catch(N){A==null||A(Y||N);return}D&&(y=D.Link||D.link)&&(U=R(y)),this.useHttpPaginatedResponse?A(null,new H(this,T,D||{},M,U,Y)):A(null,new S(this,T,U))},w})(),S=(function(){function w(Y,G,D){var j=this;this.resource=Y,this.items=G;var M=this;D&&("first"in D&&(this.first=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"first",[]);M.get(D.first,A)}),"current"in D&&(this.current=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"current",[]);M.get(D.current,A)}),this.next=function(A){if(!A&&M.resource.rest.options.promises)return c.promisify(M,"next",[]);"next"in D?M.get(D.next,A):A(null,null)},this.hasNext=function(){return"next"in D},this.isLast=function(){var A;return!(!((A=j.hasNext)===null||A===void 0)&&A.call(j))})}return w.prototype.get=function(Y,G){var D=this.resource;p.default.get(D.rest,D.path,D.headers,Y,D.envelope,function(j,M,A,T,y){D.handlePage(j,M,A,T,y,G)})},w})();r.PaginatedResult=S;var H=(function(w){h.__extends(Y,w);function Y(G,D,j,M,A,T){var y=w.call(this,G,D,A)||this;return y.statusCode=M,y.success=M<300&&M>=200,y.headers=j,y.errorCode=T&&T.code,y.errorMessage=T&&T.message,y}return Y.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},Y})(S);r.HttpPaginatedResponse=H,r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.isRetriable=void 0;var h=o(0),c=h.__importDefault(o(4)),g={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},p={disconnected:function(){return c.default.fromValues({statusCode:400,code:g.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return c.default.fromValues({statusCode:400,code:g.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return c.default.fromValues({statusCode:400,code:g.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return c.default.fromValues({statusCode:400,code:g.CLOSING,message:"Connection closing"})},closed:function(){return c.default.fromValues({statusCode:400,code:g.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return c.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return c.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};function b(O){return!O.statusCode||!O.code||O.statusCode>=500?!0:Object.values(g).includes(O.code)}r.isRetriable=b,r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c[c.REQ_SEND=0]="REQ_SEND",c[c.REQ_RECV=1]="REQ_RECV",c[c.REQ_RECV_POLL=2]="REQ_RECV_POLL",c[c.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"})(h||(h={})),r.default=h}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(5),o(58),o(11),o(40),o(32),o(25),o(27),o(28),o(59),o(60))})(this,function(h){return h})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(2)),g=(function(){function p(b){this.members=b||[]}return p.prototype.call=function(){for(var b=[],O=0;O<arguments.length;O++)b[O]=arguments[O];for(var R=0,E=this.members;R<E.length;R++){var z=E[R];if(z)try{z.apply(void 0,b)}catch(S){c.default.logAction(c.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+S+"; stack = "+S.stack)}}},p.prototype.push=function(){for(var b,O=[],R=0;R<arguments.length;R++)O[R]=arguments[R];(b=this.members).push.apply(b,O)},p.create=function(b){var O=new p(b);return Object.assign(function(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return O.call.apply(O,R)},{push:function(R){return O.push(R)}})},p})();r.default=g}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){(function(){var c=h,g=c.lib,p=g.Base,b=c.enc,O=b.Utf8,R=c.algo;R.HMAC=p.extend({init:function(E,z){E=this._hasher=new E.init,typeof z=="string"&&(z=O.parse(z));var S=E.blockSize,H=S*4;z.sigBytes>H&&(z=E.finalize(z)),z.clamp();for(var w=this._oKey=z.clone(),Y=this._iKey=z.clone(),G=w.words,D=Y.words,j=0;j<S;j++)G[j]^=1549556828,D[j]^=909522486;w.sigBytes=Y.sigBytes=H,this.reset()},reset:function(){var E=this._hasher;E.reset(),E.update(this._iKey)},update:function(E){return this._hasher.update(E),this},finalize:function(E){var z=this._hasher,S=z.finalize(E);z.reset();var H=z.finalize(this._oKey.clone().concat(S));return H}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(10)),g=h.__importStar(o(1)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),O=h.__importDefault(o(21)),R=h.__importDefault(o(4)),E=h.__importDefault(o(3)),z=c.default.Action,S=c.default.fromValues({action:z.CLOSE}),H=c.default.fromValues({action:z.DISCONNECT}),w=(function(Y){h.__extends(G,Y);function G(D,j,M,A){var T=Y.call(this)||this;return A&&(M.format=void 0,M.heartbeats=!0),T.connectionManager=D,D.registerProposedTransport(T),T.auth=j,T.params=M,T.timeouts=M.options.timeouts,T.format=M.format,T.isConnected=!1,T.isFinished=!1,T.isDisposed=!1,T.maxIdleInterval=null,T.idleTimer=null,T.lastActivity=null,T}return G.prototype.connect=function(){},G.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",O.default.closed())},G.prototype.disconnect=function(D){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",D||O.default.disconnected())},G.prototype.fail=function(D){this.isConnected&&this.requestDisconnect(),this.finish("failed",D||O.default.failed())},G.prototype.finish=function(D,j){var M;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((M=this.idleTimer)!==null&&M!==void 0?M:void 0),this.idleTimer=null,this.emit(D,j),this.dispose())},G.prototype.onProtocolMessage=function(D){switch(b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+c.default.stringify(D)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),D.action){case z.HEARTBEAT:b.default.logAction(b.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",D.id);break;case z.CONNECTED:this.onConnect(D),this.emit("connected",D.error,D.connectionId,D.connectionDetails,D);break;case z.CLOSED:this.onClose(D);break;case z.DISCONNECTED:this.onDisconnect(D);break;case z.ACK:this.emit("ack",D.msgSerial,D.count);break;case z.NACK:this.emit("nack",D.msgSerial,D.count,D.error);break;case z.SYNC:this.connectionManager.onChannelMessage(D,this);break;case z.ACTIVATE:break;case z.AUTH:this.auth.authorize(function(j){j&&b.default.logAction(b.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+g.inspectError(j))});break;case z.ERROR:if(b.default.logAction(b.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+E.default.Config.inspect(D.error)+(D.channel?", channel: "+D.channel:"")),D.channel===void 0){this.onFatalError(D);break}this.connectionManager.onChannelMessage(D,this);break;default:this.connectionManager.onChannelMessage(D,this)}},G.prototype.onConnect=function(D){if(this.isConnected=!0,!D.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var j=D.connectionDetails.maxIdleInterval;j&&(this.maxIdleInterval=j+this.timeouts.realtimeRequestTimeout,this.onActivity())},G.prototype.onDisconnect=function(D){var j=D&&D.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onDisconnect()","err = "+g.inspectError(j)),this.finish("disconnected",j)},G.prototype.onFatalError=function(D){var j=D&&D.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onFatalError()","err = "+g.inspectError(j)),this.finish("failed",j)},G.prototype.onClose=function(D){var j=D&&D.error;b.default.logAction(b.default.LOG_MINOR,"Transport.onClose()","err = "+g.inspectError(j)),this.finish("closed",j)},G.prototype.requestClose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestClose()",""),this.send(S)},G.prototype.requestDisconnect=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(H)},G.prototype.ping=function(D){var j={action:c.default.Action.HEARTBEAT};D&&(j.id=D),this.send(c.default.fromValues(j))},G.prototype.dispose=function(){b.default.logAction(b.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},G.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=g.now(),this.setIdleTimer(this.maxIdleInterval+100))},G.prototype.setIdleTimer=function(D){var j=this;this.idleTimer||(this.idleTimer=setTimeout(function(){j.onIdleTimerExpire()},D))},G.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var D=g.now()-this.lastActivity,j=this.maxIdleInterval-D;if(j<=0){var M="No activity seen from realtime in "+D+"ms; assuming connection has dropped";b.default.logAction(b.default.LOG_ERROR,"Transport.onIdleTimerExpire()",M),this.disconnect(new R.default(M,80003,408))}else this.setIdleTimer(j+100)},G.tryConnect=function(D,j,M,A,T){var y=new D(j,M,A),U,N=function(I){clearTimeout(U),T({event:this.event,error:I})},q=j.options.timeouts.realtimeRequestTimeout;U=setTimeout(function(){y.off(["preconnect","disconnected","failed"]),y.dispose(),N.call({event:"disconnected"},new R.default("Timeout waiting for transport to indicate itself viable",5e4,500))},q),y.on(["failed","disconnected"],N),y.on("preconnect",function(){b.default.logAction(b.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+y),clearTimeout(U),y.off(["failed","disconnected"],N),T(null,y)}),y.connect()},G})(p.default);r.default=w}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(40),o(25))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.Base,b=g.WordArray,O=c.algo,R=O.MD5,E=O.EvpKDF=p.extend({cfg:p.extend({keySize:128/32,hasher:R,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z)},compute:function(z,S){for(var H,w=this.cfg,Y=w.hasher.create(),G=b.create(),D=G.words,j=w.keySize,M=w.iterations;D.length<j;){H&&Y.update(H),H=Y.update(z).finalize(S),Y.reset();for(var A=1;A<M;A++)H=Y.finalize(H),Y.reset();G.concat(H)}return G.sigBytes=j*4,G}});c.EvpKDF=function(z,S,H){return E.create(H).compute(z,S)}})(),h.EvpKDF})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(27))})(this,function(h){h.lib.Cipher||(function(c){var g=h,p=g.lib,b=p.Base,O=p.WordArray,R=p.BufferedBlockAlgorithm,E=g.enc;E.Utf8;var z=E.Base64,S=g.algo,H=S.EvpKDF,w=p.Cipher=R.extend({cfg:b.extend(),createEncryptor:function(Z,K){return this.create(this._ENC_XFORM_MODE,Z,K)},createDecryptor:function(Z,K){return this.create(this._DEC_XFORM_MODE,Z,K)},init:function(Z,K,X){this.cfg=this.cfg.extend(X),this._xformMode=Z,this._key=K,this.reset()},reset:function(){R.reset.call(this),this._doReset()},process:function(Z){return this._append(Z),this._process()},finalize:function(Z){Z&&this._append(Z);var K=this._doFinalize();return K},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function Z(K){return typeof K=="string"?I:U}return function(K){return{encrypt:function(X,x,L){return Z(x).encrypt(K,X,x,L)},decrypt:function(X,x,L){return Z(x).decrypt(K,X,x,L)}}}})()});p.StreamCipher=w.extend({_doFinalize:function(){var Z=this._process(!0);return Z},blockSize:1});var Y=g.mode={},G=p.BlockCipherMode=b.extend({createEncryptor:function(Z,K){return this.Encryptor.create(Z,K)},createDecryptor:function(Z,K){return this.Decryptor.create(Z,K)},init:function(Z,K){this._cipher=Z,this._iv=K}}),D=Y.CBC=(function(){var Z=G.extend();Z.Encryptor=Z.extend({processBlock:function(X,x){var L=this._cipher,Q=L.blockSize;K.call(this,X,x,Q),L.encryptBlock(X,x),this._prevBlock=X.slice(x,x+Q)}}),Z.Decryptor=Z.extend({processBlock:function(X,x){var L=this._cipher,Q=L.blockSize,k=X.slice(x,x+Q);L.decryptBlock(X,x),K.call(this,X,x,Q),this._prevBlock=k}});function K(X,x,L){var Q,k=this._iv;k?(Q=k,this._iv=c):Q=this._prevBlock;for(var nt=0;nt<L;nt++)X[x+nt]^=Q[nt]}return Z})(),j=g.pad={},M=j.Pkcs7={pad:function(Z,K){for(var X=K*4,x=X-Z.sigBytes%X,L=x<<24|x<<16|x<<8|x,Q=[],k=0;k<x;k+=4)Q.push(L);var nt=O.create(Q,x);Z.concat(nt)},unpad:function(Z){var K=Z.words[Z.sigBytes-1>>>2]&255;Z.sigBytes-=K}};p.BlockCipher=w.extend({cfg:w.cfg.extend({mode:D,padding:M}),reset:function(){var Z;w.reset.call(this);var K=this.cfg,X=K.iv,x=K.mode;this._xformMode==this._ENC_XFORM_MODE?Z=x.createEncryptor:(Z=x.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Z?this._mode.init(this,X&&X.words):(this._mode=Z.call(x,this,X&&X.words),this._mode.__creator=Z)},_doProcessBlock:function(Z,K){this._mode.processBlock(Z,K)},_doFinalize:function(){var Z,K=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(K.pad(this._data,this.blockSize),Z=this._process(!0)):(Z=this._process(!0),K.unpad(Z)),Z},blockSize:128/32});var A=p.CipherParams=b.extend({init:function(Z){this.mixIn(Z)},toString:function(Z){return(Z||this.formatter).stringify(this)}}),T=g.format={},y=T.OpenSSL={stringify:function(Z){var K,X=Z.ciphertext,x=Z.salt;return x?K=O.create([1398893684,1701076831]).concat(x).concat(X):K=X,K.toString(z)},parse:function(Z){var K,X=z.parse(Z),x=X.words;return x[0]==1398893684&&x[1]==1701076831&&(K=O.create(x.slice(2,4)),x.splice(0,4),X.sigBytes-=16),A.create({ciphertext:X,salt:K})}},U=p.SerializableCipher=b.extend({cfg:b.extend({format:y}),encrypt:function(Z,K,X,x){x=this.cfg.extend(x);var L=Z.createEncryptor(X,x),Q=L.finalize(K),k=L.cfg;return A.create({ciphertext:Q,key:X,iv:k.iv,algorithm:Z,mode:k.mode,padding:k.padding,blockSize:Z.blockSize,formatter:x.format})},decrypt:function(Z,K,X,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var L=Z.createDecryptor(X,x).finalize(K.ciphertext);return L},_parse:function(Z,K){return typeof Z=="string"?K.parse(Z,this):Z}}),N=g.kdf={},q=N.OpenSSL={execute:function(Z,K,X,x){x||(x=O.random(64/8));var L=H.create({keySize:K+X}).compute(Z,x),Q=O.create(L.words.slice(K),X*4);return L.sigBytes=K*4,A.create({key:L,iv:Q,salt:x})}},I=p.PasswordBasedCipher=U.extend({cfg:U.cfg.extend({kdf:q}),encrypt:function(Z,K,X,x){x=this.cfg.extend(x);var L=x.kdf.execute(X,Z.keySize,Z.ivSize);x.iv=L.iv;var Q=U.encrypt.call(this,Z,K,L.key,x);return Q.mixIn(L),Q},decrypt:function(Z,K,X,x){x=this.cfg.extend(x),K=this._parse(K,x.format);var L=x.kdf.execute(X,Z.keySize,Z.ivSize,K.salt);x.iv=L.iv;var Q=U.decrypt.call(this,Z,K,L.key,x);return Q}})})()})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.Request=r.createRequest=void 0;var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(12)),p=h.__importDefault(o(3)),b=h.__importDefault(o(7)),O=o(4),R=h.__importDefault(o(8)),E=h.__importDefault(o(2)),z=h.__importDefault(o(22)),S=c.getGlobalObject(),H=function(){},w=S._ablyjs_jsonp={};w._=function(T){return w["_"+T]||H};var Y=1,G="jsonp";function D(T,y,U,N,q,I,Z){return I=I||R.default.TIMEOUTS,new M(void 0,T,y,c.copy(U),N,q,I,Z)}r.createRequest=D;var j=(function(T){h.__extends(y,T);function y(U,N,q){var I=T.call(this,U,N,q)||this;return I.shortName=G,q.stream=!1,I}return y.isAvailable=function(){return p.default.Config.jsonpSupported&&p.default.Config.allowComet},y.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},y.prototype.createRequest=function(U,N,q,I,Z,K,X){return K=(this===null||this===void 0?void 0:this.timeouts)||K||R.default.TIMEOUTS,D(U,N,q,I,Z,K,X)},y})(g.default),M=(function(T){h.__extends(y,T);function y(U,N,q,I,Z,K,X,x){var L=T.call(this)||this;return U===void 0&&(U=Y++),L.id=U,L.uri=N,L.params=I||{},L.params.rnd=c.cheapRandStr(),q&&(q["X-Ably-Version"]&&(L.params.v=q["X-Ably-Version"]),q["X-Ably-Lib"]&&(L.params.lib=q["X-Ably-Lib"])),L.body=Z,L.method=x,L.requestMode=K,L.timeouts=X,L.requestComplete=!1,L}return y.prototype.exec=function(){var U=this,N=this.id,q=this.body,I=this.method,Z=this.uri,K=this.params;K.callback="_ablyjs_jsonp._("+N+")",K.envelope="jsonp",q&&(K.body=q),I&&I!=="get"&&(K.method=I);var X=this.script=document.createElement("script"),x=Z+c.toQueryString(K);X.src=x,X.src.split("/").slice(-1)[0]!==x.split("/").slice(-1)[0]&&E.default.logAction(E.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),X.async=!0,X.type="text/javascript",X.charset="UTF-8",X.onerror=function(k){U.complete(new O.PartialErrorInfo("JSONP script error (event: "+p.default.Config.inspect(k)+")",null,400))},w["_"+N]=function(k){if(k.statusCode){var nt=k.response;if(k.statusCode==204)U.complete(null,null,null,k.statusCode);else if(!nt)U.complete(new O.PartialErrorInfo("Invalid server response: no envelope detected",null,500));else if(k.statusCode<400||c.isArray(nt))U.complete(null,nt,k.headers,k.statusCode);else{var F=nt.error||new O.PartialErrorInfo("Error response received from server",null,k.statusCode);U.complete(F)}}else U.complete(null,k)};var L=this.requestMode==z.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),L);var Q=document.getElementsByTagName("head")[0];Q.insertBefore(X,Q.firstChild)},y.prototype.complete=function(U,N,q,I){if(q=q||{},!this.requestComplete){this.requestComplete=!0;var Z=void 0;N&&(Z=typeof N=="string"?"text/plain":"application/json",q["content-type"]=Z,this.emit("data",N)),this.emit("complete",U,N,q,!0,I),this.dispose()}},y.prototype.abort=function(){this.dispose()},y.prototype.dispose=function(){var U=this.timer;U&&(clearTimeout(U),this.timer=null);var N=this.script;N.parentNode&&N.parentNode.removeChild(N),delete w[this.id],this.emit("disposed")},y})(b.default);r.Request=M;function A(T){return S.JSONPTransport=j,j.isAvailable()&&(T.supportedTransports[G]=j),j}r.default=A}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(2)),p=h.__importDefault(o(8)),b=h.__importDefault(o(18)),O=h.__importDefault(o(46)),R=h.__importDefault(o(20)),E=h.__importDefault(o(33)),z=h.__importDefault(o(4)),S=h.__importDefault(o(49)),H=h.__importDefault(o(19)),w=h.__importDefault(o(3)),Y=h.__importDefault(o(9)),G=h.__importDefault(o(16)),D=h.__importDefault(o(15)),j=function(){},M=(function(){function T(y){if(!y){var U="no options provided";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",U),new Error(U)}var N=p.default.objectifyOptions(y);N.log?(g.default.setLog(N.log.level,N.log.handler),g.default.deprecated("The `log` client option","Equivalent functionality is provided by the `logLevel` and `logHandler` client options. Update your client options code of the form `{ log: { level: logLevel, handler: logHandler } }` to instead be `{ logLevel, logHandler }`.")):g.default.setLog(N.logLevel,N.logHandler),g.default.logAction(g.default.LOG_MICRO,"Rest()","initialized with clientOptions "+w.default.Config.inspect(y));var q=this.options=p.default.normaliseOptions(N);if(q.key){var I=q.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!I){var U="invalid key parameter";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",U),new z.default(U,40400,404)}q.keyName=I[1],q.keySecret=I[2]}if("clientId"in q)if(typeof q.clientId=="string"||q.clientId===null){if(q.clientId==="*")throw new z.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new z.default("clientId must be either a string or null",40012,400);g.default.logAction(g.default.LOG_MINOR,"Rest()","started; version = "+p.default.version),this.baseUri=this.authority=function(Z){return p.default.getHttpScheme(q)+Z+":"+p.default.getPort(q,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new w.default.Http(q),this.auth=new b.default(this,q),this.channels=new A(this),this.push=new O.default(this)}return T.prototype.stats=function(y,U){if(U===void 0)if(typeof y=="function")U=y,y=null;else{if(this.options.promises)return c.promisify(this,"stats",[y]);U=j}var N=c.defaultGetHeaders(this.options),q=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,I=this.http.supportsLinkHeaders?void 0:q;this.options.headers&&c.mixin(N,this.options.headers),new R.default(this,"/stats",N,I,function(Z,K,X){for(var x=X?Z:JSON.parse(Z),L=0;L<x.length;L++)x[L]=S.default.fromValues(x[L]);return x}).get(y,U)},T.prototype.time=function(y,U){var N=this;if(U===void 0){if(typeof y=="function")U=y,y=null;else if(this.options.promises)return c.promisify(this,"time",[y])}var q=U||j,I=c.defaultGetHeaders(this.options);this.options.headers&&c.mixin(I,this.options.headers);var Z=function(K){return N.authority(K)+"/time"};this.http.do(H.default.Get,this,Z,I,null,y,function(K,X,x,L){if(K){q(K);return}L||(X=JSON.parse(X));var Q=X[0];if(!Q){q(new z.default("Internal error (unexpected result type from GET /time)",5e4,500));return}N.serverTimeOffset=Q-c.now(),q(null,Q)})},T.prototype.request=function(y,U,N,q,I,Z){var K=this.options.useBinaryProtocol,X=K?w.default.Config.msgpack.encode:JSON.stringify,x=K?w.default.Config.msgpack.decode:JSON.parse,L=K?c.Format.msgpack:c.Format.json,Q=this.http.supportsLinkHeaders?void 0:L;N=N||{};var k=y.toLowerCase(),nt=k=="get"?c.defaultGetHeaders(this.options,L):c.defaultPostHeaders(this.options,L);if(Z===void 0){if(this.options.promises)return c.promisify(this,"request",[y,U,N,q,I]);Z=j}typeof q!="string"&&(q=X(q)),this.options.headers&&c.mixin(nt,this.options.headers),I&&c.mixin(nt,I);var F=new R.default(this,U,nt,Q,function(it,at,P){return c.ensureArray(P?it:x(it))},!0);if(!c.arrIn(w.default.Http.methods,k))throw new z.default("Unsupported method "+k,40500,405);c.arrIn(w.default.Http.methodsWithBody,k)?F[k](N,q,Z):F[k](N,Z)},T.prototype.batchPublish=function(y,U){if(U===void 0){if(this.options.promises)return c.promisify(this,"batchPublish",[y]);U=j}var N=U,q,I;c.isArray(y)?(q=y,I=!1):(q=[y],I=!0);var Z=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,K=c.defaultPostHeaders(this.options,Z);this.options.headers&&c.mixin(K,this.options.headers);var X=c.encodeBody(q,Z);D.default.post(this,"/messages",X,K,{newBatchResponse:"true"},null,function(x,L,Q,k){if(x){N(x);return}var nt=k?L:c.decodeBody(L,Z);I?N(null,nt[0]):N(null,nt)})},T.prototype.batchPresence=function(y,U){if(U===void 0){if(this.options.promises)return c.promisify(this,"batchPresence",[y]);U=j}var N=U,q=this.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,I=c.defaultPostHeaders(this.options,q);this.options.headers&&c.mixin(I,this.options.headers);var Z=y.join(",");D.default.get(this,"/presence",I,{newBatchResponse:"true",channels:Z},null,function(K,X,x,L){if(K){N(K);return}var Q=L?X:c.decodeBody(X,q);N(null,Q)})},T.prototype.setLog=function(y){g.default.setLog(y.level,y.handler)},T.Promise=function(y){return y=p.default.objectifyOptions(y),y.promises=!0,new T(y)},T.Callbacks=T,T.Platform=w.default,T.Message=Y.default,T.PresenceMessage=G.default,T})(),A=(function(){function T(y){this.rest=y,this.all=Object.create(null)}return T.prototype.get=function(y,U){y=String(y);var N=this.all[y];return N?U&&N.setOptions(U):this.all[y]=N=new E.default(this.rest,y,U),N},T.prototype.release=function(y){delete this.all[String(y)]},T})();r.default=M}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return h.enc.Utf8})}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.WordArray,O=p.Hasher,R=g.algo,E=[],z=[];(function(){function w(j){for(var M=c.sqrt(j),A=2;A<=M;A++)if(!(j%A))return!1;return!0}function Y(j){return(j-(j|0))*4294967296|0}for(var G=2,D=0;D<64;)w(G)&&(D<8&&(E[D]=Y(c.pow(G,1/2))),z[D]=Y(c.pow(G,1/3)),D++),G++})();var S=[],H=R.SHA256=O.extend({_doReset:function(){this._hash=new b.init(E.slice(0))},_doProcessBlock:function(w,Y){for(var G=this._hash.words,D=G[0],j=G[1],M=G[2],A=G[3],T=G[4],y=G[5],U=G[6],N=G[7],q=0;q<64;q++){if(q<16)S[q]=w[Y+q]|0;else{var I=S[q-15],Z=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,K=S[q-2],X=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;S[q]=Z+S[q-7]+X+S[q-16]}var x=T&y^~T&U,L=D&j^D&M^j&M,Q=(D<<30|D>>>2)^(D<<19|D>>>13)^(D<<10|D>>>22),k=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),nt=N+k+x+z[q]+S[q],F=Q+L;N=U,U=y,y=T,T=A+nt|0,A=M,M=j,j=D,D=nt+F|0}G[0]=G[0]+D|0,G[1]=G[1]+j|0,G[2]=G[2]+M|0,G[3]=G[3]+A|0,G[4]=G[4]+T|0,G[5]=G[5]+y|0,G[6]=G[6]+U|0,G[7]=G[7]+N|0},_doFinalize:function(){var w=this._data,Y=w.words,G=this._nDataBytes*8,D=w.sigBytes*8;return Y[D>>>5]|=128<<24-D%32,Y[(D+64>>>9<<4)+14]=c.floor(G/4294967296),Y[(D+64>>>9<<4)+15]=G,w.sigBytes=Y.length*4,this._process(),this._hash},clone:function(){var w=O.clone.call(this);return w._hash=this._hash.clone(),w}});g.SHA256=O._createHelper(H),g.HmacSHA256=O._createHmacHelper(H)})(Math),h.SHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(2)),b=h.__importDefault(o(34)),O=h.__importDefault(o(9)),R=h.__importDefault(o(4)),E=h.__importDefault(o(20)),z=h.__importDefault(o(15)),S=h.__importDefault(o(3));function H(){}var w=9;function Y(j){return c.arrEvery(j,function(M){return!M.id})}function G(j){var M=j||{};if(M.cipher){if(!S.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var A=S.default.Crypto.getCipher(M.cipher);M.cipher=A.cipherParams,M.channelCipher=A.cipher}else"cipher"in M&&(M.cipher=void 0,M.channelCipher=null);return M}var D=(function(j){h.__extends(M,j);function M(A,T,y){var U=j.call(this)||this;return p.default.logAction(p.default.LOG_MINOR,"Channel()","started; name = "+T),U.rest=A,U.name=T,U.basePath="/channels/"+encodeURIComponent(T),U.presence=new b.default(U),U.channelOptions=G(y),U}return M.prototype.setOptions=function(A){this.channelOptions=G(A)},M.prototype.history=function(A,T){if(p.default.logAction(p.default.LOG_MICRO,"Channel.history()","channel = "+this.name),T===void 0)if(typeof A=="function")T=A,A=null;else{if(this.rest.options.promises)return c.promisify(this,"history",arguments);T=H}this._history(A,T)},M.prototype._history=function(A,T){var y=this.rest,U=y.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,N=this.rest.http.supportsLinkHeaders?void 0:U,q=c.defaultGetHeaders(y.options,U);y.options.headers&&c.mixin(q,y.options.headers);var I=this.channelOptions;new E.default(y,this.basePath+"/messages",q,N,function(Z,K,X){return O.default.fromResponseBody(Z,I,X?void 0:U)}).get(A,T)},M.prototype.publish=function(){var A=this,T=arguments.length,y=arguments[0],U=arguments[1],N=arguments[T-1],q,I;if(typeof N!="function"){if(this.rest.options.promises)return c.promisify(this,"publish",arguments);N=H}if(typeof y=="string"||y===null)q=[O.default.fromValues({name:y,data:U})],I=arguments[2];else if(c.isObject(y))q=[O.default.fromValues(y)],I=arguments[1];else if(c.isArray(y))q=O.default.fromValuesArray(y),I=arguments[1];else throw new R.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);(typeof I!="object"||!I)&&(I={});var Z=this.rest,K=Z.options,X=K.useBinaryProtocol?c.Format.msgpack:c.Format.json,x=Z.options.idempotentRestPublishing,L=c.defaultPostHeaders(Z.options,X);if(K.headers&&c.mixin(L,K.headers),x&&Y(q)){var Q=c.randomString(w);c.arrForEach(q,function(k,nt){k.id=Q+":"+nt.toString()})}O.default.encodeArray(q,this.channelOptions,function(k){if(k){N(k);return}var nt=O.default.getMessagesSize(q),F=K.maxMessageSize;if(nt>F){N(new R.default("Maximum size of messages that can be published at once exceeded ( was "+nt+" bytes; limit is "+F+" bytes)",40009,400));return}A._publish(O.default.serialize(q,X),L,I,N)})},M.prototype._publish=function(A,T,y,U){z.default.post(this.rest,this.basePath+"/messages",A,T,y,null,U)},M.prototype.status=function(A){if(typeof A!="function"&&this.rest.options.promises)return c.promisify(this,"status",[]);var T=this.rest.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,y=c.defaultPostHeaders(this.rest.options,T);z.default.get(this.rest,this.basePath,y,{},T,A||H)},M})(g.default);r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(2)),b=h.__importDefault(o(20)),O=h.__importDefault(o(16));function R(){}var E=(function(z){h.__extends(S,z);function S(H){var w=z.call(this)||this;return w.channel=H,w.basePath=H.basePath+"/presence",w}return S.prototype.get=function(H,w){if(p.default.logAction(p.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),w===void 0)if(typeof H=="function")w=H,H=null;else{if(this.channel.rest.options.promises)return c.promisify(this,"get",arguments);w=R}var Y=this.channel.rest,G=Y.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,D=this.channel.rest.http.supportsLinkHeaders?void 0:G,j=c.defaultGetHeaders(Y.options,G);Y.options.headers&&c.mixin(j,Y.options.headers);var M=this.channel.channelOptions;new b.default(Y,this.basePath,j,D,function(A,T,y){return O.default.fromResponseBody(A,M,y?void 0:G)}).get(H,w)},S.prototype.history=function(H,w){return p.default.logAction(p.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(H,w)},S.prototype._history=function(H,w){if(w===void 0)if(typeof H=="function")w=H,H=null;else{if(this.channel.rest.options.promises)return c.promisify(this,"_history",[H]);w=R}var Y=this.channel.rest,G=Y.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,D=this.channel.rest.http.supportsLinkHeaders?void 0:G,j=c.defaultGetHeaders(Y.options,G);Y.options.headers&&c.mixin(j,Y.options.headers);var M=this.channel.channelOptions;new b.default(Y,this.basePath+"/history",j,D,function(A,T,y){return O.default.fromResponseBody(A,M,y?void 0:G)}).get(H,w)},S})(g.default);r.default=E}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0}),r.TransportParams=void 0;var c=o(0),g=c.__importDefault(o(10)),p=c.__importStar(o(1)),b=c.__importStar(o(52)),O=c.__importStar(o(8)),R=c.__importDefault(o(3)),E=c.__importDefault(o(7)),z=c.__importDefault(o(36)),S=c.__importDefault(o(2)),H=c.__importDefault(o(37)),w=c.__importStar(o(21)),Y=c.__importStar(o(4)),G=c.__importDefault(o(18)),D=c.__importDefault(o(9)),j=c.__importDefault(o(24)),M=c.__importDefault(o(53)),A=c.__importDefault(o(26)),T=c.__importDefault(o(14)),y=function(){var it;return typeof R.default.WebStorage<"u"&&((it=R.default.WebStorage)===null||it===void 0?void 0:it.localSupported)},U=function(){var it;return typeof R.default.WebStorage<"u"&&((it=R.default.WebStorage)===null||it===void 0?void 0:it.sessionSupported)},N=g.default.Action,q=function(){},I="ably-transport-preference",Z="ably-connection-recovery";function K(){var it,at;return U()&&((at=(it=R.default.WebStorage)===null||it===void 0?void 0:it.getSession)===null||at===void 0?void 0:at.call(it,Z))}function X(it){var at,P;return U()&&((P=(at=R.default.WebStorage)===null||at===void 0?void 0:at.setSession)===null||P===void 0?void 0:P.call(at,Z,it))}function x(){var it,at;return U()&&((at=(it=R.default.WebStorage)===null||it===void 0?void 0:it.removeSession)===null||at===void 0?void 0:at.call(it,Z))}function L(it,at){return p.arrIndexOf(R.default.Defaults.transportPreferenceOrder,it.shortName)>p.arrIndexOf(R.default.Defaults.transportPreferenceOrder,at.shortName)}function Q(it,at,P){var J;if(it.channel!==at.channel||(J=it.action)!==N.PRESENCE&&J!==N.MESSAGE||J!==at.action)return!1;var $=J===N.PRESENCE?"presence":"messages",et=it[$].concat(at[$]),gt=D.default.getMessagesSize(et);return gt>P||!p.allSame(et,"clientId")||!p.arrEvery(et,function(Ot){return!Ot.id})?!1:(it[$]=et,!0)}function k(it){try{return JSON.parse(it)}catch{return null}}var nt=(function(){function it(at,P,J,$){this.options=at,this.host=P,this.mode=J,this.connectionKey=$,this.format=at.useBinaryProtocol?p.Format.msgpack:p.Format.json}return it.prototype.getConnectParams=function(at){var P=at?p.copy(at):{},J=this.options;switch(this.mode){case"upgrade":P.upgrade=this.connectionKey;break;case"resume":P.resume=this.connectionKey;break;case"recover":{var $=k(J.recover);$&&(P.recover=$.connectionKey);break}}return J.clientId!==void 0&&(P.clientId=J.clientId),J.echoMessages===!1&&(P.echo="false"),this.format!==void 0&&(P.format=this.format),this.stream!==void 0&&(P.stream=this.stream),this.heartbeats!==void 0&&(P.heartbeats=this.heartbeats),P.v=O.default.protocolVersion,P.agent=(0,O.getAgentString)(this.options),J.transportParams!==void 0&&p.mixin(P,J.transportParams),P},it.prototype.toString=function(){var at="[mode="+this.mode;return this.host&&(at+=",host="+this.host),this.connectionKey&&(at+=",connectionKey="+this.connectionKey),this.format&&(at+=",format="+this.format),at+="]",at},it})();r.TransportParams=nt;var F=(function(it){c.__extends(at,it);function at(P,J){var $=it.call(this)||this;$.disconnectedRetryCount=0,at.initTransports(),$.realtime=P,$.options=J;var et=J.timeouts,gt=et.preferenceConnectTimeout+et.realtimeRequestTimeout;if($.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:gt,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:et.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:et.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:et.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},$.state=$.states.initialized,$.errorReason=null,$.queuedMessages=new z.default,$.msgSerial=0,$.connectionDetails=void 0,$.connectionId=void 0,$.connectionKey=void 0,$.connectionStateTtl=et.connectionStateTtl,$.maxIdleInterval=null,$.transports=p.intersect(J.transports||O.default.defaultTransports,at.supportedTransports),$.baseTransport=p.intersect(O.default.baseTransportOrder,$.transports)[0],$.upgradeTransports=p.intersect($.transports,O.default.upgradeTransports),$.transportPreference=null,$.httpHosts=O.default.getHosts(J),$.activeProtocol=null,$.proposedTransports=[],$.pendingTransports=[],$.host=null,$.lastAutoReconnectAttempt=null,$.lastActivity=null,$.forceFallbackHost=!1,$.connectCounter=0,S.default.logAction(S.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(J.transports||O.default.defaultTransports)+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+$.transports+"]"),S.default.logAction(S.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+$.httpHosts+"]"),!$.transports.length){var Ot="no requested transports available";throw S.default.logAction(S.default.LOG_ERROR,"realtime.ConnectionManager()",Ot),new Error(Ot)}var Lt=R.default.Config.addEventListener;return Lt&&(U()&&typeof J.recover=="function"&&Lt("beforeunload",$.persistConnection.bind($)),J.closeOnUnload===!0&&Lt("beforeunload",function(){S.default.logAction(S.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),$.requestState({state:"closing"})}),Lt("online",function(){$.state==$.states.disconnected||$.state==$.states.suspended?(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),$.requestState({state:"connecting"})):$.state==$.states.connecting&&($.pendingTransports.forEach(function(Xt){Xt.off()}),$.disconnectAllTransports(),$.startConnect())}),Lt("offline",function(){$.state==$.states.connected&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),$.disconnectAllTransports())})),$}return at.initTransports=function(){(0,M.default)(at),p.arrForEach(R.default.Transports,function(P){P(at)})},at.prototype.createTransportParams=function(P,J){return new nt(this.options,P,J,this.connectionKey)},at.prototype.getTransportParams=function(P){var J=this,$=function(et){if(J.connectionKey){et("resume");return}if(typeof J.options.recover=="string"){et("recover");return}var gt=J.options.recover,Ot=K();if(Ot&&typeof gt=="function"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),gt(Ot,function(Lt){Lt?(J.options.recover=Ot.recoveryKey,et("recover")):et("clean")});return}et("clean")};$(function(et){var gt=J.createTransportParams(null,et);if(et==="recover"){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+J.options.recover);var Ot=k(J.options.recover);Ot&&(J.msgSerial=Ot.msgSerial)}else S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+gt.toString());P(gt)})},at.prototype.tryATransport=function(P,J,$){var et=this;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+J),A.default.tryConnect(at.supportedTransports[J],this,this.realtime.auth,P,function(gt,Ot){var Lt=et.state;if(Lt==et.states.closing||Lt==et.states.closed||Lt==et.states.failed){Ot&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+Lt.state+" while we were attempting the transport; closing "+Ot),Ot.close()),$(!0);return}if(gt){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+J+" "+gt.event+", err: "+gt.error.toString()),G.default.isTokenErr(gt.error)&&!(et.errorReason&&G.default.isTokenErr(et.errorReason))?(et.errorReason=gt.error,et.realtime.auth._forceNewToken(null,null,function(Xt){if(Xt){et.actOnErrorFromAuthorize(Xt);return}et.tryATransport(P,J,$)})):gt.event==="failed"?(et.notifyState({state:"failed",error:gt.error}),$(!0)):gt.event==="disconnected"&&((0,w.isRetriable)(gt.error)?$(!1):(et.notifyState({state:et.states.connecting.failState,error:gt.error}),$(!0)));return}S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+J+"; setting pending"),et.setTransportPending(Ot,P),$(null,Ot)})},at.prototype.setTransportPending=function(P,J){var $=this,et=J.mode;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+P+"; mode = "+et),p.arrDeleteValue(this.proposedTransports,P),this.pendingTransports.push(P);var gt=R.default.Defaults.transportPreferenceOrder[R.default.Defaults.transportPreferenceOrder.length-1];P.once("connected",function(Lt,Xt,Ft){et=="upgrade"&&$.activeProtocol?P.shortName!==gt&&p.arrIn($.getUpgradePossibilities(),gt)&&$.activeProtocol?setTimeout(function(){$.scheduleTransportActivation(Lt,P,Xt,Ft)},$.options.timeouts.parallelUpgradeDelay):$.scheduleTransportActivation(Lt,P,Xt,Ft):($.activateTransport(Lt,P,Xt,Ft),R.default.Config.nextTick(function(){$.connectImpl(J)})),et==="recover"&&$.options.recover&&($.options.recover=null,$.unpersistConnection())});var Ot=this;P.on(["disconnected","closed","failed"],function(Lt){Ot.deactivateTransport(P,this.event,Lt)}),this.emit("transport.pending",P)},at.prototype.scheduleTransportActivation=function(P,J,$,et){var gt=this,Ot=this.activeProtocol&&this.activeProtocol.getTransport(),Lt=function(){J.disconnect(),p.arrDeleteValue(gt.pendingTransports,J)};if(this.state!==this.states.connected&&this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),Lt();return}if(Ot&&!L(J,Ot)){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+" is no better than current active transport "+Ot.shortName+" - abandoning upgrade"),Lt();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+J);var Xt=null;if(!J.isConnected){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+J.shortName+"is no longer connected; abandoning upgrade"),Lt();return}if(this.state===this.states.connected)S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,Xt=this.activeProtocol;else if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+J.shortName),Lt();return}S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+J);var Ft=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+J),J.send(g.default.fromValues({action:N.ACTIVATE})),gt.activateTransport(P,J,$,et),gt.state===gt.states.synchronizing?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+J),gt.state=gt.states.connected):S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+gt.state.state+", so leaving unchanged"),gt.state.sendEvents&&gt.sendQueuedMessages()};Xt?Xt.onceIdle(Ft):Ft()},at.prototype.activateTransport=function(P,J,$,et){var gt=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+J),P&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+P),$&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+$),et&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(et)),this.persistTransportPreference(J);var Ot=this.state,Lt=this.states.connected.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+Ot.state),Ot.state==this.states.closing.state||Ot.state==this.states.closed.state||Ot.state==this.states.failed.state)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),J.disconnect(),!1;if(p.arrDeleteValue(this.pendingTransports,J),!J.isConnected)return S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+J+" since it appears to no longer be connected"),!1;var Xt=this.activeProtocol;this.activeProtocol=new b.default(J),this.host=J.params.host;var Ft=et.connectionKey;if(Ft&&this.connectionKey!=Ft&&this.setConnection($,et,!!P),this.onConnectionDetailsUpdate(et,J),R.default.Config.nextTick(function(){J.on("connected",function(At,Gt,kt){gt.onConnectionDetailsUpdate(kt,J),gt.emit("update",new H.default(Lt,Lt,null,At))})}),Ot.state===this.states.connected.state?P&&(this.errorReason=this.realtime.connection.errorReason=P,this.emit("update",new H.default(Lt,Lt,null,P))):(this.notifyState({state:"connected",error:P}),this.errorReason=this.realtime.connection.errorReason=P||null),this.emit("transport.active",J),Xt)if(Xt.messageQueue.count()>0&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+Xt.transport.shortName+", new one is "+J.shortName+") finishing with "+Xt.messageQueue.count()+" messages still pending"),Xt.transport===J){var ce="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",ce)}else Xt.finish();return p.safeArrForEach(this.pendingTransports,function(At){if(At===J){var Gt="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+J.shortName+"; stack = "+new Error().stack;S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()",Gt),p.arrDeleteValue(gt.pendingTransports,J)}else At.disconnect()}),p.safeArrForEach(this.proposedTransports,function(At){At===J?(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+J.shortName+"; stack = "+new Error().stack),p.arrDeleteValue(gt.proposedTransports,J)):At.dispose()}),!0},at.prototype.deactivateTransport=function(P,J,$){var et=this.activeProtocol,gt=et&&et.getTransport()===P,Ot=p.arrDeleteValue(this.pendingTransports,P),Lt=p.arrDeleteValue(this.proposedTransports,P),Xt=this.noTransportsScheduledForActivation();if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+P),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+J+(gt?"; was active":Ot?"; was pending":Lt?"; was proposed":"")+(Xt?"":"; another transport is scheduled for activation")),$&&$.message&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+$.message),gt&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(et.getPendingMessages()),R.default.Config.nextTick(function(){et.clearPendingMessages()}),this.activeProtocol=this.host=null),this.emit("transport.inactive",P),gt&&Xt||gt&&J==="failed"||J==="closed"||et===null&&Ot&&this.pendingTransports.length===0){if(J==="disconnected"&&$&&$.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:J,error:$,retryImmediately:!0});return}var Ft=J==="failed"&&G.default.isTokenErr($)?"disconnected":J;this.notifyState({state:Ft,error:$});return}gt&&J==="disconnected"&&this.state!==this.states.synchronizing&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:$}))},at.prototype.noTransportsScheduledForActivation=function(){return p.isEmpty(this.pendingTransports)||this.pendingTransports.every(function(P){return!P.isConnected})},at.prototype.setConnection=function(P,J,$){var et=this.connectionId,gt=et&&et!==P,Ot=!et&&$;(gt||Ot)&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==P&&S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=P,this.realtime.connection.key=this.connectionKey=J.connectionKey},at.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},at.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},at.prototype.checkConnectionStateFreshness=function(){if(!(!this.lastActivity||!this.connectionId)){var P=p.now()-this.lastActivity;P>this.connectionStateTtl+this.maxIdleInterval&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+P+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},at.prototype.persistConnection=function(){if(U()){var P=this.createRecoveryKey();P&&X({recoveryKey:P,disconnectedAt:p.now(),location:h.location,clientId:this.realtime.auth.clientId})}},at.prototype.unpersistConnection=function(){x()},at.prototype.getError=function(){return this.errorReason||this.getStateError()},at.prototype.getStateError=function(){var P,J;return(J=(P=w.default)[this.state.state])===null||J===void 0?void 0:J.call(P)},at.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},at.prototype.enactStateChange=function(P){var J=P.current==="failed"?S.default.LOG_ERROR:S.default.LOG_MAJOR;S.default.logAction(J,"Connection state",P.current+(P.reason?"; reason: "+P.reason:"")),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+P.current+"; reason = "+(P.reason&&P.reason.message));var $=this.state=this.states[P.current];P.reason&&(this.errorReason=P.reason,this.realtime.connection.errorReason=P.reason),($.terminal||$.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",P)},at.prototype.startTransitionTimer=function(P){var J=this;S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+P.state),this.transitionTimer&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(function(){J.transitionTimer&&(J.transitionTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager "+P.state+" timer expired","requesting new state: "+P.failState),J.notifyState({state:P.failState}))},P.retryDelay)},at.prototype.cancelTransitionTimer=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},at.prototype.startSuspendTimer=function(){var P=this;this.suspendTimer||(this.suspendTimer=setTimeout(function(){P.suspendTimer&&(P.suspendTimer=null,S.default.logAction(S.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),P.states.connecting.failState="suspended",P.notifyState({state:"suspended"}))},this.connectionStateTtl))},at.prototype.checkSuspendTimer=function(P){P!=="disconnected"&&P!=="suspended"&&P!=="connecting"&&this.cancelSuspendTimer()},at.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},at.prototype.startRetryTimer=function(P){var J=this;this.retryTimer=setTimeout(function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),J.retryTimer=null,J.requestState({state:"connecting"})},P)},at.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},at.prototype.notifyState=function(P){var J=this,$,et,gt=P.state,Ot=gt==="disconnected"&&(this.state===this.states.connected||this.state===this.states.synchronizing||P.retryImmediately||this.state===this.states.connecting&&P.error&&G.default.isTokenErr(P.error)&&!(this.errorReason&&G.default.isTokenErr(this.errorReason)));if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+gt+(Ot?"; will retry connection immediately":"")),gt!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(P.state),(gt==="suspended"||gt==="connected")&&(this.disconnectedRetryCount=0),!this.state.terminal)){var Lt=this.states[P.state],Xt=Lt.retryDelay;Lt.state==="disconnected"&&(this.disconnectedRetryCount++,Xt=p.getRetryTime(Lt.retryDelay,this.disconnectedRetryCount));var Ft=new H.default(this.state.state,Lt.state,Xt,P.error||((et=($=w.default)[Lt.state])===null||et===void 0?void 0:et.call($)));if(Ot){var ce=function(){J.state===J.states.disconnected&&(J.lastAutoReconnectAttempt=p.now(),J.requestState({state:"connecting"}))},At=this.lastAutoReconnectAttempt&&p.now()-this.lastAutoReconnectAttempt+1;At&&At<1e3?(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+At+"ms ago, waiting another "+(1e3-At)+"ms before trying again"),setTimeout(ce,1e3-At)):R.default.Config.nextTick(ce)}else(gt==="disconnected"||gt==="suspended")&&this.startRetryTimer(Xt);(gt==="disconnected"&&!Ot||gt==="suspended"||Lt.terminal)&&R.default.Config.nextTick(function(){J.disconnectAllTransports()}),gt=="connected"&&!this.activeProtocol&&S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(Ft),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(gt,Ft.reason),this.failQueuedMessages(Ft.reason))}},at.prototype.requestState=function(P){var J=this,$,et,gt=P.state;if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+gt+"; current state: "+this.state.state),gt!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(gt),!(gt=="connecting"&&this.state.state=="connected")&&!(gt=="closing"&&this.state.state=="closed"))){var Ot=this.states[gt],Lt=new H.default(this.state.state,Ot.state,null,P.error||((et=($=w.default)[Ot.state])===null||et===void 0?void 0:et.call($)));this.enactStateChange(Lt),gt=="connecting"&&R.default.Config.nextTick(function(){J.startConnect()}),gt=="closing"&&this.closeImpl()}},at.prototype.startConnect=function(){var P=this;if(this.state!==this.states.connecting){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}var J=this.realtime.auth,$=++this.connectCounter,et=function(){P.checkConnectionStateFreshness(),P.getTransportParams(function(Ot){if(Ot.mode==="recover"&&Ot.options.recover){var Lt=k(Ot.options.recover);Lt&&P.realtime.channels.recoverChannels(Lt.channelSerials)}$===P.connectCounter&&P.connectImpl(Ot,$)})};if(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),J.method==="basic")et();else{var gt=function(Ot){$===P.connectCounter&&(Ot?P.actOnErrorFromAuthorize(Ot):et())};this.errorReason&&G.default.isTokenErr(this.errorReason)?J._forceNewToken(null,null,gt):J._ensureValidAuthCredentials(!1,gt)}},at.prototype.connectImpl=function(P,J){var $=this.state.state;$!==this.states.connecting.state&&$!==this.states.connected.state?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+$):this.pendingTransports.length?S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):$==this.states.connected.state?this.upgradeIfNeeded(P):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(P,J):this.connectBase(P,J)},at.prototype.connectPreference=function(P,J){var $=this,et=this.getTransportPreference(),gt=!1;p.arrIn(this.transports,et)||(this.unpersistTransportPreference(),this.connectImpl(P,J)),S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+et);var Ot=setTimeout(function(){gt=!0,$.state.state!==$.states.connected.state&&(S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+et+" failed; clearing preference and trying from scratch"),$.disconnectAllTransports(),$.unpersistTransportPreference()),$.connectImpl(P,J)},this.options.timeouts.preferenceConnectTimeout);P.host=this.httpHosts[0],this.tryATransport(P,et,function(Lt,Xt){clearTimeout(Ot),gt&&Xt?(Xt.off(),Xt.disconnect(),p.arrDeleteValue($.pendingTransports,Xt)):!Xt&&!Lt&&($.unpersistTransportPreference(),$.connectImpl(P,J))})},at.prototype.connectBase=function(P,J){var $=this,et=function(Ft){$.notifyState({state:$.states.connecting.failState,error:Ft})},gt=this.httpHosts.slice(),Ot=function(Ft,ce){J===$.connectCounter&&!ce&&!Ft&&Xt()};S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var Lt=gt.shift();if(!Lt){et(new Y.default("Unable to connect (no available host)",80003,404));return}P.host=Lt;var Xt=function(){if(!gt.length){et(new Y.default("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!$.realtime.http.checkConnectivity){et(new Y.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500));return}$.realtime.http.checkConnectivity(function(Ft,ce){if(J===$.connectCounter){if(Ft){et(Ft);return}if(!ce){et(new Y.default("Unable to connect (network unreachable)",80003,404));return}P.host=p.arrPopRandomElement(gt),$.tryATransport(P,$.baseTransport,Ot)}})};if(this.forceFallbackHost&&gt.length){this.forceFallbackHost=!1,Xt();return}this.tryATransport(P,this.baseTransport,Ot)},at.prototype.getUpgradePossibilities=function(){var P=this.activeProtocol.getTransport().shortName,J=p.arrIndexOf(this.upgradeTransports,P);return this.upgradeTransports.slice(J+1)},at.prototype.upgradeIfNeeded=function(P){var J=this,$=this.getUpgradePossibilities();S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+R.default.Config.inspect($)),$.length&&p.arrForEach($,function(et){var gt=J.createTransportParams(P.host,"upgrade");J.tryATransport(gt,et,q)})},at.prototype.closeImpl=function(){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),p.safeArrForEach(this.pendingTransports,function(P){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+P),P&&P.close()}),p.safeArrForEach(this.proposedTransports,function(P){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+P),P&&P.dispose()}),this.activeProtocol&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},at.prototype.onAuthUpdated=function(P,J){var $=this,et;switch(this.state.state){case"connected":{if(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var gt=this.activeProtocol.getTransport().params;R.default.Config.nextTick(function(){$.state.state==="connected"&&$.upgradeIfNeeded(gt)})}var Ot=(et=this.activeProtocol)===null||et===void 0?void 0:et.getTransport();Ot&&Ot.onAuthUpdated&&Ot.onAuthUpdated(P);var Lt=g.default.fromValues({action:N.AUTH,auth:{accessToken:P.token}});this.send(Lt);var Xt=function(){$.off(Ft),J(null,P)},Ft=function(At){At.current==="failed"&&($.off(Xt),$.off(Ft),J(At.reason||$.getStateError()))};this.once("connectiondetails",Xt),this.on("connectionstate",Ft);break}case"connecting":S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var ce=function(At){switch(At.current){case"connected":$.off(ce),J(null,P);break;case"failed":case"closed":case"suspended":$.off(ce),J(At.reason||$.getStateError());break}};this.on("connectionstate",ce),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}},at.prototype.disconnectAllTransports=function(P){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(P?" except the active transport":"")),this.connectCounter++,p.safeArrForEach(this.pendingTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+J),J&&J.disconnect()}),this.pendingTransports=[],p.safeArrForEach(this.proposedTransports,function(J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+J),J&&J.dispose()}),this.proposedTransports=[],this.activeProtocol&&!P&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},at.prototype.send=function(P,J,$){$=$||q;var et=this.state;if(et.sendEvents){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new b.PendingMessage(P,$));return}var gt=J&&et.queueEvents||et.forceQueueEvents;if(!gt){var Ot="rejecting event, queueEvent was "+J+", state was "+et.state;S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()",Ot),$(this.errorReason||new Y.default(Ot,9e4,400));return}S.default.shouldLog(S.default.LOG_MICRO)&&S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+g.default.stringify(P)),this.queue(P,$)},at.prototype.sendImpl=function(P){var J=P.message;P.ackRequired&&!P.sendAttempted&&(J.msgSerial=this.msgSerial++);try{this.activeProtocol.send(P)}catch($){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+$.stack)}},at.prototype.queue=function(P,J){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var $=this.queuedMessages.last(),et=this.options.maxMessageSize;$&&!$.sendAttempted&&Q($.message,P,et)?($.merged||($.callback=j.default.create([$.callback]),$.merged=!0),$.callback.push(J)):this.queuedMessages.push(new b.PendingMessage(P,J))},at.prototype.sendQueuedMessages=function(){S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");for(var P;P=this.queuedMessages.shift();)this.sendImpl(P)},at.prototype.queuePendingMessages=function(P){P&&P.length&&(S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+P.length+" pending messages"),this.queuedMessages.prepend(P))},at.prototype.failQueuedMessages=function(P){var J=this.queuedMessages.count();J>0&&(S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+J+" queued messages, err = "+p.inspectError(P)),this.queuedMessages.completeAllMessages(P))},at.prototype.onChannelMessage=function(P,J){var $=this.activeProtocol&&J===this.activeProtocol.getTransport(),et=p.arrIn(this.pendingTransports,J)&&this.state==this.states.synchronizing;$||et?this.realtime.channels.onChannelMessage(P):p.arrIndexOf([N.ACK,N.NACK,N.ERROR],P.action)>-1?this.realtime.channels.onChannelMessage(P):S.default.logAction(S.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(P)+"on defunct transport; discarding")},at.prototype.ping=function(P,J){var $=this;if(P){S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+P);var et=function(){P.off("heartbeat",Lt),J(new Y.default("Timeout waiting for heartbeat response",5e4,500))},gt=p.now(),Ot=p.cheapRandStr(),Lt=function(Gt){if(Gt===Ot){P.off("heartbeat",Lt),clearTimeout(Xt);var kt=p.now()-gt;J(null,kt)}},Xt=setTimeout(et,this.options.timeouts.realtimeRequestTimeout);P.on("heartbeat",Lt),P.ping(Ot);return}if(this.state.state!=="connected"){J(new Y.default("Unable to ping service; not connected",4e4,400));return}var Ft=!1,ce=function(Gt,kt){$.off("transport.active",At),Ft||(Ft=!0,J(Gt,kt))},At=function(){Ft||(Ft=!0,R.default.Config.nextTick(function(){$.ping(null,J)}))};this.on("transport.active",At),this.ping(this.activeProtocol.getTransport(),ce)},at.prototype.abort=function(P){this.activeProtocol.getTransport().fail(P)},at.prototype.registerProposedTransport=function(P){this.proposedTransports.push(P)},at.prototype.getTransportPreference=function(){var P,J;return this.transportPreference||y()&&((J=(P=R.default.WebStorage)===null||P===void 0?void 0:P.get)===null||J===void 0?void 0:J.call(P,I))},at.prototype.persistTransportPreference=function(P){var J,$;p.arrIn(O.default.upgradeTransports,P.shortName)&&(this.transportPreference=P.shortName,y()&&(($=(J=R.default.WebStorage)===null||J===void 0?void 0:J.set)===null||$===void 0||$.call(J,I,P.shortName)))},at.prototype.unpersistTransportPreference=function(){var P,J;this.transportPreference=null,y()&&((J=(P=R.default.WebStorage)===null||P===void 0?void 0:P.remove)===null||J===void 0||J.call(P,I))},at.prototype.actOnErrorFromAuthorize=function(P){if(P.code===40171)this.notifyState({state:"failed",error:P});else if(P.code===40102)this.notifyState({state:"failed",error:P});else if(P.statusCode===T.default.Forbidden){var J="Client configured authentication provider returned 403; failing the connection";S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",J),this.notifyState({state:"failed",error:new Y.default(J,80019,403,P)})}else{var J="Client configured authentication provider request failed";S.default.logAction(S.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",J),this.notifyState({state:this.state.failState,error:new Y.default(J,80019,401,P)})}},at.prototype.onConnectionDetailsUpdate=function(P,J){if(P){this.connectionDetails=P,P.maxMessageSize&&(this.options.maxMessageSize=P.maxMessageSize);var $=P.clientId;if($){var et=this.realtime.auth._uncheckedSetClientId($);if(et){S.default.logAction(S.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",et.message),J.fail(et);return}}var gt=P.connectionStateTtl;gt&&(this.connectionStateTtl=gt),this.maxIdleInterval=P.maxIdleInterval,this.emit("connectiondetails",P)}},at.supportedTransports={},at})(E.default);r.default=F}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(7)),g=h.__importDefault(o(2)),p=(function(b){h.__extends(O,b);function O(){var R=b.call(this)||this;return R.messages=[],R}return O.prototype.count=function(){return this.messages.length},O.prototype.push=function(R){this.messages.push(R)},O.prototype.shift=function(){return this.messages.shift()},O.prototype.last=function(){return this.messages[this.messages.length-1]},O.prototype.copyAll=function(){return this.messages.slice()},O.prototype.append=function(R){this.messages.push.apply(this.messages,R)},O.prototype.prepend=function(R){this.messages.unshift.apply(this.messages,R)},O.prototype.completeMessages=function(R,E,z){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+R+"; count = "+E),z=z||null;var S=this.messages;if(S.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var H=S[0];if(H){var w=H.message.msgSerial,Y=R+E;if(Y>w)for(var G=S.splice(0,Y-w),D=0,j=G;D<j.length;D++){var M=j[D];M.callback(z)}S.length==0&&this.emit("idle")}},O.prototype.completeAllMessages=function(R){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,R)},O.prototype.resetSendAttempted=function(){for(var R=0,E=this.messages;R<E.length;R++){var z=E[R];z.sendAttempted=!1}},O.prototype.clear=function(){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},O})(c.default);r.default=p}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(g,p,b,O){this.previous=g,this.current=p,b&&(this.retryIn=b),O&&(this.reason=O)}return c})();r.default=h}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(10)),g=h.__importDefault(o(7)),p=h.__importStar(o(1)),b=h.__importDefault(o(33)),O=h.__importDefault(o(2)),R=h.__importDefault(o(54)),E=h.__importDefault(o(9)),z=h.__importDefault(o(39)),S=h.__importStar(o(4)),H=h.__importDefault(o(16)),w=h.__importDefault(o(21)),Y=c.default.Action,G=function(){};function D(A){if(A&&"params"in A&&!p.isObject(A.params))return new S.default("options.params must be an object",4e4,400);if(A&&"modes"in A){if(!p.isArray(A.modes))return new S.default("options.modes must be an array",4e4,400);for(var T=0;T<A.modes.length;T++){var y=A.modes[T];if(!y||typeof y!="string"||!p.arrIn(c.default.channelModes,String.prototype.toUpperCase.call(y)))return new S.default("Invalid channel mode: "+y,4e4,400)}}}var j=(function(A){h.__extends(T,A);function T(y,U,N){var q=A.call(this,y,U,N)||this;return q.retryCount=0,q.history=function(I,Z){if(O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),Z===void 0)if(typeof I=="function")Z=I,I=null;else{if(this.rest.options.promises)return p.promisify(this,"history",arguments);Z=G}if(I&&I.untilAttach){if(this.state!=="attached"){Z(new S.default("option untilAttach requires the channel to be attached",4e4,400));return}if(!this.properties.attachSerial){Z(new S.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));return}delete I.untilAttach,I.from_serial=this.properties.attachSerial}b.default.prototype._history.call(this,I,Z)},q.whenState=(function(I,Z){return g.default.prototype.whenState.call(q,I,q.state,Z)}),O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel()","started; name = "+U),q.realtime=y,q.presence=new R.default(q),q.connectionManager=y.connection.connectionManager,q.state="initialized",q.subscriptions=new g.default,q.syncChannelSerial=void 0,q.properties={attachSerial:void 0,channelSerial:void 0},q.setOptions(N),q.errorReason=null,q._requestedFlags=null,q._mode=null,q._attachResume=!1,q._decodingContext={channelOptions:q.channelOptions,plugins:y.options.plugins||{},baseEncodedPreviousPayload:void 0},q._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},q._allChannelChanges=new g.default,q}return T.prototype.invalidStateError=function(){return new S.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},T.processListenerArgs=function(y){return y=Array.prototype.slice.call(y),typeof y[0]=="function"&&y.unshift(null),y[y.length-1]==null&&y.pop(),y},T.prototype.setOptions=function(y,U){var N=this.channelOptions;if(!U&&this.rest.options.promises)return p.promisify(this,"setOptions",arguments);var q=U||function(Z){Z&&O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+Z.toString())},I=D(y);if(I){q(I);return}b.default.prototype.setOptions.call(this,y),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(y,N)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],function(Z){switch(this.event){case"update":case"attached":q==null||q(null);return;default:q==null||q(Z.reason);return}})):q()},T.prototype._shouldReattachToSetOptions=function(y,U){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(y!=null&&y.params){var N=M(y.params),q=M(U.params);if(Object.keys(N).length!==Object.keys(q).length||!p.shallowEquals(q,N))return!0}return!!(y!=null&&y.modes&&(!U.modes||!p.arrEquals(y.modes,U.modes)))},T.prototype.publish=function(){for(var y=this,U=[],N=0;N<arguments.length;N++)U[N]=arguments[N];var q=U[0],I=U.length,Z=U[I-1];if(typeof Z!="function"){if(this.realtime.options.promises)return p.promisify(this,"publish",arguments);Z=G,++I}if(!this.connectionManager.activeState()){Z(this.connectionManager.getError());return}if(I==2)if(p.isObject(q))q=[E.default.fromValues(q)];else if(p.isArray(q))q=E.default.fromValuesArray(q);else throw new S.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else q=[E.default.fromValues({name:U[0],data:U[1]})];var K=this.realtime.options.maxMessageSize;E.default.encodeArray(q,this.channelOptions,function(X){if(X){Z(X);return}var x=E.default.getMessagesSize(q);if(x>K){Z(new S.default("Maximum size of messages that can be published at once exceeded ( was "+x+" bytes; limit is "+K+" bytes)",40009,400));return}y.__publish(q,Z)})},T.prototype.__publish=function(y,U){O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+y.length);var N=this.state;switch(N){case"failed":case"suspended":U(S.default.fromValues(this.invalidStateError()));break;default:{O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+N);var q=new c.default;q.action=Y.MESSAGE,q.channel=this.name,q.messages=y,this.sendMessage(q,U);break}}},T.prototype.onEvent=function(y){O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var U=this.subscriptions,N=0;N<y.length;N++){var q=y[N];U.emit(q.name,q)}},T.prototype.attach=function(y,U){var N;if(typeof y=="function"?(U=y,N=null):N=y,!U){if(this.realtime.options.promises)return p.promisify(this,"attach",arguments);U=function(q){q&&O.default.logAction(O.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+q.toString())}}if(N)O.default.deprecated("The ability to pass an array of channel mode flags as the first argument of `RealtimeChannel.attach()`","To set channel mode flags, populate the `modes` property of the channel options object that you pass to `Channels.get()` or `RealtimeChannel.setOptions()`."),this._requestedFlags=N;else if(this.state==="attached"){U(null,null);return}this._attach(!1,null,U)},T.prototype._attach=function(y,U,N){N||(N=function(I){I&&O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+I.toString())});var q=this.connectionManager;if(!q.activeState()){N(q.getError());return}(this.state!=="attaching"||y)&&this.requestState("attaching",U),this.once(function(I){switch(this.event){case"attached":N==null||N(null,I);break;case"detached":case"suspended":case"failed":N==null||N(I.reason||q.getError()||new S.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":N==null||N(new S.default("Attach request superseded by a subsequent detach request",9e4,409));break}})},T.prototype.attachImpl=function(){O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var y=c.default.fromValues({action:Y.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?y.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&y.encodeModesToFlags(p.allToUpperCase(this.channelOptions.modes)),this._attachResume&&y.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(y.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(y,G)},T.prototype.detach=function(y){if(!y){if(this.realtime.options.promises)return p.promisify(this,"detach",arguments);y=G}var U=this.connectionManager;if(!U.activeState()){y(U.getError());return}switch(this.state){case"suspended":this.notifyState("detached"),y();break;case"detached":y();break;case"failed":y(new S.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once(function(N){switch(this.event){case"detached":y();break;case"attached":case"suspended":case"failed":y(N.reason||U.getError()||new S.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":y(new S.default("Detach request superseded by a subsequent attach request",9e4,409));break}})}},T.prototype.detachImpl=function(y){O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var U=c.default.fromValues({action:Y.DETACH,channel:this.name});this.sendMessage(U,y||G)},T.prototype.subscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=T.processListenerArgs(y),q=N[0],I=N[1],Z=N[2];if(!Z&&this.realtime.options.promises)return p.promisify(this,"subscribe",[q,I]);if(this.state==="failed"){Z==null||Z(S.default.fromValues(this.invalidStateError()));return}return q&&typeof q=="object"&&!Array.isArray(q)?this._subscribeFilter(q,I):this.subscriptions.on(q,I),this.attach(Z||G)},T.prototype._subscribeFilter=function(y,U){var N=function(q){var I,Z,K,X,x,L,Q={name:q.name,refTimeserial:(Z=(I=q.extras)===null||I===void 0?void 0:I.ref)===null||Z===void 0?void 0:Z.timeserial,refType:(X=(K=q.extras)===null||K===void 0?void 0:K.ref)===null||X===void 0?void 0:X.type,isRef:!!(!((L=(x=q.extras)===null||x===void 0?void 0:x.ref)===null||L===void 0)&&L.timeserial),clientId:q.clientId};Object.entries(y).find(function(k){var nt=k[0],F=k[1];return F!==void 0?Q[nt]!==F:!1})||U(q)};this._addFilteredSubscription(y,U,N),this.subscriptions.on(N)},T.prototype._addFilteredSubscription=function(y,U,N){var q;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(U)){var I=this.filteredSubscriptions.get(U);I.set(y,((q=I==null?void 0:I.get(y))===null||q===void 0?void 0:q.concat(N))||[N])}else this.filteredSubscriptions.set(U,new Map([[y,[N]]]))},T.prototype._getAndDeleteFilteredSubscriptions=function(y,U){var N=this;if(!this.filteredSubscriptions)return[];if(!U&&y)return Array.from(this.filteredSubscriptions.entries()).map(function(K){var X,x=K[0],L=K[1],Q=L.get(y);return L.delete(y),L.size===0&&((X=N.filteredSubscriptions)===null||X===void 0||X.delete(x)),Q}).reduce(function(K,X){var x;return X?(x=K).concat.apply(x,X):K},[]);if(!U||!this.filteredSubscriptions.has(U))return[];var q=this.filteredSubscriptions.get(U);if(!y){var I=Array.from(q.values()).reduce(function(K,X){return K.concat.apply(K,X)},[]);return this.filteredSubscriptions.delete(U),I}var Z=q.get(y);return q.delete(y),Z||[]},T.prototype.unsubscribe=function(){for(var y=this,U,N=[],q=0;q<arguments.length;q++)N[q]=arguments[q];var I=T.processListenerArgs(N),Z=I[0],K=I[1];if(typeof Z=="object"&&!K||!((U=this.filteredSubscriptions)===null||U===void 0)&&U.has(K)){this._getAndDeleteFilteredSubscriptions(Z,K).forEach(function(X){return y.subscriptions.off(X)});return}this.subscriptions.off(Z,K)},T.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new S.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var y=this.connectionManager;if(!y.activeState())throw y.getError();var U=c.default.fromValues({action:Y.SYNC,channel:this.name});this.syncChannelSerial&&(U.channelSerial=this.syncChannelSerial),y.send(U)},T.prototype.sendMessage=function(y,U){this.connectionManager.send(y,this.realtime.options.queueMessages,U)},T.prototype.sendPresence=function(y,U){var N=c.default.fromValues({action:Y.PRESENCE,channel:this.name,presence:p.isArray(y)?H.default.fromValuesArray(y):[H.default.fromValues(y)]});this.sendMessage(N,U)},T.prototype.onMessage=function(y){(y.action===Y.ATTACHED||y.action===Y.MESSAGE||y.action===Y.PRESENCE)&&this.setChannelSerial(y.channelSerial);var U,N=!1;switch(y.action){case Y.ATTACHED:{this.properties.attachSerial=y.channelSerial,this._mode=y.getMode(),this.params=y.params||{};var q=y.decodeModesFromFlags();this.modes=q&&p.allToLowerCase(q)||void 0;var I=y.hasFlag("RESUMED"),Z=y.hasFlag("HAS_PRESENCE"),K=y.hasFlag("HAS_BACKLOG");if(this.state==="attached"){I||this.presence.onAttached(Z);var X=new z.default(this.state,this.state,I,K,y.error);this._allChannelChanges.emit("update",X),(!I||this.channelOptions.updateOnAttached)&&this.emit("update",X)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",y.error,I,Z,K);break}case Y.DETACHED:{var x=y.error?S.default.fromValues(y.error):new S.default("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",x):this.state==="attaching"?this.notifyState("suspended",x):this.requestState("attaching",x);break}case Y.SYNC:if(N=!0,U=this.syncChannelSerial=y.channelSerial,!y.presence)break;case Y.PRESENCE:{for(var L=y.presence,Q=y.id,k=y.connectionId,nt=y.timestamp,F=this.channelOptions,it=void 0,at=0;at<L.length;at++)try{it=L[at],H.default.decode(it,F),it.connectionId||(it.connectionId=k),it.timestamp||(it.timestamp=nt),it.id||(it.id=Q+":"+at)}catch(Ot){O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel.onMessage()",Ot.toString())}this.presence.setPresence(L,N,U);break}case Y.MESSAGE:{if(this.state!=="attached"){O.default.logAction(O.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+y.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}var P=y.messages,J=P[0],$=P[P.length-1],Q=y.id,k=y.connectionId,nt=y.timestamp;if(J.extras&&J.extras.delta&&J.extras.delta.from!==this._lastPayload.messageId){var et='Delta message decode failure - previous message not available for message "'+y.id+'" on this channel "'+this.name+'".';O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel.onMessage()",et),this._startDecodeFailureRecovery(new S.default(et,40018,400));break}for(var at=0;at<P.length;at++){var et=P[at];try{E.default.decode(et,this._decodingContext)}catch(At){switch(O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel.onMessage()",At.toString()),At.code){case 40018:this._startDecodeFailureRecovery(At);return;case 40019:case 40021:this.notifyState("failed",At);return}}et.connectionId||(et.connectionId=k),et.timestamp||(et.timestamp=nt),et.id||(et.id=Q+":"+at)}this._lastPayload.messageId=$.id,this._lastPayload.protocolMessageChannelSerial=y.channelSerial,this.onEvent(P);break}case Y.ERROR:{var gt=y.error;gt&&gt.code==80016?this.checkPendingState():this.notifyState("failed",S.default.fromValues(gt));break}default:O.default.logAction(O.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+y.action+")"),this.connectionManager.abort(w.default.unknownChannelErr())}},T.prototype._startDecodeFailureRecovery=function(y){var U=this;this._lastPayload.decodeFailureRecoveryInProgress||(O.default.logAction(O.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,y,function(){U._lastPayload.decodeFailureRecoveryInProgress=!1}))},T.prototype.onAttached=function(){O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},T.prototype.notifyState=function(y,U,N,q,I){if(O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+y),this.clearStateTimer(),p.arrIn(["detached","suspended","failed"],y)&&(this.properties.channelSerial=null),y!==this.state){this.presence.actOnChannelState(y,q,U),y==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),U&&(this.errorReason=U);var Z=new z.default(this.state,y,N,I,U),K=y==="failed"?O.default.LOG_ERROR:O.default.LOG_MAJOR;O.default.logAction(K,'Channel state for channel "'+this.name+'"',y+(U?"; reason: "+U:"")),y!=="attaching"&&y!=="suspended"&&(this.retryCount=0),y==="attached"&&this.onAttached(),y==="attached"?this._attachResume=!0:(y==="detaching"||y==="failed")&&(this._attachResume=!1),this.state=y,this._allChannelChanges.emit(y,Z),this.emit(y,Z)}},T.prototype.requestState=function(y,U){O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+y),this.notifyState(y,U),this.checkPendingState()},T.prototype.checkPendingState=function(){var y=this.connectionManager.state;if(!(y.sendEvents||y.forceQueueEvents)){O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}},T.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":{var y=new S.default("Channel attach timed out",90007,408);this.notifyState("suspended",y);break}case"detaching":{var y=new S.default("Channel detach timed out",90007,408);this.notifyState("attached",y);break}default:this.checkPendingState();break}},T.prototype.startStateTimerIfNotRunning=function(){var y=this;this.stateTimer||(this.stateTimer=setTimeout(function(){O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),y.stateTimer=null,y.timeoutPendingState()},this.realtime.options.timeouts.realtimeRequestTimeout))},T.prototype.clearStateTimer=function(){var y=this.stateTimer;y&&(clearTimeout(y),this.stateTimer=null)},T.prototype.startRetryTimer=function(){var y=this;if(!this.retryTimer){this.retryCount++;var U=p.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(function(){y.state==="suspended"&&y.connectionManager.state.sendEvents&&(y.retryTimer=null,O.default.logAction(O.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),y.requestState("attaching"))},U)}},T.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},T.prototype.getReleaseErr=function(){var y=this.state;return y==="initialized"||y==="detached"||y==="failed"?null:new S.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+y,90001,400)},T.prototype.setChannelSerial=function(y){O.default.logAction(O.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+y+"; previous = "+this.properties.channelSerial),y&&(this.properties.channelSerial=y)},T})(b.default);function M(A){var T=A||{};T.agent;var y=h.__rest(T,["agent"]);return y}r.default=j}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=(function(){function c(g,p,b,O,R){this.previous=g,this.current=p,p==="attached"&&(this.resumed=b,this.hasBacklog=O),R&&(this.reason=R)}return c})();r.default=h}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=g.Hasher,O=c.algo,R=[],E=O.SHA1=b.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,S){for(var H=this._hash.words,w=H[0],Y=H[1],G=H[2],D=H[3],j=H[4],M=0;M<80;M++){if(M<16)R[M]=z[S+M]|0;else{var A=R[M-3]^R[M-8]^R[M-14]^R[M-16];R[M]=A<<1|A>>>31}var T=(w<<5|w>>>27)+j+R[M];M<20?T+=(Y&G|~Y&D)+1518500249:M<40?T+=(Y^G^D)+1859775393:M<60?T+=(Y&G|Y&D|G&D)-1894007588:T+=(Y^G^D)-899497514,j=D,D=G,G=Y<<30|Y>>>2,Y=w,w=T}H[0]=H[0]+w|0,H[1]=H[1]+Y|0,H[2]=H[2]+G|0,H[3]=H[3]+D|0,H[4]=H[4]+j|0},_doFinalize:function(){var z=this._data,S=z.words,H=this._nDataBytes*8,w=z.sigBytes*8;return S[w>>>5]|=128<<24-w%32,S[(w+64>>>9<<4)+14]=Math.floor(H/4294967296),S[(w+64>>>9<<4)+15]=H,z.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var z=b.clone.call(this);return z._hash=this._hash.clone(),z}});c.SHA1=b._createHelper(E),c.HmacSHA1=b._createHmacHelper(E)})(),h.SHA1})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});function h(M){if(M===void 0)return"undefined";var A,T;if(M instanceof ArrayBuffer?(T="ArrayBuffer",A=new DataView(M)):M instanceof DataView&&(T="DataView",A=M),!A)return JSON.stringify(M);for(var y=[],U=0;U<M.byteLength;U++){if(U>20){y.push("...");break}var N=A.getUint8(U).toString(16);N.length===1&&(N="0"+N),y.push(N)}return"<"+T+" "+y.join(" ")+">"}function c(M,A,T){for(var y=0,U=T.length;y<U;y++){var N=T.charCodeAt(y);if(N<128){M.setUint8(A++,N>>>0&127|0);continue}if(N<2048){M.setUint8(A++,N>>>6&31|192),M.setUint8(A++,N>>>0&63|128);continue}if(N<65536){M.setUint8(A++,N>>>12&15|224),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}if(N<1114112){M.setUint8(A++,N>>>18&7|240),M.setUint8(A++,N>>>12&63|128),M.setUint8(A++,N>>>6&63|128),M.setUint8(A++,N>>>0&63|128);continue}throw new Error("bad codepoint "+N)}}function g(M,A,T){for(var y="",U=A,N=A+T;U<N;U++){var q=M.getUint8(U);if((q&128)===0){y+=String.fromCharCode(q);continue}if((q&224)===192){y+=String.fromCharCode((q&15)<<6|M.getUint8(++U)&63);continue}if((q&240)===224){y+=String.fromCharCode((q&15)<<12|(M.getUint8(++U)&63)<<6|(M.getUint8(++U)&63)<<0);continue}if((q&248)===240){y+=String.fromCharCode((q&7)<<18|(M.getUint8(++U)&63)<<12|(M.getUint8(++U)&63)<<6|(M.getUint8(++U)&63)<<0);continue}throw new Error("Invalid byte "+q.toString(16))}return y}function p(M){for(var A=0,T=0,y=M.length;T<y;T++){var U=M.charCodeAt(T);if(U<128){A+=1;continue}if(U<2048){A+=2;continue}if(U<65536){A+=3;continue}if(U<1114112){A+=4;continue}throw new Error("bad codepoint "+U)}return A}function b(M,A){var T=j(M,A);if(T!==0){var y=new ArrayBuffer(T),U=new DataView(y);return D(M,U,0,A),y}}var O=65536*65536,R=1/O;function E(M,A){return A=A||0,M.getInt32(A)*O+M.getUint32(A+4)}function z(M,A){return A=A||0,M.getUint32(A)*O+M.getUint32(A+4)}function S(M,A,T){T<9223372036854776e3?(M.setInt32(A,Math.floor(T*R)),M.setInt32(A+4,T&-1)):(M.setUint32(A,2147483647),M.setUint32(A+4,2147483647))}function H(M,A,T){T<18446744073709552e3?(M.setUint32(A,Math.floor(T*R)),M.setInt32(A+4,T&-1)):(M.setUint32(A,4294967295),M.setUint32(A+4,4294967295))}var w=(function(){function M(A,T){var y=this;this.map=function(U){for(var N={},q=0;q<U;q++){var I=y.parse();N[I]=y.parse()}return N},this.bin=function(U){var N=new ArrayBuffer(U);return new Uint8Array(N).set(new Uint8Array(y.view.buffer,y.offset,U),0),y.offset+=U,N},this.buf=this.bin,this.str=function(U){var N=g(y.view,y.offset,U);return y.offset+=U,N},this.array=function(U){for(var N=new Array(U),q=0;q<U;q++)N[q]=y.parse();return N},this.ext=function(U){return y.offset+=U,{type:y.view.getInt8(y.offset),data:y.buf(U)}},this.parse=function(){var U=y.view.getUint8(y.offset),N,q;if((U&128)===0)return y.offset++,U;if((U&240)===128)return q=U&15,y.offset++,y.map(q);if((U&240)===144)return q=U&15,y.offset++,y.array(q);if((U&224)===160)return q=U&31,y.offset++,y.str(q);if((U&224)===224)return N=y.view.getInt8(y.offset),y.offset++,N;switch(U){case 192:return y.offset++,null;case 193:y.offset++;return;case 194:return y.offset++,!1;case 195:return y.offset++,!0;case 196:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.bin(q);case 197:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.bin(q);case 198:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.bin(q);case 199:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.ext(q);case 200:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.ext(q);case 201:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.ext(q);case 202:return N=y.view.getFloat32(y.offset+1),y.offset+=5,N;case 203:return N=y.view.getFloat64(y.offset+1),y.offset+=9,N;case 204:return N=y.view.getUint8(y.offset+1),y.offset+=2,N;case 205:return N=y.view.getUint16(y.offset+1),y.offset+=3,N;case 206:return N=y.view.getUint32(y.offset+1),y.offset+=5,N;case 207:return N=z(y.view,y.offset+1),y.offset+=9,N;case 208:return N=y.view.getInt8(y.offset+1),y.offset+=2,N;case 209:return N=y.view.getInt16(y.offset+1),y.offset+=3,N;case 210:return N=y.view.getInt32(y.offset+1),y.offset+=5,N;case 211:return N=E(y.view,y.offset+1),y.offset+=9,N;case 212:return q=1,y.offset++,y.ext(q);case 213:return q=2,y.offset++,y.ext(q);case 214:return q=4,y.offset++,y.ext(q);case 215:return q=8,y.offset++,y.ext(q);case 216:return q=16,y.offset++,y.ext(q);case 217:return q=y.view.getUint8(y.offset+1),y.offset+=2,y.str(q);case 218:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.str(q);case 219:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.str(q);case 220:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.array(q);case 221:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.array(q);case 222:return q=y.view.getUint16(y.offset+1),y.offset+=3,y.map(q);case 223:return q=y.view.getUint32(y.offset+1),y.offset+=5,y.map(q)}throw new Error("Unknown type 0x"+U.toString(16))},this.offset=T||0,this.view=A}return M})();function Y(M){var A=new DataView(M),T=new w(A),y=T.parse();if(T.offset!==M.byteLength)throw new Error(M.byteLength-T.offset+" trailing bytes");return y}function G(M,A){return Object.keys(M).filter(function(T){var y=M[T],U=typeof y;return(!A||y!=null)&&(U!=="function"||!!y.toJSON)})}function D(M,A,T,y){var U=typeof M;if(typeof M=="string"){var N=p(M);if(N<32)return A.setUint8(T,N|160),c(A,T+1,M),1+N;if(N<256)return A.setUint8(T,217),A.setUint8(T+1,N),c(A,T+2,M),2+N;if(N<65536)return A.setUint8(T,218),A.setUint16(T+1,N),c(A,T+3,M),3+N;if(N<4294967296)return A.setUint8(T,219),A.setUint32(T+1,N),c(A,T+5,M),5+N}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var q=M.byteLength;if(q<256)return A.setUint8(T,196),A.setUint8(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+2),2+q;if(q<65536)return A.setUint8(T,197),A.setUint16(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+3),3+q;if(q<4294967296)return A.setUint8(T,198),A.setUint32(T+1,q),new Uint8Array(A.buffer).set(new Uint8Array(M),T+5),5+q}if(typeof M=="number"){if(Math.floor(M)!==M)return A.setUint8(T,203),A.setFloat64(T+1,M),9;if(M>=0){if(M<128)return A.setUint8(T,M),1;if(M<256)return A.setUint8(T,204),A.setUint8(T+1,M),2;if(M<65536)return A.setUint8(T,205),A.setUint16(T+1,M),3;if(M<4294967296)return A.setUint8(T,206),A.setUint32(T+1,M),5;if(M<18446744073709552e3)return A.setUint8(T,207),H(A,T+1,M),9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return A.setInt8(T,M),1;if(M>=-128)return A.setUint8(T,208),A.setInt8(T+1,M),2;if(M>=-32768)return A.setUint8(T,209),A.setInt16(T+1,M),3;if(M>=-2147483648)return A.setUint8(T,210),A.setInt32(T+1,M),5;if(M>=-9223372036854776e3)return A.setUint8(T,211),S(A,T+1,M),9;throw new Error("Number too small -0x"+(-M).toString(16).substr(1))}if(U==="undefined")return y?0:(A.setUint8(T,212),A.setUint8(T+1,0),A.setUint8(T+2,0),3);if(M===null)return y?0:(A.setUint8(T,192),1);if(U==="boolean")return A.setUint8(T,M?195:194),1;if(typeof M.toJSON=="function")return D(M.toJSON(),A,T,y);if(U==="object"){var I,Z=0,K=void 0,X=Array.isArray(M);if(X?I=M.length:(K=G(M,y),I=K.length),I<16?(A.setUint8(T,I|(X?144:128)),Z=1):I<65536?(A.setUint8(T,X?220:222),A.setUint16(T+1,I),Z=3):I<4294967296&&(A.setUint8(T,X?221:223),A.setUint32(T+1,I),Z=5),X)for(var x=0;x<I;x++)Z+=D(M[x],A,T+Z,y);else if(K)for(var x=0;x<I;x++){var L=K[x];Z+=D(L,A,T+Z),Z+=D(M[L],A,T+Z,y)}return Z}if(U==="function")return 0;throw new Error("Unknown type "+U)}function j(M,A){var T=typeof M;if(T==="string"){var y=p(M);if(y<32)return 1+y;if(y<256)return 2+y;if(y<65536)return 3+y;if(y<4294967296)return 5+y}if(ArrayBuffer.isView&&ArrayBuffer.isView(M)&&(M=M.buffer),M instanceof ArrayBuffer){var U=M.byteLength;if(U<256)return 2+U;if(U<65536)return 3+U;if(U<4294967296)return 5+U}if(typeof M=="number"){if(Math.floor(M)!==M)return 9;if(M>=0){if(M<128)return 1;if(M<256)return 2;if(M<65536)return 3;if(M<4294967296)return 5;if(M<18446744073709552e3)return 9;throw new Error("Number too big 0x"+M.toString(16))}if(M>=-32)return 1;if(M>=-128)return 2;if(M>=-32768)return 3;if(M>=-2147483648)return 5;if(M>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+M.toString(16).substr(1))}if(T==="boolean")return 1;if(M===null)return A?0:1;if(M===void 0)return A?0:3;if(typeof M.toJSON=="function")return j(M.toJSON(),A);if(T==="object"){var N,q=0;if(Array.isArray(M)){N=M.length;for(var I=0;I<N;I++)q+=j(M[I],A)}else{var Z=G(M,A);N=Z.length;for(var I=0;I<N;I++){var K=Z[I];q+=j(K)+j(M[K],A)}}if(N<16)return 1+q;if(N<65536)return 3+q;if(N<4294967296)return 5+q;throw new Error("Array or object too long 0x"+N.toString(16))}if(T==="function")return 0;throw new Error("Unknown type "+T)}r.default={encode:b,decode:Y,inspect:h,utf8Write:c,utf8Read:g,utf8ByteCount:p}}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(30)),g=h.__importDefault(o(50)),p=h.__importDefault(o(3)),b=h.__importDefault(o(4)),O=h.__importDefault(o(55)),R=h.__importDefault(o(57)),E=h.__importDefault(o(62)),z=h.__importDefault(o(64)),S=h.__importDefault(o(68)),H=h.__importDefault(o(2)),w=o(8),Y=h.__importDefault(o(65)),G=h.__importDefault(o(66)),D=h.__importDefault(o(41)),j=(0,R.default)(z.default,O.default);p.default.Crypto=j,p.default.BufferUtils=O.default,p.default.Http=E.default,p.default.Config=z.default,p.default.Transports=S.default,p.default.WebStorage=Y.default,c.default.Crypto=j,g.default.Crypto=j,H.default.initLogHandlers(),p.default.Defaults=(0,w.getDefaults)(G.default),p.default.Config.agent&&(p.default.Defaults.agent+=" "+p.default.Config.agent),p.default.Config.noUpgrade&&(p.default.Defaults.upgradeTransports=[]),r.default={ErrorInfo:b.default,Rest:c.default,Realtime:g.default,msgpack:D.default}}),(function(s){s.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.50","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**","src/**","react/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^8.14.2"},"peerDependencies":{"react":">=16.8.0","react-dom":">=16.8.0"},"peerDependenciesMeta":{"react":{"optional":true},"react-dom":{"optional":true}},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@arethetypeswrong/cli":"^0.13.1","@babel/preset-env":"^7.23.6","@testing-library/react":"^13.3.0","@types/crypto-js":"^4.0.1","@types/jmespath":"^0.15.2","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","@vitejs/plugin-react":"^1.3.2","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","babel-loader":"^8.3.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-import":"^2.28.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-react":"^7.32.2","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","jmespath":"^0.16.0","jsdom":"^20.0.0","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","mocha-junit-reporter":"^2.2.1","null-loader":"^4.0.1","playwright":"^1.39.0","prettier":"^2.5.1","react":">=18.1.0","react-dom":">=18.1.0","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","vite":"^4.4.9","vitest":"^0.18.0","webpack":"^4.44.2","webpack-cli":"^4.2.0","webpack-node-externals":"^3.0.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"start:react":"npx vite serve","grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","test:react":"vitest run","concat":"grunt concat","build":"grunt build:all && npm run build:react","build:node":"grunt build:node","build:browser":"grunt build:browser","build:react":"npm run build:react:mjs && npm run build:react:cjs && cp src/platform/react-hooks/res/package.react.json react/package.json","build:react:mjs":"tsc --project src/platform/react-hooks/tsconfig.mjs.json && cp src/platform/react-hooks/res/package.mjs.json react/mjs/package.json","build:react:cjs":"tsc --project src/platform/react-hooks/tsconfig.cjs.json && cp src/platform/react-hooks/res/package.cjs.json react/cjs/package.json","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')}),(function(s,r){}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(32),o(25))})(this,function(h){return h.HmacSHA256})}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(47)),p=h.__importDefault(o(15)),b=h.__importDefault(o(20)),O=h.__importDefault(o(4)),R=h.__importDefault(o(48)),E=function(){},z=(function(){function Y(G){this.rest=G,this.admin=new S(G)}return Y})(),S=(function(){function Y(G){this.rest=G,this.deviceRegistrations=new H(G),this.channelSubscriptions=new w(G)}return Y.prototype.publish=function(G,D,j){var M=this.rest,A=M.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(M.options,A),y={},U=c.mixin({recipient:G},D);if(typeof j!="function"){if(this.rest.options.promises)return c.promisify(this,"publish",arguments);j=E}M.options.headers&&c.mixin(T,M.options.headers),M.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var N=c.encodeBody(U,A);p.default.post(M,"/push/publish",N,T,y,null,function(q){return j(q)})},Y})(),H=(function(){function Y(G){this.rest=G}return Y.prototype.save=function(G,D){var j=this.rest,M=g.default.fromValues(G),A=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(j.options,A),y={};if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"save",arguments);D=E}j.options.headers&&c.mixin(T,j.options.headers),j.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var U=c.encodeBody(M,A);p.default.put(j,"/push/deviceRegistrations/"+encodeURIComponent(G.id),U,T,y,null,function(N,q,I,Z){D(N,N?void 0:g.default.fromResponseBody(q,Z?void 0:A))})},Y.prototype.get=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(j.options,M),T=G.id||G;if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"get",arguments);D=E}if(typeof T!="string"||!T.length){D(new O.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400));return}j.options.headers&&c.mixin(A,j.options.headers),p.default.get(j,"/push/deviceRegistrations/"+encodeURIComponent(T),A,{},null,function(y,U,N,q){D(y,y?void 0:g.default.fromResponseBody(U,q?void 0:M))})},Y.prototype.list=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(j.options,M);if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"list",arguments);D=E}j.options.headers&&c.mixin(T,j.options.headers),new b.default(j,"/push/deviceRegistrations",T,A,function(y,U,N){return g.default.fromResponseBody(y,N?void 0:M)}).get(G,D)},Y.prototype.remove=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(j.options,M),T={},y=G.id||G;if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"remove",arguments);D=E}if(typeof y!="string"||!y.length){D(new O.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400));return}j.options.headers&&c.mixin(A,j.options.headers),j.options.pushFullWait&&c.mixin(T,{fullWait:"true"}),p.default.delete(j,"/push/deviceRegistrations/"+encodeURIComponent(y),A,T,null,function(U){return D(U)})},Y.prototype.removeWhere=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(j.options,M);if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"removeWhere",arguments);D=E}j.options.headers&&c.mixin(A,j.options.headers),j.options.pushFullWait&&c.mixin(G,{fullWait:"true"}),p.default.delete(j,"/push/deviceRegistrations",A,G,null,function(T){return D(T)})},Y})(),w=(function(){function Y(G){this.remove=Y.prototype.removeWhere,this.rest=G}return Y.prototype.save=function(G,D){var j=this.rest,M=R.default.fromValues(G),A=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,T=c.defaultPostHeaders(j.options,A),y={};if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"save",arguments);D=E}j.options.headers&&c.mixin(T,j.options.headers),j.options.pushFullWait&&c.mixin(y,{fullWait:"true"});var U=c.encodeBody(M,A);p.default.post(j,"/push/channelSubscriptions",U,T,y,null,function(N,q,I,Z){D(N,!N&&R.default.fromResponseBody(q,Z?void 0:A))})},Y.prototype.list=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(j.options,M);if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"list",arguments);D=E}j.options.headers&&c.mixin(T,j.options.headers),new b.default(j,"/push/channelSubscriptions",T,A,function(y,U,N){return R.default.fromResponseBody(y,N?void 0:M)}).get(G,D)},Y.prototype.removeWhere=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=c.defaultGetHeaders(j.options,M);if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"removeWhere",arguments);D=E}j.options.headers&&c.mixin(A,j.options.headers),j.options.pushFullWait&&c.mixin(G,{fullWait:"true"}),p.default.delete(j,"/push/channelSubscriptions",A,G,null,function(T){return D(T)})},Y.prototype.listChannels=function(G,D){var j=this.rest,M=j.options.useBinaryProtocol?c.Format.msgpack:c.Format.json,A=this.rest.http.supportsLinkHeaders?void 0:M,T=c.defaultGetHeaders(j.options,M);if(typeof D!="function"){if(this.rest.options.promises)return c.promisify(this,"listChannels",arguments);D=E}j.options.headers&&c.mixin(T,j.options.headers),j.options.pushFullWait&&c.mixin(G,{fullWait:"true"}),new b.default(j,"/push/channels",T,A,function(y,U,N){for(var q=!N&&M?c.decodeBody(y,M):y,I=0;I<q.length;I++)q[I]=String(q[I]);return q}).get(G,D)},Y})();r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(4)),p;(function(R){R.Phone="phone",R.Tablet="tablet",R.Desktop="desktop",R.TV="tv",R.Watch="watch",R.Car="car",R.Embedded="embedded",R.Other="other"})(p||(p={}));var b;(function(R){R.Android="android",R.IOS="ios",R.Browser="browser"})(b||(b={}));var O=(function(){function R(){}return R.prototype.toJSON=function(){var E,z,S;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(E=this.push)===null||E===void 0?void 0:E.recipient,state:(z=this.push)===null||z===void 0?void 0:z.state,error:(S=this.push)===null||S===void 0?void 0:S.error}}},R.prototype.toString=function(){var E,z,S,H,w="[DeviceDetails";return this.id&&(w+="; id="+this.id),this.platform&&(w+="; platform="+this.platform),this.formFactor&&(w+="; formFactor="+this.formFactor),this.clientId&&(w+="; clientId="+this.clientId),this.metadata&&(w+="; metadata="+this.metadata),this.deviceIdentityToken&&(w+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),!((E=this.push)===null||E===void 0)&&E.recipient&&(w+="; push.recipient="+JSON.stringify(this.push.recipient)),!((z=this.push)===null||z===void 0)&&z.state&&(w+="; push.state="+this.push.state),!((S=this.push)===null||S===void 0)&&S.error&&(w+="; push.error="+JSON.stringify(this.push.error)),!((H=this.push)===null||H===void 0)&&H.metadata&&(w+="; push.metadata="+this.push.metadata),w+="]",w},R.fromResponseBody=function(E,z){return z&&(E=c.decodeBody(E,z)),c.isArray(E)?R.fromValuesArray(E):R.fromValues(E)},R.fromValues=function(E){return E.error=E.error&&g.default.fromValues(E.error),Object.assign(new R,E)},R.fromValuesArray=function(E){for(var z=E.length,S=new Array(z),H=0;H<z;H++)S[H]=R.fromValues(E[H]);return S},R.toRequestBody=c.encodeBody,R})();r.default=O}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=(function(){function p(){}return p.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},p.prototype.toString=function(){var b="[PushChannelSubscription";return this.channel&&(b+="; channel="+this.channel),this.deviceId&&(b+="; deviceId="+this.deviceId),this.clientId&&(b+="; clientId="+this.clientId),b+="]",b},p.fromResponseBody=function(b,O){return O&&(b=c.decodeBody(b,O)),c.isArray(b)?p.fromValuesArray(b):p.fromValues(b)},p.fromValues=function(b){return Object.assign(new p,b)},p.fromValuesArray=function(b){for(var O=b.length,R=new Array(O),E=0;E<O;E++)R[E]=p.fromValues(b[E]);return R},p.toRequestBody=c.encodeBody,p})();r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=(function(){function j(M){this.count=M&&M.count||0,this.data=M&&M.data||0,this.uncompressedData=M&&M.uncompressedData||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return j})(),p=(function(j){h.__extends(M,j);function M(A){var T=j.call(this,A)||this;return A&&A.category&&(T.category={},c.forInOwnNonNullProperties(A.category,function(y){T.category[y]=new g(A.category[y])})),T}return M})(g),b=(function(){function j(M){this.peak=M&&M.peak||0,this.min=M&&M.min||0,this.mean=M&&M.mean||0,this.opened=M&&M.opened||0,this.refused=M&&M.refused||0}return j})(),O=(function(){function j(M){this.succeeded=M&&M.succeeded||0,this.failed=M&&M.failed||0,this.refused=M&&M.refused||0}return j})(),R=(function(){function j(M){this.plain=new b(M&&M.plain),this.tls=new b(M&&M.tls),this.all=new b(M&&M.all)}return j})(),E=(function(){function j(M){this.messages=new p(M&&M.messages),this.presence=new p(M&&M.presence),this.all=new p(M&&M.all)}return j})(),z=(function(){function j(M){this.realtime=new E(M&&M.realtime),this.rest=new E(M&&M.rest),this.webhook=new E(M&&M.webhook),this.sharedQueue=new E(M&&M.sharedQueue),this.externalQueue=new E(M&&M.externalQueue),this.httpEvent=new E(M&&M.httpEvent),this.push=new E(M&&M.push),this.all=new E(M&&M.all)}return j})(),S=(function(){function j(M){this.all=new E(M&&M.all),this.inbound=new z(M&&M.inbound),this.outbound=new z(M&&M.outbound)}return j})(),H=(function(){function j(M){this.all=new E(M&&M.all),this.producerPaid=new S(M&&M.producerPaid),this.consumerPaid=new S(M&&M.consumerPaid)}return j})(),w=(function(){function j(M){this.messages=M&&M.messages||0;var A=M&&M.notifications;this.notifications={invalid:A&&A.invalid||0,attempted:A&&A.attempted||0,successful:A&&A.successful||0,failed:A&&A.failed||0},this.directPublishes=M&&M.directPublishes||0}return j})(),Y=(function(){function j(M){this.succeeded=M&&M.succeeded||0,this.skipped=M&&M.skipped||0,this.failed=M&&M.failed||0}return j})(),G=(function(){function j(M){var A=this;this.delta=void 0,M&&M.delta&&(this.delta={},c.forInOwnNonNullProperties(M.delta,function(T){A.delta[T]=new Y(M.delta[T])}))}return j})(),D=(function(j){h.__extends(M,j);function M(A){var T=j.call(this,A)||this;return T.persisted=new E(A&&A.persisted),T.connections=new R(A&&A.connections),T.channels=new b(A&&A.channels),T.apiRequests=new O(A&&A.apiRequests),T.tokenRequests=new O(A&&A.tokenRequests),T.xchgProducer=new H(A&&A.xchgProducer),T.xchgConsumer=new H(A&&A.xchgConsumer),T.push=new w(A&&A.pushStats),T.processed=new G(A&&A.processed),T.inProgress=A&&A.inProgress||void 0,T.unit=A&&A.unit||void 0,T.intervalId=A&&A.intervalId||void 0,T}return M.fromValues=function(A){return new M(A)},M})(S);r.default=D}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(30)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),O=h.__importDefault(o(51)),R=h.__importDefault(o(38)),E=h.__importDefault(o(8)),z=h.__importDefault(o(4)),S=h.__importDefault(o(10)),H=h.__importDefault(o(35)),w=h.__importDefault(o(3)),Y=h.__importDefault(o(9)),G=(function(j){h.__extends(M,j);function M(A){var T=j.call(this,A)||this;return b.default.logAction(b.default.LOG_MINOR,"Realtime()",""),T.connection=new O.default(T,T.options),T.channels=new D(T),A.autoConnect!==!1&&T.connect(),T}return M.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},M.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},M.Promise=function(A){return A=E.default.objectifyOptions(A),A.promises=!0,new M(A)},M.Callbacks=M,M.Utils=c,M.ConnectionManager=H.default,M.Platform=w.default,M.ProtocolMessage=S.default,M.Message=Y.default,M})(g.default),D=(function(j){h.__extends(M,j);function M(A){var T=j.call(this)||this;return T.realtime=A,T.all=Object.create(null),A.connection.connectionManager.on("transport.active",function(){T.onTransportActive()}),T}return M.prototype.channelSerials=function(){for(var A={},T=0,y=c.keysArray(this.all,!0);T<y.length;T++){var U=y[T],N=this.all[U];N.properties.channelSerial&&(A[U]=N.properties.channelSerial)}return A},M.prototype.recoverChannels=function(A){for(var T=0,y=c.keysArray(A,!0);T<y.length;T++){var U=y[T],N=this.get(U);N.properties.channelSerial=A[U]}},M.prototype.onChannelMessage=function(A){var T=A.channel;if(T===void 0){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+A.action);return}var y=this.all[T];if(!y){b.default.logAction(b.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+T);return}y.onMessage(A)},M.prototype.onTransportActive=function(){for(var A in this.all){var T=this.all[A];T.state==="attaching"||T.state==="detaching"?T.checkPendingState():T.state==="suspended"?T._attach(!1,null):T.state==="attached"&&T.requestState("attaching")}},M.prototype.propogateConnectionInterruption=function(A,T){var y={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},U=["attaching","attached","detaching","suspended"],N=y[A];for(var q in this.all){var I=this.all[q];c.arrIn(U,I.state)&&I.notifyState(N,T)}},M.prototype.get=function(A,T){A=String(A);var y=this.all[A];if(!y)y=this.all[A]=new R.default(this.realtime,A,T);else if(T){if(y._shouldReattachToSetOptions(T,y.channelOptions))throw new z.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);y.setOptions(T)}return y},M.prototype.getDerived=function(A,T,y){if(T.filter){var U=c.toBase64(T.filter),N=c.matchDerivedChannel(A);A="[filter=".concat(U).concat(N.qualifierParam,"]").concat(N.channelName)}return this.get(A,y)},M.prototype.release=function(A){A=String(A);var T=this.all[A];if(T){var y=T.getReleaseErr();if(y)throw y;delete this.all[A]}},M})(p.default);r.default=G}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(7)),p=h.__importDefault(o(35)),b=h.__importDefault(o(2)),O=h.__importDefault(o(37)),R=h.__importDefault(o(3));function E(){}var z=(function(S){h.__extends(H,S);function H(w,Y){var G=S.call(this)||this;return G.whenState=(function(D,j){return g.default.prototype.whenState.call(G,D,G.state,j,new O.default(void 0,D))}),G.ably=w,G.connectionManager=new p.default(w,Y),G.state=G.connectionManager.state.state,G.key=void 0,G.id=void 0,G.errorReason=null,G.connectionManager.on("connectionstate",function(D){var j=G.state=D.current;R.default.Config.nextTick(function(){G.emit(j,D)})}),G.connectionManager.on("update",function(D){R.default.Config.nextTick(function(){G.emit("update",D)})}),G}return H.prototype.connect=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},H.prototype.ping=function(w){if(b.default.logAction(b.default.LOG_MINOR,"Connection.ping()",""),!w){if(this.ably.options.promises)return c.promisify(this,"ping",arguments);w=E}this.connectionManager.ping(null,w)},H.prototype.close=function(){b.default.logAction(b.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(H.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),H.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},H})(g.default);r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.PendingMessage=void 0;var h=o(0),c=h.__importDefault(o(10)),g=h.__importStar(o(1)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),O=h.__importDefault(o(36)),R=h.__importDefault(o(4)),E=c.default.Action,z=(function(){function H(w,Y){this.message=w,this.callback=Y,this.merged=!1;var G=w.action;this.sendAttempted=!1,this.ackRequired=G==E.MESSAGE||G==E.PRESENCE}return H})();r.PendingMessage=z;var S=(function(H){h.__extends(w,H);function w(Y){var G=H.call(this)||this;return G.transport=Y,G.messageQueue=new O.default,Y.on("ack",function(D,j){G.onAck(D,j)}),Y.on("nack",function(D,j,M){G.onNack(D,j,M)}),G}return w.prototype.onAck=function(Y,G){b.default.logAction(b.default.LOG_MICRO,"Protocol.onAck()","serial = "+Y+"; count = "+G),this.messageQueue.completeMessages(Y,G)},w.prototype.onNack=function(Y,G,D){b.default.logAction(b.default.LOG_ERROR,"Protocol.onNack()","serial = "+Y+"; count = "+G+"; err = "+g.inspectError(D)),D||(D=new R.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(Y,G,D)},w.prototype.onceIdle=function(Y){var G=this.messageQueue;if(G.count()===0){Y();return}G.once("idle",Y)},w.prototype.send=function(Y){Y.ackRequired&&this.messageQueue.push(Y),b.default.shouldLog(b.default.LOG_MICRO)&&b.default.logAction(b.default.LOG_MICRO,"Protocol.send()","sending msg; "+c.default.stringify(Y.message)),Y.sendAttempted=!0,this.transport.send(Y.message)},w.prototype.getTransport=function(){return this.transport},w.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},w.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},w.prototype.finish=function(){var Y=this.transport;this.onceIdle(function(){Y.disconnect()})},w})(p.default);r.default=S}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(3)),g=h.__importStar(o(1)),p=h.__importDefault(o(26)),b=h.__importDefault(o(8)),O=h.__importDefault(o(2)),R=h.__importDefault(o(10)),E=h.__importDefault(o(4)),z="web_socket";function S(Y){return!!Y.on}var H=(function(Y){h.__extends(G,Y);function G(D,j,M){var A=Y.call(this,D,j,M)||this;return A.shortName=z,M.heartbeats=c.default.Config.useProtocolHeartbeats,A.wsHost=b.default.getHost(M.options,M.host,!0),A}return G.isAvailable=function(){return!!c.default.Config.WebSocket},G.prototype.createWebSocket=function(D,j){return this.uri=D+g.toQueryString(j),new c.default.Config.WebSocket(this.uri)},G.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},G.prototype.connect=function(){O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),p.default.prototype.connect.call(this);var D=this,j=this.params,M=j.options,A=M.tls?"wss://":"ws://",T=A+this.wsHost+":"+b.default.getPort(M)+"/";O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+T),this.auth.getAuthParams(function(y,U){if(!D.isDisposed){var N="";for(var q in U)N+=" "+q+": "+U[q]+";";if(O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+N+" err: "+y),y){D.disconnect(y);return}var I=j.getConnectParams(U);try{var Z=D.wsConnection=D.createWebSocket(T,I);Z.binaryType=c.default.Config.binaryType,Z.onopen=function(){D.onWsOpen()},Z.onclose=function(K){D.onWsClose(K)},Z.onmessage=function(K){D.onWsData(K.data)},Z.onerror=function(K){D.onWsError(K)},S(Z)&&Z.on("ping",function(){D.onActivity()})}catch(K){O.default.logAction(O.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(K.stack||K.message)),D.disconnect(K)}}})},G.prototype.send=function(D){var j=this.wsConnection;if(!j){O.default.logAction(O.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{j.send(R.default.serialize(D,this.params.format))}catch(A){var M="Exception from ws connection when trying to send: "+g.inspectError(A);O.default.logAction(O.default.LOG_ERROR,"WebSocketTransport.send()",M),this.finish("disconnected",new E.default(M,5e4,500))}},G.prototype.onWsData=function(D){O.default.logAction(O.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+D.length+"; type = "+typeof D);try{this.onProtocolMessage(R.default.deserialize(D,this.format))}catch(j){O.default.logAction(O.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+j.stack)}},G.prototype.onWsOpen=function(){O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},G.prototype.onWsClose=function(D){var j,M;if(typeof D=="object"?(M=D.code,j=D.wasClean||M===1e3):(M=D,j=M==1e3),delete this.wsConnection,j){O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var A=new E.default("Websocket closed",80003,400);this.finish("disconnected",A)}else{var T="Unclean disconnection of WebSocket ; code = "+M,A=new E.default(T,80003,400);O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.onWsClose()",T),this.finish("disconnected",A)}this.emit("disposed")},G.prototype.onWsError=function(D){var j=this;O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+D.message),c.default.Config.nextTick(function(){j.disconnect(Error(D.message))})},G.prototype.dispose=function(){O.default.logAction(O.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var D=this.wsConnection;D&&(D.onmessage=function(){},delete this.wsConnection,c.default.Config.nextTick(function(){if(O.default.logAction(O.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!D)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");D.close()}))},G})(p.default);function w(Y){return H.isAvailable()&&(Y.supportedTransports[z]=H),H}r.default=w}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(1)),g=h.__importDefault(o(34)),p=h.__importDefault(o(7)),b=h.__importDefault(o(2)),O=h.__importDefault(o(16)),R=h.__importStar(o(4)),E=h.__importDefault(o(38)),z=h.__importDefault(o(24)),S=h.__importDefault(o(39)),H=function(){};function w(A){return A.channel.realtime.auth.clientId}function Y(A){var T=A.channel.realtime,y=T.auth.clientId;return(!y||y==="*")&&T.connection.state==="connected"}function G(A,T,y){switch(A.state){case"attached":case"suspended":y();break;case"initialized":case"detached":case"detaching":case"attaching":A.attach(function(U){U?T(U):y()});break;default:T(R.default.fromValues(A.invalidStateError()))}}function D(A,T){if(A.isSynthesized()||T.isSynthesized())return A.timestamp>=T.timestamp;var y=A.parseId(),U=T.parseId();return y.msgSerial===U.msgSerial?y.index>U.index:y.msgSerial>U.msgSerial}var j=(function(A){h.__extends(T,A);function T(y){var U=A.call(this,y)||this;return U.channel=y,U.syncComplete=!1,U.members=new M(U,function(N){return N.clientId+":"+N.connectionId}),U._myMembers=new M(U,function(N){return N.clientId}),U.subscriptions=new p.default,U.pendingPresence=[],U}return T.prototype.enter=function(y,U){if(Y(this))throw new R.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"enter",U)},T.prototype.update=function(y,U){if(Y(this))throw new R.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,y,"update",U)},T.prototype.enterClient=function(y,U,N){return this._enterOrUpdateClient(void 0,y,U,"enter",N)},T.prototype.updateClient=function(y,U,N){return this._enterOrUpdateClient(void 0,y,U,"update",N)},T.prototype._enterOrUpdateClient=function(y,U,N,q,I){var Z=this;if(!I)if(typeof N=="function")I=N,N=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"_enterOrUpdateClient",[y,U,N,q]);I=H}var K=this.channel;if(!K.connectionManager.activeState()){I(K.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence."+q+"Client()","channel = "+K.name+", id = "+y+", client = "+(U||"(implicit) "+w(this)));var X=O.default.fromData(N);X.action=q,y&&(X.id=y),U&&(X.clientId=U),O.default.encode(X,K.channelOptions,function(x){if(x){I(x);return}switch(K.state){case"attached":K.sendPresence(X,I);break;case"initialized":case"detached":K.attach();case"attaching":Z.pendingPresence.push({presence:X,callback:I});break;default:x=new R.PartialErrorInfo("Unable to "+q+" presence channel while in "+K.state+" state",90001),x.code=90001,I(x)}})},T.prototype.leave=function(y,U){if(Y(this))throw new R.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,y,U)},T.prototype.leaveClient=function(y,U,N){if(!N)if(typeof U=="function")N=U,U=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"leaveClient",[y,U]);N=H}var q=this.channel;if(!q.connectionManager.activeState()){N==null||N(q.connectionManager.getError());return}b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+y);var I=O.default.fromData(U);switch(I.action="leave",y&&(I.clientId=y),q.state){case"attached":q.sendPresence(I,N);break;case"attaching":this.pendingPresence.push({presence:I,callback:N});break;case"initialized":case"failed":{var Z=new R.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);N==null||N(Z);break}default:N==null||N(q.invalidStateError())}},T.prototype.get=function(y,U){var N=this,q=Array.prototype.slice.call(arguments);q.length==1&&typeof q[0]=="function"&&q.unshift(null),y=q[0],U=q[1];var I=!y||("waitForSync"in y?y.waitForSync:!0);if(!U){if(this.channel.realtime.options.promises)return c.promisify(this,"get",q);U=H}function Z(K){U(null,y?K.list(y):K.values())}if(this.channel.state==="suspended"){I?U(R.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):Z(this.members);return}G(this.channel,U,function(){var K=N.members;I?K.waitSync(function(){Z(K)}):Z(K)})},T.prototype.history=function(y,U){if(b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),U===void 0)if(typeof y=="function")U=y,y=null;else{if(this.channel.realtime.options.promises)return c.promisify(this,"history",arguments);U=H}y&&y.untilAttach&&(this.channel.state==="attached"?(delete y.untilAttach,y.from_serial=this.channel.properties.attachSerial):U(new R.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),g.default.prototype._history.call(this,y,U)},T.prototype.setPresence=function(y,U,N){b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+y.length+" participants; syncChannelSerial = "+N);var q,I,Z=this.members,K=this._myMembers,X=[],x=this.channel.connectionManager.connectionId;U&&(this.members.startSync(),N&&(I=N.match(/^[\w-]+:(.*)$/))&&(q=I[1]));for(var L=0;L<y.length;L++){var Q=O.default.fromValues(y[L]);switch(Q.action){case"leave":Z.remove(Q)&&X.push(Q),Q.connectionId===x&&!Q.isSynthesized()&&K.remove(Q);break;case"enter":case"present":case"update":Z.put(Q)&&X.push(Q),Q.connectionId===x&&K.put(Q);break}}U&&!q&&(Z.endSync(),this.channel.syncChannelSerial=null);for(var L=0;L<X.length;L++){var Q=X[L];this.subscriptions.emit(Q.action,Q)}},T.prototype.onAttached=function(y){b.default.logAction(b.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+y),y?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var U=this.pendingPresence,N=U.length;if(N){this.pendingPresence=[];var q=[],I=z.default.create();b.default.logAction(b.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+N+" queued presence messages");for(var Z=0;Z<N;Z++){var K=U[Z];q.push(K.presence),I.push(K.callback)}this.channel.sendPresence(q,I)}},T.prototype.actOnChannelState=function(y,U,N){switch(y){case"attached":this.onAttached(U);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(N);break}},T.prototype.failPendingPresence=function(y){if(this.pendingPresence.length){b.default.logAction(b.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+c.inspectError(y));for(var U=0;U<this.pendingPresence.length;U++)try{this.pendingPresence[U].callback(y)}catch{}this.pendingPresence=[]}},T.prototype._clearMyMembers=function(){this._myMembers.clear()},T.prototype._ensureMyMembersPresent=function(){var y=this,U=this._myMembers,N=function(Z){if(Z){var K="Presence auto-re-enter failed: "+Z.toString(),X=new R.default(K,91004,400);b.default.logAction(b.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",K);var x=new S.default(y.channel.state,y.channel.state,!0,!1,X);y.channel.emit("update",x)}};for(var q in U.map){var I=U.map[q];b.default.logAction(b.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+I.clientId+'" into the presence set'),this._enterOrUpdateClient(I.id,I.clientId,I.data,"enter",N)}},T.prototype._synthesizeLeaves=function(y){var U=this.subscriptions;c.arrForEach(y,function(N){var q=O.default.fromValues({action:"leave",connectionId:N.connectionId,clientId:N.clientId,data:N.data,encoding:N.encoding,timestamp:c.now()});U.emit("leave",q)})},T.prototype.on=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];b.default.renamedMethod("RealtimePresence","on","subscribe"),this.subscribe.apply(this,y)},T.prototype.off=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];b.default.renamedMethod("RealtimePresence","off","unsubscribe"),this.unsubscribe.apply(this,y)},T.prototype.subscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=E.default.processListenerArgs(y),q=N[0],I=N[1],Z=N[2],K=this.channel;if(!Z){if(this.channel.realtime.options.promises)return c.promisify(this,"subscribe",[q,I]);Z=H}if(K.state==="failed"){Z(R.default.fromValues(K.invalidStateError()));return}this.subscriptions.on(q,I),K.attach(Z)},T.prototype.unsubscribe=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];var N=E.default.processListenerArgs(y),q=N[0],I=N[1];this.subscriptions.off(q,I)},T})(g.default),M=(function(A){h.__extends(T,A);function T(y,U){var N=A.call(this)||this;return N.presence=y,N.map=Object.create(null),N.syncInProgress=!1,N.residualMembers=null,N.memberKey=U,N}return T.prototype.get=function(y){return this.map[y]},T.prototype.getClient=function(y){var U=this.map,N=[];for(var q in U){var I=U[q];I.clientId==y&&I.action!="absent"&&N.push(I)}return N},T.prototype.list=function(y){var U=this.map,N=y&&y.clientId,q=y&&y.connectionId,I=[];for(var Z in U){var K=U[Z];K.action!=="absent"&&(N&&N!=K.clientId||q&&q!=K.connectionId||I.push(K))}return I},T.prototype.put=function(y){(y.action==="enter"||y.action==="update")&&(y=O.default.fromValues(y),y.action="present");var U=this.map,N=this.memberKey(y);this.residualMembers&&delete this.residualMembers[N];var q=U[N];return q&&!D(y,q)?!1:(U[N]=y,!0)},T.prototype.values=function(){var y=this.map,U=[];for(var N in y){var q=y[N];q.action!="absent"&&U.push(q)}return U},T.prototype.remove=function(y){var U=this.map,N=this.memberKey(y),q=U[N];return q&&!D(y,q)?!1:(this.syncInProgress?(y=O.default.fromValues(y),y.action="absent",U[N]=y):delete U[N],!0)},T.prototype.startSync=function(){var y=this.map,U=this.syncInProgress;b.default.logAction(b.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),this.syncInProgress||(this.residualMembers=c.copy(y),this.setInProgress(!0))},T.prototype.endSync=function(){var y=this.map,U=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),U){for(var N in y){var q=y[N];q.action==="absent"&&delete y[N]}this.presence._synthesizeLeaves(c.valuesArray(this.residualMembers));for(var N in this.residualMembers)delete y[N];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},T.prototype.waitSync=function(y){var U=this.syncInProgress;if(b.default.logAction(b.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+U),!U){y();return}this.once("sync",y)},T.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},T.prototype.setInProgress=function(y){b.default.logAction(b.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+y),this.syncInProgress=y,this.presence.syncComplete=!y},T})(p.default);r.default=j}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=o(56),g=o(31),p=o(11),b=h.__importDefault(o(5)),O=h.__importDefault(o(3)),R=(function(){function E(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return E.prototype.isWordArray=function(z){return z!=null&&z.sigBytes!==void 0},E.prototype.isArrayBuffer=function(z){return z!=null&&z.constructor===ArrayBuffer},E.prototype.isTypedArray=function(z){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(z)},E.prototype.uint8ViewToBase64=function(z){for(var S="",H=this.base64CharSet,w=z.byteLength,Y=w%3,G=w-Y,D,j,M,A,T,y=0;y<G;y=y+3)T=z[y]<<16|z[y+1]<<8|z[y+2],D=(T&16515072)>>18,j=(T&258048)>>12,M=(T&4032)>>6,A=T&63,S+=H[D]+H[j]+H[M]+H[A];return Y==1?(T=z[G],D=(T&252)>>2,j=(T&3)<<4,S+=H[D]+H[j]+"=="):Y==2&&(T=z[G]<<8|z[G+1],D=(T&64512)>>10,j=(T&1008)>>4,M=(T&15)<<2,S+=H[D]+H[j]+H[M]+"="),S},E.prototype.base64ToArrayBuffer=function(z){for(var S=atob==null?void 0:atob(z),H=S.length,w=new Uint8Array(H),Y=0;Y<H;Y++){var G=S.charCodeAt(Y);w[Y]=G}return w.buffer},E.prototype.isBuffer=function(z){return this.isArrayBuffer(z)||this.isWordArray(z)||this.isTypedArray(z)},E.prototype.toBuffer=function(z){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(z))return new Uint8Array(z);if(this.isTypedArray(z))return new Uint8Array(z.buffer);if(this.isWordArray(z)){for(var S=new ArrayBuffer(z.sigBytes),H=new Uint8Array(S),w=0;w<z.sigBytes;w++)H[w]=z.words[w>>>2]>>>24-w%4*8&255;return H}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},E.prototype.toArrayBuffer=function(z){return this.isArrayBuffer(z)?z:this.toBuffer(z).buffer},E.prototype.toWordArray=function(z){return this.isTypedArray(z)&&(z=z.buffer),this.isWordArray(z)?z:b.default.create(z)},E.prototype.base64Encode=function(z){return this.isWordArray(z)?(0,p.stringify)(z):this.uint8ViewToBase64(this.toBuffer(z))},E.prototype.base64Decode=function(z){return ArrayBuffer&&O.default.Config.atob?this.base64ToArrayBuffer(z):(0,p.parse)(z)},E.prototype.hexEncode=function(z){return(0,c.stringify)(this.toWordArray(z))},E.prototype.hexDecode=function(z){var S=(0,c.parse)(z);return ArrayBuffer?this.toArrayBuffer(S):S},E.prototype.utf8Encode=function(z){return O.default.Config.TextEncoder?new O.default.Config.TextEncoder().encode(z).buffer:(0,g.parse)(z)},E.prototype.utf8Decode=function(z){if(!this.isBuffer(z))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(z)?new TextDecoder().decode(z):(z=this.toWordArray(z),(0,g.stringify)(z))},E.prototype.bufferCompare=function(z,S){if(!z)return-1;if(!S)return 1;var H=this.toWordArray(z),w=this.toWordArray(S);H.clamp(),w.clamp();var Y=H.sigBytes-w.sigBytes;if(Y!=0)return Y;for(var G=H.words,D=w.words,j=0;j<G.length;j++)if(Y=G[j]-D[j],Y!=0)return Y;return 0},E.prototype.byteLength=function(z){return this.isArrayBuffer(z)||this.isTypedArray(z)?z.byteLength:this.isWordArray(z)?z.sigBytes:-1},E.prototype.typedArrayToBuffer=function(z){return z.buffer},E})();r.default=new R}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return h.enc.Hex})}),(function(s,r,o){o.r(r);var h=o(5),c=o.n(h),g=o(11),p=o(23),b=o.n(p),O=o(2),R=o.n(O),E=o(4),z=o.n(E),S=function(H,w){var Y="aes",G=256,D="cbc",j=16,M=4,A=4294967296,T=2147483648,y;if(H.getRandomWordArray)y=H.getRandomWordArray;else if(typeof Uint32Array<"u"&&H.getRandomValues){var U=new Uint32Array(M);y=function(L,Q){var k=L/4,nt=k==M?U:new Uint32Array(k);H.getRandomValues(nt,function(F){typeof Q<"u"&&Q(F,w.toWordArray(nt))})}}else y=function(L,Q){R.a.logAction(R.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var k=L/4,nt=new Array(k),F=0;F<k;F++)nt[F]=Math.floor(Math.random()*A)-T;Q(null,c.a.create(nt))};function N(L){return L+j&-j}function q(L){if(L.algorithm==="aes"&&L.mode==="cbc"){if(L.keyLength===128||L.keyLength===256)return;throw new Error("Unsupported key length "+L.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function I(L){return L.replace("_","/").replace("-","+")}var Z=[c.a.create([269488144,269488144,269488144,269488144],16),c.a.create([16777216],1),c.a.create([33685504],2),c.a.create([50529024],3),c.a.create([67372036],4),c.a.create([84215045,83886080],5),c.a.create([101058054,101056512],6),c.a.create([117901063,117901056],7),c.a.create([134744072,134744072],8),c.a.create([151587081,151587081,150994944],9),c.a.create([168430090,168430090,168427520],10),c.a.create([185273099,185273099,185273088],11),c.a.create([202116108,202116108,202116108],12),c.a.create([218959117,218959117,218959117,218103808],13),c.a.create([235802126,235802126,235802126,235798528],14),c.a.create([252645135,252645135,252645135,252645135],15),c.a.create([269488144,269488144,269488144,269488144],16)];function K(){}function X(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}K.CipherParams=X,K.getDefaultParams=function(L){var Q;if(typeof L=="function"||typeof L=="string"){if(R.a.deprecated("The ability to pass a callback to `Crypto.getDefaultParams()`","This method now directly returns its result, instead of returning it asynchronously via a callback. Please update your code so that it uses the return value of this method instead of passing a callback."),typeof L=="function")R.a.deprecated("The ability to call `Crypto.getDefaultParams()` without specifying an encryption key","Please update your code so that it instead passes an object whose `key` property contains an encryption key. That is, replace `Crypto.getDefaultParams()` with `Crypto.getDefaultParams({ key })`, where `key` is an encryption key that you have generated (for example from the `Crypto.generateRandomKey()` method)."),K.generateRandomKey(function(nt){L(null,K.getDefaultParams({key:nt}))});else if(typeof arguments[1]=="function")R.a.deprecated("The ability to pass the encryption key as the first argument of `Crypto.getDefaultParams()`","Please update your code so that it instead passes an object whose `key` property contains the key. That is, replace `Crypto.getDefaultParams(key)` with `Crypto.getDefaultParams({ key })`."),arguments[1](null,K.getDefaultParams({key:L}));else throw new Error("Invalid arguments for Crypto.getDefaultParams");return}if(!L.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof L.key=="string"?Q=Object(g.parse)(I(L.key)):Q=w.toWordArray(L.key);var k=new X;if(k.key=Q,k.algorithm=L.algorithm||Y,k.keyLength=Q.words.length*32,k.mode=L.mode||D,L.keyLength&&L.keyLength!==k.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+L.keyLength+" was specified, but the key actually has length "+k.keyLength);return q(k),k},K.generateRandomKey=function(L,Q){arguments.length==1&&typeof L=="function"&&(Q=L,L=void 0),y((L||G)/8,function(k,nt){Q!==void 0&&Q(k?z.a.fromValues(k):null,nt)})},K.getCipher=function(L){var Q=L instanceof X?L:K.getDefaultParams(L);return{cipherParams:Q,cipher:new x(Q,M,L.iv)}};function x(L,Q,k){this.algorithm=L.algorithm+"-"+String(L.keyLength)+"-"+L.mode,this.cjsAlgorithm=L.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=w.toWordArray(L.key),k&&(this.iv=w.toWordArray(k).clone()),this.blockLengthWords=Q}return x.prototype.encrypt=function(L,Q){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.encrypt()",""),L=w.toWordArray(L);var k=L.sigBytes,nt=N(k),F=this,it=function(){F.getIv(function(at,P){if(at){Q(at);return}var J=F.encryptCipher.process(L.concat(Z[nt-k])),$=P.concat(J);Q(null,$)})};this.encryptCipher?it():this.iv?(this.encryptCipher=b.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),it()):y(j,function(at,P){if(at){Q(at);return}F.encryptCipher=b.a.algo[F.cjsAlgorithm].createEncryptor(F.key,{iv:P}),F.iv=P,it()})},x.prototype.decrypt=function(L){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.decrypt()",""),L=w.toWordArray(L);var Q=this.blockLengthWords,k=L.words,nt=c.a.create(k.slice(0,Q)),F=c.a.create(k.slice(Q)),it=b.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:nt}),at=it.process(F),P=it.finalize();return it.reset(),P&&P.sigBytes&&at.concat(P),at},x.prototype.getIv=function(L){if(this.iv){var Q=this.iv;this.iv=null,L(null,Q);return}var k=this;y(j,function(nt,F){if(nt){L(nt);return}L(null,k.encryptCipher.process(F))})},K};r.default=S}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.WordArray,b=c.enc;b.Utf16=b.Utf16BE={stringify:function(R){for(var E=R.words,z=R.sigBytes,S=[],H=0;H<z;H+=2){var w=E[H>>>2]>>>16-H%4*8&65535;S.push(String.fromCharCode(w))}return S.join("")},parse:function(R){for(var E=R.length,z=[],S=0;S<E;S++)z[S>>>1]|=R.charCodeAt(S)<<16-S%2*16;return p.create(z,E*2)}},b.Utf16LE={stringify:function(R){for(var E=R.words,z=R.sigBytes,S=[],H=0;H<z;H+=2){var w=O(E[H>>>2]>>>16-H%4*8&65535);S.push(String.fromCharCode(w))}return S.join("")},parse:function(R){for(var E=R.length,z=[],S=0;S<E;S++)z[S>>>1]|=O(R.charCodeAt(S)<<16-S%2*16);return p.create(z,E*2)}};function O(R){return R<<8&4278255360|R>>>8&16711935}})(),h.enc.Utf16})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(28))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.CipherParams,O=g.enc,R=O.Hex,E=g.format;E.Hex={stringify:function(z){return z.ciphertext.toString(R)},parse:function(z){var S=R.parse(z);return b.create({ciphertext:S})}}})(),h.format.Hex})}),(function(s,r,o){(function(h,c){s.exports=c(o(6),o(11),o(61),o(27),o(28))})(this,function(h){return(function(){var c=h,g=c.lib,p=g.BlockCipher,b=c.algo,O=[],R=[],E=[],z=[],S=[],H=[],w=[],Y=[],G=[],D=[];(function(){for(var A=[],T=0;T<256;T++)T<128?A[T]=T<<1:A[T]=T<<1^283;for(var y=0,U=0,T=0;T<256;T++){var N=U^U<<1^U<<2^U<<3^U<<4;N=N>>>8^N&255^99,O[y]=N,R[N]=y;var q=A[y],I=A[q],Z=A[I],K=A[N]*257^N*16843008;E[y]=K<<24|K>>>8,z[y]=K<<16|K>>>16,S[y]=K<<8|K>>>24,H[y]=K;var K=Z*16843009^I*65537^q*257^y*16843008;w[N]=K<<24|K>>>8,Y[N]=K<<16|K>>>16,G[N]=K<<8|K>>>24,D[N]=K,y?(y=q^A[A[A[Z^q]]],U^=A[A[U]]):y=U=1}})();var j=[0,1,2,4,8,16,32,64,128,27,54],M=b.AES=p.extend({_doReset:function(){var A;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,y=T.words,U=T.sigBytes/4,N=this._nRounds=U+6,q=(N+1)*4,I=this._keySchedule=[],Z=0;Z<q;Z++)Z<U?I[Z]=y[Z]:(A=I[Z-1],Z%U?U>6&&Z%U==4&&(A=O[A>>>24]<<24|O[A>>>16&255]<<16|O[A>>>8&255]<<8|O[A&255]):(A=A<<8|A>>>24,A=O[A>>>24]<<24|O[A>>>16&255]<<16|O[A>>>8&255]<<8|O[A&255],A^=j[Z/U|0]<<24),I[Z]=I[Z-U]^A);for(var K=this._invKeySchedule=[],X=0;X<q;X++){var Z=q-X;if(X%4)var A=I[Z];else var A=I[Z-4];X<4||Z<=4?K[X]=A:K[X]=w[O[A>>>24]]^Y[O[A>>>16&255]]^G[O[A>>>8&255]]^D[O[A&255]]}}},encryptBlock:function(A,T){this._doCryptBlock(A,T,this._keySchedule,E,z,S,H,O)},decryptBlock:function(A,T){var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y,this._doCryptBlock(A,T,this._invKeySchedule,w,Y,G,D,R);var y=A[T+1];A[T+1]=A[T+3],A[T+3]=y},_doCryptBlock:function(A,T,y,U,N,q,I,Z){for(var K=this._nRounds,X=A[T]^y[0],x=A[T+1]^y[1],L=A[T+2]^y[2],Q=A[T+3]^y[3],k=4,nt=1;nt<K;nt++){var F=U[X>>>24]^N[x>>>16&255]^q[L>>>8&255]^I[Q&255]^y[k++],it=U[x>>>24]^N[L>>>16&255]^q[Q>>>8&255]^I[X&255]^y[k++],at=U[L>>>24]^N[Q>>>16&255]^q[X>>>8&255]^I[x&255]^y[k++],P=U[Q>>>24]^N[X>>>16&255]^q[x>>>8&255]^I[L&255]^y[k++];X=F,x=it,L=at,Q=P}var F=(Z[X>>>24]<<24|Z[x>>>16&255]<<16|Z[L>>>8&255]<<8|Z[Q&255])^y[k++],it=(Z[x>>>24]<<24|Z[L>>>16&255]<<16|Z[Q>>>8&255]<<8|Z[X&255])^y[k++],at=(Z[L>>>24]<<24|Z[Q>>>16&255]<<16|Z[X>>>8&255]<<8|Z[x&255])^y[k++],P=(Z[Q>>>24]<<24|Z[X>>>16&255]<<16|Z[x>>>8&255]<<8|Z[L&255])^y[k++];A[T]=F,A[T+1]=it,A[T+2]=at,A[T+3]=P},keySize:256/32});c.AES=p._createHelper(M)})(),h.AES})}),(function(s,r,o){(function(h,c){s.exports=c(o(6))})(this,function(h){return(function(c){var g=h,p=g.lib,b=p.WordArray,O=p.Hasher,R=g.algo,E=[];(function(){for(var G=0;G<64;G++)E[G]=c.abs(c.sin(G+1))*4294967296|0})();var z=R.MD5=O.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(G,D){for(var j=0;j<16;j++){var M=D+j,A=G[M];G[M]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var T=this._hash.words,y=G[D+0],U=G[D+1],N=G[D+2],q=G[D+3],I=G[D+4],Z=G[D+5],K=G[D+6],X=G[D+7],x=G[D+8],L=G[D+9],Q=G[D+10],k=G[D+11],nt=G[D+12],F=G[D+13],it=G[D+14],at=G[D+15],P=T[0],J=T[1],$=T[2],et=T[3];P=S(P,J,$,et,y,7,E[0]),et=S(et,P,J,$,U,12,E[1]),$=S($,et,P,J,N,17,E[2]),J=S(J,$,et,P,q,22,E[3]),P=S(P,J,$,et,I,7,E[4]),et=S(et,P,J,$,Z,12,E[5]),$=S($,et,P,J,K,17,E[6]),J=S(J,$,et,P,X,22,E[7]),P=S(P,J,$,et,x,7,E[8]),et=S(et,P,J,$,L,12,E[9]),$=S($,et,P,J,Q,17,E[10]),J=S(J,$,et,P,k,22,E[11]),P=S(P,J,$,et,nt,7,E[12]),et=S(et,P,J,$,F,12,E[13]),$=S($,et,P,J,it,17,E[14]),J=S(J,$,et,P,at,22,E[15]),P=H(P,J,$,et,U,5,E[16]),et=H(et,P,J,$,K,9,E[17]),$=H($,et,P,J,k,14,E[18]),J=H(J,$,et,P,y,20,E[19]),P=H(P,J,$,et,Z,5,E[20]),et=H(et,P,J,$,Q,9,E[21]),$=H($,et,P,J,at,14,E[22]),J=H(J,$,et,P,I,20,E[23]),P=H(P,J,$,et,L,5,E[24]),et=H(et,P,J,$,it,9,E[25]),$=H($,et,P,J,q,14,E[26]),J=H(J,$,et,P,x,20,E[27]),P=H(P,J,$,et,F,5,E[28]),et=H(et,P,J,$,N,9,E[29]),$=H($,et,P,J,X,14,E[30]),J=H(J,$,et,P,nt,20,E[31]),P=w(P,J,$,et,Z,4,E[32]),et=w(et,P,J,$,x,11,E[33]),$=w($,et,P,J,k,16,E[34]),J=w(J,$,et,P,it,23,E[35]),P=w(P,J,$,et,U,4,E[36]),et=w(et,P,J,$,I,11,E[37]),$=w($,et,P,J,X,16,E[38]),J=w(J,$,et,P,Q,23,E[39]),P=w(P,J,$,et,F,4,E[40]),et=w(et,P,J,$,y,11,E[41]),$=w($,et,P,J,q,16,E[42]),J=w(J,$,et,P,K,23,E[43]),P=w(P,J,$,et,L,4,E[44]),et=w(et,P,J,$,nt,11,E[45]),$=w($,et,P,J,at,16,E[46]),J=w(J,$,et,P,N,23,E[47]),P=Y(P,J,$,et,y,6,E[48]),et=Y(et,P,J,$,X,10,E[49]),$=Y($,et,P,J,it,15,E[50]),J=Y(J,$,et,P,Z,21,E[51]),P=Y(P,J,$,et,nt,6,E[52]),et=Y(et,P,J,$,q,10,E[53]),$=Y($,et,P,J,Q,15,E[54]),J=Y(J,$,et,P,U,21,E[55]),P=Y(P,J,$,et,x,6,E[56]),et=Y(et,P,J,$,at,10,E[57]),$=Y($,et,P,J,K,15,E[58]),J=Y(J,$,et,P,F,21,E[59]),P=Y(P,J,$,et,I,6,E[60]),et=Y(et,P,J,$,k,10,E[61]),$=Y($,et,P,J,N,15,E[62]),J=Y(J,$,et,P,L,21,E[63]),T[0]=T[0]+P|0,T[1]=T[1]+J|0,T[2]=T[2]+$|0,T[3]=T[3]+et|0},_doFinalize:function(){var G=this._data,D=G.words,j=this._nDataBytes*8,M=G.sigBytes*8;D[M>>>5]|=128<<24-M%32;var A=c.floor(j/4294967296),T=j;D[(M+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,D[(M+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,G.sigBytes=(D.length+1)*4,this._process();for(var y=this._hash,U=y.words,N=0;N<4;N++){var q=U[N];U[N]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return y},clone:function(){var G=O.clone.call(this);return G._hash=this._hash.clone(),G}});function S(G,D,j,M,A,T,y){var U=G+(D&j|~D&M)+A+y;return(U<<T|U>>>32-T)+D}function H(G,D,j,M,A,T,y){var U=G+(D&M|j&~M)+A+y;return(U<<T|U>>>32-T)+D}function w(G,D,j,M,A,T,y){var U=G+(D^j^M)+A+y;return(U<<T|U>>>32-T)+D}function Y(G,D,j,M,A,T,y){var U=G+(j^(D|~M))+A+y;return(U<<T|U>>>32-T)+D}g.MD5=O._createHelper(z),g.HmacMD5=O._createHmacHelper(z)})(Math),h.MD5})}),(function(s,r,o){var h;Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importDefault(o(3)),p=c.__importStar(o(1)),b=c.__importDefault(o(8)),O=o(4),R=c.__importDefault(o(19)),E=c.__importDefault(o(17)),z=c.__importDefault(o(22)),S=c.__importDefault(o(2)),H=o(29),w=c.__importDefault(o(63)),Y=o(14);function G(M){var A=M.statusCode;return A===408&&!M.code||A===400&&!M.code||A>=500&&A<=504}function D(M){var A=M.connection,T=A&&A.connectionManager.host;return T?[T].concat(b.default.getFallbackHosts(M.options)):b.default.getHosts(M.options)}var j=(h=(function(){function M(A){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=D,this.options=A||{};var T=this.options.connectivityCheckUrl||b.default.connectivityCheckUrl,y=this.options.connectivityCheckParams,U=!this.options.connectivityCheckUrl;g.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(N,q,I,Z,K,X,x){var L=E.default.createRequest(I,Z,K,X,z.default.REQ_SEND,q&&q.options.timeouts,N);return L.once("complete",x),L.exec(),L},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+T),this.doUri(R.default.Get,null,T,null,null,y,function(q,I,Z,K,X){var x=!1;U?x=!q&&(I==null?void 0:I.replace(/\n/,""))=="yes":x=!q&&(0,Y.isSuccessCode)(X),S.default.logAction(S.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+x),N(null,x)})}):g.default.Config.jsonpSupported?(this.Request=function(N,q,I,Z,K,X,x){var L=(0,H.createRequest)(I,Z,K,X,z.default.REQ_SEND,q&&q.options.timeouts,N);return L.once("complete",x),g.default.Config.nextTick(function(){L.exec()}),L},this.options.disableConnectivityCheck?this.checkConnectivity=function(N){N(null,!0)}:this.checkConnectivity=function(N){var q=this,I=b.default.jsonpInternetUpUrl;if(this.checksInProgress){this.checksInProgress.push(N);return}this.checksInProgress=[N],S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+I);var Z=new H.Request("isTheInternetUp",I,null,null,null,z.default.REQ_SEND,b.default.TIMEOUTS);Z.once("complete",function(K,X){var x=!K&&X;S.default.logAction(S.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+x);for(var L=0;L<q.checksInProgress.length;L++)q.checksInProgress[L](null,x);q.checksInProgress=null}),g.default.Config.nextTick(function(){Z.exec()})}):g.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=w.default,this.checkConnectivity=function(N){S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+T),this.doUri(R.default.Get,null,T,null,null,null,function(q,I){var Z=!q&&(I==null?void 0:I.replace(/\n/,""))=="yes";S.default.logAction(S.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+Z),N(null,Z)})}):this.Request=function(N,q,I,Z,K,X,x){x(new O.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return M.prototype.do=function(A,T,y,U,N,q,I){var Z=this,K=typeof y=="function"?y:function(Q){return T.baseUri(Q)+y},X=T._currentFallback;if(X)if(X.validUntil>p.now()){if(!this.Request){I==null||I(new O.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,K(X.host),U,q,N,function(Q){for(var k=[],nt=1;nt<arguments.length;nt++)k[nt-1]=arguments[nt];if(Q&&G(Q)){T._currentFallback=null,Z.do(A,T,y,U,N,q,I);return}I==null||I.apply(void 0,c.__spreadArray([Q],k,!1))});return}else T._currentFallback=null;var x=D(T);if(x.length===1){this.doUri(A,T,K(x[0]),U,N,q,I);return}var L=function(Q,k){var nt=Q.shift();Z.doUri(A,T,K(nt),U,N,q,function(F){for(var it=[],at=1;at<arguments.length;at++)it[at-1]=arguments[at];if(F&&G(F)&&Q.length){L(Q,!0);return}k&&(T._currentFallback={host:nt,validUntil:p.now()+T.options.timeouts.fallbackRetryTimeout}),I==null||I.apply(void 0,c.__spreadArray([F],it,!1))})};L(x)},M.prototype.doUri=function(A,T,y,U,N,q,I){if(!this.Request){I(new O.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(A,T,y,U,q,N,I)},M})(),h.methods=[R.default.Get,R.default.Delete,R.default.Post,R.default.Put,R.default.Patch],h.methodsWithoutBody=[R.default.Get,R.default.Delete],h.methodsWithBody=[R.default.Post,R.default.Put,R.default.Patch],h);r.default=j}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importStar(o(4)),g=h.__importDefault(o(3)),p=h.__importDefault(o(8)),b=h.__importStar(o(1)),O=o(1);function R(S,H){return!!H.get("x-ably-errorcode")}function E(S,H){if(R(S,H))return S.error&&c.default.fromValues(S.error)}function z(S,H,w,Y,G,D,j){var M=new Headers(Y||{}),A=S?S.toUpperCase():b.isEmptyArg(D)?"GET":"POST",T=new AbortController,y=setTimeout(function(){T.abort(),j(new c.PartialErrorInfo("Request timed out",null,408))},H?H.options.timeouts.httpRequestTimeout:p.default.TIMEOUTS.httpRequestTimeout),U={method:A,headers:M,body:D};g.default.Config.isWebworker||(U.credentials=M.has("authorization")?"include":"same-origin"),(0,O.getGlobalObject)().fetch(w+"?"+new URLSearchParams(G||{}),U).then(function(N){clearTimeout(y);var q=N.headers.get("Content-Type"),I;q&&q.indexOf("application/x-msgpack")>-1?I=N.arrayBuffer():q&&q.indexOf("application/json")>-1?I=N.json():I=N.text(),I.then(function(Z){var K=!!q&&q.indexOf("application/x-msgpack")===-1;if(N.ok)j(null,Z,N.headers,K,N.status);else{var X=E(Z,N.headers)||new c.PartialErrorInfo("Error response received from server: "+N.status+" body was: "+g.default.Config.inspect(Z),null,N.status);j(X,Z,N.headers,K,N.status)}})}).catch(function(N){clearTimeout(y),j(N)})}r.default=z}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(41)),g=h.__importStar(o(1)),p=g.getGlobalObject();typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function b(){var z=p.location;return!p.WebSocket||!z||!z.origin||z.origin.indexOf("http")>-1}var O=p.navigator&&p.navigator.userAgent.toString(),R=p.location&&p.location.href,E={agent:"browser",logTimestamps:!0,userAgent:O,currentUrl:R,noUpgrade:O&&!!O.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:p.WebSocket,fetchSupported:!!p.fetch,xhrSupported:p.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:typeof document<"u",allowComet:b(),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:c.default,supportsBinary:!!p.TextDecoder,preferBinary:!1,ArrayBuffer:p.ArrayBuffer,atob:p.atob,nextTick:typeof p.setImmediate<"u"?p.setImmediate.bind(p):function(z){setTimeout(z,0)},addEventListener:p.addEventListener,inspect:JSON.stringify,stringByteSize:function(z){return p.TextDecoder&&new p.TextEncoder().encode(z).length||z.length},TextEncoder:p.TextEncoder,TextDecoder:p.TextDecoder,Promise:p.Promise,getRandomValues:(function(z){if(z!==void 0)return function(S,H){z.getRandomValues(S),H&&H(null)}})(p.crypto||msCrypto)};r.default=E}),(function(s,r,o){(function(h){Object.defineProperty(r,"__esModule",{value:!0});var c=o(0),g=c.__importStar(o(1)),p="ablyjs-storage-test",b=(function(){function O(){try{h.sessionStorage.setItem(p,p),h.sessionStorage.removeItem(p),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{h.localStorage.setItem(p,p),h.localStorage.removeItem(p),this.localSupported=!0}catch{this.localSupported=!1}}return O.prototype.get=function(R){return this._get(R,!1)},O.prototype.getSession=function(R){return this._get(R,!0)},O.prototype.remove=function(R){return this._remove(R,!1)},O.prototype.removeSession=function(R){return this._remove(R,!0)},O.prototype.set=function(R,E,z){return this._set(R,E,z,!1)},O.prototype.setSession=function(R,E,z){return this._set(R,E,z,!0)},O.prototype._set=function(R,E,z,S){var H={value:E};return z&&(H.expires=g.now()+z),this.storageInterface(S).setItem(R,JSON.stringify(H))},O.prototype._get=function(R,E){if(E&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!E&&!this.localSupported)throw new Error("Local Storage not supported");var z=this.storageInterface(E).getItem(R);if(!z)return null;var S=JSON.parse(z);return S.expires&&S.expires<g.now()?(this.storageInterface(E).removeItem(R),null):S.value},O.prototype._remove=function(R,E){return this.storageInterface(E).removeItem(R)},O.prototype.storageInterface=function(R){return R?h.sessionStorage:h.localStorage},O})();r.default=new b}).call(this,o(13))}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h=o(0),c=h.__importDefault(o(67)),g={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[c.default.XhrPolling,c.default.XhrStreaming,c.default.JsonP,c.default.WebSocket],baseTransportOrder:[c.default.XhrPolling,c.default.XhrStreaming,c.default.JsonP,c.default.WebSocket],transportPreferenceOrder:[c.default.JsonP,c.default.XhrPolling,c.default.XhrStreaming,c.default.WebSocket],upgradeTransports:[c.default.XhrStreaming,c.default.WebSocket]};r.default=g}),(function(s,r,o){Object.defineProperty(r,"__esModule",{value:!0});var h;(function(c){c.WebSocket="web_socket",c.Comet="comet",c.XhrStreaming="xhr_streaming",c.XhrPolling="xhr_polling",c.JsonP="jsonp"})(h||(h={})),r.default=h}),(function(s,r,o){o.r(r);var h=o(29),c=o.n(h),g=o(1),p=o(3),b=o.n(p),O=o(12),R=o.n(O),E=o(17),z=o.n(E),S=function(G){var D="xhr_polling";function j(M,A,T){T.stream=!1,R.a.call(this,M,A,T),this.shortName=D}return g.inherits(j,R.a),j.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.allowComet},j.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},j.prototype.createRequest=function(M,A,T,y,U){return z.a.createRequest(M,A,T,y,U,this.timeouts)},typeof G<"u"&&j.isAvailable()&&(G.supportedTransports[D]=j),j},H=S,w=function(G){var D="xhr_streaming";function j(M,A,T){R.a.call(this,M,A,T),this.shortName=D}return g.inherits(j,R.a),j.isAvailable=function(){return b.a.Config.xhrSupported&&b.a.Config.streamingSupported&&b.a.Config.allowComet},j.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},j.prototype.createRequest=function(M,A,T,y,U){return z.a.createRequest(M,A,T,y,U,this.timeouts)},typeof G<"u"&&j.isAvailable()&&(G.supportedTransports[D]=j),j},Y=w;r.default=[c.a,H,Y]})]).default})})(Sp)),Sp.exports}var N5=qm();const Br={width:800,height:600},D5=.65,z5=2.2,Jd="studentCanvasPrefs",bp=2,U5=({sharedImage:d,canvasWidth:n,canvasHeight:s})=>{const[r,o]=Ct.useState(null);if(Ct.useEffect(()=>{if(!d){o(null);return}const R=new window.Image;R.src=d.dataUrl,R.onload=()=>{o(R)}},[d]),!d||!r)return null;const h=d.width/d.height,c=n/s;let g,p,b,O;return h>c?(g=n,p=n/h,b=0,O=(s-p)/2):(p=s,g=s*h,b=(n-g)/2,O=0),lt.jsx(Ip,{image:r,x:b,y:O,width:g,height:p,listening:!1})};function G5(){const[d]=nm(),n=d.get("room")||"demo",s=d.get("name")||"Anonymous",[r,o]=Ct.useState(null),[h]=Ct.useState(`student-${Math.random().toString(36).substr(2,9)}`),[c,g]=Ct.useState(!1),[p,b]=Ct.useState([]),[O,R]=Ct.useState([]),[E,z]=Ct.useState(null),[S,H]=Ct.useState("pen"),[w,Y]=Ct.useState("black"),[G,D]=Ct.useState(3),[j,M]=Ct.useState(!1),[A,T]=Ct.useState("stylus-only"),[y,U]=Ct.useState("left");Ct.useEffect(()=>{if(!(typeof window>"u")){console.log(" [STUDENT] Loading preferences from localStorage...");try{const At=localStorage.getItem(Jd);if(At){const Gt=JSON.parse(At);if(console.log(" [STUDENT] Found stored preferences:",Gt),Gt.version!==bp){console.log(" [STUDENT] Version mismatch! Expected:",bp,"Got:",Gt.version),console.log(" [STUDENT] Clearing old preferences..."),localStorage.removeItem(Jd);return}console.log(" [STUDENT] Applying preferences..."),Gt.tool&&H(Gt.tool),Gt.color&&Y(Gt.color),typeof Gt.brushSize=="number"&&D(Gt.brushSize),Gt.inputMode&&T(Gt.inputMode),Gt.toolbarPosition&&U(Gt.toolbarPosition),console.log(" [STUDENT] Preferences loaded successfully!")}else console.log(" [STUDENT] No stored preferences found, using defaults")}catch(At){console.warn(" [STUDENT] Failed to load student prefs",At),localStorage.removeItem(Jd)}}},[]),Ct.useEffect(()=>{if(typeof window>"u")return;if(I.current){I.current=!1,console.log(" [STUDENT] Skipping save on first render");return}const At={version:bp,tool:S,color:w,brushSize:G,inputMode:A,toolbarPosition:y};console.log(" [STUDENT] Saving preferences to localStorage:",At),localStorage.setItem(Jd,JSON.stringify(At))},[S,w,G,A,y]);const N=Ct.useRef([]),q=Ct.useRef([]),I=Ct.useRef(!0),Z=Ct.useRef(!1),K=Ct.useRef(!1),X=Ct.useRef(null),[x,L]=Ct.useState(Br),Q=Ct.useMemo(()=>Br.width?x.width/Br.width:1,[x.width]);Ct.useEffect(()=>{(async()=>{try{const Gt=new N5.Realtime({authUrl:"/api/token",authParams:{clientId:h}});Gt.connection.on("connected",()=>{console.log("Connected to Ably"),g(!0)}),Gt.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),g(!1)});const kt=Gt.channels.get(`room-${n}`);return kt.subscribe("student-layer",Ut=>{Ut.clientId===h&&(Z.current=!0,b(Ut.data.lines||[]),setTimeout(()=>{Z.current=!1},100))}),kt.subscribe("teacher-annotation",Ut=>{Ut.data.targetStudentId===h&&(Z.current=!0,R(Ut.data.annotations||[]),setTimeout(()=>{Z.current=!1},100))}),kt.subscribe("teacher-image",Ut=>{var pt,Nt,oe,Wt;z({dataUrl:(pt=Ut.data)==null?void 0:pt.dataUrl,width:(Nt=Ut.data)==null?void 0:Nt.width,height:(oe=Ut.data)==null?void 0:oe.height,timestamp:(Wt=Ut.data)==null?void 0:Wt.timestamp})}),kt.presence.enter({name:s}),console.log(`Joined room ${n} as ${s}`),o(kt),()=>{Gt.close()}}catch(Gt){console.error("Failed to initialize Ably:",Gt)}})()},[h,n]),Ct.useEffect(()=>{const At=X.current;if(!At)return;const Gt=()=>{if(!X.current)return;const Ut=X.current.getBoundingClientRect(),pt=48,Nt=Math.max(320,Ut.width-pt),oe=Math.max(240,Ut.height-pt),Wt=Nt/Br.width,ne=oe/Br.height,Zt=Math.min(Wt,ne),re=Math.max(D5,Math.min(z5,Zt)),Ue=Math.round(re*20)/20;L({width:Math.round(Br.width*Ue),height:Math.round(Br.height*Ue)})};Gt(),window.addEventListener("resize",Gt);let kt;return window.ResizeObserver&&(kt=new ResizeObserver(()=>Gt()),kt.observe(At)),()=>{window.removeEventListener("resize",Gt),kt&&kt.disconnect()}},[y]),Ct.useEffect(()=>{if(!Z.current&&r){const At=setTimeout(()=>{r.publish("student-layer",{lines:p,clientId:h,meta:{base:Br,display:x,scale:Q}}),console.log("Published student layer:",p.length,"lines")},150);return()=>clearTimeout(At)}},[p,r,h,x,Q]);const k=At=>A!=="stylus-only"?!0:(At==null?void 0:At.pointerType)==="pen",nt=At=>{const Gt=At.evt;if(!k(Gt)){Gt!=null&&Gt.preventDefault&&Gt.preventDefault();return}if(S==="pen"){M(!0);const kt=At.target.getStage().getPointerPosition(),Ut=kt.x/Q,pt=kt.y/Q,Nt={tool:S,points:[Ut,pt],color:w,strokeWidth:G/Q};N.current.push([...p]),q.current=[],b([...p,Nt])}else S==="eraser"&&(M(!0),K.current=!1);Gt.preventDefault&&Gt.preventDefault()},F=At=>{if(!j)return;const Gt=At.evt;if(!k(Gt)){Gt!=null&&Gt.preventDefault&&Gt.preventDefault();return}const Ut=At.target.getStage().getPointerPosition();if(S==="pen"){const pt=p[p.length-1];if(pt){const Nt=Ut.x/Q,oe=Ut.y/Q,Wt={...pt,points:[...pt.points,Nt,oe]};b([...p.slice(0,-1),Wt])}}else if(S==="eraser"){const pt=p.length,Nt=Ut.x,oe=Ut.y,Wt=20,ne=p.filter(Zt=>{for(let re=0;re<Zt.points.length;re+=2){const Ue=Zt.points[re]*Q,rn=Zt.points[re+1]*Q;if(Math.sqrt(Math.pow(Ue-Nt,2)+Math.pow(rn-oe,2))<Wt)return!1}return!0});ne.length<pt&&!K.current&&(N.current.push([...p]),q.current=[],K.current=!0),b(ne)}Gt!=null&&Gt.preventDefault&&Gt.preventDefault()},it=At=>{const Gt=At==null?void 0:At.evt;if(!k(Gt)){Gt!=null&&Gt.preventDefault&&Gt.preventDefault();return}M(!1)},at=()=>{if(N.current.length>0){const At=N.current.pop();q.current.push([...p]),b(At)}},P=()=>{if(q.current.length>0){const At=q.current.pop();N.current.push([...p]),b(At)}},J=async()=>{N.current.push([...p]),q.current=[],b([]),r&&(await r.publish("student-layer",{lines:[],clientId:h,meta:{base:Br,display:x,scale:Q}}),console.log("Published student clear"))},$=()=>{var At;return((At=h.split("-")[1])==null?void 0:At.substring(0,3))||h},et=()=>{T(At=>At==="stylus-only"?"all":"stylus-only")},gt=()=>{U(At=>At==="left"?"right":"left")},Ot=()=>`Connected as ${s!=="Anonymous"?s:$()}`,Lt=c?"Connected":"Reconnecting",Xt=c?"online":"offline",Ft=At=>At.map((Gt,kt)=>Gt*Q),ce=At=>(At.strokeWidth||3)*Q;return lt.jsx("div",{className:"student-canvas-page",children:lt.jsxs("div",{className:"student-canvas-container",children:[lt.jsxs("div",{className:"student-status-bar",children:[lt.jsxs("div",{className:"student-status-text",children:[lt.jsx("h1",{children:"Student Canvas"}),lt.jsx("p",{children:Ot()})]}),lt.jsxs("div",{className:"student-status-actions",children:[lt.jsxs("div",{className:`connection-pill ${Xt}`,"aria-live":"polite",children:[lt.jsx("span",{className:"connection-indicator-dot"}),lt.jsx("span",{children:Lt})]}),lt.jsxs("button",{className:"move-toolbar-btn",onClick:gt,children:["Move toolbar to ",y==="left"?"right":"left"]})]})]}),lt.jsxs("div",{className:`student-workspace ${y==="right"?"toolbar-right":""}`,children:[lt.jsxs("div",{className:"student-sidebar",children:[lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"COLORS"}),lt.jsxs("div",{className:"color-buttons",children:[lt.jsx("button",{onClick:()=>Y("black"),className:`color-button ${w==="black"?"active":""}`,style:{background:"black"},"aria-label":"Black"}),lt.jsx("button",{onClick:()=>Y("#0066FF"),className:`color-button ${w==="#0066FF"?"active":""}`,style:{background:"#0066FF"},"aria-label":"Blue"}),lt.jsx("button",{onClick:()=>Y("#00AA00"),className:`color-button ${w==="#00AA00"?"active":""}`,style:{background:"#00AA00"},"aria-label":"Green"})]})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),lt.jsxs("div",{className:"tool-buttons",children:[lt.jsx("button",{onClick:()=>H("pen"),className:`tool-button ${S==="pen"?"active":""}`,children:"Pen"}),lt.jsx("button",{onClick:()=>H("eraser"),className:`tool-button ${S==="eraser"?"active":""}`,children:"Eraser"})]})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),lt.jsx("div",{className:"brush-size-control",children:lt.jsxs("div",{className:"brush-slider-container",children:[lt.jsx("input",{type:"range",min:"1",max:"10",value:G,onChange:At=>D(parseInt(At.target.value)),className:"brush-slider"}),lt.jsx("span",{className:"brush-value",children:G})]})})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),lt.jsx("button",{className:`input-mode-toggle ${A==="all"?"all-inputs":""}`,onClick:et,children:A==="stylus-only"?"Stylus mode (pen only)":"All inputs"})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),lt.jsxs("div",{className:"history-buttons",children:[lt.jsx("button",{onClick:at,className:"history-button",disabled:N.current.length===0,children:"Undo"}),lt.jsx("button",{onClick:P,className:"history-button",disabled:q.current.length===0,children:"Redo"}),lt.jsx("button",{onClick:J,className:"history-button danger",children:"Clear"})]})]})]}),lt.jsx("div",{className:"student-canvas-panel",ref:X,children:lt.jsx("div",{className:"student-canvas-frame",children:lt.jsx("div",{className:"student-canvas-surface",style:{width:`${x.width}px`,height:`${x.height}px`},children:lt.jsxs(Zp,{width:x.width,height:x.height,onPointerDown:nt,onPointerMove:F,onPointerUp:it,onPointerLeave:it,className:"canvas-stage",style:{touchAction:"none"},children:[lt.jsx(jr,{listening:!1,children:lt.jsx(U5,{sharedImage:E,canvasWidth:x.width,canvasHeight:x.height})}),lt.jsx(jr,{children:p.map((At,Gt)=>lt.jsx(pc,{points:Ft(At.points),stroke:At.color,strokeWidth:ce(At),tension:.5,lineCap:"round",lineJoin:"round"},`student-${Gt}`))}),lt.jsx(jr,{listening:!1,children:O.map((At,Gt)=>lt.jsx(pc,{points:Ft(At.points),stroke:At.color,strokeWidth:ce(At),tension:.5,lineCap:"round",lineJoin:"round"},`teacher-${Gt}`))})]})})})})]})]})})}var Cp,V1;function B5(){if(V1)return Cp;V1=1;function d(h){return typeof h=="string"&&(h=h.indexOf(":")==-1?{token:h}:{key:h}),h.promises=!0,h}var n=qm(),s=function(h,c,g,p){return new n.ErrorInfo(h,c,g,p)},r=function(h){return new n.Rest(d(h))};Object.assign(r,n.Rest);var o=function(h){return new n.Realtime(d(h))};return Object.assign(o,n.Realtime),Cp={ErrorInfo:s,Rest:r,Realtime:o},Cp}var H5=B5();const j5=n0(H5),Vm=({active:d=!1,size:n=20})=>{const s=d?"#ff4d4f":"#b8c1cc",r=d?"#ff4d4f":"transparent";return lt.jsxs("svg",{width:n,height:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[lt.jsx("path",{d:"M5 2.5V17.5",stroke:s,strokeWidth:"1.6",strokeLinecap:"round"}),lt.jsx("path",{d:"M5 3h10l-2 3 2 3H5V3Z",fill:r,stroke:s,strokeWidth:"1.4",strokeLinejoin:"round"})]})},L5=({student:d,onClick:n,onToggleFlag:s,teacherAnnotations:r=[],sharedImage:o,hideNames:h=!1})=>{var j,M,A,T;const c=Ct.useRef(null),g=Ct.useRef(null),[p,b]=Ct.useState(null),[O,R]=Ct.useState(300);Ct.useEffect(()=>{if(!o){b(null);return}const y=new window.Image;y.src=o.dataUrl,y.onload=()=>{b(y)}},[o]),Ct.useEffect(()=>{if(!g.current)return;const y=()=>{g.current&&R(g.current.clientWidth)};y();const U=new ResizeObserver(y);return U.observe(g.current),()=>U.disconnect()},[]);const E=()=>{if(d!=null&&d.name)return d.name;if(!(d!=null&&d.clientId))return"Unknown Student";const y=d.clientId.match(/student-(\d+)/);return y?`Student ${y[1]}`:d.clientId},z=()=>{if(!d.lastUpdate)return"Just joined";const y=Math.floor((Date.now()-d.lastUpdate)/1e3);return y<5?"Just now":y<60?`${y}s ago`:`${Math.floor(y/60)}m ago`},S=((M=(j=d.meta)==null?void 0:j.base)==null?void 0:M.width)||800,H=((T=(A=d.meta)==null?void 0:A.base)==null?void 0:T.height)||600,w=O/S,Y=y=>{y.stopPropagation(),s&&s(d.clientId)},D=(()=>{if(!o||!p)return null;const y=o.width/o.height,U=S/H;let N,q,I,Z;return y>U?(N=S,q=S/y,I=0,Z=(H-q)/2):(q=H,N=H*y,I=(S-N)/2,Z=0),{x:I,y:Z,width:N,height:q}})();return lt.jsxs("div",{className:`student-card ${d.isActive?"active":"inactive"}`,onClick:()=>n(d),children:[lt.jsxs("div",{className:"student-card-header",children:[lt.jsxs("div",{className:"student-name",children:[lt.jsx("span",{className:"student-icon",children:""}),h?"":E()]}),lt.jsxs("div",{className:"student-header-actions",children:[lt.jsx("button",{className:`flag-button ${d.isFlagged?"active":""}`,onClick:Y,"aria-label":d.isFlagged?"Remove flag":"Flag student",title:d.isFlagged?"Remove flag":"Flag student",children:lt.jsx(Vm,{active:d.isFlagged,size:18})}),lt.jsx("div",{className:"student-status",children:lt.jsx("span",{className:`status-dot ${d.isActive?"online":"offline"}`})})]})]}),lt.jsxs("div",{className:"student-card-canvas",ref:g,children:[lt.jsxs(Zp,{ref:c,width:S,height:H,scaleX:w,scaleY:w,style:{transformOrigin:"top left",width:"100%",height:"100%"},children:[D&&lt.jsx(jr,{listening:!1,children:lt.jsx(Ip,{image:p,x:D.x,y:D.y,width:D.width,height:D.height})}),lt.jsx(jr,{children:d.lines&&d.lines.map((y,U)=>lt.jsx(pc,{points:y.points,stroke:y.color||"black",strokeWidth:y.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`preview-${d.clientId}-${U}`))}),lt.jsx(jr,{children:r.map((y,U)=>lt.jsx(pc,{points:y.points,stroke:y.color||"#FF0000",strokeWidth:y.strokeWidth||3,tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${d.clientId}-${U}`))})]}),(!d.lines||d.lines.length===0)&&lt.jsxs("div",{className:"no-drawing",children:[lt.jsx("span",{children:""}),lt.jsx("p",{children:"No drawing yet"})]}),d.lines&&d.lines.length>0&&lt.jsxs("div",{className:"stroke-count",children:[d.lines.length," stroke",d.lines.length!==1?"s":""]})]}),lt.jsxs("div",{className:"student-card-footer",children:[lt.jsx("span",{className:"last-update",children:z()}),lt.jsx("span",{className:"click-hint",children:"Click to annotate "})]})]})},uc={width:800,height:600},Fd="teacherAnnotationPrefs",Ep=2,P1=[{label:"Red",value:"#FF3B30"},{label:"Purple",value:"#7C3AED"},{label:"Teal",value:"#0EA5E9"}],w5=({student:d,isOpen:n,onClose:s,onAnnotate:r,existingAnnotations:o=[],isFlagged:h=!1,onToggleFlag:c,sharedImage:g})=>{const[p,b]=Ct.useState("pen"),[O,R]=Ct.useState(P1[0].value),[E,z]=Ct.useState(3),[S,H]=Ct.useState(!1),[w,Y]=Ct.useState([]),[G,D]=Ct.useState("stylus-only"),[j,M]=Ct.useState("left"),[A,T]=Ct.useState(null),y=Ct.useRef([]),U=Ct.useRef([]),N=Ct.useRef(!1),q=Ct.useRef(null),I=Ct.useRef(!0),Z=Ct.useRef(null),K=Ct.useRef(null);Ct.useEffect(()=>{if(!g){T(null);return}const pt=new window.Image;pt.src=g.dataUrl,pt.onload=()=>{T(pt)}},[g]);const X=Ct.useRef(null),x=Ct.useRef(null),[L,Q]=Ct.useState({width:960,height:720}),k=Ct.useMemo(()=>({x:L.width/uc.width,y:L.height/uc.height}),[L]);Ct.useEffect(()=>{if(!(typeof window>"u")){console.log(" [TEACHER ANNOTATION] Loading preferences from localStorage...");try{const pt=localStorage.getItem(Fd);if(pt){const Nt=JSON.parse(pt);if(console.log(" [TEACHER ANNOTATION] Found stored preferences:",Nt),Nt.version!==Ep){console.log(" [TEACHER ANNOTATION] Version mismatch! Expected:",Ep,"Got:",Nt.version),console.log(" [TEACHER ANNOTATION] Clearing old preferences..."),localStorage.removeItem(Fd);return}console.log(" [TEACHER ANNOTATION] Applying preferences..."),Nt.tool&&b(Nt.tool),Nt.color&&R(Nt.color),typeof Nt.brushSize=="number"&&z(Nt.brushSize),Nt.inputMode&&D(Nt.inputMode),Nt.toolbarPosition&&M(Nt.toolbarPosition),console.log(" [TEACHER ANNOTATION] Preferences loaded successfully!")}else console.log(" [TEACHER ANNOTATION] No stored preferences found, using defaults")}catch(pt){console.warn(" [TEACHER ANNOTATION] Failed to load teacher annotation prefs",pt),localStorage.removeItem(Fd)}}},[]),Ct.useEffect(()=>{if(typeof window>"u")return;if(I.current){I.current=!1,console.log(" [TEACHER ANNOTATION] Skipping save on first render");return}const pt={version:Ep,tool:p,color:O,brushSize:E,inputMode:G,toolbarPosition:j};console.log(" [TEACHER ANNOTATION] Saving preferences to localStorage:",pt),localStorage.setItem(Fd,JSON.stringify(pt))},[p,O,E,G,j]),Ct.useEffect(()=>{n&&d&&d.clientId!==q.current&&(q.current=d.clientId,Y(o),y.current=[],U.current=[])},[n,d,o]),Ct.useEffect(()=>()=>{K.current&&cancelAnimationFrame(K.current)},[]),Ct.useEffect(()=>{if(n){const pt=document.body.style.overflow,Nt=document.body.style.position,oe=document.body.style.touchAction;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.touchAction="none",()=>{document.body.style.overflow=pt,document.body.style.position=Nt,document.body.style.touchAction=oe}}},[n]),Ct.useEffect(()=>{if(!n)return;const pt=()=>{if(!X.current)return;const Nt=X.current.getBoundingClientRect(),ne=24+4,Zt=Math.max(320,Nt.width-ne),re=Math.max(240,Nt.height-ne),Ue=Zt/uc.width,rn=re/uc.height,Je=Math.min(Ue,rn);Q({width:Math.round(uc.width*Je),height:Math.round(uc.height*Je)})};return pt(),window.addEventListener("resize",pt),()=>window.removeEventListener("resize",pt)},[j,n]);const nt=()=>{if(!g||!A)return null;const pt=g.width/g.height,Nt=L.width/L.height;let oe,Wt,ne,Zt;return pt>Nt?(oe=L.width,Wt=L.width/pt,ne=0,Zt=(L.height-Wt)/2):(Wt=L.height,oe=L.height*pt,ne=(L.width-oe)/2,Zt=0),{x:ne,y:Zt,width:oe,height:Wt}};if(!n||!d)return null;const F=nt(),it=()=>{if(d.name)return d.name;const pt=d.clientId.match(/student-(\d+)/)||d.clientId.match(/load-test-student-(\d+)/);return pt?`Student ${pt[1]}`:d.clientId},at=pt=>G!=="stylus-only"?!0:(pt==null?void 0:pt.pointerType)==="pen",P=(pt=[])=>pt.map((Nt,oe)=>oe%2===0?Nt*k.x:Nt*k.y),J=pt=>({x:pt.x/k.x,y:pt.y/k.y}),$=pt=>(pt.strokeWidth||3)*k.x,et=pt=>{const Nt=pt.evt;if(Nt!=null&&Nt.preventDefault&&Nt.preventDefault(),Nt!=null&&Nt.stopPropagation&&Nt.stopPropagation(),!!at(Nt))if(p==="pen"){H(!0);const oe=pt.target.getStage().getPointerPosition(),{x:Wt,y:ne}=J(oe),Zt={tool:"pen",points:[Wt,ne],color:O,strokeWidth:E};y.current.push([...w]),U.current=[],Z.current=Zt,Y([...w,Zt])}else p==="eraser"&&(H(!0),N.current=!1)},gt=pt=>{const Nt=pt.evt;if(Nt!=null&&Nt.preventDefault&&Nt.preventDefault(),Nt!=null&&Nt.stopPropagation&&Nt.stopPropagation(),!S||!at(Nt))return;const Wt=pt.target.getStage().getPointerPosition();if(p==="pen"){if(Z.current){const{x:ne,y:Zt}=J(Wt);Z.current.points=Z.current.points.concat([ne,Zt]);const re=Z.current;K.current&&cancelAnimationFrame(K.current),K.current=requestAnimationFrame(()=>{re&&Y(Ue=>Ue.length===0?Ue:[...Ue.slice(0,-1),re])})}}else if(p==="eraser"){const ne=w.length,Zt=20,re=w.filter(Ue=>{for(let rn=0;rn<Ue.points.length;rn+=2){const Je=Ue.points[rn]*k.x,ct=Ue.points[rn+1]*k.y;if(Math.sqrt(Math.pow(Je-Wt.x,2)+Math.pow(ct-Wt.y,2))<Zt)return!1}return!0});re.length<ne&&!N.current&&(y.current.push([...w]),U.current=[],N.current=!0),Y(re)}},Ot=pt=>{const Nt=pt==null?void 0:pt.evt;if(!at(Nt)){Nt!=null&&Nt.preventDefault&&Nt.preventDefault();return}if(H(!1),K.current){if(cancelAnimationFrame(K.current),Z.current){const oe=Z.current;Y(Wt=>{if(Wt.length===0)return Wt;const ne=[...Wt.slice(0,-1),oe];return requestAnimationFrame(()=>r(ne)),ne})}K.current=null}else r(w);Z.current=null},Lt=()=>{if(y.current.length>0){const pt=y.current.pop();U.current.push([...w]),Y(pt),r(pt)}},Xt=()=>{if(U.current.length>0){const pt=U.current.pop();y.current.push([...w]),Y(pt),r(pt)}},Ft=()=>{y.current.push([...w]),U.current=[];const pt=[];Y(pt),r(pt)},ce=()=>{c&&c(d.clientId)},At=()=>{H(!1),s()},Gt=()=>{D(pt=>pt==="stylus-only"?"all":"stylus-only")},kt=()=>{M(pt=>pt==="left"?"right":"left")},Ut=pt=>{pt.preventDefault(),pt.stopPropagation()};return lt.jsx("div",{className:"annotation-modal-overlay",onTouchMove:Ut,onTouchStart:Ut,children:lt.jsx("div",{className:"annotation-modal student-console",children:lt.jsxs("div",{className:"annotation-console",children:[lt.jsxs("div",{className:"annotation-status-bar",children:[lt.jsxs("div",{className:"annotation-status-text",children:[lt.jsx("h1",{children:"Annotate Student"}),lt.jsx("p",{children:it()})]}),lt.jsxs("div",{className:"annotation-status-actions",children:[lt.jsxs("button",{className:`flag-pill ${h?"active":""}`,onClick:ce,children:[lt.jsx(Vm,{active:h,size:16}),h?"Flagged":"Flag"]}),lt.jsxs("button",{className:"status-badge",onClick:kt,children:["Move toolbar to ",j==="left"?"right":"left"]}),lt.jsx("button",{className:"status-badge danger",onClick:At,children:" Close"})]})]}),lt.jsxs("div",{className:`annotation-workspace ${j==="right"?"toolbar-right":""}`,children:[lt.jsxs("div",{className:"annotation-sidebar",children:[lt.jsxs("div",{className:"sidebar-header",children:[lt.jsx("h2",{children:"Annotation Console"}),lt.jsx("p",{children:"Mirror of student workspace"})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"COLORS"}),lt.jsx("div",{className:"color-row",children:P1.map(pt=>lt.jsx("button",{className:`color-button ${O===pt.value?"active":""}`,style:{background:pt.value},onClick:()=>R(pt.value),"aria-label":pt.label},pt.value))})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"TOOLS"}),lt.jsxs("div",{className:"tool-buttons",children:[lt.jsx("button",{onClick:()=>b("pen"),className:`tool-button ${p==="pen"?"active":""}`,children:"Pen"}),lt.jsx("button",{onClick:()=>b("eraser"),className:`tool-button ${p==="eraser"?"active":""}`,children:"Eraser"})]})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"BRUSH SIZE"}),lt.jsxs("div",{className:"brush-size-control",children:[lt.jsx("input",{type:"range",min:"1",max:"10",value:E,onChange:pt=>z(parseInt(pt.target.value)),className:"brush-slider"}),lt.jsx("span",{className:"brush-value",children:E})]})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"INPUT MODE"}),lt.jsx("button",{className:`input-mode-toggle ${G==="all"?"all":""}`,onClick:Gt,children:G==="stylus-only"?"Stylus only":"All inputs"})]}),lt.jsxs("div",{className:"sidebar-section",children:[lt.jsx("h3",{className:"sidebar-label",children:"HISTORY"}),lt.jsxs("div",{className:"history-buttons",children:[lt.jsx("button",{onClick:Lt,className:"history-button",disabled:y.current.length===0,children:"Undo"}),lt.jsx("button",{onClick:Xt,className:"history-button",disabled:U.current.length===0,children:"Redo"}),lt.jsx("button",{onClick:Ft,className:"history-button danger",children:"Clear"})]})]})]}),lt.jsx("div",{className:"annotation-canvas-panel",children:lt.jsx("div",{className:"annotation-canvas-frame",ref:X,onTouchMove:pt=>pt.preventDefault(),onTouchStart:pt=>pt.preventDefault(),children:lt.jsxs(Zp,{ref:x,width:L.width,height:L.height,onPointerDown:et,onPointerMove:gt,onPointerUp:Ot,onPointerLeave:Ot,onTouchMove:pt=>pt.preventDefault(),onTouchStart:pt=>pt.preventDefault(),className:"annotation-stage",children:[F&&lt.jsx(jr,{listening:!1,children:lt.jsx(Ip,{image:A,x:F.x,y:F.y,width:F.width,height:F.height})}),lt.jsx(jr,{listening:!1,children:d.lines&&d.lines.map((pt,Nt)=>lt.jsx(pc,{points:P(pt.points),stroke:pt.color||"black",strokeWidth:(pt.strokeWidth||3)*k.x,tension:.5,lineCap:"round",lineJoin:"round"},`student-${Nt}`))}),lt.jsx(jr,{children:w.map((pt,Nt)=>lt.jsx(pc,{points:P(pt.points),stroke:pt.color,strokeWidth:$(pt),tension:.5,lineCap:"round",lineJoin:"round"},`annotation-${Nt}`))})]})})})]})]})})})},Y5=async(d,n=800,s=600,r=.7)=>{const o=await createImageBitmap(d),h=Math.min(n/o.width,s/o.height,1),c=Math.round(o.width*h),g=Math.round(o.height*h),p=document.createElement("canvas");p.width=c,p.height=g,p.getContext("2d").drawImage(o,0,0,c,g);const O=await new Promise((E,z)=>{p.toBlob(S=>{S?E(S):z(new Error("Failed to compress image"))},"image/jpeg",r)}),R=await new Promise((E,z)=>{const S=new FileReader;S.onload=()=>E(S.result),S.onerror=z,S.readAsDataURL(O)});return{blob:O,dataUrl:R,width:c,height:g,size:O.size}},q5=()=>{const[d,n]=nm(),s=wp(),r=()=>{const Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let pt="";for(let Nt=0;Nt<6;Nt++)pt+=Ut.charAt(Math.floor(Math.random()*Ut.length));return pt},o=()=>{const Ut=d.get("room");if(Ut)return Ut;const pt=r();return n({room:pt}),pt},[h]=An.useState(o),[c,g]=Ct.useState(null),[p,b]=Ct.useState(null),[O,R]=Ct.useState(!1),[E]=Ct.useState(`teacher-${Math.random().toString(36).substring(7)}`),[z,S]=Ct.useState(()=>{const Ut=parseInt(d.get("bot"))||0,pt={};if(Ut>0)for(let Nt=1;Nt<=Ut;Nt++){const oe=`bot-${Nt}`;pt[oe]={clientId:oe,name:`Bot ${Nt}`,lines:[],lastUpdate:Date.now()-Nt*1e3,isActive:!0,isFlagged:!1}}return pt}),[H,w]=Ct.useState(null),[Y,G]=Ct.useState({}),[D,j]=Ct.useState(""),[M,A]=Ct.useState("all"),[T,y]=Ct.useState(()=>{const Ut=localStorage.getItem("teacherDashboardHideNames");return Ut?JSON.parse(Ut):!1}),[U,N]=Ct.useState(()=>{const Ut=localStorage.getItem("teacherDashboardCardsPerRow");return Ut?parseInt(Ut):3}),[q,I]=Ct.useState(null),[Z,K]=Ct.useState(""),[X,x]=Ct.useState(!1),[L,Q]=Ct.useState(null),k=Ct.useRef(null),nt=Ct.useRef(!1);Ct.useEffect(()=>{localStorage.setItem("teacherDashboardHideNames",JSON.stringify(T))},[T]),Ct.useEffect(()=>{localStorage.setItem("teacherDashboardCardsPerRow",U.toString())},[U]),Ct.useEffect(()=>((async()=>{try{const pt=`/api/token?clientId=${E}`,oe=await(await fetch(pt)).json(),Wt=new j5.Realtime({authCallback:async(Zt,re)=>{re(null,oe)},clientId:E});Wt.connection.on("connected",()=>{console.log("Connected to Ably"),R(!0)}),Wt.connection.on("disconnected",()=>{console.log("Disconnected from Ably"),R(!1)}),g(Wt);const ne=Wt.channels.get(`room-${h}`);ne.subscribe("student-layer",Zt=>{console.log(" Teacher received student layer from",Zt.clientId),nt.current=!0,S(re=>{var Ue,rn,Je;return{...re,[Zt.clientId]:{...re[Zt.clientId]||{},clientId:Zt.clientId,name:((Ue=re[Zt.clientId])==null?void 0:Ue.name)||F(Zt.clientId),lines:Zt.data.lines||[],meta:Zt.data.meta||((rn=re[Zt.clientId])==null?void 0:rn.meta)||null,lastUpdate:Date.now(),isActive:!0,isFlagged:((Je=re[Zt.clientId])==null?void 0:Je.isFlagged)||!1}}}),setTimeout(()=>{nt.current=!1},100)}),ne.presence.subscribe("enter",Zt=>{var re;Zt.clientId!==E&&Zt.clientId.includes("student")&&(console.log(" Student joined:",Zt.clientId,"Name:",(re=Zt.data)==null?void 0:re.name),S(Ue=>{var rn,Je;return{...Ue,[Zt.clientId]:{...Ue[Zt.clientId]||{},clientId:Zt.clientId,name:((rn=Zt.data)==null?void 0:rn.name)||F(Zt.clientId),isActive:!0,lastUpdate:Date.now(),isFlagged:((Je=Ue[Zt.clientId])==null?void 0:Je.isFlagged)||!1}}}))}),ne.presence.subscribe("leave",Zt=>{Zt.clientId!==E&&Zt.clientId.includes("student")&&(console.log(" Student left:",Zt.clientId),S(re=>{var Ue;return{...re,[Zt.clientId]:{...re[Zt.clientId]||{},isActive:!1,isFlagged:((Ue=re[Zt.clientId])==null?void 0:Ue.isFlagged)||!1}}}))}),ne.subscribe("teacher-image",Zt=>{console.log(" Teacher dashboard received shared image"),Q(Zt.data)}),ne.presence.enter(),b(ne)}catch(pt){console.error("Failed to connect to Ably:",pt)}})(),()=>{c&&c.close()}),[h,E]);const F=Ut=>{const pt=Ut.match(/student-(\d+)/)||Ut.match(/student-([\w]+)/);return pt?`Student ${pt[1]}`:Ut},it=Ut=>{w(z[Ut.clientId]||Ut)},at=()=>{w(null)},P=Ut=>{if(!H||!p)return;const pt=H.clientId;G(Nt=>({...Nt,[pt]:Ut})),p.publish("teacher-annotation",{targetStudentId:pt,annotations:Ut,teacherId:E,timestamp:Date.now()}),console.log(" Published annotations for",pt)},J=Ut=>{S(pt=>{const Nt=pt[Ut];return Nt?{...pt,[Ut]:{...Nt,isFlagged:!Nt.isFlagged}}:pt}),w(pt=>pt&&pt.clientId===Ut?{...pt,isFlagged:!pt.isFlagged}:pt)},$=()=>{k.current&&(k.current.value="",k.current.click())},et=async Ut=>{var Nt;const pt=(Nt=Ut.target.files)==null?void 0:Nt[0];if(!pt){K("No file selected.");return}x(!0),K("");try{const{dataUrl:oe,width:Wt,height:ne}=await Y5(pt),Zt={dataUrl:oe,width:Wt,height:ne,filename:pt.name,timestamp:Date.now()};I(Zt),K("Image ready to send.")}catch(oe){console.error("Failed to upload image from dashboard:",oe),K("Upload failed. Please try again.")}finally{x(!1)}},gt=async()=>{if(!(!q||!p))try{await p.publish("teacher-image",q),Q(q),K("Image sent to all students.")}catch(Ut){console.error("Failed to send image:",Ut),K("Failed to send image.")}},Ot=()=>{I(null),K(""),k.current&&(k.current.value="")},Lt=()=>{c&&c.close(),s("/")},Xt=()=>Object.values(z).sort((Ut,pt)=>Ut.isActive&&!pt.isActive?-1:!Ut.isActive&&pt.isActive?1:(pt.lastUpdate||0)-(Ut.lastUpdate||0)),Ft=()=>{const Ut=Xt(),pt=D.trim().toLowerCase();return Ut.filter(Nt=>{const oe=pt?(Nt.name||Nt.clientId).toLowerCase().includes(pt):!0,Wt=M==="all"||M==="flagged"&&Nt.isFlagged;return oe&&Wt})},ce=Xt(),At=Ft(),Gt=ce.filter(Ut=>Ut.isActive).length,kt=H?z[H.clientId]||H:null;return lt.jsxs("div",{className:"teacher-dashboard",children:[lt.jsxs("div",{className:"dashboard-header",children:[lt.jsxs("div",{className:"header-left",children:[lt.jsx("button",{className:"back-btn",onClick:Lt,children:" Back"}),lt.jsx("h1",{children:"Teacher Dashboard"})]}),lt.jsx("div",{className:"header-center",children:lt.jsxs("div",{className:"room-code-display",children:[lt.jsx("div",{className:"room-code-label",children:"Room Code"}),lt.jsx("div",{className:"room-code-value",children:h}),lt.jsx("div",{className:"room-code-hint",children:"Share this code with students"})]})}),lt.jsxs("div",{className:"header-right",children:[lt.jsxs("div",{className:"connection-status",children:[lt.jsx("span",{className:`status-dot ${O?"online":"offline"}`}),O?"Connected":"Disconnected"]}),lt.jsxs("div",{className:"student-count",children:[lt.jsx("span",{className:"count-number",children:Gt}),lt.jsxs("span",{className:"count-label",children:["Active Student",Gt!==1?"s":""]})]})]})]}),lt.jsxs("div",{className:"dashboard-content",children:[lt.jsxs("div",{className:"image-sharing-panel",children:[lt.jsxs("div",{className:"image-panel-header",children:[lt.jsx("span",{className:"panel-icon",children:""}),lt.jsx("h3",{children:"Share Image with Students"})]}),lt.jsxs("div",{className:"image-panel-content",children:[lt.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:et,style:{display:"none"}}),q?lt.jsxs("div",{className:"image-preview-area",children:[lt.jsx("div",{className:"preview-label",children:"Preview:"}),lt.jsx("img",{src:q.dataUrl,alt:"Preview",className:"image-preview-thumbnail"}),lt.jsxs("div",{className:"image-actions",children:[lt.jsx("button",{className:"send-image-btn",onClick:gt,children:"Send to All Students"}),lt.jsx("button",{className:"clear-image-btn",onClick:Ot,children:"Clear"})]}),Z&&lt.jsx("span",{className:"image-message success",children:Z})]}):lt.jsxs("div",{className:"image-upload-area",children:[lt.jsx("button",{className:"upload-image-btn",onClick:$,disabled:X,children:X?"Uploading":"Choose Image"}),Z&&lt.jsx("span",{className:"image-message",children:Z})]})]})]}),lt.jsx("div",{className:"filter-section",children:lt.jsxs("div",{className:"filter-bar",children:[lt.jsxs("div",{className:"search-input-wrapper",children:[lt.jsx("span",{className:"search-icon",children:""}),lt.jsx("input",{type:"text",placeholder:"Filter students",value:D,onChange:Ut=>j(Ut.target.value),className:"search-input"}),D&&lt.jsx("button",{className:"clear-search-btn",onClick:()=>j(""),title:"Clear search",children:""})]}),lt.jsxs("label",{className:"hide-names-checkbox",children:[lt.jsx("input",{type:"checkbox",checked:T,onChange:Ut=>y(Ut.target.checked)}),lt.jsx("span",{children:"Hide names"})]}),lt.jsx("button",{type:"button",className:`flag-toggle-pill ${M==="flagged"?"active":""}`,onClick:()=>A(Ut=>Ut==="flagged"?"all":"flagged"),children:"Flagged only"}),lt.jsxs("select",{className:"cards-per-row-select",value:U,onChange:Ut=>N(Number(Ut.target.value)),children:[lt.jsx("option",{value:2,children:"Cards/row: 2"}),lt.jsx("option",{value:3,children:"Cards/row: 3"}),lt.jsx("option",{value:4,children:"Cards/row: 4"})]})]})}),ce.length===0?lt.jsxs("div",{className:"no-students",children:[lt.jsx("div",{className:"no-students-icon",children:""}),lt.jsx("h2",{children:"Waiting for Students..."}),lt.jsxs("p",{children:['Students will appear here when they join room "',h,'"']}),lt.jsx("p",{className:"hint",children:" Students can join by entering this room code on the landing page"})]}):At.length===0?lt.jsxs("div",{className:"no-results",children:[lt.jsx("div",{className:"no-results-icon",children:""}),lt.jsx("h3",{children:"No students found"}),lt.jsxs("p",{children:['No students match "',D,'"']}),lt.jsx("button",{className:"clear-filter-btn",onClick:()=>j(""),children:"Clear filter"})]}):lt.jsx("div",{className:"students-grid",style:{gridTemplateColumns:`repeat(${U}, 1fr)`},children:At.filter(Ut=>Ut&&Ut.clientId).map(Ut=>lt.jsx(L5,{student:Ut,onClick:it,onToggleFlag:J,teacherAnnotations:Y[Ut.clientId]||[],sharedImage:L,hideNames:T},Ut.clientId))})]}),lt.jsx(w5,{student:kt,isOpen:!!kt,isFlagged:kt==null?void 0:kt.isFlagged,onToggleFlag:J,onClose:at,onAnnotate:P,existingAnnotations:kt?Y[kt.clientId]||[]:[],sharedImage:L}),lt.jsx("div",{className:"dashboard-footer",children:lt.jsxs("p",{children:[" ",lt.jsx("strong",{children:"Tip:"})," Click on any student card to view their work and add annotations"]})})]})};function V5(){return lt.jsx(H2,{children:lt.jsxs(z2,{children:[lt.jsx(kd,{path:"/",element:lt.jsx(j2,{})}),lt.jsx(kd,{path:"/student",element:lt.jsx(G5,{})}),lt.jsx(kd,{path:"/teacher",element:lt.jsx(q5,{})})]})})}Yv.createRoot(document.getElementById("root")).render(lt.jsx(An.StrictMode,{children:lt.jsx(V5,{})}));
